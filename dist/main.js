!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=111)}([function(e,t,n){"use strict";e.exports=n(62)},function(e,t,n){e.exports=n(66)()},function(e,t){e.exports={SOCKET_CMDS:{NONE:"NONE",RESET:"reset",CONNECT:"connect",DISCONNECT:"disconnect",ACCEPT:"accept",REJECT:"reject",AUTH:"auth",JOIN_ROOM:"join-room",ROOM_JOIN_FEEDBACK:"join_room_feedback",LEAVE_ROOM:"leave-room",ROOM_FULL:"room-full",ROOM_IDLE:"room-idle",APPROVE:"approve",MESSAGE:"message",BRIDGE:"bridge",HANGUP:"hangup",CONTROL_ROOM:"control-room",SURVEY_CONNECT:"survey-connect",SURVEY_START:"survey-start",SURVEY_END:"survey-end",FACE_DETECTED:"face-detected",DATA_CONNECT:"data-connect",PROCESS_READY:"process-ready",PROCESS_START:"process-start",PROCESS_STARTED:"process-started",PROCESS_CONTROL:"process-control",PROCESS_STOP:"process-stop",DATA_SEND:"data-send",CONTROL:"control",PROJECTION_TEST:"projection-test",PROJECTION_CONNECT:"projection-connect",STAGE_CONTROL:"stage-control",RECORDING:"recording",UPLOAD_FINISH:"upload-finish",CONNECT_ERROR:"connect_error",HELLO:"hello"},DATA_TYPES:{QUESTION:"question",EMOTION:"emotion"},NAMESPACES:{CHAT:"chat-page",CONTROL:"control-page",PROJECTION:"projection-page"}}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(82),i=n(83),o=n(45),a=n(84);e.exports=function(e,t){return r(e)||i(e,t)||o(e,t)||a()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.default=e.exports,e.exports.__esModule=!0,n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,o,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,o,a,s],c=0;(l=new Error(t.replace(/%s/g,(function(){return u[c++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t){e.exports={TIMES:{AUTOACCEPT_WAIT:6e4,LOSING_FACE_NOTIFY:5e3,ICE_RECONNECTION_INTERVAL:5e3,DATA_UPLOAD_WAIT:5e3,PROCESS_UPDATE_INTERVAL:5e3,FACE_DETECTION_RETRY:200,FACE_DETECTION_DELAY:0,PROCESS_STOP_WAIT:2e4,SESSION_UPDATE_INTERVAL:1e3}}},function(e,t,n){e.exports=n(81)},function(e,t,n){var r=n(80);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(47).default,i=n(4);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?i(e):t},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}n.d(t,"a",(function(){return r})),r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},r.prototype.emitReserved=r.prototype.emit,r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l}));var r=n(9);function i(e,...t){return t.reduce((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t),{})}const o=r.a.setTimeout,a=r.a.clearTimeout;function s(e,t){t.useNativeTimers?(e.setTimeoutFn=o.bind(r.a),e.clearTimeoutFn=a.bind(r.a)):(e.setTimeoutFn=r.a.setTimeout.bind(r.a),e.clearTimeoutFn=r.a.clearTimeout.bind(r.a))}function l(e){return"string"==typeof e?function(e){let t=0,n=0;for(let r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(e):Math.ceil(1.33*(e.byteLength||e.size))}},function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return s}));var r=n(9);const i="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),o=r.a.WebSocket||r.a.MozWebSocket,a=!0,s="arraybuffer"},function(e,t,n){"use strict";(function(e,r,i,o,a,s){n.d(t,"a",(function(){return qJ})),n.d(t,"b",(function(){return hK})),n.d(t,"c",(function(){return vX})),n.d(t,"d",(function(){return YJ})),n.d(t,"e",(function(){return JJ})),n.d(t,"f",(function(){return XJ})),n.d(t,"g",(function(){return KJ})),n.d(t,"h",(function(){return _K})),n.d(t,"i",(function(){return bX})),n.d(t,"j",(function(){return p}));var l=Object.defineProperty,u=n(51),c=(e,t)=>{for(var n in t)l(e,n,{get:t[n],enumerable:!0})},p={};c(p,{Abs:()=>He,Acos:()=>Qe,Acosh:()=>Ge,AdadeltaOptimizer:()=>bh,AdagradOptimizer:()=>xh,AdamOptimizer:()=>wh,AdamaxOptimizer:()=>_h,Add:()=>Ke,AddN:()=>Je,All:()=>Xe,Any:()=>Ye,ArgMax:()=>Ze,ArgMin:()=>et,Asin:()=>tt,Asinh:()=>nt,Atan:()=>rt,Atan2:()=>ot,Atanh:()=>it,AvgPool:()=>at,AvgPool3D:()=>lt,AvgPool3DGrad:()=>ut,AvgPoolGrad:()=>st,BackendWasm:()=>eG,BatchMatMul:()=>ct,BatchToSpaceND:()=>pt,Bincount:()=>dt,BitwiseAnd:()=>ht,BroadcastArgs:()=>mt,BroadcastTo:()=>ft,Callback:()=>QS,CallbackList:()=>Ab,Cast:()=>gt,Ceil:()=>yt,ClipByValue:()=>vt,Complex:()=>bt,ComplexAbs:()=>xt,Concat:()=>wt,Conv2D:()=>_t,Conv2DBackpropFilter:()=>Ct,Conv2DBackpropInput:()=>St,Conv3D:()=>kt,Conv3DBackpropFilterV2:()=>Et,Conv3DBackpropInputV2:()=>Tt,Cos:()=>It,Cosh:()=>Pt,CropAndResize:()=>Rt,Cumprod:()=>Ot,Cumsum:()=>Nt,CustomCallback:()=>Mb,DataStorage:()=>$,DenseBincount:()=>At,DepthToSpace:()=>Dt,DepthwiseConv2dNative:()=>Vt,DepthwiseConv2dNativeBackpropFilter:()=>Mt,DepthwiseConv2dNativeBackpropInput:()=>Ft,Diag:()=>Lt,Dilation2D:()=>zt,Dilation2DBackpropFilter:()=>qt,Dilation2DBackpropInput:()=>jt,Draw:()=>$t,ENV:()=>Be,EarlyStopping:()=>JS,Einsum:()=>Ut,Elu:()=>Wt,EluGrad:()=>Ht,Environment:()=>ze,Equal:()=>Gt,Erf:()=>Qt,Exp:()=>Kt,ExpandDims:()=>Jt,Expm1:()=>Xt,FFT:()=>Yt,Fill:()=>Zt,FlipLeftRight:()=>en,Floor:()=>tn,FloorDiv:()=>nn,FromPixels:()=>ai,FusedBatchNorm:()=>rn,FusedConv2D:()=>ui,FusedDepthwiseConv2D:()=>ci,GPGPUContext:()=>EM,GatherNd:()=>an,GatherV2:()=>on,GraphModel:()=>AE,Greater:()=>sn,GreaterEqual:()=>ln,History:()=>Vb,IFFT:()=>cn,Identity:()=>un,Imag:()=>pn,InputSpec:()=>Mv,IsFinite:()=>dn,IsInf:()=>hn,IsNan:()=>fn,KernelBackend:()=>B,LRN:()=>Tn,LRNGrad:()=>In,LayerVariable:()=>Av,LayersModel:()=>Vx,LeakyRelu:()=>mn,Less:()=>gn,LessEqual:()=>yn,LinSpace:()=>vn,Log:()=>bn,Log1p:()=>xn,LogSoftmax:()=>kn,LogicalAnd:()=>wn,LogicalNot:()=>_n,LogicalOr:()=>Cn,LogicalXor:()=>Sn,LowerBound:()=>En,MathBackendCPU:()=>JT,MathBackendWebGL:()=>VF,MatrixBandPart:()=>Pn,Max:()=>On,MaxPool:()=>Rn,MaxPool3D:()=>Dn,MaxPool3DGrad:()=>Vn,MaxPoolGrad:()=>An,MaxPoolWithArgmax:()=>Mn,Maximum:()=>Nn,Mean:()=>Fn,Min:()=>Ln,Minimum:()=>zn,MirrorPad:()=>jn,Mod:()=>qn,MomentumOptimizer:()=>Sh,Multinomial:()=>$n,Multiply:()=>Bn,Neg:()=>Un,NonMaxSuppressionV3:()=>Hn,NonMaxSuppressionV4:()=>Qn,NonMaxSuppressionV5:()=>Gn,NotEqual:()=>Wn,OP_SCOPE_SUFFIX:()=>zo,OneHot:()=>Jn,OnesLike:()=>Kn,Optimizer:()=>vh,OptimizerConstructors:()=>Tf,Pack:()=>Xn,PadV2:()=>Yn,Pool:()=>Zn,Pow:()=>er,Prelu:()=>tr,Prod:()=>nr,RMSPropOptimizer:()=>kh,RNN:()=>qw,RaggedGather:()=>rr,RaggedRange:()=>ir,RaggedTensorToTensor:()=>or,Range:()=>ar,Rank:()=>ao,Real:()=>sr,RealDiv:()=>Bt,Reciprocal:()=>lr,Reduction:()=>$d,Relu:()=>ur,Relu6:()=>mr,Reshape:()=>cr,ResizeBilinear:()=>hr,ResizeBilinearGrad:()=>fr,ResizeNearestNeighbor:()=>pr,ResizeNearestNeighborGrad:()=>dr,Reverse:()=>gr,RotateWithOffset:()=>si,Round:()=>yr,Rsqrt:()=>vr,SGDOptimizer:()=>Ch,ScatterNd:()=>br,SearchSorted:()=>wr,Select:()=>_r,Selu:()=>Cr,Sequential:()=>zx,Sigmoid:()=>Ir,Sign:()=>Tr,Sin:()=>kr,Sinh:()=>Er,Slice:()=>Sr,Softmax:()=>Dr,Softplus:()=>Pr,SpaceToBatchND:()=>Rr,SparseFillEmptyRows:()=>Vr,SparseReshape:()=>Mr,SparseSegmentMean:()=>Fr,SparseSegmentSum:()=>Lr,SparseToDense:()=>zr,SplitV:()=>Ar,Sqrt:()=>Or,Square:()=>qr,SquaredDifference:()=>jr,StaticRegexReplace:()=>$r,Step:()=>oi,StridedSlice:()=>Br,StringNGrams:()=>Ur,StringSplit:()=>Wr,StringToHashBucketFast:()=>Hr,Sub:()=>Qr,Sum:()=>Nr,SymbolicTensor:()=>Fv,Tan:()=>Gr,Tanh:()=>Kr,Tensor:()=>ro,TensorBuffer:()=>eo,TensorScatterUpdate:()=>xr,Tile:()=>Jr,TopK:()=>Xr,Transform:()=>Yr,Transpose:()=>Zr,Unique:()=>ei,Unpack:()=>ti,UnsortedSegmentSum:()=>ni,UpperBound:()=>ri,Variable:()=>oo,ZerosLike:()=>ii,_FusedMatMul:()=>li,abs:()=>fs,acos:()=>ms,acosh:()=>gs,add:()=>cs,addN:()=>ys,all:()=>vs,any:()=>bs,argMax:()=>xs,argMin:()=>ws,asin:()=>_s,asinh:()=>Cs,atan:()=>Ss,atan2:()=>ks,atanh:()=>Es,avgPool:()=>Bs,avgPool3d:()=>Us,backend:()=>ls,backend_util:()=>Rf,basicLSTMCell:()=>Js,batchNorm:()=>Zs,batchNorm2d:()=>el,batchNorm3d:()=>tl,batchNorm4d:()=>nl,batchToSpaceND:()=>Xs,bincount:()=>rl,bitwiseAnd:()=>il,booleanMaskAsync:()=>Up,broadcastArgs:()=>ol,broadcastTo:()=>al,broadcast_util:()=>Ol,browser:()=>Kh,buffer:()=>za,callbacks:()=>ZS,cast:()=>ja,ceil:()=>sl,clipByValue:()=>ul,clone:()=>qa,complex:()=>qo,concat:()=>Ws,concat1d:()=>cl,concat2d:()=>pl,concat3d:()=>dl,concat4d:()=>hl,constraints:()=>Xv,conv1d:()=>ml,conv2d:()=>fl,conv2dTranspose:()=>yl,conv3d:()=>vl,conv3dTranspose:()=>xl,copyRegisteredKernels:()=>_i,cos:()=>wl,cosh:()=>_l,cosineWindow:()=>Yp,cumprod:()=>Cl,cumsum:()=>Sl,customGrad:()=>Nu,data:()=>FE,denseBincount:()=>kl,deprecationWarn:()=>Ha,depthToSpace:()=>El,depthwiseConv2d:()=>Tl,deregisterOp:()=>rk,device_util:()=>Oo,diag:()=>Il,dilation2d:()=>Pl,disableDeprecationWarnings:()=>Wa,dispose:()=>Ya,disposeVariables:()=>Qa,div:()=>ds,divNoNan:()=>Fl,dot:()=>Ll,dropout:()=>Jp,einsum:()=>zl,elu:()=>jl,enableDebugMode:()=>Ua,enableProdMode:()=>Ba,enclosingPowerOfTwo:()=>Xp,engine:()=>Ga,ensureShape:()=>ql,env:()=>qe,equal:()=>Dl,erf:()=>$l,euclideanNorm:()=>ou,exp:()=>au,expandDims:()=>su,expm1:()=>lu,eye:()=>cu,fft:()=>hp,fill:()=>ll,findBackend:()=>os,findBackendFactory:()=>as,floor:()=>pu,floorDiv:()=>ps,forceHalfFloat:()=>FF,fused:()=>ed,gather:()=>du,gatherND:()=>Kp,gather_util:()=>af,getBackend:()=>rs,getGradient:()=>gi,getKernel:()=>mi,getKernelsForBackend:()=>yi,getThreadsCount:()=>fG,gpgpu_util:()=>rM,grad:()=>Eu,grads:()=>Tu,greater:()=>hu,greaterEqual:()=>fu,ifft:()=>fp,imag:()=>mu,image:()=>uh,inTopKAsync:()=>Zp,initializers:()=>db,input:()=>$x,io:()=>Th,irfft:()=>mp,isFinite:()=>gu,isInf:()=>yu,isNaN:()=>vu,keep:()=>Za,kernel_impls:()=>Vm,layers:()=>Pb,leakyRelu:()=>bu,less:()=>xu,lessEqual:()=>wu,linalg:()=>ch,linspace:()=>_u,loadGraphModel:()=>DE,loadGraphModelSync:()=>VE,loadLayersModel:()=>Lx,localResponseNormalization:()=>Cu,log:()=>Su,log1p:()=>ku,logSigmoid:()=>Vu,logSoftmax:()=>Fu,logSumExp:()=>Lu,logicalAnd:()=>zu,logicalNot:()=>ju,logicalOr:()=>qu,logicalXor:()=>$u,losses:()=>ph,lowerBound:()=>Wu,matMul:()=>Hs,math:()=>Qh,max:()=>Xl,maxPool:()=>Hu,maxPool3d:()=>Qu,maxPoolWithArgmax:()=>Gu,maximum:()=>Ku,mean:()=>Ju,memory:()=>Ka,meshgrid:()=>Zu,metrics:()=>ES,min:()=>Yl,minimum:()=>ec,mirrorPad:()=>tc,mod:()=>nc,model:()=>jx,models:()=>$S,moments:()=>rc,movingAverage:()=>Hp,mul:()=>hs,multiRNNCell:()=>ic,multinomial:()=>oc,neg:()=>Au,nextFrame:()=>Of,norm:()=>iu,notEqual:()=>ac,oneHot:()=>sc,ones:()=>Yu,onesLike:()=>lc,op:()=>jo,outerProduct:()=>uc,pad:()=>cc,pad1d:()=>pc,pad2d:()=>dc,pad3d:()=>hc,pad4d:()=>fc,pool:()=>gc,pow:()=>Zl,prelu:()=>yc,print:()=>$a,prod:()=>vc,profile:()=>Ja,raggedGather:()=>bc,raggedRange:()=>xc,raggedTensorToTensor:()=>wc,rand:()=>_c,randomGamma:()=>zc,randomNormal:()=>jc,randomStandardNormal:()=>qc,randomUniform:()=>$c,randomUniformInt:()=>Bc,range:()=>Uc,ready:()=>ns,real:()=>Wc,reciprocal:()=>Hc,registerBackend:()=>ss,registerCallbackConstructor:()=>Bx,registerGradient:()=>bi,registerKernel:()=>vi,registerOp:()=>tk,regularizers:()=>BS,relu:()=>Qc,relu6:()=>Gc,removeBackend:()=>is,reshape:()=>$s,reverse:()=>Kc,reverse1d:()=>Jc,reverse2d:()=>Xc,reverse3d:()=>Yc,reverse4d:()=>Zc,rfft:()=>yp,round:()=>ep,rsqrt:()=>tp,scalar:()=>eu,scatterND:()=>Qp,scatter_util:()=>Op,searchSorted:()=>Uu,selu:()=>np,separableConv2d:()=>rp,sequential:()=>qx,serialization:()=>fh,setBackend:()=>ts,setPlatform:()=>us,setThreadsCount:()=>hG,setWasmPath:()=>uG,setWasmPaths:()=>cG,setWebGLContext:()=>ID,setdiff1dAsync:()=>ip,shared:()=>XT,sigmoid:()=>Qs,sign:()=>op,signal:()=>lh,sin:()=>ap,sinh:()=>sp,slice:()=>Gs,slice1d:()=>lp,slice2d:()=>up,slice3d:()=>cp,slice4d:()=>pp,slice_util:()=>lf,softmax:()=>dp,softplus:()=>Du,spaceToBatchND:()=>mc,sparse:()=>dh,sparseToDense:()=>Gp,spectral:()=>sh,split:()=>gp,sqrt:()=>tu,square:()=>nu,squaredDifference:()=>vp,squeeze:()=>bp,stack:()=>xp,step:()=>wp,stridedSlice:()=>_p,string:()=>hh,sub:()=>Mu,sum:()=>ru,sumOutType:()=>go,tan:()=>Cp,tanh:()=>Ks,tensor:()=>Bo,tensor1d:()=>Sp,tensor2d:()=>kp,tensor3d:()=>Ep,tensor4d:()=>Tp,tensor5d:()=>Ip,tensor6d:()=>Pp,tensorScatterUpdate:()=>Dp,tensor_util:()=>ho,test_util:()=>Sc,tidy:()=>Xa,tile:()=>uu,time:()=>es,topk:()=>Vp,train:()=>If,transpose:()=>Wp,truncatedNormal:()=>Mp,unique:()=>Fp,unregisterGradient:()=>wi,unregisterKernel:()=>xi,unsortedSegmentSum:()=>Lp,unstack:()=>zp,upcastType:()=>mo,upperBound:()=>jp,util:()=>Si,valueAndGrad:()=>Iu,valueAndGrads:()=>Pu,variable:()=>qp,variableGrads:()=>Ou,version:()=>gG,version_converter:()=>ME,version_core:()=>Ef,version_cpu:()=>CO,version_layers:()=>gx,version_wasm:()=>mG,version_webgl:()=>MF,webgl:()=>LF,webgl_util:()=>_D,where:()=>Vl,whereAsync:()=>Bp,zeros:()=>Xu,zerosLike:()=>Ml});var d=Object.create,h=Object.defineProperty,f=Object.getOwnPropertyDescriptor,m=Object.getOwnPropertyNames,g=Object.getPrototypeOf,y=Object.prototype.hasOwnProperty,v=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),b=(e,t)=>{for(var n in t)h(e,n,{get:t[n],enumerable:!0})},x=(e,t,n)=>(n=null!=e?d(g(e)):{},((e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of m(t))!y.call(e,i)&&i!==n&&h(e,i,{get:()=>t[i],enumerable:!(r=f(t,i))||r.enumerable});return e})(!t&&e&&e.__esModule?n:h(n,"default",{value:e,enumerable:!0}),e)),w=v((e,t)=>{t.exports=r;var n=null;try{n=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function r(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function i(e){return!0===(e&&e.__isLong__)}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=i;var o={},a={};function s(e,t){var n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=a[e])?r:(n=u(e,(0|e)<0?-1:0,!0),i&&(a[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=o[e])?r:(n=u(e,e<0?-1:0,!1),i&&(o[e]=n),n)}function l(e,t){if(isNaN(e))return t?v:y;if(t){if(e<0)return v;if(e>=f)return C}else{if(e<=-m)return S;if(e+1>=m)return _}return e<0?l(-e,t).neg():u(e%h|0,e/h|0,t)}function u(e,t,n){return new r(e,t,n)}r.fromInt=s,r.fromNumber=l,r.fromBits=u;var c=Math.pow;function p(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return y;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return p(e.substring(1),t,n).neg();for(var i=l(c(n,8)),o=y,a=0;a<e.length;a+=8){var s=Math.min(8,e.length-a),u=parseInt(e.substring(a,a+s),n);if(s<8){var d=l(c(n,s));o=o.mul(d).add(l(u))}else o=(o=o.mul(i)).add(l(u))}return o.unsigned=t,o}function d(e,t){return"number"==typeof e?l(e,t):"string"==typeof e?p(e,t):u(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=p,r.fromValue=d;var h=4294967296,f=h*h,m=f/2,g=s(1<<24),y=s(0);r.ZERO=y;var v=s(0,!0);r.UZERO=v;var b=s(1);r.ONE=b;var x=s(1,!0);r.UONE=x;var w=s(-1);r.NEG_ONE=w;var _=u(-1,2147483647,!1);r.MAX_VALUE=_;var C=u(-1,-1,!0);r.MAX_UNSIGNED_VALUE=C;var S=u(0,-2147483648,!1);r.MIN_VALUE=S;var k=r.prototype;k.toInt=function(){return this.unsigned?this.low>>>0:this.low},k.toNumber=function(){return this.unsigned?(this.high>>>0)*h+(this.low>>>0):this.high*h+(this.low>>>0)},k.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(S)){var t=l(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=l(c(e,6),this.unsigned),o=this,a="";;){var s=o.div(i),u=(o.sub(s.mul(i)).toInt()>>>0).toString(e);if((o=s).isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}},k.getHighBits=function(){return this.high},k.getHighBitsUnsigned=function(){return this.high>>>0},k.getLowBits=function(){return this.low},k.getLowBitsUnsigned=function(){return this.low>>>0},k.getNumBitsAbs=function(){if(this.isNegative())return this.eq(S)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return 0!=this.high?t+33:t+1},k.isZero=function(){return 0===this.high&&0===this.low},k.eqz=k.isZero,k.isNegative=function(){return!this.unsigned&&this.high<0},k.isPositive=function(){return this.unsigned||this.high>=0},k.isOdd=function(){return 1==(1&this.low)},k.isEven=function(){return 0==(1&this.low)},k.equals=function(e){return i(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},k.eq=k.equals,k.notEquals=function(e){return!this.eq(e)},k.neq=k.notEquals,k.ne=k.notEquals,k.lessThan=function(e){return this.comp(e)<0},k.lt=k.lessThan,k.lessThanOrEqual=function(e){return this.comp(e)<=0},k.lte=k.lessThanOrEqual,k.le=k.lessThanOrEqual,k.greaterThan=function(e){return this.comp(e)>0},k.gt=k.greaterThan,k.greaterThanOrEqual=function(e){return this.comp(e)>=0},k.gte=k.greaterThanOrEqual,k.ge=k.greaterThanOrEqual,k.compare=function(e){if(i(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},k.comp=k.compare,k.negate=function(){return!this.unsigned&&this.eq(S)?S:this.not().add(b)},k.neg=k.negate,k.add=function(e){i(e)||(e=d(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,a=e.high>>>16,s=65535&e.high,l=e.low>>>16,c=0,p=0,h=0,f=0;return h+=(f+=o+(65535&e.low))>>>16,p+=(h+=r+l)>>>16,c+=(p+=n+s)>>>16,c+=t+a,u((h&=65535)<<16|(f&=65535),(c&=65535)<<16|(p&=65535),this.unsigned)},k.subtract=function(e){return i(e)||(e=d(e)),this.add(e.neg())},k.sub=k.subtract,k.multiply=function(e){if(this.isZero())return y;if(i(e)||(e=d(e)),n)return u(n.mul(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned);if(e.isZero())return y;if(this.eq(S))return e.isOdd()?S:y;if(e.eq(S))return this.isOdd()?S:y;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return l(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,o=this.low>>>16,a=65535&this.low,s=e.high>>>16,c=65535&e.high,p=e.low>>>16,h=65535&e.low,f=0,m=0,v=0,b=0;return v+=(b+=a*h)>>>16,m+=(v+=o*h)>>>16,v&=65535,m+=(v+=a*p)>>>16,f+=(m+=r*h)>>>16,m&=65535,f+=(m+=o*p)>>>16,m&=65535,f+=(m+=a*c)>>>16,f+=t*h+r*p+o*c+a*s,u((v&=65535)<<16|(b&=65535),(f&=65535)<<16|(m&=65535),this.unsigned)},k.mul=k.multiply,k.divide=function(e){if(i(e)||(e=d(e)),e.isZero())throw Error("division by zero");var t,r,o;if(n)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?n.div_u:n.div_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:y;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return x;o=v}else{if(this.eq(S))return e.eq(b)||e.eq(w)?S:e.eq(S)?b:(t=this.shr(1).div(e).shl(1)).eq(y)?e.isNegative()?b:w:(r=this.sub(e.mul(t)),o=t.add(r.div(e)));if(e.eq(S))return this.unsigned?v:y;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=y}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(t)/Math.LN2),s=a<=48?1:c(2,a-48),p=l(t),h=p.mul(e);h.isNegative()||h.gt(r);)h=(p=l(t-=s,this.unsigned)).mul(e);p.isZero()&&(p=b),o=o.add(p),r=r.sub(h)}return o},k.div=k.divide,k.modulo=function(e){return i(e)||(e=d(e)),n?u((this.unsigned?n.rem_u:n.rem_s)(this.low,this.high,e.low,e.high),n.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},k.mod=k.modulo,k.rem=k.modulo,k.not=function(){return u(~this.low,~this.high,this.unsigned)},k.and=function(e){return i(e)||(e=d(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},k.or=function(e){return i(e)||(e=d(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},k.xor=function(e){return i(e)||(e=d(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},k.shiftLeft=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},k.shl=k.shiftLeft,k.shiftRight=function(e){return i(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},k.shr=k.shiftRight,k.shiftRightUnsigned=function(e){if(i(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?u(this.low>>>e|t<<32-e,t>>>e,this.unsigned):u(32===e?t:t>>>e-32,0,this.unsigned)},k.shru=k.shiftRightUnsigned,k.shr_u=k.shiftRightUnsigned,k.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},k.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},k.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},k.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},k.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}}),_=v(()=>{}),C=v(()=>{}),S=v((e,t)=>{!function(e,t,n){function r(e){var t=this,n=function(){var e=4022871197;return function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)}}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function o(e,t){var n=new r(e),o=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,o&&("object"==typeof o&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:n&&n.amd?n((function(){return o})):this.alea=o}(0,"object"==typeof t&&t,"function"==typeof define&&define)}),k=v((e,t)=>{!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function o(e,t){var n=new r(e),o=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,o&&("object"==typeof o&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:n&&n.amd?n((function(){return o})):this.xor128=o}(0,"object"==typeof t&&t,"function"==typeof define&&define)}),E=v((e,t)=>{!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function o(e,t){var n=new r(e),o=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,o&&("object"==typeof o&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:n&&n.amd?n((function(){return o})):this.xorwow=o}(0,"object"==typeof t&&t,"function"==typeof define&&define)}),T=v((e,t)=>{!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],n^=(e^=e<<13)^e<<9,r[i]=n,t.i=i+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function o(e,t){null==e&&(e=+new Date);var n=new r(e),o=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,o&&(o.x&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:n&&n.amd?n((function(){return o})):this.xorshift7=o}(0,"object"==typeof t&&t,"function"==typeof define&&define)}),I=v((e,t)=>{!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,i=t.X,o=t.i;return t.w=r=r+1640531527|0,n=i[o+34&127],e=i[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=i[o]=n^e,t.i=o,n+(r^r>>>16)|0},function(e,t){var n,r,i,o,a,s=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),i=0,o=-32;o<l;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(a=a+1640531527|0,i=0==(n=s[127&o]^=r+a)?i+1:0);for(i>=128&&(s[127&(t&&t.length||0)]=-1),i=127,o=512;o>0;--o)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[i]=r^n;e.w=a,e.X=s,e.i=i}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function o(e,t){null==e&&(e=+new Date);var n=new r(e),o=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,o&&(o.X&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:n&&n.amd?n((function(){return o})):this.xor4096=o}(0,"object"==typeof t&&t,"function"==typeof define&&define)}),P=v((e,t)=>{!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function o(e,t){var n=new r(e),o=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,o&&("object"==typeof o&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:n&&n.amd?n((function(){return o})):this.tychei=o}(0,"object"==typeof t&&t,"function"==typeof define&&define)}),O=v(()=>{}),N=v((e,t)=>{!function(e,r,i){var o,a=256,s="random",l=i.pow(a,6),u=i.pow(2,52),c=2*u,p=255;function d(t,n,p){var d=[],y=m(function e(t,n){var r,i=[],o=typeof t;if(n&&"object"==o)for(r in t)try{i.push(e(t[r],n-1))}catch(e){}return i.length?i:"string"==o?t:t+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[t,g(r)]:null==t?function(){try{var t;return o&&(t=o.randomBytes)?t=t(a):(t=new Uint8Array(a),(e.crypto||e.msCrypto).getRandomValues(t)),g(t)}catch(t){var n=e.navigator,i=n&&n.plugins;return[+new Date,e,i,e.screen,g(r)]}}():t,3),d),v=new h(d),b=function(){for(var e=v.g(6),t=l,n=0;e<u;)e=(e+n)*a,t*=a,n=v.g(1);for(;e>=c;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|v.g(4)},b.quick=function(){return v.g(4)/4294967296},b.double=b,m(g(v.S),r),(n.pass||p||function(e,t,n,r){return r&&(r.S&&f(r,v),e.state=function(){return f(v,{})}),n?(i[s]=e,t):e})(b,y,"global"in n?n.global:this==i,n.state)}function h(e){var t,n=e.length,r=this,i=0,o=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);i<a;)s[i]=i++;for(i=0;i<a;i++)s[i]=s[o=p&o+e[i%n]+(t=s[i])],s[o]=t;(r.g=function(e){for(var t,n=0,i=r.i,o=r.j,s=r.S;e--;)t=s[i=p&i+1],n=n*a+s[p&(s[i]=s[o=p&o+t])+(s[o]=t)];return r.i=i,r.j=o,n})(a)}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){for(var n,r=e+"",i=0;i<r.length;)t[p&i]=p&(n^=19*t[p&i])+r.charCodeAt(i++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(m(i.random(),r),"object"==typeof t&&t.exports){t.exports=d;try{o=O()}catch(e){}}else"function"==typeof define&&n(38)?define((function(){return d})):i.seedrandom=d}("undefined"!=typeof self?self:e,[],Math)}),R=v((e,t)=>{var n=S(),r=k(),i=E(),o=T(),a=I(),s=P(),l=N();l.alea=n,l.xor128=r,l.xorwow=i,l.xorshift7=o,l.xor4096=a,l.tychei=s,t.exports=l}),A=v(()=>{}),D=v(()=>{}),V=v(()=>{}),M=v(()=>{}),F=v(()=>{}),L=v(()=>{}),z=v((t,a)=>{var s,l=(s=(s="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||e,function(e){function t(){return A.buffer!=q&&X(A.buffer),B}function n(){return A.buffer!=q&&X(A.buffer),U}function a(){return A.buffer!=q&&X(A.buffer),W}function l(){return A.buffer!=q&&X(A.buffer),H}var u,c,p,d=void 0!==(e=e||{})?e:{};d.ready=new Promise((function(e,t){u=e,c=t})),void 0!==r&&r.listeners&&(p={uncaughtException:r.listeners("uncaughtException"),unhandledRejection:r.listeners("unhandledRejection")});var h,f,m,g=Object.assign({},d),y=[],v=(e,t)=>{throw t},b="object"==typeof window,x="function"==typeof importScripts,w="object"==typeof r&&"object"==typeof r.versions&&"string"==typeof r.versions.node,_=d.ENVIRONMENT_IS_PTHREAD||!1,C="";function S(e){return d.locateFile?d.locateFile(e,C):C+e}if(w){var k=D(),E=V();let e;C=x?E.dirname(C)+"/":i+"/",h=(e,t)=>(e=pe(e)?new URL(e):E.normalize(e),k.readFileSync(e,t?void 0:"utf8")),m=e=>{var t=h(e,!0);return t.buffer||(t=new Uint8Array(t)),t},f=(e,t,n)=>{e=pe(e)?new URL(e):E.normalize(e),k.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},r.argv.length>1&&r.argv[1].replace(/\\/g,"/"),y=r.argv.slice(2),r.on("uncaughtException",(function(e){if(!(e instanceof fe))throw e})),r.on("unhandledRejection",(function(e){throw e})),v=(e,t)=>{if(re())throw r.exitCode=e,t;(function(e){e instanceof fe||N("exiting due to exception: "+e)})(t),r.exit(e)},d.inspect=function(){return"[Emscripten Module object]"};try{e=M()}catch(e){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),e}o.Worker=e.Worker}else(b||x)&&(x?C=self.location.href:"undefined"!=typeof document&&document.currentScript&&(C=document.currentScript.src),void 0!==s&&s&&(C=s),C=0!==C.indexOf("blob:")?C.substr(0,C.replace(/[?#].*/,"").lastIndexOf("/")+1):"",w||(h=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},x&&(m=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),f=(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)}));w&&"undefined"==typeof performance&&(o.performance=F().performance);var T=console.log.bind(console),I=console.warn.bind(console);w&&(T=e=>k.writeSync(1,e+"\n"),I=e=>k.writeSync(2,e+"\n"));var P,O=d.print||T,N=d.printErr||I;Object.assign(d,g),g=null,d.arguments&&(y=d.arguments),d.thisProgram&&d.thisProgram,d.quit&&(v=d.quit),Atomics.load,Atomics.store,Atomics.compareExchange,d.wasmBinary&&(P=d.wasmBinary);var R=d.noExitRuntime||!0;"object"!=typeof WebAssembly&&ue("no native wasm support detected");var A,z,j,q,$,B,U,W,H,Q=!1,G="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function K(e,t,n){for(var r=(t>>>=0)+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.buffer&&G)return G.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,i):e.subarray(t,i));for(var o="";t<i;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var l=63&e[t++];if((a=224==(240&a)?(15&a)<<12|s<<6|l:(7&a)<<18|s<<12|l<<6|63&e[t++])<65536)o+=String.fromCharCode(a);else{var u=a-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&a)<<6|s)}else o+=String.fromCharCode(a)}return o}function J(e,n){return(e>>>=0)?K(t(),e,n):""}function X(e){q=e,d.HEAP8=$=new Int8Array(e),d.HEAP16=new Int16Array(e),d.HEAP32=U=new Int32Array(e),d.HEAPU8=B=new Uint8Array(e),d.HEAPU16=new Uint16Array(e),d.HEAPU32=W=new Uint32Array(e),d.HEAPF32=new Float32Array(e),d.HEAPF64=H=new Float64Array(e)}_&&(q=d.buffer);var Y=d.INITIAL_MEMORY||16777216;if(_)A=d.wasmMemory,q=d.buffer;else if(d.wasmMemory)A=d.wasmMemory;else if(!((A=new WebAssembly.Memory({initial:Y/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw N("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),w&&N("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");A&&(q=A.buffer),Y=q.byteLength,X(q);var Z,ee=[],te=[],ne=[];function re(){return R}function ie(){!_&&xe(te)}var oe,ae=0,se=null,le=null;function ue(e){d.onAbort&&d.onAbort(e),N(e="Aborted("+e+")"),Q=!0,j=1,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw c(t),t}function ce(e){return e.startsWith("data:application/octet-stream;base64,")}function pe(e){return e.startsWith("file://")}function de(e){try{if(e==oe&&P)return new Uint8Array(P);if(m)return m(e);throw"both async and sync fetching of the wasm failed"}catch(e){ue(e)}}ce(oe="tfjs-backend-wasm-threaded-simd.wasm")||(oe=S(oe));var he={};function fe(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function me(e){var t=be.pthreads[e];(function(e,t){e||ue(t)})(t),be.returnWorkerToPool(t)}function ge(e){var t=be.getNewWorker();if(!t)return 6;be.runningWorkers.push(t),be.pthreads[e.pthread_ptr]=t,t.pthread_ptr=e.pthread_ptr;var n={cmd:"run",start_routine:e.startRoutine,arg:e.arg,pthread_ptr:e.pthread_ptr};return t.runPthread=()=>{w&&t.ref(),t.postMessage(n,e.transferList),delete t.runPthread},t.loaded&&t.runPthread(),0}function ye(e){if(_)return Ie(1,1,e);j=e,re()||(be.terminateAllThreads(),d.onExit&&d.onExit(e),Q=!0),v(e,new fe(e))}var ve=function(e,t){if(j=e,!t&&_)throw we(e),"unwind";ye(e)},be={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init:function(){_?be.initWorker():be.initMainThread()},initMainThread:function(){for(var e=8;e--;)be.allocateUnusedWorker()},initWorker:function(){R=!1},setExitStatus:function(e){j=e},terminateAllThreads:function(){for(var e of Object.values(be.pthreads))be.returnWorkerToPool(e);for(var e of be.unusedWorkers)e.terminate();be.unusedWorkers=[]},returnWorkerToPool:function(e){var t=e.pthread_ptr;delete be.pthreads[t],be.unusedWorkers.push(e),be.runningWorkers.splice(be.runningWorkers.indexOf(e),1),e.pthread_ptr=0,w&&e.unref(),Ge(t)},receiveObjectTransfer:function(e){},threadInitTLS:function(){be.tlsInitFunctions.forEach(e=>e())},loadWasmModuleToWorker:function(e,t){e.onmessage=n=>{var r=n.data,i=r.cmd;if(e.pthread_ptr&&(be.currentProxiedOperationCallerThread=e.pthread_ptr),r.targetThread&&r.targetThread!=Ue()){var o=be.pthreads[r.targetThread];return o?o.postMessage(r,r.transferList):N('Internal error! Worker sent a message "'+i+'" to target pthread '+r.targetThread+", but that thread no longer exists!"),void(be.currentProxiedOperationCallerThread=void 0)}"processProxyingQueue"===i?Ee(r.queue):"spawnThread"===i?ge(r):"cleanupThread"===i?me(r.thread):"killThread"===i?function(e){var t=be.pthreads[e];delete be.pthreads[e],t.terminate(),Ge(e),be.runningWorkers.splice(be.runningWorkers.indexOf(t),1),t.pthread_ptr=0}(r.thread):"cancelThread"===i?function(e){be.pthreads[e].postMessage({cmd:"cancel"})}(r.thread):"loaded"===i?(e.loaded=!0,w&&e.unref(),t&&t(e),e.runPthread&&e.runPthread()):"print"===i?O("Thread "+r.threadId+": "+r.text):"printErr"===i?N("Thread "+r.threadId+": "+r.text):"alert"===i?alert("Thread "+r.threadId+": "+r.text):"setimmediate"===r.target?e.postMessage(r):"callHandler"===i?d[r.handler](...r.args):i&&N("worker sent an unknown command "+i),be.currentProxiedOperationCallerThread=void 0},e.onerror=e=>{throw N("worker sent an error! "+e.filename+":"+e.lineno+": "+e.message),e},w&&(e.on("message",(function(t){e.onmessage({data:t})})),e.on("error",(function(t){e.onerror(t)})),e.on("detachedExit",(function(){})));var n=[];for(var r of["onExit","onAbort","print","printErr"])d.hasOwnProperty(r)&&n.push(r);e.postMessage({cmd:"load",handlers:n,urlOrBlob:d.mainScriptUrlOrBlob||s,wasmMemory:A,wasmModule:z})},allocateUnusedWorker:function(){var e,t=S("tfjs-backend-wasm-threaded-simd.worker.js");e=new Worker(t),be.unusedWorkers.push(e)},getNewWorker:function(){return 0==be.unusedWorkers.length&&(be.allocateUnusedWorker(),be.loadWasmModuleToWorker(be.unusedWorkers[0])),be.unusedWorkers.pop()}};function xe(e){for(;e.length>0;)e.shift()(d)}function we(e){if(_)return Ie(2,0,e);try{ve(e)}catch(e){!function(e){if(e instanceof fe||"unwind"==e)return j;v(1,e)}(e)}}d.PThread=be,d.establishStackSpace=function(){var e=Ue(),t=n()[e+52>>>2],r=n()[e+56>>>2];Je(t,t-r),Ye(t)};var _e,Ce=[];function Se(e,t,n,r){return _?Ie(3,1,e,t,n,r):ke(e,t,n,r)}function ke(e,t,n,r){if("undefined"==typeof SharedArrayBuffer)return N("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var i=[];if(_&&0===i.length)return Se(e,t,n,r);var o={startRoutine:n,pthread_ptr:e,arg:r,transferList:i};return _?(o.cmd="spawnThread",postMessage(o,i),0):ge(o)}function Ee(e){Atomics.store(n(),e>>2,1),Ue()&&Qe(e),Atomics.compareExchange(n(),e>>2,1,0)}function Te(e){var t=Xe(),n=e();return Ye(t),n}function Ie(e,t){var n=arguments.length-2,r=arguments;return Te(()=>{for(var i=n,o=Ze(8*i),a=o>>3,s=0;s<n;s++){var u=r[2+s];l()[a+s>>>0]=u}return He(e,i,o,t)})}d.invokeEntryPoint=function(e,t){var n=function(e){var t=Ce[e];return t||(e>=Ce.length&&(Ce.length=e+1),Ce[e]=t=Z.get(e)),t}(e)(t);re()?be.setExitStatus(n):Ke(n)},d.executeNotifiedProxyingQueue=Ee,_e=w?()=>{var e=r.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.timeOrigin+performance.now();var Pe=[];function Oe(e){try{return A.grow(e-q.byteLength+65535>>>16),X(A.buffer),1}catch(e){}}function Ne(e){return _?Ie(4,1,e):52}function Re(e,t,n,r,i){return _?Ie(5,1,e,t,n,r,i):70}var Ae=[null,[],[]];function De(e,t){var n=Ae[e];0===t||10===t?((1===e?O:N)(K(n,0)),n.length=0):n.push(t)}function Ve(e,n,r,i){if(_)return Ie(6,1,e,n,r,i);for(var o=0,s=0;s<r;s++){var l=a()[n>>>2],u=a()[n+4>>>2];n+=8;for(var c=0;c<u;c++)De(e,t()[l+c>>>0]);o+=u}return a()[i>>>2]=o,0}function Me(e){return d["_"+e]}function Fe(e,t){(A.buffer!=q&&X(A.buffer),$).set(e,t>>>0)}function Le(e,n,r,i,o){var a={string:e=>{var n=0;if(null!=e&&0!==e){var r=1+(e.length<<2);!function(e,n,r){!function(e,t,n,r){if(!(r>0))return 0;n>>>=0;for(var i=n+r-1,o=0;o<e.length;++o){var a=e.charCodeAt(o);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o)),a<=127){if(n>=i)break;t[n++>>>0]=a}else if(a<=2047){if(n+1>=i)break;t[n++>>>0]=192|a>>6,t[n++>>>0]=128|63&a}else if(a<=65535){if(n+2>=i)break;t[n++>>>0]=224|a>>12,t[n++>>>0]=128|a>>6&63,t[n++>>>0]=128|63&a}else{if(n+3>=i)break;t[n++>>>0]=240|a>>18,t[n++>>>0]=128|a>>12&63,t[n++>>>0]=128|a>>6&63,t[n++>>>0]=128|63&a}}t[n>>>0]=0}(e,t(),n,r)}(e,n=Ze(r),r)}return n},array:e=>{var t=Ze(e.length);return Fe(e,t),t}},s=Me(e),l=[],u=0;if(i)for(var c=0;c<i.length;c++){var p=a[r[c]];p?(0===u&&(u=Xe()),l[c]=p(i[c])):l[c]=i[c]}var d,h=s.apply(null,l);return d=h,0!==u&&Ye(u),h=function(e){return"string"===n?J(e):"boolean"===n?!!e:e}(d)}be.init();var ze,je,qe,$e=[null,ye,we,Se,Ne,Re,Ve],Be={__emscripten_init_main_thread_js:function(e){We(e,!x,1,!b),be.threadInitTLS()},__emscripten_thread_cleanup:function(e){_?postMessage({cmd:"cleanupThread",thread:e}):me(e)},__pthread_create_js:ke,_emscripten_default_pthread_stack_size:function(){return 65536},_emscripten_get_now_is_monotonic:function(){return!0},_emscripten_notify_task_queue:function(e,t,n,r){if(e==t)setTimeout(()=>Ee(r));else if(_)postMessage({targetThread:e,cmd:"processProxyingQueue",queue:r});else{var i=be.pthreads[e];if(!i)return;i.postMessage({cmd:"processProxyingQueue",queue:r})}return 1},_emscripten_set_offscreencanvas_size:function(e,t,n){return-1},abort:function(){ue("")},emscripten_check_blocking_allowed:function(){w||x||function e(t){e.shown||(e.shown={}),e.shown[t]||(e.shown[t]=1,w&&(t="warning: "+t),N(t))}("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")},emscripten_date_now:function(){return Date.now()},emscripten_get_heap_max:function(){return 4294901760},emscripten_get_now:_e,emscripten_memcpy_big:function(e,n,r){t().copyWithin(e>>>0,n>>>0,n+r>>>0)},emscripten_num_logical_cores:function(){return w?L().cpus().length:navigator.hardwareConcurrency},emscripten_receive_on_main_thread_js:function(e,t,n){Pe.length=t;for(var r=n>>3,i=0;i<t;i++)Pe[i]=l()[r+i>>>0];return(e<0?he[-e-1]:$e[e]).apply(null,Pe)},emscripten_resize_heap:function(e){var n=t().length;if((e>>>=0)<=n)return!1;var r,i,o=4294901760;if(e>o)return!1;for(var a=1;a<=4;a*=2){var s=n*(1+.2/a);if(s=Math.min(s,e+100663296),Oe(Math.min(o,(r=Math.max(e,s))+((i=65536)-r%i)%i)))return!0}return!1},emscripten_unwind_to_js_event_loop:function(){throw"unwind"},exit:ve,fd_close:Ne,fd_seek:Re,fd_write:Ve,memory:A||d.wasmMemory},Ue=(function(){var e={env:Be,wasi_snapshot_preview1:Be};function t(e,t){var n=e.exports;if(d.asm=n,function(e){be.tlsInitFunctions.push(e)}(d.asm._emscripten_tls_init),Z=d.asm.__indirect_function_table,function(e){te.unshift(e)}(d.asm.__wasm_call_ctors),z=t,!_){var r=be.unusedWorkers.length;be.unusedWorkers.forEach((function(e){be.loadWasmModuleToWorker(e,(function(){--r||function(e){if(ae--,d.monitorRunDependencies&&d.monitorRunDependencies(ae),0==ae&&(null!==se&&(clearInterval(se),se=null),le)){var t=le;le=null,t()}}()}))}))}}function n(e){t(e.instance,e.module)}function r(t){return function(){if(!P&&(b||x)){if("function"==typeof fetch&&!pe(oe))return fetch(oe,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+oe+"'";return e.arrayBuffer()})).catch((function(){return de(oe)}));if(f)return new Promise((function(e,t){f(oe,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return de(oe)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){N("failed to asynchronously prepare wasm: "+e),ue(e)}))}if(_||(ae++,d.monitorRunDependencies&&d.monitorRunDependencies(ae)),d.instantiateWasm)try{return d.instantiateWasm(e,t)}catch(e){N("Module.instantiateWasm callback failed with error: "+e),c(e)}(P||"function"!=typeof WebAssembly.instantiateStreaming||ce(oe)||pe(oe)||w||"function"!=typeof fetch?r(n):fetch(oe,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){return N("wasm streaming compile failed: "+e),N("falling back to ArrayBuffer instantiation"),r(n)}))}))).catch(c)}(),d.___wasm_call_ctors=function(){return(d.___wasm_call_ctors=d.asm.__wasm_call_ctors).apply(null,arguments)},d._init=function(){return(d._init=d.asm.init).apply(null,arguments)},d._init_with_threads_count=function(){return(d._init_with_threads_count=d.asm.init_with_threads_count).apply(null,arguments)},d._get_threads_count=function(){return(d._get_threads_count=d.asm.get_threads_count).apply(null,arguments)},d._register_tensor=function(){return(d._register_tensor=d.asm.register_tensor).apply(null,arguments)},d._dispose_data=function(){return(d._dispose_data=d.asm.dispose_data).apply(null,arguments)},d._dispose=function(){return(d._dispose=d.asm.dispose).apply(null,arguments)},d._Abs=function(){return(d._Abs=d.asm.Abs).apply(null,arguments)},d._Acos=function(){return(d._Acos=d.asm.Acos).apply(null,arguments)},d._Acosh=function(){return(d._Acosh=d.asm.Acosh).apply(null,arguments)},d._Add=function(){return(d._Add=d.asm.Add).apply(null,arguments)},d._AddN=function(){return(d._AddN=d.asm.AddN).apply(null,arguments)},d._All=function(){return(d._All=d.asm.All).apply(null,arguments)},d._Any=function(){return(d._Any=d.asm.Any).apply(null,arguments)},d._ArgMax=function(){return(d._ArgMax=d.asm.ArgMax).apply(null,arguments)},d._ArgMin=function(){return(d._ArgMin=d.asm.ArgMin).apply(null,arguments)},d._Asin=function(){return(d._Asin=d.asm.Asin).apply(null,arguments)},d._Asinh=function(){return(d._Asinh=d.asm.Asinh).apply(null,arguments)},d._Atan=function(){return(d._Atan=d.asm.Atan).apply(null,arguments)},d._Atan2=function(){return(d._Atan2=d.asm.Atan2).apply(null,arguments)},d._Atanh=function(){return(d._Atanh=d.asm.Atanh).apply(null,arguments)},d._AvgPool=function(){return(d._AvgPool=d.asm.AvgPool).apply(null,arguments)},d._AvgPool3D=function(){return(d._AvgPool3D=d.asm.AvgPool3D).apply(null,arguments)},d._AvgPool3DGrad=function(){return(d._AvgPool3DGrad=d.asm.AvgPool3DGrad).apply(null,arguments)},d._AvgPoolGrad=function(){return(d._AvgPoolGrad=d.asm.AvgPoolGrad).apply(null,arguments)},d._BatchMatMul=function(){return(d._BatchMatMul=d.asm.BatchMatMul).apply(null,arguments)},d._Bincount=function(){return(d._Bincount=d.asm.Bincount).apply(null,arguments)},d._BitwiseAnd=function(){return(d._BitwiseAnd=d.asm.BitwiseAnd).apply(null,arguments)},d._Ceil=function(){return(d._Ceil=d.asm.Ceil).apply(null,arguments)},d._ClipByValue=function(){return(d._ClipByValue=d.asm.ClipByValue).apply(null,arguments)},d._Conv2D=function(){return(d._Conv2D=d.asm.Conv2D).apply(null,arguments)},d._Conv2DBackpropInput=function(){return(d._Conv2DBackpropInput=d.asm.Conv2DBackpropInput).apply(null,arguments)},d._Conv3D=function(){return(d._Conv3D=d.asm.Conv3D).apply(null,arguments)},d._Conv3DBackpropFilterV2=function(){return(d._Conv3DBackpropFilterV2=d.asm.Conv3DBackpropFilterV2).apply(null,arguments)},d._Conv3DBackpropInputV2=function(){return(d._Conv3DBackpropInputV2=d.asm.Conv3DBackpropInputV2).apply(null,arguments)},d._Cos=function(){return(d._Cos=d.asm.Cos).apply(null,arguments)},d._Cosh=function(){return(d._Cosh=d.asm.Cosh).apply(null,arguments)},d._CropAndResize=function(){return(d._CropAndResize=d.asm.CropAndResize).apply(null,arguments)},d._Cumprod=function(){return(d._Cumprod=d.asm.Cumprod).apply(null,arguments)},d._Cumsum=function(){return(d._Cumsum=d.asm.Cumsum).apply(null,arguments)},d._DenseBincount=function(){return(d._DenseBincount=d.asm.DenseBincount).apply(null,arguments)},d._DepthToSpace=function(){return(d._DepthToSpace=d.asm.DepthToSpace).apply(null,arguments)},d._DepthwiseConv2dNative=function(){return(d._DepthwiseConv2dNative=d.asm.DepthwiseConv2dNative).apply(null,arguments)},d._Diag=function(){return(d._Diag=d.asm.Diag).apply(null,arguments)},d._Dilation2D=function(){return(d._Dilation2D=d.asm.Dilation2D).apply(null,arguments)},d._Dilation2DBackpropFilter=function(){return(d._Dilation2DBackpropFilter=d.asm.Dilation2DBackpropFilter).apply(null,arguments)},d._Dilation2DBackpropInput=function(){return(d._Dilation2DBackpropInput=d.asm.Dilation2DBackpropInput).apply(null,arguments)},d._Elu=function(){return(d._Elu=d.asm.Elu).apply(null,arguments)},d._EluGrad=function(){return(d._EluGrad=d.asm.EluGrad).apply(null,arguments)},d._Equal=function(){return(d._Equal=d.asm.Equal).apply(null,arguments)},d._Erf=function(){return(d._Erf=d.asm.Erf).apply(null,arguments)},d._Exp=function(){return(d._Exp=d.asm.Exp).apply(null,arguments)},d._Expm1=function(){return(d._Expm1=d.asm.Expm1).apply(null,arguments)},d._FlipLeftRight=function(){return(d._FlipLeftRight=d.asm.FlipLeftRight).apply(null,arguments)},d._Floor=function(){return(d._Floor=d.asm.Floor).apply(null,arguments)},d._FloorDiv=function(){return(d._FloorDiv=d.asm.FloorDiv).apply(null,arguments)},d._FusedBatchNorm=function(){return(d._FusedBatchNorm=d.asm.FusedBatchNorm).apply(null,arguments)},d._FusedConv2D=function(){return(d._FusedConv2D=d.asm.FusedConv2D).apply(null,arguments)},d._FusedDepthwiseConv2D=function(){return(d._FusedDepthwiseConv2D=d.asm.FusedDepthwiseConv2D).apply(null,arguments)},d._Gather=function(){return(d._Gather=d.asm.Gather).apply(null,arguments)},d._GatherNd=function(){return(d._GatherNd=d.asm.GatherNd).apply(null,arguments)},d._Greater=function(){return(d._Greater=d.asm.Greater).apply(null,arguments)},d._GreaterEqual=function(){return(d._GreaterEqual=d.asm.GreaterEqual).apply(null,arguments)},d._IsFinite=function(){return(d._IsFinite=d.asm.IsFinite).apply(null,arguments)},d._IsInf=function(){return(d._IsInf=d.asm.IsInf).apply(null,arguments)},d._IsNan=function(){return(d._IsNan=d.asm.IsNan).apply(null,arguments)},d._LRN=function(){return(d._LRN=d.asm.LRN).apply(null,arguments)},d._LRNGrad=function(){return(d._LRNGrad=d.asm.LRNGrad).apply(null,arguments)},d._LeakyRelu=function(){return(d._LeakyRelu=d.asm.LeakyRelu).apply(null,arguments)},d._Less=function(){return(d._Less=d.asm.Less).apply(null,arguments)},d._LessEqual=function(){return(d._LessEqual=d.asm.LessEqual).apply(null,arguments)},d._LinSpace=function(){return(d._LinSpace=d.asm.LinSpace).apply(null,arguments)},d._Log=function(){return(d._Log=d.asm.Log).apply(null,arguments)},d._Log1p=function(){return(d._Log1p=d.asm.Log1p).apply(null,arguments)},d._LogicalAnd=function(){return(d._LogicalAnd=d.asm.LogicalAnd).apply(null,arguments)},d._LogicalNot=function(){return(d._LogicalNot=d.asm.LogicalNot).apply(null,arguments)},d._LogicalOr=function(){return(d._LogicalOr=d.asm.LogicalOr).apply(null,arguments)},d._LogicalXor=function(){return(d._LogicalXor=d.asm.LogicalXor).apply(null,arguments)},d._Max=function(){return(d._Max=d.asm.Max).apply(null,arguments)},d._MaxPool=function(){return(d._MaxPool=d.asm.MaxPool).apply(null,arguments)},d._MaxPool3D=function(){return(d._MaxPool3D=d.asm.MaxPool3D).apply(null,arguments)},d._MaxPool3DGrad=function(){return(d._MaxPool3DGrad=d.asm.MaxPool3DGrad).apply(null,arguments)},d._MaxPoolGrad=function(){return(d._MaxPoolGrad=d.asm.MaxPoolGrad).apply(null,arguments)},d._MaxPoolWithArgmax=function(){return(d._MaxPoolWithArgmax=d.asm.MaxPoolWithArgmax).apply(null,arguments)},d._Maximum=function(){return(d._Maximum=d.asm.Maximum).apply(null,arguments)},d._Mean=function(){return(d._Mean=d.asm.Mean).apply(null,arguments)},d._Min=function(){return(d._Min=d.asm.Min).apply(null,arguments)},d._Minimum=function(){return(d._Minimum=d.asm.Minimum).apply(null,arguments)},d._MirrorPad=function(){return(d._MirrorPad=d.asm.MirrorPad).apply(null,arguments)},d._Mod=function(){return(d._Mod=d.asm.Mod).apply(null,arguments)},d._Multinomial=function(){return(d._Multinomial=d.asm.Multinomial).apply(null,arguments)},d._Multiply=function(){return(d._Multiply=d.asm.Multiply).apply(null,arguments)},d._Neg=function(){return(d._Neg=d.asm.Neg).apply(null,arguments)},d._NonMaxSuppressionV3=function(){return(d._NonMaxSuppressionV3=d.asm.NonMaxSuppressionV3).apply(null,arguments)},d._NonMaxSuppressionV4=function(){return(d._NonMaxSuppressionV4=d.asm.NonMaxSuppressionV4).apply(null,arguments)},d._NonMaxSuppressionV5=function(){return(d._NonMaxSuppressionV5=d.asm.NonMaxSuppressionV5).apply(null,arguments)},d._NotEqual=function(){return(d._NotEqual=d.asm.NotEqual).apply(null,arguments)},d._OneHot=function(){return(d._OneHot=d.asm.OneHot).apply(null,arguments)},d._PadV2=function(){return(d._PadV2=d.asm.PadV2).apply(null,arguments)},d._Pow=function(){return(d._Pow=d.asm.Pow).apply(null,arguments)},d._Prelu=function(){return(d._Prelu=d.asm.Prelu).apply(null,arguments)},d._Prod=function(){return(d._Prod=d.asm.Prod).apply(null,arguments)},d._RealDiv=function(){return(d._RealDiv=d.asm.RealDiv).apply(null,arguments)},d._Reciprocal=function(){return(d._Reciprocal=d.asm.Reciprocal).apply(null,arguments)},d._Relu=function(){return(d._Relu=d.asm.Relu).apply(null,arguments)},d._Relu6=function(){return(d._Relu6=d.asm.Relu6).apply(null,arguments)},d._ResizeBilinear=function(){return(d._ResizeBilinear=d.asm.ResizeBilinear).apply(null,arguments)},d._ResizeBilinearGrad=function(){return(d._ResizeBilinearGrad=d.asm.ResizeBilinearGrad).apply(null,arguments)},d._ResizeNearestNeighbor=function(){return(d._ResizeNearestNeighbor=d.asm.ResizeNearestNeighbor).apply(null,arguments)},d._ResizeNearestNeighborGrad=function(){return(d._ResizeNearestNeighborGrad=d.asm.ResizeNearestNeighborGrad).apply(null,arguments)},d._Reverse=function(){return(d._Reverse=d.asm.Reverse).apply(null,arguments)},d._RotateWithOffset=function(){return(d._RotateWithOffset=d.asm.RotateWithOffset).apply(null,arguments)},d._Round=function(){return(d._Round=d.asm.Round).apply(null,arguments)},d._Rsqrt=function(){return(d._Rsqrt=d.asm.Rsqrt).apply(null,arguments)},d._ScatterNd=function(){return(d._ScatterNd=d.asm.ScatterNd).apply(null,arguments)},d._SearchSorted=function(){return(d._SearchSorted=d.asm.SearchSorted).apply(null,arguments)},d._SelectV2=function(){return(d._SelectV2=d.asm.SelectV2).apply(null,arguments)},d._Selu=function(){return(d._Selu=d.asm.Selu).apply(null,arguments)},d._Sigmoid=function(){return(d._Sigmoid=d.asm.Sigmoid).apply(null,arguments)},d._Sign=function(){return(d._Sign=d.asm.Sign).apply(null,arguments)},d._Sin=function(){return(d._Sin=d.asm.Sin).apply(null,arguments)},d._Sinh=function(){return(d._Sinh=d.asm.Sinh).apply(null,arguments)},d._Softmax=function(){return(d._Softmax=d.asm.Softmax).apply(null,arguments)},d._Softplus=function(){return(d._Softplus=d.asm.Softplus).apply(null,arguments)},d._SparseFillEmptyRows=function(){return(d._SparseFillEmptyRows=d.asm.SparseFillEmptyRows).apply(null,arguments)},d._SparseReshape=function(){return(d._SparseReshape=d.asm.SparseReshape).apply(null,arguments)},d._SparseSegmentReduction=function(){return(d._SparseSegmentReduction=d.asm.SparseSegmentReduction).apply(null,arguments)},d._SparseToDense=function(){return(d._SparseToDense=d.asm.SparseToDense).apply(null,arguments)},d._Sqrt=function(){return(d._Sqrt=d.asm.Sqrt).apply(null,arguments)},d._Square=function(){return(d._Square=d.asm.Square).apply(null,arguments)},d._SquaredDifference=function(){return(d._SquaredDifference=d.asm.SquaredDifference).apply(null,arguments)},d._Step=function(){return(d._Step=d.asm.Step).apply(null,arguments)},d._StridedSlice=function(){return(d._StridedSlice=d.asm.StridedSlice).apply(null,arguments)},d._Sub=function(){return(d._Sub=d.asm.Sub).apply(null,arguments)},d._Sum=function(){return(d._Sum=d.asm.Sum).apply(null,arguments)},d._Tan=function(){return(d._Tan=d.asm.Tan).apply(null,arguments)},d._Tanh=function(){return(d._Tanh=d.asm.Tanh).apply(null,arguments)},d._TensorScatterUpdate=function(){return(d._TensorScatterUpdate=d.asm.TensorScatterUpdate).apply(null,arguments)},d._Tile=function(){return(d._Tile=d.asm.Tile).apply(null,arguments)},d._TopK=function(){return(d._TopK=d.asm.TopK).apply(null,arguments)},d._Transform=function(){return(d._Transform=d.asm.Transform).apply(null,arguments)},d._Transpose=function(){return(d._Transpose=d.asm.Transpose).apply(null,arguments)},d.__FusedMatMul=function(){return(d.__FusedMatMul=d.asm._FusedMatMul).apply(null,arguments)},d._malloc=function(){return(d._malloc=d.asm.malloc).apply(null,arguments)},d._free=function(){return(d._free=d.asm.free).apply(null,arguments)},d.__emscripten_tls_init=function(){return(d.__emscripten_tls_init=d.asm._emscripten_tls_init).apply(null,arguments)},d._pthread_self=function(){return(Ue=d._pthread_self=d.asm.pthread_self).apply(null,arguments)}),We=(d.___errno_location=function(){return(d.___errno_location=d.asm.__errno_location).apply(null,arguments)},d.__emscripten_thread_init=function(){return(We=d.__emscripten_thread_init=d.asm._emscripten_thread_init).apply(null,arguments)}),He=(d.__emscripten_thread_crashed=function(){return(d.__emscripten_thread_crashed=d.asm._emscripten_thread_crashed).apply(null,arguments)},d._emscripten_main_thread_process_queued_calls=function(){return(d._emscripten_main_thread_process_queued_calls=d.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},d._emscripten_main_browser_thread_id=function(){return(d._emscripten_main_browser_thread_id=d.asm.emscripten_main_browser_thread_id).apply(null,arguments)},d._emscripten_run_in_main_runtime_thread_js=function(){return(He=d._emscripten_run_in_main_runtime_thread_js=d.asm.emscripten_run_in_main_runtime_thread_js).apply(null,arguments)}),Qe=(d._emscripten_dispatch_to_thread_=function(){return(d._emscripten_dispatch_to_thread_=d.asm.emscripten_dispatch_to_thread_).apply(null,arguments)},d.__emscripten_proxy_execute_task_queue=function(){return(Qe=d.__emscripten_proxy_execute_task_queue=d.asm._emscripten_proxy_execute_task_queue).apply(null,arguments)}),Ge=d.__emscripten_thread_free_data=function(){return(Ge=d.__emscripten_thread_free_data=d.asm._emscripten_thread_free_data).apply(null,arguments)},Ke=d.__emscripten_thread_exit=function(){return(Ke=d.__emscripten_thread_exit=d.asm._emscripten_thread_exit).apply(null,arguments)},Je=d._emscripten_stack_set_limits=function(){return(Je=d._emscripten_stack_set_limits=d.asm.emscripten_stack_set_limits).apply(null,arguments)},Xe=d.stackSave=function(){return(Xe=d.stackSave=d.asm.stackSave).apply(null,arguments)},Ye=d.stackRestore=function(){return(Ye=d.stackRestore=d.asm.stackRestore).apply(null,arguments)},Ze=d.stackAlloc=function(){return(Ze=d.stackAlloc=d.asm.stackAlloc).apply(null,arguments)};function et(e){if(e=e||y,!(ae>0)){if(_)return u(d),ie(),void startWorker(d);(function(){if(d.preRun)for("function"==typeof d.preRun&&(d.preRun=[d.preRun]);d.preRun.length;)e=d.preRun.shift(),ee.unshift(e);var e;xe(ee)})(),ae>0||(d.setStatus?(d.setStatus("Running..."),setTimeout((function(){setTimeout((function(){d.setStatus("")}),1),t()}),1)):t())}function t(){ze||(ze=!0,d.calledRun=!0,!Q&&(ie(),u(d),d.onRuntimeInitialized&&d.onRuntimeInitialized(),function(){if(!_){if(d.postRun)for("function"==typeof d.postRun&&(d.postRun=[d.postRun]);d.postRun.length;)e=d.postRun.shift(),ne.unshift(e);xe(ne)}var e}()))}}if(d.dynCall_iijjiiii=function(){return(d.dynCall_iijjiiii=d.asm.dynCall_iijjiiii).apply(null,arguments)},d.dynCall_jiji=function(){return(d.dynCall_jiji=d.asm.dynCall_jiji).apply(null,arguments)},d.keepRuntimeAlive=re,d.wasmMemory=A,d.cwrap=function(e,t,n,r){var i=(n=n||[]).every(e=>"number"===e||"boolean"===e);return"string"!==t&&i&&!r?Me(e):function(){return Le(e,t,n,arguments)}},d.ExitStatus=fe,d.PThread=be,le=function e(){ze||et(),ze||(le=e)},d.preInit)for("function"==typeof d.preInit&&(d.preInit=[d.preInit]);d.preInit.length>0;)d.preInit.pop()();if(et(),p&&(je={uncaughtException:r.listeners("uncaughtException").filter((function(e){return!p.uncaughtException.indexOf(e)>-1})),unhandledRejection:r.listeners("unhandledRejection").filter((function(e){return!p.unhandledRejection.indexOf(e)>-1}))}),"undefined"!=typeof WasmBackendModule)qe=WasmBackendModule;else{if(void 0===e)throw new Error("Could not find wasm module in post.js");qe=e}if(je){var tt=qe._dispose;qe._dispose=function(){tt(),je.uncaughtException.forEach((function(e){r.removeListener("uncaughtException",e)})),je.unhandledRejection.forEach((function(e){r.removeListener("unhandledRejection",e)}))}}return e.ready});"object"==typeof t&&"object"==typeof a?a.exports=l:"function"==typeof define&&n(38)?define([],(function(){return l})):"object"==typeof t&&(t.WasmBackendModuleThreadedSimd=l)}),j=v((e,t)=>{t.exports.wasmWorkerContents='"use strict";var Module={};var ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads");var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",data=>onmessage({data:data}));var fs=require("fs");Object.assign(global,{self:global,require:require,Module:Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:function(f){(0,eval)(fs.readFileSync(f,"utf8")+"//# sourceURL="+f)},postMessage:function(msg){parentPort.postMessage(msg)},performance:global.performance||{now:function(){return Date.now()}}})}var initializedJS=false;var pendingNotifiedProxyingQueues=[];function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,text+"\n");return}console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;self.alert=threadAlert;Module["instantiateWasm"]=(info,receiveInstance)=>{var instance=new WebAssembly.Instance(Module["wasmModule"],info);receiveInstance(instance);Module["wasmModule"]=null;return instance.exports};self.onunhandledrejection=e=>{throw e.reason??e};self.startWorker=instance=>{Module=instance;postMessage({"cmd":"loaded"})};self.onmessage=e=>{try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;for(const handler of e.data.handlers){Module[handler]=function(){postMessage({cmd:"callHandler",handler:handler,args:[...arguments]})}}Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob=="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module)}else if(e.data.cmd==="run"){Module["__emscripten_thread_init"](e.data.pthread_ptr,0,0,1);Module["establishStackSpace"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].threadInitTLS();if(!initializedJS){pendingNotifiedProxyingQueues.forEach(queue=>{Module["executeNotifiedProxyingQueue"](queue)});pendingNotifiedProxyingQueues=[];initializedJS=true}try{Module["invokeEntryPoint"](e.data.start_routine,e.data.arg)}catch(ex){if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["keepRuntimeAlive"]()){}else{Module["__emscripten_thread_exit"](ex.status)}}else{throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["__emscripten_thread_exit"](-1)}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processProxyingQueue"){if(initializedJS){Module["executeNotifiedProxyingQueue"](e.data.queue)}else{pendingNotifiedProxyingQueues.push(e.data.queue)}}else if(e.data.cmd){err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){if(Module["__emscripten_thread_crashed"]){Module["__emscripten_thread_crashed"]()}throw ex}};'}),q=v((t,o)=>{var a,s=(a=(a="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||e,function(e){var t,n,o,s=void 0!==(e=e||{})?e:{};s.ready=new Promise((function(e,r){t=e,n=r})),void 0!==r&&r.listeners&&(o={uncaughtException:r.listeners("uncaughtException"),unhandledRejection:r.listeners("unhandledRejection")});var l,u,c,p=Object.assign({},s),d=[],h="object"==typeof window,f="function"==typeof importScripts,m="object"==typeof r&&"object"==typeof r.versions&&"string"==typeof r.versions.node,g="";if(m){var y=D(),v=V();g=f?v.dirname(g)+"/":i+"/",l=(e,t)=>(e=U(e)?new URL(e):v.normalize(e),y.readFileSync(e,t?void 0:"utf8")),c=e=>{var t=l(e,!0);return t.buffer||(t=new Uint8Array(t)),t},u=(e,t,n)=>{e=U(e)?new URL(e):v.normalize(e),y.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))},r.argv.length>1&&r.argv[1].replace(/\\/g,"/"),d=r.argv.slice(2),r.on("uncaughtException",(function(e){if(!(e instanceof H))throw e})),r.on("unhandledRejection",(function(e){throw e})),s.inspect=function(){return"[Emscripten Module object]"}}else(h||f)&&(f?g=self.location.href:"undefined"!=typeof document&&document.currentScript&&(g=document.currentScript.src),a&&(g=a),g=0!==g.indexOf("blob:")?g.substr(0,g.replace(/[?#].*/,"").lastIndexOf("/")+1):"",l=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},f&&(c=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),u=(e,t,n)=>{var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=()=>{200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});var b,x=s.print||console.log.bind(console),w=s.printErr||console.warn.bind(console);Object.assign(s,p),p=null,s.arguments&&(d=s.arguments),s.thisProgram&&s.thisProgram,s.quit&&s.quit,s.wasmBinary&&(b=s.wasmBinary);s.noExitRuntime;"object"!=typeof WebAssembly&&$("no native wasm support detected");var _,C,S,k,E,T=!1,I="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function P(e,t,n){for(var r=(t>>>=0)+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.buffer&&I)return I.decode(e.subarray(t,i));for(var o="";t<i;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var l=63&e[t++];if((a=224==(240&a)?(15&a)<<12|s<<6|l:(7&a)<<18|s<<12|l<<6|63&e[t++])<65536)o+=String.fromCharCode(a);else{var u=a-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&a)<<6|s)}else o+=String.fromCharCode(a)}return o}function O(e,t){return(e>>>=0)?P(k,e,t):""}function N(e){C=e,s.HEAP8=S=new Int8Array(e),s.HEAP16=new Int16Array(e),s.HEAP32=new Int32Array(e),s.HEAPU8=k=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAPU32=E=new Uint32Array(e),s.HEAPF32=new Float32Array(e),s.HEAPF64=new Float64Array(e)}s.INITIAL_MEMORY;var R,A,M=[],F=[],L=[],z=0,j=null,q=null;function $(e){s.onAbort&&s.onAbort(e),w(e="Aborted("+e+")"),T=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw n(t),t}function B(e){return e.startsWith("data:application/octet-stream;base64,")}function U(e){return e.startsWith("file://")}function W(e){try{if(e==R&&b)return new Uint8Array(b);if(c)return c(e);throw"both async and sync fetching of the wasm failed"}catch(e){$(e)}}function H(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Q(e){for(;e.length>0;)e.shift()(s)}function G(e){try{return _.grow(e-C.byteLength+65535>>>16),N(_.buffer),1}catch(e){}}B(R="tfjs-backend-wasm.wasm")||(A=R,R=s.locateFile?s.locateFile(A,g):g+A);var K=[null,[],[]];function J(e,t){var n=K[e];0===t||10===t?((1===e?x:w)(P(n,0)),n.length=0):n.push(t)}function X(e){return s["_"+e]}function Y(e,t,n,r,i){var o={string:e=>{var t=0;if(null!=e&&0!==e){var n=1+(e.length<<2);!function(e,t,n){!function(e,t,n,r){if(!(r>0))return 0;n>>>=0;for(var i=n+r-1,o=0;o<e.length;++o){var a=e.charCodeAt(o);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o)),a<=127){if(n>=i)break;t[n++>>>0]=a}else if(a<=2047){if(n+1>=i)break;t[n++>>>0]=192|a>>6,t[n++>>>0]=128|63&a}else if(a<=65535){if(n+2>=i)break;t[n++>>>0]=224|a>>12,t[n++>>>0]=128|a>>6&63,t[n++>>>0]=128|63&a}else{if(n+3>=i)break;t[n++>>>0]=240|a>>18,t[n++>>>0]=128|a>>12&63,t[n++>>>0]=128|a>>6&63,t[n++>>>0]=128|63&a}}t[n>>>0]=0}(e,k,t,n)}(e,t=oe(n),n)}return t},array:e=>{var t=oe(e.length);return function(e,t){S.set(e,t>>>0)}(e,t),t}},a=X(e),s=[],l=0;if(r)for(var u=0;u<r.length;u++){var c=o[n[u]];c?(0===l&&(l=re()),s[u]=c(r[u])):s[u]=r[u]}var p,d=a.apply(null,s);return p=d,0!==l&&ie(l),d=function(e){return"string"===t?O(e):"boolean"===t?!!e:e}(p)}var Z,ee,te,ne={abort:function(){$("")},emscripten_get_heap_max:function(){return 4294901760},emscripten_memcpy_big:function(e,t,n){k.copyWithin(e>>>0,t>>>0,t+n>>>0)},emscripten_resize_heap:function(e){var t,n,r=k.length,i=4294901760;if((e>>>=0)>i)return!1;for(var o=1;o<=4;o*=2){var a=r*(1+.2/o);if(a=Math.min(a,e+100663296),G(Math.min(i,(t=Math.max(e,a))+((n=65536)-t%n)%n)))return!0}return!1},fd_close:function(e){return 52},fd_seek:function(e,t,n,r,i){return 70},fd_write:function(e,t,n,r){for(var i=0,o=0;o<n;o++){var a=E[t>>>2],s=E[t+4>>>2];t+=8;for(var l=0;l<s;l++)J(e,k[a+l>>>0]);i+=s}return E[r>>>2]=i,0}},re=(function(){var e={env:ne,wasi_snapshot_preview1:ne};function t(e,t){var n=e.exports;s.asm=n,N((_=s.asm.memory).buffer),s.asm.__indirect_function_table,function(e){F.unshift(e)}(s.asm.__wasm_call_ctors),function(e){if(z--,s.monitorRunDependencies&&s.monitorRunDependencies(z),0==z&&(null!==j&&(clearInterval(j),j=null),q)){var t=q;q=null,t()}}()}function r(e){t(e.instance)}function i(t){return function(){if(!b&&(h||f)){if("function"==typeof fetch&&!U(R))return fetch(R,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+R+"'";return e.arrayBuffer()})).catch((function(){return W(R)}));if(u)return new Promise((function(e,t){u(R,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return W(R)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){w("failed to asynchronously prepare wasm: "+e),$(e)}))}if(z++,s.monitorRunDependencies&&s.monitorRunDependencies(z),s.instantiateWasm)try{return s.instantiateWasm(e,t)}catch(e){w("Module.instantiateWasm callback failed with error: "+e),n(e)}(b||"function"!=typeof WebAssembly.instantiateStreaming||B(R)||U(R)||m||"function"!=typeof fetch?i(r):fetch(R,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(r,(function(e){return w("wasm streaming compile failed: "+e),w("falling back to ArrayBuffer instantiation"),i(r)}))}))).catch(n)}(),s.___wasm_call_ctors=function(){return(s.___wasm_call_ctors=s.asm.__wasm_call_ctors).apply(null,arguments)},s._init=function(){return(s._init=s.asm.init).apply(null,arguments)},s._init_with_threads_count=function(){return(s._init_with_threads_count=s.asm.init_with_threads_count).apply(null,arguments)},s._get_threads_count=function(){return(s._get_threads_count=s.asm.get_threads_count).apply(null,arguments)},s._register_tensor=function(){return(s._register_tensor=s.asm.register_tensor).apply(null,arguments)},s._dispose_data=function(){return(s._dispose_data=s.asm.dispose_data).apply(null,arguments)},s._dispose=function(){return(s._dispose=s.asm.dispose).apply(null,arguments)},s._Abs=function(){return(s._Abs=s.asm.Abs).apply(null,arguments)},s._Acos=function(){return(s._Acos=s.asm.Acos).apply(null,arguments)},s._Acosh=function(){return(s._Acosh=s.asm.Acosh).apply(null,arguments)},s._Add=function(){return(s._Add=s.asm.Add).apply(null,arguments)},s._AddN=function(){return(s._AddN=s.asm.AddN).apply(null,arguments)},s._All=function(){return(s._All=s.asm.All).apply(null,arguments)},s._Any=function(){return(s._Any=s.asm.Any).apply(null,arguments)},s._ArgMax=function(){return(s._ArgMax=s.asm.ArgMax).apply(null,arguments)},s._ArgMin=function(){return(s._ArgMin=s.asm.ArgMin).apply(null,arguments)},s._Asin=function(){return(s._Asin=s.asm.Asin).apply(null,arguments)},s._Asinh=function(){return(s._Asinh=s.asm.Asinh).apply(null,arguments)},s._Atan=function(){return(s._Atan=s.asm.Atan).apply(null,arguments)},s._Atan2=function(){return(s._Atan2=s.asm.Atan2).apply(null,arguments)},s._Atanh=function(){return(s._Atanh=s.asm.Atanh).apply(null,arguments)},s._AvgPool=function(){return(s._AvgPool=s.asm.AvgPool).apply(null,arguments)},s._AvgPool3D=function(){return(s._AvgPool3D=s.asm.AvgPool3D).apply(null,arguments)},s._AvgPool3DGrad=function(){return(s._AvgPool3DGrad=s.asm.AvgPool3DGrad).apply(null,arguments)},s._AvgPoolGrad=function(){return(s._AvgPoolGrad=s.asm.AvgPoolGrad).apply(null,arguments)},s._BatchMatMul=function(){return(s._BatchMatMul=s.asm.BatchMatMul).apply(null,arguments)},s._Bincount=function(){return(s._Bincount=s.asm.Bincount).apply(null,arguments)},s._BitwiseAnd=function(){return(s._BitwiseAnd=s.asm.BitwiseAnd).apply(null,arguments)},s._Ceil=function(){return(s._Ceil=s.asm.Ceil).apply(null,arguments)},s._ClipByValue=function(){return(s._ClipByValue=s.asm.ClipByValue).apply(null,arguments)},s._Conv2D=function(){return(s._Conv2D=s.asm.Conv2D).apply(null,arguments)},s._Conv2DBackpropInput=function(){return(s._Conv2DBackpropInput=s.asm.Conv2DBackpropInput).apply(null,arguments)},s._Conv3D=function(){return(s._Conv3D=s.asm.Conv3D).apply(null,arguments)},s._Conv3DBackpropFilterV2=function(){return(s._Conv3DBackpropFilterV2=s.asm.Conv3DBackpropFilterV2).apply(null,arguments)},s._Conv3DBackpropInputV2=function(){return(s._Conv3DBackpropInputV2=s.asm.Conv3DBackpropInputV2).apply(null,arguments)},s._Cos=function(){return(s._Cos=s.asm.Cos).apply(null,arguments)},s._Cosh=function(){return(s._Cosh=s.asm.Cosh).apply(null,arguments)},s._CropAndResize=function(){return(s._CropAndResize=s.asm.CropAndResize).apply(null,arguments)},s._Cumprod=function(){return(s._Cumprod=s.asm.Cumprod).apply(null,arguments)},s._Cumsum=function(){return(s._Cumsum=s.asm.Cumsum).apply(null,arguments)},s._DenseBincount=function(){return(s._DenseBincount=s.asm.DenseBincount).apply(null,arguments)},s._DepthToSpace=function(){return(s._DepthToSpace=s.asm.DepthToSpace).apply(null,arguments)},s._DepthwiseConv2dNative=function(){return(s._DepthwiseConv2dNative=s.asm.DepthwiseConv2dNative).apply(null,arguments)},s._Diag=function(){return(s._Diag=s.asm.Diag).apply(null,arguments)},s._Dilation2D=function(){return(s._Dilation2D=s.asm.Dilation2D).apply(null,arguments)},s._Dilation2DBackpropFilter=function(){return(s._Dilation2DBackpropFilter=s.asm.Dilation2DBackpropFilter).apply(null,arguments)},s._Dilation2DBackpropInput=function(){return(s._Dilation2DBackpropInput=s.asm.Dilation2DBackpropInput).apply(null,arguments)},s._Elu=function(){return(s._Elu=s.asm.Elu).apply(null,arguments)},s._EluGrad=function(){return(s._EluGrad=s.asm.EluGrad).apply(null,arguments)},s._Equal=function(){return(s._Equal=s.asm.Equal).apply(null,arguments)},s._Erf=function(){return(s._Erf=s.asm.Erf).apply(null,arguments)},s._Exp=function(){return(s._Exp=s.asm.Exp).apply(null,arguments)},s._Expm1=function(){return(s._Expm1=s.asm.Expm1).apply(null,arguments)},s._FlipLeftRight=function(){return(s._FlipLeftRight=s.asm.FlipLeftRight).apply(null,arguments)},s._Floor=function(){return(s._Floor=s.asm.Floor).apply(null,arguments)},s._FloorDiv=function(){return(s._FloorDiv=s.asm.FloorDiv).apply(null,arguments)},s._FusedBatchNorm=function(){return(s._FusedBatchNorm=s.asm.FusedBatchNorm).apply(null,arguments)},s._FusedConv2D=function(){return(s._FusedConv2D=s.asm.FusedConv2D).apply(null,arguments)},s._FusedDepthwiseConv2D=function(){return(s._FusedDepthwiseConv2D=s.asm.FusedDepthwiseConv2D).apply(null,arguments)},s._Gather=function(){return(s._Gather=s.asm.Gather).apply(null,arguments)},s._GatherNd=function(){return(s._GatherNd=s.asm.GatherNd).apply(null,arguments)},s._Greater=function(){return(s._Greater=s.asm.Greater).apply(null,arguments)},s._GreaterEqual=function(){return(s._GreaterEqual=s.asm.GreaterEqual).apply(null,arguments)},s._IsFinite=function(){return(s._IsFinite=s.asm.IsFinite).apply(null,arguments)},s._IsInf=function(){return(s._IsInf=s.asm.IsInf).apply(null,arguments)},s._IsNan=function(){return(s._IsNan=s.asm.IsNan).apply(null,arguments)},s._LRN=function(){return(s._LRN=s.asm.LRN).apply(null,arguments)},s._LRNGrad=function(){return(s._LRNGrad=s.asm.LRNGrad).apply(null,arguments)},s._LeakyRelu=function(){return(s._LeakyRelu=s.asm.LeakyRelu).apply(null,arguments)},s._Less=function(){return(s._Less=s.asm.Less).apply(null,arguments)},s._LessEqual=function(){return(s._LessEqual=s.asm.LessEqual).apply(null,arguments)},s._LinSpace=function(){return(s._LinSpace=s.asm.LinSpace).apply(null,arguments)},s._Log=function(){return(s._Log=s.asm.Log).apply(null,arguments)},s._Log1p=function(){return(s._Log1p=s.asm.Log1p).apply(null,arguments)},s._LogicalAnd=function(){return(s._LogicalAnd=s.asm.LogicalAnd).apply(null,arguments)},s._LogicalNot=function(){return(s._LogicalNot=s.asm.LogicalNot).apply(null,arguments)},s._LogicalOr=function(){return(s._LogicalOr=s.asm.LogicalOr).apply(null,arguments)},s._LogicalXor=function(){return(s._LogicalXor=s.asm.LogicalXor).apply(null,arguments)},s._Max=function(){return(s._Max=s.asm.Max).apply(null,arguments)},s._MaxPool=function(){return(s._MaxPool=s.asm.MaxPool).apply(null,arguments)},s._MaxPool3D=function(){return(s._MaxPool3D=s.asm.MaxPool3D).apply(null,arguments)},s._MaxPool3DGrad=function(){return(s._MaxPool3DGrad=s.asm.MaxPool3DGrad).apply(null,arguments)},s._MaxPoolGrad=function(){return(s._MaxPoolGrad=s.asm.MaxPoolGrad).apply(null,arguments)},s._MaxPoolWithArgmax=function(){return(s._MaxPoolWithArgmax=s.asm.MaxPoolWithArgmax).apply(null,arguments)},s._Maximum=function(){return(s._Maximum=s.asm.Maximum).apply(null,arguments)},s._Mean=function(){return(s._Mean=s.asm.Mean).apply(null,arguments)},s._Min=function(){return(s._Min=s.asm.Min).apply(null,arguments)},s._Minimum=function(){return(s._Minimum=s.asm.Minimum).apply(null,arguments)},s._MirrorPad=function(){return(s._MirrorPad=s.asm.MirrorPad).apply(null,arguments)},s._Mod=function(){return(s._Mod=s.asm.Mod).apply(null,arguments)},s._Multinomial=function(){return(s._Multinomial=s.asm.Multinomial).apply(null,arguments)},s._Multiply=function(){return(s._Multiply=s.asm.Multiply).apply(null,arguments)},s._Neg=function(){return(s._Neg=s.asm.Neg).apply(null,arguments)},s._NonMaxSuppressionV3=function(){return(s._NonMaxSuppressionV3=s.asm.NonMaxSuppressionV3).apply(null,arguments)},s._NonMaxSuppressionV4=function(){return(s._NonMaxSuppressionV4=s.asm.NonMaxSuppressionV4).apply(null,arguments)},s._NonMaxSuppressionV5=function(){return(s._NonMaxSuppressionV5=s.asm.NonMaxSuppressionV5).apply(null,arguments)},s._NotEqual=function(){return(s._NotEqual=s.asm.NotEqual).apply(null,arguments)},s._OneHot=function(){return(s._OneHot=s.asm.OneHot).apply(null,arguments)},s._PadV2=function(){return(s._PadV2=s.asm.PadV2).apply(null,arguments)},s._Pow=function(){return(s._Pow=s.asm.Pow).apply(null,arguments)},s._Prelu=function(){return(s._Prelu=s.asm.Prelu).apply(null,arguments)},s._Prod=function(){return(s._Prod=s.asm.Prod).apply(null,arguments)},s._RealDiv=function(){return(s._RealDiv=s.asm.RealDiv).apply(null,arguments)},s._Reciprocal=function(){return(s._Reciprocal=s.asm.Reciprocal).apply(null,arguments)},s._Relu=function(){return(s._Relu=s.asm.Relu).apply(null,arguments)},s._Relu6=function(){return(s._Relu6=s.asm.Relu6).apply(null,arguments)},s._ResizeBilinear=function(){return(s._ResizeBilinear=s.asm.ResizeBilinear).apply(null,arguments)},s._ResizeBilinearGrad=function(){return(s._ResizeBilinearGrad=s.asm.ResizeBilinearGrad).apply(null,arguments)},s._ResizeNearestNeighbor=function(){return(s._ResizeNearestNeighbor=s.asm.ResizeNearestNeighbor).apply(null,arguments)},s._ResizeNearestNeighborGrad=function(){return(s._ResizeNearestNeighborGrad=s.asm.ResizeNearestNeighborGrad).apply(null,arguments)},s._Reverse=function(){return(s._Reverse=s.asm.Reverse).apply(null,arguments)},s._RotateWithOffset=function(){return(s._RotateWithOffset=s.asm.RotateWithOffset).apply(null,arguments)},s._Round=function(){return(s._Round=s.asm.Round).apply(null,arguments)},s._Rsqrt=function(){return(s._Rsqrt=s.asm.Rsqrt).apply(null,arguments)},s._ScatterNd=function(){return(s._ScatterNd=s.asm.ScatterNd).apply(null,arguments)},s._SearchSorted=function(){return(s._SearchSorted=s.asm.SearchSorted).apply(null,arguments)},s._SelectV2=function(){return(s._SelectV2=s.asm.SelectV2).apply(null,arguments)},s._Selu=function(){return(s._Selu=s.asm.Selu).apply(null,arguments)},s._Sigmoid=function(){return(s._Sigmoid=s.asm.Sigmoid).apply(null,arguments)},s._Sign=function(){return(s._Sign=s.asm.Sign).apply(null,arguments)},s._Sin=function(){return(s._Sin=s.asm.Sin).apply(null,arguments)},s._Sinh=function(){return(s._Sinh=s.asm.Sinh).apply(null,arguments)},s._Softmax=function(){return(s._Softmax=s.asm.Softmax).apply(null,arguments)},s._Softplus=function(){return(s._Softplus=s.asm.Softplus).apply(null,arguments)},s._SparseFillEmptyRows=function(){return(s._SparseFillEmptyRows=s.asm.SparseFillEmptyRows).apply(null,arguments)},s._SparseReshape=function(){return(s._SparseReshape=s.asm.SparseReshape).apply(null,arguments)},s._SparseSegmentReduction=function(){return(s._SparseSegmentReduction=s.asm.SparseSegmentReduction).apply(null,arguments)},s._SparseToDense=function(){return(s._SparseToDense=s.asm.SparseToDense).apply(null,arguments)},s._Sqrt=function(){return(s._Sqrt=s.asm.Sqrt).apply(null,arguments)},s._Square=function(){return(s._Square=s.asm.Square).apply(null,arguments)},s._SquaredDifference=function(){return(s._SquaredDifference=s.asm.SquaredDifference).apply(null,arguments)},s._Step=function(){return(s._Step=s.asm.Step).apply(null,arguments)},s._StridedSlice=function(){return(s._StridedSlice=s.asm.StridedSlice).apply(null,arguments)},s._Sub=function(){return(s._Sub=s.asm.Sub).apply(null,arguments)},s._Sum=function(){return(s._Sum=s.asm.Sum).apply(null,arguments)},s._Tan=function(){return(s._Tan=s.asm.Tan).apply(null,arguments)},s._Tanh=function(){return(s._Tanh=s.asm.Tanh).apply(null,arguments)},s._TensorScatterUpdate=function(){return(s._TensorScatterUpdate=s.asm.TensorScatterUpdate).apply(null,arguments)},s._Tile=function(){return(s._Tile=s.asm.Tile).apply(null,arguments)},s._TopK=function(){return(s._TopK=s.asm.TopK).apply(null,arguments)},s._Transform=function(){return(s._Transform=s.asm.Transform).apply(null,arguments)},s._Transpose=function(){return(s._Transpose=s.asm.Transpose).apply(null,arguments)},s.__FusedMatMul=function(){return(s.__FusedMatMul=s.asm._FusedMatMul).apply(null,arguments)},s._malloc=function(){return(s._malloc=s.asm.malloc).apply(null,arguments)},s._free=function(){return(s._free=s.asm.free).apply(null,arguments)},s.___errno_location=function(){return(s.___errno_location=s.asm.__errno_location).apply(null,arguments)},s.stackSave=function(){return(re=s.stackSave=s.asm.stackSave).apply(null,arguments)}),ie=s.stackRestore=function(){return(ie=s.stackRestore=s.asm.stackRestore).apply(null,arguments)},oe=s.stackAlloc=function(){return(oe=s.stackAlloc=s.asm.stackAlloc).apply(null,arguments)};function ae(e){function n(){Z||(Z=!0,s.calledRun=!0,!T&&(Q(F),t(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),function(){if(s.postRun)for("function"==typeof s.postRun&&(s.postRun=[s.postRun]);s.postRun.length;)e=s.postRun.shift(),L.unshift(e);var e;Q(L)}()))}e=e||d,z>0||(function(){if(s.preRun)for("function"==typeof s.preRun&&(s.preRun=[s.preRun]);s.preRun.length;)e=s.preRun.shift(),M.unshift(e);var e;Q(M)}(),z>0)||(s.setStatus?(s.setStatus("Running..."),setTimeout((function(){setTimeout((function(){s.setStatus("")}),1),n()}),1)):n())}if(s.dynCall_iijjiiii=function(){return(s.dynCall_iijjiiii=s.asm.dynCall_iijjiiii).apply(null,arguments)},s.dynCall_jiji=function(){return(s.dynCall_jiji=s.asm.dynCall_jiji).apply(null,arguments)},s.cwrap=function(e,t,n,r){var i=(n=n||[]).every(e=>"number"===e||"boolean"===e);return"string"!==t&&i&&!r?X(e):function(){return Y(e,t,n,arguments)}},q=function e(){Z||ae(),Z||(q=e)},s.preInit)for("function"==typeof s.preInit&&(s.preInit=[s.preInit]);s.preInit.length>0;)s.preInit.pop()();if(ae(),o&&(ee={uncaughtException:r.listeners("uncaughtException").filter((function(e){return!o.uncaughtException.indexOf(e)>-1})),unhandledRejection:r.listeners("unhandledRejection").filter((function(e){return!o.unhandledRejection.indexOf(e)>-1}))}),void 0!==e)te=e;else{if("undefined"==typeof WasmBackendModuleThreadedSimd)throw new Error("Could not find wasm module in post.js");te=WasmBackendModuleThreadedSimd}if(ee){var se=te._dispose;te._dispose=function(){se(),ee.uncaughtException.forEach((function(e){r.removeListener("uncaughtException",e)})),ee.unhandledRejection.forEach((function(e){r.removeListener("unhandledRejection",e)}))}}return e.ready});"object"==typeof t&&"object"==typeof o?o.exports=s:"function"==typeof define&&n(38)?define([],(function(){return s})):"object"==typeof t&&(t.WasmBackendModule=s)}),$=class{constructor(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,t){this.dataIdsCount++,this.data.set(e,t)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}},B=class{refCount(e){return U("refCount")}incRef(e){return U("incRef")}timerAvailable(){return!0}time(e){return U("time")}read(e){return U("read")}readSync(e){return U("readSync")}readToGPU(e,t){return U("readToGPU")}numDataIds(){return U("numDataIds")}disposeData(e,t){return U("disposeData")}write(e,t,n){return U("write")}move(e,t,n,r,i){return U("move")}createTensorFromGPUData(e,t,n){return U("createTensorFromGPUData")}memory(){return U("memory")}floatPrecision(){return U("floatPrecision")}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}dispose(){return U("dispose")}};function U(e){throw new Error(`'${e}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}function W(e){let t=e.length,n=0;for(;t>0;)n=Math.random()*t|0,t--,K(e,t,n)}function H(e,t){if(e.length!==t.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${e.length}Second array length was ${t.length}`);let n=e.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,K(e,n,r),K(t,n,r)}function Q(e,t,n){return Math.max(e,Math.min(t,n))}function G(e){return e%2==0?e:e+1}function K(e,t,n){let r=e[t];e[t]=e[n],e[n]=r}function J(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function X(e,t){let n=Math.random();return t*n+(1-n)*e}function Y(e,t){let n=0;for(let r=0;r<e.length;r++){let i=Number(e[r])-Number(t[r]);n+=i*i}return n}function Z(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function ee(e,t,n=""){Z(oe(e,t),()=>n+` Shapes ${e} and ${t} must match`)}function te(e){Z(null!=e,()=>"The input to the tensor constructor must be a non-null value.")}function ne(e){if(0===e.length)return 1;let t=e[0];for(let n=1;n<e.length;n++)t*=e[n];return t}function re(e){return 0===e.length}function ie(e,t){if(e===t)return!0;if(null==e||null==t||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(null!==e[n]&&null!==t[n]&&e[n]!==t[n])return!1;return!0}function oe(e,t){if(e===t)return!0;if(null==e||null==t||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ae(e){return e%1==0}function se(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;{let t=Math.exp(2*e);return(t-1)/(t+1)}}function le(e){let t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function ue(e){let t=new Uint32Array(e);for(let n=0;n<e;++n)t[n]=n;return W(t),t}function ce(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function pe(e,t=(e=>0),n,r){return new Promise((i,o)=>{let a=0,s=()=>{if(e())return void i();a++;let l=t(a);null!=n&&a>=n?o():null!=r?r(s,l):setTimeout(s,l)};s()})}function de(e,t){let n=1,r=-1;for(let t=0;t<e.length;++t)if(e[t]>=0)n*=e[t];else if(-1===e[t]){if(-1!==r)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${t}`);r=t}else if(e[t]<0)throw Error(`Shapes can not be < 0. Found ${e[t]} at dim ${t}`);if(-1===r){if(t>0&&t!==n)throw Error(`Size(${t}) must match the product of shape ${e}`);return e}if(0===n)throw Error(`Cannot infer the missing size in [${e}] when there are 0 elements`);if(t%n!=0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${n}`);let i=e.slice();return i[r]=t/n,i}function he(e,t){let n=t.length;return Z((e=null==e?t.map((e,t)=>t):[].concat(e)).every(e=>e>=-n&&e<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${e}`),Z(e.every(e=>ae(e)),()=>"All values in axis param must be integers but got axis "+e),e.map(e=>e<0?n+e:e)}function fe(e,t){let n=[],r=[],i=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||i?null:he(t,e).sort(),a=0;for(let t=0;t<e.length;++t){if(null!=o){if(o[a]===t&&1!==e[t])throw new Error(`Can't squeeze axis ${t} since its dim '${e[t]}' is not 1`);(null==o[a]||o[a]>t)&&1===e[t]&&(n.push(e[t]),r.push(t)),o[a]<=t&&a++}1!==e[t]&&(n.push(e[t]),r.push(t))}return{newShape:n,keptDims:r}}function me(e,t){return ge(e,t)}function ge(e,t){let n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type "+e);n=new Array(t)}return n}function ye(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${t} being uploaded contains ${r}.`)}}function ve(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function be(e,t){return!("complex64"===t||"float32"===t&&"complex64"!==e||"int32"===t&&"float32"!==e&&"complex64"!==e||"bool"===t&&"bool"===e)}function xe(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype "+e)}function we(e){if(null==e)return 0;let t=0;return e.forEach(e=>t+=e.length),t}function _e(e){return"string"==typeof e||e instanceof String}function Ce(e){return"boolean"==typeof e}function Se(e){return"number"==typeof e}function ke(e){return Array.isArray(e)?ke(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray?"int32":Se(e)?"float32":_e(e)?"string":Ce(e)?"bool":"float32"}function Ee(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Te(e,t){for(let n=t;n<e;++n)if(e%n==0)return n;return e}function Ie(e){let t=e.length;if(t<2)return[];let n=new Array(t-1);n[t-2]=e[t-1];for(let r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function Pe(e,t,n=!1){if(0===e.length)return t[0];let r=e.reduce((e,t)=>e*t)*(n?2:1);if(0===r)return[];if(r!==t.length)throw new Error(`[${e}] does not match the input size ${t.length}${n?" for a complex tensor":""}.`);return function e(t,n,r,i=!1){let o=new Array;if(1===n.length){let e=n[0]*(i?2:1);for(let n=0;n<e;n++)o[n]=r[t+n]}else{let a=n[0],s=n.slice(1),l=s.reduce((e,t)=>e*t)*(i?2:1);for(let n=0;n<a;n++)o[n]=e(t+n*l,s,r,i)}return o}(0,e,t,n)}function Oe(e,t){if(Array.isArray(e))return e;if("float32"===t)return e instanceof Float32Array?e:new Float32Array(e);if("int32"===t)return e instanceof Int32Array?e:new Int32Array(e);if("bool"===t||"string"===t)return Uint8Array.from(new Int32Array(e));throw new Error("Unknown dtype "+t)}function Ne(e,t){let n=Re(e,t);for(let e=0;e<n.length;e++)n[e]=1;return n}function Re(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type "+t)}function Ae(e,t){let n=e.reduce((e,t)=>e*t,1);if(null==t||"float32"===t)return Pe(e,new Float32Array(n));if("int32"===t)return Pe(e,new Int32Array(n));if("bool"===t)return Pe(e,new Uint8Array(n));throw new Error("Unknown data type "+t)}function De(e){e.forEach(t=>{Z(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${e}].`)})}function Ve(e,t,n){if(0===t)return 0;if(1===t)return e[0];let r=e[e.length-1];for(let t=0;t<e.length-1;++t)r+=n[t]*e[t];return r}function Me(e,t,n){if(0===t)return[];if(1===t)return[e];let r=new Array(t);for(let t=0;t<r.length-1;++t)r[t]=Math.floor(e/n[t]),e-=r[t]*n[t];return r[r.length-1]=e,r}function Fe(e){return e&&e.then&&"function"==typeof e.then}var Le="tfjsflags",ze=class{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=je,this.populateURLFlags()}setPlatform(e,t){null!=this.platform&&(qe().getBool("IS_TEST")||qe().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=t}registerFlag(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){let t=this.urlFlags[e];qe().getBool("IS_TEST")||qe().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${t}.`),this.set(e,t)}}async getAsync(e){return e in this.flags||(this.flags[e]=await this.evaluateFlag(e)),this.flags[e]}get(e){if(e in this.flags)return this.flags[e];let t=this.evaluateFlag(e);if(Fe(t))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=t,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,t){if(null==this.flagRegistry[e])throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)}evaluateFlag(e){if(null==this.flagRegistry[e])throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(void 0===this.global||void 0===this.global.location||void 0===this.global.location.search)return;let e=this.getQueryParams(this.global.location.search);Le in e&&e[Le].split(",").forEach(e=>{let[t,n]=e.split(":");this.urlFlags[t]=function(e,t){let n=t.toLowerCase();return"true"===n||"false"===n?"true"===n:""+ +n===n?+n:t}(0,n)})}};function je(e){let t={};return e.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(e,...n)=>(function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(t,n[0],n[1]),n.join("="))),t}function qe(){return Be}var $e,Be=null;function Ue(){if(null==$e){let e;if("undefined"!=typeof window)e=window;else if(void 0!==o)e=o;else if(void 0!==r)e=r;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}$e=e}return $e}function We(e,t){let n=function(){let e=Ue();return null==e._tfGlobals&&(e._tfGlobals=new Map),e._tfGlobals}();if(n.has(e))return n.get(e);{let r=t();return n.set(e,r),n.get(e)}}var He="Abs",Qe="Acos",Ge="Acosh",Ke="Add",Je="AddN",Xe="All",Ye="Any",Ze="ArgMax",et="ArgMin",tt="Asin",nt="Asinh",rt="Atan",it="Atanh",ot="Atan2",at="AvgPool",st="AvgPoolGrad",lt="AvgPool3D",ut="AvgPool3DGrad",ct="BatchMatMul",pt="BatchToSpaceND",dt="Bincount",ht="BitwiseAnd",ft="BroadcastTo",mt="BroadcastArgs",gt="Cast",yt="Ceil",vt="ClipByValue",bt="Complex",xt="ComplexAbs",wt="Concat",_t="Conv2D",Ct="Conv2DBackpropFilter",St="Conv2DBackpropInput",kt="Conv3D",Et="Conv3DBackpropFilterV2",Tt="Conv3DBackpropInputV2",It="Cos",Pt="Cosh",Ot="Cumprod",Nt="Cumsum",Rt="CropAndResize",At="DenseBincount",Dt="DepthToSpace",Vt="DepthwiseConv2dNative",Mt="DepthwiseConv2dNativeBackpropFilter",Ft="DepthwiseConv2dNativeBackpropInput",Lt="Diag",zt="Dilation2D",jt="Dilation2DBackpropInput",qt="Dilation2DBackpropFilter",$t="Draw",Bt="RealDiv",Ut="Einsum",Wt="Elu",Ht="EluGrad",Qt="Erf",Gt="Equal",Kt="Exp",Jt="ExpandDims",Xt="Expm1",Yt="FFT",Zt="Fill",en="FlipLeftRight",tn="Floor",nn="FloorDiv",rn="FusedBatchNorm",on="GatherV2",an="GatherNd",sn="Greater",ln="GreaterEqual",un="Identity",cn="IFFT",pn="Imag",dn="IsFinite",hn="IsInf",fn="IsNan",mn="LeakyRelu",gn="Less",yn="LessEqual",vn="LinSpace",bn="Log",xn="Log1p",wn="LogicalAnd",_n="LogicalNot",Cn="LogicalOr",Sn="LogicalXor",kn="LogSoftmax",En="LowerBound",Tn="LRN",In="LRNGrad",Pn="MatrixBandPart",On="Max",Nn="Maximum",Rn="MaxPool",An="MaxPoolGrad",Dn="MaxPool3D",Vn="MaxPool3DGrad",Mn="MaxPoolWithArgmax",Fn="Mean",Ln="Min",zn="Minimum",jn="MirrorPad",qn="Mod",$n="Multinomial",Bn="Multiply",Un="Neg",Wn="NotEqual",Hn="NonMaxSuppressionV3",Qn="NonMaxSuppressionV4",Gn="NonMaxSuppressionV5",Kn="OnesLike",Jn="OneHot",Xn="Pack",Yn="PadV2",Zn="Pool",er="Pow",tr="Prelu",nr="Prod",rr="RaggedGather",ir="RaggedRange",or="RaggedTensorToTensor",ar="Range",sr="Real",lr="Reciprocal",ur="Relu",cr="Reshape",pr="ResizeNearestNeighbor",dr="ResizeNearestNeighborGrad",hr="ResizeBilinear",fr="ResizeBilinearGrad",mr="Relu6",gr="Reverse",yr="Round",vr="Rsqrt",br="ScatterNd",xr="TensorScatterUpdate",wr="SearchSorted",_r="Select",Cr="Selu",Sr="Slice",kr="Sin",Er="Sinh",Tr="Sign",Ir="Sigmoid",Pr="Softplus",Or="Sqrt",Nr="Sum",Rr="SpaceToBatchND",Ar="SplitV",Dr="Softmax",Vr="SparseFillEmptyRows",Mr="SparseReshape",Fr="SparseSegmentMean",Lr="SparseSegmentSum",zr="SparseToDense",jr="SquaredDifference",qr="Square",$r="StaticRegexReplace",Br="StridedSlice",Ur="StringNGrams",Wr="StringSplit",Hr="StringToHashBucketFast",Qr="Sub",Gr="Tan",Kr="Tanh",Jr="Tile",Xr="TopK",Yr="Transform",Zr="Transpose",ei="Unique",ti="Unpack",ni="UnsortedSegmentSum",ri="UpperBound",ii="ZerosLike",oi="Step",ai="FromPixels",si="RotateWithOffset",li="_FusedMatMul",ui="FusedConv2D",ci="FusedDepthwiseConv2D";function pi(...e){qe().getBool("IS_TEST")||qe().getBool("PROD")||console.warn(...e)}function di(...e){qe().getBool("IS_TEST")||qe().getBool("PROD")||console.log(...e)}var hi=We("kernelRegistry",()=>new Map),fi=We("gradRegistry",()=>new Map);function mi(e,t){let n=Ci(e,t);return hi.get(n)}function gi(e){return fi.get(e)}function yi(e){let t=hi.entries(),n=[];for(;;){let{done:r,value:i}=t.next();if(r)break;let[o,a]=i,[s]=o.split("_");s===e&&n.push(a)}return n}function vi(e){let{kernelName:t,backendName:n}=e,r=Ci(t,n);hi.has(r)&&pi(`The kernel '${t}' for backend '${n}' is already registered`),hi.set(r,e)}function bi(e){let{kernelName:t}=e;fi.has(t)&&qe().getBool("DEBUG")&&pi(`Overriding the gradient for '${t}'`),fi.set(t,e)}function xi(e,t){let n=Ci(e,t);if(!hi.has(n))throw new Error(`The kernel '${e}' for backend '${t}' is not registered`);hi.delete(n)}function wi(e){if(!fi.has(e))throw new Error(`The gradient '${e}' for backend is not registered`);fi.delete(e)}function _i(e,t){yi(e).forEach(e=>{vi(Object.assign({},e,{backendName:t}))})}function Ci(e,t){return`${t}_${e}`}var Si={};function ki(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray}b(Si,{arraysEqual:()=>oe,arraysEqualWithNull:()=>ie,assert:()=>Z,assertNonNegativeIntegerDimensions:()=>De,assertNonNull:()=>te,assertShapesMatch:()=>ee,bytesFromStringArray:()=>we,bytesPerElement:()=>xe,checkConversionForErrors:()=>ye,clamp:()=>Q,computeStrides:()=>Ie,convertBackendValuesAndArrayBuffer:()=>Oe,createScalarValue:()=>ji,createShuffledIndices:()=>ue,decodeString:()=>Wi,distSquared:()=>Y,encodeString:()=>Ui,fetch:()=>Bi,fingerPrint64:()=>zi,flatten:()=>Qi,getArrayFromDType:()=>ge,getTypedArrayFromDType:()=>me,hasEncodingLoss:()=>be,hexToLong:()=>Ii,indexToLoc:()=>Me,inferDtype:()=>ke,inferFromImplicitShape:()=>de,isBoolean:()=>Ce,isFunction:()=>Ee,isInt:()=>ae,isNumber:()=>Se,isPromise:()=>Fe,isScalarShape:()=>re,isString:()=>_e,isTypedArray:()=>Hi,isValidDtype:()=>ve,locToIndex:()=>Ve,makeOnesTypedArray:()=>Ne,makeZerosNestedTypedArray:()=>Ae,makeZerosTypedArray:()=>Re,nearestDivisor:()=>Te,nearestLargerEven:()=>G,now:()=>$i,parseAxisParam:()=>he,randUniform:()=>X,repeatedTry:()=>pe,rightPad:()=>ce,shuffle:()=>W,shuffleCombo:()=>H,sizeFromShape:()=>ne,sizeToSquarishShape:()=>le,squeezeShape:()=>fe,sum:()=>J,swap:()=>K,tanh:()=>se,toNestedArray:()=>Pe,toTypedArray:()=>qi});var Ei=x(w()),Ti=Ei.default||Ei;function Ii(e){return Ti.fromString(e,!0,16)}var Pi=Ii("c3a5c85c97cb3127"),Oi=Ii("b492b66fbe98f273"),Ni=Ii("9ae16a3b2f90404f");function Ri(e){return e.xor(e.shru(47))}function Ai(e,t,n){let r=e.slice(t,t+n);return Ti.fromBytes(Array.from(r),!0,!0)}function Di(e,t){return Ai(e,t,8)}function Vi(e,t){return Ai(e,t,4)}function Mi(e,t){return 0===t?e:e.shru(t).or(e.shl(64-t))}function Fi(e,t,n=Ii("9ddfea08eb382d69")){let r=e.xor(t).mul(n);r=r.xor(r.shru(47));let i=t.xor(r).mul(n);return i=i.xor(i.shru(47)),i=i.mul(n),i}function Li(e,t,n,r){return function(e,t,n,r,i,o){i=i.add(e),o=Mi(o.add(i).add(r),21);let a=i;return i=(i=i.add(t)).add(n),o=o.add(Mi(i,44)),[i.add(r),o.add(a)]}(Di(e,t),Di(e,t+8),Di(e,t+16),Di(e,t+24),n,r)}function zi(e,t=e.length){let n=Ti.fromNumber(81,!0);if(t<=32)return t<=16?function(e,t=e.length){if(t>=8){let n=Ni.add(2*t),r=Di(e,0).add(Ni),i=Di(e,t-8);return Fi(Mi(i,37).mul(n).add(r),Mi(r,25).add(i).mul(n),n)}if(t>=4){let n=Ni.add(2*t);return Fi(Vi(e,0).shl(3).add(t),Vi(e,t-4),n)}if(t>0){let n=e[0]+(e[t>>1]<<8),r=t+(e[t-1]<<2);return Ri(Ni.mul(n).xor(Pi.mul(r))).mul(Ni)}return Ni}(e,t):function(e,t=e.length){let n=Ni.add(2*t),r=Di(e,0).mul(Oi),i=Di(e,8),o=Di(e,t-8).mul(n),a=Di(e,t-16).mul(Ni);return Fi(Mi(r.add(i),43).add(Mi(o,30)).add(a),r.add(Mi(i.add(Ni),18)).add(o),n)}(e,t);if(t<=64)return function(e,t=e.length){let n=Ni.add(2*t),r=Di(e,0).mul(Ni),i=Di(e,8),o=Di(e,t-8).mul(n),a=Di(e,t-16).mul(Ni),s=Mi(r.add(i),43).add(Mi(o,30)).add(a),l=Fi(s,r.add(Mi(i.add(Ni),18)).add(o),n),u=Di(e,16).mul(n),c=Di(e,24),p=s.add(Di(e,t-32)).mul(n),d=l.add(Di(e,t-24)).mul(n);return Fi(Mi(u.add(c),43).add(Mi(p,30)).add(d),u.add(Mi(c.add(r),18)).add(p),n)}(e,t);let r=n,i=n.mul(Oi).add(113),o=Ri(i.mul(Ni).add(113)).mul(Ni),a=[Ti.UZERO,Ti.UZERO],s=[Ti.UZERO,Ti.UZERO];r=r.mul(Ni).add(Di(e,0));let l=0,u=64*(t-1>>6),c=u+(t-1&63)-63;do{r=Mi(r.add(i).add(a[0]).add(Di(e,l+8)),37).mul(Oi),i=Mi(i.add(a[1]).add(Di(e,l+48)),42).mul(Oi),r=r.xor(s[1]),i=i.add(a[0]).add(Di(e,l+40)),o=Mi(o.add(s[0]),33).mul(Oi),a=Li(e,l,a[1].mul(Oi),r.add(s[0])),s=Li(e,l+32,o.add(s[1]),i.add(Di(e,l+16))),[o,r]=[r,o],l+=64}while(l!==u);let p=Oi.add(o.and(255).shl(1));return l=c,s[0]=s[0].add(t-1&63),a[0]=a[0].add(s[0]),s[0]=s[0].add(a[0]),r=Mi(r.add(i).add(a[0]).add(Di(e,l+8)),37).mul(p),i=Mi(i.add(a[1]).add(Di(e,l+48)),42).mul(p),r=r.xor(s[1].mul(9)),i=i.add(a[0].mul(9).add(Di(e,l+40))),o=Mi(o.add(s[0]),33).mul(p),a=Li(e,l,a[1].mul(p),r.add(s[0])),s=Li(e,l+32,o.add(s[1]),i.add(Di(e,l+16))),[o,r]=[r,o],Fi(Fi(a[0],s[0],p).add(Ri(i).mul(Pi)).add(o),Fi(a[1],s[1],p).add(r),p)}function ji(e,t){return"string"===t?Ui(e):qi([e],t)}function qi(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Qi(e)),qe().getBool("DEBUG")&&ye(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){let t=new Uint8Array(e.length);for(let n=0;n<t.length;++n)0!==Math.round(e[n])&&(t[n]=1);return t}throw new Error("Unknown data type "+t)}function $i(){return qe().platform.now()}function Bi(e,t){return qe().platform.fetch(e,t)}function Ui(e,t="utf-8"){return t=t||"utf-8",qe().platform.encode(e,t)}function Wi(e,t="utf-8"){return t=t||"utf-8",qe().platform.decode(e,t)}function Hi(e){return null!=qe().platform.isTypedArray?qe().platform.isTypedArray(e):ki(e)}function Qi(e,t=[],n=!1){if(null==t&&(t=[]),"boolean"==typeof e||"number"==typeof e||"string"==typeof e||Fe(e)||null==e||Hi(e)&&n)t.push(e);else if(Array.isArray(e)||Hi(e))for(let r=0;r<e.length;++r)Qi(e[r],t,n);else{let r=-1;for(let t of Object.keys(e))/^([1-9]+[0-9]*|0)$/.test(t)&&(r=Math.max(r,Number(t)));for(let i=0;i<=r;i++)Qi(e[i],t,n)}return t}function Gi(e,t,n){if("float32"!==t)return!1;for(let t=0;t<e.length;t++){let r=e[t];if(isNaN(r)||!isFinite(r))return console.warn(`Found ${r} in the result of '${n}'`),!0}return!1}var Ki=class{logKernelProfile(e,t,n,r,i,o){let a="number"==typeof r?ce(r+"ms",9):r.error,s=ce(e,25),l=t.rank,u=t.size,c=ce(t.shape.toString(),14),p="";for(let e in i){let n=i[e];if(null!=n){let r=n.shape||t.shape,i=r.length;p+=`${e}: ${i}D ${i>0?r:""} `}}console.log(`%c${s}\t%c${a}\t%c${l}D ${c}\t%c${u}\t%c${p}\t%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}};function Ji(e,t,n,r){let i=Ie(t),o=function(e,t,n,r){let i=ne(t),o=r[r.length-1],a=new Array(o).fill(0),s=t.length,l="complex64"===n?Zi(e):e;if(s>1)for(let e=0;e<i/o;e++){let t=e*o;for(let e=0;e<o;e++)a[e]=Math.max(a[e],Xi(l[t+e],0,n).length)}return a}(e,t,n,i),a=t.length,s=function e(t,n,r,i,o,a=!0){let s="complex64"===r?2:1,l=n[0],u=n.length;if(0===u){if("complex64"===r){return[Xi(Zi(t)[0],0,r)]}return"bool"===r?[Yi(t[0])]:[t[0].toString()]}if(1===u){if(l>20){let e=3*s,n=Array.from(t.slice(0,e)),i=Array.from(t.slice((l-3)*s,l*s));return"complex64"===r&&(n=Zi(n),i=Zi(i)),["["+n.map((e,t)=>Xi(e,o[t],r)).join(", ")+", ..., "+i.map((e,t)=>Xi(e,o[l-3+t],r)).join(", ")+"]"]}return["["+("complex64"===r?Zi(t):Array.from(t)).map((e,t)=>Xi(e,o[t],r)).join(", ")+"]"]}let c=n.slice(1),p=i.slice(1),d=i[0]*s,h=[];if(l>20){for(let n=0;n<3;n++){let i=n*d,a=i+d;h.push(...e(t.slice(i,a),c,r,p,o,!1))}h.push("...");for(let n=l-3;n<l;n++){let i=n*d,a=i+d;h.push(...e(t.slice(i,a),c,r,p,o,n===l-1))}}else for(let n=0;n<l;n++){let i=n*d,a=i+d;h.push(...e(t.slice(i,a),c,r,p,o,n===l-1))}let f=2===u?",":"";h[0]="["+(l>0?h[0]+f:"");for(let e=1;e<h.length-1;e++)h[e]=" "+h[e]+f;let m=",\n";for(let e=2;e<u;e++)m+="\n";return h[h.length-1]=" "+h[h.length-1]+"]"+(a?"":m),h}(e,t,n,i,o),l=["Tensor"];return r&&(l.push("  dtype: "+n),l.push("  rank: "+a),l.push(`  shape: [${t}]`),l.push("  values:")),l.push(s.map(e=>"    "+e).join("\n")),l.join("\n")}function Xi(e,t,n){let r;return r=Array.isArray(e)?`${parseFloat(e[0].toFixed(7))} + ${parseFloat(e[1].toFixed(7))}j`:_e(e)?`'${e}'`:"bool"===n?Yi(e):parseFloat(e.toFixed(7)).toString(),ce(r,t)}function Yi(e){return 0===e?"false":"true"}function Zi(e){let t=[];for(let n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var eo=class{constructor(e,t,n){if(this.dtype=t,this.shape=e.slice(),this.size=ne(e),null!=n){let e=n.length;Z(e===this.size,()=>`Length of values '${e}' does not match the size inferred by the shape '${this.size}'.`)}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||ge(t,this.size),this.strides=Ie(e)}set(e,...t){0===t.length&&(t=[0]),Z(t.length===this.rank,()=>`The number of provided coordinates (${t.length}) must match the rank (${this.rank})`);let n=this.locToIndex(t);this.values[n]=e}get(...e){0===e.length&&(e=[0]);let t=0;for(let n of e){if(n<0||n>=this.shape[t]){let t=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(t)}t++}let n=e[e.length-1];for(let t=0;t<e.length-1;++t)n+=this.strides[t]*e[t];return this.values[n]}locToIndex(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];let t=e[e.length-1];for(let n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t}indexToLoc(e){if(0===this.rank)return[];if(1===this.rank)return[e];let t=new Array(this.shape.length);for(let n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t}get rank(){return this.shape.length}toTensor(){return to().makeTensor(this.values,this.shape,this.dtype)}},to=null,no=null;var ro=class{constructor(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=ne(e),this.strides=Ie(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){let e=await this.data();return no.buffer(this.shape,this.dtype,e)}bufferSync(){return no.buffer(this.shape,this.dtype,this.dataSync())}async array(){let e=await this.data();return Pe(this.shape,e,"complex64"===this.dtype)}arraySync(){return Pe(this.shape,this.dataSync(),"complex64"===this.dtype)}async data(){this.throwIfDisposed();let e=to().read(this.dataId);if("string"===this.dtype){let t=await e;try{return t.map(e=>Wi(e))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),to().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();let e=to().readSync(this.dataId);if("string"===this.dtype)try{return e.map(e=>Wi(e))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();let e=await to().read(this.dataId);return"string"===this.dtype?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(to().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return no.print(this,e)}clone(){return this.throwIfDisposed(),no.clone(this)}toString(e=!1){return Ji(this.dataSync(),this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),no.cast(this,e)}variable(e=!0,t,n){return this.throwIfDisposed(),to().makeVariable(this,e,t,n)}};function io(){return We("Tensor",()=>ro)}Object.defineProperty(ro,Symbol.hasInstance,{value:e=>!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}),io();var oo=class extends ro{constructor(e,t,n,r){super(e.shape,e.dtype,e.dataId,r),this.trainable=t,this.name=n}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!oe(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);to().disposeTensor(this),this.dataId=e.dataId,to().incRef(this,null)}dispose(){to().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(oo,Symbol.hasInstance,{value:e=>e instanceof ro&&null!=e.assign&&e.assign instanceof Function});var ao,so,lo,uo,co,po,ho={};b(ho,{assertTypesMatch:()=>xo,getTensorsInContainer:()=>_o,isTensorInList:()=>wo,makeTypesMatch:()=>bo}),(so=ao||(ao={})).R0="R0",so.R1="R1",so.R2="R2",so.R3="R3",so.R4="R4",so.R5="R5",so.R6="R6",function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(lo||(lo={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(uo||(uo={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(co||(co={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(po||(po={}));var fo={float32:co,int32:lo,bool:uo,complex64:po};function mo(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error(`Can not upcast ${e} with ${t}`)}return fo[e][t]}function go(e){return mo(e,"int32")}function yo(e){return null!=e&&"object"==typeof e&&"texture"in e&&e.texture instanceof WebGLTexture}function vo(e){return"undefined"!=typeof GPUBuffer&&null!=e&&"object"==typeof e&&"buffer"in e&&e.buffer instanceof GPUBuffer}function bo(e,t){if(e.dtype===t.dtype)return[e,t];let n=mo(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function xo(e,t){Z(e.dtype===t.dtype,()=>`The dtypes of the first(${e.dtype}) and second(${t.dtype}) input must match`)}function wo(e,t){return t.some(t=>t.id===e.id)}function _o(e){let t=[];return function e(t,n,r){if(null==t)return;if(t instanceof ro)return void n.push(t);if(!function(e){return Array.isArray(e)||"object"==typeof e}(t))return;let i=t;for(let t in i){let o=i[t];r.has(o)||(r.add(o),e(o,n,r))}}(e,t,new Set),t}function Co(e){return null!=e.kernelName}var So=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(let e in this.registeredVariables)this.registeredVariables[e].dispose()}},ko=class{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new So}async ready(){if(null!=this.pendingBackendInit)return this.pendingBackendInit.then(()=>{});if(null!=this.backendInstance)return;let e=this.getSortedBackends();for(let t=0;t<e.length;t++){let n=e[t];if(await this.initializeBackend(n).success)return void await this.setBackend(n)}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(null!=this.pendingBackendInit)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(null==this.backendInstance){let{name:e,asyncInit:t}=this.initializeBackendsAndReturnBest();if(t)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;{let{asyncInit:t}=this.initializeBackend(e);if(t)return null}}return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,t,n=1){return e in this.registryFactory?(pi(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)}async setBackend(e){if(null==this.registryFactory[e])throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,null==this.registry[e]){this.backendInstance=null;let{success:t,asyncInit:n}=this.initializeBackend(e);if(!(n?await t:t))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new class{constructor(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new Ki)}profileKernel(e,t,n){let r,i,o=()=>{r=n()},a=$i();if(this.backendTimer.timerAvailable())i=this.backendTimer.time(o);else{o();for(let e of r)e.dataSync();i=Promise.resolve({kernelMs:$i()-a})}if(qe().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let t=0;t<r.length;t++){let n=r[t];n.data().then(t=>{Gi(t,n.dtype,e)})}return{kernelName:e,outputs:r,inputs:t,timeMs:i.then(e=>e.kernelMs),extraInfo:i.then(e=>null!=e.getExtraProfileInfo?e.getExtraProfileInfo():"")}}logKernelProfile(e){let{kernelName:t,outputs:n,timeMs:r,inputs:i,extraInfo:o}=e;n.forEach(e=>{Promise.all([e.data(),r,o]).then(n=>{this.logger.logKernelProfile(t,e,n[0],n[1],i,n[2])})})}}(this.backendInstance),!0}setupRegisteredKernels(){yi(this.backendName).forEach(e=>{null!=e.setupFunc&&e.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){yi(e).forEach(t=>{null!=t.disposeFunc&&t.disposeFunc(this.registry[e])})}initializeBackend(e){let t=this.registryFactory[e];if(null==t)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{let n=t.factory();if(!n||n instanceof B||"function"!=typeof n.then)return this.registry[e]=n,{success:!0,asyncInit:!1};{let t=++this.pendingBackendInitId,r=n.then(n=>!(t<this.pendingBackendInitId)&&(this.registry[e]=n,this.pendingBackendInit=null,!0)).catch(n=>(t<this.pendingBackendInitId||(this.pendingBackendInit=null,pi(`Initialization of backend ${e} failed`),pi(n.stack||n.message)),!1));return this.pendingBackendInit=r,{success:r,asyncInit:!0}}}catch(t){return pi(`Initialization of backend ${e} failed`),pi(t.stack||t.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,t)=>this.registryFactory[t].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){let e=this.getSortedBackends();for(let t=0;t<e.length;t++){let n=e[t],{success:r,asyncInit:i}=this.initializeBackend(n);if(i||r)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,t){let n=this.state.tensorInfo.get(t),r=n.backend,i=this.readSync(t),o=r.refCount(t);r.disposeData(t,!0),n.backend=e,e.move(t,i,n.shape,n.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,t){let n,r=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}return this.scopedRun(()=>this.startScope(r),()=>this.endScope(n),()=>(n=t(),n instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n))}scopedRun(e,t,n){e();try{let e=n();return t(),e}catch(e){throw t(),e}}nextTensorId(){return ko.nextTensorId++}nextVariableId(){return ko.nextVariableId++}clone(e){let t=To.runKernel(un,{x:e}),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],e=>({x:()=>{let t={x:e},n={dtype:"float32"};return To.runKernel(gt,t,n)}}),[],{}),t}runKernel(e,t,n){if(null==this.backendName&&this.backend,null==mi(e,this.backendName))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:t,attrs:n})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,t,n){let r=this.backend.numDataIds(),i=0;n.forEach(e=>{i+="complex64"===e.dtype?3:1});let o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=r-t-i-o;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let t,n,r=[],i=this.isTapeOn(),o=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;let s,l=Co(e)?e.kernelName:null!=this.state.activeScope?this.state.activeScope.name:"";if(Co(e)){let{kernelName:t,inputs:o,attrs:a}=e;null==this.backendName&&this.backend;let l=mi(t,this.backendName);Z(null!=l,()=>`Cannot find registered kernel '${t}' for backend '${this.backendName}'`),n=()=>{let e=this.backend.numDataIds();s=l.kernelFunc({inputs:o,attrs:a,backend:this.backend});let n=Array.isArray(s)?s:[s];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(t,e,n);let u=n.map(e=>null!=e.rank?e:this.makeTensorFromTensorInfo(e));if(i){let e=this.getTensorsForGradient(t,o,u);r=this.saveTensorsForBackwardMode(e)}return u}}else{let{forwardFunc:t}=e,o=e=>{i&&(r=e.map(e=>this.keep(this.clone(e))))};n=()=>{let e=this.backend.numDataIds();s=this.tidy(()=>t(this.backend,o));let n=Array.isArray(s)?s:[s];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(l,e,n),n}}let u,{inputs:c,attrs:p}=e,d=Co(e)?null:e.backwardsFunc;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{this.ENV.getBool("DEBUG")||this.state.profiling?(u=this.profiler.profileKernel(l,c,()=>n()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(u),t=u.outputs):t=n()}),i&&this.addTapeNode(l,c,t,d,r,p),this.state.profiling&&this.state.activeProfile.kernels.push({name:l,bytesAdded:this.state.numBytes-o,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(c).map(e=>null!=c[e]?c[e].shape:null),outputShapes:t.map(e=>e.shape),kernelTimeMs:u.timeMs,extraInfo:u.extraInfo}),Array.isArray(s)?t:t[0]}saveTensorsForBackwardMode(e){return e.map(e=>this.keep(this.clone(e)))}getTensorsForGradient(e,t,n){let r=gi(e);if(null!=r){let e,i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(Z(Array.isArray(t),()=>"saveAllInputs is true, expected inputs to be an array."),e=Object.keys(t).map(e=>t[e])):e=i.map(e=>t[e]);let a=n.filter((e,t)=>o[t]);return e.concat(a)}return[]}makeTensor(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;let i=e;"string"===n&&_e(e[0])&&(i=e.map(e=>Ui(e)));let o=r.write(i,t,n),a=new ro(t,n,o,this.nextTensorId());if(this.trackTensor(a,r),"string"===n){let e=this.state.tensorInfo.get(o),t=we(i);this.state.numBytes+=t-e.bytes,e.bytes=t}return a}makeTensorFromDataId(e,t,n,r){let i={dataId:e,shape:t,dtype:n=n||"float32"};return this.makeTensorFromTensorInfo(i,r)}makeTensorFromTensorInfo(e,t){let{dataId:n,shape:r,dtype:i}=e,o=new ro(r,i,n,this.nextTensorId());return this.trackTensor(o,t),o}makeVariable(e,t=!0,n,r){n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));let i=new oo(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[i.name])throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,t){this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++;let n=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(n=e.size*xe(e.dtype)),this.state.numBytes+=n,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:n})),e instanceof oo||this.track(e)}incRef(e,t){this.trackTensor(e,t),this.backend.incRef(e.dataId)}removeDataId(e,t){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===t&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;let t=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,"string"===e.dtype&&(this.state.numStringTensors--,this.state.numBytes-=t.bytes),"complex64"!==e.dtype&&"string"!==e.dtype){let t=e.size*xe(e.dtype);this.state.numBytes-=t}t.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,t.backend)}disposeVariables(){for(let e in this.state.registeredVariables){let t=this.state.registeredVariables[e];this.disposeVariable(t)}}disposeVariable(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]}memory(){let e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;let t=this.state.numBytes,n=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(e=>e.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n;for(let e of this.state.activeProfile.kernels)e.kernelTimeMs=await e.kernelTimeMs,e.extraInfo=await e.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&0===this.state.kernelDepth}addTapeNode(e,t,n,r,i,o){let a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:i},s=gi(e);null!=s&&(r=s.gradFunc),null!=r&&(a.gradient=e=>(e=e.map((e,t)=>{if(null==e){let e=n[t],r=Re(e.size,e.dtype);return this.makeTensor(r,e.shape,e.dtype)}return e}),r(e.length>1?e:e[0],i,o))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){let t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t}endScope(e){let t=_o(e),n=new Set(t.map(e=>e.id));for(let e=0;e<this.state.activeScope.track.length;e++){let t=this.state.activeScope.track[e];!t.kept&&!n.has(t.id)&&t.dispose()}let r=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],t.forEach(e=>{!e.kept&&e.scopeId===r.id&&this.track(e)})}gradients(e,t,n,r=!1){if(Z(t.length>0,()=>"gradients() received an empty list of xs."),null!=n&&"float32"!==n.dtype)throw new Error(`dy must have 'float32' dtype, but has '${n.dtype}'`);let i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));Z(i instanceof ro,()=>"The result y returned by f() must be a tensor.");let o=function(e,t,n){let r={},i={};for(let e=0;e<t.length;e++)r[t[e].id]=!0;for(let n=0;n<e.length;n++){let o=e[n],a=o.inputs;for(let e in a){let n=a[e],s=!1;for(let e=0;e<t.length;e++)if(r[n.id]){o.outputs.forEach(e=>r[e.id]=!0),s=!0,i[o.id]=!0;break}if(s)break}}let o={};o[n.id]=!0;let a={};for(let t=e.length-1;t>=0;t--){let n=e[t],r=n.inputs;for(let e=0;e<n.outputs.length;e++)if(o[n.outputs[e].id]){for(let e in r)o[r[e].id]=!0,a[n.id]=!0;break}}let s=[];for(let t=0;t<e.length;t++){let n=e[t];if(i[n.id]&&a[n.id]){let e={};for(let t in n.inputs){let i=n.inputs[t];r[i.id]&&(e[t]=i)}let t=Object.assign({},n);t.inputs=e,t.outputs=n.outputs,s.push(t)}}return s}(this.state.activeTape,t,i);if(!r&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let e={};e[i.id]=null==n?function(e){let t=Ne(ne(e),"float32");return To.makeTensor(t,e,"float32")}(i.shape):n,function(e,t,n,r){for(let i=t.length-1;i>=0;i--){let o=t[i],a=[];if(o.outputs.forEach(t=>{let n=e[t.id];null!=n?a.push(n):a.push(null)}),null==o.gradient)throw new Error(`Cannot compute gradient: gradient function not found for ${o.kernelName}.`);let s=o.gradient(a);for(let t in o.inputs){if(!(t in s))throw new Error(`Cannot backprop through input ${t}. Available gradients found: ${Object.keys(s)}.`);let i=n(()=>s[t]());if("float32"!==i.dtype)throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input ${t} must have 'float32' dtype, but has '${i.dtype}'`);let a=o.inputs[t];if(!oe(i.shape,a.shape))throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input '${t}' has shape '${i.shape}', which does not match the shape of the input '${a.shape}'`);if(null==e[a.id])e[a.id]=i;else{let t=e[a.id];e[a.id]=r(t,i),t.dispose()}}}}(e,o,e=>this.tidy(e),Io);let r=t.map(t=>e[t.id]);return 0===this.state.gradientDepth&&(this.state.activeTape.forEach(e=>{for(let t of e.saved)t.dispose()}),this.state.activeTape=null),{value:i,grads:r}})}customGrad(e){return Z(Ee(e),()=>"The f passed in customGrad(f) must be a function."),(...t)=>{Z(t.every(e=>e instanceof ro),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let n,r={};t.forEach((e,t)=>{r[t]=e});return this.runKernelFunc({forwardFunc:(r,i)=>(n=e(...t,i),Z(n.value instanceof ro,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),Z(Ee(n.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),n.value),backwardsFunc:(e,r)=>{let i=n.gradFunc(e,r),o=Array.isArray(i)?i:[i];Z(o.length===t.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),Z(o.every(e=>e instanceof ro),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let a={};return o.forEach((e,t)=>{a[t]=()=>e}),a},inputs:r})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,t){return this.state.tensorInfo.get(e).backend.readToGPU(e,t)}async time(e){let t=$i(),n=await this.backend.time(e);return n.wallMs=$i()-t,n}track(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new So;for(let e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}};function Eo(){let e=Ue();if(null==e._tfengine){let t=new ze(e);e._tfengine=new ko(t)}return function(e){Be=e}(e._tfengine.ENV),function(e){to=e}(()=>e._tfengine),e._tfengine}ko.nextTensorId=0,ko.nextVariableId=0;var To=Eo();function Io(e,t){let n={a:e,b:t};return To.runKernel(Ke,n)}var Po,Oo={};function No(e){Po=e}function Ro(e){if(void 0!==Po)return Po;if(e||"undefined"!=typeof navigator&&null!=navigator){if(e||(e=navigator),"ReactNative"===e.product)return!0;let t=e.userAgent||e.vendor||("undefined"!=typeof window?window.opera:"");if(!t){let t=e;return t.userAgentData&&t.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function Ao(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}b(Oo,{isBrowser:()=>Ao,isMobile:()=>Ro,mockIsMobile:()=>No});var Do=qe();function Vo(e,t){let n=e;if(Hi(e))return"string"===t?[]:[e.length];if(yo(e)){let t=e.channels||"RGBA";return[e.height,e.width*t.length]}if(vo(e))return[e.buffer.size/(null==t?4:xe(t))];if(!Array.isArray(e))return[];let r=[];for(;Array.isArray(n)||Hi(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&qe().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function e(t,n,r){if(r=r||[],!Array.isArray(t)&&!Hi(t))return void Z(0===n.length,()=>`Element arr[${r.join("][")}] is a primitive, but should be an array/TypedArray of ${n[0]} elements`);Z(n.length>0,()=>`Element arr[${r.join("][")}] should be a primitive, but is an array of ${t.length} elements`),Z(t.length===n[0],()=>`Element arr[${r.join("][")}] should have ${n[0]} elements, but has ${t.length} elements`);let i=n.slice(1);for(let n=0;n<t.length;++n)e(t[n],i,r.concat(n))}(e,r,[]),r}function Mo(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error(`Argument '${n}' passed to '${r}' must be ${e} tensor, but got ${t} tensor`)}}function Fo(e,t,n,r="numeric"){if(e instanceof ro)return Mo(r,e.dtype,t,n),e;let i=ke(e);if("string"!==i&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),Mo(r,i,t,n),null==e||!Hi(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){let r=null==e?"null":e.constructor.name;throw new Error(`Argument '${t}' passed to '${n}' must be a Tensor or TensorLike, but got '${r}'`)}let o=Vo(e,i);!Hi(e)&&!Array.isArray(e)&&(e=[e]);let a="string"!==i?qi(e,i):Qi(e,[],!0);return To.makeTensor(a,o,i)}function Lo(e,t,n,r="numeric"){if(!Array.isArray(e))throw new Error(`Argument ${t} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return e.map((e,i)=>Fo(e,`${t}[${i}]`,n,r))}Do.registerFlag("DEBUG",()=>!1,e=>{e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Do.registerFlag("IS_BROWSER",()=>Ao()),Do.registerFlag("IS_NODE",()=>void 0!==r&&void 0!==r.versions&&void 0!==r.versions.node),Do.registerFlag("IS_CHROME",()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)),Do.registerFlag("IS_SAFARI",()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor)),Do.registerFlag("PROD",()=>!1),Do.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Do.getBool("DEBUG")),Do.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0),Do.registerFlag("IS_TEST",()=>!1),Do.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Do.getBool("DEBUG")),Do.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1),Do.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1),Do.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);var zo="__op";function jo(e){let t=Object.keys(e);if(1!==t.length)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=zo;let i=(...e)=>{To.startScope(n);try{let t=r(...e);return Fe(t)&&console.error("Cannot return a Promise inside of tidy."),To.endScope(t),t}catch(e){throw To.endScope(null),e}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}var qo=jo({complex_:function(e,t){let n=Fo(e,"real","complex"),r=Fo(t,"imag","complex");ee(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);let i={real:n,imag:r};return To.runKernel(bt,i)}});function $o(e,t,n,r){if(null==r)r=ke(e);else if("complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(vo(e)||yo(e)){if("float32"!==r&&"int32"!==r)throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return To.backend.createTensorFromGPUData(e,t||n,r)}if(!Hi(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){De(t);let e=ne(t),r=ne(n);Z(e===r,()=>`Based on the provided shape, [${t}], the tensor should have ${e} values but has ${r}`);for(let e=0;e<n.length;++e){let r=n[e],i=e!==n.length-1||r!==ne(t.slice(e));Z(n[e]===t[e]||!i,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${t}). `)}}return!Hi(e)&&!Array.isArray(e)&&(e=[e]),t=t||n,e="string"!==r?qi(e,r):Qi(e,[],!0),To.makeTensor(e,t,r)}function Bo(e,t,n){return $o(e,t,Vo(e,n),n)}var Uo={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8},Wo=class{static join(e){return new Wo(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,null==e||(e instanceof Array||(e=[e]),0===(e=e.map(e=>Hi(e)?e.buffer:e)).length))return;this.bufferUniformSize=e[0].byteLength;let t=0;for(let n=0;n<e.length;n++){let r=e[n];n!==e.length-1&&r.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);let i=t+r.byteLength;this.shards.push({buffer:r,start:t,end:i}),t=i}0===this.shards.length&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,t=this.byteLength){if(0===this.shards.length)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,t=isNaN(Number(t))?0:t,e=Math.max(0,e),(t=Math.min(this.byteLength,t))<=e)return new ArrayBuffer(0);let n=this.findShardForByte(e);if(-1===n)throw new Error("Could not find start shard for byte "+e);let r=new ArrayBuffer(t-e),i=new Uint8Array(r),o=0;for(let r=n;r<this.shards.length;r++){let n=this.shards[r],a=e+o-n.start,s=o,l=Math.min(t,n.end)-n.start,u=new Uint8Array(n.buffer,a,l-a);if(i.set(u,s),o+=u.length,t<n.end)break}return r}findShardForByte(e){if(0===this.shards.length||e<0||e>=this.byteLength)return-1;if(null!=this.bufferUniformSize)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function t(t){return e<t.start?-1:e>=t.end?1:0}if(0===t(this.shards[this.previousShardIndex]))return this.previousShardIndex;let n=function(e,t){let n=0,r=e.length;for(;n<=r;){let i=Math.floor((r-n)/2)+n,o=t(e[i]);if(0===o)return i;o<0?r=i:n=i+1}return-1}(this.shards,t);return-1===n?-1:(this.previousShardIndex=n,this.previousShardIndex)}};async function Ho(e,t){let n=[],r=[],i=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);for(let o=0;o<i.length;++o){let a=i[o],s=Array.isArray(e)?e[o].tensor:e[a];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error(`Unsupported dtype in weight '${a}': ${s.dtype}`);let l={name:a,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){let e=new Promise(async e=>{let t=await s.bytes(),n=t.reduce((e,t)=>e+t.length,0)+4*t.length,r=new Uint8Array(n),i=0;for(let e=0;e<t.length;e++){let n=t[e],o=new Uint8Array(new Uint32Array([n.length]).buffer);r.set(o,i),i+=4,r.set(n,i),i+=n.length}e(r)});r.push(e)}else r.push(s.data());null!=t&&(l.group=t),n.push(l)}return{data:Go(await Promise.all(r)),specs:n}}function Qo(e,t){let n,r=new Wo(e),i={},o=0;for(let e of t){let t,a=e.name,s=e.dtype,l=e.shape,u=ne(l);if("quantization"in e){let i=e.quantization;if("uint8"===i.dtype||"uint16"===i.dtype){if(!("min"in i)||!("scale"in i))throw new Error(`Weight ${e.name} with quantization ${i.dtype} doesn't have corresponding metadata min and scale.`)}else{if("float16"!==i.dtype)throw new Error(`Weight ${e.name} has unknown quantization dtype ${i.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if("float32"!==s)throw new Error(`Weight ${e.name} is quantized with ${i.dtype} which only supports weights of type float32 not ${s}.`)}let l=Uo[i.dtype],c=r.slice(o,o+u*l),p="uint8"===i.dtype?new Uint8Array(c):new Uint16Array(c);if("float32"===s)if("uint8"===i.dtype||"uint16"===i.dtype){t=new Float32Array(p.length);for(let e=0;e<p.length;e++){let n=p[e];t[e]=n*i.scale+i.min}}else{if("float16"!==i.dtype)throw new Error(`Unsupported quantization type ${i.dtype} for weight type float32.`);void 0===n&&(n=ia()),t=n(p)}else{if("int32"!==s)throw new Error(`Unsupported dtype in weight '${a}': ${s}`);if("uint8"!==i.dtype&&"uint16"!==i.dtype)throw new Error(`Unsupported quantization type ${i.dtype} for weight type int32.`);t=new Int32Array(p.length);for(let e=0;e<p.length;e++){let n=p[e];t[e]=Math.round(n*i.scale+i.min)}}o+=u*l}else if("string"===s){let n=ne(e.shape);t=[];for(let e=0;e<n;e++){let e=new Uint32Array(r.slice(o,o+4))[0];o+=4;let n=new Uint8Array(r.slice(o,o+e));t.push(n),o+=e}}else{let e=Uo[s],n=r.slice(o,o+u*e);if("float32"===s)t=new Float32Array(n);else if("int32"===s)t=new Int32Array(n);else if("bool"===s)t=new Uint8Array(n);else{if("complex64"!==s)throw new Error(`Unsupported dtype in weight '${a}': ${s}`);{t=new Float32Array(n);let e=new Float32Array(t.length/2),r=new Float32Array(t.length/2);for(let n=0;n<e.length;n++)e[n]=t[2*n],r[n]=t[2*n+1];let o=Bo(e,l,"float32"),s=Bo(r,l,"float32");i[a]=qo(o,s),o.dispose(),s.dispose()}}o+=u*e}"complex64"!==s&&(i[a]=Bo(t,l,s))}return i}function Go(e){if(null===e)throw new Error("Invalid input value: "+JSON.stringify(e));let t=0,n=[];e.forEach(e=>{if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+e.constructor.name)});let r=new Uint8Array(t),i=0;return n.forEach(e=>{r.set(new Uint8Array(e.buffer),i),i+=e.byteLength}),r.buffer}var Ko=void 0!==a&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function Jo(e){return Ko?a.byteLength(e,"utf8"):new Blob([e]).size}function Xo(e){return Wo.join(e)}function Yo(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);let t=e.split("/");return t[t.length-1]}function Zo(e,t){let n={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:t};return null!=e.signature&&(n.signature=e.signature),null!=e.userDefinedMetadata&&(n.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(n.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(n.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(n.trainingConfig=e.trainingConfig),n}function ea(e,t,n){let r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy};if(null!=e.trainingConfig&&(r.trainingConfig=e.trainingConfig),null!=e.weightsManifest){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=t,r.weightData=n}return null!=e.signature&&(r.signature=e.signature),null!=e.userDefinedMetadata&&(r.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(r.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(r.initializerSignature=e.initializerSignature),r}async function ta(e,t){let n,r;return null!=e.weightsManifest&&([n,r]=await t(e.weightsManifest)),ea(e,n,r)}function na(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:Jo(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:Jo(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:new Wo(e.weightData).byteLength}}function ra(e){let t=[];for(let n of e)t.push(...n.weights);return t}function ia(){let e=function(){let e=e=>{let t=e<<13,n=0;for(;!(8388608&t);)n-=8388608,t<<=1;return t&=-8388609,n+=947912704,t|n},t=new Uint32Array(2048);t[0]=0;for(let n=1;n<1024;n++)t[n]=e(n);for(let e=1024;e<2048;e++)t[e]=939524096+(e-1024<<13);return t}(),t=function(){let e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(let t=1;t<31;t++)e[t]=t<<23;for(let t=33;t<63;t++)e[t]=2147483648+(t-32<<23);return e}(),n=function(){let e=new Uint32Array(64);for(let t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return r=>{let i=new ArrayBuffer(4*r.length),o=new Uint32Array(i);for(let i=0;i<r.length;i++){let a=r[i],s=e[n[a>>10]+(1023&a)]+t[a>>10];o[i]=s}return new Float32Array(i)}}var oa=class{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==oa.instance&&(oa.instance=new oa),oa.instance}static registerSaveRouter(e){oa.getInstance().saveRouters.push(e)}static registerLoadRouter(e){oa.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return oa.getHandlers(e,"save")}static getLoadHandlers(e,t){return oa.getHandlers(e,"load",t)}static getHandlers(e,t,n){let r=[];return("load"===t?oa.getInstance().loadRouters:oa.getInstance().saveRouters).forEach(t=>{let i=t(e,n);null!==i&&r.push(i)}),r}},aa=e=>oa.registerSaveRouter(e),sa=e=>oa.registerLoadRouter(e),la=e=>oa.getSaveHandlers(e),ua=(e,t)=>oa.getLoadHandlers(e,t),ca="tensorflowjs",pa="models_store",da="model_info_store";function ha(){if(!qe().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let e="undefined"==typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function fa(e){let t=e.result;t.createObjectStore(pa,{keyPath:"modelPath"}),t.createObjectStore(da,{keyPath:"modelPath"})}var ma=class{constructor(e){if(this.indexedDB=ha(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,t){return new Promise((e,n)=>{let r=this.indexedDB.open(ca,1);r.onupgradeneeded=()=>fa(r),r.onsuccess=()=>{let i=r.result;if(null==t){let t=i.transaction(pa,"readonly"),r=t.objectStore(pa).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return i.close(),n(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));e(r.result.modelArtifacts)},r.onerror=e=>(i.close(),n(r.error)),t.oncomplete=()=>i.close()}else{t.weightData=Wo.join(t.weightData);let r,o,a=na(t),s=i.transaction(da,"readwrite"),l=s.objectStore(da);try{r=l.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(e){return n(e)}r.onsuccess=()=>{o=i.transaction(pa,"readwrite");let r,u=o.objectStore(pa);try{r=u.put({modelPath:this.modelPath,modelArtifacts:t,modelArtifactsInfo:a})}catch(e){return n(e)}r.onsuccess=()=>e({modelArtifactsInfo:a}),r.onerror=e=>{l=s.objectStore(da);let t=l.delete(this.modelPath);t.onsuccess=()=>(i.close(),n(r.error)),t.onerror=e=>(i.close(),n(r.error))}},r.onerror=e=>(i.close(),n(r.error)),s.oncomplete=()=>{null==o?i.close():o.oncomplete=()=>i.close()}}},r.onerror=e=>n(r.error)})}};ma.URL_SCHEME="indexeddb://";var ga=e=>qe().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(ma.URL_SCHEME)?function(e){return new ma(e)}(e.slice(ma.URL_SCHEME.length)):null;oa.registerSaveRouter(ga),oa.registerLoadRouter(ga);var ya="/",va="tensorflowjs_models",ba="info",xa="model_topology",wa="weight_specs",_a="weight_data",Ca="model_metadata";function Sa(e){return{info:[va,e,ba].join(ya),topology:[va,e,xa].join(ya),weightSpecs:[va,e,wa].join(ya),weightData:[va,e,_a].join(ya),modelMetadata:[va,e,Ca].join(ya)}}function ka(e){for(let t of Object.values(e))window.localStorage.removeItem(t)}function Ea(e){let t=e.split(ya);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(ya)}var Ta=class{constructor(e){if(!qe().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=Sa(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=na(e),i=Wo.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(e){if(Ko)return a.from(e).toString("base64");let t=new Uint8Array(e),n="";for(let e=0,r=t.length;e<r;e++)n+=String.fromCharCode(t[e]);return btoa(n)}(i));let o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:null!=e.signature?e.signature:void 0,userDefinedMetadata:null!=e.userDefinedMetadata?e.userDefinedMetadata:void 0,modelInitializer:null!=e.modelInitializer?e.modelInitializer:void 0,initializerSignature:null!=e.initializerSignature?e.initializerSignature:void 0,trainingConfig:null!=e.trainingConfig?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:r}}catch(e){throw ka(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${r.modelTopologyBytes}, weightSpecsBytes=${r.weightSpecsBytes}, weightDataBytes=${r.weightDataBytes}.`)}}}async load(){let e=JSON.parse(this.LS.getItem(this.keys.info));if(null==e)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let t={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);t.modelTopology=n;let r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);t.weightSpecs=r;let i=this.LS.getItem(this.keys.modelMetadata);if(null!=i){let e=JSON.parse(i);t.format=e.format,t.generatedBy=e.generatedBy,t.convertedBy=e.convertedBy,null!=e.signature&&(t.signature=e.signature),null!=e.userDefinedMetadata&&(t.userDefinedMetadata=e.userDefinedMetadata),null!=e.modelInitializer&&(t.modelInitializer=e.modelInitializer),null!=e.initializerSignature&&(t.initializerSignature=e.initializerSignature),null!=e.trainingConfig&&(t.trainingConfig=e.trainingConfig)}let o=this.LS.getItem(this.keys.weightData);if(null==o)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return t.weightData=function(e){if(Ko){let t=a.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}let t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n.set([t.charCodeAt(e)],e);return n.buffer}(o),t}};Ta.URL_SCHEME="localstorage://";var Ia=e=>qe().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Ta.URL_SCHEME)?function(e){return new Ta(e)}(e.slice(Ta.URL_SCHEME.length)):null;oa.registerSaveRouter(Ia),oa.registerLoadRouter(Ia);var Pa="://",Oa=class{constructor(){this.managers={}}static getInstance(){return null==Oa.instance&&(Oa.instance=new Oa),Oa.instance}static registerManager(e,t){Z(null!=e,()=>"scheme must not be undefined or null."),e.endsWith(Pa)&&(e=e.slice(0,e.indexOf(Pa))),Z(e.length>0,()=>"scheme must not be an empty string.");let n=Oa.getInstance();Z(null==n.managers[e],()=>`A model store manager is already registered for scheme '${e}'.`),n.managers[e]=t}static getManager(e){let t=Oa.getInstance().managers[e];if(null==t)throw new Error(`Cannot find model manager for scheme '${e}'`);return t}static getSchemes(){return Object.keys(Oa.getInstance().managers)}};function Na(e){if(-1===e.indexOf(Pa))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Oa.getSchemes().join(","));return{scheme:e.split(Pa)[0],path:e.split(Pa)[1]}}async function Ra(e,t,n=!1){Z(e!==t,()=>`Old path and new path are the same: '${e}'`);let r=oa.getLoadHandlers(e);Z(r.length>0,()=>`Copying failed because no load handler is found for source URL ${e}.`),Z(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${e}.`);let i=r[0],o=oa.getSaveHandlers(t);Z(o.length>0,()=>`Copying failed because no save handler is found for destination URL ${t}.`),Z(o.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${t}.`);let a=o[0],s=Na(e).scheme,l=Na(e).path,u=s===Na(e).scheme,c=await i.load();n&&u&&await Oa.getManager(s).removeModel(l);let p=await a.save(c);return n&&!u&&await Oa.getManager(s).removeModel(l),p.modelArtifactsInfo}async function Aa(){let e=Oa.getSchemes(),t={};for(let n of e){let e=await Oa.getManager(n).listModels();for(let r in e){t[n+Pa+r]=e[r]}}return t}async function Da(e){let t=Na(e);return Oa.getManager(t.scheme).removeModel(t.path)}async function Va(e,t){return Ra(e,t,!1)}async function Ma(e,t){return Ra(e,t,!0)}if(qe().get("IS_BROWSER")){qe().setPlatform("browser",new class{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,t){return fetch(e,t)}now(){return performance.now()}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got "+t);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,t){return new TextDecoder(t).decode(e)}setTimeoutCustom(e,t){"undefined"!=typeof window&&qe().getBool("USE_SETTIMEOUTCUSTOM")?(this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},t),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",e=>{if(e.source===window&&e.data.name===this.messageName){e.stopPropagation(),(0,this.functionRefs[e.data.index])(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))):setTimeout(e,t)}isTypedArray(e){return ki(e)}});try{Oa.registerManager(Ta.URL_SCHEME,new class{constructor(){Z(qe().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),Z("undefined"==typeof window||void 0!==window.localStorage,()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){let e={},t=va+ya,n=ya+ba;for(let r=0;r<this.LS.length;++r){let i=this.LS.key(r);if(i.startsWith(t)&&i.endsWith(n)){e[Ea(i)]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){let t=Sa(e=function(e){return e.startsWith(Ta.URL_SCHEME)?e.slice(Ta.URL_SCHEME.length):e}(e));if(null==this.LS.getItem(t.info))throw new Error(`Cannot find model at path '${e}'`);let n=JSON.parse(this.LS.getItem(t.info));return ka(t),n}})}catch(so){}try{Oa.registerManager(ma.URL_SCHEME,new class{constructor(){this.indexedDB=ha()}async listModels(){return new Promise((e,t)=>{let n=this.indexedDB.open(ca,1);n.onupgradeneeded=()=>fa(n),n.onsuccess=()=>{let r=n.result,i=r.transaction(da,"readonly"),o=i.objectStore(da).getAll();o.onsuccess=()=>{let t={};for(let e of o.result)t[e.modelPath]=e.modelArtifactsInfo;e(t)},o.onerror=e=>(r.close(),t(o.error)),i.oncomplete=()=>r.close()},n.onerror=e=>t(n.error)})}async removeModel(e){return e=function(e){return e.startsWith(ma.URL_SCHEME)?e.slice(ma.URL_SCHEME.length):e}(e),new Promise((t,n)=>{let r=this.indexedDB.open(ca,1);r.onupgradeneeded=()=>fa(r),r.onsuccess=()=>{let i,o=r.result,a=o.transaction(da,"readwrite"),s=a.objectStore(da),l=s.get(e);l.onsuccess=()=>{if(null==l.result)return o.close(),n(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{let r=s.delete(e),a=()=>{i=o.transaction(pa,"readwrite");let r=i.objectStore(pa).delete(e);r.onsuccess=()=>t(l.result.modelArtifactsInfo),r.onerror=e=>n(l.error)};r.onsuccess=a,r.onerror=e=>(a(),o.close(),n(l.error))}},l.onerror=e=>(o.close(),n(l.error)),a.oncomplete=()=>{null==i?o.close():i.oncomplete=()=>o.close()}},r.onerror=e=>n(r.error)})}})}catch(so){}}var Fa,La=()=>_();function za(e,t="float32",n){return t=t||"float32",De(e),new eo(e,t,n)}qe().get("IS_NODE")&&!qe().get("IS_BROWSER")&&qe().setPlatform("node",new class{constructor(){this.util=C(),this.textEncoder=new this.util.TextEncoder}fetch(e,t){return null!=qe().global.fetch?qe().global.fetch(e,t):(null==Fa&&(Fa=La()),Fa(e,t))}now(){let e=r.hrtime();return 1e3*e[0]+e[1]/1e6}encode(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)}decode(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}});var ja=jo({cast_:function(e,t){let n=Fo(e,"x","cast");if(!ve(t))throw new Error("Failed to cast to unknown dtype "+t);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");let r={x:n},i={dtype:t};return To.runKernel(gt,r,i)}});var qa=jo({clone_:function(e){let t={x:Fo(e,"x","clone","string_or_numeric")};return To.runKernel(un,t)}});function $a(e,t=!1){console.log(e.toString(t))}function Ba(){qe().set("PROD",!0)}function Ua(){qe().set("DEBUG",!0)}function Wa(){qe().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function Ha(e){qe().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Qa(){To.disposeVariables()}function Ga(){return To}function Ka(){return To.memory()}function Ja(e){return To.profile(e)}function Xa(e,t){return To.tidy(e,t)}function Ya(e){_o(e).forEach(e=>e.dispose())}function Za(e){return To.keep(e)}function es(e){return To.time(e)}function ts(e){return To.setBackend(e)}function ns(){return To.ready()}function rs(){return To.backendName}function is(e){To.removeBackend(e)}function os(e){return To.findBackend(e)}function as(e){return To.findBackendFactory(e)}function ss(e,t,n=1){return To.registerBackend(e,t,n)}function ls(){return To.backend}function us(e,t){qe().setPlatform(e,t)}Eo(),function(e){no=e}({buffer:za,cast:ja,clone:qa,print:$a}),function(e){e}(Ha);var cs=jo({add_:function(e,t){let n=Fo(e,"a","add"),r=Fo(t,"b","add");[n,r]=bo(n,r);let i={a:n,b:r};return To.runKernel(Ke,i)}});var ps=jo({floorDiv_:function(e,t){let n=Fo(e,"a","floorDiv"),r=Fo(t,"b","floorDiv");[n,r]=bo(n,r);let i={a:n,b:r};return To.runKernel(nn,i)}});var ds=jo({div_:function(e,t){let n=Fo(e,"a","div"),r=Fo(t,"b","div");if([n,r]=bo(n,r),"int32"===n.dtype&&"int32"===r.dtype)return ps(n,r);let i={a:n,b:r};return To.runKernel(Bt,i,{})}});var hs=jo({mul_:function(e,t){let n=Fo(e,"a","mul"),r=Fo(t,"b","mul");[n,r]=bo(n,r);let i={a:n,b:r};return To.runKernel(Bn,i)}});var fs=jo({abs_:function(e){let t=Fo(e,"x","abs");if("complex64"===t.dtype){let e={x:t};return To.runKernel(xt,e)}{let e={x:t};return To.runKernel(He,e)}}});var ms=jo({acos_:function(e){let t={x:Fo(e,"x","acos")};return To.runKernel(Qe,t)}});var gs=jo({acosh_:function(e){let t={x:Fo(e,"x","acosh")};return To.runKernel(Ge,t)}});var ys=jo({addN_:function(e){Z(Array.isArray(e),()=>"The argument passed to tf.addN() must be a list of tensors"),Z(e.length>=1,()=>"Must pass at least one tensor to tf.addN(), but got "+e.length);let t=e.map((e,t)=>Fo(e,"tensors"+t,"addN")),n=t[0];t.forEach(e=>{if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(e=>{if(!oe(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});let r=t;return To.runKernel(Je,r)}});var vs=jo({all_:function(e,t=null,n=!1){let r={x:Fo(e,"x","all","bool")},i={axis:t,keepDims:n};return To.runKernel(Xe,r,i)}});var bs=jo({any_:function(e,t=null,n=!1){let r={x:Fo(e,"x","any","bool")},i={axis:t,keepDims:n};return To.runKernel(Ye,r,i)}});var xs=jo({argMax_:function(e,t=0){let n={x:Fo(e,"x","argMax")},r={axis:t};return To.runKernel(Ze,n,r)}});var ws=jo({argMin_:function(e,t=0){let n={x:Fo(e,"x","argMin")},r={axis:t};return To.runKernel(et,n,r)}});var _s=jo({asin_:function(e){let t={x:Fo(e,"x","asin")};return To.runKernel(tt,t)}});var Cs=jo({asinh_:function(e){let t={x:Fo(e,"x","asinh")};return To.runKernel(nt,t)}});var Ss=jo({atan_:function(e){let t={x:Fo(e,"x","atan")};return To.runKernel(rt,t)}});var ks=jo({atan2_:function(e,t){let n=Fo(e,"a","atan2"),r=Fo(t,"b","atan2");[n,r]=bo(n,r);let i={a:n,b:r};return To.runKernel(ot,i)}});var Es=jo({atanh_:function(e){let t={x:Fo(e,"x","atanh")};return To.runKernel(it,t)}});function Ts(e,t,n,r,i="NHWC",o){return Os(e,[...t,e[3]],n,o,r,null,null,js(i))}function Is(e,t,n,r,i,o,a="channelsLast"){let s,[l,u]=As(t);if("channelsLast"===a)s=[l,u,e[3],e[3]];else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat "+a);s=[l,u,e[1],e[1]]}return Os(e,s,n,r,i,o,!1,a)}function Ps(e,t,n,r,i,o,a="NDHWC"){let s,l,[u,c,p]=Ds(t);if("NDHWC"===a)l="channelsLast",s=[u,c,p,e[4],e[4]];else{if("NCDHW"!==a)throw new Error("Unknown dataFormat "+a);l="channelsFirst",s=[u,c,p,e[1],e[1]]}return Ns(e,s,n,r,i,!1,l,o)}function Os(e,t,n,r,i,o,a=!1,s="channelsLast"){let[l,u,c,p]=[-1,-1,-1,-1];if("channelsLast"===s)[l,u,c,p]=e;else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);[l,p,u,c]=e}let d,[h,f,,m]=t,[g,y]=As(n),[v,b]=As(r),x=Vs(h,v),w=Vs(f,b),{padInfo:_,outHeight:C,outWidth:S}=function(e,t,n,r,i,o,a,s,l){let u,c,p;if("number"==typeof e){u={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};let i=function(e,t,n,r,i){null==r&&(r=Rs(e,t,n));let o=e[0],a=e[1],s=Ms((o-t+2*r)/n+1,i),l=Ms((a-t+2*r)/n+1,i);return[s,l]}([t,n],o,r,e,s);c=i[0],p=i[1]}else if("same"===e){c=Math.ceil(t/r),p=Math.ceil(n/i);let e=Math.max(0,(c-1)*r+o-t),s=Math.max(0,(p-1)*i+a-n),l=Math.floor(e/2),d=e-l,h=Math.floor(s/2);u={top:l,bottom:d,left:h,right:s-h,type:"SAME"}}else if("valid"===e)u={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-o+1)/r),p=Math.ceil((n-a+1)/i);else{if("object"!=typeof e)throw Error("Unknown padding parameter: "+e);{let d="channelsLast"===l?e[1][0]:e[2][0],h="channelsLast"===l?e[1][1]:e[2][1],f="channelsLast"===l?e[2][0]:e[3][0],m="channelsLast"===l?e[2][1]:e[3][1];u={top:d,bottom:h,left:f,right:m,type:0===d&&0===h&&0===f&&0===m?"VALID":"EXPLICIT"},c=Ms((t-o+d+h)/r+1,s),p=Ms((n-a+f+m)/i+1,s)}}return{padInfo:u,outHeight:c,outWidth:p}}(i,u,c,g,y,x,w,o,s),k=a?m*p:m;return"channelsFirst"===s?d=[l,k,C,S]:"channelsLast"===s&&(d=[l,C,S,k]),{batchSize:l,dataFormat:s,inHeight:u,inWidth:c,inChannels:p,outHeight:C,outWidth:S,outChannels:k,padInfo:_,strideHeight:g,strideWidth:y,filterHeight:h,filterWidth:f,effectiveFilterHeight:x,effectiveFilterWidth:w,dilationHeight:v,dilationWidth:b,inShape:e,outShape:d,filterShape:t}}function Ns(e,t,n,r,i,o=!1,a="channelsLast",s){let[l,u,c,p,d]=[-1,-1,-1,-1,-1];if("channelsLast"===a)[l,u,c,p,d]=e;else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat "+a);[l,d,u,c,p]=e}let h,[f,m,g,,y]=t,[v,b,x]=Ds(n),[w,_,C]=Ds(r),S=Vs(f,w),k=Vs(m,_),E=Vs(g,C),{padInfo:T,outDepth:I,outHeight:P,outWidth:O}=function(e,t,n,r,i,o,a,s,l,u,c){let p,d,h,f;if("valid"===e&&(e=0),"number"==typeof e){p={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};let m=function(e,t,n,r,i,o){null==i&&(i=Rs(e,t[0],r[0]));let a=[0,0,0,n];for(let n=0;n<3;n++)e[n]+2*i>=t[n]&&(a[n]=Ms((e[n]-t[n]+2*i)/r[n]+1,o));return a}([t,n,r,1],[s,l,u],1,[i,o,a],e,c);d=m[0],h=m[1],f=m[2]}else{if("same"!==e)throw Error("Unknown padding parameter: "+e);{d=Math.ceil(t/i),h=Math.ceil(n/o),f=Math.ceil(r/a);let e=(d-1)*i+s-t,c=(h-1)*o+l-n,m=(f-1)*a+u-r,g=Math.floor(e/2),y=e-g,v=Math.floor(c/2),b=c-v,x=Math.floor(m/2);p={top:v,bottom:b,left:x,right:m-x,front:g,back:y,type:"SAME"}}}return{padInfo:p,outDepth:d,outHeight:h,outWidth:f}}(i,u,c,p,v,b,x,S,k,E,s),N=o?y*d:y;return"channelsFirst"===a?h=[l,N,I,P,O]:"channelsLast"===a&&(h=[l,I,P,O,N]),{batchSize:l,dataFormat:a,inDepth:u,inHeight:c,inWidth:p,inChannels:d,outDepth:I,outHeight:P,outWidth:O,outChannels:N,padInfo:T,strideDepth:v,strideHeight:b,strideWidth:x,filterDepth:f,filterHeight:m,filterWidth:g,effectiveFilterDepth:S,effectiveFilterHeight:k,effectiveFilterWidth:E,dilationDepth:w,dilationHeight:_,dilationWidth:C,inShape:e,outShape:h,filterShape:t}}function Rs(e,t,n,r=1){let i=Vs(t,r);return Math.floor((e[0]*(n-1)-n+i)/2)}function As(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function Ds(e){return"number"==typeof e?[e,e,e]:e}function Vs(e,t){return t<=1?e:e+(e-1)*(t-1)}function Ms(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function Fs(e){let[t,n,r]=As(e);return 1===t&&1===n&&1===r}function Ls(e,t){return Fs(e)||Fs(t)}function zs(e){return As(e).every(e=>e>0)}function js(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function qs(e,t,n){if(null!=n){if("string"==typeof t)throw Error(`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);if("number"==typeof t)Z(ae(t),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`);else{if("object"!=typeof t)throw Error(`Error in ${e}: Unknown padding parameter: ${t}`);t.forEach(t=>{t.forEach(t=>{Z(ae(t),()=>`Error in ${e}: pad must be an integer when using dimRoundingMode ${n} but got pad ${t}.`)})})}}}var $s=jo({reshape_:function(e,t){let n={x:Fo(e,"x","reshape","string_or_numeric")},r={shape:t};return To.runKernel(cr,n,r)}});var Bs=jo({avgPool_:function(e,t,n,r,i){let o=Fo(e,"x","avgPool","float32");Z(Ls(n,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`);let a=o,s=!1;3===o.rank&&(s=!0,a=$s(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Z(4===a.rank,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),qs("avgPool",r,i);let l={x:a},u={filterSize:t,strides:n,pad:r,dimRoundingMode:i},c=To.runKernel(at,l,u);return c=ja(c,o.dtype),s?$s(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var Us=jo({avgPool3d_:function(e,t,n,r,i,o="NDHWC"){let a=Fo(e,"x","avgPool3d","float32"),s=a,l=!1;4===a.rank&&(l=!0,s=$s(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),Z(5===s.rank,()=>`Error in avgPool3d: x must be rank 5 but got rank ${s.rank}.`),Z("NDHWC"===o,()=>"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+o),Z("number"==typeof n&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),qs("avgPool3d",r,i);let u={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:i,dataFormat:o},p=To.runKernel(lt,u,c);return p=ja(p,s.dtype),l?$s(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}});var Ws=jo({concat_:function(e,t=0){Z(e.length>=1,()=>"Pass at least one tensor to concat");let n=Lo(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach(e=>{if("complex64"!==e.dtype)throw new Error(`Cannot concatenate complex64 tensors with a tensor\n          with dtype ${e.dtype}. `)}),1===n.length)return qa(n[0]);let r=n,i={axis:t};return To.runKernel(wt,r,i)}});var Hs=jo({matMul_:function(e,t,n=!1,r=!1){let i=Fo(e,"a","matMul"),o=Fo(t,"b","matMul");[i,o]=bo(i,o);let a={a:i,b:o},s={transposeA:n,transposeB:r};return To.runKernel(ct,a,s)}});var Qs=jo({sigmoid_:function(e){let t={x:Fo(e,"x","sigmoid","float32")};return To.runKernel(Ir,t)}});var Gs=jo({slice_:function(e,t,n){let r=Fo(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");let i={x:r},o={begin:t,size:n};return To.runKernel(Sr,i,o)}});var Ks=jo({tanh_:function(e){let t={x:Fo(e,"x","tanh","float32")};return To.runKernel(Kr,t)}});var Js=jo({basicLSTMCell_:function(e,t,n,r,i,o){let a=Fo(e,"forgetBias","basicLSTMCell"),s=Fo(t,"lstmKernel","basicLSTMCell"),l=Fo(n,"lstmBias","basicLSTMCell"),u=Fo(r,"data","basicLSTMCell"),c=Fo(i,"c","basicLSTMCell"),p=Fo(o,"h","basicLSTMCell"),d=Ws([u,p],1),h=Hs(d,s),f=cs(h,l),m=f.shape[0],g=f.shape[1]/4,y=[m,g],v=Gs(f,[0,0],y),b=Gs(f,[0,g],y),x=Gs(f,[0,2*g],y),w=Gs(f,[0,3*g],y),_=cs(hs(Qs(v),Ks(b)),hs(c,Qs(cs(a,x))));return[_,hs(Ks(_),Qs(w))]}});var Xs=jo({batchToSpaceND_:function(e,t,n){let r=Fo(e,"x","batchToSpaceND"),i=t.reduce((e,t)=>e*t);Z(r.rank>=1+t.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${t.length}`),Z(n.length===t.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${t.length}`),Z(r.shape[0]%i==0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${i}`);let o={x:r},a={blockShape:t,crops:n};return To.runKernel(pt,o,a)}});function Ys(e){let t;return t=0===e.rank||1===e.rank?$s(e,[1,1,1,e.size]):2===e.rank?$s(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?$s(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e,t}var Zs=jo({batchNorm_:function(e,t,n,r,i,o){null==o&&(o=.001);let a,s,l=Fo(e,"x","batchNorm"),u=Fo(t,"mean","batchNorm"),c=Fo(n,"variance","batchNorm");null!=i&&(a=Fo(i,"scale","batchNorm")),null!=r&&(s=Fo(r,"offset","batchNorm")),Z(u.rank===c.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Z(null==s||u.rank===s.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Z(null==a||u.rank===a.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let p={x:Ys(l),scale:a,offset:s,mean:u,variance:c},d={varianceEpsilon:o},h=To.runKernel(rn,p,d);return $s(h,l.shape)}});var el=jo({batchNorm2d_:function(e,t,n,r,i,o){let a,s,l=Fo(e,"x","batchNorm"),u=Fo(t,"mean","batchNorm"),c=Fo(n,"variance","batchNorm");return null!=i&&(a=Fo(i,"scale","batchNorm")),null!=r&&(s=Fo(r,"offset","batchNorm")),Z(2===l.rank,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${l.rank}.`),Z(2===u.rank||1===u.rank,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${u.rank}.`),Z(2===c.rank||1===c.rank,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${c.rank}.`),null!=a&&Z(2===a.rank||1===a.rank,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${a.rank}.`),null!=s&&Z(2===s.rank||1===s.rank,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${s.rank}.`),Zs(l,u,c,s,a,o)}});var tl=jo({batchNorm3d_:function(e,t,n,r,i,o){let a,s,l=Fo(e,"x","batchNorm"),u=Fo(t,"mean","batchNorm"),c=Fo(n,"variance","batchNorm");return null!=i&&(a=Fo(i,"scale","batchNorm")),null!=r&&(s=Fo(r,"offset","batchNorm")),Z(3===l.rank,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${l.rank}.`),Z(3===u.rank||1===u.rank,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${u.rank}.`),Z(3===c.rank||1===c.rank,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${c.rank}.`),null!=a&&Z(3===a.rank||1===a.rank,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${a.rank}.`),null!=s&&Z(3===s.rank||1===s.rank,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${s.rank}.`),Zs(l,u,c,s,a,o)}});var nl=jo({batchNorm4d_:function(e,t,n,r,i,o){let a,s,l=Fo(e,"x","batchNorm"),u=Fo(t,"mean","batchNorm"),c=Fo(n,"variance","batchNorm");return null!=i&&(a=Fo(i,"scale","batchNorm")),null!=r&&(s=Fo(r,"offset","batchNorm")),Z(4===l.rank,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${l.rank}.`),Z(4===u.rank||1===u.rank,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${u.rank}.`),Z(4===c.rank||1===c.rank,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${c.rank}.`),null!=a&&Z(4===a.rank||1===a.rank,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${a.rank}.`),null!=s&&Z(4===s.rank||1===s.rank,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${s.rank}.`),Zs(l,u,c,s,a,o)}});var rl=jo({bincount_:function(e,t,n){let r=Fo(e,"x","bincount"),i=Fo(t,"weights","bincount");Z("int32"===r.dtype,()=>"Error in bincount: input dtype must be int32, but got "+r.dtype),Z(n>=0,()=>`size must be non-negative, but got ${n}.`),Z(i.size===r.size||0===i.size,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${i.shape}.`);let o={x:r,weights:i},a={size:n};return To.runKernel(dt,o,a)}});var il=jo({bitwiseAnd_:function(e,t){let n=Fo(e,"x","bitwiseAnd"),r=Fo(t,"y","bitwiseAnd");if(!oe(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if("int32"!==n.dtype||"int32"!==r.dtype)throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);let i={a:n,b:r};return To.runKernel(ht,i)}});var ol=jo({broadcastArgs_:function(e,t){let n=Fo(e,"s0","broadcastArgs","int32"),r=Fo(t,"s1","broadcastArgs","int32");if(1!==n.rank)throw new Error("broadcastArgs(): first input must be a vector (rank=1). Has rank "+n.rank);if(1!==r.rank)throw new Error("broadcastArgs(): second input must be a vector (rank=1). Has rank "+r.rank);let i={s0:n,s1:r};return To.runKernel(mt,i)}});var al=jo({broadcastTo_:function(e,t){let n=Fo(e,"broadcastTo","x"),r=n.shape;if(De(t),t.length<n.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${n.rank}.`);if(t.length>n.rank){let e=n.shape.slice();for(;e.length<t.length;)e.unshift(1);n=$s(n,e)}let i=n.shape,o=Array.from(t);for(let e=t.length-1;e>=0;e--)if(i[e]===t[e])o[e]=1;else if(1!==n.shape[e])throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${t}].`);if(0===o.map((e,t)=>e>1?t:-1).filter(e=>e>=0).length)return qa(n);let a={x:n},s={reps:o};return To.runKernel(Jr,a,s)}});var sl=jo({ceil_:function(e){let t={x:Fo(e,"x","ceil","float32")};return To.runKernel(yt,t)}});function ll(e,t,n){De(e);let r={shape:e,value:t,dtype:n=n||ke(t)};return To.runKernel(Zt,{},r)}var ul=jo({clipByValue_:function(e,t,n){let r=Fo(e,"x","clipByValue");if(Z(t<=n,()=>`Error in clip: min (${t}) must be less than or equal to max (${n}).`),t===n)return ll(r.shape,t,r.dtype);let i={x:r},o={clipValueMin:t,clipValueMax:n};return To.runKernel(vt,i,o)}});var cl=jo({concat1d_:function(e){return Ws(e,0)}});var pl=jo({concat2d_:function(e,t){return Ws(e,t)}});var dl=jo({concat3d_:function(e,t){return Ws(e,t)}});var hl=jo({concat4d_:function(e,t){return Ws(e,t)}});var fl=jo({conv2d_:function(e,t,n,r,i="NHWC",o=[1,1],a){let s=Fo(e,"x","conv2d","float32"),l=Fo(t,"filter","conv2d","float32"),u=s,c=!1;3===s.rank&&(c=!0,u=$s(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Z(4===u.rank,()=>`Error in conv2d: input must be rank 4, but got rank ${u.rank}.`),Z(4===l.rank,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),qs("conv2d",r,a);let p="NHWC"===i?u.shape[3]:u.shape[1];Z(p===l.shape[2],()=>`Error in conv2d: depth of input (${p}) must match input depth for filter ${l.shape[2]}.`),Z(Ls(n,o),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),Z(zs(o),()=>"Error in conv2D: Dilated rates should be larger than 0."),Z(zs(n),()=>"Error in conv2D: Strides should be larger than 0.");let d={x:u,filter:l},h={strides:n,pad:r,dataFormat:i,dilations:o,dimRoundingMode:a},f=To.runKernel(_t,d,h);return c?$s(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});var ml=jo({conv1d_:function(e,t,n,r,i="NWC",o=1,a){let s=Fo(e,"x","conv1d"),l=Fo(t,"filter","conv1d"),u=s,c=!1;2===s.rank&&(c=!0,u=$s(s,[1,s.shape[0],s.shape[1]])),Z(3===u.rank,()=>`Error in conv1d: input must be rank 3, but got rank ${u.rank}.`),Z(3===l.rank,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),qs("conv1d",r,a),Z(u.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${u.shape[2]}) must match input depth for filter ${l.shape[1]}.`),Z(Ls(n,o),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${o}'`),Z(zs(o),()=>"Error in conv1D: Dilated rates should be larger than 0."),Z(zs(n),()=>"Error in conv1D: Stride should be larger than 0."),Z("NWC"===i,()=>`Error in conv1d: got dataFormat of ${i} but only NWC is currently supported.`);let p=$s(l,[1,l.shape[0],l.shape[1],l.shape[2]]),d=$s(u,[u.shape[0],1,u.shape[1],u.shape[2]]),h=fl(d,p,[1,n],r,"NHWC",[1,o],a);return $s(h,c?[h.shape[2],h.shape[3]]:[h.shape[0],h.shape[2],h.shape[3]])}});var gl=jo({conv2DBackpropInput_:function(e,t,n,r,i,o="NHWC",a){Z(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let s=e,l=t,u=!1;3===t.rank&&(u=!0,l=$s(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),Z(4===s.length,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${s.length}.`),Z(4===l.rank,()=>"Error in conv2dDerInput: dy must be rank 4, but got rank "+l.rank),Z(4===n.rank,()=>"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank);let c="NHWC"===o?s[3]:s[1],p="NHWC"===o?l.shape[3]:l.shape[1];Z(c===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${c}) must match input depth for filter ${n.shape[2]}.`),Z(p===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${p}) must match output depth for filter ${n.shape[3]}.`),qs("conv2dDerInput",i,a);let d={dy:l,filter:n},h={strides:r,pad:i,dataFormat:o,dimRoundingMode:a,inputShape:s},f=To.runKernel(St,d,h);return u?$s(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});var yl=jo({conv2dTranspose_:function(e,t,n,r,i,o){let a=Fo(e,"x","conv2dTranspose"),s=Fo(t,"filter","conv2dTranspose");return gl(n,a,s,r,i,"NHWC",o)}});var vl=jo({conv3d_:function(e,t,n,r,i="NDHWC",o=[1,1,1]){let a=Fo(e,"x","conv3d"),s=Fo(t,"filter","conv3d"),l=a,u=!1;4===a.rank&&(u=!0,l=$s(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),Z(5===l.rank,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),Z(5===s.rank,()=>`Error in conv3d: filter must be rank 5, but got rank ${s.rank}.`),Z(l.shape[4]===s.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${s.shape[3]}.`),Z(Ls(n,o),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),Z("NDHWC"===i,()=>`Error in conv3d: got dataFormat of ${i} but only NDHWC is currently supported.`),Z(zs(o),()=>"Error in conv3D: Dilated rates should be larger than 0."),Z(zs(n),()=>"Error in conv3D: Strides should be larger than 0.");let c={x:l,filter:s},p={strides:n,pad:r,dataFormat:i,dilations:o},d=To.runKernel(kt,c,p);return u?$s(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var bl=jo({conv3DBackpropInput_:function(e,t,n,r,i){Z(e.length===t.rank,()=>`Length of inShape (${e.length}) and rank of dy (${t.rank}) must match`);let o=e,a=t,s=!1;4===t.rank&&(s=!0,a=$s(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),o=[1,e[0],e[1],e[2],e[3]]);let l=o[4],u=a.shape[4];Z(5===o.length,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${o.length}.`),Z(5===a.rank,()=>"Error in conv3dDerInput: dy must be rank 5, but got rank "+a.rank),Z(5===n.rank,()=>"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank),Z(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),Z(u===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${u}) must match output depth for filter ${n.shape[4]}.`);let c={dy:a,filter:n},p={pad:i,strides:r,inputShape:o},d=To.runKernel(Tt,c,p);return s?$s(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}});var xl=jo({conv3dTranspose_:function(e,t,n,r,i){let o=Fo(e,"x","conv3dTranspose"),a=Fo(t,"filter","conv3dTranspose");return bl(n,o,a,r,i)}});var wl=jo({cos_:function(e){let t={x:Fo(e,"x","cos","float32")};return To.runKernel(It,t)}});var _l=jo({cosh_:function(e){let t={x:Fo(e,"x","cosh","float32")};return To.runKernel(Pt,t)}});var Cl=jo({cumprod_:function(e,t=0,n=!1,r=!1){let i={x:Fo(e,"x","cumprod")},o={axis:t,exclusive:n,reverse:r};return To.runKernel(Ot,i,o)}});var Sl=jo({cumsum_:function(e,t=0,n=!1,r=!1){let i={x:Fo(e,"x","cumsum")},o={axis:t,exclusive:n,reverse:r};return To.runKernel(Nt,i,o)}});var kl=jo({denseBincount_:function(e,t,n,r=!1){let i=Fo(e,"x","denseBincount"),o=Fo(t,"weights","denseBincount");Z("int32"===i.dtype,()=>"Error in denseBincount: input dtype must be int32, but got "+i.dtype),Z(i.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${i.rank}.`),Z(n>=0,()=>`size must be non-negative, but got ${n}.`),Z(o.size===i.size||0===o.size,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${i.shape}, weights shape: ${o.shape}.`);let a={x:i,weights:o},s={size:n,binaryOutput:r};return To.runKernel(At,a,s)}});var El=jo({depthToSpace_:function(e,t,n="NHWC"){let r=Fo(e,"x","depthToSpace","float32"),i="NHWC"===n?r.shape[1]:r.shape[2],o="NHWC"===n?r.shape[2]:r.shape[3],a="NHWC"===n?r.shape[3]:r.shape[1];Z(t>1,()=>"blockSize should be > 1 for depthToSpace, but was: "+t),Z(i*t>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${i} and ${t}  for depthToSpace with input shape\n    ${r.shape}`),Z(o*t>=0,()=>`Negative dimension size caused by overflow when multiplying\n    ${o} and ${t} for depthToSpace with input shape\n        ${r.shape}`),Z(a%(t*t)==0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${a} for depthToSpace with input shape ${r.shape}`);let s={x:r},l={blockSize:t,dataFormat:n};return To.runKernel(Dt,s,l)}});var Tl=jo({depthwiseConv2d_:function(e,t,n,r,i="NHWC",o=[1,1],a){let s=Fo(e,"x","depthwiseConv2d","float32"),l=Fo(t,"filter","depthwiseConv2d","float32"),u=s,c=!1;3===s.rank&&(c=!0,u=$s(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Z(4===u.rank,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${u.rank}.`),Z(4===l.rank,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);let p="NHWC"===i?u.shape[3]:u.shape[1];Z(p===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${p}) must match the inChannels dimension in filter ${l.shape[2]}.`),qs("depthwiseConv2d",r,a);let d={x:u,filter:l},h={strides:n,pad:r,dataFormat:i,dilations:o,dimRoundingMode:a},f=To.runKernel(Vt,d,h);return c?$s(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});var Il=jo({diag_:function(e){let t={x:Fo(e,"x","diag")};return To.runKernel(Lt,t)}});var Pl=jo({dilation2d_:function(e,t,n,r,i=[1,1],o="NHWC"){let a=Fo(e,"x","dilation2d"),s=Fo(t,"filter","dilation2d");Z(3===a.rank||4===a.rank,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${a.rank}.`),Z(3===s.rank,()=>`Error in dilation2d: filter must be rank 3, but got rank ${s.rank}.`),Z("NHWC"===o,()=>"Error in dilation2d: Only NHWC is currently supported, but got dataFormat of "+o);let l=a,u=!1;3===a.rank&&(l=$s(a,[1,a.shape[0],a.shape[1],a.shape[2]]),u=!0),Z(l.shape[3]===s.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${s.shape[2]}`);let c={x:l,filter:s},p={strides:n,pad:r,dilations:i},d=To.runKernel(zt,c,p);return u?$s(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),Ol={};function Nl(e,t){let n=e.length,r=[];for(let i=0;i<n;i++){let o=n-1-i,a=e[o]||1;(t[t.length-1-i]||1)>1&&1===a&&r.unshift(o)}return r}function Rl(e,t){let n=[];for(let r=0;r<t.length;r++){let i=e[e.length-r-1],o=t.length-r-1,a=t[o];(null==i||1===i&&a>1)&&n.unshift(o)}return n}function Al(e,t){let n=Math.max(e.length,t.length),r=new Array(n);for(let i=0;i<n;i++){let o=e[e.length-i-1];null==o&&(o=1);let a=t[t.length-i-1];if(null==a&&(a=1),1===o)r[n-i-1]=a;else if(1===a)r[n-i-1]=o;else{if(o!==a){throw Error(`Operands could not be broadcast together with shapes ${e} and ${t}.`)}r[n-i-1]=o}}return r}b(Ol,{assertAndGetBroadcastShape:()=>Al,getBroadcastDims:()=>Nl,getReductionAxes:()=>Rl});var Dl=jo({equal_:function(e,t){let n=Fo(e,"a","equal","string_or_numeric"),r=Fo(t,"b","equal","string_or_numeric");[n,r]=bo(n,r),Al(n.shape,r.shape);let i={a:n,b:r};return To.runKernel(Gt,i)}});var Vl=jo({where_:function(e,t,n){let r=Fo(t,"a","where"),i=Fo(n,"b","where"),o=Fo(e,"condition","where","bool"),a=Al(Al(o.shape,r.shape),i.shape),s={condition:al(o,a),t:al(r,a),e:al(i,a)};return To.runKernel(_r,s)}});var Ml=jo({zerosLike_:function(e){let t={x:Fo(e,"x","zerosLike")};return To.runKernel(ii,t)}});var Fl=jo({divNoNan_:function(e,t){let n=Fo(e,"a","div"),r=Fo(t,"b","div");[n,r]=bo(n,r);let i=ds(n,r),o=Ml(i),a=Dl(r,o);return Vl(a,o,i)}});var Ll=jo({dot_:function(e,t){let n=Fo(e,"t1","dot"),r=Fo(t,"t2","dot");Z(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);let i=1===n.rank?n.size:n.shape[1],o=1===r.rank?r.size:r.shape[0];if(Z(i===o,()=>`Error in dot: inner dimensions of inputs must match, but got ${i} and ${o}.`),1===n.rank&&1===r.rank){let e=$s(n,[1,-1]),t=$s(r,[-1,1]),i=Hs(e,t);return $s(i,[])}if(1===n.rank&&2===r.rank){let e=$s(n,[1,-1]),t=$s(r,[r.shape[0],r.shape[1]]),i=Hs(e,t);return $s(i,[i.size])}if(2===n.rank&&1===r.rank){let e=$s(r,[-1,1]),t=Hs(n,e);return $s(t,[t.size])}{let e=$s(r,[r.shape[0],r.shape[1]]);return Hs(n,e)}}});var zl=jo({einsum_:function(e,...t){let n=t.map((e,t)=>Fo(e,"tensors"+t,"einsum")),r={equation:e};return To.runKernel(Ut,n,r)}});var jl=jo({elu_:function(e){let t={x:Fo(e,"x","elu","float32")};return To.runKernel(Wt,t)}});var ql=jo({ensureShape_:function(e,t){let n=Fo(e,"x","ensureShape","string_or_numeric");if(!ie(n.shape,t))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${t}`);return e}});var $l=jo({erf_:function(e){let t=Fo(e,"x","erf");Z("int32"===t.dtype||"float32"===t.dtype,()=>"Input dtype must be `int32` or `float32`."),"int32"===t.dtype&&(t=ja(t,"float32"));let n={x:t};return To.runKernel(Qt,n)}});function Bl(e,t){for(let n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function Ul(e,t,n){let r=e.length+t.length,i=[],o=0,a=0;for(let s=0;s<r;s++)-1===n.indexOf(s)?i.push(e[o++]):i.push(t[a++]);return i}function Wl(e,t){let n=[],r=e.length;for(let i=0;i<r;i++)-1===t.indexOf(i)&&n.push(e[i]);return[n,t.map(t=>e[t])]}function Hl(e,t){return Ul(e,t.map(e=>1),t)}function Ql(e,t,n){Z(Bl(t,n),()=>`${e} supports only inner-most axes for now. Got axes ${t} and rank-${n} input.`)}function Gl(e,t){if(Bl(e,t))return null;let n=[];for(let r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach(e=>n.push(e)),n}function Kl(e){return e.map((e,t)=>[t,e]).sort((e,t)=>e[1]-t[1]).map(e=>e[0])}function Jl(e,t){let n=[];for(let r=t-e;r<t;++r)n.push(r);return n}var Xl=jo({max_:function(e,t=null,n=!1){let r={x:Fo(e,"x","max")},i={reductionIndices:t,keepDims:n};return To.runKernel(On,r,i)}});var Yl=jo({min_:function(e,t=null,n=!1){let r={x:Fo(e,"x","min")},i={axis:t,keepDims:n};return To.runKernel(Ln,r,i)}});var Zl=jo({pow_:function(e,t){let n=Fo(e,"base","pow"),r=Fo(t,"exp","pow");[n,r]=bo(n,r);let i={a:n,b:r};return To.runKernel(er,i)}});function eu(e,t){if((Hi(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&Hi(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return $o(e,[],[],t)}var tu=jo({sqrt_:function(e){let t={x:Fo(e,"x","sqrt","float32")};return To.runKernel(Or,t)}});var nu=jo({square_:function(e){let t=Fo(e,"x","square");return To.runKernel("Square",{x:t},{})}});var ru=jo({sum_:function(e,t=null,n=!1){let r=Fo(e,"x","sum");"bool"===r.dtype&&(r=ja(r,"int32"));let i={x:r},o={axis:t,keepDims:n};return To.runKernel(Nr,i,o)}});var iu=jo({norm_:function(e,t="euclidean",n=null,r=!1){let i=function e(t,n,r=null){if(0===t.rank)return fs(t);if(1!==t.rank&&null===r)return e($s(t,[-1]),n,r);if(1===t.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return ru(fs(t),r);if(n===1/0)return Xl(fs(t),r);if(n===-1/0)return Yl(fs(t),r);if("euclidean"===n||2===n)return tu(ru(Zl(fs(t),eu(2,"int32")),r));throw new Error("Error in norm: invalid ord value: "+n)}if(Array.isArray(r)&&2===r.length){if(1===n)return Xl(ru(fs(t),r[0]),r[1]-1);if(n===1/0)return Xl(ru(fs(t),r[1]),r[0]);if(n===-1/0)return Yl(ru(fs(t),r[1]),r[0]);if("fro"===n||"euclidean"===n)return tu(ru(nu(t),r));throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(e=Fo(e,"x","norm"),t,n),o=i.shape;if(r){let t=he(n,e.shape);o=Hl(i.shape,t)}return $s(i,o)}});var ou=jo({euclideanNorm_:function(e,t=null,n=!1){return iu(e,"euclidean",t,n)}});var au=jo({exp_:function(e){let t={x:Fo(e,"x","exp")};return To.runKernel(Kt,t)}});var su=jo({expandDims_:function(e,t=0){let n=Fo(e,"x","expandDims","string_or_numeric");Z(t<=n.rank,()=>"Axis must be <= rank of the tensor");let r={input:n},i={dim:t};return To.runKernel(Jt,r,i)}});var lu=jo({expm1_:function(e){let t={x:Fo(e,"x","expm1")};return To.runKernel(Xt,t)}});var uu=jo({tile_:function(e,t){let n=Fo(e,"x","tile","string_or_numeric");Z(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${t}.`);let r={x:n},i={reps:t};return To.runKernel(Jr,r,i)}});var cu=jo({eye_:function(e,t,n,r="float32"){null==t&&(t=e);let i=za([e,t],r),o=e<=t?e:t;for(let e=0;e<o;++e)i.set(1,e,e);let a=$s(i.toTensor(),[e,t]);if(null==n)return a;if(1===n.length)return uu(su(a,0),[n[0],1,1]);if(2===n.length)return uu(su(su(a,0),0),[n[0],n[1],1,1]);if(3===n.length)return uu(su(su(su(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}});var pu=jo({floor_:function(e){let t={x:Fo(e,"x","floor","float32")};return To.runKernel(tn,t)}});var du=jo({gather_:function(e,t,n=0,r=0){let i={x:Fo(e,"x","gather"),indices:Fo(t,"indices","gather","int32")},o={axis:n,batchDims:r};return To.runKernel(on,i,o)}});var hu=jo({greater_:function(e,t){let n=Fo(e,"a","greater","string_or_numeric"),r=Fo(t,"b","greater","string_or_numeric");[n,r]=bo(n,r),Al(n.shape,r.shape);let i={a:n,b:r};return To.runKernel(sn,i)}});var fu=jo({greaterEqual_:function(e,t){let n=Fo(e,"a","greaterEqual","string_or_numeric"),r=Fo(t,"b","greaterEqual","string_or_numeric");[n,r]=bo(n,r),Al(n.shape,r.shape);let i={a:n,b:r};return To.runKernel(ln,i)}});var mu=jo({imag_:function(e){let t={input:Fo(e,"input","imag")};return To.runKernel(pn,t)}});var gu=jo({isFinite_:function(e){let t={x:Fo(e,"x","isFinite")};return To.runKernel(dn,t)}});var yu=jo({isInf_:function(e){let t={x:Fo(e,"x","isInf")};return To.runKernel(hn,t)}});var vu=jo({isNaN_:function(e){let t={x:Fo(e,"x","isNaN")};return To.runKernel(fn,t)}});var bu=jo({leakyRelu_:function(e,t=.2){let n={x:Fo(e,"x","leakyRelu")},r={alpha:t};return To.runKernel(mn,n,r)}});var xu=jo({less_:function(e,t){let n=Fo(e,"a","less","string_or_numeric"),r=Fo(t,"b","less","string_or_numeric");[n,r]=bo(n,r),Al(n.shape,r.shape);let i={a:n,b:r};return To.runKernel(gn,i)}});var wu=jo({lessEqual_:function(e,t){let n=Fo(e,"a","lessEqual","string_or_numeric"),r=Fo(t,"b","lessEqual","string_or_numeric");[n,r]=bo(n,r),Al(n.shape,r.shape);let i={a:n,b:r};return To.runKernel(yn,i)}});function _u(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");let r={start:e,stop:t,num:n};return To.runKernel(vn,{},r)}var Cu=jo({localResponseNormalization_:function(e,t=5,n=1,r=1,i=.5){let o=Fo(e,"x","localResponseNormalization");Z(4===o.rank||3===o.rank,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank ${o.rank}.`),Z(ae(t),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let a=o,s=!1;3===o.rank&&(s=!0,a=$s(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let l={x:a},u={depthRadius:t,bias:n,alpha:r,beta:i},c=To.runKernel(Tn,l,u);return s?$s(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var Su=jo({log_:function(e){let t={x:Fo(e,"x","log","float32")};return To.runKernel(bn,t)}});var ku=jo({log1p_:function(e){let t={x:Fo(e,"x","log1p")};return To.runKernel(xn,t)}});function Eu(e){return Z(Ee(e),()=>"The f passed in grad(f) must be a function"),(t,n)=>{let r=Fo(t,"x","tf.grad","string_or_numeric"),i=null!=n?Fo(n,"dy","tf.grad"):null;return To.tidy(()=>{let{value:t,grads:n}=To.gradients(()=>e(r),[r],i);return null!=i&&ee(t.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),Ru(n),n[0]})}}function Tu(e){return Z(Ee(e),()=>"The f passed in grads(f) must be a function"),(t,n)=>{Z(Array.isArray(t),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");let r=Lo(t,"args","tf.grads","string_or_numeric"),i=null!=n?Fo(n,"dy","tf.grads"):null;return To.tidy(()=>{let{value:t,grads:n}=To.gradients(()=>e(...r),r,i);return null!=i&&ee(t.shape,i.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Ru(n),n})}}function Iu(e){return Z(Ee(e),()=>"The f passed in valueAndGrad(f) must be a function"),(t,n)=>{Z(t instanceof ro,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),Z(null==n||n instanceof ro,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");let{grads:r,value:i}=To.gradients(()=>e(t),[t],n);return Ru(r),{grad:r[0],value:i}}}function Pu(e){return Z(Ee(e),()=>"The f passed in valueAndGrads(f) must be a function"),(t,n)=>{Z(Array.isArray(t)&&t.every(e=>e instanceof ro),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),Z(null==n||n instanceof ro,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");let r=To.gradients(()=>e(...t),t,n);return null!=n&&ee(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Ru(r.grads),r}}function Ou(e,t){Z(Ee(e),()=>"The f passed in variableGrads(f) must be a function"),Z(null==t||Array.isArray(t)&&t.every(e=>e instanceof oo),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let n=null!=t;if(!n){t=[];for(let e in To.registeredVariables)t.push(To.registeredVariables[e])}let r=n?t.filter(e=>!e.trainable):null,i=t.length;Z((t=t.filter(e=>e.trainable)).length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${i} variables is trainable.`);let{value:o,grads:a}=To.gradients(e,t,null,!0);Z(a.some(e=>null!=e),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),Z(0===o.rank,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);let s={};return t.forEach((e,t)=>{null!=a[t]&&(s[e.name]=a[t])}),null!=r&&r.forEach(e=>s[e.name]=null),{value:o,grads:s}}function Nu(e){return To.customGrad(e)}function Ru(e){if(e.filter(e=>null==e).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}var Au=jo({neg_:function(e){let t={x:Fo(e,"x","neg")};return To.runKernel(Un,t)}});var Du=jo({softplus_:function(e){let t={x:Fo(e,"x","softplus")};return To.runKernel(Pr,t)}});var Vu=jo({logSigmoid_:function(e){let t=Fo(e,"x","logSigmoid");return Nu(e=>({value:Au(Du(Au(e))),gradFunc:t=>hs(t,Qs(Au(e)))}))(t)}});var Mu=jo({sub_:function(e,t){let n=Fo(e,"a","sub"),r=Fo(t,"b","sub");[n,r]=bo(n,r);let i={a:n,b:r};return To.runKernel(Qr,i)}});var Fu=jo({logSoftmax_:function(e,t=-1){let n=Fo(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${t}`);return Nu((e,n)=>{let r=Xl(e,t,!0),i=Mu(e,r),o=Mu(ja(i,"float32"),Su(ru(au(i),t,!0)));return n([o]),{value:o,gradFunc:(e,n)=>{let[r]=n,i=au(r);return Mu(e,hs(ru(e,t,!0),i))}}})(n)}});var Lu=jo({logSumExp_:function(e,t=null,n=!1){let r=Fo(e,"x","logSumExp"),i=he(t,r.shape),o=Xl(r,i,!0),a=Mu(r,o),s=au(a),l=ru(s,i),u=Su(l),c=cs($s(o,u.shape),u);if(n){let e=Hl(c.shape,i);return $s(c,e)}return c}});var zu=jo({logicalAnd_:function(e,t){let n=Fo(e,"a","logicalAnd","bool"),r=Fo(t,"b","logicalAnd","bool");Al(n.shape,r.shape);let i={a:n,b:r};return To.runKernel(wn,i)}});var ju=jo({logicalNot_:function(e){let t={x:Fo(e,"x","logicalNot","bool")};return To.runKernel(_n,t)}});var qu=jo({logicalOr_:function(e,t){let n=Fo(e,"a","logicalOr","bool"),r=Fo(t,"b","logicalOr","bool");Al(n.shape,r.shape);let i={a:n,b:r};return To.runKernel(Cn,i)}});var $u=jo({logicalXor_:function(e,t){let n=Fo(e,"a","logicalXor","bool"),r=Fo(t,"b","logicalXor","bool");return Al(n.shape,r.shape),zu(qu(e,t),ju(zu(e,t)))}}),Bu=2147483648;var Uu=jo({searchSorted_:function(e,t,n="left"){let r=Fo(e,"sortedSequence","searchSorted"),i=Fo(t,"values","searchSorted"),o=r.shape[r.shape.length-1],a=i.shape[i.shape.length-1],s=$s(r,[-1,o]),l=$s(i,[-1,a]);if(s.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(s.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(ne(l.shape)>=Bu)throw new Error("values tensor size must less than "+Bu);if(s.shape[1]>=Bu)throw new Error(`trailing dim_size must less than ${Bu} for int32 output type, was ${s.shape[1]}`);let u={sortedSequence:s,values:l},c={side:n};return To.runKernel(wr,u,c)}});function Wu(e,t){return Uu(e,t,"left")}var Hu=jo({maxPool_:function(e,t,n,r,i){let o=Fo(e,"x","maxPool"),a=o,s=!1;3===o.rank&&(s=!0,a=$s(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Z(4===a.rank,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),Z(Ls(n,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '1'`),qs("maxPool",r,i);let l={x:a},u={filterSize:t,strides:n,pad:r,dimRoundingMode:i},c=To.runKernel(Rn,l,u);return s?$s(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});var Qu=jo({maxPool3d_:function(e,t=[1,1,1],n,r,i,o="NDHWC"){let a=Fo(e,"x","maxPool3d"),s=a,l=!1;4===a.rank&&(l=!0,s=$s(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),Z(5===s.rank,()=>`Error in maxPool3d: x must be rank 5 but got rank ${s.rank}.`),Z("NDHWC"===o,()=>"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+o),qs("maxPool3d",r,i);let u={x:s},c={filterSize:t,strides:n,pad:r,dimRoundingMode:i,dataFormat:o},p=To.runKernel(Dn,u,c);return l?$s(p,[p.shape[1],p.shape[2],p.shape[3],p.shape[4]]):p}});var Gu=jo({maxPoolWithArgmax_:function(e,t,n,r,i=!1){let o={x:Fo(e,"x","maxPoolWithArgmax")},a={filterSize:t,strides:n,pad:r,includeBatchInIndex:i},s=To.runKernel(Mn,o,a);return{result:s[0],indexes:s[1]}}});var Ku=jo({maximum_:function(e,t){let n=Fo(e,"a","maximum"),r=Fo(t,"b","maximum");[n,r]=bo(n,r),"bool"===n.dtype&&(n=ja(n,"int32"),r=ja(r,"int32")),Al(n.shape,r.shape);let i={a:n,b:r};return To.runKernel(Nn,i)}});var Ju=jo({mean_:function(e,t=null,n=!1){let r={x:Fo(e,"x","mean")},i={axis:t,keepDims:n};return To.runKernel(Fn,r,i)}});function Xu(e,t="float32"){if(De(e),"complex64"===t){let t=Xu(e,"float32"),n=Xu(e,"float32");return qo(t,n)}let n=Re(ne(e),t);return To.makeTensor(n,e,t)}function Yu(e,t="float32"){if(De(e),"complex64"===t){let t=Yu(e,"float32"),n=Xu(e,"float32");return qo(t,n)}let n=Ne(ne(e),t);return To.makeTensor(n,e,t)}function Zu(e,t,{indexing:n="xy"}={}){if("xy"!==n&&"ij"!==n)throw new TypeError(n+" is not a valid third argument to meshgrid");if(void 0===e)return[];let r=Fo(e,"x","meshgrid",e instanceof ro?e.dtype:"float32");if(void 0===t)return[r];let i=Fo(t,"y","meshgrid",t instanceof ro?t.dtype:"float32"),o=ne(r.shape),a=ne(i.shape);return"xy"===n?(r=$s(r,[1,-1]),i=$s(i,[-1,1]),[Hs(Yu([a,1],r.dtype),r),Hs(i,Yu([1,o],i.dtype))]):(r=$s(r,[-1,1]),i=$s(i,[1,-1]),[Hs(r,Yu([1,a],r.dtype)),Hs(Yu([o,1],i.dtype),i)])}var ec=jo({minimum_:function(e,t){let n=Fo(e,"a","minimum"),r=Fo(t,"b","minimum");[n,r]=bo(n,r),"bool"===n.dtype&&(n=ja(n,"int32"),r=ja(r,"int32")),Al(n.shape,r.shape);let i={a:n,b:r};return To.runKernel(zn,i)}});var tc=jo({mirrorPad_:function(e,t,n){Z("reflect"===n||"symmetric"===n,()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);let r=Fo(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");Z(t.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${t.length}.`);let i="reflect"===n?1:0;for(let e=0;e<r.rank;e++)Z(2===t[e].length,()=>"Invalid number of paddings. Must be length of 2 each."),Z(t[e][0]>=0&&t[e][0]<=r.shape[e]-i&&t[e][1]>=0&&t[e][1]<=r.shape[e]-i,()=>`Padding in dimension ${e} cannot be greater than or equal to ${r.shape[e]-i} or less than 0 for input of shape ${r.shape}`);let o={paddings:t,mode:n},a={x:r};return To.runKernel(jn,a,o)}});var nc=jo({mod_:function(e,t){let n=Fo(e,"a","mod"),r=Fo(t,"b","mod");[n,r]=bo(n,r);let i={a:n,b:r};return To.runKernel(qn,i)}});var rc=jo({moments_:function(e,t=null,n=!1){let r=he(t,(e=Fo(e,"x","moments")).shape),i=Ju(e,r,n),o=i.shape;n||(o=Hl(i.shape,r));let a=nu(Mu(ja(e,"float32"),$s(i,o)));return{mean:i,variance:Ju(a,r,n)}}});var ic=jo({multiRNNCell_:function(e,t,n,r){let i=Fo(t,"data","multiRNNCell"),o=Lo(n,"c","multiRNNCell"),a=Lo(r,"h","multiRNNCell"),s=i,l=[];for(let t=0;t<e.length;t++){let n=e[t](s,o[t],a[t]);l.push(n[0]),l.push(n[1]),s=n[1]}let u=[],c=[];for(let e=0;e<l.length;e+=2)u.push(l[e]),c.push(l[e+1]);return[u,c]}});var oc=jo({multinomial_:function(e,t,n,r=!1){let i=Fo(e,"logits","multinomial"),o=i.size,a=i.rank;if(o<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${o}.`);if(a>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+a);n=n||Math.random();let s={logits:1===a?$s(i,[1,-1]):i},l={numSamples:t,seed:n,normalized:r},u=To.runKernel($n,s,l);return 1===a?$s(u,[u.size]):u}});var ac=jo({notEqual_:function(e,t){let n=Fo(e,"a","notEqual","string_or_numeric"),r=Fo(t,"b","notEqual","string_or_numeric");[n,r]=bo(n,r),Al(n.shape,r.shape);let i={a:n,b:r};return To.runKernel(Wn,i)}});var sc=jo({oneHot_:function(e,t,n=1,r=0,i="int32"){if(t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);let o={indices:Fo(e,"indices","oneHot","int32")},a={dtype:i,depth:t,onValue:n,offValue:r};return To.runKernel(Jn,o,a)}});var lc=jo({onesLike_:function(e){let t={x:Fo(e,"x","onesLike")};return To.runKernel(Kn,t)}});var uc=jo({outerProduct_:function(e,t){let n=Fo(e,"v1","outerProduct"),r=Fo(t,"v2","outerProduct");Z(1===n.rank&&1===r.rank,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);let i=$s(n,[-1,1]),o=$s(r,[1,-1]);return Hs(i,o)}});var cc=jo({pad_:function(e,t,n=0){let r=Fo(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");let i={paddings:t,constantValue:n},o={x:r};return To.runKernel(Yn,o,i)}});var pc=jo({pad1d_:function(e,t,n=0){return Z(2===t.length,()=>"Invalid number of paddings. Must be length of 2."),cc(e,[t],n)}});var dc=jo({pad2d_:function(e,t,n=0){return Z(2===t.length&&2===t[0].length&&2===t[1].length,()=>"Invalid number of paddings. Must be length of 2 each."),cc(e,t,n)}});var hc=jo({pad3d_:function(e,t,n=0){return Z(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,()=>"Invalid number of paddings. Must be length of 2 each."),cc(e,t,n)}});var fc=jo({pad4d_:function(e,t,n=0){return Z(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,()=>"Invalid number of paddings. Must be length of 2 each."),cc(e,t,n)}});var mc=jo({spaceToBatchND_:function(e,t,n){let r=Fo(e,"x","spaceToBatchND");Z(r.rank>=1+t.length,()=>`input rank ${r.rank} should be > than [blockShape] ${t.length}`),Z(n.length===t.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${t.length}`),Z(r.shape.reduce((e,r,i)=>i>0&&i<=t.length?e&&(r+n[i-1][0]+n[i-1][1])%t[i-1]==0:e,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${t.toString()}`);let i={x:r},o={blockShape:t,paddings:n};return To.runKernel(Rr,i,o)}});var gc=jo({pool_:function(e,t,n,r,i,o,a){null==i&&(i=[1,1]),null==o&&(o=1),0===r&&(r="valid");let s=Fo(e,"x","maxPool"),l=s,u=!1;3===s.rank&&(u=!0,l=$s(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Z(Ls(o,i),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${o} and dilations '${i}'`);let c,p=Is(l.shape,t,o,i,r),d=[p.dilationHeight,p.dilationWidth];c="same"===r?function(e,t){let n=e.map((e,n)=>e+(e-1)*(t[n]-1)).map(e=>e-1),r=n.map(e=>Math.floor(e/2)),i=n.map((e,t)=>e-r[t]);return n.map((e,t)=>[r[t],i[t]])}([p.filterHeight,p.filterWidth],d):[[0,0],[0,0]];let h=1===d[0]&&1===d[1],[f,m]=function(e,t,n){let r=n.map(e=>e[0]),i=n.map(e=>e[1]),o=e.concat(r,i),a=t.map((e,t)=>(e-o[t]%e)%e),s=i.map((e,t)=>e+a[t]),l=t.map((e,t)=>[r[t],s[t]]),u=t.map((e,t)=>[0,a[t]]);return[l,u]}([p.inHeight,p.inWidth],d,c),g=h?r:"valid",y=h?l:mc(l,d,f),v=("avg"===n?()=>Bs(y,t,o,g,a):()=>Hu(y,t,o,g,a))(),b=h?v:Xs(v,d,m);return u?$s(b,[b.shape[1],b.shape[2],b.shape[3]]):b}});var yc=jo({prelu_:function(e,t){let n={x:Fo(e,"x","prelu"),alpha:Fo(t,"alpha","prelu")};return To.runKernel(tr,n)}});var vc=jo({prod_:function(e,t=null,n=!1){let r=Fo(e,"x","prod");"bool"===r.dtype&&(r=ja(r,"int32"));let i={x:r},o={axis:t,keepDims:n};return To.runKernel(nr,i,o)}});var bc=jo({raggedGather_:function(e,t,n,r){let i={paramsNestedSplits:e.map((e,t)=>Fo(e,"tensors"+t,"raggedGather","int32")),paramsDenseValues:Fo(t,"paramsDenseValues","raggedGather"),indices:Fo(n,"indices","raggedGather","int32")},o={outputRaggedRank:r},a=To.runKernel(rr,i,o);return{outputNestedSplits:a.slice(0,a.length-1),outputDenseValues:a[a.length-1]}}});var xc=jo({raggedRange_:function(e,t,n){let r=Fo(e,"starts","raggedRange"),i={starts:r,limits:Fo(t,"limits","raggedRange",r.dtype),deltas:Fo(n,"deltas","raggedRange",r.dtype)},o=To.runKernel(ir,i);return{rtNestedSplits:o[0],rtDenseValues:o[1]}}});var wc=jo({raggedTensorToTensor_:function(e,t,n,r,i){let o=Fo(e,"shape","raggedTensorToTensor","int32"),a=Fo(t,"values","raggedTensorToTensor"),s={shape:o,values:a,defaultValue:Fo(n,"defaultValue","raggedTensorToTensor",a.dtype),rowPartitionTensors:r.map((e,t)=>Fo(e,"tensors"+t,"raggedTensorToTensor","int32"))},l={rowPartitionTypes:i};return To.runKernel(or,s,l)}});var _c=jo({rand_:function(e,t,n){De(e);let r=ne(e),i=null;if(null==n||"float32"===n)i=new Float32Array(r);else if("int32"===n)i=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);i=new Uint8Array(r)}for(let e=0;e<r;e++)i[e]=t();return To.makeTensor(i,e,n)}}),Cc=x(R()),Sc={};b(Sc,{TEST_EPSILON_FLOAT16:()=>kc,createVideoElement:()=>Mc,encodeStrings:()=>Vc,expectArrayBuffersEqual:()=>Dc,expectArraysClose:()=>Ec,expectArraysEqual:()=>Oc,expectNumbersClose:()=>Nc,expectPromiseToFail:()=>Pc,expectValuesInRange:()=>Ac,play:()=>Fc,testEpsilon:()=>Tc});var kc=.1;function Ec(e,t,n){return null==n&&(n=Tc()),Ic(e,t,(e,t)=>Rc(e,t,n))}function Tc(){return 32===To.backend.floatPrecision()?.001:kc}function Ic(e,t,n){let r=!0;if((Hi(e)||Hi(t))&&(r=!1),Hi(e)&&Hi(t)&&(r=!0),r){let n=e.constructor.name,r=t.constructor.name;if(n!==r)throw new Error(`Arrays are of different type. Actual: ${n}. Expected: ${r}`)}if(Array.isArray(e)&&Array.isArray(t)){let n=Vo(e),r=Vo(t);if(!oe(n,r))throw new Error(`Arrays have different shapes. Actual: [${n}]. Expected: [${r}]`)}let i=Hi(e)?e:Qi(e),o=Hi(t)?t:Qi(t);if(i.length!==o.length)throw new Error(`Arrays have different lengths actual: ${i.length} vs expected: ${o.length}.\nActual:   ${i}.\nExpected: ${o}.`);for(let e=0;e<o.length;++e){let t=i[e],r=o[e];if(!n(t,r))throw new Error(`Arrays differ: actual[${e}] = ${t}, expected[${e}] = ${r}.\nActual:   ${i}.\nExpected: ${o}.`)}"undefined"!=typeof expect&&expect().nothing()}function Pc(e,t){e().then(()=>t.fail(),()=>t()),"undefined"!=typeof expect&&expect().nothing()}function Oc(e,t){let n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return _e(e)||_e(e[0])||_e(t)||_e(t[0])?Ic(e,n,(e,t)=>e==t):Ic(e,t,(e,t)=>Rc(e,t,0))}function Nc(e,t,n){if(null==n&&(n=Tc()),!Rc(e,t,n))throw new Error(`Numbers differ: actual === ${e}, expected === ${t}`);"undefined"!=typeof expect&&expect().nothing()}function Rc(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}function Ac(e,t,n){for(let r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error(`Value out of range:${e[r]} low: ${t}, high: ${n}`)}function Dc(e,t){let n=new Float32Array(e),r=new Float32Array(t);if(n.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${n.length}`);for(let e=0;e<r.length;e++)if(n[e]!==r[e])throw new Error(`Expected ArrayBuffer value at ${e} to be ${r[e]} but got ${n[e]} instead`)}function Vc(e){for(let t=0;t<e.length;t++){let n=e[t];Array.isArray(n)?Vc(n):e[t]=Ui(n)}return e}function Mc(e){let t=document.createElement("video");return"playsInline"in t&&(t.playsInline=!0),t.muted=!0,t.loop=!0,t.style.position="fixed",t.style.left="0px",t.style.top="0px",t.preload="auto",t.appendChild(e),new Promise(e=>{t.addEventListener("loadeddata",n=>e(t)),t.load()})}async function Fc(e){await e.play(),"requestVideoFrameCallback"in e&&await new Promise(t=>{e.requestVideoFrameCallback(t)})}var Lc=class{constructor(e,t,n,r,i){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);let o=i||Math.random();this.random=Cc.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){let e=this.nextVal;return this.nextVal=NaN,e}let e,t,n=!1;for(;!n;){let r,i,o;do{r=2*this.random()-1,i=2*this.random()-1,o=r*r+i*i}while(o>=1||0===o);let a=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*r*a,t=this.mean+this.stdDev*i*a,(!this.truncated||this.isValidTruncated(e))&&(n=!0)}return(!this.truncated||this.isValidTruncated(t))&&(this.nextVal=this.convertValue(t)),this.convertValue(e)}convertValue(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}};var zc=jo({randomGamma_:function(e,t,n=1,r="float32",i){if(De(e),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);let o=new class{constructor(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;let i=r||Math.random();this.randu=Cc.alea(i.toString()),this.randn=new Lc(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,t,n,r,i,o;for(;;){do{r=this.randn.nextValue(),o=1+this.c*r}while(o<=0);if(o*=o*o,e=r*r,t=1-.331*e*e,n=.5*e+this.d*(1-o+Math.log(o)),i=this.randu(),i<t||Math.log(i)<n)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(e){return"float32"===this.dtype?e:Math.round(e)}}(t,n,r,i),a=za(e,r);for(let e=0;e<a.values.length;e++)a.values[e]=o.nextValue();return a.toTensor()}});var jc=jo({randomNormal_:function(e,t=0,n=1,r,i){if(De(e),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);let o=new Lc(t,n,r,!1,i),a=za(e,r);for(let e=0;e<a.values.length;e++)a.values[e]=o.nextValue();return a.toTensor()}});var qc=jo({randomStandardNormal_:function(e,t,n){if(null!=t&&"bool"===t)throw new Error("Unsupported data type "+t);return jc(e,0,1,t,n)}});var $c=jo({randomUniform_:function(e,t=0,n=1,r="float32",i){De(e);let o=za(e,r),a=new class{constructor(e=0,t=1,n,r){if(this.canReturnFloat=()=>null==this.dtype||"float32"===this.dtype,this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${t} <= 1 and dtype is not float`);this.random=Cc.alea(r)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}(t,n,null,i);for(let e=0;e<o.values.length;e++)o.values[e]=a.nextValue();return o.toTensor()}});var Bc=jo({randomUniformInt_:function(e,t,n,r){return $c(e,t,n,"int32",r)}});function Uc(e,t,n=1,r="float32"){if(0===n)throw new Error("Cannot have a step of zero");let i={start:e,stop:t,step:n,dtype:r};return To.runKernel(ar,{},i)}var Wc=jo({real_:function(e){let t={input:Fo(e,"input","real")};return To.runKernel(sr,t)}});var Hc=jo({reciprocal_:function(e){let t={x:Fo(e,"x","reciprocal")};return To.runKernel(lr,t)}});var Qc=jo({relu_:function(e){let t={x:Fo(e,"x","relu")};return To.runKernel(ur,t)}});var Gc=jo({relu6_:function(e){let t={x:Fo(e,"x","relu6")};return To.runKernel(mr,t)}});var Kc=jo({reverse_:function(e,t){let n={x:Fo(e,"x","reverse")},r={dims:t};return To.runKernel(gr,n,r)}});var Jc=jo({reverse1d_:function(e){let t=Fo(e,"x","reverse");return Z(1===t.rank,()=>`Error in reverse1D: x must be rank 1 but got rank ${t.rank}.`),Kc(t,0)}});var Xc=jo({reverse2d_:function(e,t){let n=Fo(e,"x","reverse");return Z(2===n.rank,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),Kc(n,t)}});var Yc=jo({reverse3d_:function(e,t){let n=Fo(e,"x","reverse");return Z(3===n.rank,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),Kc(n,t)}});var Zc=jo({reverse4d_:function(e,t){let n=Fo(e,"x","reverse");return Z(4===n.rank,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),Kc(n,t)}});var ep=jo({round_:function(e){let t={x:Fo(e,"x","round")};return To.runKernel(yr,t)}});var tp=jo({rsqrt_:function(e){let t={x:Fo(e,"x","rsqrt","float32")};return To.runKernel(vr,t)}});var np=jo({selu_:function(e){let t={x:Fo(e,"x","selu")};return To.runKernel(Cr,t)}});var rp=jo({separableConv2d_:function(e,t,n,r,i,o=[1,1],a="NHWC"){let s=Fo(e,"x","separableConv2d"),l=Fo(t,"depthwiseFilter","separableConv2d"),u=Fo(n,"pointwiseFilter","separableConv2d"),c=s,p=!1;if(3===s.rank&&(p=!0,c=$s(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===a)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Z(4===c.rank,()=>`Error in separableConv2d: input must be rank 4, but got rank ${c.rank}.`),Z(4===l.rank,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),Z(4===u.rank,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),Z(1===u.shape[0],()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${u.shape[0]}.`),Z(1===u.shape[1],()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${u.shape[1]}.`);let d=l.shape[2],h=l.shape[3];Z(u.shape[2]===d*h,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${d*h}, but got ${u.shape[2]}.`);let f=Tl(c,l,r,i,a,o),m=fl(f,u,1,"valid",a);return p?$s(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});var ip=async function(e,t){let n=Fo(e,"x","setdiff1d"),r=Fo(t,"y","setdiff1d");Z(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),Z(1===n.rank,()=>`x should be 1D tensor, but got x (${n.shape}).`),Z(1===r.rank,()=>`y should be 1D tensor, but got y (${r.shape}).`);let i=await n.data(),o=await r.data(),a=new Set(o),s=0;for(let e=0;e<i.length;e++)a.has(i[e])||s++;let l=new eo([s],n.dtype),u=new eo([s],"int32");for(let e=0,t=0;e<i.length;e++)a.has(i[e])||(l.values[t]=i[e],u.values[t]=e,t++);return[l.toTensor(),u.toTensor()]};var op=jo({sign_:function(e){let t={x:Fo(e,"x","sign")};return To.runKernel(Tr,t)}});var ap=jo({sin_:function(e){let t={x:Fo(e,"x","sin","float32")};return To.runKernel(kr,t)}});var sp=jo({sinh_:function(e){let t={x:Fo(e,"x","sinh")};return To.runKernel(Er,t)}});var lp=jo({slice1d_:function(e,t,n){let r=Fo(e,"x","slice1d");return Z(1===r.rank,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),Gs(r,[t],[n])}});var up=jo({slice2d_:function(e,t,n){let r=Fo(e,"x","slice2d");return Z(2===r.rank,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),Gs(r,t,n)}});var cp=jo({slice3d_:function(e,t,n){let r=Fo(e,"x","slice3d");return Z(3===r.rank,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),Gs(r,t,n)}});var pp=jo({slice4d_:function(e,t,n){let r=Fo(e,"x","slice4d");return Z(4===r.rank,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),Gs(r,t,n)}});var dp=jo({softmax_:function(e,t=-1){let n=Fo(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${t}`);let r={logits:n},i={dim:t};return To.runKernel(Dr,r,i)}});var hp=jo({fft_:function(e){Z("complex64"===e.dtype,()=>`The dtype for tf.spectral.fft() must be complex64 but got ${e.dtype}.`);let t={input:e};return To.runKernel(Yt,t)}});var fp=jo({ifft_:function(e){Z("complex64"===e.dtype,()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${e.dtype}.`);let t={input:e};return To.runKernel(cn,t)}});var mp=jo({irfft_:function(e){let t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){let i=$s(e,[r,n]);t=fp(i)}else{let i=[r,2*(n-1)],o=$s(Wc(e),[r,n]),a=$s(mu(e),[r,n]),s=Kc(Gs(o,[0,1],[r,n-2]),1),l=hs(Kc(Gs(a,[0,1],[r,n-2]),1),eu(-1)),u=Ws([o,s],1),c=Ws([a,l],1),p=$s(qo(u,c),[i[0],i[1]]);t=fp(p)}if(t=Wc(t),3===e.rank&&0!==e.shape[0]){let n=t,r=e.shape[0];t=$s(t,[r,t.shape[0]/r,t.shape[1]]),n.dispose()}return t}});var gp=jo({split_:function(e,t,n=0){let r={x:Fo(e,"x","split")},i={numOrSizeSplits:t,axis:n};return To.runKernel(Ar,r,i)}});var yp=jo({rfft_:function(e,t){Z("float32"===e.dtype,()=>"The dtype for rfft() must be real value but got "+e.dtype);let n,r=e.shape[e.shape.length-1],i=e.size/r;if(null!=t&&t<r){let i=e.shape.map(e=>0),o=e.shape.map(e=>e);o[e.shape.length-1]=t,n=Gs(e,i,o),r=t}else if(null!=t&&t>r){let i=e.shape.map(e=>e);i[e.shape.length-1]=t-r,n=Ws([e,Xu(i)],e.shape.length-1),r=t}else n=e;let o=Ml(n),a=$s(qo(n,o),[i,r]),s=hp(a),l=Math.floor(r/2)+1,u=Wc(s),c=mu(s),p=gp(u,[l,r-l],u.shape.length-1),d=gp(c,[l,r-l],c.shape.length-1),h=n.shape.slice();return h[n.shape.length-1]=l,$s(qo(p[0],d[0]),h)}});var vp=jo({squaredDifference_:function(e,t){let n=Fo(e,"a","squaredDifference"),r=Fo(t,"b","squaredDifference");[n,r]=bo(n,r),Al(n.shape,r.shape);let i={a:n,b:r};return To.runKernel(jr,i,{})}});var bp=jo({squeeze_:function(e,t){let n=Fo(e,"x","squeeze","string_or_numeric");return $s(n,fe(n.shape,t).newShape)}});var xp=jo({stack_:function(e,t=0){let n=Lo(e,"tensors","stack","string_or_numeric");Z(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&Z(t<=n[0].rank,()=>"Axis must be <= rank of the tensor");let r=n,i={axis:t};return To.runKernel(Xn,r,i)}});var wp=jo({step_:function(e,t=0){let n={x:Fo(e,"x","step")},r={alpha:t};return To.runKernel(oi,n,r)}});var _p=jo({stridedSlice_:function(e,t,n,r,i=0,o=0,a=0,s=0,l=0){let u={x:Fo(e,"x","stridedSlice","string_or_numeric")},c={begin:t,end:n,strides:r,beginMask:i,endMask:o,ellipsisMask:a,newAxisMask:s,shrinkAxisMask:l};return To.runKernel(Br,u,c)}});var Cp=jo({tan_:function(e){let t={x:Fo(e,"x","tan","float32")};return To.runKernel(Gr,t)}});function Sp(e,t){te(e);let n=Vo(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return $o(e,null,n,t)}function kp(e,t,n){if(te(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");let r=Vo(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return $o(e,t,r,n)}function Ep(e,t,n){if(te(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");let r=Vo(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return $o(e,t,r,n)}function Tp(e,t,n){if(te(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");let r=Vo(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return $o(e,t,r,n)}function Ip(e,t,n){if(te(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");let r=Vo(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return $o(e,t,r,n)}function Pp(e,t,n){if(te(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");let r=Vo(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return $o(e,t=t||r,r,n)}var Op={};function Np(e,t,n){let r=t.rank>1?t.shape[t.rank-1]:1,i=t.rank>1?t.rank-1:1,o=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${t.shape}, shape: ${e}, sliceDim: ${r}, and batchDim: ${i}.`;if(n.rank<i)throw new Error(o+` update.rank < ${i}. `);if(e.length<r+(n.rank-i))throw new Error(o+" Output shape length < "+(r+(n.rank-i)));if(n.rank!==i+e.length-r)throw new Error(o+" update.rank != "+(i+e.length-r));for(let e=0;e<i;++e)if(n.shape[e]!==t.shape[e])throw new Error(o+` updates.shape[${e}] (${n.shape[e]}) != indices.shape[${e}] (${t.shape[e]}).`);for(let t=0;t<n.rank-i;++t)if(n.shape[t+i]!==e[t+r])throw new Error(o+` updates.shape[${t+i}] (${n.shape[t+i]}) != shape[${t+i}] (${e[t+i]})`)}function Rp(e,t,n){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${e.rank}.`);if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(0===e.size)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}Np(n,t,e)}function Ap(e,t,n){let r=t.shape.length,i=r>1?t.shape[r-1]:1,o=n.length,a=1;for(let e=i;e<o;++e)a*=n[e];let s=i<1?1:i;return{sliceRank:i,numUpdates:ne(t.shape)/s,sliceSize:a,strides:[...Ie(n.slice(0,i)),1],outputSize:ne(n)}}b(Op,{calculateShapes:()=>Ap,validateInput:()=>Rp,validateUpdateShape:()=>Np});var Dp=jo({tensorScatterUpdate_:function(e,t,n){let r=Fo(e,"tensor","tensorScatterupdate"),i=Fo(t,"indices","tensorScatterupdate","int32"),o=Fo(n,"updates","tensorScatterupdate");if(Rp(o,i,r.shape),r.dtype!==o.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${o.dtype}.`);let a={tensor:r,indices:i,updates:o};return To.runKernel(xr,a,{})}});var Vp=jo({topk_:function(e,t=1,n=!0){let r=Fo(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");let i=r.shape[r.shape.length-1];if(t<0)throw new Error("'k' passed to topk() must be >= 0 but got "+t);if(t>i)throw new Error(`'k' passed to topk() must be <= the last dimension (${i}) but got ${t}`);let o={x:r},a={k:t,sorted:n},[s,l]=To.runKernel(Xr,o,a);return{values:s,indices:l}}});var Mp=jo({truncatedNormal_:function(e,t=0,n=1,r,i){if(De(e),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");let o=new Lc(t,n,r,!0,i),a=za(e,r);for(let e=0;e<a.values.length;e++)a.values[e]=o.nextValue();return a.toTensor()}});var Fp=jo({unique_:function(e,t=0){let n=Fo(e,"x","unique","string_or_numeric");Z(n.rank>0,()=>"The input tensor must be at least 1D");let r={x:n},i={axis:t},[o,a]=To.runKernel(ei,r,i);return{values:o,indices:a}}});var Lp=jo({unsortedSegmentSum_:function(e,t,n){let r=Fo(e,"x","unsortedSegmentSum"),i=Fo(t,"segmentIds","unsortedSegmentSum","int32");Z(ae(n),()=>"numSegments must be of dtype int");let o={x:r,segmentIds:i},a={numSegments:n};return To.runKernel(ni,o,a)}});var zp=jo({unstack_:function(e,t=0){let n=Fo(e,"x","unstack","string_or_numeric");Z(t>=-n.shape.length&&t<n.shape.length,()=>`Axis = ${t} is not in [-${n.shape.length}, ${n.shape.length})`);let r={value:n},i={axis:t};return To.runKernel(ti,r,i)}});function jp(e,t){return Uu(e,t,"right")}function qp(e,t=!0,n,r){return To.makeVariable(e,t,n,r)}function $p(e,t){let n=[];for(let e=0;e<t.length;e++)t[e]&&n.push(e);let r=za(e,"int32"),i=za([n.length,e.length],"int32");for(let t=0;t<n.length;t++){let o=r.indexToLoc(n[t]),a=t*e.length;i.values.set(o,a)}return i.toTensor()}var Bp=async function(e){let t=Fo(e,"condition","whereAsync","bool"),n=await t.data(),r=$p(t.shape,n);return e!==t&&t.dispose(),r};var Up=async function(e,t,n){let r=Fo(e,"tensor","boolMask"),i=Fo(t,"mask","boolMask","bool"),o=null==n?0:n,a=i.rank,s=r.shape;Z(a>0,()=>"mask cannot be scalar"),ee(s.slice(o,o+a),i.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let e=o;e<o+a;e++)l*=s[e];let u=s.slice(0,o).concat([l],s.slice(o+a)),c=$s(r,u),p=$s(i,[-1]),d=await Bp(p),h=bp(d,[1]),f=du(c,h,o);return e!==r&&r.dispose(),t!==i&&i.dispose(),h.dispose(),c.dispose(),p.dispose(),d.dispose(),f};var Wp=jo({transpose_:function(e,t,n){let r=Fo(e,"x","transpose");if(null==t&&(t=r.shape.map((e,t)=>t).reverse()),Z(r.rank===t.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${t}.`),t.forEach(e=>{Z(e>=0&&e<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${t}`)}),r.rank<=1)return r.clone();let i={x:r},o={perm:t};return"complex64"===r.dtype?Xa(()=>{let e=Wc(r),t=mu(r);return e=To.runKernel(Zr,{x:e},o),t=To.runKernel(Zr,{x:t},o),n&&(t=Au(t)),qo(e,t)}):To.runKernel(Zr,i,o)}});var Hp=jo({movingAverage_:function(e,t,n,r,i=!0){let o=Fo(e,"v","movingAverage"),a=Fo(t,"x","movingAverage"),s=Fo(n,"decay","movingAverage");xo(o,a),Z(oe(o.shape,a.shape),()=>"Shape mismatch in v and x");let l=eu(1),u=Mu(l,s),c=hs(Mu(a,o),u);if(i){Z(null!=r,()=>"When using zeroDebias: true, step is required.");let e=Fo(r,"step","movingAverage");c=ds(c,Mu(l,Zl(s,e)))}return cs(o,c)}});var Qp=jo({scatterND_:function(e,t,n){De(n);let r=Fo(e,"indices","scatterND","int32"),i=Fo(t,"updates","scatterND");Rp(i,r,n);let o={indices:r,updates:i},a={shape:n};return To.runKernel(br,o,a)}});var Gp=jo({sparseToDense_:function(e,t,n,r=0){De(n);let i=Fo(e,"sparseIndices","sparseToDense","int32"),o=Fo(t,"sparseValues","sparseToDense","string_or_numeric"),a=Fo(r,"defaultValue","sparseToDense",o.dtype);!function(e,t,n,r){if("int32"!==e.dtype)throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${e.shape}.`);let i=e.rank>0?e.shape[0]:1,o=e.rank>1?e.shape[1]:1;if(n.length!==o)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${o}.`);let a=t.size;if(0!==t.rank&&(1!==t.rank||a!==i))throw new Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${i}]`);if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,o,n,a);let s={sparseIndices:i,sparseValues:o,defaultValue:a},l={outputShape:n};return To.runKernel(zr,s,l)}});var Kp=jo({gatherND_:function(e,t){let n=Fo(t,"indices","gatherND","int32"),r={params:Fo(e,"x","gatherND","string_or_numeric"),indices:n};return To.runKernel(an,r)}});var Jp=jo({dropout_:function(e,t,n,r){let i=Fo(e,"x","dropout");if(Z("float32"===i.dtype,()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${i.dtype} tensor instead.`),Z(t>=0&&t<1,()=>`rate must be a float in the range [0, 1), but got ${t}.`),0===t)return e instanceof ro?i.clone():i;let o=function(e,t){if(null==t)return e.shape.slice();if(oe(e.shape,t))return t;if(e.shape.length===t.length){let n=[];for(let r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(i,n),a=1-t,s=ds(pu(cs($c(o,0,1,"float32",r),a)),a);return hs(i,s)}});function Xp(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function Yp(e,t,n){let r=1-e%2,i=new Float32Array(e);for(let o=0;o<e;++o){let a=2*Math.PI*o/(e+r-1);i[o]=t-n*Math.cos(a)}return Sp(i,"float32")}var Zp=async function(e,t,n=1){let r=Fo(e,"predictions","inTopK"),i=Fo(t,"targets","inTopK");Z(r.rank>1,()=>"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank),Z(r.rank-1===i.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${i.rank}`),ee(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");let o=r.shape[r.shape.length-1];Z(n>0&&n<=o,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${o}), but got ${n}`);let a=await r.data(),s=await i.data(),[l,u]=[a.length/o,o],c=me("bool",l);for(let e=0;e<l;e++){let t=e*u,r=a.subarray(t,t+u),i=[];for(let e=0;e<r.length;e++)i.push({value:r[e],index:e});i.sort((e,t)=>t.value-e.value),c[e]=0;for(let t=0;t<n;t++)if(i[t].index===s[e]){c[e]=1;break}}return e!==r&&r.dispose(),t!==i&&i.dispose(),Bo(c,i.shape,"bool")},ed={};b(ed,{conv2d:()=>ad,depthwiseConv2d:()=>ud,matMul:()=>cd});var td=jo({conv2DBackpropFilter_:function(e,t,n,r,i,o="NHWC",a){let s=e;3===e.rank&&(s=$s(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=$s(t,[1,t.shape[0],t.shape[1],t.shape[2]])),Z(4===s.rank,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${s.shape}.`),Z(4===l.rank,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),Z(4===n.length,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);let u="NHWC"===o?s.shape[3]:s.shape[1],c="NHWC"===o?l.shape[3]:l.shape[1];Z(u===n[2],()=>`Error in conv2dDerFilter: depth of input ${u}) must match input depth in filter (${n[2]}.`),Z(c===n[3],()=>`Error in conv2dDerFilter: depth of dy (${c}) must match output depth for filter (${n[3]}).`),qs("conv2dDerFilter",i,a);let p={x:s,dy:l},d={strides:r,pad:i,dataFormat:o,dimRoundingMode:a,filterShape:n};return To.runKernel(Ct,p,d)}});function nd(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return hs(e,wp(t));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function rd(e,t){let n=t,r=Rl(e.shape,t.shape);return r.length>0&&(n=ru(n,r)),$s(n,e.shape)}function id(e,t,n,r){if("linear"===t)return e;if("relu"===t)return Qc(e);if("elu"===t)return jl(e);if("relu6"===t)return Gc(e);if("prelu"===t)return yc(e,n);if("leakyrelu"===t)return bu(e,r);if("sigmoid"===t)return Qs(e);throw new Error(`Unknown fused activation ${t}.`)}var od=(e,t)=>!(e>0)||"linear"===t;var ad=jo({fusedConv2d_:function({x:e,filter:t,strides:n,pad:r,dataFormat:i="NHWC",dilations:o=[1,1],dimRoundingMode:a,bias:s,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(l=l||"linear",!1===od(To.state.gradientDepth,l)){Z("NHWC"===i,()=>`Error in fused conv2d: got dataFormat of ${i} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let p=fl(e,t,n,r,i,o,a);return null!=s&&(p=cs(p,s)),id(p,l,u,c)}let p=Fo(e,"x","conv2d","float32"),d=Fo(t,"filter","conv2d","float32"),h=p,f=!1;3===p.rank&&(f=!0,h=$s(p,[1,p.shape[0],p.shape[1],p.shape[2]])),Z(4===h.rank,()=>`Error in fused conv2d: input must be rank 4, but got rank ${h.rank}.`),Z(4===d.rank,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${d.rank}.`),qs("fused conv2d",r,a);let m="NHWC"===i?h.shape[3]:h.shape[1];Z(d.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${d.shape[2]}.`),Z(Ls(n,o),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let g,y,v=Os(h.shape,d.shape,n,o,r,a);if(null!=s&&(g=Fo(s,"bias","fused conv2d"),[g]=bo(g,p),"NHWC"===i?Al(v.outShape,g.shape):(Z(g.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${g.shape.length}.`),Z(0===g.shape.length||g.shape[0]===v.outChannels||1===g.shape[0],()=>`Error in fused conv2d: bias shape (${g.shape}) is not compatible with the number of output channels (${v.outChannels})`))),null!=u){let e=u.shape;if(Z(e.length<=1||3===e.length,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${e.length}.`),1===e.length)Z(1===e[0]||e[0]===v.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${e}) is not compatible with the number of output channels (${v.outChannels}).`);else if(3===e.length)try{Al(e,v.outShape)}catch(t){let n=`Error in fused conv2d: PReLU activation weights (${e}) is not compatible with the output shape of the conv2d (${v.outShape}).`;throw Error(n)}y=Fo(u,"prelu weights","fused conv2d")}let b=(e,t)=>{Z("NHWC"===i,()=>`Error in gradient of fused conv2D: got dataFormat of ${i} but only NHWC is currently supported.`);let[a,s,u,c]=t,p=nd(e,u,l);Z(Fs(o),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`);let d=[gl(s.shape,p,a,n,r),td(s,p,a.shape,n,r)];if(null!=c){let e=rd(c,p);d.push(e)}return d},x={x:h,filter:d,bias:g,preluActivationWeights:y},w={strides:n,pad:r,dataFormat:i,dilations:o,dimRoundingMode:a,activation:l,leakyreluAlpha:c};return null==s?Nu((e,t,n)=>{let r=To.runKernel(ui,x,w);return n([t,e,r]),f&&(r=$s(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:b}})(h,d):Nu((e,t,n,r)=>{let i=To.runKernel(ui,x,w);return r([t,e,i,n]),f&&(i=$s(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:b}})(h,d,g)}});var sd=jo({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,i,o=[1,1],a){let s=e;3===e.rank&&(s=$s(e,[1,e.shape[0],e.shape[1],e.shape[2]]));let l=t;3===l.rank&&(l=$s(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u={x:s,dy:l},c={strides:r,pad:i,dimRoundingMode:a,dilations:o,filterShape:n};return To.runKernel(Mt,u,c)}});var ld=jo({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,i,o=[1,1],a){let s=t,l=!1;3===t.rank&&(l=!0,s=$s(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let u={dy:s,filter:n},c={strides:r,pad:i,dimRoundingMode:a,dilations:o,inputShape:e},p=To.runKernel(Ft,u,c);return l?$s(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});var ud=jo({fusedDepthwiseConv2d_:function({x:e,filter:t,strides:n,pad:r,dataFormat:i="NHWC",dilations:o=[1,1],dimRoundingMode:a,bias:s,activation:l="linear",preluActivationWeights:u,leakyreluAlpha:c}){if(!1===od(To.state.gradientDepth,l)){let p=Tl(e,t,n,r,i,o,a);return null!=s&&(p=cs(p,s)),id(p,l,u,c)}let p=Fo(e,"x","depthwiseConv2d","float32"),d=Fo(t,"filter","depthwiseConv2d","float32"),h=p,f=!1;3===p.rank&&(f=!0,h=$s(p,[1,p.shape[0],p.shape[1],p.shape[2]])),Z(4===h.rank,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${h.rank}.`),Z(4===d.rank,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${d.rank}.`),Z(h.shape[3]===d.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${h.shape[3]}) must match the inChannels dimension in filter ${d.shape[2]}.`),null==o&&(o=[1,1]),Z(Ls(n,o),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),qs("fused depthwiseConv2d",r,a);let m,g,y=Os(h.shape,d.shape,n,o,r,a,!0);null!=s&&(m=Fo(s,"bias","fused conv2d"),[m]=bo(m,p),Al(y.outShape,m.shape)),null!=u&&(g=Fo(u,"prelu weights","fused depthwiseConv2d"));let v=(e,t)=>{Z(Fs(o),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);let[i,s,u,c]=t,p=nd(e,u,l),d=ld(s.shape,p,i,n,r,o,a),h=sd(s,p,i.shape,n,r,o,a);if(null!=c){return[d,h,rd(m,p)]}return[d,h]},b={x:h,filter:d,bias:m,preluActivationWeights:g},x={strides:n,pad:r,dataFormat:i,dilations:o,dimRoundingMode:a,activation:l,leakyreluAlpha:c};return null==s?Nu((e,t,n)=>{let r=To.runKernel(ci,b,x);return n([t,e,r]),f&&(r=$s(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:v}})(h,d):Nu((e,t,n,r)=>{let i=To.runKernel(ci,b,x);return r([t,e,i,n]),f&&(i=$s(i,[i.shape[1],i.shape[2],i.shape[3]])),{value:i,gradFunc:v}})(h,d,m)}});var cd=jo({fusedMatMul_:function({a:e,b:t,transposeA:n=!1,transposeB:r=!1,bias:i,activation:o="linear",preluActivationWeights:a,leakyreluAlpha:s=.2}){if(!1===od(To.state.gradientDepth,o)){let l=Hs(e,t,n,r);return null!=i&&(l=cs(l,i)),id(l,o,a,s)}let l=Fo(e,"a","fused matMul"),u=Fo(t,"b","fused matMul");[l,u]=bo(l,u);let c=n?l.shape[l.rank-2]:l.shape[l.rank-1],p=r?u.shape[u.rank-1]:u.shape[u.rank-2],d=n?l.shape[l.rank-1]:l.shape[l.rank-2],h=r?u.shape[u.rank-2]:u.shape[u.rank-1],f=l.shape.slice(0,-2),m=u.shape.slice(0,-2),g=ne(f),y=ne(m);Z(c===p,()=>`Error in fused matMul: inner shapes (${c}) and (${p}) of Tensors with shapes ${l.shape} and ${u.shape} and transposeA=${n} and transposeB=${r} must match.`);let v,b,x=Al(l.shape.slice(0,-2),u.shape.slice(0,-2)).concat([d,h]),w=$s(l,n?[g,c,d]:[g,d,c]),_=$s(u,r?[y,h,p]:[y,p,h]);null!=i&&(v=Fo(i,"bias","fused matMul"),[v]=bo(v,l),Al(x,v.shape)),null!=a&&(b=Fo(a,"prelu weights","fused matMul"));let C=(e,t)=>{let a,s,[l,u,c,p]=t,d=nd($s(e,c.shape),c,o);if(n||r?!n&&r?(a=Hs(d,u,!1,!1),s=Hs(d,l,!0,!1)):n&&!r?(a=Hs(u,d,!1,!0),s=Hs(l,d,!1,!1)):(a=Hs(u,d,!0,!0),s=Hs(d,l,!0,!0)):(a=Hs(d,u,!1,!0),s=Hs(l,d,!0,!1)),null!=i){return[a,s,rd(p,d)]}return[a,s]},S={a:w,b:_,bias:v,preluActivationWeights:b},k={transposeA:n,transposeB:r,activation:o,leakyreluAlpha:s};return null==i?Nu((e,t,n)=>{let r=To.runKernel(li,S,k);return n([e,t,r]),{value:$s(r,x),gradFunc:C}})(w,_):Nu((e,t,n,r)=>{let i=To.runKernel(li,S,k);return r([e,t,i,n]),{value:$s(i,x),gradFunc:C}})(w,_,v)}});var pd=jo({hammingWindow_:function(e){return Yp(e,.54,.46)}});var dd=jo({hannWindow_:function(e){return Yp(e,.5,.5)}});var hd=jo({frame_:function(e,t,n,r=!1,i=0){let o=0,a=[];for(;o+t<=e.size;)a.push(Gs(e,o,t)),o+=n;if(r)for(;o<e.size;){let r=o+t-e.size,s=Ws([Gs(e,o,t-r),ll([r],i)]);a.push(s),o+=n}return 0===a.length?kp([],[0,t]):$s(Ws(a),[a.length,t])}});var fd=jo({stft_:function(e,t,n,r,i=dd){null==r&&(r=Xp(t));let o=hd(e,t,n),a=hs(o,i(t));return yp(a,r)}});var md=jo({cropAndResize_:function(e,t,n,r,i="bilinear",o=0){let a=Fo(e,"image","cropAndResize"),s=Fo(t,"boxes","cropAndResize","float32"),l=Fo(n,"boxInd","cropAndResize","int32"),u=s.shape[0];Z(4===a.rank,()=>`Error in cropAndResize: image must be rank 4,but got rank ${a.rank}.`),Z(2===s.rank&&4===s.shape[1],()=>`Error in cropAndResize: boxes must be have size [${u},4] but had shape ${s.shape}.`),Z(1===l.rank&&l.shape[0]===u,()=>`Error in cropAndResize: boxInd must be have size [${u}] but had shape ${s.shape}.`),Z(2===r.length,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),Z(r[0]>=1&&r[1]>=1,()=>"cropSize must be atleast [1,1], but was "+r),Z("bilinear"===i||"nearest"===i,()=>"method must be bilinear or nearest, but was "+i);let c={image:a,boxes:s,boxInd:l},p={method:i,extrapolationValue:o,cropSize:r};return To.runKernel(Rt,c,p)}});var gd=jo({flipLeftRight_:function(e){let t=Fo(e,"image","flipLeftRight","float32");Z(4===t.rank,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`);let n={image:t};return To.runKernel(en,n,{})}});var yd=jo({grayscaleToRGB_:function(e){let t=Fo(e,"image","grayscaleToRGB"),n=t.rank-1,r=t.shape[n];Z(t.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`),Z(1===r,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);let i=new Array(t.rank);return i.fill(1,0,n),i[n]=3,uu(t,i)}});var vd=jo({rotateWithOffset_:function(e,t,n=0,r=.5){let i=Fo(e,"image","rotateWithOffset","float32");Z(4===i.rank,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${i.rank}.`);let o={image:i},a={radians:t,fillValue:n,center:r};return To.runKernel(si,o,a)}});function bd(e,t,n,r,i,o){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY),null==o&&(o=0);let a=e.shape[0];return n=Math.min(n,a),Z(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),Z(2===e.rank,()=>`boxes must be a 2D tensor, but was of rank '${e.rank}'`),Z(4===e.shape[1],()=>"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]),Z(1===t.rank,()=>"scores must be a 1D tensor"),Z(t.shape[0]===a,()=>`scores has incompatible shape with boxes. Expected ${a}, but was ${t.shape[0]}`),Z(0<=o&&o<=1,()=>`softNmsSigma must be in [0, 1], but was '${o}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i,softNmsSigma:o}}var xd=jo({nonMaxSuppression_:function(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY){let o=Fo(e,"boxes","nonMaxSuppression","float32"),a=Fo(t,"scores","nonMaxSuppression","float32"),s=bd(o,a,n,r,i),l={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:i=s.scoreThreshold};return To.runKernel(Hn,{boxes:o,scores:a},l)}});function wd(e,t,n){let r=function(e,t,n){return function(e,t,n){let r=0,i=e.length,o=0,a=!1;for(;r<i;){o=r+(i-r>>>1);let s=n(t,e[o]);s>0?r=o+1:(i=o,a=!s)}return a?r:-r-1}(e,t,n||_d)}(e,t,n),i=r<0?-(r+1):r;e.splice(i,0,t)}function _d(e,t){return e>t?1:e<t?-1:0}function Cd(e,t,n,r,i){return Ed(e,t,n,r,i,0)}function Sd(e,t,n,r,i,o){return Ed(e,t,n,r,i,0,!1,o,!0)}function kd(e,t,n,r,i,o){return Ed(e,t,n,r,i,o,!0)}function Ed(e,t,n,r,i,o,a=!1,s=!1,l=!1){let u=[];for(let e=0;e<t.length;e++)t[e]>i&&u.push({score:t[e],boxIndex:e,suppressBeginIndex:0});u.sort(Pd);let c=o>0?-.5/o:0,p=[],d=[];for(;p.length<n&&u.length>0;){let t=u.pop(),{score:n,boxIndex:o,suppressBeginIndex:a}=t;if(n<i)break;let s=!1;for(let n=p.length-1;n>=a;--n){let a=Td(e,o,p[n]);if(a>=r){s=!0;break}if(t.score=t.score*Id(r,c,a),t.score<=i)break}t.suppressBeginIndex=p.length,s||(t.score===n?(p.push(o),d.push(t.score)):t.score>i&&wd(u,t,Pd))}let h=p.length,f=n-h;s&&f>0&&(p.push(...new Array(f).fill(0)),d.push(...new Array(f).fill(0)));let m={selectedIndices:p};return a&&(m.selectedScores=d),l&&(m.validOutputs=h),m}function Td(e,t,n){let r=e.subarray(4*t,4*t+4),i=e.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),p=Math.max(i[0],i[2]),d=Math.max(i[1],i[3]),h=(s-o)*(l-a),f=(p-u)*(d-c);if(h<=0||f<=0)return 0;let m=Math.max(o,u),g=Math.max(a,c),y=Math.min(s,p),v=Math.min(l,d),b=Math.max(y-m,0)*Math.max(v-g,0);return b/(h+f-b)}function Id(e,t,n){let r=Math.exp(t*n*n);return n<=e?r:0}function Pd(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}var Od=async function(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY){let o=Fo(e,"boxes","nonMaxSuppressionAsync"),a=Fo(t,"scores","nonMaxSuppressionAsync"),s=bd(o,a,n,r,i);n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold;let l=await Promise.all([o.data(),a.data()]),u=l[0],c=l[1],{selectedIndices:p}=Cd(u,c,n,r,i);return o!==e&&o.dispose(),a!==t&&a.dispose(),Sp(p,"int32")};var Nd=jo({nonMaxSuppressionWithScore_:function(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,o=0){let a=Fo(e,"boxes","nonMaxSuppression"),s=Fo(t,"scores","nonMaxSuppression"),l=bd(a,s,n,r,i,o),u={boxes:a,scores:s},c={maxOutputSize:n=l.maxOutputSize,iouThreshold:r=l.iouThreshold,scoreThreshold:i=l.scoreThreshold,softNmsSigma:o=l.softNmsSigma},p=To.runKernel(Gn,u,c);return{selectedIndices:p[0],selectedScores:p[1]}}});var Rd=async function(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,o=0){let a=Fo(e,"boxes","nonMaxSuppressionAsync"),s=Fo(t,"scores","nonMaxSuppressionAsync"),l=bd(a,s,n,r,i,o);n=l.maxOutputSize,r=l.iouThreshold,i=l.scoreThreshold,o=l.softNmsSigma;let u=await Promise.all([a.data(),s.data()]),c=u[0],p=u[1],{selectedIndices:d,selectedScores:h}=kd(c,p,n,r,i,o);return a!==e&&a.dispose(),s!==t&&s.dispose(),{selectedIndices:Sp(d,"int32"),selectedScores:Sp(h)}};var Ad=jo({nonMaxSuppressionPadded_:function(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,o=!1){let a=Fo(e,"boxes","nonMaxSuppression"),s=Fo(t,"scores","nonMaxSuppression"),l=bd(a,s,n,r,i,null),u={boxes:a,scores:s},c={maxOutputSize:l.maxOutputSize,iouThreshold:l.iouThreshold,scoreThreshold:l.scoreThreshold,padToMaxOutputSize:o},p=To.runKernel(Qn,u,c);return{selectedIndices:p[0],validOutputs:p[1]}}});var Dd=async function(e,t,n,r=.5,i=Number.NEGATIVE_INFINITY,o=!1){let a=Fo(e,"boxes","nonMaxSuppressionAsync"),s=Fo(t,"scores","nonMaxSuppressionAsync"),l=bd(a,s,n,r,i,null),u=l.maxOutputSize,c=l.iouThreshold,p=l.scoreThreshold,[d,h]=await Promise.all([a.data(),s.data()]),{selectedIndices:f,validOutputs:m}=Sd(d,h,u,c,p,o);return a!==e&&a.dispose(),s!==t&&s.dispose(),{selectedIndices:Sp(f,"int32"),validOutputs:eu(m,"int32")}};var Vd=jo({resizeBilinear_:function(e,t,n=!1,r=!1){let i=Fo(e,"images","resizeBilinear");Z(3===i.rank||4===i.rank,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${i.rank}.`),Z(2===t.length,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`),Z(!1===r||!1===n,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let o=i,a=!1;3===i.rank&&(a=!0,o=$s(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let[]=t,s={images:o},l={alignCorners:n,halfPixelCenters:r,size:t},u=To.runKernel(hr,s,l);return a?$s(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});var Md=jo({resizeNearestNeighbor_:function(e,t,n=!1,r=!1){let i=Fo(e,"images","resizeNearestNeighbor");Z(3===i.rank||4===i.rank,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${i.rank}.`),Z(2===t.length,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`),Z("float32"===i.dtype||"int32"===i.dtype,()=>"`images` must have `int32` or `float32` as dtype"),Z(!1===r||!1===n,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let o=i,a=!1;3===i.rank&&(a=!0,o=$s(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let[]=t,s={images:o},l={alignCorners:n,halfPixelCenters:r,size:t},u=To.runKernel(pr,s,l);return a?$s(u,[u.shape[1],u.shape[2],u.shape[3]]):u}});var Fd=jo({threshold_:function(e,t="binary",n=!1,r=.5){let i,o,a,s,l=Fo(e,"image","threshold"),u=l.shape[0]*l.shape[1],c=hs(Sp([r]),255);if(Z(3===l.rank,()=>`Error in threshold: image must be rank 3,but got rank ${l.rank}.`),Z(3===l.shape[2]||1===l.shape[2],()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${l.shape[2]}.`),Z("int32"===l.dtype||"float32"===l.dtype,()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${l.dtype}.`),Z("otsu"===t||"binary"===t,()=>"Method must be binary or otsu, but was "+t),3===l.shape[2]){[i,o,a]=gp(l,[1,1,1],-1);let e=hs(i,.2989),t=hs(o,.587),n=hs(a,.114);s=cs(cs(e,t),n)}else s=e;if("otsu"===t){c=function(e,t){let n,r,i,o,a,s,l=Sp([-1]),u=Sp([0]),c=Sp([0]);for(let p=0;p<e.size-1;p++){n=Gs(e,0,p+1),r=Gs(e,p+1),a=ds(ru(n),t),s=ds(ru(r),t);let d=ru(hs(n,Uc(0,n.size)));i=ds(d,ru(n));let h=ll(r.shape,n.size),f=cs(Uc(0,r.size),h),m=hs(r,f);o=ds(ru(m),ru(r));let g=Mu(i,o),y=Mu(i,o),v=hs(a,s);c=hs(hs(v,g),y);let b=hu(c,u);u=Vl(b,c,u),l=Vl(b,Sp([p]),l)}return l}(rl(ja(ep(s),"int32"),Bo([]),256),u)}let p=n?wu(s,c):hu(s,c);return ja(hs(p,255),"int32")}});var Ld=jo({transform_:function(e,t,n="nearest",r="constant",i=0,o){let a=Fo(e,"image","transform","float32"),s=Fo(t,"transforms","transform","float32");Z(4===a.rank,()=>`Error in transform: image must be rank 4,but got rank ${a.rank}.`),Z(2===s.rank&&(s.shape[0]===a.shape[0]||1===s.shape[0])&&8===s.shape[1],()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),Z(null==o||2===o.length,()=>`Error in transform: outputShape must be [height, width] or null, but got ${o}.`);let l={image:a,transforms:s},u={interpolation:n,fillMode:r,fillValue:i,outputShape:o};return To.runKernel(Yr,l,u)}});var zd=jo({bandPart_:function(e,t,n){let r=Fo(e,"a","bandPart");Z(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);let i,o,a=r.shape,[s,l]=r.shape.slice(-2);"number"==typeof t?(Z(t%1==0,()=>`bandPart(): numLower must be an integer, got ${t}.`),Z(t<=s,()=>`bandPart(): numLower (${t}) must not be greater than the number of rows (${s}).`),i=Fo(t<0?s:t,"numLower","bandPart")):(Z("int32"===t.dtype,()=>"bandPart(): numLower's dtype must be an int32."),i=Vl(xu(t,0),s,ec(t,s))),"number"==typeof n?(Z(n%1==0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),Z(n<=l,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${l}).`),o=Fo(n<0?l:n,"numUpper","bandPart")):(Z("int32"===n.dtype,()=>"bandPart(): numUpper's dtype must be an int32."),o=Vl(xu(n,0),l,ec(n,l)));let u=$s(Uc(0,s,1,"int32"),[-1,1]),c=Uc(0,l,1,"int32"),p=Mu(u,c),d=zu(wu(p,i),fu(p,Au(o))),h=Xu([s,l],r.dtype);return $s(xp(zp($s(r,[-1,s,l])).map(e=>Vl(d,e,h))),a)}});var jd=jo({gramSchmidt_:function(e){let t;if(Array.isArray(e)){t=!1,Z(null!=e&&e.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let n=e[0].shape[0];for(let t=1;t<e.length;++t)Z(e[t].shape[0]===n,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${e[t].shape[0]} vs. ${n})`)}else t=!0,e=gp(e,e.shape[0],0).map(e=>bp(e,[0]));Z(e.length<=e[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${e.length}) exceeds number of dimensions (${e[0].shape[0]}).`);let n=[],r=e;for(let t=0;t<e.length;++t)n.push(To.tidy(()=>{let e=r[t];if(t>0)for(let r=0;r<t;++r){let t=hs(ru(hs(n[r],e)),n[r]);e=Mu(e,t)}return ds(e,iu(e,"euclidean"))}));return t?xp(n,0):n}});function qd(e,t=!1){return To.tidy(()=>{Z(2===e.shape.length,()=>`qr2d() requires a 2D Tensor, but got a ${e.shape.length}D Tensor.`);let n=e.shape[0],r=e.shape[1],i=cu(n),o=qa(e),a=kp([[1]],[1,1]),s=qa(a),l=n>=r?r:n;for(let e=0;e<l;++e){let t=o,l=s,u=i;[s,o,i]=To.tidy(()=>{let t=Gs(o,[e,e],[n-e,1]),l=iu(t),u=Gs(o,[e,e],[1,1]),c=Vl(hu(u,0),kp([[-1]]),kp([[1]])),p=Mu(u,hs(c,l)),d=ds(t,p);s=1===d.shape[0]?qa(a):Ws([a,Gs(d,[1,0],[d.shape[0]-1,d.shape[1]])],0);let h=Au(ds(Hs(c,p),l)),f=Gs(o,[e,0],[n-e,r]),m=hs(h,s),g=Wp(s);if(0===e)o=Mu(f,Hs(m,Hs(g,f)));else{let t=Mu(f,Hs(m,Hs(g,f)));o=Ws([Gs(o,[0,0],[e,r]),t],0)}let y=Wp(m),v=Gs(i,[0,e],[n,i.shape[1]-e]);if(0===e)i=Mu(v,Hs(Hs(v,s),y));else{let t=Mu(v,Hs(Hs(v,s),y));i=Ws([Gs(i,[0,0],[n,e]),t],1)}return[s,o,i]}),Ya([t,l,u])}return!t&&n>r&&(i=Gs(i,[0,0],[n,r]),o=Gs(o,[0,0],[r,r])),[i,o]})}var $d,Bd=jo({qr_:function(e,t=!1){if(Z(e.rank>=2,()=>"qr() requires input tensor to have a rank >= 2, but got rank "+e.rank),2===e.rank)return qd(e,t);{let n=e.shape.slice(0,e.shape.length-2).reduce((e,t)=>e*t),r=zp($s(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),i=[],o=[];return r.forEach(e=>{let[n,r]=qd(e,t);i.push(n),o.push(r)}),[$s(xp(i,0),e.shape),$s(xp(o,0),e.shape)]}}});!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}($d||($d={}));var Ud=jo({computeWeightedLoss_:function(e,t,n=$d.SUM_BY_NONZERO_WEIGHTS){let r=Fo(e,"losses","computeWeightedLoss"),i=null;null!=t&&(i=Fo(t,"weights","computeWeightedLoss"));let o=null==i?r:hs(r,i);if(n===$d.NONE)return o;if(n===$d.SUM)return ru(o);if(n===$d.MEAN){if(null==i)return Ju(o);{let e=r.size/i.size,t=ds(ru(o),ru(i));return e>1?ds(t,eu(e)):t}}if(n===$d.SUM_BY_NONZERO_WEIGHTS){if(null==i)return ds(ru(o),eu(r.size));{let e=hs(i,Yu(r.shape)),t=ja(ru(ac(e,eu(0))),"float32");return ds(ru(o),t)}}throw Error("Unknown reduction: "+n)}});var Wd=jo({absoluteDifference_:function(e,t,n,r=$d.SUM_BY_NONZERO_WEIGHTS){let i=Fo(e,"labels","absoluteDifference"),o=Fo(t,"predictions","absoluteDifference"),a=null;null!=n&&(a=Fo(n,"weights","absoluteDifference")),ee(i.shape,o.shape,"Error in absoluteDifference: ");let s=fs(Mu(i,o));return Ud(s,a,r)}});var Hd=jo({cosineDistance_:function(e,t,n,r,i=$d.SUM_BY_NONZERO_WEIGHTS){let o=Fo(e,"labels","cosineDistance"),a=Fo(t,"predictions","cosineDistance"),s=null;null!=r&&(s=Fo(r,"weights","cosineDistance")),ee(o.shape,a.shape,"Error in cosineDistance: ");let l=eu(1),u=Mu(l,ru(hs(o,a),n,!0));return Ud(u,s,i)}});var Qd=jo({hingeLoss_:function(e,t,n,r=$d.SUM_BY_NONZERO_WEIGHTS){let i=Fo(e,"labels","hingeLoss"),o=Fo(t,"predictions","hingeLoss"),a=null;null!=n&&(a=Fo(n,"weights","hingeLoss")),ee(i.shape,o.shape,"Error in hingeLoss: ");let s=eu(1);i=Mu(hs(eu(2),i),s);let l=Qc(Mu(s,hs(i,o)));return Ud(l,a,r)}});var Gd=jo({huberLoss_:function(e,t,n,r=1,i=$d.SUM_BY_NONZERO_WEIGHTS){let o=Fo(e,"labels","huberLoss"),a=Fo(t,"predictions","huberLoss"),s=null;null!=n&&(s=Fo(n,"weights","huberLoss")),ee(o.shape,a.shape,"Error in huberLoss: ");let l=eu(r),u=fs(Mu(a,o)),c=ec(u,l),p=Mu(u,c),d=cs(hs(eu(.5),nu(c)),hs(l,p));return Ud(d,s,i)}});var Kd=jo({logLoss_:function(e,t,n,r=1e-7,i=$d.SUM_BY_NONZERO_WEIGHTS){let o=Fo(e,"labels","logLoss"),a=Fo(t,"predictions","logLoss"),s=null;null!=n&&(s=Fo(n,"weights","logLoss")),ee(o.shape,a.shape,"Error in logLoss: ");let l=eu(1),u=eu(r),c=Au(hs(o,Su(cs(a,u)))),p=hs(Mu(l,o),Su(cs(Mu(l,a),u))),d=Mu(c,p);return Ud(d,s,i)}});var Jd=jo({meanSquaredError_:function(e,t,n,r=$d.SUM_BY_NONZERO_WEIGHTS){let i=Fo(e,"labels","meanSquaredError"),o=Fo(t,"predictions","meanSquaredError"),a=null;null!=n&&(a=Fo(n,"weights","meanSquaredError")),ee(i.shape,o.shape,"Error in meanSquaredError: ");let s=vp(i,o);return Ud(s,a,r)}});var Xd=jo({sigmoidCrossEntropy_:function(e,t,n,r=0,i=$d.SUM_BY_NONZERO_WEIGHTS){let o=Fo(e,"multiClassLabels","sigmoidCrossEntropy"),a=Fo(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=Fo(n,"weights","sigmoidCrossEntropy")),ee(o.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){let e=eu(r),t=eu(1),n=eu(.5);o=cs(hs(o,Mu(t,e)),hs(n,e))}let l=function(e,t){let n=Fo(e,"labels","sigmoidCrossEntropyWithLogits"),r=Fo(t,"logits","sigmoidCrossEntropyWithLogits");ee(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");let i=Qc(r),o=hs(r,n),a=ku(au(Au(fs(r))));return cs(Mu(i,o),a)}(o,a);return Ud(l,s,i)}});var Yd=jo({softmaxCrossEntropy_:function(e,t,n,r=0,i=$d.SUM_BY_NONZERO_WEIGHTS){let o=Fo(e,"onehotLabels","softmaxCrossEntropy"),a=Fo(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=Fo(n,"weights","softmaxCrossEntropy")),ee(o.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){let e=eu(r),t=eu(1),n=eu(o.shape[1]);o=cs(hs(o,Mu(t,e)),ds(e,n))}let l=function(e,t,n=-1){if(-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${n}`);return Nu((e,t,r)=>{let i=Lu(t,[n],!0),o=Mu(ja(t,"float32"),i);r([e,o]);let a=Au(hs(o,e));return{value:ru(a,[n]),gradFunc:(e,t)=>{let[r,i]=t,o=Hl(e.shape,[n]);return[hs($s(e,o),Mu(ja(r,"float32"),au(i))),hs($s(e,o),Mu(au(i),ja(r,"float32")))]}}})(e,t)}(o,a);return Ud(l,s,i)}});var Zd=jo({sparseFillEmptyRows_:function(e,t,n,r){let i=Fo(e,"indices","sparseFillEmptyRows","int32"),o=Fo(t,"values","sparseFillEmptyRows"),a=Fo(n,"denseShape","sparseFillEmptyRows","int32"),s=Fo(r,"defaultValue","sparseFillEmptyRows",o.dtype);if(2!==i.rank)throw new Error("Indices should be Tensor2D but received shape\n        "+i.shape);if(1!==o.rank)throw new Error("Values should be Tensor1D but received shape "+o.shape);if(1!==a.rank)throw new Error("Dense shape should be Tensor1D but received shape "+a.shape);if(0!==s.rank)throw new Error("Default value should be a scalar but received shape "+s.shape);let l={indices:i,values:o,denseShape:a,defaultValue:s},u=To.runKernel(Vr,l);return{outputIndices:u[0],outputValues:u[1],emptyRowIndicator:u[2],reverseIndexMap:u[3]}}});var eh=jo({sparseReshape_:function(e,t,n){let r=Fo(e,"inputIndices","sparseReshape","int32"),i=Fo(t,"inputShape","sparseReshape","int32"),o=Fo(n,"newShape","sparseReshape","int32");if(2!==r.rank)throw new Error("Input indices should be Tensor2D but received shape\n        "+r.shape);if(1!==i.rank)throw new Error("Input shape should be Tensor1D but received shape "+i.shape);if(1!==o.rank)throw new Error("New shape should be Tensor1D but received shape "+o.shape);let a={inputIndices:r,inputShape:i,newShape:o},s=To.runKernel(Mr,a);return{outputIndices:s[0],outputShape:s[1]}}});var th=jo({sparseSegmentMean_:function(e,t,n){let r=Fo(e,"data","sparseSegmentMean"),i=Fo(t,"indices","sparseSegmentMean","int32"),o=Fo(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.rank)throw new Error("Indices should be Tensor1D but received shape\n          "+i.shape);if(1!==o.rank)throw new Error("Segment ids should be Tensor1D but received shape\n          "+o.shape);let a={data:r,indices:i,segmentIds:o};return To.runKernel(Fr,a)}});var nh=jo({sparseSegmentSum_:function(e,t,n){let r=Fo(e,"data","sparseSegmentSum"),i=Fo(t,"indices","sparseSegmentSum","int32"),o=Fo(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.rank)throw new Error("Indices should be Tensor1D but received shape\n         "+i.shape);if(1!==o.rank)throw new Error("Segment ids should be Tensor1D but received shape\n         "+o.shape);let a={data:r,indices:i,segmentIds:o};return To.runKernel(Lr,a)}});var rh=jo({stringNGrams_:function(e,t,n,r,i,o,a,s){let l=Fo(e,"data","stringNGrams","string");if("string"!==l.dtype)throw new Error("Data must be of datatype string");if(1!==l.shape.length)throw new Error("Data must be a vector, saw: "+l.shape);let u=Fo(t,"dataSplits","stringNGrams");if("int32"!==u.dtype)throw new Error("Data splits must be of datatype int32");let c={separator:n,nGramWidths:r,leftPad:i,rightPad:o,padWidth:a,preserveShortSequences:s},p={data:l,dataSplits:u},d=To.runKernel(Ur,p,c);return{nGrams:d[0],nGramsSplits:d[1]}}});var ih=jo({stringSplit_:function(e,t,n=!0){let r=Fo(e,"input","stringSplit","string"),i=Fo(t,"delimiter","stringSplit","string");if(1!==r.rank)throw new Error("Input should be Tensor1D but received shape "+r.shape);if(0!==i.rank)throw new Error("Delimiter should be a scalar but received shape "+i.shape);let o={skipEmpty:n},a={input:r,delimiter:i},s=To.runKernel(Wr,a,o);return{indices:s[0],values:s[1],shape:s[2]}}});var oh=jo({stringToHashBucketFast_:function(e,t){let n=Fo(e,"input","stringToHashBucketFast","string"),r={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");let i={input:n};return To.runKernel(Hr,i,r)}});var ah=jo({staticRegexReplace_:function(e,t,n,r=!0){let i=Fo(e,"input","staticRegexReplace","string"),o={pattern:t,rewrite:n,replaceGlobal:r};return To.runKernel($r,{x:i},o)}}),sh={fft:hp,ifft:fp,rfft:yp,irfft:mp},lh={hammingWindow:pd,hannWindow:dd,frame:hd,stft:fd},uh={flipLeftRight:gd,grayscaleToRGB:yd,resizeNearestNeighbor:Md,resizeBilinear:Vd,rotateWithOffset:vd,cropAndResize:md,nonMaxSuppression:xd,nonMaxSuppressionAsync:Od,nonMaxSuppressionWithScore:Nd,nonMaxSuppressionWithScoreAsync:Rd,nonMaxSuppressionPadded:Ad,nonMaxSuppressionPaddedAsync:Dd,threshold:Fd,transform:Ld},ch={bandPart:zd,gramSchmidt:jd,qr:Bd},ph={absoluteDifference:Wd,computeWeightedLoss:Ud,cosineDistance:Hd,hingeLoss:Qd,huberLoss:Gd,logLoss:Kd,meanSquaredError:Jd,sigmoidCrossEntropy:Xd,softmaxCrossEntropy:Yd},dh={sparseFillEmptyRows:Zd,sparseReshape:eh,sparseSegmentMean:th,sparseSegmentSum:nh},hh={stringNGrams:rh,stringSplit:ih,stringToHashBucketFast:oh,staticRegexReplace:ah},fh={};b(fh,{Serializable:()=>mh,SerializationMap:()=>gh,registerClass:()=>yh});var mh=class{getClassName(){return this.constructor.className}static fromConfig(e,t){return new e(t)}},gh=class{constructor(){this.classNameMap={}}static getMap(){return null==gh.instance&&(gh.instance=new gh),gh.instance}static register(e){gh.getMap().classNameMap[e.className]=[e,e.fromConfig]}};function yh(e){Z(null!=e.className,()=>"Class being registered does not have the static className property defined."),Z("string"==typeof e.className,()=>"className is required to be a string, but got type "+typeof e.className),Z(e.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),gh.register(e)}var vh=class extends mh{minimize(e,t=!1,n){let{value:r,grads:i}=this.computeGradients(e,n);if(null!=n){let e=n.map(e=>({name:e.name,tensor:i[e.name]}));this.applyGradients(e)}else this.applyGradients(i);return Ya(i),t?r:(r.dispose(),null)}get iterations(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,t){return Ou(e,t)}dispose(){null!=this.iterations_&&Ya(this.iterations_)}async saveIterations(){return null==this.iterations_&&(this.iterations_=0),{name:"iter",tensor:eu(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}};Object.defineProperty(vh,Symbol.hasInstance,{value:e=>null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients});var bh=class extends vh{static get className(){return"Adadelta"}constructor(e,t,n=null){super(),this.learningRate=e,this.rho=t,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],null==n&&(this.epsilon=To.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{let r=To.registeredVariables[t];null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:t+"/accum_grad",variable:Xa(()=>Ml(r).variable(!1))}),null==this.accumulatedUpdates[n]&&(this.accumulatedUpdates[n]={originalName:t+"/accum_var",variable:Xa(()=>Ml(r).variable(!1))});let i=Array.isArray(e)?e[n].tensor:e[t];if(null==i)return;let o=this.accumulatedGrads[n].variable,a=this.accumulatedUpdates[n].variable;Xa(()=>{let e=cs(hs(o,this.rho),hs(nu(i),1-this.rho)),t=hs(ds(tu(cs(a,this.epsilon)),tu(cs(o,this.epsilon))),i),n=cs(hs(a,this.rho),hs(nu(t),1-this.rho));o.assign(e),a.assign(n);let s=cs(hs(t,-this.learningRate),r);r.assign(s)})}),this.incrementIterations()}dispose(){null!=this.accumulatedUpdates&&(Ya(this.accumulatedGrads.map(e=>e.variable)),Ya(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){let e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){let t=(e=await this.extractIterations(e)).length/2;this.accumulatedGrads=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedUpdates=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.rho,t.epsilon)}},xh=class extends vh{static get className(){return"Adagrad"}constructor(e,t=.1){super(),this.learningRate=e,this.initialAccumulatorValue=t,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{let r=To.registeredVariables[t];null==this.accumulatedGrads[n]&&(this.accumulatedGrads[n]={originalName:t+"/accumulator",variable:Xa(()=>ll(r.shape,this.initialAccumulatorValue).variable(!1))});let i=Array.isArray(e)?e[n].tensor:e[t];if(null==i)return;let o=this.accumulatedGrads[n].variable;Xa(()=>{let e=cs(o,nu(i));o.assign(e);let t=cs(hs(ds(i,tu(cs(e,To.backend.epsilon()))),-this.learningRate),r);r.assign(t)})}),this.incrementIterations()}dispose(){null!=this.accumulatedGrads&&Ya(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);this.accumulatedGrads=e.map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,t){return new e(t.learningRate,t.initialAccumulatorValue)}},wh=class extends vh{static get className(){return"Adam"}constructor(e,t,n,r=null){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Xa(()=>{this.accBeta1=eu(t).variable(),this.accBeta2=eu(n).variable()}),null==r&&(this.epsilon=To.backend.epsilon())}applyGradients(e){let t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);Xa(()=>{let n=Mu(1,this.accBeta1),r=Mu(1,this.accBeta2);t.forEach((t,i)=>{let o=To.registeredVariables[t];null==this.accumulatedFirstMoment[i]&&(this.accumulatedFirstMoment[i]={originalName:t+"/m",variable:Xa(()=>Ml(o).variable(!1))}),null==this.accumulatedSecondMoment[i]&&(this.accumulatedSecondMoment[i]={originalName:t+"/v",variable:Xa(()=>Ml(o).variable(!1))});let a=Array.isArray(e)?e[i].tensor:e[t];if(null==a)return;let s=this.accumulatedFirstMoment[i].variable,l=this.accumulatedSecondMoment[i].variable,u=cs(hs(s,this.beta1),hs(a,1-this.beta1)),c=cs(hs(l,this.beta2),hs(nu(a),1-this.beta2)),p=ds(u,n),d=ds(c,r);s.assign(u),l.assign(c);let h=cs(hs(ds(p,cs(tu(d),this.epsilon)),-this.learningRate),o);o.assign(h)}),this.accBeta1.assign(hs(this.accBeta1,this.beta1)),this.accBeta2.assign(hs(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&Ya(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedSecondMoment&&Ya(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e),Xa(()=>{this.accBeta1.assign(Zl(this.beta1,this.iterations_+1)),this.accBeta2.assign(Zl(this.beta2,this.iterations_+1))});let t=e.length/2;this.accumulatedFirstMoment=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedSecondMoment=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)}},_h=class extends vh{static get className(){return"Adamax"}constructor(e,t,n,r=null,i=0){super(),this.learningRate=e,this.beta1=t,this.beta2=n,this.epsilon=r,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Xa(()=>{this.iteration=eu(0).variable(),this.accBeta1=eu(t).variable()}),null==r&&(this.epsilon=To.backend.epsilon())}applyGradients(e){let t=Array.isArray(e)?e.map(e=>e.name):Object.keys(e);Xa(()=>{let n=Mu(1,this.accBeta1),r=ds(-this.learningRate,cs(hs(this.iteration,this.decay),1));t.forEach((t,i)=>{let o=To.registeredVariables[t];null==this.accumulatedFirstMoment[i]&&(this.accumulatedFirstMoment[i]={originalName:t+"/m",variable:Ml(o).variable(!1)}),null==this.accumulatedWeightedInfNorm[i]&&(this.accumulatedWeightedInfNorm[i]={originalName:t+"/v",variable:Ml(o).variable(!1)});let a=Array.isArray(e)?e[i].tensor:e[t];if(null==a)return;let s=this.accumulatedFirstMoment[i].variable,l=this.accumulatedWeightedInfNorm[i].variable,u=cs(hs(s,this.beta1),hs(a,1-this.beta1)),c=hs(l,this.beta2),p=fs(a),d=Ku(c,p);s.assign(u),l.assign(d);let h=cs(hs(ds(r,n),ds(u,cs(d,this.epsilon))),o);o.assign(h)}),this.iteration.assign(cs(this.iteration,1)),this.accBeta1.assign(hs(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&Ya(this.accumulatedFirstMoment.map(e=>e.variable)),null!=this.accumulatedWeightedInfNorm&&Ya(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)}},Ch=class extends vh{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{let r=Array.isArray(e)?e[n].tensor:e[t];if(null==r)return;let i=To.registeredVariables[t];Xa(()=>{let e=cs(hs(this.c,r),i);i.assign(e)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=Za(eu(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(0!==(e=await this.extractIterations(e)).length)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,t){return new e(t.learningRate)}},Sh=class extends Ch{static get className(){return"Momentum"}constructor(e,t,n=!1){super(e),this.learningRate=e,this.momentum=t,this.useNesterov=n,this.accumulations=[],this.m=eu(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{let r=To.registeredVariables[t];null==this.accumulations[n]&&(this.accumulations[n]={originalName:t+"/momentum",variable:Xa(()=>Ml(r).variable(!1))});let i=this.accumulations[n].variable,o=Array.isArray(e)?e[n].tensor:e[t];null!=o&&Xa(()=>{let e,t=cs(hs(this.m,i),o);e=this.useNesterov?cs(hs(this.c,cs(o,hs(t,this.m))),r):cs(hs(this.c,t),r),i.assign(t),r.assign(e)})}),this.incrementIterations()}dispose(){this.m.dispose(),null!=this.accumulations&&Ya(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);this.accumulations=e.map(e=>({originalName:e.name,variable:e.tensor.variable(!1)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)}},kh=class extends vh{static get className(){return"RMSProp"}constructor(e,t=.9,n=0,r=null,i=!1){if(super(),this.learningRate=e,this.decay=t,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,null==r&&(this.epsilon=To.backend.epsilon()),null==e)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(e=>e.name):Object.keys(e)).forEach((t,n)=>{let r=To.registeredVariables[t];null==this.accumulatedMeanSquares[n]&&(this.accumulatedMeanSquares[n]={originalName:t+"/rms",variable:Xa(()=>Ml(r).variable(!1))}),null==this.accumulatedMoments[n]&&(this.accumulatedMoments[n]={originalName:t+"/momentum",variable:Xa(()=>Ml(r).variable(!1))}),null==this.accumulatedMeanGrads[n]&&this.centered&&(this.accumulatedMeanGrads[n]={originalName:t+"/mg",variable:Xa(()=>Ml(r).variable(!1))});let i=Array.isArray(e)?e[n].tensor:e[t];if(null==i)return;let o=this.accumulatedMeanSquares[n].variable,a=this.accumulatedMoments[n].variable;Xa(()=>{let e=cs(hs(o,this.decay),hs(nu(i),1-this.decay));if(this.centered){let t=this.accumulatedMeanGrads[n].variable,s=cs(hs(t,this.decay),hs(i,1-this.decay)),l=ds(hs(i,this.learningRate),tu(Mu(e,cs(nu(s),this.epsilon)))),u=cs(hs(a,this.momentum),l);o.assign(e),t.assign(s),a.assign(u);let c=Mu(r,u);r.assign(c)}else{let e=cs(hs(o,this.decay),hs(nu(i),1-this.decay)),t=cs(hs(a,this.momentum),ds(hs(i,this.learningRate),tu(cs(e,this.epsilon))));o.assign(e),a.assign(t);let n=Mu(r,t);r.assign(n)}})}),this.incrementIterations()}dispose(){null!=this.accumulatedMeanSquares&&Ya(this.accumulatedMeanSquares.map(e=>e.variable)),null!=this.accumulatedMeanGrads&&this.centered&&Ya(this.accumulatedMeanGrads.map(e=>e.variable)),null!=this.accumulatedMoments&&Ya(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){let e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);let t=this.centered?e.length/3:e.length/2;this.accumulatedMeanSquares=e.slice(0,t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.accumulatedMoments=e.slice(t,2*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map(e=>({originalName:e.name,variable:e.tensor.variable(!1)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)}},Eh=[bh,xh,wh,_h,Sh,kh,Ch];var Th={};b(Th,{CompositeArrayBuffer:()=>Wo,browserFiles:()=>Oh,browserHTTPRequest:()=>zh,concatenateArrayBuffers:()=>Xo,copyModel:()=>Va,decodeWeights:()=>Qo,encodeWeights:()=>Ho,fromMemory:()=>Bh,fromMemorySync:()=>Uh,getLoadHandlers:()=>ua,getModelArtifactsForJSON:()=>ta,getModelArtifactsForJSONSync:()=>ea,getModelArtifactsInfoForJSON:()=>na,getSaveHandlers:()=>la,getWeightSpecs:()=>ra,http:()=>Lh,isHTTPScheme:()=>Mh,listModels:()=>Aa,loadWeights:()=>Ah,moveModel:()=>Ma,registerLoadRouter:()=>sa,registerSaveRouter:()=>aa,removeModel:()=>Da,weightsLoaderFactory:()=>Dh,withSaveHandler:()=>Wh,withSaveHandlerSync:()=>Hh});function Ih(e){return new Promise(e=>setTimeout(e)).then(e)}var Ph=class{constructor(e){if(!qe().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(Ph.URL_SCHEME)&&(e=e.slice(Ph.URL_SCHEME.length)),(null==e||0===e.length)&&(e="model"),this.modelJsonFileName=e+".json",this.weightDataFileName=e+".weights.bin"}async save(e){if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");let t=Wo.join(e.weightData),n=window.URL.createObjectURL(new Blob([t],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let t=Zo(e,[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}]),r=window.URL.createObjectURL(new Blob([JSON.stringify(t)],{type:"application/json"})),i=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(i.download=this.modelJsonFileName,i.href=r,await Ih(()=>i.dispatchEvent(new MouseEvent("click"))),null!=e.weightData){let e=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;e.download=this.weightDataFileName,e.href=n,await Ih(()=>e.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:na(e)}}}};Ph.URL_SCHEME="downloads://";function Oh(e){return new class{constructor(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,t)=>{let n=new FileReader;n.onload=n=>{let r=JSON.parse(n.target.result),i=r.modelTopology;if(null==i)return void t(new Error("modelTopology field is missing from file "+this.jsonFile.name));if(null==r.weightsManifest)return void t(new Error("weightManifest field is missing from file "+this.jsonFile.name));if(0===this.weightsFiles.length)return void e({modelTopology:i});let o=ta(r,e=>this.loadWeights(e));e(o)},n.onerror=e=>t(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),n.readAsText(this.jsonFile)})}loadWeights(e){let t=[],n=[];for(let r of e)t.push(...r.weights),n.push(...r.paths);let r=this.checkManifestAndWeightFiles(e),i=n.map(e=>this.loadWeightsFile(e,r[e]));return Promise.all(i).then(e=>[t,e])}loadWeightsFile(e,t){return new Promise((n,r)=>{let i=new FileReader;i.onload=e=>{let t=e.target.result;n(t)},i.onerror=t=>r(`Failed to weights data from file of path '${e}'.`),i.readAsArrayBuffer(t)})}checkManifestAndWeightFiles(e){let t=[],n=this.weightsFiles.map(e=>Yo(e.name)),r={};for(let i of e)i.paths.forEach(e=>{let i=Yo(e);if(-1!==t.indexOf(i))throw new Error(`Duplicate file basename found in weights manifest: '${i}'`);if(t.push(i),-1===n.indexOf(i))throw new Error(`Weight file with basename '${i}' is not provided.`);r[e]=this.weightsFiles[n.indexOf(i)]});if(t.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${t.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return r}}(e)}function Nh(e,t,n,r){var i;Z(null!=(i=e)&&Array.isArray(i)&&i.length>0,()=>"promises must be a none empty array"),function(e,t){Z(e>=0&&e<=1,()=>"Progress fraction must be in range [0, 1], but got startFraction "+e),Z(t>=0&&t<=1,()=>"Progress fraction must be in range [0, 1], but got endFraction "+t),Z(t>=e,()=>`startFraction must be no more than endFraction, but got startFraction ${e} and endFraction ${t}`)}(n=null==n?0:n,r=null==r?1:r);let o=0;return Promise.all(e.map(i=>(i.then(i=>{let a=n+ ++o/e.length*(r-n);return t(a),i}),i)))}async function Rh(e,t){null==t&&(t={});let n=null==t.fetchFunc?qe().platform.fetch:t.fetchFunc,r=e.map(e=>n(e,t.requestInit,{isBinary:!0})),i=(null==t.onProgress?await Promise.all(r):await Nh(r,t.onProgress,0,.5)).map(e=>e.arrayBuffer());return null==t.onProgress?await Promise.all(i):await Nh(i,t.onProgress,.5,1)}async function Ah(e,t="",n,r){return Dh(e=>Rh(e,{requestInit:r}))(e,t,n)}function Dh(e){return async(t,n="",r)=>{let i=t.map(()=>!1),o={},a=null!=r?r.map(()=>!1):[],s=[];if(t.forEach((e,t)=>{let n=0;e.weights.forEach(e=>{let l="quantization"in e?e.quantization.dtype:e.dtype,u=Uo[l]*ne(e.shape),c=()=>{i[t]=!0,null==o[t]&&(o[t]=[]),o[t].push({manifestEntry:e,groupOffset:n,sizeBytes:u})};null!=r?r.forEach((t,n)=>{t===e.name&&(c(),a[n]=!0)}):c(),s.push(e.name),n+=u})}),!a.every(e=>e)){let e=r.filter((e,t)=>!a[t]);throw new Error(`Could not find weights in manifest with names: ${e.join(", ")}. \nManifest JSON has weights with names: ${s.join(", ")}.`)}let l=i.reduce((e,t,n)=>(t&&e.push(n),e),[]),u=[];l.forEach(e=>{t[e].paths.forEach(e=>{let t=n+(n.endsWith("/")?"":"/")+e;u.push(t)})});let c=await e(u),p={},d=0;return l.forEach(e=>{let n=t[e].paths.length,r=new Wo(c.slice(d,d+n));o[e].forEach(e=>{let t=Qo(r.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(let e in t)p[e]=t[e]}),d+=n}),p}}oa.registerSaveRouter(e=>qe().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Ph.URL_SCHEME)?function(e="model"){return new Ph(e)}(e.slice(Ph.URL_SCHEME.length)):null);var Vh=class{constructor(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(Z("function"==typeof t.fetchFunc,()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=t.fetchFunc):this.fetch=qe().platform.fetch,Z(null!=e&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&Z(2===e.length,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);t.body=new FormData;let n=Zo(e,[{paths:["./model.weights.bin"],weights:e.weightSpecs}]);if(t.body.append("model.json",new Blob([JSON.stringify(n)],{type:"application/json"}),"model.json"),null!=e.weightData){let n=Wo.join(e.weightData);t.body.append("model.weights.bin",new Blob([n],{type:"application/octet-stream"}),"model.weights.bin")}let r=await this.fetch(this.path,t);if(r.ok)return{modelArtifactsInfo:na(e),responses:[r]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${r.status}.`)}async load(){let e,t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw new Error(`Request to ${this.path} failed with status code ${t.status}. Please verify this URL points to the model JSON of the model to load.`);try{e=await t.json()}catch(e){let t=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?t+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":t+=" Please make sure the server is serving valid JSON for this request.",new Error(t)}let n=e.modelTopology,r=e.weightsManifest;if(null==n&&null==r)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return ta(e,e=>this.loadWeights(e))}async loadWeights(e){let t=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(e){let t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),i=n>t?e.substring(n):"";return[r+"/",i]}(t),i=this.weightPathPrefix||n,o=ra(e),a=[],s=[];for(let t of e)for(let e of t.paths)null!=this.weightUrlConverter?s.push(this.weightUrlConverter(e)):a.push(i+e+r);return this.weightUrlConverter&&a.push(...await Promise.all(s)),[o,await Rh(a,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})]}};function Mh(e){return null!=e.match(Vh.URL_SCHEME_REGEX)}Vh.URL_SCHEME_REGEX=/^https?:\/\//;var Fh=(e,t)=>{if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc))return null;{let n=!0;if(n=Array.isArray(e)?e.every(e=>Mh(e)):Mh(e),n)return Lh(e,t)}return null};function Lh(e,t){return new Vh(e,t)}function zh(e,t){return Lh(e,t)}oa.registerSaveRouter(Fh),oa.registerLoadRouter(Fh);var jh=class{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}},qh=class{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}},$h=class{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=t=>Promise.resolve(e.save(t)))}};function Bh(e,t,n,r){let i=arguments;return new $h(Uh(...i))}function Uh(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new jh(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new jh({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new jh({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))}function Wh(e){return new qh(e)}function Hh(e){return new qh(e)}var Qh={};b(Qh,{confusionMatrix:()=>Gh});var Gh=jo({confusionMatrix_:function(e,t,n){let r=Fo(e,"labels","confusionMatrix"),i=Fo(t,"predictions","confusionMatrix");Z(null==n||n>0&&Number.isInteger(n),()=>"If provided, numClasses must be a positive integer, but got "+n),Z(1===r.rank,()=>"Expected the rank of labels to be 1, but got "+r.rank),Z(1===i.rank,()=>"Expected the rank of predictions to be 1, but got "+i.rank),Z(r.shape[0]===i.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${i.shape[0]}. Labels and predictions should have the same number of elements.`),Z(n>0&&Number.isInteger(n),()=>"numClasses is required to be a positive integer, but got "+n);let o=sc(ja(r,"int32"),n),a=sc(ja(i,"int32"),n),s=Wp(o),l=Hs(s,a);return ja(l,"int32")}}),Kh={};b(Kh,{draw:()=>rf,fromPixels:()=>of,fromPixelsAsync:()=>ef,toPixels:()=>nf});var Jh,Xh=!1;function Yh(e,t=3){if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,i=!1,o=!1,a=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)i=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)o=!0;else if(null!=e.getContext)a=!0;else{if(!("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);s=!0}if(null!=mi(ai,To.backendName)){let n={pixels:e},r={numChannels:t};return To.runKernel(ai,n,r)}let l,u,[c,p]=i?[e.videoWidth,e.videoHeight]:[e.width,e.height];if(a)l=e.getContext("2d").getImageData(0,0,c,p).data;else if(r||n)l=e.data;else if(o||i||s){if(null==Jh)if("undefined"==typeof document){if("undefined"==typeof OffscreenCanvas||"undefined"==typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");Jh=new OffscreenCanvas(1,1).getContext("2d")}else Jh=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Jh.canvas.width=c,Jh.canvas.height=p,Jh.drawImage(e,0,0,c,p),l=Jh.getImageData(0,0,c,p).data}if(4===t)u=new Int32Array(l);else{let e=c*p;u=new Int32Array(e*t);for(let n=0;n<e;n++)for(let e=0;e<t;++e)u[n*t+e]=l[4*n+e]}return Ep(u,[p,c,t],"int32")}function Zh(e){return"undefined"!=typeof window&&"undefined"!=typeof ImageBitmap&&window.hasOwnProperty("createImageBitmap")&&!(e instanceof ImageBitmap)&&function(e){return null!=e&&0!==e.width&&0!==e.height}(e)&&!function(e){return null!=e&&e.data instanceof Uint8Array}(e)}async function ef(e,t=3){let n=null;if(qe().getBool("WRAP_TO_IMAGEBITMAP")&&Zh(e)){let t;try{t=await createImageBitmap(e,{premultiplyAlpha:"none"})}catch(e){t=null}n=null!=t&&t.width===e.width&&t.height===e.height?t:e}else n=e;return Yh(n,t)}function tf(e){if(2!==e.rank&&3!==e.rank)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${e.rank}.`);let t=2===e.rank?1:e.shape[2];if(t>4||2===t)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+t);if("float32"!==e.dtype&&"int32"!==e.dtype)throw new Error(`Unsupported type for toPixels: ${e.dtype}. Please use float32 or int32 tensors.`)}async function nf(e,t){let n=Fo(e,"img","toPixels");if(!(e instanceof ro)){let e=n;n=ja(e,"int32"),e.dispose()}tf(n);let[r,i]=n.shape.slice(0,2),o=2===n.rank?1:n.shape[2],a=await n.data(),s="float32"===n.dtype?255:1,l=new Uint8ClampedArray(i*r*4);for(let e=0;e<r*i;++e){let t=[0,0,0,255];for(let r=0;r<o;r++){let i=a[e*o+r];if("float32"===n.dtype){if(i<0||i>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${i}.`)}else if("int32"===n.dtype&&(i<0||i>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${i}.`);1===o?(t[0]=i*s,t[1]=i*s,t[2]=i*s):t[r]=i*s}let r=4*e;l[r+0]=Math.round(t[0]),l[r+1]=Math.round(t[1]),l[r+2]=Math.round(t[2]),l[r+3]=Math.round(t[3])}if(null!=t){Xh||(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),Xh=!0),t.width=i,t.height=r;let e=t.getContext("2d"),n=new ImageData(l,i,r);e.putImageData(n,0,0)}return n!==e&&n.dispose(),l}function rf(e,t,n){let r=Fo(e,"img","draw");if(!(e instanceof ro)){let e=r;r=ja(e,"int32"),e.dispose()}tf(r),function(e){let t=(null==e?void 0:e.alpha)||1;if(t>1||t<0)throw new Error(`Alpha value ${t} is suppoed to be in range [0 - 1].`)}(null==n?void 0:n.imageOptions);let i={image:r},o={canvas:t,options:n};To.runKernel($t,i,o)}var of=jo({fromPixels_:Yh}),af={};function sf(e,t){let n=e.shape.length,r=t.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if("int32"!==t.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[r-1]} vs. ${n}`);if(0===ne(e.shape))throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${e.shape}.`);let i=t.shape,o=i[i.length-1],a=1;for(let e=0;e<i.length-1;++e)a*=i[e];let s=e.shape,l=i.slice();l.pop();let u=1;for(let e=o;e<n;++e)u*=s[e],l.push(s[e]);let c=[...Ie(e.shape).map(e=>e/u),1].slice(0,o);return[l,a,u,c]}b(af,{prepareAndValidate:()=>sf});var lf={};b(lf,{assertParamsValid:()=>uf,computeFlatOffset:()=>_f,computeOutShape:()=>pf,getNormalizedAxes:()=>mf,isSliceContinous:()=>wf,maskToAxes:()=>cf,parseSliceParams:()=>Cf,sliceInfo:()=>Sf,startForAxis:()=>bf,startIndicesWithElidedDims:()=>gf,stopForAxis:()=>xf,stopIndicesWithElidedDims:()=>yf,stridesForAxis:()=>vf,stridesWithElidedDims:()=>df});function uf(e,t,n){let r=e.shape.length;Z(r===t.length,()=>`Error in slice${r}D: Length of begin ${t} must match the rank of the array (${r}).`),Z(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let i=0;i<r;++i)Z(t[i]+n[i]<=e.shape[i],()=>`Error in slice${r}D: begin[${i}] + size[${i}] (${t[i]+n[i]}) would overflow input.shape[${i}] (${e.shape[i]})`)}function cf(e){let t=[],n=0;for(;e>0;)1&e&&t.push(n),e/=2,n++;return t}function pf(e,t,n){let r=[];for(let i=0;i<e.length;i++)r[i]=Math.ceil((t[i]-e[i])/n[i]);return r}function df(e,t,n,r){let i=[...e];for(let e=i.length;e<r.length;e++)i.push(1);for(let e=0;e<n;e++)0===e?i[t]=1:(i.splice(t,0,1),i.pop());return i}function hf(e,t,n){return n<=e?n:n-(t-1)}function ff(e,t){let n=[];for(let r=0;r<e;r++)n.push(t+r);return n}function mf(e,t,n,r,i,o,a,s,l){let u=e.length,c=new Array(u),p=new Array(u),d=new Array(u);if(t.length&&n>0){let l=t[0],u=n+1;c=gf(a,l,u,r,e),p=yf(s,l,u,i,e),d=df(o,l,u,e)}else for(let t=0;t<u;t++)c[t]=bf(a,r,o,e,t,l),p[t]=xf(s,i,o,e,t,l),d[t]=vf(o,t,l);return{begin:c,end:p,strides:d}}function gf(e,t,n,r,i){let o=[...i],a=ff(n,t);for(let i=0;i<o.length;i++)if(a.indexOf(i)>-1)o[i]=0;else{let a=hf(t,n,i),s=r[a];e&1<<a&&(s=0),o[i]=s}return o}function yf(e,t,n,r,i){let o=[...i],a=ff(n,t);for(let i=0;i<o.length;i++)if(a.indexOf(i)>-1)o[i]=Number.MAX_SAFE_INTEGER;else{let a=hf(t,n,i),s=r[a];e&1<<a&&(s=Number.MAX_SAFE_INTEGER),o[i]=s}for(let e=0;e<o.length;e++){let t=i[e];o[e]<0&&(o[e]+=t),o[e]=Q(0,o[e],i[e])}return o}function vf(e,t,n){let r=e[t];return(n&1<<t||null==r)&&(r=1),r}function bf(e,t,n,r,i,o){let a=t[i],s=n[i]||1;(e&1<<i||o&1<<i||null==a)&&(a=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);let l=r[i];return a<0&&(a+=l),a=Q(0,a,l-1),a}function xf(e,t,n,r,i,o){let a=t[i],s=n[i]||1;(e&1<<i||o&1<<i||null==a)&&(a=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);let l=r[i];return a<0&&(a+=l),a=s>0?Q(0,a,l):Q(-1,a,l-1),a}function wf(e,t,n){let r=n.length;for(let e=0;e<n.length;e++)if(n[e]>1){r=e;break}for(let i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function _f(e,t){let n=e.length>0?e[e.length-1]:1;for(let r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function Cf(e,t,n){let r,i,o=e.shape.length;return r="number"==typeof t?[t,...new Array(o-1).fill(0)]:t.length<o?t.concat(new Array(o-t.length).fill(0)):t.slice(),r.forEach(e=>{Z(-1!==e,()=>"slice() does not support negative begin indexing.")}),i=null==n?new Array(o).fill(-1):"number"==typeof n?[n,...new Array(o-1).fill(-1)]:n.length<o?n.concat(new Array(o-n.length).fill(-1)):n,i=i.map((t,n)=>t>=0?t:(Z(-1===t,()=>`Negative size values should be exactly -1 but got ${t} for the slice() size at index ${n}.`),e.shape[n]-r[n])),[r,i]}function Sf(e,t,n,r,i,o,a,s,l){let u;if(null==r?(u=new Array(t.length),u.fill(1)):u=r,null!=a&&a&a-1)throw new Error("Multiple ellipses in slice is not allowed.");let c=!1,p={dims:u.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:n.slice(),strides:u.slice(),beginMask:i,endMask:o,ellipsisMask:a,newAxisMask:s,shrinkAxisMask:l};for(let e=0;e<p.dims;e++)c&&1<<e&s&&p.numAddAxisAfterEllipsis++,1<<e&a&&(c=!0);c||(p.ellipsisMask|=1<<p.dims,p.dims++);let d={dims:e.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(e,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let n=0;t.beginValid=null!=e.begin,t.endValid=null!=e.end,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let r=0;r<e.dims;r++)if(1<<r&e.ellipsisMask){let i=Math.min(t.dims-(e.dims-r)+1+e.numAddAxisAfterEllipsis,t.dims);for(;n<i;n++)t.begin[n]=0,t.end[n]=0,t.strides[n]=1,t.beginMask|=1<<n,t.endMask|=1<<n,t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&e.newAxisMask)t.finalShapeGatherIndices.push(-2),t.finalShapeGatherIndicesSparse.push(-1);else{if(n===t.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${t.dims} dims, ${t.begin.length}.`);null!=e.begin&&(t.begin[n]=e.begin[r]),null!=e.end&&(t.end[n]=e.end[r]),t.strides[n]=e.strides[r],e.beginMask&1<<r&&(t.beginMask|=1<<n),e.endMask&1<<r&&(t.endMask|=1<<n),e.shrinkAxisMask&1<<r?(t.finalShapeGatherIndices.push(-1),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<n):(t.finalShapeGatherIndices.push(n),t.finalShapeGatherIndicesSparse.push(r)),t.inputShapeGatherIndicesSparse[n]=r,n++}}(p,d);let h=!0,f=!0,m=!0,g=[],y=[];for(let t=0;t<e.length;++t){if(0===d.strides[t])throw Error(`strides[${t}] must be non-zero`);let n=!!(d.shrinkAxisMask&1<<t),r=e[t];if(-1===r){g.push(n?1:-1);continue}let i=[d.beginMask&1<<t,d.endMask&1<<t],o=[d.strides[t]>0?0:-1,d.strides[t]>0?r:r-1];if(n&&d.strides[t]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&1===d.strides[t];let a=!!(d.beginMask&1<<t&&d.endMask&1<<t);if(d.beginValid&&d.endValid){if(n){let e=d.begin[t]<0?r+d.begin[t]:d.begin[t];if(d.begin[t]=e,d.end[t]=d.begin[t]+1,e<0||e>=r)throw Error(`slice index ${d.begin[t]} of dimension ${t} out of bounds.`)}else d.begin[t]=kf(d.begin[t],0,d.strides[t],r,i,o),d.end[t]=kf(d.end[t],1,d.strides[t],r,i,o);let e=1===d.strides[t]&&0===d.begin[t]&&d.end[t]===r;h=h&&e,f=f&&(0===t&&1===d.strides[t]||e)}else h=h&&1===d.strides[t]&&a,f=f&&(0===t&&1===d.strides[t]||a);let s,l=!1;if(d.beginValid&&d.endValid?(s=d.end[t]-d.begin[t],l=!0):n?(s=1,l=!0):a&&r>=0&&(s=d.strides[t]<0?-r:r,l=!0),l){let e;e=0===s||s<0!=d.strides[t]<0?0:Math.trunc(s/d.strides[t])+(s%d.strides[t]!=0?1:0),g.push(e)}else g.push(-1)}for(let e=0;e<d.finalShapeGatherIndices.length;++e){let t=d.finalShapeGatherIndices[e];t>=0?y.push(g[t]):-2===t&&y.push(1)}return{finalShapeSparse:y.filter((e,t)=>-2!==d.finalShapeGatherIndices[t]),finalShape:y,isIdentity:h,sliceDim0:f,isSimpleSlice:m,begin:d.begin,end:d.end,strides:d.strides}}function kf(e,t,n,r,i,o){if(i[t])return n>0?o[t]:o[t+1&1];{let t=e<0?r+e:e;return t<o[0]?o[0]:t>o[1]?o[1]:t}}var Ef="4.7.0",Tf=class{static sgd(e){return new Ch(e)}static momentum(e,t,n=!1){return new Sh(e,t,n)}static rmsprop(e,t=.9,n=0,r=null,i=!1){return new kh(e,t,n,r,i)}static adam(e=.001,t=.9,n=.999,r=null){return new wh(e,t,n,r)}static adadelta(e=.001,t=.95,n=null){return new bh(e,t,n)}static adamax(e=.002,t=.9,n=.999,r=null,i=0){return new _h(e,t,n,r,i)}static adagrad(e,t=.1){return new xh(e,t)}},If=Tf,Pf="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:void 0!==s?s:e=>e();function Of(){return new Promise(e=>Pf(()=>e()))}var Nf,Rf={};function Af(e,t){let n=e[0].length;e.forEach((e,t)=>{Z(e.length===n,()=>`Error in concat${n}D: rank of tensors[${t}] must be the same as the rank of the rest (${n})`)}),Z(t>=0&&t<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);let r=e[0];e.forEach((e,i)=>{for(let o=0;o<n;o++)Z(o===t||e[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${i}] (${e}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function Df(e,t){let n=e[0].slice();for(let r=1;r<e.length;r++)n[t]+=e[r][t];return n}function Vf(e,t,n){let r=new Array;if(null==n&&null==t)return r;if(null==t)for(;r.length<e+n.length;)r.push(-1);else r=t.slice();if(null==n)return r;if(e+n.length!==r.length)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.rank = ${e+n.length}, but shape.rank = ${r.length}`);for(let i=1;i<n.length;++i){let o=n[i],a=r[r.length-n.length+i],s=r[a];if(o>=0)if(s>=0){if(s!==o)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.shape[${i+e}] = ${o} but shape[${i+e}] = ${s}`)}else r[a]=o}return r}function Mf(e){let t={FIRST_DIM_SIZE:Nf.FIRST_DIM_SIZE,VALUE_ROWIDS:Nf.VALUE_ROWIDS,ROW_LENGTHS:Nf.ROW_LENGTHS,ROW_SPLITS:Nf.ROW_SPLITS,ROW_LIMITS:Nf.ROW_LIMITS,ROW_STARTS:Nf.ROW_STARTS},n=[];for(let r of e){if(!(r in t))break;n.push(t[r])}return n}function Ff(e){return 0===e.length?0:e[0]===Nf.FIRST_DIM_SIZE?e.length-1:e.length}function Lf(e,t){if(null==e||null==t)return;let n=e.length,r=t.length;if(n>=r)throw new Error(`defaultValue.shape=${e} and ragged tensor flatValues.shape=${t}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let i=0;i<Math.min(n,r-1);++i){let n=e[i],r=t[i+1];if(n>=0&&r>=0&&1!==n&&n!==r)throw new Error(`defaultValue.shape=${e}, and ragged tensor input flatValues.shape=${t} are incompatible: defaultValue.shape[${i-e.length}] = ${n} but ragged tensor input.flatValues.shape[${i-e.length}] = ${r}`)}}b(Rf,{ERF_A1:()=>Jf,ERF_A2:()=>Xf,ERF_A3:()=>Yf,ERF_A4:()=>Zf,ERF_A5:()=>em,ERF_P:()=>Kf,PARALLELIZE_THRESHOLD:()=>zf,RowPartitionType:()=>Nf,SELU_SCALE:()=>Gf,SELU_SCALEALPHA:()=>Qf,applyActivation:()=>id,assertAndGetBroadcastShape:()=>Al,assertAxesAreInnerMostDims:()=>Ql,assertParamsConsistent:()=>Af,assignToTypedArray:()=>am,axesAreInnerMostDims:()=>Bl,calculateShapes:()=>Ap,checkEinsumDimSizes:()=>dm,checkPadOnDimRoundingMode:()=>qs,combineLocations:()=>Ul,combineRaggedTensorToTensorShapes:()=>Vf,complexWithEvenIndex:()=>rm,complexWithOddIndex:()=>im,computeConv2DInfo:()=>Os,computeConv3DInfo:()=>Ns,computeDefaultPad:()=>Rs,computeDilation2DInfo:()=>Ts,computeOptimalWindowSize:()=>jf,computeOutAndReduceShapes:()=>Wl,computeOutShape:()=>Df,computePool2DInfo:()=>Is,computePool3DInfo:()=>Ps,convertConv2DDataFormat:()=>js,decodeEinsumEquation:()=>cm,eitherStridesOrDilationsAreOne:()=>Ls,expandShapeToKeepDim:()=>Hl,exponent:()=>lm,exponents:()=>sm,fromStringArrayToUint8:()=>Dm,fromUint8ToStringArray:()=>Am,getAxesPermutation:()=>Gl,getBroadcastDims:()=>Nl,getComplexWithIndex:()=>om,getEinsumComputePath:()=>hm,getEinsumPermutation:()=>pm,getFusedBiasGradient:()=>rd,getFusedDyActivation:()=>nd,getImageCenter:()=>qf,getInnerMostAxes:()=>Jl,getPermuted:()=>Bf,getRaggedRank:()=>Ff,getReductionAxes:()=>Rl,getReshaped:()=>$f,getReshapedPermuted:()=>Uf,getRowPartitionTypesHelper:()=>Mf,getSliceBeginCoords:()=>Wf,getSliceSize:()=>Hf,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>ym,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>vm,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>bm,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>_m,getSparseReshapeInputOutputMismatchErrorMessage:()=>Sm,getSparseReshapeInputOutputMultipleErrorMessage:()=>Cm,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>xm,getSparseReshapeNegativeOutputDimErrorMessage:()=>wm,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>Im,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>km,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>Em,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>Tm,getUndoAxesPermutation:()=>Kl,isIdentityPermutation:()=>fm,log:()=>di,mergeRealAndImagArrays:()=>tm,prepareAndValidate:()=>sf,prepareSplitSize:()=>gm,segment_util:()=>Pm,shouldFuse:()=>od,slice_util:()=>lf,splitRealAndImagArrays:()=>nm,stridesOrDilationsArePositive:()=>zs,tupleValuesAreOne:()=>Fs,upcastType:()=>mo,validateDefaultValueShape:()=>Lf,validateInput:()=>Rp,validateUpdateShape:()=>Np,warn:()=>pi}),function(e){e[e.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",e[e.VALUE_ROWIDS=1]="VALUE_ROWIDS",e[e.ROW_LENGTHS=2]="ROW_LENGTHS",e[e.ROW_SPLITS=3]="ROW_SPLITS",e[e.ROW_LIMITS=4]="ROW_LIMITS",e[e.ROW_STARTS=5]="ROW_STARTS"}(Nf||(Nf={}));var zf=30;function jf(e){return e<=zf?e:Te(e,Math.floor(Math.sqrt(e)))}function qf(e,t,n){return[n*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}function $f(e,t,n,r=!0){let i=[];if(r)i=i.concat(t.slice(0)),i.push(e[0]/n),i=i.concat(e.slice(1));else{i=i.concat(e[0]);let n=t.length;for(let r=0;r<n;++r)i=i.concat([e[r+1]/t[r],t[r]]);i=i.concat(e.slice(n+1))}return i}function Bf(e,t,n=!0){let r=[];if(n){r.push(t);for(let n=t+1;n<e;++n)n<=2*t?(r.push(n),r.push(n-(t+1))):r.push(n)}else{let n=[],i=[];for(let r=1;r<e;++r)r>=2*t+1||r%2==1?i.push(r):n.push(r);r.push(...n),r.push(0),r.push(...i)}return r}function Uf(e,t,n,r=!0){let i=[];r?i.push(e[0]/n):i.push(e[0]*n);for(let n=1;n<e.length;++n)n<=t.length?r?i.push(t[n-1]*e[n]):i.push(e[n]/t[n-1]):i.push(e[n]);return i}function Wf(e,t){let n=[0];for(let r=0;r<t;++r)n.push(e[r][0]);return n}function Hf(e,t,n){let r=e.slice(0,1);for(let i=0;i<n;++i)r.push(e[i+1]-t[i][0]-t[i][1]);return r}var Qf=1.7580993408473768,Gf=1.0507009873554805,Kf=.3275911,Jf=.254829592,Xf=-.284496736,Yf=1.421413741,Zf=-1.453152027,em=1.061405429;function tm(e,t){if(e.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${e.length}, imag: ${t.length}.`);let n=new Float32Array(2*e.length);for(let r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function nm(e){let t=new Float32Array(e.length/2),n=new Float32Array(e.length/2);for(let r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function rm(e){let t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let t=0;t<e.length;t+=4)n[Math.floor(t/4)]=e[t],r[Math.floor(t/4)]=e[t+1];return{real:n,imag:r}}function im(e){let t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t);for(let t=2;t<e.length;t+=4)n[Math.floor(t/4)]=e[t],r[Math.floor(t/4)]=e[t+1];return{real:n,imag:r}}function om(e,t){return{real:e[2*t],imag:e[2*t+1]}}function am(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function sm(e,t){let n=new Float32Array(e/2),r=new Float32Array(e/2);for(let i=0;i<Math.ceil(e/2);i++){let o=(t?2:-2)*Math.PI*(i/e);n[i]=Math.cos(o),r[i]=Math.sin(o)}return{real:n,imag:r}}function lm(e,t,n){let r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}var um=/->/g;function cm(e,t){let n=((e=e.replace(/\s/g,"")).length-e.replace(um,"").length)/"->".length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("->").');let[r,i]=e.split("->");Z(-1===r.indexOf("..."),()=>'The ellipsis notation ("...") is not supported yet.');let o=r.split(","),a=o.length;if(t!==a)throw new Error(`Expected ${a} input tensors, received ${t}`);if(a>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let s=[];for(let e=0;e<i.length;++e){let t=i[e];if(!o.some(e=>-1!==e.indexOf(t)))throw new Error(`Output subscripts contain the label ${t} not present in the input subscripts.`);-1===s.indexOf(t)&&s.push(t)}for(let e=0;e<r.length;++e){let t=r[e];-1===s.indexOf(t)&&","!==t&&s.push(t)}let l=new Array(o.length);for(let e=0;e<a;++e){if(new Set(o[e].split("")).size!==o[e].length)throw new Error(`Found duplicate axes in input component ${o[e]}. Support for duplicate axes in input is not implemented yet.`);l[e]=[];for(let t=0;t<o[e].length;++t)l[e].push(s.indexOf(o[e][t]))}let u=s.length,c=[];for(let e=i.length;e<u;++e)c.push(e);return{allDims:s,summedDims:c,idDims:l}}function pm(e,t){let n=new Array(e);n.fill(-1);for(let e=0;e<t.length;++e)n[t[e]]=e;let r=[];for(let t=0;t<e;++t)-1===n[t]&&r.push(t);return n=n.filter(e=>-1!==e),{permutationIndices:n,expandDims:r}}function dm(e,t,n){let r=new Array(e);for(let e=0;e<n.length;++e){let i=n[e].shape;for(let n=0;n<t[e].length;++n)void 0===r[t[e][n]]?r[t[e][n]]=i[n]:Z(r[t[e][n]]===i[n],()=>`Expected dimension ${r[t[e][n]]} at axis ${n} of input shaped ${JSON.stringify(i)}, but got dimension ${i[n]}`)}}function hm(e,t){let n=e,r=[],i=0;0===e.length&&n.push(-1),i=e.length+1;for(let e=0;e<i;++e)r.push([]);let o=[];for(let e=0;e<n.length;++e){let i=mm(t,n[e]);for(let t of i)-1===o.indexOf(t)&&(r[e].push(t),o.push(t))}return{path:n,steps:r}}function fm(e){return e.every((e,t)=>e===t)}function mm(e,t){let n=[];for(let r=0;r<e.length;++r)(0===e[r].length||-1!==e[r].indexOf(t)||-1===t)&&n.push(r);return n}function gm(e,t,n=0){let r=[];if("number"==typeof t)Z(e.shape[n]%t==0,()=>"Number of splits must evenly divide the axis."),r=new Array(t).fill(e.shape[n]/t);else{Z(t.reduce((e,t)=>(-1===t&&(e+=1),e),0)<=1,()=>"There should be only one negative value in split array.");let i=t.indexOf(-1);if(-1!==i){let r=t.reduce((e,t)=>t>0?e+t:e);t[i]=e.shape[n]-r}Z(e.shape[n]===t.reduce((e,t)=>e+t),()=>"The sum of sizes must match the size of the axis dimension."),r=t}return r}function ym(e){return"Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = "+e}function vm(e,t){return`indices(${e}, 0) is invalid: ${t} < 0`}function bm(e,t,n){return`indices(${e}, 0) is invalid: ${t} >= ${n}`}function xm(e,t){return`only one output dimension may be -1, not both ${e} and ${t}`}function wm(e,t){return`size ${e} must be non-negative, not ${t}`}function _m(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function Cm(e,t){return`Input to reshape is a SparseTensor with ${ne(e)}\n  dense values, but the requested shape requires a multiple of ${ne(t)}. inputShape=${e} outputShape= ${t}`}function Sm(e,t){return`Input to reshape is a tensor with ${ne(e)} dense values, but the requested shape has ${ne(t)}. inputShape=${e} outputShape=${t}`}function km(){return"segment ids must be >= 0"}function Em(){return"segment ids are not increasing"}function Tm(e,t){return`Segment id ${e} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function Im(e,t,n){return`Bad: indices[${e}] == ${t} out of range [0, ${n})`}var Pm={};function Om(e,t){let n,r=!1;for(e<=zf?(n=e,r=!0):n=Te(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=Te(e,n+1);return n}function Nm(e,t,n){let r=[],i=e.length;for(let o=0;o<i;o++)o!==t?r.push(e[o]):r.push(n);return r}function Rm(e,t,n,r){let i=t.shape.length,o=e.shape.length;if(0!==r&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>o)throw new Error(`batchDims (${r}) must be less than rank(x) (\n    ${o}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let n=0;n<r;++n)if(e.shape[n]!==t.shape[n])throw new Error(`x.shape[${n}]: ${e.shape[n]} should be equal to indices.shape[${n}]: ${t.shape[n]}.`);let a=e.shape[n],s=[],l=1,u=1,c=1;for(let t=0;t<r;++t)s.push(e.shape[t]),l*=e.shape[t];for(let t=r;t<n;t++)s.push(e.shape[t]),u*=e.shape[t];for(let e=r;e<i;e++)s.push(t.shape[e]);for(let t=n+1;t<o;t++)s.push(e.shape[t]),c*=e.shape[t];return{batchSize:l,sliceSize:c,outerSize:u,dimSize:a,outputShape:s}}function Am(e){try{return e.map(e=>Wi(e))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8, error: "+e)}}function Dm(e){return e.map(e=>Ui(e))}b(Pm,{collectGatherOpShapeInfo:()=>Rm,computeOutShape:()=>Nm,segOpComputeOptimalWindowSize:()=>Om});var Vm={};b(Vm,{nonMaxSuppressionV3Impl:()=>Cd,nonMaxSuppressionV4Impl:()=>Sd,nonMaxSuppressionV5Impl:()=>kd,whereImpl:()=>$p}),function(){for(let e of Eh)yh(e)}();var Mm={kernelName:He,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>hs(e,wp(ja(n,"float32"),-1))}}},Fm={kernelName:Qe,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let t=nu(ja(n,"float32")),r=tu(Mu(eu(1),t));return Au(ds(e,r))}}}},Lm={kernelName:Ge,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let t=tu(Mu(nu(ja(n,"float32")),1));return ds(e,t)}}}},zm={kernelName:Ke,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,i=Al(n.shape,r.shape);return{a:()=>{let t=e,r=Rl(n.shape,i);return r.length>0&&(t=ru(t,r)),$s(t,n.shape)},b:()=>{let t=e,n=Rl(r.shape,i);return n.length>0&&(t=ru(t,n)),$s(t,r.shape)}}}},jm={kernelName:Je,saveAllInputs:!0,gradFunc:(e,t)=>{let n={};return t.forEach((t,r)=>{n[r]=()=>e.clone()}),n}},qm={kernelName:Ze,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Ml(n)}}},$m={kernelName:et,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Ml(n)}}},Bm={kernelName:tt,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>ds(e,tu(Mu(eu(1),nu(ja(n,"float32")))))}}},Um={kernelName:nt,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let t=tu(cs(eu(1),nu(ja(n,"float32"))));return ds(e,t)}}}},Wm={kernelName:ot,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,i=Al(n.shape,r.shape);return{a:()=>{let t=cs(nu(n),nu(r)),o=hs(e,ds(r,t)),a=Rl(n.shape,i);return a.length>0&&(o=ru(o,a)),$s(o,n.shape)},b:()=>{let t=cs(nu(n),nu(r)),o=Au(hs(e,ds(n,t))),a=Rl(r.shape,i);return a.length>0&&(o=ru(o,a)),$s(o,r.shape)}}}},Hm={kernelName:rt,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>ds(e,cs(nu(ja(n,"float32")),1))}}},Qm={kernelName:it,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>ds(e,Mu(eu(1),nu(ja(n,"float32"))))}}};var Gm=jo({avgPool3dGrad_:function(e,t,n,r,i,o){let a=Fo(e,"dy","avgPool3dGrad"),s=Fo(t,"input","avgPool3dGrad"),l=a,u=s,c=!1;4===s.rank&&(c=!0,l=$s(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),u=$s(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Z(5===l.rank,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),Z(5===u.rank,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${u.rank}.`),qs("avgPool3dGrad",i,o);let p={dy:l,input:u},d={filterSize:n,strides:r,pad:i,dimRoundingMode:o},h=To.runKernel(ut,p,d);return c?$s(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}}),Km={kernelName:lt,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{filterSize:i,strides:o,pad:a,dimRoundingMode:s}=n;return{x:()=>Gm(e,r,i,o,a,s)}}};var Jm=jo({avgPoolGrad_:function(e,t,n,r,i){let o=Fo(e,"dy","avgPoolGrad"),a=Fo(t,"input","avgPoolGrad");Z(a.rank===o.rank,()=>`Rank of input (${a.rank}) does not match rank of dy (${o.rank})`);let s=a,l=o,u=!1;3===a.rank&&(u=!0,s=$s(a,[1,a.shape[0],a.shape[1],a.shape[2]]),l=$s(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Z(4===l.rank,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),Z(4===s.rank,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${s.rank}.`);let c={dy:l,input:s},p={filterSize:n,strides:r,pad:i},d=To.runKernel(st,c,p);return u?$s(d,[d.shape[1],d.shape[2],d.shape[3]]):d}}),Xm={kernelName:at,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{filterSize:i,strides:o,pad:a}=n;return{x:()=>Jm(e,r,i,o,a)}}},Ym={kernelName:ct,inputsToSave:["a","b"],gradFunc:(e,t,n)=>{let[r,i]=t,{transposeA:o,transposeB:a}=n;return o||a?!o&&a?{a:()=>Hs(e,i,!1,!1),b:()=>Hs(e,r,!0,!1)}:o&&!a?{a:()=>Hs(i,e,!1,!0),b:()=>Hs(r,e,!1,!1)}:{a:()=>Hs(i,e,!0,!0),b:()=>Hs(e,r,!0,!0)}:{a:()=>Hs(e,i,!1,!0),b:()=>Hs(r,e,!0,!1)}}},Zm={kernelName:pt,gradFunc:(e,t,n)=>{let{blockShape:r,crops:i}=n;return{x:()=>mc(e,r,i)}}},eg={kernelName:ft,gradFunc:(e,t,n)=>{let r=n,i=r.inputShape,o=r.shape,a=Array.from(o);for(let e=i.length-1;e>=0;e--)if(i[e]===o[e])a[e]=1;else if(1!==i[e])throw new Error(`broadcastTo(): [${i}] cannot be broadcast to [${o}].`);let s=[];for(let e=0;e<a.length;e++)a[e]>1&&s.push(e);return{x:()=>ru(e,s,!0)}}},tg={kernelName:gt,gradFunc:e=>({x:()=>e.clone()})},ng={kernelName:yt,gradFunc:e=>({x:()=>Ml(e)})},rg={kernelName:vt,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{clipValueMin:i,clipValueMax:o}=n;return{x:()=>Vl(zu(fu(r,i),wu(r,o)),e,Ml(e))}}},ig={kernelName:xt,inputsToSave:["x"],gradFunc:Mm.gradFunc},og={kernelName:wt,saveAllInputs:!0,gradFunc:(e,t,n)=>{let r=t.map(e=>e.shape),{axis:i}=n,o=he(i,t[0].shape)[0],a=r.map(e=>e[o]);return gp(e,a,o).map(e=>()=>e)}},ag={kernelName:_t,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let[r,i]=t,{dilations:o,strides:a,pad:s,dataFormat:l}=n;return Z(Fs(o),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`),{x:()=>gl(r.shape,e,i,a,s,l),filter:()=>td(r,e,i.shape,a,s,l)}}},sg={kernelName:St,inputsToSave:["dy","filter"],gradFunc:(e,t,n)=>{let[r,i]=t,{strides:o,pad:a,dataFormat:s,dimRoundingMode:l}=n;return{dy:()=>fl(e,i,o,a,s,1,l),filter:()=>td(e,r,i.shape,o,a,s,l)}}};var lg=jo({conv3DBackpropFilter_:function(e,t,n,r,i){let o=e;4===e.rank&&(o=$s(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));let a=t;4===a.rank&&(a=$s(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),Z(5===o.rank,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${o.shape}.`),Z(5===a.rank,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${a.shape}.`),Z(5===n.length,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),Z(o.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${o.shape[4]}) must match input depth in filter (${n[3]}.`),Z(a.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${a.shape[4]}) must match output depth for filter (${n[4]}).`);let s={x:o,dy:a},l={strides:r,pad:i,filterShape:n};return To.runKernel(Et,s,l)}}),ug={kernelName:kt,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let{dilations:r,strides:i,pad:o}=n;Z(Fs(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);let[a,s]=t;return{x:()=>bl(a.shape,e,s,i,o),filter:()=>lg(a,e,s.shape,i,o)}}},cg={kernelName:It,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>hs(Au(ap(ja(n,"float32"))),e)}}},pg={kernelName:Pt,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>hs(sp(ja(n,"float32")),e)}}},dg={kernelName:Nt,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{axis:i,exclusive:o,reverse:a}=n;return{x:()=>{let t=Gl([i],r.rank),n=Sl(e,i,o,!a);return null!=t&&(n=Wp(n,t)),n}}}},hg={kernelName:Vt,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let{dilations:r,strides:i,pad:o,dimRoundingMode:a}=n,s=null==r?[1,1]:r;Z(Fs(s),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${s}'`);let[l,u]=t;return Z(4===l.rank,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),Z(4===u.rank,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${u.rank}.`),Z(l.shape[3]===u.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${u.shape[2]}.`),Z(Ls(i,s),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${i} and dilations '${s}'.`),qs("depthwiseConv2d",o,a),{x:()=>ld(l.shape,e,u,i,o,s,a),filter:()=>sd(l,e,u.shape,i,o,s,a)}}},fg={kernelName:zt,inputsToSave:["x","filter"],gradFunc:(e,t,n)=>{let[r,i]=t,o={x:r,filter:i,dy:e},a={x:r,filter:i,dy:e};return{x:()=>To.runKernel(jt,o,n),filter:()=>To.runKernel(qt,a,n)}}},mg={kernelName:Wt,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t,r={dy:e,y:n};return{x:()=>To.runKernel(Ht,r)}}},gg={kernelName:Qt,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t,r=hs(au(Au(nu(n))),2/Math.sqrt(Math.PI));return{x:()=>hs(e,r)}}},yg={kernelName:Kt,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>hs(e,n)}}},vg={kernelName:Jt,inputsToSave:["input"],gradFunc:(e,t)=>{let[n]=t;return{input:()=>$s(e,n.shape)}}},bg={kernelName:Xt,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>hs(e,au(n))}}},xg={kernelName:tn,gradFunc:e=>({x:()=>Ml(e)})},wg={kernelName:nn,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,i=Al(n.shape,r.shape);return{a:()=>{let t=ds(e,ja(r,"float32")),o=Rl(n.shape,i);return o.length>0?$s(ru(t,o),n.shape):t},b:()=>{let t=hs(e,ja(n,"float32")),o=Rl(r.shape,i);o.length>0&&(t=$s(ru(t,o),r.shape));let a=nu(r);return Au(ds(t,ja(a,"float32")))}}}},_g={kernelName:rn,inputsToSave:["x","mean","variance","scale"],gradFunc:(e,t,n)=>{let{varianceEpsilon:r}=n,[i,o,a,s]=t,l=null==s?eu(1):s,u=Rl(o.shape,i.shape),c=[];if(1===o.rank){for(let e=0;e<i.shape.length-1;++e)c.push(i.shape[e]);c.push(1)}let p=Mu(i,o),d=hs(e,l),h=tp(cs(a,eu(r))),f=hs(hs(hs(h,h),h),eu(-.5));return{x:()=>1===o.rank?$s(hs(hs(e,uu($s(h,[1,1,1,o.shape[0]]),c)),l),i.shape):$s(hs(hs(e,h),l),i.shape),mean:()=>{let e=hs(hs(h,eu(-1)),d);return 1===o.rank&&(e=ru(e,u)),$s(e,o.shape)},variance:()=>{let e=hs(hs(f,p),d);return 1===o.rank&&(e=ru(e,u)),$s(e,o.shape)},scale:()=>{let t=hs(p,h),n=hs(e,t);return 1===o.rank&&(n=ru(n,u)),$s(n,o.shape)},offset:()=>{let t=e;return 1===o.rank&&(t=ru(t,u)),$s(t,o.shape)}}}},Cg={kernelName:on,inputsToSave:["x","indices"],gradFunc:(e,t,n)=>{let[r,i]=t,{axis:o}=n,a=he(o,r.shape)[0];return{x:()=>{let t=r.shape,n=i.size,s=t.slice(0,a),l=s.length,u=t.slice(o,t.length).slice(1),c=u.length,p=Sg(0,l),d=Sg(l+1,l+1+c),h=kg([s,[n],u]),f=$s(e,h),m=$s(i,[n]),g=kg([[l],p,d]),y=Wp(f,g),v=Lp(y,m,r.shape[a]),b=Kl(g);return v=Wp(v,b),v},indices:()=>i}}};function Sg(e,t){let n=[];for(let r=e;r<t;++r)n.push(r);return n}function kg(e){let t=[];for(let n=0;n<e.length;++n)for(let r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var Eg={kernelName:ln,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t;return{a:()=>Ml(n),b:()=>Ml(r)}}},Tg={kernelName:un,gradFunc:e=>({x:()=>ja(e,"float32")})},Ig={kernelName:dn,gradFunc:e=>({x:()=>Ml(e)})},Pg={kernelName:hn,gradFunc:e=>({x:()=>Ml(e)})},Og={kernelName:fn,gradFunc:e=>({x:()=>Ml(e)})},Ng={kernelName:mn,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{alpha:i}=n,o=hu(r,0);return{x:()=>Vl(o,e,hs(e,i))}}},Rg={kernelName:xn,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>ds(e,cs(n,1))}}},Ag={kernelName:bn,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>ds(e,ja(n,"float32"))}}},Dg={kernelName:kn,inputsToSave:[],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r]=t,{axis:i}=n;return{logits:()=>{let t=au(r);return Mu(e,hs(ru(e,i,!0),t))}}}};var Vg=jo({localResponseNormalizationBackprop_:function(e,t,n,r=5,i=1,o=1,a=.5){let s={x:e,y:t,dy:n},l={depthRadius:r,bias:i,alpha:o,beta:a};return To.runKernel(In,s,l)}}),Mg={kernelName:Tn,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,i]=t,{depthRadius:o,bias:a,alpha:s,beta:l}=n;return{x:()=>Vg(r,i,e,o,a,s,l)}}};function Fg(e,t,n,r){return t.rank<n.rank&&(t=$s(t,Hl(t.shape,r))),e.rank<n.rank&&(e=$s(e,Hl(e.shape,r))),{x:()=>hs(e,ja(Dl(n,t),e.dtype))}}var Lg={kernelName:On,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let r=n,{reductionIndices:i}=r,o=t[0],a=Fg(e,t[1],o,he(i,o.shape));return{x:()=>a.x()}}},zg={kernelName:Nn,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t;return{a:()=>hs(e,ja(fu(n,r),"float32")),b:()=>hs(e,ja(xu(n,r),"float32"))}}};var jg=jo({maxPool3dGrad_:function(e,t,n,r,i,o,a){let s=Fo(e,"dy","maxPool3dGrad"),l=Fo(t,"input","maxPool3dGrad"),u=Fo(n,"output","maxPool3dGrad"),c=s,p=l,d=u,h=!1;4===l.rank&&(h=!0,c=$s(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),p=$s(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),d=$s(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),Z(5===c.rank,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${c.rank}.`),Z(5===p.rank,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${p.rank}.`),Z(5===d.rank,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${d.rank}.`),qs("maxPool3dGrad",o,a);let f={dy:c,input:p,output:d},m={filterSize:r,strides:i,pad:o,dimRoundingMode:a},g=To.runKernel(Vn,f,m);return h?$s(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}}),qg={kernelName:Dn,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,i]=t,{filterSize:o,strides:a,pad:s,dimRoundingMode:l}=n;return{x:()=>jg(e,r,i,o,a,s,l)}}};var $g=jo({maxPoolGrad_:function(e,t,n,r,i,o,a){let s=Fo(e,"dy","maxPoolGrad"),l=Fo(t,"input","maxPoolGrad"),u=Fo(n,"output","maxPoolGrad");Z(l.rank===s.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${s.rank})`),Z(4===s.rank,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${s.rank}.`),Z(4===l.rank,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),qs("maxPoolGrad",o,a);let c={dy:s,input:l,output:u},p={filterSize:r,strides:i,pad:o,dimRoundingMode:a};return To.runKernel(An,c,p)}}),Bg={kernelName:Yn,inputsToSave:["x"],gradFunc:(e,t,n)=>{let r=t[0],{paddings:i}=n,o=i.map(e=>e[0]);return{x:()=>Gs(e,o,r.shape)}}};function Ug(e,t,n){let r=e.shape.length,i=r-n.length,o=Rf.getAxesPermutation(n,r),a=e;null!=o&&(a=Wp(e,o));let s=a.shape.slice(),l=s.splice(r-n.length,n.length).reduce((e,t)=>e*t,1);s.push(l);let u=function(e,t,n){let r=e.shape.slice();r[n]=1;let i=$s(t,r),o=Cl(e,n,!0,!1),a=Cl(e,n,!0,!0),s=hs(o,a);return hs(i,s)}(a.reshape(s),t,i);if(u=u.reshape(a.shape),null!=o){let e=Rf.getUndoAxesPermutation(o);u=Wp(u,e)}return u}var Wg={kernelName:Rr,gradFunc:(e,t,n)=>{let{blockShape:r,paddings:i}=n;return{x:()=>Xs(e,r,i)}}},Hg={kernelName:Ar,gradFunc:(e,t,n)=>{let{axis:r}=n;return{x:()=>Ws(e,r)}}};var Qg=[Mm,Fm,Lm,zm,jm,qm,$m,Bm,Um,Wm,Hm,Qm,Km,Xm,Ym,Zm,eg,tg,ng,rg,ig,og,sg,ag,ug,cg,pg,dg,hg,fg,{kernelName:Bt,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,i=Al(n.shape,r.shape);return{a:()=>{let t=ds(e,ja(r,"float32")),o=Rl(n.shape,i);return o.length>0?$s(ru(t,o),n.shape):t},b:()=>{let t=hs(e,ja(n,"float32")),o=Rl(r.shape,i);o.length>0&&(t=$s(ru(t,o),r.shape));let a=nu(r);return Au(ds(t,ja(a,"float32")))}}}},mg,gg,yg,vg,bg,wg,xg,_g,Cg,Eg,Tg,Ig,Pg,Og,Ng,Rg,Ag,Dg,Mg,Lg,Lg,zg,qg,{kernelName:Rn,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r,i]=t,{filterSize:o,strides:a,pad:s}=n;return{x:()=>$g(e,r,i,o,a,s)}}},{kernelName:Fn,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{axis:i}=n,o=he(i,r.shape),a=ne(Wl(r.shape,o)[1]);return{x:()=>{let t=r.shape.slice();o.forEach(e=>{t[e]=1});let n=$s(e,t);return ds(hs(n,Yu(r.shape,"float32")),a)}}}},{kernelName:Ln,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(e,t,n)=>{let r=n,{axis:i}=r,[o,a]=t,s=Fg(e,a,o,he(i,o.shape));return{x:()=>s.x()}}},{kernelName:zn,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t;return{a:()=>hs(e,ja(wu(n,r),"float32")),b:()=>hs(e,ja(hu(n,r),"float32"))}}},{kernelName:jn,inputsToSave:["x"],gradFunc:(e,t,n)=>{let r=t[0],{paddings:i}=n,o=i.map(e=>e[0]);return{x:()=>Gs(e,o,r.shape)}}},{kernelName:qn,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,i=Al(n.shape,r.shape);return{a:()=>{let t=Rl(n.shape,i);return t.length>0?$s(ru(e,t),n.shape):e},b:()=>{let t=hs(e,Au(pu(ds(n,r)))),o=Rl(r.shape,i);return o.length>0?$s(ru(t,o),r.shape):t}}}},{kernelName:Bn,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,i=Al(n.shape,r.shape);return{a:()=>{let t=hs(e,ja(r,"float32")),o=Rl(n.shape,i);return o.length>0?$s(ru(t,o),n.shape):t},b:()=>{let t=hs(e,ja(n,"float32")),o=Rl(r.shape,i);return o.length>0?$s(ru(t,o),r.shape):t}}}},{kernelName:Un,gradFunc:e=>({x:()=>Au(e)})},{kernelName:Jn,inputsToSave:["indices"],gradFunc:(e,t)=>{let n=t[0];return{indices:()=>Xu(n.shape,"float32")}}},{kernelName:Kn,gradFunc:e=>({x:()=>Ml(e)})},{kernelName:Xn,saveAllInputs:!0,gradFunc:(e,t,n)=>{let{axis:r}=n;return zp(e,r).map(e=>()=>e)}},Bg,Bg,{kernelName:er,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(e,t)=>{let[n,r,i]=t,o=n,a=r,s=Al(o.shape,a.shape);return{a:()=>{let t=ja(a,"float32"),n=hs(e,hs(t,Zl(o,Mu(t,eu(1))))),r=Rl(o.shape,s);return r.length>0&&(n=ru(n,r)),$s(n,o.shape)},b:()=>{let t=hu(o,0),n=Vl(t,Su(o),Ml(o)),r=hs(e,hs(i,n)),l=Rl(a.shape,s);return l.length>0&&(r=ru(r,l)),$s(r,a.shape)}}}},{kernelName:tr,inputsToSave:["x","alpha"],gradFunc:(e,t)=>{let[n,r]=t,i=hu(n,0);return{x:()=>Vl(i,e,hs(e,r)),alpha:()=>{let t=Vl(i,Ml(e),hs(e,n)),o=Rl(r.shape,e.shape);return o.length>0&&(t=ru(t,o)),$s(t,r.shape)}}}},{kernelName:nr,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{axis:i}=n,o=[];return o=null==i?r.shape.map((e,t)=>t):"number"==typeof i?[i]:i,{x:()=>Ug(r,e,o)}}},{kernelName:lr,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>ds(e,Au(nu(n)))}}},{kernelName:mr,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t,r=hs(wu(n,6),wp(n));return{x:()=>hs(e,ja(r,"float32"))}}},{kernelName:ur,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>hs(e,ja(wp(n),"float32"))}}},{kernelName:cr,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>$s(e,n.shape)}}},{kernelName:hr,inputsToSave:["images"],gradFunc:(e,t,n)=>{let[r]=t,i={dy:e,images:r};return{images:()=>To.runKernel(fr,i,n)}}},{kernelName:pr,inputsToSave:["images"],gradFunc:(e,t,n)=>{let[r]=t,i={dy:e,images:r};return{images:()=>To.runKernel(dr,i,n)}}},{kernelName:gr,gradFunc:(e,t,n)=>{let{dims:r}=n,i=he(r,e.shape);return{x:()=>Kc(e,i)}}},{kernelName:yr,gradFunc:e=>({x:()=>Ml(e)})},{kernelName:vr,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>Au(ds(e,hs(Zl(n,1.5),2)))}}},{kernelName:_r,inputsToSave:["condition"],gradFunc:(e,t)=>{let[n]=t;return{condition:()=>ja(Ml(n),"float32"),t:()=>hs(e,ja(n,e.dtype)),e:()=>hs(e,ja(ju(n),e.dtype))}}},{kernelName:Cr,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>{let t=hu(n,eu(0)),r=eu(Qf),i=eu(Gf),o=hs(e,i),a=hs(hs(e,r),au(ja(n,"float32")));return Vl(t,o,a)}}}},{kernelName:Ir,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>hs(e,hs(n,Mu(eu(1),n)))}}},{kernelName:Tr,gradFunc:e=>({x:()=>Ml(e)})},{kernelName:kr,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>hs(wl(ja(n,"float32")),e)}}},{kernelName:Er,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>hs(_l(ja(n,"float32")),e)}}},{kernelName:Sr,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{begin:i,size:o}=n,a=r.shape,[s,l]=Cf(r,i,o),u=[];for(let t=0;t<e.rank;t++)u.push([s[t],a[t]-s[t]-l[t]]);return{x:()=>cc(e,u)}}},{kernelName:Dr,outputsToSave:[!0],gradFunc:(e,t,n)=>{let[r]=t,{dim:i}=n,o=hs(e,r);return{logits:()=>Mu(o,hs(ru(o,[i],!0),r))}}},{kernelName:Pr,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>hs(e,Qs(n))}}},Wg,Wg,Hg,Hg,{kernelName:Or,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>ds(e,hs(tu(ja(n,"float32")),2))}}},{kernelName:jr,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,i=eu(2);return{a:()=>hs(e,hs(i,Mu(n,r))),b:()=>hs(e,hs(i,Mu(r,n)))}}},{kernelName:qr,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>hs(e,hs(ja(n,"float32"),2))}}},{kernelName:oi,gradFunc:e=>({x:()=>Ml(e)})},{kernelName:Qr,inputsToSave:["a","b"],gradFunc:(e,t)=>{let[n,r]=t,i=Al(n.shape,r.shape);return{a:()=>{let t=e,r=Rl(n.shape,i);return r.length>0&&(t=ru(t,r)),$s(t,n.shape)},b:()=>{let t=e,n=Rl(r.shape,i);return n.length>0&&(t=ru(t,n)),$s(Au(t),r.shape)}}}},{kernelName:Nr,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,i=r.shape.slice(),{axis:o}=n;he(o,r.shape).forEach(e=>{i[e]=1});let a=$s(e,i),s=hs(a,Yu(r.shape,"float32"));return{x:()=>s}}},{kernelName:Gr,inputsToSave:["x"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>ds(e,nu(wl(n)))}}},{kernelName:Kr,outputsToSave:[!0],gradFunc:(e,t)=>{let[n]=t;return{x:()=>hs(Mu(eu(1),nu(n)),e)}}},{kernelName:Jr,inputsToSave:["x"],gradFunc:(e,t,n)=>{let[r]=t,{reps:i}=n;return{x:()=>{let t=Ml(r);if(1===r.rank)for(let n=0;n<i[0];++n)t=cs(t,Gs(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(let n=0;n<i[0];++n)for(let o=0;o<i[1];++o)t=cs(t,Gs(e,[n*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(let n=0;n<i[0];++n)for(let o=0;o<i[1];++o)for(let a=0;a<i[2];++a)t=cs(t,Gs(e,[n*r.shape[0],o*r.shape[1],a*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);for(let n=0;n<i[0];++n)for(let o=0;o<i[1];++o)for(let a=0;a<i[2];++a)for(let s=0;s<i[3];++s)t=cs(t,Gs(e,[n*r.shape[0],o*r.shape[1],a*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}},{kernelName:Zr,gradFunc:(e,t,n)=>{let r=n,{perm:i}=r,o=Kl(i);return{x:()=>Wp(e,o)}}},{kernelName:ti,gradFunc:(e,t,n)=>{let r=n,{axis:i}=r;return{value:()=>xp(e,i)}}},{kernelName:ni,inputsToSave:["segmentIds"],gradFunc:(e,t)=>{let[n]=t;return{x:()=>function(e,t){let n=Ku(t,Ml(t)),r=du(e,n),i=fu(t,eu(0,"int32")),o=r.rank-i.rank;for(let e=0;e<o;++e)i=su(i,e+1);i=zu(i,Yu(r.shape,"bool"));let a=Ml(r);return Vl(i,r,a)}(e,n)}}},{kernelName:ii,gradFunc:e=>({x:()=>Ml(e)})}];for(let e of Qg)bi(e);io().prototype.abs=function(){return this.throwIfDisposed(),fs(this)},io().prototype.acos=function(){return this.throwIfDisposed(),ms(this)},io().prototype.acosh=function(){return this.throwIfDisposed(),gs(this)},io().prototype.add=function(e){return this.throwIfDisposed(),cs(this,e)},io().prototype.all=function(e,t){return this.throwIfDisposed(),vs(this,e,t)},io().prototype.any=function(e,t){return this.throwIfDisposed(),bs(this,e,t)},io().prototype.argMax=function(e){return this.throwIfDisposed(),xs(this,e)},io().prototype.argMin=function(e){return this.throwIfDisposed(),ws(this,e)},io().prototype.asScalar=function(){return this.throwIfDisposed(),Z(1===this.size,()=>"The array must have only 1 element."),$s(this,[])},io().prototype.asType=function(e){return this.throwIfDisposed(),ja(this,e)},io().prototype.as1D=function(){return this.throwIfDisposed(),$s(this,[this.size])},io().prototype.as2D=function(e,t){return this.throwIfDisposed(),$s(this,[e,t])},io().prototype.as3D=function(e,t,n){return this.throwIfDisposed(),$s(this,[e,t,n])},io().prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),$s(this,[e,t,n,r])},io().prototype.as5D=function(e,t,n,r,i){return this.throwIfDisposed(),$s(this,[e,t,n,r,i])},io().prototype.asin=function(){return this.throwIfDisposed(),_s(this)},io().prototype.asinh=function(){return this.throwIfDisposed(),Cs(this)},io().prototype.atan=function(){return this.throwIfDisposed(),Ss(this)},io().prototype.atan2=function(e){return this.throwIfDisposed(),ks(this,e)},io().prototype.atanh=function(){return this.throwIfDisposed(),Es(this)},io().prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),Bs(this,e,t,n,r)},io().prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),Xs(this,e,t)},io().prototype.batchNorm=function(e,t,n,r,i){return this.throwIfDisposed(),Zs(this,e,t,n,r,i)},io().prototype.broadcastTo=function(e){return this.throwIfDisposed(),al(this,e)},io().prototype.cast=function(e){return this.throwIfDisposed(),ja(this,e)},io().prototype.ceil=function(){return this.throwIfDisposed(),sl(this)},io().prototype.clipByValue=function(e,t){return this.throwIfDisposed(),ul(this,e,t)},io().prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof ro&&(e=[e]),Ws([this,...e],t)},io().prototype.conv1d=function(e,t,n,r,i,o){return this.throwIfDisposed(),ml(this,e,t,n,r,i,o)},io().prototype.conv2dTranspose=function(e,t,n,r,i){return this.throwIfDisposed(),yl(this,e,t,n,r,i)},io().prototype.conv2d=function(e,t,n,r,i,o){return this.throwIfDisposed(),fl(this,e,t,n,r,i,o)},io().prototype.cos=function(){return this.throwIfDisposed(),wl(this)},io().prototype.cosh=function(){return this.throwIfDisposed(),_l(this)},io().prototype.cumprod=function(e,t,n){return this.throwIfDisposed(),Cl(this,e,t,n)},io().prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),Sl(this,e,t,n)},io().prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),El(this,e,t)},io().prototype.depthwiseConv2d=function(e,t,n,r,i,o){return this.throwIfDisposed(),Tl(this,e,t,n,r,i,o)},io().prototype.dilation2d=function(e,t,n,r,i){return this.throwIfDisposed(),Pl(this,e,t,n,r,i)},io().prototype.divNoNan=function(e){return this.throwIfDisposed(),Fl(this,e)},io().prototype.div=function(e){return this.throwIfDisposed(),ds(this,e)},io().prototype.dot=function(e){return this.throwIfDisposed(),Ll(this,e)},io().prototype.elu=function(){return this.throwIfDisposed(),jl(this)},io().prototype.equal=function(e){return this.throwIfDisposed(),Dl(this,e)},io().prototype.erf=function(){return this.throwIfDisposed(),$l(this)},io().prototype.euclideanNorm=function(e,t){return this.throwIfDisposed(),ou(this,e,t)},io().prototype.exp=function(){return this.throwIfDisposed(),au(this)},io().prototype.expandDims=function(e){return this.throwIfDisposed(),su(this,e)},io().prototype.expm1=function(){return this.throwIfDisposed(),lu(this)},io().prototype.fft=function(){return this.throwIfDisposed(),hp(this)},io().prototype.flatten=function(){return this.throwIfDisposed(),$s(this,[this.size])},io().prototype.floor=function(){return this.throwIfDisposed(),pu(this)},io().prototype.floorDiv=function(e){return this.throwIfDisposed(),ps(this,e)},io().prototype.gather=function(e,t,n){return this.throwIfDisposed(),du(this,e,t,n)},io().prototype.greaterEqual=function(e){return this.throwIfDisposed(),fu(this,e)},io().prototype.greater=function(e){return this.throwIfDisposed(),hu(this,e)},io().prototype.ifft=function(){return this.throwIfDisposed(),fp(this)},io().prototype.irfft=function(){return this.throwIfDisposed(),mp(this)},io().prototype.isFinite=function(){return this.throwIfDisposed(),gu(this)},io().prototype.isInf=function(){return this.throwIfDisposed(),yu(this)},io().prototype.isNaN=function(){return this.throwIfDisposed(),vu(this)},io().prototype.leakyRelu=function(e){return this.throwIfDisposed(),bu(this,e)},io().prototype.lessEqual=function(e){return this.throwIfDisposed(),wu(this,e)},io().prototype.less=function(e){return this.throwIfDisposed(),xu(this,e)},io().prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),Cu(this,e,t,n,r)},io().prototype.logSigmoid=function(){return this.throwIfDisposed(),Vu(this)},io().prototype.logSoftmax=function(e){return this.throwIfDisposed(),Fu(this,e)},io().prototype.logSumExp=function(e,t){return this.throwIfDisposed(),Lu(this,e,t)},io().prototype.log=function(){return this.throwIfDisposed(),Su(this)},io().prototype.log1p=function(){return this.throwIfDisposed(),ku(this)},io().prototype.logicalAnd=function(e){return this.throwIfDisposed(),zu(this,e)},io().prototype.logicalNot=function(){return this.throwIfDisposed(),ju(this)},io().prototype.logicalOr=function(e){return this.throwIfDisposed(),qu(this,e)},io().prototype.logicalXor=function(e){return this.throwIfDisposed(),$u(this,e)},io().prototype.matMul=function(e,t,n){return this.throwIfDisposed(),Hs(this,e,t,n)},io().prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),Hu(this,e,t,n,r)},io().prototype.max=function(e,t){return this.throwIfDisposed(),Xl(this,e,t)},io().prototype.maximum=function(e){return this.throwIfDisposed(),Ku(this,e)},io().prototype.mean=function(e,t){return this.throwIfDisposed(),Ju(this,e,t)},io().prototype.min=function(e,t){return this.throwIfDisposed(),Yl(this,e,t)},io().prototype.minimum=function(e){return this.throwIfDisposed(),ec(this,e)},io().prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),tc(this,e,t)},io().prototype.mod=function(e){return this.throwIfDisposed(),nc(this,e)},io().prototype.mul=function(e){return this.throwIfDisposed(),hs(this,e)},io().prototype.neg=function(){return this.throwIfDisposed(),Au(this)},io().prototype.norm=function(e,t,n){return this.throwIfDisposed(),iu(this,e,t,n)},io().prototype.notEqual=function(e){return this.throwIfDisposed(),ac(this,e)},io().prototype.oneHot=function(e,t=1,n=0){return this.throwIfDisposed(),sc(this,e,t,n)},io().prototype.onesLike=function(){return this.throwIfDisposed(),lc(this)},io().prototype.pad=function(e,t){return this.throwIfDisposed(),cc(this,e,t)},io().prototype.pool=function(e,t,n,r,i,o){return this.throwIfDisposed(),gc(this,e,t,n,r,i,o)},io().prototype.pow=function(e){return this.throwIfDisposed(),Zl(this,e)},io().prototype.prelu=function(e){return this.throwIfDisposed(),yc(this,e)},io().prototype.prod=function(e,t){return this.throwIfDisposed(),vc(this,e,t)},io().prototype.reciprocal=function(){return this.throwIfDisposed(),Hc(this)},io().prototype.relu=function(){return this.throwIfDisposed(),Qc(this)},io().prototype.relu6=function(){return this.throwIfDisposed(),Gc(this)},io().prototype.reshapeAs=function(e){return this.throwIfDisposed(),$s(this,e.shape)},io().prototype.reshape=function(e){return this.throwIfDisposed(),$s(this,e)},io().prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),Vd(this,e,t,n)},io().prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),Md(this,e,t,n)},io().prototype.reverse=function(e){return this.throwIfDisposed(),Kc(this,e)},io().prototype.rfft=function(){return this.throwIfDisposed(),yp(this)},io().prototype.round=function(){return this.throwIfDisposed(),ep(this)},io().prototype.rsqrt=function(){return this.throwIfDisposed(),tp(this)},io().prototype.selu=function(){return this.throwIfDisposed(),np(this)},io().prototype.separableConv2d=function(e,t,n,r,i,o){return this.throwIfDisposed(),rp(this,e,t,n,r,i,o)},io().prototype.sigmoid=function(){return this.throwIfDisposed(),Qs(this)},io().prototype.sign=function(){return this.throwIfDisposed(),op(this)},io().prototype.sin=function(){return this.throwIfDisposed(),ap(this)},io().prototype.sinh=function(){return this.throwIfDisposed(),sp(this)},io().prototype.slice=function(e,t){return this.throwIfDisposed(),Gs(this,e,t)},io().prototype.softmax=function(e){return this.throwIfDisposed(),dp(this,e)},io().prototype.softplus=function(){return this.throwIfDisposed(),Du(this)},io().prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),mc(this,e,t)},io().prototype.split=function(e,t){return this.throwIfDisposed(),gp(this,e,t)},io().prototype.sqrt=function(){return this.throwIfDisposed(),tu(this)},io().prototype.square=function(){return this.throwIfDisposed(),nu(this)},io().prototype.squaredDifference=function(e){return this.throwIfDisposed(),vp(this,e)},io().prototype.squeeze=function(e){return this.throwIfDisposed(),bp(this,e)},io().prototype.stack=function(e,t){this.throwIfDisposed();let n=e instanceof ro?[this,e]:[this,...e];return xp(n,t)},io().prototype.step=function(e){return this.throwIfDisposed(),wp(this,e)},io().prototype.stridedSlice=function(e,t,n,r,i,o,a,s){return this.throwIfDisposed(),_p(this,e,t,n,r,i,o,a,s)},io().prototype.sub=function(e){return this.throwIfDisposed(),Mu(this,e)},io().prototype.sum=function(e,t){return this.throwIfDisposed(),ru(this,e,t)},io().prototype.tan=function(){return this.throwIfDisposed(),Cp(this)},io().prototype.tanh=function(){return this.throwIfDisposed(),Ks(this)},io().prototype.tile=function(e){return this.throwIfDisposed(),uu(this,e)},io().prototype.toBool=function(){return this.throwIfDisposed(),ja(this,"bool")},io().prototype.toFloat=function(){return this.throwIfDisposed(),ja(this,"float32")},io().prototype.toInt=function(){return this.throwIfDisposed(),ja(this,"int32")},io().prototype.topk=function(e,t){return this.throwIfDisposed(),Vp(this,e,t)},io().prototype.transpose=function(e){return this.throwIfDisposed(),Wp(this,e)},io().prototype.unique=function(e){return this.throwIfDisposed(),Fp(this,e)},io().prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),Lp(this,e,t)},io().prototype.unstack=function(e){return this.throwIfDisposed(),zp(this,e)},io().prototype.where=function(e,t){return this.throwIfDisposed(),Vl(e,this,t)},io().prototype.zerosLike=function(){return this.throwIfDisposed(),Ml(this)};var Gg=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Gg.prototype)}},Kg=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Kg.prototype)}},Jg=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Jg.prototype)}},Xg=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Xg.prototype)}},Yg=class extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Yg.prototype)}},Zg=class{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let t;return this.cache.has(e)&&(t=this.cache.get(e),this.cache.delete(e),this.cache.set(e,t)),t}put(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){let e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,t)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let t=0;t<this.maxEntries-e;t++){let e=this.cache.keys().next().value;this.cache.delete(e)}this.maxEntries=e}};function ey(e,t){if(Array.isArray(e)){let n=[];for(let r=0;r<t;r++)n=n.concat(e);return n}{let n=new Array(t);return n.fill(e),n}}function ty(e,t){if(!e)throw new Yg(t)}function ny(e,t){let n=0;for(let r of e)r===t&&n++;return n}function ry(e){return 1===e.length?e[0]:e}function iy(e){return Array.isArray(e)?e:[e]}function oy(e){let t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function ay(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(e,t)=>t.toUpperCase())}var sy={};function ly(e){if(null==e)return null;let t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function uy(e,t={},n={},r="object",i=!1){if("string"==typeof e){let i,o=e;if(o in n)i=n[o];else if(o in sy)i=sy[o];else if(i=t[o],null==i)throw new Jg(`Unknown ${r}: ${e}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return i}{let o=e;if(null==o.className||null==o.config)throw new Jg(`${r}: Improper config format: ${JSON.stringify(o)}.\n'className' and 'config' must set.`);let a,s,l=o.className;if(l in n?[a,s]=n[l]:l in sy?[a,s]=sy.className:l in t&&([a,s]=t[l]),null==a)throw new Jg(`Unknown ${r}: ${l}. This may be due to one of the following reasons:\n1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(null!=s){let e={};for(let t of Object.keys(sy))e[t]=sy[t];for(let t of Object.keys(n))e[t]=n[t];o.config.customObjects=e;let t=Object.assign({},sy);for(let e of Object.keys(n))sy[e]=n[e];!function e(t){if(null!=t&&"object"==typeof t)if(Array.isArray(t))t.forEach(t=>e(t));else{let n=Object.keys(t);for(let r of n){let n=t[r];null!=n&&"object"==typeof n&&(Array.isArray(n)||"ndarray"!==n.type||"number"!=typeof n.value?e(n):t[r]=n.value)}}}(o.config);let r=s(a,o.config,n,i);return sy=Object.assign({},t),r}{let e=Object.assign({},sy);for(let e of Object.keys(n))sy[e]=n[e];let t=new a(o.config);return sy=Object.assign({},e),t}}}function cy(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function py(e){if(null==e)return e;let t=[];for(let n of e)-1===t.indexOf(n)&&t.push(n);return t}function dy(e){if(null==e)throw new Jg("Invalid value in obj: "+JSON.stringify(e));for(let t in e)if(e.hasOwnProperty(t))return!1;return!0}function hy(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new Jg(`${n} is not a valid ${t}.  Valid values are ${e} or null/undefined.`)}function fy(e,t,n=0,r=1/0){return ty(n>=0),ty(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every(e=>typeof e===t)}function my(e,t){Array.isArray(e)?(Si.assert(e.length>0,()=>t+" is unexpectedly an empty array."),e.forEach((e,n)=>my(e,`element ${n+1} of ${t}`))):Si.assert(Number.isInteger(e)&&e>0,()=>`Expected ${t} to be a positive integer, but got ${function e(t){return null===t?"null":Array.isArray(t)?"["+t.map(t=>e(t)).join(",")+"]":"string"==typeof t?`"${t}"`:""+t}(e)}.`)}function gy(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}var yy=0;function vy(){return yy++}var by={};function xy(e=""){return e in by||(by[e]=0),by[e]+=1,e+by[e].toString()}var wy=["channelsFirst","channelsLast"],_y=["nearest","bilinear"],Cy=["valid","same","causal"],Sy=["max","avg"],ky=["sum","mul","concat","ave"],Ey=new Map;function Ty(e){hy(wy,"DataFormat",e)}function Iy(e){hy(Cy,"PaddingMode",e)}function Py(e){hy(Sy,"PoolMode",e)}var Oy=[];function Ny(e,t){Oy.push(e);try{let e=t();return Oy.pop(),e}catch(e){throw Oy.pop(),e}}function Ry(e){if(!My(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===Oy.length?"":Oy.join("/")+"/")+e}function Ay(e){if(!My(e))throw new Error("Not a valid tensor name: '"+e+"'");Ey.has(e)||Ey.set(e,0);let t=Ey.get(e);if(Ey.set(e,Ey.get(e)+1),t>0){let n=`${e}_${t}`;return Ey.set(n,1),n}return e}var Dy,Vy=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function My(e){return!!e.match(Vy)}function Fy(e){return e===parseInt(e.toString(),10)}function Ly(e,t,n){null==t&&(t=0),null==n&&(n=e.length);let r=1;for(let i=t;i<n;++i)r*=e[i];return r}function zy(e){if(0===e.length)return Number.NaN;let t=Number.POSITIVE_INFINITY;for(let n=0;n<e.length;n++){let r=e[n];r<t&&(t=r)}return t}function jy(e){if(0===e.length)return Number.NaN;let t=Number.NEGATIVE_INFINITY;for(let n=0;n<e.length;n++){let r=e[n];r>t&&(t=r)}return t}function qy(e,t){if(t<e)throw new Jg(`end (${t}) < begin (${e}) is forbidden.`);let n=[];for(let r=e;r<t;++r)n.push(r);return n}function $y(){return null==Dy&&(Dy=ls().epsilon()),Dy}function By(e,t){return ja(e,t)}function Uy(e,t=-1){let n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),$s(e,n)}function Wy(e,t,n){return Xa(()=>{switch(e.rank){case 1:return lp(e,t,n);case 2:return up(e,[t,0],[n,e.shape[1]]);case 3:return cp(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return pp(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return Gs(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return Gs(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new Jg("sliceAlongFirstAxis() received an unsupported tensor rank: "+e.rank)}})}function Hy(e,t,n){return Xa(()=>{switch(e.rank){case 1:return lp(e,t,n);case 2:return up(e,[0,t],[e.shape[0],n]);case 3:return cp(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return pp(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new Jg("sliceAlongLastAxis() received an unsupported tensor rank: "+e.rank)}})}function Qy(e,t,n,r){return Xa(()=>{switch(e.rank){case 1:return lp(e,t,n);case 2:switch(r){case 1:return Wy(e,t,n);case 2:return Hy(e,t,n);default:throw new Jg("The axis is not within the rank of the tensor "+r)}case 3:switch(r){case 1:return Wy(e,t,n);case 2:return cp(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return Hy(e,t,n);default:throw new Jg("The axis is not within the rank of the tensor "+r)}case 4:switch(r){case 1:return Wy(e,t,n);case 2:return pp(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return pp(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return Hy(e,t,n);default:throw new Jg("The axis is not within the rank of the tensor "+r)}default:throw new Jg("sliceAlongLastAxis() received an unsupported tensor rank: "+e.rank)}})}function Gy(e,t=-1){let n;return t<0&&(n=e[0].rank,t=0!==n?n:0),t===e[0].rank&&(t=-1),Ws(e,t)}function Ky(e,t){switch(e.rank){case 1:return cl([e,t]);case 2:return pl([e,t],0);case 3:return dl([e,t],0);case 4:return hl([e,t],0);default:throw new Jg("concatAlongFirstAxis() received an unsupported tensor rank: "+e.rank)}}function Jy(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new Jg(`The length of input n (${t.length}) does not match the number of dimensions in input x (${e.rank})`);return uu(e,t)}function Xy(e,t=0,n=1,r,i){return jc(e,t,n,r,i)}function Yy(e,t,n,r){if(e.rank<2||t.rank<2)throw new Xg(`dot requires both inputs to be rank >= 2 but got x shape = ${e.shape} and y shape = ${t.shape}`);if(t.rank>=3){if(e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new Xg(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${e.shape} and  y shape = ${t.shape}`)}if(2===e.rank&&2===t.rank)return ed.matMul({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?tv(e.rank,r,"channelsLast"):null,activation:n});{let i=e.shape.slice(),o=i.pop();e=$s(e,[-1,o]);let a=t.shape.slice(),s=a.pop(),l=a.pop(),u=[...a,s],c=Array.from({length:t.rank},(e,n)=>0===n?t.rank-2:n<=t.rank-2?n-1:n);t=$s(Wp(t,c),[l,-1]);let p=[...i,...u],d=!1,h=!1;return $s(ed.matMul({a:e,b:t,transposeA:d,transposeB:h,bias:r?tv(e.rank,r,"channelsLast"):null,activation:n}),p)}}function Zy(e,t,n){return Xa(()=>(t=Array.isArray(t)?Sp(t,"int32"):ja(t,"int32"),du(e,t,n)))}function ev(e){return hs(e,e)}function tv(e,t,n){let r=t.shape;if(1!==t.rank&&t.rank!==e)throw new Jg(`Unexpected bias dimensions: ${t.rank}; expected it to be 1 or ${e}`);if(5===e){if("channelsFirst"===n)return 1===r.length?$s(t,[1,r[0],1,1,1]):$s(t,[1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?$s(t,[1,1,1,1,r[0]]):$s(t,[1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?$s(t,[1,r[0],1,1]):$s(t,[1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?$s(t,[1,1,1,r[0]]):$s(t,[1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?$s(t,[1,r[0],1]):$s(t,[1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?$s(t,[1,1,r[0]]):$s(t,[1].concat(r))}else if(e<3)return t;throw new Jg("Unsupported input rank by biasAdd: "+t.rank)}function nv(e,t,n){return Xa(()=>(null==n&&(n="channelsLast"),Ty(n),cs(e,tv(e.rank,t,n))))}function rv(e,t,n,r){return Xa(()=>Jp(e,t,n,r))}function iv(e,t,n=!1){return n?e():t()}var ov=["fanIn","fanOut","fanAvg"],av=["normal","uniform","truncatedNormal"];var sv=class extends fh.Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}},lv=class extends sv{apply(e,t){return Xu(e,t)}};lv.className="Zeros",fh.registerClass(lv);var uv=class extends sv{apply(e,t){return Yu(e,t)}};uv.className="Ones",fh.registerClass(uv);var cv=class extends sv{constructor(e){if(super(),"object"!=typeof e)throw new Jg("Expected argument of type ConstantConfig but got "+e);if(void 0===e.value)throw new Jg("config must have value set but got "+e);this.value=e.value}apply(e,t){return Xa(()=>hs(eu(this.value),Yu(e,t)))}getConfig(){return{value:this.value}}};cv.className="Constant",fh.registerClass(cv);var pv=class extends sv{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,t){return $c(e,this.minval,this.maxval,t,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}};pv.className="RandomUniform",fh.registerClass(pv);var dv=class extends sv{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new Xg(`randomNormal does not support dType ${t}.`);return Xy(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}};dv.className="RandomNormal",fh.registerClass(dv);var hv=class extends sv{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new Xg(`truncatedNormal does not support dType ${t}.`);return Mp(e,this.mean,this.stddev,t,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}};hv.className="TruncatedNormal",fh.registerClass(hv);var fv=class extends sv{constructor(e){super(),this.gain=null!=e.gain?e.gain:1}apply(e,t){return Xa(()=>{if(2!==e.length||e[0]!==e[1])throw new Jg("Identity matrix initializer can only be used for 2D square matrices.");return hs(this.gain,cu(e[0]))})}getConfig(){return{gain:this.gain}}};fv.className="Identity",fh.registerClass(fv);var mv=class extends sv{constructor(e){if(super(),e.scale<0)throw new Jg("scale must be a positive float. Got: "+e.scale);this.scale=null==e.scale?1:e.scale,this.mode=null==e.mode?"fanIn":e.mode,function(e){hy(ov,"FanMode",e)}(this.mode),this.distribution=null==e.distribution?"normal":e.distribution,function(e){hy(av,"Distribution",e)}(this.distribution),this.seed=e.seed}apply(e,t){let n=function(e,t="channelsLast"){let n,r;if(Ty(t),2===e.length)n=e[0],r=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===t){let t=Ly(e,2);n=e[1]*t,r=e[0]*t}else if("channelsLast"===t){let t=Ly(e,0,e.length-2);n=e[e.length-2]*t,r=e[e.length-1]*t}}else{let t=Ly(e);n=Math.sqrt(t),r=Math.sqrt(t)}return[n,r]}(e),r=n[0],i=n[1],o=this.scale;if("fanIn"===this.mode?o/=Math.max(1,r):"fanOut"===this.mode?o/=Math.max(1,i):o/=Math.max(1,(r+i)/2),"normal"===this.distribution){let n=Math.sqrt(o);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new Xg(`${this.getClassName()} does not support dType ${t}.`);return Mp(e,0,n,t,this.seed)}{let n=Math.sqrt(3*o);return $c(e,-n,n,t,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}};mv.className="VarianceScaling",fh.registerClass(mv);var gv=class extends mv{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return mv.className}};gv.className="GlorotUniform",fh.registerClass(gv);var yv=class extends mv{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return mv.className}};yv.className="GlorotNormal",fh.registerClass(yv);var vv=class extends mv{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return mv.className}};vv.className="HeNormal",fh.registerClass(vv);var bv=class extends mv{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return mv.className}};bv.className="HeUniform",fh.registerClass(bv);var xv=class extends mv{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})}getClassName(){return mv.className}};xv.className="LeCunNormal",fh.registerClass(xv);var wv=class extends mv{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:null==e?null:e.seed})}getClassName(){return mv.className}};wv.className="LeCunUniform",fh.registerClass(wv);var _v=class extends sv{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=null==e.gain?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,t){return Xa(()=>{if(e.length<2)throw new Xg("Shape must be at least 2D.");if("int32"!==t&&"float32"!==t&&void 0!==t)throw new TypeError(`Unsupported data type ${t}.`);t=t;let n=Si.sizeFromShape(e.slice(0,-1)),r=e[e.length-1],i=n*r;i>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${i}) elements: Slowness may result.`);let o=Xy([Math.max(r,n),Math.min(r,n)],0,1,t,this.seed),a=ch.qr(o,!1),s=a[0],l=a[1].flatten().stridedSlice([0],[Math.min(r,n)*Math.min(r,n)],[Math.min(r,n)+1]);return s=hs(s,l.sign()),n<r&&(s=s.transpose()),hs(eu(this.gain),s.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}};_v.className="Orthogonal",fh.registerClass(_v);var Cv={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function Sv(e,t={}){return uy(e,fh.SerializationMap.getMap().classNameMap,t,"initializer")}function kv(e){return ly(e)}function Ev(e){if("string"==typeof e){let t=e in Cv?Cv[e]:e;if("GlorotNormal"===t)return new yv;if("GlorotUniform"===t)return new gv;if("HeNormal"===t)return new vv;if("HeUniform"===t)return new bv;if("LeCunNormal"===t)return new xv;if("LeCunUniform"===t)return new wv;{let e={};return e.className=t,e.config={},Sv(e)}}return e instanceof sv?e:Sv(e)}function Tv(e){return Array.isArray(e)&&Array.isArray(e[0])}function Iv(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function Pv(e){let t;if(Array.isArray(e)){if(1!==e.length)throw new Jg("Expected Tensor length to be 1; got "+e.length);t=e[0]}else t=e;return t}function Ov(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return(e=e)[0];throw new Jg("Expected exactly 1 Shape; got "+e.length)}return e}function Nv(e){let t=0;for(let n of e)0===n.shape.length?t+=1:t+=n.shape.reduce((e,t)=>e*t);return t}var Rv="Variable",Av=class{constructor(e,t="float32",n=Rv,r=!0,i=null){this.dtype=null==t?"float32":t,this.shape=e.shape,this.id=vy(),n=null==n?Rv:n,this.originalName=Ry(n),this.name=Ay(this.originalName),this.trainable_=r,this.constraint=i,this.val=qp(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}};function Dv(e){return e.map(e=>e.read())}function Vv(e){e.forEach(e=>{e[0].write(e[1])})}var Mv=class{constructor(e){this.dtype=e.dtype,this.shape=e.shape,null!=e.shape?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}},Fv=class{constructor(e,t,n,r,i,o,a){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=i,this.outputTensorIndex=a,this.id=vy(),null!=o&&(this.originalName=Ry(o),this.name=Ay(this.originalName)),this.rank=t.length}},Lv=0,zv=class{constructor(e,t){this.callArgs=t,this.id=Lv++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(let t of e.inboundLayers)null!=t&&t.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){let e=[];for(let t of this.inboundLayers)null!=t?e.push(t.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},jv=0,qv=class extends fh.Serializable{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=jv++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let t=e.name;if(!t){let e=this.getClassName();t=oy(e)+"_"+xy(e)}if(this.name=t,this.trainable_=null==e.trainable||e.trainable,null!=e.inputShape||null!=e.batchInputShape){let t;if(null!=e.batchInputShape)t=e.batchInputShape;else if(null!=e.inputShape){let n=null;null!=e.batchSize&&(n=e.batchSize),t=[n].concat(e.inputShape)}this.batchInputShape=t;let n=e.dtype;null==n&&(n=e.inputDType),null==n&&(n="float32"),this.dtype=n}null!=e.weights?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,t){return e.name+"_ib-"+t.toString()}getNodeAtIndex(e,t){if(0===this.inboundNodes.length)throw new Kg(`The layer has never been called and thus has no defined ${t}.`);if(this.inboundNodes.length<=e)throw new Jg(`Asked to get ${t} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return ry(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return ry(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new Gg(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(0===this.inboundNodes.length)throw new Gg(`Layer ${this.name} is not connected, no input to return.`);return ry(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(0===this.inboundNodes.length)throw new Gg(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new Gg(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return ry(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(t=>t.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){if(e=iy(e),null==this.inputSpec||0===this.inputSpec.length)return;let t=iy(this.inputSpec);if(e.length!==t.length)throw new Jg(`Layer ${this.name} expects ${t.length} inputs, but it received ${e.length} input tensors. Input received: ${e}`);for(let n=0;n<e.length;n++){let r=e[n],i=t[n];if(null==i)continue;let o=r.rank;if(null!=i.ndim&&o!==i.ndim)throw new Jg(`Input ${n} is incompatible with layer ${this.name}: expected ndim=${i.ndim}, found ndim=${o}`);if(null!=i.maxNDim&&o>i.maxNDim)throw new Jg(`Input ${n} is incompatible with layer ${this.name}: expected max_ndim=${i.maxNDim}, found ndim=${o}`);if(null!=i.minNDim&&o<i.minNDim)throw new Jg(`Input ${n} is incompatible with layer ${this.name}: expected min_ndim=${i.minNDim}, found ndim=${o}.`);if(null!=i.dtype&&r.dtype!==i.dtype)throw new Jg(`Input ${n} is incompatible with layer ${this.name} : expected dtype=${i.dtype}, found dtype=${r.dtype}.`);if(i.axes){let e=r.shape;for(let t in i.axes){let r=Number(t),o=i.axes[t],a=r>=0?e[r]:e[e.length+r];if(null!=o&&-1===[o,null].indexOf(a))throw new Jg(`Input ${n} is incompatible with layer ${this.name}: expected axis ${r} of input shape to have value ${o} but got shape ${e}.`)}}if(null!=i.shape)for(let e=0;e<i.shape.length;++e){let t=i.shape[e],o=r.shape[e];if(null!=t&&null!=o&&t!==o)throw new Jg(`Input ${n} is incompatible with layer ${this.name}: expected shape=${i.shape}, found shape=${r.shape}.`)}}}call(e,t){return e}invokeCallHook(e,t){null!=this._callHook&&this._callHook(e,t)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,t){t=t||{},this.assertNotDisposed();let n=iy(e),r=!0;for(let e of n)if(!(e instanceof Fv)){r=!1;break}let i=!0;for(let e of n)if(e instanceof Fv){i=!1;break}if(r===i)throw new Jg("Arguments to apply() must be all SymbolicTensors or all Tensors");return Ny(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);let t=[];for(let n of iy(e))t.push(n.shape);this.build(ry(t)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),null===this._refCount&&i&&(this._refCount=1)}if(this.assertInputCompatibility(e),i){let r=this.call(e,t),i=iy(r),o=[];for(let e of i)-1!==n.indexOf(e)&&(e=e.clone()),o.push(e);if(r=ry(o),null!=this.activityRegularizer)throw new Xg("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return r}{let n,r=function(e){e=iy(e);let t=[];for(let n of e)t.push(n.shape);return ry(t)}(e),i=this.computeOutputShape(r),o="float32";if(this.warnOnIncompatibleInputShape(Array.isArray(e)?r[0]:r),n=null!=i&&i.length>0&&Array.isArray(i[0])?i.map((n,r)=>new Fv(o,n,this,iy(e),t,this.name,r)):new Fv(o,i,this,iy(e),t,this.name),this.addInboundNode(e,n,null,null,r,i,t),this._refCount++,null!=this.activityRegularizer)throw new Xg("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return n}})}warnOnIncompatibleInputShape(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let t=!1;this.batchInputShape.forEach((n,r)=>{null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)}),t&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new Gg(`The layer ${this.name} has never been called and thus has no defined output shape.`);let e=[];for(let t of this.inboundNodes){let n=JSON.stringify(t.outputShapes);-1===e.indexOf(n)&&e.push(n)}if(1===e.length){let e=this.inboundNodes[0].outputShapes;return Array.isArray(e)&&Array.isArray(e[0])&&1===e.length?e[0]:e}throw new Gg(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Kg(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return Nv(this.weights)}build(e){this.built=!0}getWeights(e=!1){return Dv(e?this.trainableWeights:this.weights)}setWeights(e){Xa(()=>{let t=this.weights;if(t.length!==e.length)throw new Jg(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${t.length} weights. Provided weights: ${e}...`);if(0===t.length)return;let n=[],r=Dv(t);for(let i=0;i<r.length;++i){let o=r[i],a=t[i],s=e[i];if(!Si.arraysEqual(o.shape,s.shape))throw new Jg(`Layer weight shape ${o.shape} not compatible with provided weight shape ${s.shape}`);n.push([a,s])}Vv(n)})}addWeight(e,t,n,r,i,o,a,s){if(-1!==this._addedWeightNames.indexOf(e))throw new Jg(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=null!=s?s():Ev("zeros"));let l=r.apply(t,n),u=new Av(l,n,e,o,a);return l.dispose(),null!=i&&this.addLoss(()=>i.apply(u.read())),null==o&&(o=!0),o?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){null==e||Array.isArray(e)&&0===e.length||(e=iy(e),void 0!==this._losses&&null!==this._losses&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,t){if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);t.forEach(e=>{if(null!=e)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)})}return null}return t}addInboundNode(e,t,n,r,i,o,a=null){let s=iy(e);t=iy(t),n=iy(n),r=iy(r),i=Iv(i),o=Iv(o);let l=[],u=[],c=[];for(let e of s)l.push(e.sourceLayer),u.push(e.nodeIndex),c.push(e.tensorIndex);new zv({outboundLayer:this,inboundLayers:l,nodeIndices:u,tensorIndices:c,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:i,outputShapes:o},a);for(let e=0;e<t.length;e++)t[e].sourceLayer=this,t[e].nodeIndex=this.inboundNodes.length-1,t[e].tensorIndex=e}getConfig(){let e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(0===this._refCount)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(null===this._refCount)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return 0==--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}};var $v=class extends qv{constructor(e){if(super({dtype:e.dtype,name:null!=e.name?e.name:xy("input").toString()}),null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new Jg("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let t=e.batchInputShape;if(null==t){if(null==e.inputShape)throw new Jg("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");t=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new Jg("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");let n=e.dtype||"float32";this.batchInputShape=t,this.dtype=n,this.inputSpec=[{shape:t}];let r=new Fv(this.dtype,this.batchInputShape,this,[],{},this.name);r.nodeIndex=0,r.tensorIndex=0,new zv({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[r],outputTensors:[r],inputMasks:[null],outputMasks:[null],inputShapes:[t],outputShapes:[t]})}apply(e,t){throw new Jg("Cannot pass any input to an InputLayer's apply() method. InputLayer name: "+this.name)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}};function Bv(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new Jg("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));let n=e.dtype;return null==n&&(n="float32"),new $v({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}$v.className="InputLayer",fh.registerClass($v);var Uv=class{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof Uv)for(let t in e.id2Value)this.id2Value[t]=e.id2Value[t],t in e.id2Mask&&(this.id2Mask[t]=e.id2Mask[t]);else{if(null==e)return;for(let t of e)this.add(t.key,t.value)}}add(e,t,n){if(null!=this.id2Value[e.id])throw new Jg(`Duplicate key: name=${e.name}, id=${e.id}`);return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return ja(t,e.dtype)}catch(n){throw new Jg(`The dtype of the feed (${t.dtype}) can not be cast to the dtype of the key '${e.name}' (${e.dtype}).`)}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return null!=this.id2Value[e.id]}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof Fv){if(null==this.id2Value[e.id])throw new Jg("Nonexistent key: "+e.name);return this.id2Value[e.id]}{let t=this.name2Id[e];if(null==t)throw new Jg("Feed dict has no SymbolicTensor name: "+e);return this.id2Value[t]}}getMask(e){if(e instanceof Fv){if(null==this.id2Value[e.id])throw new Jg("Nonexistent key: "+e.name);return this.id2Mask[e.id]}{let t=this.name2Id[e];if(null==t)throw new Jg("Feed dict has no SymbolicTensor name: "+e);return this.id2Mask[t]}}disposeMasks(){null!=this.id2Mask&&Ya(this.id2Mask)}},Wv=new Zg,Hv=new Zg;function Qv(e,t,n,r){let i=null!=n&&n.training,o=Array.isArray(e),a=o?e:[e],s=a.map(e=>e.name),l=[],u=t.names();for(let e of s)-1!==u.indexOf(e)?l.push(t.getValue(e)):l.push(null);null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);let c,p=s.join(",")+"|"+t.names().sort().join(","),d=Wv.get(p);if(null==d){let e=function(e,t){Si.assert(null!=e&&e.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(1===e.length){let i=Kv(e[0],t);n=i.sorted,r=i.recipientMap}else{let i=new Set;for(let o of e){let{sorted:e,recipientMap:a}=Kv(o,t);for(let t of e)i.has(t.name)||(n.push(t),i.add(t.name));for(let e in a)null==r[e]&&(r[e]=new Set),a[e].forEach(t=>r[e].add(t))}}return{sorted:n,recipientCounts:Gv(r)}}(a,t);d=e.sorted,c=e.recipientCounts,Wv.put(p,d),Hv.put(p,c)}c={},i||Object.assign(c,Hv.get(p));let h=new Uv(t);for(let e=0;e<d.length;++e){if(null!=r){let e=Ka().numTensors;e>r.maxNumTensors&&(r.maxNumTensors=e),e<r.minNumTensors&&(r.minNumTensors=e)}let o=d[e],a=o.sourceLayer;if(a instanceof $v)continue;let u=[],p=[],f=[],m=!1;for(let e of o.inputs){let n=h.getValue(e),r=h.getMask(e);u.push(n),p.push(r),null!=r&&(m=!0),i||(c[e.name]--,0===c[e.name]&&!t.hasKey(e)&&-1===s.indexOf(e.name)&&!n.isDisposed&&!0!==e.sourceLayer.stateful&&f.push(n))}m&&((n=n||{}).mask=p[0]);let g=iy(a.apply(u,n)),y=null;a.supportsMasking&&(y=a.computeMask(u,p));let v=Jv(o),b=Array.isArray(v)?v:[v];for(let e=0;e<b.length;++e){h.hasKey(b[e])||h.add(b[e],g[e],Array.isArray(y)?y[0]:y);let t=s.indexOf(b[e].name);-1!==t&&(l[t]=g[e])}i||Ya(f)}return h.disposeMasks(),o?l:l[0]}function Gv(e){let t={};for(let n in e)t[n]=e[n].size;return t}function Kv(e,t){let n=new Set,r=[],i={};for(let e of t.names())n.add(e);let o=[],a=[];for(o.push(e);o.length>0;){let e=o[o.length-1];if(n.has(e.name)){o.pop();continue}let t=a[a.length-1]===o.length-1;if(0===e.inputs.length||t)o.pop(),r.push(e),n.add(e.name),t&&a.pop();else{a.push(o.length-1);for(let t of e.inputs)null==i[t.name]&&(i[t.name]=new Set),i[t.name].add(e.name),!n.has(t.name)&&o.push(t)}}return{sorted:r,recipientMap:i}}function Jv(e){let t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{let n=null;for(let t=0;t<e.sourceLayer.inboundNodes.length;++t)for(let r of e.sourceLayer.inboundNodes[t].outputTensors)if(r.id===e.id){n=t;break}t=e.sourceLayer.getOutputAt(n)}return t}qe().registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,(function(e){null!=Wv&&Wv.setMaxEntries(e),null!=Hv&&Hv.setMaxEntries(e)}));var Xv={};function Yv(e,t){return Xa(()=>tu(ru(hs(e,e),t,!0)))}b(Xv,{maxNorm:()=>lb,minMaxNorm:()=>pb,nonNeg:()=>cb,unitNorm:()=>ub});var Zv=class extends fh.Serializable{getConfig(){return{}}},eb=class extends Zv{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return Xa(()=>{let t=Yv(e,this.axis),n=ul(t,0,this.maxValue);return hs(e,ds(n,cs($y(),t)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}};eb.className="MaxNorm",fh.registerClass(eb);var tb=class extends Zv{constructor(e){super(),this.defaultAxis=0,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return Xa(()=>ds(e,cs($y(),Yv(e,this.axis))))}getConfig(){return{axis:this.axis}}};tb.className="UnitNorm",fh.registerClass(tb);var nb=class extends Zv{apply(e){return Qc(e)}};nb.className="NonNeg",fh.registerClass(nb);var rb=class extends Zv{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=null!=e.minValue?e.minValue:this.defaultMinValue,this.maxValue=null!=e.maxValue?e.maxValue:this.defaultMaxValue,this.rate=null!=e.rate?e.rate:this.defaultRate,this.axis=null!=e.axis?e.axis:this.defaultAxis}apply(e){return Xa(()=>{let t=Yv(e,this.axis),n=cs(hs(this.rate,ul(t,this.minValue,this.maxValue)),hs(1-this.rate,t));return hs(e,ds(n,cs($y(),t)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}};rb.className="MinMaxNorm",fh.registerClass(rb);var ib={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function ob(e){return ly(e)}function ab(e,t={}){return uy(e,fh.SerializationMap.getMap().classNameMap,t,"constraint")}function sb(e){if(null==e)return null;if("string"==typeof e){return ab({className:e in ib?ib[e]:e,config:{}})}return e instanceof Zv?e:ab(e)}function lb(e){return new eb(e)}function ub(e){return new tb(e)}function cb(){return new nb}function pb(e){return new rb(e)}var db={};function hb(){return new lv}function fb(){return new uv}function mb(e){return new cv(e)}function gb(e){return new pv(e)}function yb(e){return new dv(e)}function vb(e){return new hv(e)}function bb(e){return new fv(e)}function xb(e){return new mv(e)}function wb(e){return new gv(e)}function _b(e){return new yv(e)}function Cb(e){return new vv(e)}function Sb(e){return new bv(e)}function kb(e){return new xv(e)}function Eb(e){return new wv(e)}function Tb(e){return new _v(e)}b(db,{constant:()=>mb,glorotNormal:()=>_b,glorotUniform:()=>wb,heNormal:()=>Cb,heUniform:()=>Sb,identity:()=>bb,leCunNormal:()=>kb,leCunUniform:()=>Eb,ones:()=>fb,orthogonal:()=>Tb,randomNormal:()=>yb,randomUniform:()=>gb,truncatedNormal:()=>vb,varianceScaling:()=>xb,zeros:()=>hb});var Ib,Pb={};async function Ob(e){if(null==e)return;let t=[],n=[],r=[];for(let i in e){let o=e[i];if("number"!=typeof o){let e=o;t.push(e.data()),n.push(i),r.push(e)}}if(t.length>0){let i=await Promise.all(t);for(let t=0;t<i.length;++t)e[n[t]]=i[t][0];Ya(r)}}function Nb(e){if(null!=e)for(let t in e){let n=e[t];"number"!=typeof n&&n.dispose()}}b(Pb,{Layer:()=>qv,RNN:()=>qw,RNNCell:()=>$w,activation:()=>xC,add:()=>PC,alphaDropout:()=>bS,average:()=>OC,averagePooling1d:()=>zC,averagePooling2d:()=>$C,averagePooling3d:()=>WC,avgPool1d:()=>jC,avgPool2d:()=>BC,avgPool3d:()=>HC,avgPooling1d:()=>qC,avgPooling2d:()=>UC,avgPooling3d:()=>QC,batchNormalization:()=>MC,bidirectional:()=>pS,categoryEncoding:()=>SS,centerCrop:()=>_S,concatenate:()=>NC,conv1d:()=>pC,conv2d:()=>dC,conv2dTranspose:()=>hC,conv3d:()=>fC,conv3dTranspose:()=>mC,convLstm2d:()=>sS,convLstm2dCell:()=>lS,cropping2D:()=>yC,dense:()=>wC,depthwiseConv2d:()=>bC,dot:()=>VC,dropout:()=>_C,elu:()=>oC,embedding:()=>IC,flatten:()=>SC,gaussianDropout:()=>vS,gaussianNoise:()=>yS,globalAveragePooling1d:()=>GC,globalAveragePooling2d:()=>KC,globalMaxPool1d:()=>hS,globalMaxPool2d:()=>fS,globalMaxPooling1d:()=>JC,globalMaxPooling2d:()=>XC,gru:()=>tS,gruCell:()=>nS,input:()=>$x,inputLayer:()=>iC,layerNormalization:()=>FC,leakyReLU:()=>sC,lstm:()=>rS,lstmCell:()=>iS,masking:()=>xS,maxPool1d:()=>mS,maxPool2d:()=>gS,maxPooling1d:()=>YC,maxPooling2d:()=>ZC,maxPooling3d:()=>eS,maximum:()=>RC,minimum:()=>AC,multiply:()=>DC,permute:()=>TC,prelu:()=>lC,randomWidth:()=>kS,reLU:()=>aC,repeatVector:()=>kC,rescaling:()=>wS,reshape:()=>EC,resizing:()=>CS,rnn:()=>uS,separableConv2d:()=>gC,simpleRNN:()=>oS,simpleRNNCell:()=>aS,softmax:()=>uC,spatialDropout1d:()=>CC,stackedRNNCells:()=>cS,thresholdedReLU:()=>cC,timeDistributed:()=>dS,upSampling2d:()=>vC,zeroPadding2d:()=>LC}),function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(Ib||(Ib={}));var Rb=class{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,t){}async onEpochEnd(e,t){}async onBatchBegin(e,t){}async onBatchEnd(e,t){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}},Ab=class{constructor(e,t=10){null==e&&(e=[]),this.callbacks=e,this.queueLength=t}append(e){this.callbacks.push(e)}setParams(e){for(let t of this.callbacks)t.setParams(e)}setModel(e){for(let t of this.callbacks)t.setModel(e)}async onEpochBegin(e,t){null==t&&(t={});for(let n of this.callbacks)await n.onEpochBegin(e,t)}async onEpochEnd(e,t){null==t&&(t={});for(let n of this.callbacks)await n.onEpochEnd(e,t)}async onBatchBegin(e,t){null==t&&(t={});for(let n of this.callbacks)await n.onBatchBegin(e,t)}async onBatchEnd(e,t){null==t&&(t={});for(let n of this.callbacks)await n.onBatchEnd(e,t)}async onTrainBegin(e){null==e&&(e={});for(let t of this.callbacks)await t.onTrainBegin(e)}async onTrainEnd(e){null==e&&(e={});for(let t of this.callbacks)await t.onTrainEnd(e)}},Db=class extends Rb{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,t){null==t&&(t={});let n=null==t.size?0:t.size;this.seen+=n;for(let e in t){let r=t[e];if("number"==typeof r)this.totals.hasOwnProperty(e)||(this.totals[e]=0),this.totals[e]=this.totals[e]+r*n;else{let t;e in this.totals?t=this.totals[e]:this.totals[e]=0;let i=Xa(()=>cs(this.totals[e],hs(r,n)));this.totals[e]=i,null!=t&&t.dispose()}}}async onEpochEnd(e,t){if(null!=t)for(let e of this.params.metrics)null!=this.totals[e]&&("number"==typeof this.totals[e]?t[e]=this.totals[e]/this.seen:Xa(()=>{let n=hs(ds(1,this.seen),this.totals[e]);t[e]=n,this.totals[e].dispose(),Za(t[e])}))}},Vb=class extends Rb{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,t){null==t&&(t={}),this.epoch.push(e);for(let e in t)null==this.history[e]&&(this.history[e]=[]),this.history[e].push(t[e])}async syncData(){let e=[],t=[],n=[];for(let r in this.history){let i=this.history[r];for(let o=0;o<i.length;++o)if("number"!=typeof i[o]){let a=i[o];e.push(a.data()),t.push(r),n.push(o)}}let r=await Promise.all(e);for(let e=0;e<r.length;++e)this.history[t[e]][n[e]].dispose(),this.history[t[e]][n[e]]=r[e][0]}},Mb=class extends Rb{constructor(e,t){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||Of,this.yieldEvery=t||"auto","auto"===this.yieldEvery&&(this.yieldEvery=125),"never"===this.yieldEvery&&null!=e.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");Si.isNumber(this.yieldEvery)&&(this.maybeWait=function(e,t,n){let r,i=null!=n?n():Si.now();return(...o)=>{let a=null!=n?n():Si.now();return a-i<t||(i=a,r=e(...o)),r}}(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,t,n){let r=[];null!=this.yield&&(await Ob(n),r.push(this.yield(e,t,n))),r.push(this.nextFrameFunc()),await Promise.all(r)}async onEpochBegin(e,t){this.currentEpoch=e,null!=this.epochBegin&&(await Ob(t),await this.epochBegin(e,t))}async onEpochEnd(e,t){let n=[];null!=this.epochEnd&&(await Ob(t),n.push(this.epochEnd(e,t))),"epoch"===this.yieldEvery&&n.push(this.nextFrameFunc()),await Promise.all(n)}async onBatchBegin(e,t){null!=this.batchBegin&&(await Ob(t),await this.batchBegin(e,t))}async onBatchEnd(e,t){let n=[];null!=this.batchEnd&&(await Ob(t),n.push(this.batchEnd(e,t))),"batch"===this.yieldEvery?n.push(this.nextFrameFunc()):Si.isNumber(this.yieldEvery)&&n.push(this.maybeWait(this.currentEpoch,e,t)),await Promise.all(n)}async onTrainBegin(e){null!=this.trainBegin&&(await Ob(e),await this.trainBegin(e))}async onTrainEnd(e){null!=this.trainEnd&&(await Ob(e),await this.trainEnd(e))}};function Fb(e,t){return null==e&&(e={}),e instanceof Rb?[e]:Array.isArray(e)&&e[0]instanceof Rb?e:iy(e).map(e=>new Mb(e,t))}var Lb=class{constructor(){}static registerCallbackConstructor(e,t){Si.assert(e>=0&&Number.isInteger(e),()=>"Verbosity level is expected to be an integer >= 0, but got "+e),Lb.checkForDuplicate(t),null==Lb.constructors[e]&&(Lb.constructors[e]=[]),Lb.constructors[e].push(t)}static checkForDuplicate(e){for(let t in Lb.constructors)Lb.constructors[+t].forEach(t=>{if(t===e)throw new Jg("Duplicate callback constructor.")})}static clear(){Lb.constructors={}}static createCallbacks(e){let t=[];for(let n in Lb.constructors){let r=+n;e>=r&&t.push(...Lb.constructors[r])}return t.map(e=>new e)}};function zb(e,t,n,r,i,o,a,s,l){let u=new Vb,c=[new Db,...Lb.createCallbacks(t)];null!=e&&c.push(...e),c.push(u);let p=new Ab(c);return p.setParams({epochs:n,initialEpoch:r,samples:i,steps:o,batchSize:a,verbose:t,doValidation:s,metrics:l}),{callbackList:p,history:u}}function jb(e,t={},n=!1){return uy(e,fh.SerializationMap.getMap().classNameMap,t,"layer",n)}function qb(e,t){return Xa(()=>{"float32"!==e.dtype&&(e=ja(e,"float32"));let n=ru(ev(e),t,!0),r=ll(n.shape,$y()),i=tu(Ku(n,r));return ds(e,i)})}function $b(e,t){return Xa(()=>Ju(ev(Mu(t,e)),-1))}function Bb(e,t){return Xa(()=>Ju(fs(Mu(t,e)),-1))}function Ub(e,t){return Xa(()=>{let n=Mu(e,t),r=ul(fs(e),$y(),Number.MAX_VALUE),i=fs(ds(n,r));return hs(100,Ju(i,-1))})}function Wb(e,t,n=!1){return Xa(()=>{if(n)t=dp(t);else{let e=ru(t,t.shape.length-1,!0);t=ds(t,e)}return t=ul(t,$y(),1-$y()),Au(ru(hs(ja(e,"float32"),Su(t)),t.shape.length-1))})}function Hb(e,t,n=!1){return Xa(()=>{let r=ja(pu(function(e){let t=[Ly(e.shape)];return $s(e,t)}(e)),"int32"),i=(t=ul(t,$y(),1-$y())).shape;return Wb($s(sc(r,i[i.length-1]),i),t,n)})}function Qb(e,t){return Xa(()=>{let n;return n=ul(t,$y(),1-$y()),n=Su(ds(n,Mu(1,n))),Ju(function(e,t){if(!Si.arraysEqual(e.shape,t.shape))throw new Jg(`logits and labels must have the same shape, but got shapes ${JSON.stringify(e.shape)} and ${JSON.stringify(t.shape)}`);return Xa(()=>{let n=Qc(t),r=Au(fs(t));return cs(Mu(n,hs(t,e)),ku(au(r)))})}(e,n),-1)})}function Gb(e,t){return Xa(()=>{let n=qb(e,-1),r=qb(t,-1),i=hs(n,r);return Au(ru(i,-1))})}Lb.constructors={};var Kb={meanSquaredError:$b,meanAbsoluteError:Bb,meanAbsolutePercentageError:Ub,meanSquaredLogarithmicError:function(e,t){return Xa(()=>{let n=ul(t,$y(),Number.MAX_VALUE),r=Su(cs(1,n)),i=ul(e,$y(),Number.MAX_VALUE),o=Su(cs(1,i));return Ju(ev(Mu(r,o)),-1)})},squaredHinge:function(e,t){return Xa(()=>{let n=Ku(0,Mu(1,hs(e,t)));return Ju(ev(n),-1)})},hinge:function(e,t){return Xa(()=>{let n=Ku(0,Mu(1,hs(e,t)));return Ju(n,-1)})},categoricalHinge:function(e,t){return Xa(()=>{let n=ru(hs(e,t),-1),r=Xl(hs(Mu(1,e),t),-1);return Ku(0,cs(1,Mu(r,n)))})},logcosh:function(e,t){return Xa(()=>{let n=Math.log(2),r=Mu(t,e),i=Mu(cs(r,Du(hs(-2,r))),n);return Ju(i,-1)})},categoricalCrossentropy:Wb,sparseCategoricalCrossentropy:Hb,binaryCrossentropy:Qb,kullbackLeiblerDivergence:function(e,t){return Xa(()=>{let n=ul(e,$y(),1),r=ul(t,$y(),1);return ru(hs(e,Su(ds(n,r))),-1)})},poisson:function(e,t){return Xa(()=>{let n=Su(cs($y(),t));return Ju(Mu(t,hs(e,n)),-1)})},cosineProximity:Gb};function Jb(e){if("string"==typeof e){if(e in Kb)return Kb[e];let t="Unknown loss "+e;throw e.toLowerCase().includes("softmaxcrossentropy")&&(t=`Unknown loss ${e}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new Jg(t)}return e}function Xb(e,t){return Xa(()=>{let n=hs(.5,lc(t)),r=By(hu(t,n),e.dtype);return Ju(Dl(e,r),-1)})}function Yb(e,t){return Xa(()=>By(Dl(xs(e,-1),xs(t,-1)),"float32"))}function Zb(e,t){return Xa(()=>ja(ru(zu(Dl(e,1),Dl(t,1))),"float32"))}function ex(e,t){return Xa(()=>{let n=Zb(e,t),r=function(e,t){return Xa(()=>ja(ru(zu(Dl(e,0),Dl(t,1))),"float32"))}(e,t),i=cs(n,r);return ja(Vl(hu(i,0),ds(n,i),0),"float32")})}function tx(e,t){return Xa(()=>{let n=Zb(e,t),r=function(e,t){return Xa(()=>ja(ru(zu(Dl(e,1),Dl(t,0))),"float32"))}(e,t),i=cs(n,r);return ja(Vl(hu(i,0),ds(n,i),0),"float32")})}function nx(e,t){return Qb(e,t)}function rx(e,t){return e.rank===t.rank&&(e=bp(e,[e.rank-1])),(t=xs(t,-1)).dtype!==e.dtype&&(t=ja(t,e.dtype)),ja(Dl(e,t),"float32")}var ix=Wb,ox=Hb,ax={binaryAccuracy:Xb,categoricalAccuracy:Yb,precision:ex,categoricalCrossentropy:ix,sparseCategoricalCrossentropy:ox,mse:$b,MSE:$b,mae:Bb,MAE:Bb,mape:Ub,MAPE:Ub,cosine:Gb};function sx(e){if("string"==typeof e&&e in ax)return ax[e];if("string"!=typeof e&&null!=e)return e;throw new Jg("Unknown metric "+e)}function lx(e){if(ty(null!==e,"Unknown LossOrMetricFn "+e),"string"==typeof e)return e;{let t;for(let n of Object.keys(Kb))if(Kb[n]===e){t=n;break}if(void 0!==t)return t;for(let n of Object.keys(ax))if(ax[n]===e){t=n;break}return void 0!==t?t:e.name}}function ux(e,t,n=!1){if(null==e||"object"!=typeof e||Object.getPrototypeOf(e)!==Object.prototype||!function e(t){if(null===t)return!0;if("object"==typeof t){if(Object.getPrototypeOf(t)===Object.prototype){let n=Object.keys(t);for(let r of n)if("string"!=typeof r||!e(t[r]))return!1;return!0}if(Array.isArray(t)){for(let n of t)if(!e(n))return!1;return!0}return!1}{let e=typeof t;return"string"===e||"number"===e||"boolean"===e}}(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){let n=JSON.stringify(e);n.length>1048576&&console.warn(`User-defined metadata of model "${t}" is too large in size (length=${n.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= 1048576.`)}}function cx(e,t,n,r=console.log){let i,o=function(e){let t=!0,n=[],r=[];for(let t in e.nodesByDepth)n.push(e.nodesByDepth[t]);for(let e of n){if(e.length>1||1===e.length&&e[0].inboundLayers.length>1){t=!1;break}r.push(...e)}if(t)for(let n of e.layers){let e=!1;for(let i of n.inboundNodes)if(-1!==r.indexOf(i)){if(e){t=!1;break}e=!0}if(!t)break}return t}(e),a=["Layer (type)","Input Shape","Output shape","Param #"];if(o?(t=t||90,n=n||[.32,.61,.89,1]):(t=t||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(e=>Math.floor(t*e))),!o){a.push("Receives inputs"),i=[];for(let t in e.nodesByDepth)i.push(...e.nodesByDepth[t])}r("_".repeat(t)),px(a,n,r),r("=".repeat(t));let s=e.layers;for(let e=0;e<s.length;++e)o?dx(s[e],n,r):hx(s[e],n,i,r),r((e===s.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();let l=function(e){let t;return t=null!=e.collectedTrainableWeights?Nv(e.collectedTrainableWeights):Nv(e.trainableWeights),t}(e),u=Nv(e.nonTrainableWeights);r("Total params: "+(l+u)),r("Trainable params: "+l),r("Non-trainable params: "+u),r("_".repeat(t))}function px(e,t,n=console.log){let r="";for(let n=0;n<e.length;++n)n>0&&(r=r.slice(0,r.length-1)+" "),r+=e[n],r=r.slice(0,t[n]),r+=" ".repeat(t[n]-r.length);n(r)}function dx(e,t,n){let r,i;try{i=e.inboundNodes.map(e=>JSON.stringify(e.inputShapes)).join(",")}catch(e){i="multiple"}try{r=JSON.stringify(e.outputShape)}catch(e){r="multiple"}px([`${e.name} (${e.getClassName()})`,i,r,e.countParams().toString()],t,n)}function hx(e,t,n,r){let i,o;try{o=e.inboundNodes.map(e=>JSON.stringify(e.inputShapes)).join(",")}catch(e){o="multiple"}try{i=JSON.stringify(e.outputShape)}catch(e){i="multiple"}let a=[];for(let t of e.inboundNodes)if(!(null!=n&&n.length>0&&-1===n.indexOf(t)))for(let e=0;e<t.inboundLayers.length;++e){let n=t.inboundLayers[e].name,r=t.nodeIndices[e],i=t.tensorIndices[e];a.push(`${n}[${r}][${i}]`)}let s=e.name,l=e.getClassName(),u=0===a.length?"":a[0];px([`${s} (${l})`,o,i,e.countParams().toString(),u],t,r);for(let e=1;e<a.length;++e)px(["","","","",a[e]],t,r)}function fx(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"==typeof n}function mx(e,t){if(null===e)return null;if("string"==typeof e)return ay(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){let n=[],r=e.length;for(let i=0;i<r;++i){let r=e[i];fx(t,i,r)?n.push(r):n.push(mx(r,t))}return n}{let t={};for(let n of Object.keys(e)){let r=e[n];if("name"===n&&"string"==typeof r)t[n]=r;else{let e=ay(n);t[e]=mx(r,e)}}return t}}var gx="4.7.0",yx=class extends qv{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,null==this.name){let e=this.getClassName().toLowerCase();this.name=xy(e)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],py(this.inputs).length!==this.inputs.length)throw new Jg("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+this.inputs.map(e=>e.name));py(this.outputs).length!==this.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+this.outputs.map(e=>e.name)),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(let e of this.outputs){let t=e.sourceLayer,n=e.nodeIndex,r=e.tensorIndex;this.outputLayers.push(t),this.outputLayersNodeIndices.push(n),this.outputLayersTensorIndices.push(r)}for(let e of this.inputs){let t=e.sourceLayer,n=e.nodeIndex,r=e.tensorIndex;ty(0===n,"input layer has >1 nodes"),ty(0===r,"input layer has >1 tensors"),this.inputLayers.push(t),this.inputLayersNodeIndices.push(n),this.inputLayersTensorIndices.push(r)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let t=0;t<this.inputLayers.length;t++){let n=this.inputLayers[t];if(!(n instanceof $v))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${t} (0-based) originates from layer type ${n.getClassName()}.`);this.inputNames.push(n.name),this.feedInputShapes.push(n.batchInputShape),this.feedInputNames.push(n.name)}for(let e of this.outputLayers)this.outputNames.push(e.name);this.internalInputShapes=this.inputs.map(e=>e.shape),this.internalOutputShapes=this.outputs.map(e=>e.shape);let t={},n={},r={},i={},o={},a=[],s=(e,t,n,r,i,l)=>{(null==r||null==i||null==l)&&(r=e.sourceLayer,i=e.nodeIndex,l=e.tensorIndex);let u=r.inboundNodes[i];if(-1!==n.indexOf(u))throw new Kg(`The tensor ${e.name} at layer "${r.name}" is part of a cycle.`);if(-1!==t.indexOf(u))return;this.containerNodes.add(yx.nodeKey(r,i)),r.id in o||(o[r.id]=Object.keys(o).length),-1===n.indexOf(u)&&n.push(u);let c=u.inboundLayers.length;for(let e=0;e<c;e++){let r=u.inputTensors[e],i=u.inboundLayers[e],o=u.nodeIndices[e],a=u.tensorIndices[e];s(r,t,n,i,o,a)}for(t.push(u);n.indexOf(u)>=0;)n.splice(n.indexOf(u),1);a.push(u)},l=[],u=[];for(let e of this.outputs)s(e,l,u);let c=a.slice().reverse();for(let e of c){n[e.id]=e,e.id in t||(t[e.id]=0);let o=t[e.id],a=null==r[e.outboundLayer.id]?0:r[e.outboundLayer.id];o=Math.max(o,a),r[e.outboundLayer.id]=o,i[e.outboundLayer.id]=e.outboundLayer,t[e.id]=o;for(let r=0;r<e.inboundLayers.length;r++){let i=e.inboundLayers[r],a=e.nodeIndices[r],s=i.inboundNodes[a],l=null==t[s.id]?0:t[s.id];t[s.id]=Math.max(o+1,l),n[s.id]=s}}let p={};for(let e in t){let r=t[e];r in p||(p[r]=[]),p[r].push(n[e])}let d={};for(let e in r){let t=r[e];t in d||(d[t]=[]),d[t].push(i[e])}let h=Object.keys(d).map(e=>parseInt(e,10)).sort(cy);this.layers=[];for(let e of h){let t=d[e];t.sort((e,t)=>{let n=o[e.id],r=o[t.id];return n<r?-1:n>r?1:0});for(let e of t)e instanceof yx&&this.internalContainerRefs.push(e),this.layers.push(e)}this.layersByDepth=d,h=Object.keys(p).map(e=>parseInt(e,10)).sort(cy);let f=this.inputs.slice(),m=[];for(let e of h)for(let t of p[e]){let e=t.outboundLayer;if(null!=e){for(let n of t.inputTensors)if(-1===f.indexOf(n))throw new Kg(`Graph disconnected: cannot obtain value for tensor ${n} at layer "${e.name}". The following previous layers were accessed without issue: ${m}`);for(let e of t.outputTensors)f.push(e);m.push(e.name)}}this.nodesByDepth=p;let g=this.layers.map(e=>e.name);for(let e of g){let t=g.filter(t=>t===e).length;if(1!==t)throw new Kg(`The name "${e}" is used ${t} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(g))}this.outboundNodes=[],this.inboundNodes=[],new zv({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(e=>null),outputMasks:this.outputs.map(e=>null),inputShapes:this.inputs.map(e=>e.shape),outputShapes:this.outputs.map(e=>e.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(0===this._refCount)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();let e={refCountAfterDispose:null,numDisposedVariables:0};if(0==--this._refCount){for(let t of this.layers)e.numDisposedVariables+=t.dispose().numDisposedVariables;for(let t of this.internalContainerRefs)e.numDisposedVariables+=t.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(t=>{t._trainableWeights.forEach(t=>t.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new Jg("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(let t of this.layers)e=e.concat(t.trainableWeights);return e}get nonTrainableWeights(){let e=[];for(let t of this.layers)e.push(...t.nonTrainableWeights);if(!this.trainable){let t=[];for(let e of this.layers)t.push(...e.trainableWeights);return t.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,t=!0){let n={},r=0;for(let e of this.layers)for(let t of e.weights){if(null!=n[t.originalName])throw new Jg("Duplicate weight name: "+t.originalName);n[t.originalName]=t,r++}let i=[];for(let r in e){let o=r;if(null==n[r]){let e=r.split("/");o=e.slice(0,-2).concat([e[e.length-1]]).join("/")}if(null!=n[o])i.push([n[o],e[r]]);else if(t)throw new Jg("Provided weight data has no target variable: "+r);delete n[o]}if(t){let e=[];for(let t in n)e.push(t);if(e.length>0)throw new Jg(`${e.length} of ${r} weights are not set: ${e}`)}Vv(i)}updatedConfig(){let e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers "+gx,t.backend="TensorFlow.js",t}toJSON(e,t=!0){let n=function e(t,n){if(null==t)return null;if("string"==typeof t)return oy(t);if("number"==typeof t||"boolean"==typeof t)return t;if(t instanceof Array){let r=[],i=t.length;for(let o=0;o<i;++o){let i=t[o];fx(n,o,i)?r.push(i):r.push(e(i,n))}return r}{let n={};for(let r of Object.keys(t)){let i=t[r],o=oy(r);n[o]="name"!==r&&"className"!==r||"string"!=typeof i?e(i,r):i}return n}}(this.updatedConfig());return t?JSON.stringify(n):n}call(e,t){return Xa(()=>{e=iy(e);let n=new Uv;for(let t=0;t<this.inputs.length;++t)n.add(this.inputs[t],e[t]);return Qv(this.outputs,n,t)})}computeMask(e,t){return Xa(()=>{let n;return e=iy(e),n=null==t?ey(null,e.length):iy(t),this.runInternalGraph(e,n)[1]})}computeOutputShape(e){let t=Iv(e);if(t.length!==this.inputLayers.length)throw new Jg(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);let n={};for(let e=0;e<t.length;e++){let r=this.inputLayers[e],i=t[e];n[r.name+"_0_0"]=i}let r=Object.keys(this.nodesByDepth).map(e=>parseInt(e,10)).sort(cy);if(r.length>1)for(let e of r){let t=this.nodesByDepth[e];for(let e of t){let t=e.outboundLayer;if(-1!==this.inputLayers.map(e=>e.id).indexOf(t.id))continue;let r=[];for(let t=0;t<e.inboundLayers.length;t++){let i=e.inboundLayers[t],o=e.nodeIndices[t],a=e.tensorIndices[t],s=n[`${i.name}_${o}_${a}`];r.push(s)}let i=Iv(t.computeOutputShape(ry(r))),o=t.inboundNodes.indexOf(e);for(let e=0;e<i.length;e++){n[`${t.name}_${o}_${e}`]=i[e]}}}let i=[],o=[];for(let e=0;e<this.outputLayers.length;e++){let t=this.outputLayers[e],n=this.outputLayersNodeIndices[e],r=this.outputLayersTensorIndices[e],i=`${t.name}_${n}_${r}`;o.push(i)}for(let e=0;e<o.length;e++){let t=o[e];ty(t in n),i.push(n[t])}return ry(i)}runInternalGraph(e,t){null==t&&(t=ey(null,e.length));let n={};for(let r=0;r<this.inputs.length;++r){let i=this.inputs[r],o=e[r],a=t[r];n[i.id]=[o,a]}let r=Object.keys(this.nodesByDepth).map(e=>parseInt(e,10)).sort(cy);for(let e of r){let t=this.nodesByDepth[e];for(let e of t){let t=e.outboundLayer,r=e.inputTensors,i=e.outputTensors,o=new Array;for(let e of r)e.id in n&&o.push(n[e.id]);if(o.length===r.length){let r,a,s,l,u={};if(null!=e.callArgs&&(u=e.callArgs),1===o.length){let[e,n]=o[0];null==u.mask&&(u.mask=n),s=iy(t.call(e,u)),l=iy(t.computeMask(e,n)),r=[e],a=[n]}else r=o.map(e=>e[0]),a=o.map(e=>e[1]),null==u.mask&&(u.mask=a),s=iy(t.call(r,u)),l=iy(t.computeMask(r,a));if(t.activityRegularizer)throw new Xg("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let e=0;e<i.length;++e){let t=i[e],r=s[e],o=l[e];n[t.id]=[r,o]}}}}let i=[],o=[],a=[];for(let e of this.outputs){ty(e.id in n,`Could not compute output ${e.name} : ${e.id}`);let[t,r]=n[e.id];a.push(t.shape),i.push(t),o.push(r)}return[i,o,a]}buildNodeConversionMap(e){let t,n={};for(let e of this.layers){t=e instanceof yx?1:0;for(let r=0;r<e.inboundNodes.length;r++){let i=yx.nodeKey(e,r);this.containerNodes.has(i)&&(n[i]=t,t+=1)}}return n}getLayer(e,t){if(null!=t)return this.findLayer(t);if(null==e)throw new Jg("Provide either a layer name or layer index");if("number"==typeof e)return this.findLayer(e);for(let t of this.layers)if(t.name===e)return t;throw new Jg("No such layer: "+e)}findLayer(e){if(this.layers.length<=e)throw new Jg(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return Xa(()=>{let e=[];for(let t of this.layers)for(let n=0;n<t.inboundNodes.length;++n){let r=yx.nodeKey(t,n);this.containerNodes.has(r)&&e.push(...t.calculateLosses())}return e})}getConfig(){let e={name:this.name},t=this.buildNodeConversionMap(this.layers),n=[];for(let e of this.layers){let r=e.getClassName(),i=e.getConfig(),o=[];for(let n=0;n<e.inboundNodes.length;n++){let r=e.inboundNodes[n],i=yx.nodeKey(e,n),a={};if(this.containerNodes.has(i)){if(r.callArgs)try{JSON.stringify(r.callArgs),a=r.callArgs}catch(t){console.warn(`Layer ${e.name} was passed non-serializable keyword arguments: ${r.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),a={}}if(r.inboundLayers.length>0){let e=[];for(let n=0;n<r.inboundLayers.length;n++){let i=r.inboundLayers[n],o=r.nodeIndices[n],s=r.tensorIndices[n],l=t[yx.nodeKey(i,o)];null==l&&(l=0),e.push([i.name,l,s,a])}o.push(e)}}}let a={};a.name=e.name,a.className=r,a.config=i,a.inboundNodes=o,n.push(a)}e.layers=n;let r=[];for(let e=0;e<this.inputLayers.length;e++){let n=this.inputLayers[e],i=this.inputLayersNodeIndices[e],o=yx.nodeKey(n,i);if(!this.containerNodes.has(o))continue;let a=t[o];null==a&&(a=0);let s=this.inputLayersTensorIndices[e];r.push([n.name,a,s])}e.inputLayers=r;let i=[];for(let e=0;e<this.outputLayers.length;e++){let n=this.outputLayers[e],r=this.outputLayersNodeIndices[e],o=yx.nodeKey(n,r);if(!this.containerNodes.has(o))continue;let a=t[o];null==a&&(a=0);let s=this.outputLayersTensorIndices[e];i.push([n.name,a,s])}return e.outputLayers=i,e}static fromConfig(e,t,n={},r=!1){let i={},o={};function a(e,t){e.name in o?o[e.name].push(t):o[e.name]=[t]}function s(e,t){let n,r=[];for(let o of t){let s=o[0],l=o[1],u=o[2];if(n=null==o[3]?{}:o[3],!(s in i))return void a(e,t);let c=i[s];if(c.inboundNodes.length<=l)return void a(e,t);let p=c.inboundNodes[l];r.push(p.outputTensors[u])}r.length>0&&e.apply(ry(r),n)}function l(e){let n=e.name,o=jb(e,null!=t.customObjects?t.customObjects:{});o.setFastWeightInitDuringBuild(r),i[n]=o,e.inboundNodes.forEach(e=>{if(!(e instanceof Array))throw new Jg("Corrupted configuration, expected array for nodeData: "+e);a(o,e)})}let u=t.name,c=t.layers;for(let e of c)l(e);for(;!dy(o);)for(let e of c){let t=i[e.name];if(t.name in o){let e=o[t.name];delete o[t.name];for(let n of e)s(t,n)}}let p=[],d=[],h=t.inputLayers;for(let e of h){let t=e[0],n=e[1],r=e[2];ty(t in i);let o=i[t].inboundNodes[n].outputTensors;p.push(o[r])}let f=t.outputLayers;for(let e of f){let t=e[0],n=e[1],r=e[2];ty(t in i);let o=i[t].inboundNodes[n].outputTensors;d.push(o[r])}return new e({inputs:p,outputs:d,name:u})}get stateful(){if(this._stateful)throw new Jg("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(let e of this.layers)if(e.stateful)return!0;return!1}resetStates(){Xa(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}};function vx(e,t){return function(e,t,n){let r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map(e=>null);if(1===r)return Array.isArray(e)&&1===e.length?e:"object"==typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error(`Provided ${n} is an array of ${e.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return e}if("object"==typeof e&&Object.keys(e).length>0&&"object"==typeof e[Object.keys(e)[0]]){let n=[];return t.forEach(t=>{t in e?n.push(e[t]):n.push(null)}),n}throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${t} keys. Provided ${n} not understood: ${JSON.stringify(e)}`)}(e,t,"classWeight")}async function bx(e,t,n,r){if(null!=t||null!=r)throw new Error("Support sampleWeight is not implemented yet");if(null!=n){let t=Xa(()=>{if(1===e.shape.length)return qa(e);if(2===e.shape.length){if(e.shape[1]>1)return xs(e,1);if(1===e.shape[1])return $s(e,[e.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${e.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}throw new Error(`Unexpected rank of target (y) tensor (${e.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),r=Array.from(await t.data());Ya(t);let i=[];return r.forEach(e=>{if(null==n[e])throw new Error(`classWeight must contain all classes in the training data. The class ${e} exists in the data but not in classWeight`);i.push(n[e])}),Sp(i,"float32")}return null}function xx(e,t){return hs(e,t)}function wx(e,t){let n,r,i=t;n=i.xs,r=i.ys,Si.assert(null!=n&&null!=r,()=>"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+t);let o=_x("input",e.inputNames,n),a=_x("output",e.outputNames,r),s=o[0].shape[0];Si.assert(o.length===e.inputs.length,()=>`LayersModel has ${e.inputs.length} inputs, but the dataset provides ${o.length} inputs.  (Expected input keys: ${JSON.stringify(e.inputNames)})`),Si.assert(a.length===e.outputs.length,()=>`LayersModel has ${e.outputs.length} outputs, but the dataset provides ${a.length} outputs.  (Expected output keys: ${JSON.stringify(e.outputNames)})`);for(let t=0;t<o.length;t++)Si.assert(o[t].shape[0]===s,()=>`Batch size mismatch: input ${e.inputNames[t]} has ${o[t].shape[0]}; expected  ${s} based on input ${e.inputNames[0]}.`);for(let t=0;t<a.length;t++)Si.assert(a[t].shape[0]===s,()=>`Batch size mismatch: output ${e.outputNames[t]} has ${a[t].shape[0]}; expected  ${s} based on input ${e.inputNames[0]}.`);return{xs:o,ys:a}}function _x(e,t,n){if(n instanceof ro)return[n];if(Array.isArray(n))return Si.assert(n.length===t.length,()=>`Received an array of ${n.length} Tensors, but expected ${t.length} to match the ${e} keys ${t}.`),n;{let r=[];for(let i of t){if(null==n[i])throw new Jg(`The feature data generated by the dataset lacks the required ${e} key '${i}'.`);r.push(n[i])}return r}}async function Cx(e,t,n){let r=null!=n.batchesPerEpoch;if(Si.assert(null!=e.optimizer,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),Si.assert(null!=n,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),Si.assert(null!=n.epochs&&n.epochs>0&&Number.isInteger(n.epochs),()=>"For fitDataset(), config.epochs is expected to be a positive integer, but got "+n.epochs),Si.assert(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>"For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got "+n.batchesPerEpoch),Si.assert(null==n.validationSplit,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),e.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");e.isTraining=!0;try{let i,o,a=null!=n.validationData;if(a)if(Sx(n.validationData))Si.assert(null==n.validationBatches||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got "+n.validationBatches);else{let e=function(e){if(3===e.length)throw new Xg("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}(n.validationData);i=e.xs,o=e.ys}let s,l=e.makeTrainFunction(),u=e.getDedupedMetricsNames();s=a?u.slice().concat(u.map(e=>"val_"+e)):u.slice();let c=Fb(n.callbacks,n.yieldEvery),p=null==n.verbose?1:n.verbose,{callbackList:d,history:h}=zb(c,p,n.epochs,null,null,function(e,t){let n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}(t,n),null,a,s);d.setModel(e),e.history=h,await d.onTrainBegin(),e.stopTraining_=!1;let f=null==n.initialEpoch?0:n.initialEpoch,m=await t.iterator();for(;f<n.epochs;){let s={};await d.onEpochBegin(f);let c=0,p=0;for(r||(m=await t.iterator());!r||c<n.batchesPerEpoch;){let t=await m.next();if(r&&t.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${c} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(null!=t.value){let{xs:r,ys:i}=wx(e,t.value),o={};o.batch=p,o.size=r[0].shape[0],await d.onBatchBegin(p,o);let a=[];if(null!=n.classWeight){let t=vx(n.classWeight,e.outputNames);for(let e=0;e<t.length;++e)a.push(await bx(i[e],null,t[e]))}let s=r.concat(i).concat(a),h=l(s);Ya(s);for(let e=0;e<u.length;++e){let t=u[e],n=h[e];o[t]=n,Za(n)}await d.onBatchEnd(p,o),Nb(o),p++,c++}if(r?c>=n.batchesPerEpoch:t.done){if(a){let t;t=Sx(n.validationData)?iy(await e.evaluateDataset(n.validationData,{batches:n.validationBatches})):iy(e.evaluate(i,o,{batchSize:null==n.validationBatchSize?32:n.validationBatchSize,verbose:0}));for(let n=0;n<e.metricsNames.length;++n)s["val_"+e.metricsNames[n]]=t[n]}break}if(e.stopTraining_)break}if(await d.onEpochEnd(f,s),f++,e.stopTraining_)break}return await d.onTrainEnd(),await e.history.syncData(),e.history}finally{e.isTraining=!1}}function Sx(e){return"function"==typeof e.iterator}function kx(e){Si.assert(e>0&&Number.isInteger(e),()=>"batchSize is required to be a positive integer, but got "+e)}function Ex(e,t,n){return null==e?[null]:Array.isArray(e)?e.map(e=>Wy(e,t,n-t)):Wy(e,t,n-t)}function Tx(e,t){return Xa(()=>null==e?null:Array.isArray(e)?e.map(e=>Tx(e,t)):Zy(e,"int32"===t.dtype?t:ja(t,"int32")))}function Ix(e,t){let n=[],r=0,i=null;for(;r<e;)i=r+t,i>=e&&(i=e),n.push([r,i]),r=i;return n}function Px(e){let t=[];e instanceof ro&&(e=[e]);for(let n=0;n<e.length;++n){let r=e[n];if(1===r.rank)t.push(Uy(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function Ox(e,t){if(null==e)return;let n=[];if(t instanceof ro)n.push(t.id);else if(Array.isArray(t))t.forEach(e=>n.push(e.id));else if(null!=t)for(let e in t){let r=t[e];n.push(r.id)}let r=[];if(e instanceof ro)-1===n.indexOf(e.id)&&r.push(e);else if(Array.isArray(e))e.forEach(e=>{-1===n.indexOf(e.id)&&r.push(e)});else if(null!=e)for(let t in e){let i=e[t];-1===n.indexOf(i.id)&&r.push(i)}r.forEach(e=>{e.isDisposed||e.dispose()})}function Nx(e){return Array.isArray(e)}function Rx(e){return!function(e){return e instanceof ro}(e)&&!Nx(e)}function Ax(e,t,n,r=!0,i=""){if(null==t||0===t.length){if(null!=e){let t=!1;if(Nx(e)&&e.length>0)t=!0;else if(Rx(e)){for(let n in e)if(e.hasOwnProperty(n)){t=!0;break}}else t=!0;if(t)throw new Jg(`Error when checking model ${i} expected no data, but got ${e}`)}return[]}if(null==e)return t.map(e=>null);let o;if(Rx(e)){e=e,o=[];for(let n of t){if(null==e[n])throw new Jg(`No data provided for "${n}". Need data for each key in: ${t}`);o.push(e[n])}}else if(Nx(e)){if((e=e).length!==t.length)throw new Jg(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${t.length} Tensor(s), but instead got the following list of Tensor(s): ${e}`);o=e}else{if(e=e,t.length>1)throw new Jg(`The model ${i} expects ${t.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${e.shape}`);o=[e]}if(o=Px(o),null!=n)for(let e=0;e<t.length;++e){if(null==n[e])continue;let a=o[e];if(a.shape.length!==n[e].length)throw new Jg(`Error when checking ${i}: expected ${t[e]} to have ${n[e].length} dimension(s). but got array with shape ${a.shape}`);for(let t=0;t<n[e].length;++t){if(0===t&&!r)continue;let o=a.shape[t],s=n[e][t];if(null!=s&&s>=0&&o!==s)throw new Jg(`${i} expected a batch of elements where each example has shape [${n[e].slice(1,n[e].length)}] (i.e.,tensor shape [*,${n[e].slice(1,n[e].length)}]) but the ${i} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return o}function Dx(e,t,n,r=!0,i=""){let o;if(Array.isArray(e)){if(e.length!==t.length)throw new Jg(`Error when checking model ${i}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${t.length} Tensor(s), but instead got ${e.length} Tensors(s).`);o=e}else{if(t.length>1)throw new Jg(`The model expects ${t.length} ${i} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(e.shape)}.`);o=[e]}if(null!=n)for(let e=0;e<t.length;++e){if(null==n[e])continue;let a=o[e];if(a.shape.length!==n[e].length)throw new Jg(`Error when checking ${i}: expected ${t[e]} to have ${n[e].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let o=0;o<n[e].length;++o){if(0===o&&!r)continue;let s=a.shape[o],l=n[e][o];if(null!=l&&l!==s)throw new Jg(`Error when checking ${i}: expected ${t[e]} to have shape ${JSON.stringify(n[e])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}var Vx=class extends yx{constructor(e){super(e),this.isTraining=!1}summary(e,t,n=console.log){if(!this.built)throw new Jg("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");cx(this,e,t,n)}compile(e){if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"==typeof e.optimizer)this.optimizer_=function(e){let t={Adagrad:()=>If.adagrad(.01),Adadelta:()=>If.adadelta(1,.95,$y()),Adam:()=>If.adam(.001,.9,.999,$y()),Adamax:()=>If.adamax(.002,.9,.999,$y(),0),RMSProp:()=>If.rmsprop(.001,.9,0,$y()),SGD:()=>If.sgd(.01)};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new Jg("Unknown Optimizer "+e)}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof vh))throw new Jg("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let t=[];if(Array.isArray(e.loss)||"string"==typeof e.loss||"function"==typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new Jg(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);t=e.loss.map(e=>Jb(e))}else{let n=Jb(e.loss);this.outputs.forEach(e=>{t.push(n)})}else{e.loss=e.loss;for(let t in e.loss)if(-1===this.outputNames.indexOf(t))throw new Jg(`Unknown entry in loss dictionary: "${t}". Only expected the following keys: ${this.outputNames}`);for(let n of this.outputNames)null==e.loss[n]&&console.warn(`Output "${n}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${n} during training`),t.push(Jb(e.loss[n]))}this.lossFunctions=t,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let e=0;e<this.outputs.length;++e){let t=this.internalOutputShapes[e],n=this.outputNames[e];this.feedOutputNames.push(n),this.feedOutputShapes.push(t),this.feedLossFns.push(this.lossFunctions[e])}let n=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Ny("loss",()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;let t=this.lossFunctions[e];this.outputs.length>1&&(this.metricsTensors.push([t,e]),this.metricsNames.push(this.outputNames[e]+"_loss"))}});let r=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map(e=>[]);let n;if("string"==typeof e||"function"==typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!=typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,function, Array, or Object, found: "+e);n=e}if(Array.isArray(n))return t.map(e=>n);{let e=[];for(let r of t){let t=n.hasOwnProperty(r)?n[r]:[];Array.isArray(t)||(t=[t]),e.push(t)}return e}}(e.metrics,this.outputNames),i=(e,t,n)=>{this.outputNames.length>1&&(t=this.outputNames[e]+"_"+t),this.metricsNames.push(t),this.metricsTensors.push([n,e])};Ny("metric",()=>{for(let e=0;e<this.outputs.length;++e){if(-1!==n.indexOf(e))continue;(t=>{let n,r,o;for(let a of t){if("string"==typeof a&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(a)){let t,i=this.internalOutputShapes[e];1===i[i.length-1]||this.lossFunctions[e]===Qb?-1!==["accuracy","acc"].indexOf(a)?r=Xb:-1!==["crossentropy","ce"].indexOf(a)&&(r=nx):this.lossFunctions[e]===Hb?-1!==["accuracy","acc"].indexOf(a)?r=rx:-1!==["crossentropy","ce"].indexOf(a)&&(r=ox):-1!==["accuracy","acc"].indexOf(a)?r=Yb:-1!==["crossentropy","ce"].indexOf(a)&&(r=ix),-1!==["accuracy","acc"].indexOf(a)?t="acc":-1!==["crossentropy","ce"].indexOf(a)&&(t="ce"),o=r,n=""+t}else o=sx(a),n=""+lx(a);let t;Ny(n,()=>{t=o}),i(e,n,t)}})(r[e])}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,t,n={}){let r=null==n.batchSize?32:n.batchSize;kx(r);let i=this.standardizeUserDataXY(e,t,!0,r);try{let o=i[0].concat(i[1]);this.makeTestFunction();let a=this.testFunction;return ry(this.testLoop(a,o,r,n.verbose,n.steps))}finally{Ox(i[0],e),Ox(i[1],t)}}async evaluateDataset(e,t){return this.makeTestFunction(),async function(e,t,n){let r=null!=(n=n||{}).batches,i=e.testFunction,o=[];if(n.verbose>0)throw new Xg("Verbose mode is not implemented yet.");Si.assert(!r||n.batches>0&&Number.isInteger(n.batches),()=>"Test loop expects `batches` to be a positive integer, but received "+JSON.stringify(n.batches));let a=function(e){return"function"==typeof e.next}(t)?t:await t.iterator(),s=0,l=0;for(;!r||l<n.batches;){let t=await a.next();if(o=Xa(()=>{if(t.value){let{xs:n,ys:r}=wx(e,t.value),a=n.concat(r),u=Xa(()=>i(a));if(Ya(a),0===l)for(let e=0;e<u.length;++e)o.push(eu(0));let c=a[0].shape[0];for(let e=0;e<u.length;++e){let t=u[e],n=o[e];o[e]=Xa(()=>cs(o[e],hs(c,t))),l>0&&Ya(n)}Ya(u),s+=c,++l}return o}),t.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let e=0;e<o.length;++e){let t=o[e];o[e]=ds(o[e],s),Ya(t)}return ry(o)}(this,e,t)}checkNumSamples(e,t,n,r="steps"){let i;if(null!=n){if(i=null,null!=t)throw new Jg(`If ${r} is set, batchSize must be null or undefined.Got batchSize = ${t}`)}else{if(null==e)throw new Jg(`Either the input data should have a defined shape, or ${r} shoud be specified.`);i=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return i}execute(e,t){if(Array.isArray(t)&&0===t.length)throw new Jg("`outputs` is an empty Array, which is not allowed.");let n=Array.isArray(t),r=n?t:[t],i=this.retrieveSymbolicTensors(r),o=new Uv;if(e instanceof ro&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new Jg(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let t=0;t<this.inputs.length;++t)o.add(this.inputs[t],e[t])}else for(let t of this.inputs){let n=e[t.name];if(null==n)throw new Jg("No value is provided for the model's input "+t.name);o.add(t,n)}let a=Qv(i,o);return n?a:a[0]}retrieveSymbolicTensors(e){let t=ey(null,e.length),n=e.length;for(let r of this.layers){let i=Array.isArray(r.output)?r.output:[r.output],o=i.map(e=>e.name);for(let r=0;r<e.length;++r){let a=o.indexOf(e[r]);if(-1!==a&&(t[r]=i[a],n--),0===n)break}if(0===n)break}if(n>0){let n=[];throw t.forEach((t,r)=>{null==t&&n.push(e[r])}),new Jg("Cannot find SymbolicTensors for output name(s): "+JSON.stringify(n))}return t}predictLoop(e,t=32,n=!1){return Xa(()=>{let r=this.checkNumSamples(e);if(n)throw new Xg("Verbose predictLoop() is not implemented yet.");let i=Ix(r,t),o=this.outputs.map(e=>[]);for(let t=0;t<i.length;++t)Xa(()=>{let n=i[t][0],r=i[t][1],o=Ex(e,n,r),a=[];if(Array.isArray(o))for(let e=0;e<o.length;++e)a.push({key:this.inputs[e],value:o[e]});else a.push({key:this.inputs[0],value:o});let s=new Uv(a);return Qv(this.outputs,s)}).forEach((e,t)=>o[t].push(e));return ry(o.map(e=>Ws(e,0)))})}predict(e,t={}){let n=Px(e);Dx(n,this.inputNames,this.feedInputShapes,!1);try{let r=null==t.batchSize?32:t.batchSize;return kx(r),this.predictLoop(n,r)}finally{Ox(n,e)}}predictOnBatch(e){Dx(e,this.inputNames,this.feedInputShapes,!0);let t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)}standardizeUserDataXY(e,t,n=!0,r){if(null==this.optimizer_)throw new Kg("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");let i=[];for(let e=0;e<this.feedOutputShapes.length;++e){let t=this.feedOutputShapes[e];this.feedLossFns[e]===Hb?i.push(t.slice(0,t.length-1).concat([1])):i.push(t)}if(function(e,t,n){let r=py(e.map(e=>e.shape[0]));r.sort();let i=py(t.map(e=>e.shape[0]));if(i.sort(),r.length>1)throw new Jg("All input Tensors (x) should have the same number of samples. Got array shapes: "+JSON.stringify(e.map(e=>e.shape)));if(i.length>1)throw new Jg("All target Tensors (y) should have the same number of samples. Got array shapes: "+JSON.stringify(t.map(e=>e.shape)));if(r.length>0&&i.length>0&&!Si.arraysEqual(r,i))throw new Jg(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${i[0]} target sample(s).`)}(e=Ax(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=Ax(t,this.feedOutputNames,i,!1,"target")),function(e,t,n){let r=[$b,Qb,Wb];for(let i=0;i<e.length;++i){let o=e[i],a=t[i],s=n[i];if(null!=a){if(a===Wb&&1===o.shape[o.shape.length-1])throw new Jg(`You are passing a target array of shape ${o.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(-1!==r.indexOf(a)){let e=o.shape.slice(1),t=s.slice(1);for(let n=0;n<e.length;++n){let r=e[n],i=t[n];if(null!=i&&r!==i)throw new Jg(`A target Tensor with shape ${o.shape} was passed for an output of shape ${s}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=r&&r>0&&e[0].shape[0]%r!=0)throw new Jg(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${r}. Found: ${e[0].shape[0]} sample(s).`);return[e,t]}async standardizeUserData(e,t,n,r,i=!0,o){let[a,s]=this.standardizeUserDataXY(e,t,i,o);if(null!=n)throw new Error("sample weight is not supported yet.");let l=null;if(null!=r){let e=vx(r,this.outputNames);l=[];for(let t=0;t<e.length;++t)l.push(await bx(s[t],null,e[t]))}return[a,s,l]}testLoop(e,t,n,r=0,i){return Xa(()=>{let o=this.checkNumSamples(t,n,i,"steps"),a=[];if(r>0)throw new Xg("Verbose mode is not implemented yet.");if(null!=i)throw new Xg("steps mode in testLoop() is not implemented yet");{let r=Ix(o,n),i=Sp(qy(0,o));for(let n=0;n<r.length;++n){let o=r[n][0],s=r[n][1],l=Wy(i,o,s-o),u=Tx(t,l),c=e(u);if(0===n)for(let e=0;e<c.length;++e)a.push(eu(0));for(let e=0;e<c.length;++e){let t=c[e];a[e]=cs(a[e],hs(s-o,t))}}for(let e=0;e<a.length;++e)a[e]=ds(a[e],o)}return a})}getDedupedMetricsNames(){let e=this.metricsNames,t=[];for(let n=0;n<e.length;++n){let r=e[n],i=r;if(ny(e,r)>1){i+="_"+ny(e.slice(0,n),r)}t.push(i)}return t}makeTrainFunction(){return e=>{let t=[],n=e.slice(0,this.inputs.length),r=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+2*this.outputs.length),o=[],a=this.collectedTrainableWeights.map(e=>e.read());return[this.optimizer_.minimize(()=>{let e=[];for(let t=0;t<this.inputs.length;++t)e.push({key:this.inputs[t],value:n[t]});let a,s=new Uv(e),l=Qv(this.outputs,s,{training:!0});for(let e=0;e<this.lossFunctions.length;++e){let n=(0,this.lossFunctions[e])(r[e],l[e]);null!=i[e]&&(n=xx(n,i[e]));let o=Ju(n);t.push(o),a=0===e?n:cs(a,n)}for(let e=0;e<this.metricsTensors.length;++e){let n;if(this.outputs.length>1&&e<this.outputs.length)n=t[e];else{let t=this.metricsTensors[e][0],i=this.metricsTensors[e][1];n=Ju(t(r[i],l[i]))}Za(n),o.push(n)}return a=Ju(a),this.calculateLosses().forEach(e=>{a=cs(a,e)}),a},!0,a)].concat(o)}}makeTestFunction(){this.testFunction=e=>Xa(()=>{let t,n=[],r=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let e=0;e<this.inputs.length;++e)o.push({key:this.inputs[e],value:r[e]});let a=new Uv(o),s=Qv(this.outputs,a);for(let e=0;e<this.lossFunctions.length;++e){let r=this.lossFunctions[e],o=Ju(r(i[e],s[e]));t=0===e?o:cs(t,o),n.push(t)}for(let e=0;e<this.metricsTensors.length;++e){let t=this.metricsTensors[e][0],r=this.metricsTensors[e][1],o=Ju(t(i[r],s[r]));n.push(o)}return n})}async fit(e,t,n={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");let r,i,o,a,s,l,u,c,p;this.isTraining=!0;try{let d=null==n.batchSize?32:n.batchSize;kx(d);let h=!1,f=await this.standardizeUserData(e,t,n.sampleWeight,n.classWeight,h,d);r=f[0],i=f[1],p=f[2];let m,g=!1;if(null!=n.validationData&&n.validationData.length>0){if(g=!0,2!==n.validationData.length)throw 3===n.validationData.length?new Xg("validationData including sample weights is not supported yet."):new Jg(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${n.validationData} is invalid.`);s=n.validationData[0],l=n.validationData[1];let e=!0,t=await this.standardizeUserData(s,l,null,null,e,d);u=t[0],c=t[1],m=u.concat(c)}else if(null!=n.validationSplit&&n.validationSplit>0&&n.validationSplit<1){g=!0;let e=Math.floor(r[0].shape[0]*(1-n.validationSplit)),t=r[0].shape[0];u=Ex(r,e,t),o=r,r=Ex(r,0,e),c=Ex(i,e,t),a=i,i=Ex(i,0,e),m=u.concat(c)}else null!=n.validationSteps&&(g=!0);let y=r.concat(i).concat(p);this.checkTrainableWeightsConsistency();let v,b,x=this.makeTrainFunction(),w=this.getDedupedMetricsNames();g?(this.makeTestFunction(),v=this.testFunction,b=w.slice().concat(w.map(e=>"val_"+e))):(v=null,m=[],b=w.slice());let _=Fb(n.callbacks,n.yieldEvery);return await this.fitLoop(x,y,w,d,n.epochs,n.verbose,_,v,m,n.shuffle,b,n.initialEpoch,null,null)}finally{this.isTraining=!1,Ox(r,e),Ox(i,t),Ox(o,e),Ox(a,t),Ox(u,s),Ox(c,l),null!=p&&Ya(p)}}async fitLoop(e,t,n,r,i,o,a,s,l,u,c,p,d,h){null==r&&(r=32),null==i&&(i=1),null==u&&(u=!0),null==p&&(p=0);let f=!1;if(null!=s&&null!=l&&(f=!0),null!=h&&(f=!0,null==d))throw new Jg("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");let m,g=this.checkNumSamples(t,r,d,"steps_per_epoch");null!=g&&(m=qy(0,g)),null==o&&(o=1);let{callbackList:y,history:v}=zb(a,o,i,p,g,d,r,f,c);y.setModel(this),this.history=v,await y.onTrainBegin(),this.stopTraining_=!1;for(let o=p;o<i;++o){await y.onEpochBegin(o);let i={};if(null!=d)throw new Xg("stepsPerEpoch mode is not implemented yet.");{if("batch"===u)throw new Xg("batch shuffling is not implemneted yet");u&&Si.shuffle(m);let o=Sp(m),a=Ix(g,r);for(let u=0;u<a.length;++u){let c={};if(await y.onBatchBegin(u,c),Xa(()=>{let p=a[u][0],d=a[u][1],h=Wy(o,p,d-p);c.batch=u,c.size=d-p;let m=Tx(t,h),g=e(m);for(let e=0;e<n.length;++e){let t=n[e],r=g[e];c[t]=r,Za(r)}if(u===a.length-1&&f){let e=this.testLoop(s,l,r);for(let t=0;t<n.length;++t){let r=n[t],o=e[t];Za(o),i["val_"+r]=o}}}),await y.onBatchEnd(u,c),Nb(c),this.stopTraining_)break}o.dispose()}if(await y.onEpochEnd(o,i),this.stopTraining_)break}return await y.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,t){return Cx(this,e,t)}async trainOnBatch(e,t){let n=await this.standardizeUserData(e,t),r=n[0],i=n[1],o=this.makeTrainFunction()(r.concat(i)),a=[];for(let e of o){let t=await e.data();a.push(t[0])}return Ya(o),Ox(n[0],e),Ox(n[1],t),ry(a)}getNamedWeights(e){let t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,i=this.getWeights(n);for(let e=0;e<r.length;++e)n&&!r[e].trainable||t.push({name:r[e].originalName,tensor:i[e]});return t}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){let e=super.dispose();if(0===e.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){let t=Ka().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=t-Ka().numTensors}return e}getLossIdentifiers(){let e;if("string"==typeof this.loss)e=oy(this.loss);else if(Array.isArray(this.loss)){for(let e of this.loss)if("string"!=typeof e)throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(e=>oy(e))}else{let t=Object.keys(this.loss);e={};let n=this.loss;for(let r of t){if("string"!=typeof n[r])throw new Error("Serialization of non-string loss is not supported.");e[r]=oy(n[r])}}return e}getMetricIdentifiers(){if("string"==typeof this.metrics||"function"==typeof this.metrics)return[oy(lx(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>oy(lx(e)));{let e={};for(let t in this.metrics)e[t]=oy(lx(this.metrics[t]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");let t,n,r=jb(mx(e.optimizer_config));if("string"==typeof e.loss)t=ay(e.loss);else if(Array.isArray(e.loss))t=e.loss.map(e=>ay(e));else if(null!=e.loss){t={};for(let n in e.loss)t[n]=ay(e.loss[n])}if(Array.isArray(e.metrics))n=e.metrics.map(e=>ay(e));else if(null!=e.metrics){n={};for(let t in e.metrics)n[t]=ay(e.metrics[t])}this.compile({loss:t,metrics:n,optimizer:r})}async save(e,t){if("string"==typeof e){let t=Th.getSaveHandlers(e);if(0===t.length)throw new Jg(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw new Jg(`Found more than one (${t.length}) save handlers for URL '${e}'`);e=t[0]}if(null==e.save)throw new Jg("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");let n=await Th.encodeWeights(this.getNamedWeights(t)),r={modelTopology:this.toJSON(null,!1),format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v"+gx,convertedBy:null};if(null!=t&&t.includeOptimizer&&null!=this.optimizer){r.trainingConfig=this.getTrainingConfig();let e="optimizer",{data:t,specs:i}=await Th.encodeWeights(await this.optimizer.getWeights(),e);n.specs.push(...i),n.data=Th.concatenateArrayBuffers([n.data,t])}return null!=this.userDefinedMetadata&&(ux(this.userDefinedMetadata,this.name,!0),r.userDefinedMetadata=this.userDefinedMetadata),r.weightData=n.data,r.weightSpecs=n.specs,e.save(r)}setUserDefinedMetadata(e){ux(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}};Vx.className="Model",fh.registerClass(Vx);var Mx=class extends Vx{};async function Fx(e,t){"modelTopology"in e||(e={modelTopology:e});let n=(e=e).modelTopology;null!=n.model_config&&(n=n.model_config);let r=jb(mx(n),t);if(null!=e.weightsManifest){let t=await Th.loadWeights(e.weightsManifest,e.pathPrefix,r.weights.map(e=>e.originalName)),n={};for(let e of r.weights)n[e.originalName]=t[e.originalName];r.loadWeights(n),Ya(t)}return r}async function Lx(e,t){if(null==t&&(t={}),"string"==typeof e){let n=Th.getLoadHandlers(e,t);if(0===n.length)n.push(Th.browserHTTPRequest(e,t));else if(n.length>1)throw new Jg(`Found more than one (${n.length}) load handlers for URL '${e}'`);e=n[0]}return async function(e,t,n){if(null==n&&(n={}),null==e.load)throw new Jg("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let r=await e.load(),i=r.modelTopology;null!=i.model_config&&(i=i.model_config);let o=null==n.strict||n.strict,a=null!=r.weightData&&null!=r.weightSpecs&&o,s=jb(mx(i),t,a),l=r.trainingConfig;if(null!=l&&s.loadTrainingConfig(l),null!=r.userDefinedMetadata&&s.setUserDefinedMetadata(r.userDefinedMetadata),null!=r.weightData){if(null==r.weightSpecs)throw new Jg("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");let{modelWeights:e,optimizerWeights:t}=function(e,t){let n=Th.decodeWeights(e,t),r={},i=[];return t.forEach(e=>{"optimizer"===e.group?i.push({name:e.name,tensor:n[e.name]}):r[e.name]=n[e.name]}),{modelWeights:r,optimizerWeights:i}}(r.weightData,r.weightSpecs);s.loadWeights(e,o),null!=s.optimizer&&t.length>0&&await s.optimizer.setWeights(t),Ya(e),Ya(t.map(e=>e.tensor))}return s}(e,void 0,t)}Mx.className="Functional",fh.registerClass(Mx);var zx=class extends Vx{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=null!=e.name?e.name:xy("sequential_"),null!=e.layers)for(let t of e.layers)this.add(t)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(e=>e<0))throw new Jg(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){let t,n=e instanceof zx||e instanceof Vx;if(n){if(t=e,1!==t.outputs.length)throw new Jg("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==t.inputs.length)throw new Jg("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new Jg("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");let t=Bv({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(t)}if(n)this.outputs=t.outputs,this.inputs=t.inputs;else{if(1!==e.inboundNodes.length)throw new Jg(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(1!==e.inboundNodes[0].outputTensors.length)throw new Jg("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=function e(t,n,r){if((null==n||null!=r&&r>0)&&(n=t.sourceLayer,r=t.nodeIndex),0===n.inboundNodes.length)return[t];{let t=n.inboundNodes[r];if(0===t.inboundLayers.length)return t.inputTensors;{let n=[];for(let r=0;r<t.inboundLayers.length;r++){let i=e(t.inputTensors[r],t.inboundLayers[r],t.nodeIndices[r]);for(let e of i)-1===n.indexOf(e)&&n.push(e)}return n}}}(this.outputs[0])}this.inboundNodes=[],new zv({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:ey(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(e=>e.shape),outputShapes:this.outputs[0].shape})}else{let t=e.apply(this.outputs[0]);if(Array.isArray(t))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[t],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{let e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,t){return null==this.model&&this.build(),this.model.call(e,t)}build(e){if(Ov(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new Vx({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,t,n=console.log){this.built||this.build(),super.summary(e,t,n)}setWeights(e){null==this.model&&this.build(),this.model.setWeights(e)}evaluate(e,t,n={}){if(!this.built)throw new Kg("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)}async evaluateDataset(e,t){if(!this.built)throw new Kg("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,t)}predict(e,t={}){return null==this.model&&this.build(),this.model.predict(e,t)}predictOnBatch(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return null==this.model?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,t,n={}){if(!this.built)throw new Kg("The model needs to be compiled before being used.");return this.model.fit(e,t,n)}async fitDataset(e,t){if(!this.built)throw new Kg("The model needs to be compiled before being used.");return this.model.fitDataset(e,t)}async trainOnBatch(e,t){return this.model.trainOnBatch(e,t)}static fromConfig(e,t,n={},r=!1){let i,o={};if(t instanceof Array){if(null==t[0].className||"Merge"===t[0].className)throw new Jg("Legacy serialization format not supported yet.");i=t}else Si.assert(null!=t.layers,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),i=t.layers,delete t.layers,o=t;let a=new e(o);if(!(a instanceof zx))throw new Xg("Sequential.fromConfig called on non-Sequential input: "+a);for(let e of i){let t=jb(e,void 0,r);r&&t.setFastWeightInitDuringBuild(!0),a.add(t)}return a}set stopTraining(e){if(null==this.model)throw new Jg("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(null==this.model)throw new Jg("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){let e=[];for(let t of this.layers){let n={};n.className=t.getClassName(),n.config=t.getConfig(),e.push(n)}return{name:this.name,layers:e}}};function jx(e){return new Vx(e)}function qx(e){return new zx(e)}function $x(e){return Bv(e)}function Bx(e,t){Lb.registerCallbackConstructor(e,t)}zx.className="Sequential",fh.registerClass(zx);var Ux=class extends fh.Serializable{getConfig(){return{}}},Wx=class extends Ux{apply(e,t=1){return function(e,t=1){if(1!==t)throw new Xg(`Support for alpha values other than 1 (${t}) is not implemented yet.`);return jl(e)}(e,t)}};Wx.className="elu",fh.registerClass(Wx);var Hx=class extends Ux{apply(e){return np(e)}};Hx.className="selu",fh.registerClass(Hx);var Qx=class extends Ux{apply(e){return Qc(e)}};Qx.className="relu",fh.registerClass(Qx);var Gx=class extends Ux{apply(e){return Xa(()=>ec(6,Qc(e)))}};Gx.className="relu6",fh.registerClass(Gx);var Kx=class extends Ux{apply(e){return e}};Kx.className="linear",fh.registerClass(Kx);var Jx=class extends Ux{apply(e){return Qs(e)}};Jx.className="sigmoid",fh.registerClass(Jx);var Xx=class extends Ux{apply(e){return function(e){return Xa(()=>{let t=cs(.5,hs(.2,e));return ul(t,0,1)})}(e)}};Xx.className="hardSigmoid",fh.registerClass(Xx);var Yx=class extends Ux{apply(e){return Du(e)}};Yx.className="softplus",fh.registerClass(Yx);var Zx=class extends Ux{apply(e){return function(e){return Xa(()=>ds(e,cs(fs(e),1)))}(e)}};Zx.className="softsign",fh.registerClass(Zx);var ew=class extends Ux{apply(e){return Ks(e)}};ew.className="tanh",fh.registerClass(ew);var tw=class extends Ux{apply(e,t=-1){return dp(e,t)}};tw.className="softmax",fh.registerClass(tw);var nw=class extends Ux{apply(e,t=-1){return Fu(e,t)}};nw.className="logSoftmax",fh.registerClass(nw);var rw=class extends Ux{apply(e,t=1){return Xa(()=>hs(Qs(hs(e,t)),e))}};rw.className="swish",fh.registerClass(rw);var iw=class extends Ux{apply(e){return Xa(()=>hs(e,Ks(Du(e))))}};function ow(e){return e.getClassName()}function aw(e,t={}){return uy(e,fh.SerializationMap.getMap().classNameMap,t,"activation")}function sw(e){if(null==e){let e={className:"linear",config:{}};return aw(e)}if("string"==typeof e){let t={};return t.className=e,t.config={},aw(t)}return e instanceof Ux?e:aw(e)}function lw(e){if(null!=e&&"object"!=typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an object, but received: "+e)}iw.className="mish",fh.registerClass(iw);var uw=class extends fh.Serializable{},cw=class extends uw{constructor(e){super(),lw(e),this.l1=null==e||null==e.l1?.01:e.l1,this.l2=null==e||null==e.l2?.01:e.l2,this.hasL1=0!==this.l1,this.hasL2=0!==this.l2}apply(e){return Xa(()=>{let t=Xu([1]);return this.hasL1&&(t=cs(t,ru(hs(this.l1,fs(e))))),this.hasL2&&(t=cs(t,ru(hs(this.l2,ev(e))))),$s(t,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,t){return new e({l1:t.l1,l2:t.l2})}};cw.className="L1L2",fh.registerClass(cw);var pw={l1l2:"L1L2"};function dw(e){return ly(e)}function hw(e,t={}){return uy(e,fh.SerializationMap.getMap().classNameMap,t,"regularizer")}function fw(e){if(null==e)return null;if("string"==typeof e){return hw({className:e in pw?pw[e]:e,config:{}})}return e instanceof uw?e:hw(e)}var mw=class extends qv{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,null!=e&&(this.maxValue=e.maxValue)}call(e,t){e=Pv(e);let n=Qc(e);return null!=this.maxValue&&(n=ul(n,0,this.maxValue)),n}computeOutputShape(e){return e}getConfig(){let e={maxValue:this.maxValue},t=super.getConfig();return Object.assign(e,t),e}};mw.className="ReLU",fh.registerClass(mw);var gw=class extends qv{constructor(e){super(null==e?{}:e),this.DEFAULT_ALPHA=.3,null==e&&(e={}),this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){let n=Pv(e);return bu(n,this.alpha)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}};gw.className="LeakyReLU",fh.registerClass(gw);var yw=class extends qv{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA_INITIALIZER="zeros",null==e&&(e={}),this.supportsMasking=!0,this.alphaInitializer=Ev(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=fw(e.alphaRegularizer),this.alphaConstraint=sb(e.alphaConstraint),null==e.sharedAxes)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else{if("number"!=typeof e.sharedAxes)throw new Jg("Expected sharedAxes to be a number or an array of numbers, but got "+e.sharedAxes);this.sharedAxes=[e.sharedAxes]}}build(e){let t=(e=Ov(e)).slice(1);if(null!=this.sharedAxes)for(let e of this.sharedAxes)t[e-1]=1;this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);let n={};if(null!=this.sharedAxes)for(let t=1;t<e.length;++t)n[t]=e[t];this.inputSpec=[new Mv({ndim:e.length,axes:n})],this.built=!0}call(e,t){return e=Pv(e),yc(e,this.alpha.read())}getConfig(){let e={alphaInitializer:kv(this.alphaInitializer),alphaRegularizer:dw(this.alphaRegularizer),alphaConstraint:ob(this.alphaConstraint),sharedAxes:this.sharedAxes},t=super.getConfig();return Object.assign(e,t),e}};yw.className="PReLU",fh.registerClass(yw);var vw=class extends qv{constructor(e){if(super(null==e?{}:e),this.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==this.DEFAULT_ALPHA)throw new Xg(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=null==e.alpha?this.DEFAULT_ALPHA:e.alpha}call(e,t){let n=Pv(e);return jl(n)}computeOutputShape(e){return e}getConfig(){let e={alpha:this.alpha},t=super.getConfig();return Object.assign(e,t),e}};vw.className="ELU",fh.registerClass(vw);var bw=class extends qv{constructor(e){super(null==e?{}:e),this.DEFAULT_THETA=1,null==e&&(e={}),this.theta=null==e.theta?this.DEFAULT_THETA:e.theta}call(e,t){let n=Pv(e);return hs(n,ja(hu(n,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){let e={theta:this.theta},t=super.getConfig();return Object.assign(e,t),e}};bw.className="ThresholdedReLU",fh.registerClass(bw);var xw=class extends qv{constructor(e){super(null==e?{}:e),this.DEFAULT_AXIS=1,null==e&&(e={}),this.softmax=(new tw).apply,this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis}call(e,t){let n=Pv(e);return this.softmax(n,this.axis)}computeOutputShape(e){return e}getConfig(){let e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}};function ww(e,t,n){if("number"==typeof e)return ey(e,t);if(e.length!==t)throw new Jg(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${e.length} elements.`);for(let r=0;r<t;++r){let i=e[r];if(!Fy(i))throw new Jg(`The ${n} argument must be an integer or tuple of ${t} integers. Received: ${JSON.stringify(e)} including a non-integer number ${i}`)}return e}function _w(e,t,n,r,i=1){if(null==e)return e;let o;return o="same"===n?e:e-(t+(t-1)*(i-1))+1,Math.floor((o+r-1)/r)}function Cw(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+jy([n-t,0]);else{if("same"!==r)throw new Jg(`Unsupport padding mode: ${r}.`);e*=t}return e}function Sw(e,t){return Xa(()=>(Ty(t),"channelsFirst"===t?Wp(e,[0,2,3,1]):e))}function kw(e,t){return Xa(()=>(Ty(t),"channelsFirst"===t?Wp(e,[0,2,3,4,1]):e))}function Ew(e,t,n,r=[1,1],i="valid",o,a,s=null){return Xa(()=>{if(null==o&&(o="channelsLast"),Ty(o),3!==e.rank&&4!==e.rank)throw new Jg(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${e.rank}.`);if(3!==t.rank&&4!==t.rank)throw new Jg(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${e.rank}.`);let l=Sw(e,o);if("causal"===i)throw new Xg("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=ed.conv2d({x:l,filter:t,strides:r,pad:"same"===i?"same":"valid",dilations:a,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===o&&(l=Wp(l,[0,3,1,2])),l})}xw.className="Softmax",fh.registerClass(xw);var Tw=class extends qv{constructor(e,t){if(super(t),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",Tw.verifyArgs(t),this.rank=e,my(this.rank,"rank"),1!==this.rank&&2!==this.rank&&3!==this.rank)throw new Xg(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=ww(t.kernelSize,e,"kernelSize"),this.strides=ww(null==t.strides?1:t.strides,e,"strides"),this.padding=null==t.padding?"valid":t.padding,Iy(this.padding),this.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,Ty(this.dataFormat),this.activation=sw(t.activation),this.useBias=null==t.useBias||t.useBias,this.biasInitializer=Ev(t.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=sb(t.biasConstraint),this.biasRegularizer=fw(t.biasRegularizer),this.activityRegularizer=fw(t.activityRegularizer),this.dilationRate=ww(null==t.dilationRate?1:t.dilationRate,e,"dilationRate"),1===this.rank&&Array.isArray(this.dilationRate)&&1!==this.dilationRate.length)throw new Jg("dilationRate must be a number or an array of a single number for 1D convolution, but received "+JSON.stringify(this.dilationRate));if(2===this.rank){if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate];else if(2!==this.dilationRate.length)throw new Jg("dilationRate must be a number or array of two numbers for 2D convolution, but received "+JSON.stringify(this.dilationRate))}else if(3===this.rank)if("number"==typeof this.dilationRate)this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(3!==this.dilationRate.length)throw new Jg("dilationRate must be a number or array of three numbers for 3D convolution, but received "+JSON.stringify(this.dilationRate))}static verifyArgs(e){if(ty("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!=typeof e.kernelSize&&!fy(e.kernelSize,"number",1,3))throw new Jg(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){let e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:ow(this.activation),useBias:this.useBias,biasInitializer:kv(this.biasInitializer),biasRegularizer:dw(this.biasRegularizer),activityRegularizer:dw(this.activityRegularizer),biasConstraint:ob(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}},Iw=class extends Tw{constructor(e,t){super(e,t),this.kernel=null,Iw.verifyArgs(t),this.filters=t.filters,my(this.filters,"filters"),this.kernelInitializer=Ev(t.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=sb(t.kernelConstraint),this.kernelRegularizer=fw(t.kernelRegularizer)}build(e){e=Ov(e);let t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new Jg("The channel dimension of the input should be defined. Found "+e[t]);let n=e[t],r=this.kernelSize.concat([n,this.filters]);this.kernel=this.addWeight("kernel",r,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[t]:n}}],this.built=!0}call(e,t){return Xa(()=>{e=Pv(e);let t,n=null==this.bias?null:this.bias.read(),r=gy(this.activation.getClassName());if(null!=r&&2===this.rank)t=Ew(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate,r);else{if(1===this.rank)t=function(e,t,n,r=1,i="valid",o,a=1){return Xa(()=>{if(null==o&&(o="channelsLast"),Ty(o),3!==e.shape.length)throw new Jg(`The input of a conv1dWithBias operation should be 3, but is ${e.shape.length} instead.`);if(3!==t.shape.length)throw new Jg(`The kernel for a conv1dWithBias operation should be 3, but is ${t.shape.length} instead`);if(null!=n&&1!==n.shape.length)throw new Jg(`The bias for a conv1dWithBias operation should be 1, but is ${t.shape.length} instead`);if("channelsFirst"===o&&(e=Wp(e,[0,2,1])),"causal"===i)throw new Xg("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let s=ml(e,t,r,"same"===i?"same":"valid","NWC",a);return null!=n&&(s=nv(s,n)),s})}(e,this.kernel.read(),n,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(2===this.rank)t=Ew(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate);else{if(3!==this.rank)throw new Xg("convolutions greater than 3D are not implemented yet.");t=function(e,t,n,r=[1,1,1],i="valid",o,a){return Xa(()=>{if(null==o&&(o="channelsLast"),Ty(o),4!==e.rank&&5!==e.rank)throw new Jg(`conv3dWithBias expects input to be of rank 4 or 5, but received ${e.rank}.`);if(4!==t.rank&&5!==t.rank)throw new Jg(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${e.rank}.`);let s=kw(e,o);if("causal"===i)throw new Xg("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=vl(s,t,r,"same"===i?"same":"valid","NDHWC",a),null!=n&&(s=nv(s,n)),"channelsFirst"===o&&(s=Wp(s,[0,4,1,2,3])),s})}(e,this.kernel.read(),n,this.strides,this.padding,this.dataFormat,this.dilationRate)}null!=this.activation&&(t=this.activation.apply(t))}return t})}computeOutputShape(e){e=Ov(e);let t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2);for(let e=0;e<n.length;++e){let r=_w(n[e],this.kernelSize[e],this.padding,this.strides[e],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[e]);t.push(r)}let r=[e[0]];return"channelsLast"===this.dataFormat?(r=r.concat(t),r.push(this.filters)):(r.push(this.filters),r=r.concat(t)),r}getConfig(){let e={filters:this.filters,kernelInitializer:kv(this.kernelInitializer),kernelRegularizer:dw(this.kernelRegularizer),kernelConstraint:ob(this.kernelConstraint)},t=super.getConfig();return Object.assign(e,t),e}static verifyArgs(e){if(!("filters"in e)||"number"!=typeof e.filters||e.filters<1)throw new Jg("Convolution layer expected config.filters to be a 'number' > 0 but got "+JSON.stringify(e.filters))}},Pw=class extends Iw{constructor(e){super(2,e),Pw.verifyArgs(e)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&!fy(e.kernelSize,"number",1,2))throw new Jg(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}};Pw.className="Conv2D",fh.registerClass(Pw);var Ow=class extends Iw{constructor(e){super(3,e),Ow.verifyArgs(e)}getConfig(){let e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new Jg(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}};Ow.className="Conv3D",fh.registerClass(Ow);var Nw=class extends Pw{constructor(e){if(super(e),this.inputSpec=[new Mv({ndim:4})],"same"!==this.padding&&"valid"!==this.padding)throw new Jg("Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode "+this.padding)}build(e){if(4!==(e=Ov(e)).length)throw new Jg("Input should have rank 4; Received input shape: "+JSON.stringify(e));let t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new Jg("The channel dimension of the inputs should be defined. Found `None`.");let n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Mv({ndim:4,axes:{[t]:n}})],this.built=!0}call(e,t){return Xa(()=>{let t=Pv(e);if(4!==t.shape.length)throw new Jg("Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-"+t.shape.length);let n,r,i=t.shape,o=i[0];"channelsFirst"===this.dataFormat?(n=2,r=3):(n=1,r=2);let a=i[n],s=i[r],l=this.kernelSize[0],u=this.kernelSize[1],c=this.strides[0],p=this.strides[1],d=[o,Cw(a,c,l,this.padding),Cw(s,p,u,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=Wp(t,[0,2,3,1]));let h=yl(t,this.kernel.read(),d,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(h=Wp(h,[0,3,1,2])),null!=this.bias&&(h=nv(h,this.bias.read(),this.dataFormat)),null!=this.activation&&(h=this.activation.apply(h)),h})}computeOutputShape(e){let t,n,r,i=(e=Ov(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);let o=this.kernelSize[0],a=this.kernelSize[1],s=this.strides[0],l=this.strides[1];return i[t]=this.filters,i[n]=Cw(i[n],s,o,this.padding),i[r]=Cw(i[r],l,a,this.padding),i}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}};Nw.className="Conv2DTranspose",fh.registerClass(Nw);var Rw=class extends Ow{constructor(e){if(super(e),this.inputSpec=[new Mv({ndim:5})],"same"!==this.padding&&"valid"!==this.padding)throw new Jg("Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode "+this.padding)}build(e){if(5!==(e=Ov(e)).length)throw new Jg("Input should have rank 5; Received input shape: "+JSON.stringify(e));let t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t])throw new Jg("The channel dimension of the inputs should be defined. Found `None`.");let n=e[t],r=this.kernelSize.concat([this.filters,n]);this.kernel=this.addWeight("kernel",r,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Mv({ndim:5,axes:{[t]:n}})],this.built=!0}call(e,t){return Xa(()=>{let t=Pv(e);if(5!==t.shape.length)throw new Jg("Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-"+t.shape.length);let n,r,i,o=t.shape,a=o[0];"channelsFirst"===this.dataFormat?(i=2,n=3,r=4):(i=1,n=2,r=3);let s=o[i],l=o[n],u=o[r],c=this.kernelSize[0],p=this.kernelSize[1],d=this.kernelSize[2],h=this.strides[0],f=this.strides[1],m=this.strides[2],g=[a,Cw(s,h,c,this.padding),Cw(l,f,p,this.padding),Cw(u,m,d,this.padding),this.filters];"channelsLast"!==this.dataFormat&&(t=Wp(t,[0,2,3,4,1]));let y=xl(t,this.kernel.read(),g,this.strides,this.padding);return"channelsLast"!==this.dataFormat&&(y=Wp(y,[0,4,1,2,3])),null!==this.bias&&(y=nv(y,this.bias.read(),this.dataFormat)),null!==this.activation&&(y=this.activation.apply(y)),y})}computeOutputShape(e){let t,n,r,i,o=(e=Ov(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3,i=4):(t=4,n=1,r=2,i=3);let a=this.kernelSize[0],s=this.kernelSize[1],l=this.kernelSize[2],u=this.strides[0],c=this.strides[1],p=this.strides[2];return o[t]=this.filters,o[n]=Cw(o[n],u,a,this.padding),o[r]=Cw(o[r],c,s,this.padding),o[i]=Cw(o[i],p,l,this.padding),o}getConfig(){let e=super.getConfig();return delete e.dilationRate,e}};Rw.className="Conv3DTranspose",fh.registerClass(Rw);var Aw=class extends Iw{constructor(e,t){if(super(e,t),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,null==t.filters)throw new Jg("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=t.kernelInitializer||null!=t.kernelRegularizer||null!=t.kernelConstraint)throw new Jg("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=t.padding&&"same"!==t.padding&&"valid"!==t.padding)throw new Jg(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(t.padding)}`);this.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,this.depthwiseInitializer=Ev(t.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=fw(t.depthwiseRegularizer),this.depthwiseConstraint=sb(t.depthwiseConstraint),this.pointwiseInitializer=Ev(t.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=fw(t.pointwiseRegularizer),this.pointwiseConstraint=sb(t.pointwiseConstraint)}build(e){if((e=Ov(e)).length<this.rank+2)throw new Jg(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);let t="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[t]||e[t]<0)throw new Jg("The channel dimension of the inputs should be defined, but found "+JSON.stringify(e[t]));let n=e[t],r=this.kernelSize.concat([n,this.depthMultiplier]),i=[];for(let e=0;e<this.rank;++e)i.push(1);i.push(n*this.depthMultiplier,this.filters);this.depthwiseKernel=this.addWeight("depthwise_kernel",r,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,!0,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.inputSpec=[new Mv({ndim:this.rank+2,axes:{[t]:n}})],this.built=!0}call(e,t){return Xa(()=>{let t;if(e=Pv(e),1===this.rank)throw new Xg("1D separable convolution is not implemented yet.");return 2===this.rank&&("channelsFirst"===this.dataFormat&&(e=Wp(e,[0,2,3,1])),t=rp(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(t=nv(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),"channelsFirst"===this.dataFormat&&(t=Wp(t,[0,3,1,2])),t})}getConfig(){let e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=kv(this.depthwiseInitializer),e.pointwiseInitializer=kv(this.pointwiseInitializer),e.depthwiseRegularizer=dw(this.depthwiseRegularizer),e.pointwiseRegularizer=dw(this.pointwiseRegularizer),e.depthwiseConstraint=ob(this.depthwiseConstraint),e.pointwiseConstraint=ob(this.pointwiseConstraint),e}};Aw.className="SeparableConv";var Dw=class extends Aw{constructor(e){super(2,e)}};Dw.className="SeparableConv2D",fh.registerClass(Dw);var Vw=class extends Iw{constructor(e){super(1,e),Vw.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){let e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if("number"!=typeof e.kernelSize&&!fy(e.kernelSize,"number",1,1))throw new Jg(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}};Vw.className="Conv1D",fh.registerClass(Vw);var Mw=class extends qv{constructor(e){super(e),"number"==typeof e.cropping?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"==typeof e.cropping[0]?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,t){return Xa(()=>{if(e=Pv(e),"channelsLast"===this.dataFormat){let t=Qy(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Qy(t,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}{let t=Qy(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Qy(t,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){let e={cropping:this.cropping,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}};Mw.className="Cropping2D",fh.registerClass(Mw);var Fw=class extends qv{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=null==e.size?this.DEFAULT_SIZE:e.size,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Ty(this.dataFormat),this.interpolation=null==e.interpolation?"nearest":e.interpolation,function(e){hy(_y,"InterpolationFormat",e)}(this.interpolation)}computeOutputShape(e){if("channelsFirst"===this.dataFormat){let t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}{let t=null==e[1]?null:this.size[0]*e[1],n=null==e[2]?null:this.size[1]*e[2];return[e[0],t,n,e[3]]}}call(e,t){return Xa(()=>{let t=Pv(e),n=t.shape;if("channelsFirst"===this.dataFormat){t=Wp(t,[0,2,3,1]);let e=this.size[0]*n[2],r=this.size[1]*n[3],i="nearest"===this.interpolation?uh.resizeNearestNeighbor(t,[e,r]):uh.resizeBilinear(t,[e,r]);return Wp(i,[0,3,1,2])}{let e=this.size[0]*n[1],r=this.size[1]*n[2];return"nearest"===this.interpolation?uh.resizeNearestNeighbor(t,[e,r]):uh.resizeBilinear(t,[e,r])}})}getConfig(){let e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}};Fw.className="UpSampling2D",fh.registerClass(Fw);var Lw=class extends Tw{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,this.depthwiseInitializer=Ev(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=sb(e.depthwiseConstraint),this.depthwiseRegularizer=fw(e.depthwiseRegularizer)}build(e){if((e=Ov(e)).length<4)throw new Jg(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);let t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new Jg(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[t]}).`);let n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return Xa(()=>{let t=function(e,t,n=[1,1],r="valid",i,o){return Xa(()=>{null==i&&(i="channelsLast"),Ty(i);let a=Sw(e,i);if(4!==e.rank)throw new Jg(`Input for depthwiseConv2d is required to be 4-D, but is instead ${e.rank}-D`);if(4!==t.rank)throw new Jg(`depthwiseKernel is required to be 4-D, but is instead ${t.rank}-D`);return a=Tl(a,t,n,"same"===r?"same":"valid","NHWC",o),"channelsFirst"===i&&(a=Wp(a,[0,3,1,2])),a})}(e=Pv(e),this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(t=nv(t,this.bias.read(),this.dataFormat)),null!=this.activation&&(t=this.activation.apply(t)),t})}computeOutputShape(e){e=Ov(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,i=_w(t,this.kernelSize[0],this.padding,this.strides[0]),o=_w(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,i,o]:[e[0],i,o,r]}getConfig(){let e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=kv(this.depthwiseInitializer),e.depthwiseRegularizer=dw(this.depthwiseRegularizer),e.depthwiseConstraint=ob(this.depthwiseRegularizer),e}};function zw(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new Jg("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function i(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=i(t),constants:n=i(n)}}function jw(e,t,n,r=!1,i,o,a=!1,s=!1){return Xa(()=>{let l=t.shape.length;if(l<3)throw new Jg(`Input should be at least 3D, but is ${l}D.`);let u=[1,0].concat(qy(2,l));if(t=Wp(t,u),null!=o)throw new Xg("The rnn() functoin of the deeplearn.js backend does not support constants yet.");a&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=i&&((i=ja(ja(i,"bool"),"float32")).rank===l-1&&(i=su(i,-1)),i=Wp(i,u)),r&&(t=Kc(t,0),null!=i&&(i=Kc(i,0)));let c,p,d,h=[],f=n,m=t.shape[0],g=zp(t);null!=i&&(p=zp(i));for(let t=0;t<m;++t){let n=g[t],r=Xa(()=>e(n,f));if(null==i)c=r[0],f=r[1];else{let e=Xa(()=>{let e=p[t],n=Mu(lc(e),e);return{output:cs(hs(r[0],e),hs(f[0],n)),newStates:f.map((t,i)=>cs(hs(r[1][i],e),hs(t,n)))}});c=e.output,f=e.newStates}s&&h.push(c)}return s&&(d=xp(h,1)),[c,d,f]})}Lw.className="DepthwiseConv2D",fh.registerClass(Lw);var qw=class extends qv{constructor(e){let t;if(super(e),null==e.cell)throw new Jg("cell property is missing for the constructor of RNN.");if(t=Array.isArray(e.cell)?new Kw({cells:e.cell}):e.cell,null==t.stateSize)throw new Jg("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=t,this.returnSequences=null!=e.returnSequences&&e.returnSequences,this.returnState=null!=e.returnState&&e.returnState,this.goBackwards=null!=e.goBackwards&&e.goBackwards,this._stateful=null!=e.stateful&&e.stateful,this.unroll=null!=e.unroll&&e.unroll,this.supportsMasking=!0,this.inputSpec=[new Mv({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(null==this.states_){return qy(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map(e=>null)}return this.states_}setStates(e){this.states_=e}computeOutputShape(e){Tv(e)&&(e=e[0]),e=e;let t=this.cell.stateSize;Array.isArray(t)||(t=[t]);let n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){let r=[];for(let n of t)r.push([e[0],n]);return[n].concat(r)}return n}computeMask(e,t){return Xa(()=>{Array.isArray(t)&&(t=t[0]);let e=this.returnSequences?t:null;if(this.returnState){let t=this.states.map(e=>null);return[e].concat(t)}return e})}get states(){if(null==this.states_){let e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[];for(let n=0;n<e;++n)t.push(null);return t}return this.states_}set states(e){this.states_=e}build(e){if(null!=this.numConstants)throw new Xg("Constants support is not implemented in RNN yet.");Tv(e)&&(e=e[0]),e=e;let t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new Mv({shape:[t,null,...n]});let r,i=[e[0]].concat(e.slice(2));if(this.cell.build(i),r=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!Si.arraysEqual(this.stateSpec.map(e=>e.shape[e.shape.length-1]),r))throw new Jg(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=r.map(e=>new Mv({shape:[null,e]}));this.stateful&&this.resetStates()}resetStates(e,t=!1){Xa(()=>{if(!this.stateful)throw new Gg("Cannot call resetStates() on an RNN Layer that is not stateful.");let n=this.inputSpec[0].shape[0];if(null==n)throw new Jg("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.states_)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(e=>Xu([n,e])):this.states_=[Xu([n,this.cell.stateSize])];else if(null==e)Ya(this.states_),null!=this.keptStates&&(Ya(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(e=>Xu([n,e])):this.states_[0]=Xu([n,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Jg(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);!0===t?this.keptStates.push(this.states_.slice()):Ya(this.states_);for(let t=0;t<this.states_.length;++t){let r=e[t],i=Array.isArray(this.cell.stateSize)?this.cell.stateSize[t]:this.cell.stateSize,o=[n,i];if(!Si.arraysEqual(r.shape,o))throw new Jg(`State ${t} is incompatible with layer ${this.name}: expected shape=${o}, received shape=${r.shape}`);this.states_[t]=r}}this.states_=this.states_.map(e=>Za(e.clone()))})}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});let i=zw(e,n,r,this.numConstants);e=i.inputs,n=i.initialState,r=i.constants;let o=[],a=[];if(null!=n){t.initialState=n,o=o.concat(n),this.stateSpec=[];for(let e of n)this.stateSpec.push(new Mv({shape:e.shape}));a=a.concat(this.stateSpec)}if(null!=r&&(t.constants=r,o=o.concat(r),this.numConstants=r.length),o[0]instanceof Fv){let n=[e].concat(o),r=this.inputSpec.concat(a),i=this.inputSpec;this.inputSpec=r;let s=super.apply(n,t);return this.inputSpec=i,s}return super.apply(e,t)}call(e,t){return Xa(()=>{let n=null==t?null:t.mask,r=null==t?null:t.training,i=null==t?null:t.initialState;e=Pv(e),null==i&&(i=this.stateful?this.states_:this.getInitialState(e));let o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==o)throw new Jg(`RNN Layer has ${o} state(s) but was passed ${i.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");let a={training:r},s=jw((e,t)=>{let n=this.cell.call([e].concat(t),a);return[n[0],n.slice(1)]},e,i,this.goBackwards,n,null,this.unroll,this.returnSequences),l=s[0],u=s[1],c=s[2];this.stateful&&this.resetStates(c,r);let p=this.returnSequences?u:l;return this.returnState?[p].concat(c):p})}getInitialState(e){return Xa(()=>{let t=Xu(e.shape);return t=ru(t,[1,2]),t=Uy(t),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(e=>e>1?Jy(t,[1,e]):t):this.cell.stateSize>1?[Jy(t,[1,this.cell.stateSize])]:[t]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){let e=super.getConfig(),t={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(t.numConstants=this.numConstants);let n=this.cell.getConfig();return this.getClassName()===qw.className&&(t.cell={className:this.cell.getClassName(),config:n}),Object.assign(Object.assign(Object.assign({},n),e),t)}static fromConfig(e,t,n={}){let r=jb(t.cell,n);return new e(Object.assign(t,{cell:r}))}};qw.className="RNN",fh.registerClass(qw);var $w=class extends qv{},Bw=class extends $w{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,my(this.units,"units"),this.activation=sw(null==e.activation?this.DEFAULT_ACTIVATION:e.activation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=Ev(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Ev(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Ev(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=fw(e.kernelRegularizer),this.recurrentRegularizer=fw(e.recurrentRegularizer),this.biasRegularizer=fw(e.biasRegularizer),this.kernelConstraint=sb(e.kernelConstraint),this.recurrentConstraint=sb(e.recurrentConstraint),this.biasConstraint=sb(e.biasConstraint),this.dropout=zy([1,jy([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=zy([1,jy([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=Ov(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return Xa(()=>{if(2!==(e=e).length)throw new Jg(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let n=e[1];e=e[0];let r=null!=t.training&&t.training;0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=Jw({ones:()=>lc(e),rate:this.dropout,training:r,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=Jw({ones:()=>lc(n),rate:this.recurrentDropout,training:r,dropoutFunc:this.dropoutFunc}));let i,o=this.dropoutMask,a=this.recurrentDropoutMask;i=Yy(null!=o?hs(e,o):e,this.kernel.read()),null!=this.bias&&(i=nv(i,this.bias.read())),null!=a&&(n=hs(n,a));let s=cs(i,Yy(n,this.recurrentKernel.read()));return null!=this.activation&&(s=this.activation.apply(s)),[s,s]})}getConfig(){let e=super.getConfig(),t={units:this.units,activation:ow(this.activation),useBias:this.useBias,kernelInitializer:kv(this.kernelInitializer),recurrentInitializer:kv(this.recurrentInitializer),biasInitializer:kv(this.biasInitializer),kernelRegularizer:dw(this.kernelRegularizer),recurrentRegularizer:dw(this.recurrentRegularizer),biasRegularizer:dw(this.biasRegularizer),activityRegularizer:dw(this.activityRegularizer),kernelConstraint:ob(this.kernelConstraint),recurrentConstraint:ob(this.recurrentConstraint),biasConstraint:ob(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),t)}};Bw.className="SimpleRNNCell",fh.registerClass(Bw);var Uw=class extends qw{constructor(e){e.cell=new Bw(e),super(e)}call(e,t){return Xa(()=>{null!=this.cell.dropoutMask&&(Ya(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(Ya(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let n=null==t?null:t.mask,r=null==t?null:t.training,i=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:i})})}static fromConfig(e,t){return new e(t)}};Uw.className="SimpleRNN",fh.registerClass(Uw);var Ww=class extends $w{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new Jg("GRUCell does not support reset_after parameter set to true.");this.units=e.units,my(this.units,"units"),this.activation=sw(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=sw(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=Ev(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Ev(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Ev(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=fw(e.kernelRegularizer),this.recurrentRegularizer=fw(e.recurrentRegularizer),this.biasRegularizer=fw(e.biasRegularizer),this.kernelConstraint=sb(e.kernelConstraint),this.recurrentConstraint=sb(e.recurrentConstraint),this.biasConstraint=sb(e.biasConstraint),this.dropout=zy([1,jy([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=zy([1,jy([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){let t=(e=Ov(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,t){return Xa(()=>{if(2!==(e=e).length)throw new Jg(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);let n=null!=t.training&&t.training,r=e[1];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=Jw({ones:()=>lc(e),rate:this.dropout,training:n,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=Jw({ones:()=>lc(r),rate:this.recurrentDropout,training:n,count:3,dropoutFunc:this.dropoutFunc}));let i,o,a,s=this.dropoutMask,l=this.recurrentDropoutMask;0<this.dropout&&this.dropout<1&&(e=hs(e,s[0]));let u=Yy(e,this.kernel.read());this.useBias&&(u=nv(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(r=hs(r,l[0]));let c=this.recurrentKernel.read(),[p,d]=gp(c,[2*this.units,this.units],c.rank-1),h=Yy(r,p),[f,m,g]=gp(u,3,u.rank-1),[y,v]=gp(h,2,h.rank-1);i=this.recurrentActivation.apply(cs(f,y)),o=this.recurrentActivation.apply(cs(m,v));let b=Yy(hs(o,r),d);a=this.activation.apply(cs(g,b));let x=cs(hs(i,r),hs(cs(1,Au(i)),a));return[x,x]})}getConfig(){let e=super.getConfig(),t={units:this.units,activation:ow(this.activation),recurrentActivation:ow(this.recurrentActivation),useBias:this.useBias,kernelInitializer:kv(this.kernelInitializer),recurrentInitializer:kv(this.recurrentInitializer),biasInitializer:kv(this.biasInitializer),kernelRegularizer:dw(this.kernelRegularizer),recurrentRegularizer:dw(this.recurrentRegularizer),biasRegularizer:dw(this.biasRegularizer),activityRegularizer:dw(this.activityRegularizer),kernelConstraint:ob(this.kernelConstraint),recurrentConstraint:ob(this.recurrentConstraint),biasConstraint:ob(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),t)}};Ww.className="GRUCell",fh.registerClass(Ww);var Hw=class extends qw{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Ww(e),super(e)}call(e,t){return Xa(()=>{null!=this.cell.dropoutMask&&(Ya(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(Ya(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let n=null==t?null:t.mask,r=null==t?null:t.training,i=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:i})})}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}};Hw.className="GRU",fh.registerClass(Hw);var Qw=class extends $w{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,my(this.units,"units"),this.activation=sw(void 0===e.activation?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=sw(void 0===e.recurrentActivation?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=null==e.useBias||e.useBias,this.kernelInitializer=Ev(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=Ev(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=Ev(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=fw(e.kernelRegularizer),this.recurrentRegularizer=fw(e.recurrentRegularizer),this.biasRegularizer=fw(e.biasRegularizer),this.kernelConstraint=sb(e.kernelConstraint),this.recurrentConstraint=sb(e.recurrentConstraint),this.biasConstraint=sb(e.biasConstraint),this.dropout=zy([1,jy([0,null==e.dropout?0:e.dropout])]),this.recurrentDropout=zy([1,jy([0,null==e.recurrentDropout?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var t;let n,r=(e=Ov(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){let e=this.biasInitializer,r=this.units;n=new((t=class extends sv{apply(t,n){let i=e.apply([r]),o=(new uv).apply([r]),a=e.apply([2*r]);return Ky(Ky(i,o),a)}}).className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,t){return Xa(()=>{let n=null!=t.training&&t.training;if(3!==(e=e).length)throw new Jg(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let r=e[1],i=e[2];e=e[0],0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=Jw({ones:()=>lc(e),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=Jw({ones:()=>lc(r),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));let o,a,s,l,u=this.dropoutMask,c=this.recurrentDropoutMask;0<this.dropout&&this.dropout<1&&(e=hs(e,u[0]));let p=Yy(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(r=hs(r,c[0])),p=cs(p,Yy(r,this.recurrentKernel.read())),this.useBias&&(p=nv(p,this.bias.read()));let[d,h,f,m]=gp(p,4,p.rank-1);o=this.recurrentActivation.apply(d),a=this.recurrentActivation.apply(h),s=cs(hs(a,i),hs(o,this.activation.apply(f))),l=this.recurrentActivation.apply(m);let g=hs(l,this.activation.apply(s));return[g,g,s]})}getConfig(){let e=super.getConfig(),t={units:this.units,activation:ow(this.activation),recurrentActivation:ow(this.recurrentActivation),useBias:this.useBias,kernelInitializer:kv(this.kernelInitializer),recurrentInitializer:kv(this.recurrentInitializer),biasInitializer:kv(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:dw(this.kernelRegularizer),recurrentRegularizer:dw(this.recurrentRegularizer),biasRegularizer:dw(this.biasRegularizer),activityRegularizer:dw(this.activityRegularizer),kernelConstraint:ob(this.kernelConstraint),recurrentConstraint:ob(this.recurrentConstraint),biasConstraint:ob(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),t)}};Qw.className="LSTMCell",fh.registerClass(Qw);var Gw=class extends qw{constructor(e){0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Qw(e),super(e)}call(e,t){return Xa(()=>{null!=this.cell.dropoutMask&&(Ya(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(Ya(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);let n=null==t?null:t.mask,r=null==t?null:t.training,i=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:i})})}static fromConfig(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)}};Gw.className="LSTM",fh.registerClass(Gw);var Kw=class extends $w{constructor(e){super(e),this.cells=e.cells}get stateSize(){let e=[];for(let t of this.cells.slice().reverse())Array.isArray(t.stateSize)?e.push(...t.stateSize):e.push(t.stateSize);return e}call(e,t){return Xa(()=>{let n=(e=e).slice(1),r=[];for(let e of this.cells.slice().reverse())Array.isArray(e.stateSize)?r.push(n.splice(0,e.stateSize.length)):r.push(n.splice(0,1));r.reverse();let i,o=[];for(let a=0;a<this.cells.length;++a){let s=this.cells[a];n=r[a],i=0===a?[e[0]].concat(n):[i[0]].concat(n),i=s.call(i,t),o.push(i.slice(1))}n=[];for(let e of o.slice().reverse())n.push(...e);return[i[0]].concat(n)})}build(e){let t;Tv(e)&&(e=e[0]),e=e,this.cells.forEach((n,r)=>{Ny("RNNCell_"+r,()=>{n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]})}),this.built=!0}getConfig(){let e=super.getConfig(),t={cells:this.cells.map(e=>({className:e.getClassName(),config:e.getConfig()}))};return Object.assign(Object.assign({},e),t)}static fromConfig(e,t,n={}){let r=[];for(let e of t.cells)r.push(jb(e,n));return new e({cells:r})}get trainableWeights(){if(!this.trainable)return[];let e=[];for(let t of this.cells)e.push(...t.trainableWeights);return e}get nonTrainableWeights(){let e=[];for(let t of this.cells)e.push(...t.nonTrainableWeights);if(!this.trainable){let t=[];for(let e of this.cells)t.push(...e.trainableWeights);return t.concat(e)}return e}getWeights(){let e=[];for(let t of this.cells)e.push(...t.weights);return Dv(e)}setWeights(e){let t=[];for(let n of this.cells){let r=n.weights.length,i=e.splice(r);for(let e=0;e<n.weights.length;++e)t.push([n.weights[e],i[e]])}Vv(t)}};function Jw(e){let{ones:t,rate:n,training:r=!1,count:i=1,dropoutFunc:o}=e,a=()=>null!=o?o(t(),n):rv(t(),n),s=()=>iv(a,t,r);return!i||i<=1?Za(s().clone()):Array(i).fill(void 0).map(s).map(e=>Za(e.clone()))}Kw.className="StackedRNNCells",fh.registerClass(Kw);var Xw=class extends qw{constructor(e){if(e.unroll)throw new Xg("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new Xg("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Mv({ndim:5})]}call(e,t){return Xa(()=>{if(null!=this.cell.dropoutMask&&(Ya(this.cell.dropoutMask),this.cell.dropoutMask=null),null!=this.cell.recurrentDropoutMask&&(Ya(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),t&&t.constants)throw new Jg("ConvRNN2D cell does not support constants");let n=null==t?null:t.mask,r=null==t?null:t.training,i=null==t?null:t.initialState;return super.call(e,{mask:n,training:r,initialState:i})})}computeOutputShape(e){let t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0],...t.slice(2)]),this.returnState&&(t=[t,...Array(2).fill([e[0],...t.slice(-3)])]),t}getInitialState(e){return Xa(()=>{let{stateSize:t}=this.cell,n=e.shape,r=this.computeSingleOutputShape(n),i=Xu([r[0],...r.slice(2)]);return Array.isArray(t)?Array(t.length).fill(i):[i]})}resetStates(e,t=!1){Xa(()=>{if(!this.stateful)throw new Gg("Cannot call resetStates() on an RNN Layer that is not stateful.");let n=this.inputSpec[0].shape,r=this.computeSingleOutputShape(n),i=[r[0],...r.slice(2)];if(null==n[0])throw new Jg("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==this.getStates())Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Xu(i)):this.states_=[Xu(i)];else if(null==e)Ya(this.states_),null!=this.keptStates&&(Ya(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>Xu(i)):this.states_[0]=Xu(i);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new Jg(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);t?this.keptStates.push(this.states_.slice()):Ya(this.states_);for(let t=0;t<this.states_.length;++t){let n=e[t],r=i;if(!Si.arraysEqual(n.shape,r))throw new Jg(`State ${t} is incompatible with layer ${this.name}: expected shape=${r}, received shape=${n.shape}`);this.states_[t]=n}}this.states_=this.states_.map(e=>Za(e.clone()))})}computeSingleOutputShape(e){let{dataFormat:t,filters:n,kernelSize:r,padding:i,strides:o,dilationRate:a}=this.cell,s="channelsFirst"===t,l=e[s?3:2],u=e[s?4:3],c=_w(l,r[0],i,o[0],a[0]),p=_w(u,r[1],i,o[1],a[1]);return[...e.slice(0,2),...s?[n,c,p]:[c,p,n]]}};Xw.className="ConvRNN2D";var Yw=class extends Qw{constructor(e){let{filters:t,kernelSize:n,strides:r,padding:i,dataFormat:o,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:t})),this.filters=t,my(this.filters,"filters"),this.kernelSize=ww(n,2,"kernelSize"),this.kernelSize.forEach(e=>my(e,"kernelSize")),this.strides=ww(r||1,2,"strides"),this.strides.forEach(e=>my(e,"strides")),this.padding=i||"valid",Iy(this.padding),this.dataFormat=o||"channelsLast",Ty(this.dataFormat),this.dilationRate=ww(a||1,2,"dilationRate"),this.dilationRate.forEach(e=>my(e,"dilationRate"))}build(e){var t;e=Ov(e);let n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new Jg("The channel dimension of the input should be defined. Found "+e[n]);let r=e[n],i=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);let o=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",o,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let e;if(this.unitForgetBias){let n=this.biasInitializer,r=this.filters;e=new((t=class extends sv{apply(e,t){return Gy([n.apply([r]),Yu([r]),n.apply([2*r])])}}).className="CustomInit",t)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,e,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,t){return Xa(()=>{if(3!==e.length)throw new Jg(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let n=t.training||!1,r=e[0],i=e[1],o=e[2];0<this.dropout&&this.dropout<1&&null==this.dropoutMask&&(this.dropoutMask=Jw({ones:()=>lc(r),rate:this.dropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));let a=this.dropoutMask,s=(e,t,n)=>t&&t[n]?hs(t[n],e):e,l=s(r,a,0),u=s(r,a,1),c=s(r,a,2),p=s(r,a,3);0<this.recurrentDropout&&this.recurrentDropout<1&&null==this.recurrentDropoutMask&&(this.recurrentDropoutMask=Jw({ones:()=>lc(i),rate:this.recurrentDropout,training:n,count:4,dropoutFunc:this.dropoutFunc}));let d=this.recurrentDropoutMask,h=s(i,d,0),f=s(i,d,1),m=s(i,d,2),g=s(i,d,3),[y,v,b,x]=gp(this.kernel.read(),4,3),[w,_,C,S]=this.useBias?gp(this.bias.read(),4):[null,null,null,null];l=this.inputConv(l,y,w,this.padding),u=this.inputConv(u,v,_,this.padding),c=this.inputConv(c,b,C,this.padding),p=this.inputConv(p,x,S,this.padding);let[k,E,T,I]=gp(this.recurrentKernel.read(),4,3);h=this.recurrentConv(h,k),f=this.recurrentConv(f,E),m=this.recurrentConv(m,T),g=this.recurrentConv(g,I);let P=this.recurrentActivation.apply(cs(l,h)),O=this.recurrentActivation.apply(cs(u,f)),N=cs(hs(O,o),hs(P,this.activation.apply(cs(c,m)))),R=hs(this.recurrentActivation.apply(cs(p,g)),this.activation.apply(N));return[R,R,N]})}getConfig(){let e=super.getConfig(),{units:t}=e,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,t,n,r){let i=fl(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?nv(i,n,this.dataFormat):i}recurrentConv(e,t){return fl(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")}};Yw.className="ConvLSTM2DCell",fh.registerClass(Yw);var Zw=class extends Xw{constructor(e){let t=new Yw(e);super(Object.assign(Object.assign({},e),{cell:t}))}static fromConfig(e,t){return new e(t)}};Zw.className="ConvLSTM2D",fh.registerClass(Zw);var e_=class extends qv{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(null==this.noiseShape)return this.noiseShape;let t=e.shape,n=[];for(let e=0;e<this.noiseShape.length;++e)n.push(null==this.noiseShape[e]?t[e]:this.noiseShape[e]);return n}call(e,t){return Xa(()=>{this.invokeCallHook(e,t);let n=Pv(e);if(0<this.rate&&this.rate<1){let e=null!=t.training&&t.training,r=this.getNoiseShape(n);return iv(()=>rv(n,this.rate,r,this.seed),()=>n,e)}return e})}getConfig(){let e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},t=super.getConfig();return Object.assign(e,t),e}dispose(){return super.dispose()}};e_.className="Dropout",fh.registerClass(e_);var t_=class extends e_{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){let t=e.shape;return[t[0],1,t[2]]}};t_.className="SpatialDropout1D",fh.registerClass(t_);var n_=class extends qv{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){let t=null;null!=e.batchSize&&(t=e.batchSize),this.batchInputShape=[t,e.inputDim]}this.units=e.units,my(this.units,"units"),this.activation=sw(e.activation),null!=e.useBias&&(this.useBias=e.useBias),this.kernelInitializer=Ev(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=Ev(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=sb(e.kernelConstraint),this.biasConstraint=sb(e.biasConstraint),this.kernelRegularizer=fw(e.kernelRegularizer),this.biasRegularizer=fw(e.biasRegularizer),this.activityRegularizer=fw(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){let t=(e=Ov(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[t,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:t}}],this.built=!0}computeOutputShape(e){let t=(e=Ov(e)).slice();return t[t.length-1]=this.units,t}call(e,t){return Xa(()=>{this.invokeCallHook(e,t);let n,r=Pv(e),i=gy(this.activation.getClassName());return null!=i?n=Yy(r,this.kernel.read(),i,this.bias?this.bias.read():null):(n=Yy(r,this.kernel.read()),null!=this.bias&&(n=nv(n,this.bias.read())),null!=this.activation&&(n=this.activation.apply(n))),n})}getConfig(){let e={units:this.units,activation:ow(this.activation),useBias:this.useBias,kernelInitializer:kv(this.kernelInitializer),biasInitializer:kv(this.biasInitializer),kernelRegularizer:dw(this.kernelRegularizer),biasRegularizer:dw(this.biasRegularizer),activityRegularizer:dw(this.activityRegularizer),kernelConstraint:ob(this.kernelConstraint),biasConstraint:ob(this.biasConstraint)},t=super.getConfig();return Object.assign(e,t),e}};n_.className="Dense",fh.registerClass(n_);var r_=class extends qv{constructor(e){super(e=e||{}),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=Ov(e);for(let t of e.slice(1))if(null==t)throw new Jg(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],Ly(e,1)]}call(e,t){return Xa(()=>{this.invokeCallHook(e,t);let n=Pv(e);if("channelsFirst"===this.dataFormat&&n.rank>1){let e=[0];for(let t=2;t<n.rank;++t)e.push(t);e.push(1),n=Wp(n,e)}return function(e){if(e.rank<=1)throw new Jg(`batchFlatten requires a minimum rank of 2. Got rank: ${e.rank}.`);let t=[e.shape[0],Ly(e.shape,1)];return $s(e,t)}(n)})}getConfig(){let e={};null!=this.dataFormat&&(e.dataFormat=this.dataFormat);let t=super.getConfig();return Object.assign(e,t),e}};r_.className="Flatten",fh.registerClass(r_);var i_=class extends qv{constructor(e){super(e),this.supportsMasking=!0,this.activation=sw(e.activation)}call(e,t){return Xa(()=>{this.invokeCallHook(e,t);let n=Pv(e);return this.activation.apply(n)})}getConfig(){let e={activation:ow(this.activation)},t=super.getConfig();return Object.assign(e,t),e}};i_.className="Activation",fh.registerClass(i_);var o_=class extends qv{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,t){return Xa(()=>function(e,t){return Xa(()=>{if(2!==e.shape.length)throw new Jg(`repeat() expects a rank-2 tensor, but received a rank-${e.shape.length} tensor.`);return Jy(Uy(e,1),[1,t,1])})}(e=Pv(e),this.n))}getConfig(){let e={n:this.n},t=super.getConfig();return Object.assign(e,t),e}};o_.className="RepeatVector",fh.registerClass(o_);var a_=class extends qv{constructor(e){super(e),this.targetShape=e.targetShape;for(let e=0;e<this.targetShape.length;++e)this.isUnknown(this.targetShape[e])&&(this.targetShape[e]=null)}isUnknown(e){return e<0||null==e}fixUnknownDimension(e,t){let n="Total size of new array must be unchanged.",r=t.slice(),i=1,o=null;for(let e=0;e<r.length;++e){let t=r[e];if(this.isUnknown(t)){if(null!==o)throw new Jg("Can only specifiy one unknown dimension.");o=e}else i*=t}let a=Ly(e);if(null!==o){if(0===i||a%i!=0)throw new Jg(n);r[o]=a/i}else if(a!==i)throw new Jg(n);return r}computeOutputShape(e){let t=!1;for(let n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,t){return Xa(()=>{this.invokeCallHook(e,t);let n=Pv(e),r=n.shape,i=r.slice(0,1).concat(this.fixUnknownDimension(r.slice(1),this.targetShape));return $s(n,i)})}getConfig(){let e={targetShape:this.targetShape},t=super.getConfig();return Object.assign(e,t),e}};a_.className="Reshape",fh.registerClass(a_);var s_=class extends qv{constructor(e){if(super(e),null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);let t=qy(1,e.dims.length+1);if(!Si.arraysEqual(e.dims.slice().sort(),t))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Mv({ndim:this.dims.length+1})]}computeOutputShape(e){let t=(e=Ov(e)).slice();return this.dims.forEach((n,r)=>{t[r+1]=e[n]}),t}call(e,t){return Wp(Pv(e),this.dimsIncludingBatch)}getConfig(){let e={dims:this.dims},t=super.getConfig();return Object.assign(e,t),e}};s_.className="Permute",fh.registerClass(s_);var l_=class extends qv{constructor(e){super(null==e?{}:e),this.supportsMasking=!0,this.maskValue=null!=e?null==e.maskValue?0:e.maskValue:0}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={maskValue:this.maskValue};return Object.assign(t,e),t}computeMask(e,t){let n=Pv(e);return bs(ac(n,this.maskValue),-1)}call(e,t){return Xa(()=>{this.invokeCallHook(e,t);let n=Pv(e),r=bs(ac(n,this.maskValue),-1,!0);return hs(n,ja(r,n.dtype))})}};l_.className="Masking",fh.registerClass(l_);var u_=class extends qv{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){let t=null;null!=e.batchSize&&(t=e.batchSize),null==e.inputLength?this.batchInputShape=[t,null]:this.batchInputShape=[t].concat(iy(e.inputLength))}this.inputDim=e.inputDim,my(this.inputDim,"inputDim"),this.outputDim=e.outputDim,my(this.outputDim,"outputDim"),this.embeddingsInitializer=Ev(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=fw(e.embeddingsRegularizer),this.activityRegularizer=fw(e.activityRegularizer),this.embeddingsConstraint=sb(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,t){return Xa(()=>this.maskZero?(e=Pv(e),ac(e,Ml(e))):null)}computeOutputShape(e){if(e=Ov(e),null==this.inputLength)return[...e,this.outputDim];let t=iy(this.inputLength);if(t.length!==e.length-1)throw new Jg(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let n=0;for(let r=0;r<t.length;++r){let i=t[r],o=e[r+1];if(null!=i&&null!=o&&i!==o)throw new Jg(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);null==i&&(t[n]=o),n++}}return[e[0],...t,this.outputDim]}call(e,t){return Xa(()=>{this.invokeCallHook(e,t);let n=Pv(e);"int32"!==n.dtype&&(n=By(n,"int32"));let r=Zy(this.embeddings.read(),$s(n,[n.size]));return $s(r,Ov(this.computeOutputShape(n.shape)))})}getConfig(){let e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:kv(this.embeddingsInitializer),embeddingsRegularizer:dw(this.embeddingsRegularizer),activityRegularizer:dw(this.activityRegularizer),embeddingsConstraint:ob(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},t=super.getConfig();return Object.assign(e,t),e}};u_.className="Embedding",fh.registerClass(u_);var c_=class extends qv{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new Xg}computeElementwiseOpOutputShape(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;let n=e.slice(0,e.length-t.length);for(let r=0;r<t.length;++r){let i=e[e.length-t.length+r],o=t[r];if(null==i||null==o||i<0||o<0)n.push(null);else if(1===i)n.push(o);else if(1===o)n.push(i);else{if(i!==o)throw new Jg("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(i)}}return n}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[Ov(e)]),(e=e).length<2)throw new Jg(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let t=[];for(let n of e)null!=n&&null!==n[0]&&t.push(n[0]);if(t=py(t),t.length>1)throw new Jg(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let n=null==e[0]?null:e[0].slice(1);for(let t=1;t<e.length;++t){let r=null==e[t]?null:e[t].slice(1);n=this.computeElementwiseOpOutputShape(n,r)}let r=e.map(e=>e.length);-1===e.indexOf(null)&&1===py(r).length?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,t){return Xa(()=>{if(e=e,this.reshapeRequired){let t=[],n=e.map(e=>e.rank);if(-1===n.indexOf(null)){let r=jy(n);for(let n of e){let e=n.rank;for(let t=0;t<r-e;++t)n=Uy(n,1);t.push(n)}return this.mergeFunction(t)}{let n=!1;for(let r of e){let e=r.rank;if(null==e){let e=r.shape,i=e[0],o=e.slice(1).concat([i]),a=$s(r,[i].concat(Ly(e.slice(1))));a=Wp(a,[1,0]),a=$s(a,o),t.push(a),n=!0}else if(e>1){let i=qy(1,e).concat([0]);t.push(Wp(r,i)),n=!0}else t.push(r)}let r=this.mergeFunction(t),i=r.rank;if(n)if(null==i){let e=r.shape,t=e[e.length-1],n=[t].concat(e.slice(0,e.length-1));r=$s(Wp($s(r,[-1,t]),[1,0]),n)}else if(i>1){let e=[i-1].concat(qy(0,i-1));r=Wp(r,e)}return r}}return this.mergeFunction(e)})}computeOutputShape(e){let t;t=null==(e=e)[0]?null:e[0].slice(1);for(let n=1;n<e.length;++n){let r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}let n=[];for(let t of e)null!=t&&null!==t[0]&&n.push(t[0]);return n=py(n),t=1===n.length?n.concat(t):[null].concat(t),t}computeMask(e,t){return Xa(()=>{if(null==t)return null;if(!Array.isArray(t))throw new Jg("`mask` should be an Array");if(!Array.isArray(e))throw new Jg("`inputs` should be an Array");if(t.length!==e.length)throw new Jg(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${t.length})`);if(t.every(e=>null==e))return null;let n=(t=t.map(e=>null==e?e:su(e,0)))[0];for(let e=1;e<t.length-1;++e)n=zu(n,t[e]);return n})}},p_=class extends c_{constructor(e){super(e)}mergeFunction(e){return Xa(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=cs(t,e[n]);return t})}};p_.className="Add",fh.registerClass(p_);var d_=class extends c_{constructor(e){super(e)}mergeFunction(e){return Xa(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=hs(t,e[n]);return t})}};d_.className="Multiply",fh.registerClass(d_);var h_=class extends c_{constructor(e){super(e)}mergeFunction(e){return Xa(()=>{let t=e[0].clone();for(let n=1;n<e.length;++n)t=cs(t,e[n]);return hs(1/e.length,t)})}};h_.className="Average",fh.registerClass(h_);var f_=class extends c_{constructor(e){super(e)}mergeFunction(e){return Xa(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=Ku(t,e[n]);return t})}};f_.className="Maximum",fh.registerClass(f_);var m_=class extends c_{constructor(e){super(e)}mergeFunction(e){return Xa(()=>{let t=e[0];for(let n=1;n<e.length;++n)t=ec(t,e[n]);return t})}};m_.className="Minimum",fh.registerClass(m_);var g_=class extends c_{constructor(e){super(e),this.DEFAULT_AXIS=-1,null==e&&(e={}),this.axis=null==e.axis?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new Jg("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let t=!0;for(let n of e)if(null!=n){t=!1;break}if(t)return;let n=[];for(let t=0;t<e.length;++t){let r=e[t].slice();r.splice(this.axis,1);let i=!1;for(let e of n)if(Si.arraysEqual(e,r)){i=!0;break}i||n.push(r)}if(n.length>1)throw new Jg("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return Xa(()=>Gy(e,this.axis))}computeOutputShape(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new Jg("A `Concatenate` layer should be called on a list of inputs.");let t=e,n=t[0].slice(),r=this.axis<0?n.length+this.axis:this.axis;for(let e of t.slice(1)){if(null==n[r]||null==e[r]){n[r]=null;break}n[r]+=e[r]}return n}computeMask(e,t){if(null==t)return null;if(!Array.isArray(t))throw new Jg("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new Jg("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new Jg(`Mismatch in the length of mask (${t.length}) and the legnth of inputs (${e.length})`);return Xa(()=>{let n=!0;if(t.forEach(e=>{null==e||(n=!1)}),n)return null;let r=[];for(let n=0;n<e.length;++n)null==t[n]?r.push(ja(lc(e[n]),"bool")):t[n].rank<e[n].rank?r.push(su(t[n],-1)):r.push(t[n]);let i=Ws(r,this.axis);return vs(i,-1,!1)})}getConfig(){let e={axis:this.axis},t=super.getConfig();return Object.assign(e,t),e}};function y_(e,t){for(;e<0;)e+=t;return e}g_.className="Concatenate",fh.registerClass(g_);var v_=class extends c_{constructor(e){super(e),this.axes=e.axes,this.normalize=null!=e.normalize&&e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){Si.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let t=e[0],n=e[1];if(t.length>3||n.length>3)throw new Xg("Dot layer does not support tensors of 4D or higher rank yet.");let r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new Jg(`Dimension incompatibility: ${t[r[0]]} !== ${n[r[1]]}`)}mergeFunction(e){if(2!==e.length)throw new Jg(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((t,n)=>y_(t,e[n].shape.length)):[y_(this.axes,n.shape.length),y_(this.axes,r.shape.length)],this.normalize&&(n=qb(n,t[0]),r=qb(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new Xg("batchDot is not implemented for tensors of 4D or higher rank yet");if(Si.assert(e.shape.length>=2,()=>"batchDot requires the rank of x to be >= 2, but got "+e.shape.length),Si.assert(e.shape.length>=2,()=>"batchDot requires the rank of y to be >= 2, but got "+t.shape.length),"number"==typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new Xg("batchDot is not implemented for complex64-type Tensors yet.");let r=e.shape.length,i=t.shape.length;null==n&&(n=[r-1,i-2]);let o=n;return Xa(()=>{let n,a;if(r>i){n=r-i;let e=[];for(let t=0;t<n;++t)e.push(1);t=$s(t,t.shape.concat(e))}else if(i>r){n=i-r;let t=[];for(let e=0;e<n;++e)t.push(1);e=$s(e,e.shape.concat(t))}else n=0;if(2===e.shape.length&&2===t.shape.length)a=o[0]===o[1]?ru(hs(e,t),o[0]):ru(hs(Wp(e,[1,0]),t),o[1]);else{let n=o[0]!==e.shape.length-1,r=o[1]===t.shape.length-1;a=Hs(e,t,n,r)}if(n>0){let e;e=r>i?r+i-3:r-1;let t=[];for(let r=e;r<e+n;++r)t.push(r);a=bp(a,t)}return 1===a.shape.length&&(a=su(a,1)),a})}(n,r,t)}interpretAxes(e,t){let n;return n=Array.isArray(this.axes)?this.axes:[y_(this.axes,e.length),y_(this.axes,t.length)],n}computeOutputShape(e){Si.assert(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");let t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new Xg("Dot layer does not support tensors of 4D or higher rank yet.");let r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);let i=t.concat(n);return 1===i.length&&i.push(1),i}computeMask(e,t){return null}getConfig(){let e={axes:this.axes,normalize:this.normalize},t=super.getConfig();return Object.assign(e,t),e}};v_.className="Dot",fh.registerClass(v_);var b_=class extends qv{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={stddev:this.stddev};return Object.assign(t,e),t}call(e,t){return Xa(()=>{this.invokeCallHook(e,t);let n=Pv(e);return iv(()=>cs(Xy(n.shape,0,this.stddev),n),()=>n,t.training||!1)})}};b_.className="GaussianNoise",fh.registerClass(b_);var x_=class extends qv{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return Xa(()=>{this.invokeCallHook(e,t);let n=Pv(e);return this.rate>0&&this.rate<1?iv(()=>{let e=Math.sqrt(this.rate/(1-this.rate));return hs(n,Xy(n.shape,1,e))},()=>n,t.training||!1):n})}};x_.className="GaussianDropout",fh.registerClass(x_);var w_=class extends qv{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||Pv(e).shape}computeOutputShape(e){return e}getConfig(){let e=super.getConfig(),t={rate:this.rate};return Object.assign(t,e),t}call(e,t){return Xa(()=>{if(this.rate<1&&this.rate>0){let n=this._getNoiseShape(e);return iv(()=>{let t=Pv(e),r=-1.7580993408473766,i=fu($c(n),this.rate);i=By(i,"float32");let o=((1-this.rate)*(1+this.rate*r**2))**-.5,a=-o*r*this.rate,s=cs(hs(t,i),hs(cs(i,-1),r));return cs(hs(s,o),a)},()=>Pv(e),t.training||!1)}return e})}};function __(e,t,n,r,i,o=.001){let a;if(2===e.rank)a=el(e,t,n,r,i,o);else if(3===e.rank)a=tl(e,t,n,r,i,o);else{if(4!==e.rank)throw new Xg(`batchNormalization is not implemented for array of rank ${e.rank} yet`);a=nl(e,t,n,r,i,o)}return a}function C_(e,t,n,r,i=.001){return Si.arraysEqual(r.slice().sort(),qy(0,e.rank-1))?function(e,t,n,r,i=.001){return Xa(()=>{let o=rc(e,r),a=o.mean,s=o.variance;return[__(e,a,s,n,t,i),a,s]})}(e,t,n,r,i):function(e,t,n,r,i=.001){return Xa(()=>{let o=rc(e,r),a=o.mean,s=o.variance,l=[];for(let t of qy(0,e.rank))-1!==r.indexOf(t)?l.push(1):l.push(e.shape[t]);let u=$s(a,l),c=$s(s,l),p=null==t?null:$s(t,l),d=null==n?null:$s(n,l);return[__(e,u,c,d,p,i),a,s]})}(e,t,n,r,i)}w_.className="AlphaDropout",fh.registerClass(w_);var S_=class extends qv{constructor(e){null==e&&(e={}),super(e),this.supportsMasking=!0,this.axis=null==e.axis?-1:e.axis,this.momentum=null==e.momentum?.99:e.momentum,this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=Ev(e.betaInitializer||"zeros"),this.gammaInitializer=Ev(e.gammaInitializer||"ones"),this.movingMeanInitializer=Ev(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=Ev(e.movingVarianceInitializer||"ones"),this.betaConstraint=sb(e.betaConstraint),this.gammaConstraint=sb(e.gammaConstraint),this.betaRegularizer=fw(e.betaRegularizer),this.gammaRegularizer=fw(e.gammaRegularizer)}build(e){e=Ov(e);let t=this.axis>=0?this.axis:this.axis+e.length,n=e[t];if(null==n)throw new Jg(`Axis ${t} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Mv({ndim:e.length,axes:{[t]:n}})];let r=[n];this.scale&&(this.gamma=this.addWeight("gamma",r,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",r,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",r,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",r,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,t){return Xa(()=>{let n=null!=t.training&&t.training,r=Pv(e),i=r.shape,o=i.length,a=qy(0,o),s=this.axis>=0?this.axis:this.axis+o;a.splice(s,1);let l=ey(1,o);l[s]=i[s];let u=a.slice();u.sort();let c=!Si.arraysEqual(u,qy(0,o).slice(0,o-1));if(!n)return(()=>{if(c){let e=$s(this.movingMean.read(),l),t=$s(this.movingVariance.read(),l),n=this.center?$s(this.beta.read(),l):null,i=this.scale?$s(this.gamma.read(),l):null;return __(r,e,t,n,i,this.epsilon)}return __(r,this.movingMean.read(),this.movingVariance.read(),null==this.beta?null:this.beta.read(),null==this.gamma?null:this.gamma.read(),this.epsilon)})();let[p,d,h]=C_(r,this.gamma.read(),this.beta.read(),a,this.epsilon),f=(e,t,n)=>{Xa(()=>{let r=1-n,i=e.read(),o=hs(Mu(i,t),r);e.write(Mu(i,o))})};return f(this.movingMean,d,this.momentum),f(this.movingVariance,h,this.momentum),p})}getConfig(){let e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:kv(this.betaInitializer),gammaInitializer:kv(this.gammaInitializer),movingMeanInitializer:kv(this.movingMeanInitializer),movingVarianceInitializer:kv(this.movingVarianceInitializer),betaRegularizer:dw(this.betaRegularizer),gammaRegularizer:dw(this.gammaRegularizer),betaConstraint:ob(this.betaConstraint),gammaConstraint:ob(this.gammaConstraint)},t=super.getConfig();return Object.assign(e,t),e}};S_.className="BatchNormalization",fh.registerClass(S_);var k_=class extends qv{constructor(e){if(null==e&&(e={}),super(e),this.axis=null==e.axis?-1:e.axis,"number"==typeof this.axis){if(!Number.isInteger(this.axis))throw new Error("Expected axis to be an integer, but received "+this.axis)}else{if(!Array.isArray(this.axis))throw new Error("Expected axis to be an integer or an array of integers, but received "+JSON.stringify(this.axis));for(let e of this.axis)if(!Number.isInteger(e))throw new Error("Expected axis to be an array of integers, but received "+JSON.stringify(this.axis))}this.epsilon=null==e.epsilon?.001:e.epsilon,this.center=null==e.center||e.center,this.scale=null==e.scale||e.scale,this.betaInitializer=Ev(e.betaInitializer||"zeros"),this.gammaInitializer=Ev(e.gammaInitializer||"ones"),this.betaRegularizer=fw(e.betaRegularizer),this.gammaRegularizer=fw(e.gammaRegularizer),this.supportsMasking=!0}build(e){let t=(e=Ov(e)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(let e=0;e<this.axis.length;++e)this.axis[e]<0&&(this.axis[e]+=t);for(let e of this.axis)if(e<0||e>=t)throw new Error("Invalid axis: "+e);if(this.axis.length!==py(this.axis).length)throw new Error("Found duplicate axes in: "+this.axis);let n=this.axis.map(t=>e[t]);this.scale?this.gamma=this.addWeight("gamma",n,"float32",this.gammaInitializer,this.gammaRegularizer,!0):this.gamma=null,this.center?this.beta=this.addWeight("beta",n,"float32",this.betaInitializer,this.betaRegularizer,!0):this.beta=null,this.built=!0}call(e,t){let n=Pv(e),r=n.shape,i=r.length;return Xa(()=>{let{mean:e,variance:t}=rc(n,this.axis,!0),o=ey(1,i);for(let e of this.axis)o[e]=r[e];let a=e=>null!=e&&e.shape.length!==i?$s(e,o):e,s=this.scale?a(this.gamma.read()):null,l=this.center?a(this.beta.read()):null,u=[],c=[];for(let e=0;e<i;++e)-1!==this.axis.indexOf(e)?(u.push(r[e]),c.push(1)):(u.push(1),c.push(r[e]));return e=uu(e,u),t=uu(t,u),null!=s&&(s=uu(s,c)),null!=l&&(l=uu(l,c)),__(n,e,t,l,s,this.epsilon)})}getConfig(){let e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:kv(this.betaInitializer),gammaInitializer:kv(this.gammaInitializer),betaRegularizer:dw(this.betaRegularizer),gammaRegularizer:dw(this.gammaRegularizer)},t=super.getConfig();return Object.assign(e,t),e}};k_.className="LayerNormalization",fh.registerClass(k_);var E_=class extends qv{constructor(e){if(null==e&&(e={}),super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)this.padding=[[1,1],[1,1]];else if("number"==typeof e.padding)this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new Jg(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let t,n;if("number"==typeof e.padding[0])t=[e.padding[0],e.padding[0]],n=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new Jg(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(t=e.padding[0],2!==e.padding[1].length)throw new Jg(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);n=e.padding[1]}this.padding=[t,n]}this.inputSpec=[new Mv({ndim:4})]}computeOutputShape(e){let t,n;return e=Ov(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])}call(e,t){return Xa(()=>function(e,t,n){return Xa(()=>{if(4!==e.rank)throw new Jg(`temporalPadding expects input tensor to be 4-D, but received a ${e.rank}-D tensor.`);if(null==t&&(t=[[1,1],[1,1]]),2!==t.length||2!==t[0].length||2!==t[1].length)throw new Jg("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new Jg(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return r="channelsFirst"===n?[[0,0],[0,0],t[0],t[1]]:[[0,0],t[0],t[1],[0,0]],cc(e,r)})}(Pv(e),this.padding,this.dataFormat))}getConfig(){let e={padding:this.padding,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}};function T_(e,t,n,r,i,o){return Xa(()=>{Ty(i),Py(o),Iy(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==i&&(i="channelsLast"),null==o&&(o="max"),e=Sw(e,i);let a,s="same"===r?"same":"valid";return a="max"===o?Hu(e,t,n,s):Bs(e,t,n,s),"channelsFirst"===i&&(a=Wp(a,[0,3,1,2])),a})}function I_(e,t,n,r,i,o){return Xa(()=>{Ty(i),Py(o),Iy(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==i&&(i="channelsLast"),null==o&&(o="max"),e=kw(e,i);let a,s="same"===r?"same":"valid";return a="max"===o?Qu(e,t,n,s):Us(e,t,n,s),"channelsFirst"===i&&(a=Wp(a,[0,4,1,2,3])),a})}E_.className="ZeroPadding2D",fh.registerClass(E_);var P_=class extends qv{constructor(e){if(null==e.poolSize&&(e.poolSize=2),super(e),"number"==typeof e.poolSize)this.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!=typeof e.poolSize[0])throw new Jg("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(e.poolSize));this.poolSize=e.poolSize}if(my(this.poolSize,"poolSize"),null==e.strides)this.strides=this.poolSize;else if("number"==typeof e.strides)this.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!=typeof e.strides[0])throw new Jg("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(e.strides));this.strides=e.strides}my(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,Iy(this.padding),this.inputSpec=[new Mv({ndim:3})]}computeOutputShape(e){let t=_w((e=Ov(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]}call(e,t){return Xa(()=>{this.invokeCallHook(e,t),e=Uy(Pv(e),2);let n=this.poolingFunction(Pv(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return bp(n,[2])})}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},t=super.getConfig();return Object.assign(e,t),e}},O_=class extends P_{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return Ty(i),Iy(r),T_(e,t,n,r,i,"max")}};O_.className="MaxPooling1D",fh.registerClass(O_);var N_=class extends P_{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return Ty(i),Iy(r),T_(e,t,n,r,i,"avg")}};N_.className="AveragePooling1D",fh.registerClass(N_);var R_=class extends qv{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new Jg(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];my(this.poolSize,"poolSize"),my(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Ty(this.dataFormat),Iy(this.padding),this.inputSpec=[new Mv({ndim:4})]}computeOutputShape(e){e=Ov(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=_w(t,this.poolSize[0],this.padding,this.strides[0]),n=_w(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]}call(e,t){return Xa(()=>(this.invokeCallHook(e,t),this.poolingFunction(Pv(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},A_=class extends R_{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return Ty(i),Iy(r),T_(e,t,n,r,i,"max")}};A_.className="MaxPooling2D",fh.registerClass(A_);var D_=class extends R_{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return Ty(i),Iy(r),T_(e,t,n,r,i,"avg")}};D_.className="AveragePooling2D",fh.registerClass(D_);var V_=class extends qv{constructor(e){if(null==e.poolSize&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],null==e.strides)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(3!==e.strides.length)throw new Jg(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];my(this.poolSize,"poolSize"),my(this.strides,"strides"),this.padding=null==e.padding?"valid":e.padding,this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Ty(this.dataFormat),Iy(this.padding),this.inputSpec=[new Mv({ndim:5})]}computeOutputShape(e){e=Ov(e);let t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=_w(t,this.poolSize[0],this.padding,this.strides[0]),n=_w(n,this.poolSize[1],this.padding,this.strides[1]),r=_w(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]}call(e,t){return Xa(()=>(this.invokeCallHook(e,t),this.poolingFunction(Pv(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){let e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},M_=class extends V_{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return Ty(i),Iy(r),I_(e,t,n,r,i,"max")}};M_.className="MaxPooling3D",fh.registerClass(M_);var F_=class extends V_{constructor(e){super(e)}poolingFunction(e,t,n,r,i){return Ty(i),Iy(r),I_(e,t,n,r,i,"avg")}};F_.className="AveragePooling3D",fh.registerClass(F_);var L_=class extends qv{constructor(e){super(e),this.inputSpec=[new Mv({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,t){throw new Xg}},z_=class extends L_{constructor(e){super(e||{})}call(e,t){return Xa(()=>{let t=Pv(e);return Ju(t,1)})}};z_.className="GlobalAveragePooling1D",fh.registerClass(z_);var j_=class extends L_{constructor(e){super(e||{})}call(e,t){return Xa(()=>{let t=Pv(e);return Xl(t,1)})}};j_.className="GlobalMaxPooling1D",fh.registerClass(j_);var q_=class extends qv{constructor(e){super(e),this.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,Ty(this.dataFormat),this.inputSpec=[new Mv({ndim:4})]}computeOutputShape(e){return e=e,"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]}call(e,t){throw new Xg}getConfig(){let e={dataFormat:this.dataFormat},t=super.getConfig();return Object.assign(e,t),e}},$_=class extends q_{call(e,t){return Xa(()=>{let t=Pv(e);return"channelsLast"===this.dataFormat?Ju(t,[1,2]):Ju(t,[2,3])})}};$_.className="GlobalAveragePooling2D",fh.registerClass($_);var B_=class extends q_{call(e,t){return Xa(()=>{let t=Pv(e);return"channelsLast"===this.dataFormat?Xl(t,[1,2]):Xl(t,[2,3])})}};B_.className="GlobalMaxPooling2D",fh.registerClass(B_);var U_=class extends qv{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return null!=this.layer&&this.layer.trainable}set trainable(e){null!=this.layer&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){let e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},t=super.getConfig();return Object.assign(e,t),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,t,n={}){let r=jb(t.layer,n);delete t.layer;let i={layer:r};return Object.assign(i,t),new e(i)}},W_=class extends U_{constructor(e){super(e),this.supportsMasking=!0}build(e){if((e=Ov(e)).length<3)throw new Jg("TimeDistributed layer expects an input shape >= 3D, but received input shape "+JSON.stringify(e));this.inputSpec=[{shape:e}];let t=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(t),this.layer.built=!0),super.build(e)}computeOutputShape(e){let t=[(e=Ov(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))}call(e,t){return Xa(()=>jw((e,n)=>[Pv(this.layer.call(e,t)),[]],e=Pv(e),[],!1,null,null,!1,!0)[1])}};W_.className="TimeDistributed",fh.registerClass(W_);var H_=class extends U_{constructor(e){super(e);let t=e.layer.getConfig(),n={};n.className=e.layer.getClassName(),n.config=t,this.forwardLayer=jb(n),t.goBackwards=!0!==t.goBackwards;let r={};if(r.className=e.layer.getClassName(),r.config=t,this.backwardLayer=jb(r),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=void 0===e.mergeMode?"concat":e.mergeMode,function(e){hy(ky,"BidirectionalMergeMode",e)}(this.mergeMode),e.weights)throw new Xg("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){let t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))}computeOutputShape(e){let t,n,r,i=this.forwardLayer.computeOutputShape(e);return Array.isArray(i)&&Array.isArray(i[0])||(i=[i]),i=i,this.returnState&&(r=i.slice(1)),t=i[0],t=t,"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):ry(n)}apply(e,t){let n=null==t?null:t.initialState,r=null==t?null:t.constants;null==t&&(t={});let i=zw(e,n,r,this.numConstants);if(e=i.inputs,n=i.initialState,r=i.constants,Array.isArray(e)&&(n=e.slice(1),e=e[0]),(null==n||0===n.length)&&null==r)return super.apply(e,t);let o=[],a=[];if(null!=n){let e=n.length;if(e%2>0)throw new Jg("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");t.initialState=n,o.push(...n);let r=n.map(e=>new Mv({shape:e.shape}));this.forwardLayer.stateSpec=r.slice(0,e/2),this.backwardLayer.stateSpec=r.slice(e/2),a.push(...r)}if(null!=r)throw new Xg("Support for constants in Bidirectional layers is not implemented yet.");let s=o[0]instanceof Fv;for(let e of o)if(e instanceof Fv!==s)throw new Jg("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(s){let n=[e].concat(o),r=this.inputSpec.concat(a),i=this.inputSpec;this.inputSpec=r;let s=super.apply(n,t);return this.inputSpec=i,s}return super.apply(e,t)}call(e,t){return Xa(()=>{let n,r,i,o,a=t.initialState;if(null==a)n=this.forwardLayer.call(e,t),r=this.backwardLayer.call(e,t);else{let i=a.slice(0,a.length/2),o=a.slice(a.length/2);n=this.forwardLayer.call(e,Object.assign(t,{initialState:i})),r=this.backwardLayer.call(e,Object.assign(t,{initialState:o}))}return this.returnState&&(Array.isArray(n)&&(i=n.slice(1).concat(r.slice(1))),n=n[0],r=r[0]),this.returnSequences&&(r=Kc(r,1)),"concat"===this.mergeMode?o=Gy([n,r]):"sum"===this.mergeMode?o=cs(n,r):"ave"===this.mergeMode?o=hs(.5,cs(n,r)):"mul"===this.mergeMode?o=hs(n,r):null==this.mergeMode&&(o=[n,r]),this.returnState?null==this.mergeMode?o.concat(i):[o].concat(i):o})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Ny(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Ny(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,t){let n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){let e=this.forwardLayer.states.map(e=>null);return Array.isArray(n)?n.concat(e).concat(e):[n].concat(e).concat(e)}return n}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(e),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){let e={mergeMode:this.mergeMode},t=super.getConfig();return Object.assign(e,t),e}static fromConfig(e,t){let n=jb(t.layer);if(delete t.layer,null!=t.numConstants)throw new Xg("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");let r=t;return r.layer=n,new e(r)}};H_.className="Bidirectional",fh.registerClass(H_);var Q_=class extends qv{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){let e={scale:this.scale,offset:this.offset},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return Xa(()=>("float32"!==(e=Pv(e)).dtype&&(e=By(e,"float32")),cs(hs(e,this.scale),this.offset)))}};Q_.className="Rescaling",fh.registerClass(Q_);var{resizeBilinear:G_,cropAndResize:K_}=uh,J_=class extends qv{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,t,n,r,i,o,a,s){return Xa(()=>{let l,u=!1,c=[t/o,n/a,(r+t)/o,(i+n)/a],p=[];3===e.rank?(u=!0,l=xp([e])):l=e;for(let e=0;e<l.shape[0];e++)p.push(c);let d=Bo(p,[p.length,4]),h=Uc(0,p.length,1,"int32"),f=K_(l,d,h,[r,i],"nearest");return By(u?Pv(zp(f)):f,s)})}upsize(e,t,n,r){return Xa(()=>By(G_(e,[t,n]),r))}call(e,t){return Xa(()=>{let t=Pv(e),n=t.dtype,r=t.shape,i=r[r.length-3],o=r[r.length-2],a=0;i!==this.height&&(a=Math.floor((i-this.height)/2));let s=0;return o!==this.width&&(s=Math.floor((o-this.width)/2),0===s&&(s=1)),a>=0&&s>=0?this.centerCrop(t,a,s,this.height,this.width,i,o,n):this.upsize(e,this.height,this.width,n)})}getConfig(){let e={height:this.height,width:this.width},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){let t=(e=Ov(e)).length-3,n=e.length-2;return e[t]=this.height,e[n]=this.width,e}};J_.className="CenterCrop",fh.registerClass(J_);var X_=class extends qv{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){let e={numTokens:this.numTokens,outputMode:this.outputMode},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){return null==(e=Ov(e))?[this.numTokens]:"oneHot"===this.outputMode&&1!==e[e.length-1]?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,t){return Xa(()=>{let n;if("int32"!==(e=Pv(e)).dtype&&(e=By(e,"int32")),void 0!==t.countWeights){if("count"!==this.outputMode)throw new Jg("countWeights is not used when outputMode !== count.\n              Received countWeights="+t.countWeights);n=Pv(t.countWeights)}let r=Xl(e),i=Yl(e),o=hu(this.numTokens,r).bufferSync().get(0),a=fu(i,0).bufferSync().get(0);if(!o||!a)throw new Jg("Input values must be between 0 < values <= numTokens with numTokens="+this.numTokens);return function(e,t,n,r){let i=Pv(e);if("int32"!==i.dtype&&(i=By(i,"int32")),"int"===t)return i;let o=i.shape;if(0===i.rank&&(i=su(i,-1)),"oneHot"===t&&1!==i.shape[i.shape.length-1]&&(i=su(i,-1)),i.rank>2)throw new Jg(`When outputMode is not int, maximum output rank is 2 Received outputMode ${t} and input shape ${o} which would result in output rank ${i.rank}.`);let a,s=["multiHot","oneHot"].includes(t),l=i;if(a=kl(l,void 0!==r&&"count"===t?r:[],n,s),"tfIdf"!==t)return a;if(r)return hs(a,r);throw new Jg("When outputMode is 'tfIdf', weights must be provided.")}(e,this.outputMode,this.numTokens,n)})}};X_.className="CategoryEncoding",fh.registerClass(X_);var Y_=new Set(["bilinear","nearest"]),Z_=class extends qv{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation){if(!Y_.has(e.interpolation))throw new Jg(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);this.interpolation=e.interpolation}else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){let t=(e=Ov(e))[2];return[this.height,this.width,t]}getConfig(){let e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},t=super.getConfig();return Object.assign(e,t),e}call(e,t){return Xa(()=>{let t=[this.height,this.width];if("bilinear"===this.interpolation)return uh.resizeBilinear(e,t,!this.cropToAspectRatio);if("nearest"===this.interpolation)return uh.resizeNearestNeighbor(e,t,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...Y_]} are supported`)})}};Z_.className="Resizing",fh.registerClass(Z_);var eC=class{constructor(e){this.seed=e}next(){if(void 0!==this.seed)return this.seed++}};eC.className="RandomSeed";var tC=class extends qv{constructor(e){super(e),this.randomGenerator=new eC(e.seed)}getConfig(){let e={seed:this.randomGenerator.seed},t=super.getConfig();return Object.assign(e,t),e}};tC.className="BaseRandomLayer";var nC=new Set(["bilinear","nearest"]),rC=class extends tC{constructor(e){super(e);let{factor:t,interpolation:n="bilinear"}=e;if(this.factor=t,Array.isArray(this.factor)&&2===this.factor.length)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else{if(Array.isArray(this.factor)||!(this.factor>0))throw new Jg(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);this.widthLower=-this.factor,this.widthUpper=this.factor}if(this.widthLower<-1||this.widthUpper<-1)throw new Jg("factor must have values larger than -1. Got: "+this.factor);if(this.widthUpper<this.widthLower)throw new Jg(`factor cannot have upper bound less than lower bound.\n        Got upper bound: ${this.widthUpper}.\n        Got lower bound: ${this.widthLower}\n      `);if(n){if(!nC.has(n))throw new Jg(`Invalid interpolation parameter: ${n} is not implemented`);this.interpolation=n}}getConfig(){let e={factor:this.factor,interpolation:this.interpolation},t=super.getConfig();return Object.assign(e,t),e}computeOutputShape(e){let t=(e=Ov(e))[2];return[this.imgHeight,-1,t]}call(e,t){return Xa(()=>{let t=Pv(e);this.imgHeight=t.shape[t.shape.length-3];let n=t.shape[t.shape.length-2];this.widthFactor=$c([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let r=this.widthFactor.dataSync()[0]*n;r=Math.round(r);let i=[this.imgHeight,r];switch(this.interpolation){case"bilinear":return uh.resizeBilinear(e,i);case"nearest":return uh.resizeNearestNeighbor(e,i);default:throw new Error(`Interpolation is ${this.interpolation}\n          but only ${[...nC]} are supported`)}})}};function iC(e){return new $v(e)}function oC(e){return new vw(e)}function aC(e){return new mw(e)}function sC(e){return new gw(e)}function lC(e){return new yw(e)}function uC(e){return new xw(e)}function cC(e){return new bw(e)}function pC(e){return new Vw(e)}function dC(e){return new Pw(e)}function hC(e){return new Nw(e)}function fC(e){return new Ow(e)}function mC(e){return new Rw(e)}function gC(e){return new Dw(e)}function yC(e){return new Mw(e)}function vC(e){return new Fw(e)}function bC(e){return new Lw(e)}function xC(e){return new i_(e)}function wC(e){return new n_(e)}function _C(e){return new e_(e)}function CC(e){return new t_(e)}function SC(e){return new r_(e)}function kC(e){return new o_(e)}function EC(e){return new a_(e)}function TC(e){return new s_(e)}function IC(e){return new u_(e)}function PC(e){return new p_(e)}function OC(e){return new h_(e)}function NC(e){return new g_(e)}function RC(e){return new f_(e)}function AC(e){return new m_(e)}function DC(e){return new d_(e)}function VC(e){return new v_(e)}function MC(e){return new S_(e)}function FC(e){return new k_(e)}function LC(e){return new E_(e)}function zC(e){return new N_(e)}function jC(e){return zC(e)}function qC(e){return zC(e)}function $C(e){return new D_(e)}function BC(e){return $C(e)}function UC(e){return $C(e)}function WC(e){return new F_(e)}function HC(e){return WC(e)}function QC(e){return WC(e)}function GC(e){return new z_(e)}function KC(e){return new $_(e)}function JC(e){return new j_(e)}function XC(e){return new B_(e)}function YC(e){return new O_(e)}function ZC(e){return new A_(e)}function eS(e){return new M_(e)}function tS(e){return new Hw(e)}function nS(e){return new Ww(e)}function rS(e){return new Gw(e)}function iS(e){return new Qw(e)}function oS(e){return new Uw(e)}function aS(e){return new Bw(e)}function sS(e){return new Zw(e)}function lS(e){return new Yw(e)}function uS(e){return new qw(e)}function cS(e){return new Kw(e)}function pS(e){return new H_(e)}function dS(e){return new W_(e)}rC.className="RandomWidth",fh.registerClass(rC);var hS=JC,fS=XC,mS=YC,gS=ZC;function yS(e){return new b_(e)}function vS(e){return new x_(e)}function bS(e){return new w_(e)}function xS(e){return new l_(e)}function wS(e){return new Q_(e)}function _S(e){return new J_(e)}function CS(e){return new Z_(e)}function SS(e){return new X_(e)}function kS(e){return new rC(e)}var ES={};function TS(e,t){return Xb(e,t)}function IS(e,t){return nx(e,t)}function PS(e,t){return rx(e,t)}function OS(e,t){return Yb(e,t)}function NS(e,t){return ix(e,t)}function RS(e,t){return ex(e,t)}function AS(e,t){return tx(e,t)}function DS(e,t){return Gb(e,t)}function VS(e,t){return Bb(e,t)}function MS(e,t){return Ub(e,t)}function FS(e,t){return Ub(e,t)}function LS(e,t){return Ub(e,t)}function zS(e,t){return $b(e,t)}function jS(e,t){return $b(e,t)}function qS(e,t){return $b(e,t)}b(ES,{MAPE:()=>FS,MSE:()=>jS,binaryAccuracy:()=>TS,binaryCrossentropy:()=>IS,categoricalAccuracy:()=>OS,categoricalCrossentropy:()=>NS,cosineProximity:()=>DS,mape:()=>LS,meanAbsoluteError:()=>VS,meanAbsolutePercentageError:()=>MS,meanSquaredError:()=>zS,mse:()=>qS,precision:()=>RS,recall:()=>AS,sparseCategoricalAccuracy:()=>PS});var $S={};b($S,{modelFromJSON:()=>Fx});var BS={};function US(e){return new cw(e)}function WS(e){return function(e){return lw(e),new cw({l1:null!=e?e.l1:null,l2:0})}(e)}function HS(e){return function(e){return lw(e),new cw({l2:null!=e?e.l2:null,l1:0})}(e)}b(BS,{l1:()=>WS,l1l2:()=>US,l2:()=>HS});var QS=class extends Rb{constructor(){super(...arguments),this.model=null}setModel(e){if(!(e instanceof Vx))throw new Error("model must be a LayersModel, not some other Container");this.model=e}};function GS(e,t){return e<t}function KS(e,t){return e>t}var JS=class extends QS{constructor(e){if(super(),null==e&&(e={}),e.restoreBestWeights)throw new Xg("restoreBestWeights = True is not implemented in EarlyStopping yet.");this.monitor=e.monitor||"val_loss",this.minDelta=Math.abs(e.minDelta||0),this.patience=e.patience||0,this.verbose=e.verbose||0,this.mode=e.mode||"auto",this.baseline=e.baseline,-1===["auto","min","max"].indexOf(this.mode)&&(console.warn(`EarlyStopping mode '${this.mode}' is invalid. Falling back to mode 'auto'.`),this.mode="auto"),"min"===this.mode?this.monitorFunc=GS:"max"===this.mode||-1!==this.monitor.indexOf("acc")?this.monitorFunc=KS:this.monitorFunc=GS,this.monitorFunc===GS&&(this.minDelta*=-1)}async onTrainBegin(e){this.wait=0,this.stoppedEpoch=0,null!=this.baseline?this.best=this.baseline:this.best=this.monitorFunc===GS?1/0:-1/0}async onEpochEnd(e,t){await Ob(t);let n=this.getMonitorValue(t);null!=n&&(this.monitorFunc(n-this.minDelta,this.best)?(this.best=n,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=e,this.model.stopTraining=!0)))}async onTrainEnd(e){this.stoppedEpoch>0&&this.verbose&&console.log(`Epoch ${this.stoppedEpoch}: early stopping.`)}getMonitorValue(e){null==e&&(e={});let t=e[this.monitor];return null==t&&console.warn(`Metric for EarlyStopping ${this.monitor} is not available. Available metrics are: ${Object.keys(e)}`),t}};var XS,YS,ZS={earlyStopping:function(e){return new JS(e)}};qe().registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,e=>{e&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")}),function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_QINT16=15]="DT_QINT16",e[e.DT_QUINT16=16]="DT_QUINT16",e[e.DT_UINT16=17]="DT_UINT16",e[e.DT_COMPLEX128=18]="DT_COMPLEX128",e[e.DT_HALF=19]="DT_HALF",e[e.DT_RESOURCE=20]="DT_RESOURCE",e[e.DT_VARIANT=21]="DT_VARIANT",e[e.DT_UINT32=22]="DT_UINT32",e[e.DT_UINT64=23]="DT_UINT64",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",e[e.DT_QINT16_REF=115]="DT_QINT16_REF",e[e.DT_QUINT16_REF=116]="DT_QUINT16_REF",e[e.DT_UINT16_REF=117]="DT_UINT16_REF",e[e.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",e[e.DT_HALF_REF=119]="DT_HALF_REF",e[e.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",e[e.DT_VARIANT_REF=121]="DT_VARIANT_REF",e[e.DT_UINT32_REF=122]="DT_UINT32_REF",e[e.DT_UINT64_REF=123]="DT_UINT64_REF"}(XS||(XS={})),function(e){let t;var n;(n=t=e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))[n.LEGACY=0]="LEGACY",n[n.V1=1]="V1",n[n.V2=2]="V2"}(YS||(YS={}));var ek={};function tk(e,t){let n={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t};ek[e]=n}function nk(e){return ek[e]}function rk(e){delete ek[e]}function ik(e,t,n,r,i){let o=t.inputParams[e];if(o&&void 0!==o.inputIndexStart){let e=o.inputIndexStart,a=0===o.inputIndexEnd?void 0:void 0===o.inputIndexEnd?e+1:o.inputIndexEnd,s=e<0?t.inputNames.length+e:e;if("tensor"===o.type)return ok(t.inputNames[s],n,r,i);if("tensors"===o.type){let o=t.inputs.slice(e,a);return t.inputNames.slice(e,a).filter((e,t)=>{var n;return"NoOp"!==(null===(n=o[t])||void 0===n?void 0:n.op)}).map(e=>ok(e,n,r,i))}let l=ok(t.inputNames[s],n,r,i),u=l.dataSync();return"number"===o.type?u[0]:Si.toNestedArray(l.shape,u)}let a=t.attrParams[e];return a&&a.value}function ok(e,t,n,r){let[i,o]=uk(e,n);if(null!=r){let e=r.getHashTableHandleByName(i);if(null!=e)return e}let a=n.currentContextIds.find(e=>!!t[lk(i,e)]);return void 0!==a?t[lk(i,a)][o]:void 0}function ak(e,t,n){return t[lk(e,n.currentContextId)]}function sk(e,t){let[n,r,i]=uk(e,t);return[lk(n,t&&t.currentContextId),r,i]}function lk(e,t){return t?`${e}-${t}`:e}function uk(e,t){if(""===e)return["",0,void 0];let n=null!=t&&null!=t.parseNodeNameCache;if(n){let n=t.parseNodeNameCache.get(e);if(null!=n)return n}let r,i=e.split(":");if(1===i.length)r=[e,0,void 0];else{let e=i[0],t=3===i.length?i[1]:void 0;r=[e,Number(i[i.length-1]),t]}return n&&t.parseNodeNameCache.set(e,r),r}function ck(e,t,n){let r=ik("pad",e,t,n);if("explicit"===r){r=ik("explicitPaddings",e,t,n);let i=[[0,0],[0,0],[0,0],[0,0]];for(let e=0;e<4;e++)i[e][0]=r[2*e],i[e][1]=r[2*e+1];return i}return r}function pk(e){return e.kept?e:qa(e)}var dk={};b(dk,{json:()=>hk});var hk=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],fk={};b(fk,{json:()=>mk});var mk=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],gk={};b(gk,{json:()=>yk});var yk=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],vk={};b(vk,{json:()=>bk});var bk=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],xk={};b(xk,{json:()=>wk});var wk=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],_k={};b(_k,{json:()=>Ck});var Ck=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Sk={};b(Sk,{json:()=>kk});var kk=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],Ek={};b(Ek,{json:()=>Tk});var Tk=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],Ik={};b(Ik,{json:()=>Pk});var Pk=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],Ok={};b(Ok,{json:()=>Nk});var Nk=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],Rk={};b(Rk,{json:()=>Ak});var Ak=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],Dk={};b(Dk,{json:()=>Vk});var Vk=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],Mk={};b(Mk,{json:()=>Fk});var Fk=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],Lk={};b(Lk,{json:()=>zk});var zk=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],jk={};b(jk,{json:()=>qk});var qk=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],$k={};b($k,{json:()=>Bk});var Bk=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],Uk={};b(Uk,{json:()=>Wk});var Wk=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],Hk={};b(Hk,{json:()=>Qk});var Qk=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],Gk={};b(Gk,{json:()=>Kk});var Kk=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],Jk=class{static get Instance(){return this._instance||(this._instance=new this)}constructor(){let e=[].concat(...[dk,fk,gk,vk,xk,_k,Sk,Ek,Ik,Ok,Rk,Dk,Mk,Lk,jk,$k,Uk,Hk,Gk].map(e=>e.json));this.opMappers=e.reduce((e,t)=>(e[t.tfOpName]=t,e),{})}transformGraph(e,t={}){let n=e.node,r=[],i=[],o=[],a=n.reduce((e,t)=>(e[t.name]=this.mapNode(t),t.op.startsWith("Placeholder")?r.push(e[t.name]):"Const"===t.op?i.push(e[t.name]):(null==t.input||0===t.input.length)&&o.push(e[t.name]),e),{}),s=[],l=[],u={},c={};null!=t&&(u=this.mapSignatureEntries(t.inputs),c=this.mapSignatureEntries(t.outputs));let p=Object.keys(a);p.forEach(e=>{let t=a[e];t.inputNames.forEach((e,n)=>{let[r,,i]=sk(e),o=a[r];if(null!=o.outputs){let e=o.outputs.indexOf(i);if(-1!==e){let i=`${r}:${e}`;t.inputNames[n]=i}}t.inputs.push(o),o.children.push(t)})}),0===Object.keys(c).length?p.forEach(e=>{let t=a[e];0===t.children.length&&l.push(t)}):Object.keys(c).forEach(e=>{let[t]=sk(e),n=a[t];null!=n&&(n.signatureKey=c[e],l.push(n))}),Object.keys(u).length>0?Object.keys(u).forEach(e=>{let[t]=sk(e),n=a[t];n&&(n.signatureKey=u[e],s.push(n))}):s=r;let d={};null!=e.library&&null!=e.library.function&&(d=e.library.function.reduce((e,t)=>(e[t.signature.name]=this.mapFunction(t),e),{}));let h={nodes:a,inputs:s,outputs:l,weights:i,placeholders:r,signature:t,functions:d};return o.length>0&&(h.initNodes=o),h}mapSignatureEntries(e){return Object.keys(e||{}).reduce((t,n)=>(t[e[n].name]=n,t),{})}mapNode(e){let t=nk(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});let n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map(e=>e.startsWith("^")?e.slice(1):e),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:t.outputs};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((e,t)=>(e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((t,n)=>{let r,i=n.type;switch(n.type){case"string":r=Yk(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=Yk(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":r=lE(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=lE(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":r=eE(e.attr,n.tfName,n.defaultValue||0),void 0===r&&n.tfDeprecatedName&&(r=eE(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":r=sE(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=sE(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":r=Zk(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=Zk(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":r=cE(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=cE(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":r=aE(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=aE(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":r=uE(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=uE(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":r=rE(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=rE(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":r=iE(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=iE(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":r=nE(e.attr,n.tfName,n.defaultValue),void 0===r&&n.tfDeprecatedName&&(r=nE(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${n.type} for op: ${e.op}`)}return t[n.name]={value:r,type:i},t},{})),n}mapFunction(e){let t=e.nodeDef,n=[],r={};null!=t&&(r=t.reduce((e,t)=>(e[t.name]=this.mapNode(t),"Const"===t.op&&n.push(e[t.name]),e),{}));let i=[],o=[];e.signature.inputArg.forEach(e=>{let[t]=sk(e.name),n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:tE(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,i.push(n),r[t]=n}),Object.keys(r).forEach(e=>{let t=r[e];t.inputNames.forEach((e,n)=>{let[i,,o]=sk(e),a=r[i];if(null!=a.outputs){let e=a.outputs.indexOf(o);if(-1!==e){let r=`${i}:${e}`;t.inputNames[n]=r}}t.inputs.push(a),a.children.push(t)})});let a=e.ret;e.signature.outputArg.forEach(e=>{let[t,n]=sk(a[e.name]),i=r[t];null!=i&&(i.defaultOutput=n,o.push(i))});let s=this.mapArgsToSignature(e);return{nodes:r,inputs:i,outputs:o,weights:n,placeholders:[],signature:s}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((e,t)=>(e[t.name]=this.mapArgToTensorInfo(t),e),{}),outputs:e.signature.outputArg.reduce((t,n)=>(t[n.name]=this.mapArgToTensorInfo(n,e.ret),t),{})}}mapArgToTensorInfo(e,t){let n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}}};function Xk(e,t){let n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){let t=qe().global;if(void 0!==t.atob)return t.atob(e);if(void 0!==a)return new a(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function Yk(e,t,n,r=!1){let i=e[t];return null!=i?Xk(i.s,r):n}function Zk(e,t,n){let r=e[t];return r?r.b:n}function eE(e,t,n){let r=e[t]||{},i=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof i?i:parseInt(i,10)}function tE(e){switch("string"==typeof e&&(e=XS[e]),e){case XS.DT_FLOAT:case XS.DT_HALF:return"float32";case XS.DT_INT32:case XS.DT_INT64:case XS.DT_INT8:case XS.DT_UINT8:return"int32";case XS.DT_BOOL:return"bool";case XS.DT_DOUBLE:return"float32";case XS.DT_STRING:return"string";default:return null}}function nE(e,t,n){let r=e[t];return r&&r.func?r.func.name:n}function rE(e,t,n){let r=e[t];return r&&r.type?tE(r.type):n}function iE(e,t,n){let r=e[t];return r&&r.list&&r.list.type?r.list.type.map(e=>tE(e)):n}function oE(e){if(!e.unknownRank)return null!=e.dim?e.dim.map(e=>"number"==typeof e.size?e.size:parseInt(e.size,10)):[]}function aE(e,t,n){let r=e[t];return r&&r.shape?oE(r.shape):n}function sE(e,t,n){let r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(e=>"number"==typeof e?e:parseInt(e,10)):n}function lE(e,t,n,r=!1){let i=e[t];return i&&i.list&&i.list.s?i.list.s.map(e=>Xk(e,r)):n}function uE(e,t,n){let r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map(e=>oE(e)):n}function cE(e,t,n){let r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var pE={};b(pE,{OP_SCOPE_SUFFIX:()=>zo,abs:()=>fs,acos:()=>ms,acosh:()=>gs,add:()=>cs,addN:()=>ys,all:()=>vs,any:()=>bs,argMax:()=>xs,argMin:()=>ws,asin:()=>_s,asinh:()=>Cs,atan:()=>Ss,atan2:()=>ks,atanh:()=>Es,avgPool:()=>Bs,avgPool3d:()=>Us,basicLSTMCell:()=>Js,batchNorm:()=>Zs,batchNorm2d:()=>el,batchNorm3d:()=>tl,batchNorm4d:()=>nl,batchToSpaceND:()=>Xs,bincount:()=>rl,bitwiseAnd:()=>il,booleanMaskAsync:()=>Up,broadcastArgs:()=>ol,broadcastTo:()=>al,buffer:()=>za,cast:()=>ja,ceil:()=>sl,clipByValue:()=>ul,clone:()=>qa,complex:()=>qo,concat:()=>Ws,concat1d:()=>cl,concat2d:()=>pl,concat3d:()=>dl,concat4d:()=>hl,conv1d:()=>ml,conv2d:()=>fl,conv2dTranspose:()=>yl,conv3d:()=>vl,conv3dTranspose:()=>xl,cos:()=>wl,cosh:()=>_l,cosineWindow:()=>Yp,cumprod:()=>Cl,cumsum:()=>Sl,denseBincount:()=>kl,depthToSpace:()=>El,depthwiseConv2d:()=>Tl,diag:()=>Il,dilation2d:()=>Pl,div:()=>ds,divNoNan:()=>Fl,dot:()=>Ll,dropout:()=>Jp,einsum:()=>zl,elu:()=>jl,enclosingPowerOfTwo:()=>Xp,ensureShape:()=>ql,equal:()=>Dl,erf:()=>$l,euclideanNorm:()=>ou,exp:()=>au,expandDims:()=>su,expm1:()=>lu,eye:()=>cu,fft:()=>hp,fill:()=>ll,floor:()=>pu,floorDiv:()=>ps,fused:()=>ed,gather:()=>du,gatherND:()=>Kp,greater:()=>hu,greaterEqual:()=>fu,ifft:()=>fp,imag:()=>mu,image:()=>uh,inTopKAsync:()=>Zp,irfft:()=>mp,isFinite:()=>gu,isInf:()=>yu,isNaN:()=>vu,leakyRelu:()=>bu,less:()=>xu,lessEqual:()=>wu,linalg:()=>ch,linspace:()=>_u,localResponseNormalization:()=>Cu,log:()=>Su,log1p:()=>ku,logSigmoid:()=>Vu,logSoftmax:()=>Fu,logSumExp:()=>Lu,logicalAnd:()=>zu,logicalNot:()=>ju,logicalOr:()=>qu,logicalXor:()=>$u,losses:()=>ph,lowerBound:()=>Wu,matMul:()=>Hs,max:()=>Xl,maxPool:()=>Hu,maxPool3d:()=>Qu,maxPoolWithArgmax:()=>Gu,maximum:()=>Ku,mean:()=>Ju,meshgrid:()=>Zu,min:()=>Yl,minimum:()=>ec,mirrorPad:()=>tc,mod:()=>nc,moments:()=>rc,movingAverage:()=>Hp,mul:()=>hs,multiRNNCell:()=>ic,multinomial:()=>oc,neg:()=>Au,norm:()=>iu,notEqual:()=>ac,oneHot:()=>sc,ones:()=>Yu,onesLike:()=>lc,op:()=>jo,outerProduct:()=>uc,pad:()=>cc,pad1d:()=>pc,pad2d:()=>dc,pad3d:()=>hc,pad4d:()=>fc,pool:()=>gc,pow:()=>Zl,prelu:()=>yc,print:()=>$a,prod:()=>vc,raggedGather:()=>bc,raggedRange:()=>xc,raggedTensorToTensor:()=>wc,rand:()=>_c,randomGamma:()=>zc,randomNormal:()=>jc,randomStandardNormal:()=>qc,randomUniform:()=>$c,randomUniformInt:()=>Bc,range:()=>Uc,real:()=>Wc,reciprocal:()=>Hc,relu:()=>Qc,relu6:()=>Gc,reshape:()=>$s,reverse:()=>Kc,reverse1d:()=>Jc,reverse2d:()=>Xc,reverse3d:()=>Yc,reverse4d:()=>Zc,rfft:()=>yp,round:()=>ep,rsqrt:()=>tp,scalar:()=>eu,scatterND:()=>Qp,searchSorted:()=>Uu,selu:()=>np,separableConv2d:()=>rp,setdiff1dAsync:()=>ip,sigmoid:()=>Qs,sign:()=>op,signal:()=>lh,sin:()=>ap,sinh:()=>sp,slice:()=>Gs,slice1d:()=>lp,slice2d:()=>up,slice3d:()=>cp,slice4d:()=>pp,softmax:()=>dp,softplus:()=>Du,spaceToBatchND:()=>mc,sparse:()=>dh,sparseToDense:()=>Gp,spectral:()=>sh,split:()=>gp,sqrt:()=>tu,square:()=>nu,squaredDifference:()=>vp,squeeze:()=>bp,stack:()=>xp,step:()=>wp,stridedSlice:()=>_p,string:()=>hh,sub:()=>Mu,sum:()=>ru,tan:()=>Cp,tanh:()=>Ks,tensor:()=>Bo,tensor1d:()=>Sp,tensor2d:()=>kp,tensor3d:()=>Ep,tensor4d:()=>Tp,tensor5d:()=>Ip,tensor6d:()=>Pp,tensorScatterUpdate:()=>Dp,tile:()=>uu,topk:()=>Vp,transpose:()=>Wp,truncatedNormal:()=>Mp,unique:()=>Fp,unsortedSegmentSum:()=>Lp,unstack:()=>zp,upperBound:()=>jp,variable:()=>qp,where:()=>Vl,whereAsync:()=>Bp,zeros:()=>Xu,zerosLike:()=>Ml});function dE(e,t,n=""){if("number"!=typeof e&&"number"!=typeof t){Si.assert(e.length===t.length,()=>n+` Shapes ${e} and ${t} must match`);for(let r=0;r<e.length;r++){let i=e[r],o=t[r];Si.assert(i<0||o<0||i===o,()=>n+` Shapes ${e} and ${t} must match`)}}}function hE(e){return!("number"==typeof e||e.some(e=>e<0))}function fE(e,t,n){let r=mE(e,n),i=!hE(r);if(i&&0===t.length)throw new Error("Tried to calculate elements of an empty list with non-fully-defined elementShape: "+r);if(i&&t.forEach(e=>{r=mE(e.shape,r)}),!hE(r))throw new Error("Non-fully-defined elementShape: "+r);return r}function mE(e,t){if("number"==typeof e)return t;if("number"==typeof t)return e;if(e.length!==t.length)throw new Error(`Incompatible ranks during merge: ${e} vs. ${t}`);let n=[];for(let r=0;r<e.length;++r){let i=e[r],o=t[r];if(i>=0&&o>=0&&i!==o)throw new Error(`Incompatible shape during merge: ${e} vs. ${t}`);n[r]=i>=0?i:o}return n}var gE=class{get id(){return this.idTensor.id}constructor(e,t,n,r=-1){this.tensors=e,this.elementShape=t,this.elementDtype=n,null!=e&&e.forEach(e=>{if(n!==e.dtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${e.dtype}`);dE(t,e.shape,"TensorList shape mismatch: "),Za(e)}),this.idTensor=eu(0),this.maxNumElements=r,Za(this.idTensor)}copy(){return new gE([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(t=>{(null==e||!e.has(t.id))&&t.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,t,n=-1){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(-1!==n&&this.tensors.length!==n)throw new Error(`Operation expected a list with ${n} elements but got a list with ${this.tensors.length} elements.`);dE(e,this.elementShape,"TensorList shape mismatch: ");let r=fE(this.elementShape,this.tensors,e);return Xa(()=>{let e=this.tensors.map(e=>$s(e,r));return xp(e,0)})}popBack(e,t){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);if(0===this.size())throw new Error("Trying to pop from an empty list.");let n=fE(this.elementShape,this.tensors,e),r=this.tensors.pop();return r.kept=!1,dE(r.shape,e,"TensorList shape mismatch: "),$s(r,n)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(dE(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");Za(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error("TensorListResize expects size to be non-negative. Got: "+e);if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);let t=new gE([],this.elementShape,this.elementDtype,this.maxNumElements);t.tensors.length=e;for(let n=0;n<Math.min(this.tensors.length,e);++n)t.tensors[n]=this.tensors[n];return t}getItem(e,t,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(null==this.tensors[e])throw new Error(`element at index ${e} is null.`);dE(this.tensors[e].shape,t,"TensorList shape mismatch: ");let r=fE(this.elementShape,this.tensors,t);return $s(this.tensors[e],r)}setItem(e,t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);dE(this.elementShape,t.shape,"TensorList shape mismatch: "),Za(t),null!=this.tensors[e]&&(this.tensors[e].kept=!1),this.tensors[e]=t}gather(e,t,n){if(t!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t}, but list elements ${this.elementDtype}`);dE(this.elementShape,n,"TensorList shape mismatch: "),e=e.slice(0,this.size());let r=fE(this.elementShape,this.tensors,n);return 0===e.length?Bo([],[0].concat(r)):Xa(()=>{let t=e.map(e=>$s(this.tensors[e],r));return xp(t,0)})}concat(e,t){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);dE(this.elementShape,t,"TensorList shape mismatch: ");let n=fE(this.elementShape,this.tensors,t);return 0===this.size()?Bo([],[0].concat(n)):Xa(()=>{let e=this.tensors.map(e=>$s(e,n));return Ws(e,0)})}};var yE=async(e,t,n)=>{switch(e.op){case"If":case"StatelessIf":{let r=ik("thenBranch",e,t,n),i=ik("elseBranch",e,t,n),o=ik("cond",e,t,n),a=ik("args",e,t,n);return(await o.data())[0]?n.functionMap[r].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap):n.functionMap[i].executeFunctionAsync(a,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{let r=ik("body",e,t,n),i=ik("cond",e,t,n),o=ik("args",e,t,n),a=await n.functionMap[i].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap),s=o.map(e=>e.id),l=await a[0].data();a.forEach(e=>{!e.kept&&-1===s.indexOf(e.id)&&e.dispose()});let u=o;for(;l[0];){let e=u;u=await n.functionMap[r].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);let t=u.map(e=>e.id);e.forEach(e=>{!e.kept&&-1===s.indexOf(e.id)&&-1===t.indexOf(e.id)&&e.dispose()});let o=await n.functionMap[i].executeFunctionAsync(u,n.tensorArrayMap,n.tensorListMap);l=await o[0].data(),o.forEach(e=>{!e.kept&&-1===s.indexOf(e.id)&&-1===t.indexOf(e.id)&&e.dispose()})}return u}case"LoopCond":return[pk(ik("pred",e,t,n))];case"Switch":{let r=ik("pred",e,t,n),i=ik("data",e,t,n);return i.kept||(i=pk(i)),(await r.data())[0]?[void 0,i]:[i,void 0]}case"Merge":{let r=e.inputNames.find(e=>void 0!==ok(e,t,n));if(r){return[pk(ok(r,t,n))]}return}case"Enter":{let r=ik("frameName",e,t,n),i=ik("tensor",e,t,n);return n.enterFrame(r),[pk(i)]}case"Exit":{let r=ik("tensor",e,t,n);return n.exitFrame(),[pk(r)]}case"NextIteration":{let r=ik("tensor",e,t,n);return n.nextIteration(),[pk(r)]}case"TensorArrayV3":{let r=ik("size",e,t,n),i=ik("dtype",e,t,n),o=ik("elementShape",e,t,n),a=ik("dynamicSize",e,t,n),s=ik("clearAfterRead",e,t,n),l=ik("identicalElementShapes",e,t,n),u=ik("name",e,t,n),c=new class{constructor(e,t,n,r,i,o,a){this.name=e,this.dtype=t,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=eu(0),Za(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(t=>{(null==e||!e.has(t.tensor.id))&&t.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);let t=this.tensors[e];if(t.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor}readMany(e){return e.map(e=>this.read(e))}write(e,t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);let n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},\n          because the value dtype is ${t.dtype}, but TensorArray dtype is ${this.dtype}.`);if(0===this.size()&&(null==this.elementShape||0===this.elementShape.length)&&(this.elementShape=t.shape),dE(this.elementShape,t.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),n.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(n.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);n.tensor=t,Za(t),n.written=!0,this.tensors[e]=n}writeMany(e,t){if(e.length!==t.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${t.length}.`);e.forEach((e,n)=>this.write(e,t[n]))}gather(e,t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${t}`);if(e)e=e.slice(0,this.size());else{e=[];for(let t=0;t<this.size();t++)e.push(t)}if(0===e.length)return Bo([],[0].concat(this.elementShape));let n=this.readMany(e);return dE(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),xp(n,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(0===this.size())return Bo([],[0].concat(this.elementShape));let t=[];for(let e=0;e<this.size();e++)t.push(e);let n=this.readMany(t);return dE(this.elementShape,n[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${n[0].shape})`),Ws(n,0)}scatter(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);let n=Math.max(...e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error(`Max index must be < array size (${n}  vs. ${this.maxSize})`);this.writeMany(e,zp(t,0))}split(e,t){if(t.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${t.dtype}`);let n=0,r=e.map(e=>(n+=e,n));if(n!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${n}, and tensor's shape is: ${t.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);let i=0===n?0:t.size/n,o=[];Xa(()=>{t=$s(t,[1,n,i]);for(let n=0;n<e.length;++n){let a=[0,0===n?0:r[n-1],0],s=[1,e[n],i];o[n]=$s(Gs(t,a,s),this.elementShape)}return o});let a=[];for(let t=0;t<e.length;t++)a[t]=t;this.writeMany(a,o)}}(u,i,r,o,l,a,s);return n.addTensorArray(c),[c.idTensor,eu(1)]}case"TensorArrayWriteV3":{let r=ik("tensorArrayId",e,t,n),i=ik("index",e,t,n),o=ik("tensor",e,t,n),a=n.getTensorArray(r.id);return a.write(i,o),[a.idTensor]}case"TensorArrayReadV3":{let r=ik("tensorArrayId",e,t,n),i=ik("index",e,t,n);return[n.getTensorArray(r.id).read(i)]}case"TensorArrayGatherV3":{let r=ik("tensorArrayId",e,t,n),i=ik("indices",e,t,n),o=ik("dtype",e,t,n);return[n.getTensorArray(r.id).gather(i,o)]}case"TensorArrayScatterV3":{let r=ik("tensorArrayId",e,t,n),i=ik("indices",e,t,n),o=ik("tensor",e,t,n),a=n.getTensorArray(r.id);return a.scatter(i,o),[a.idTensor]}case"TensorArrayConcatV3":{let r=ik("tensorArrayId",e,t,n),i=n.getTensorArray(r.id),o=ik("dtype",e,t,n);return[i.concat(o)]}case"TensorArraySplitV3":{let r=ik("tensorArrayId",e,t,n),i=ik("tensor",e,t,n),o=ik("lengths",e,t,n),a=n.getTensorArray(r.id);return a.split(o,i),[a.idTensor]}case"TensorArraySizeV3":{let r=ik("tensorArrayId",e,t,n);return[eu(n.getTensorArray(r.id).size(),"int32")]}case"TensorArrayCloseV3":{let r=ik("tensorArrayId",e,t,n),i=n.getTensorArray(r.id);return i.clearAndClose(),[i.idTensor]}case"TensorListSetItem":{let r=ik("tensorListId",e,t,n),i=ik("index",e,t,n),o=ik("tensor",e,t,n),a=n.getTensorList(r.id);return a.setItem(i,o),[a.idTensor]}case"TensorListGetItem":{let r=ik("tensorListId",e,t,n),i=ik("index",e,t,n),o=ik("elementShape",e,t,n),a=ik("elementDType",e,t,n);return[n.getTensorList(r.id).getItem(i,o,a)]}case"TensorListScatterV2":case"TensorListScatter":{let r=ik("indices",e,t,n),i=function(e,t,n,r){if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);let i=Math.max(...t);if(null!=r&&-1!==r&&i>=r)throw new Error(`Max index must be < array size (${i}  vs. ${r})`);let o=new gE([],n,e.dtype,r),a=zp(e,0);return t.forEach((e,t)=>{o.setItem(e,a[t])}),o}(ik("tensor",e,t,n),r,ik("elementShape",e,t,n),ik("numElements",e,t,n));return n.addTensorList(i),[i.idTensor]}case"TensorListReserve":case"EmptyTensorList":{let r,i=ik("elementShape",e,t,n),o=ik("elementDType",e,t,n);r="TensorListReserve"===e.op?"numElements":"maxNumElements";let a=ik(r,e,t,n),s=function(e,t,n,r){return new gE([],e,t,r)}(i,o,0,"TensorListReserve"===e.op?-1:a);return n.addTensorList(s),[s.idTensor]}case"TensorListGather":{let r=ik("tensorListId",e,t,n),i=ik("indices",e,t,n),o=ik("elementShape",e,t,n),a=ik("elementDType",e,t,n);return[n.getTensorList(r.id).gather(i,a,o)]}case"TensorListStack":{let r=ik("tensorListId",e,t,n),i=ik("elementShape",e,t,n),o=ik("elementDType",e,t,n),a=ik("numElements",e,t,n);return[n.getTensorList(r.id).stack(i,o,a)]}case"TensorListFromTensor":{let r=function(e,t,n){let r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: "+e.shape);if(e.dtype!==n)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${n}`);dE(e.shape.slice(1),t,"TensorList shape mismatch: ");let i=zp(e);return new gE(i,t,r)}(ik("tensor",e,t,n),ik("elementShape",e,t,n),ik("elementDType",e,t,n));return n.addTensorList(r),[r.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{let r=ik("tensorListId",e,t,n),i=n.getTensorList(r.id),o=ik("dtype",e,t,n),a=ik("elementShape",e,t,n);return[i.concat(o,a)]}case"TensorListPushBack":{let r=ik("tensorListId",e,t,n),i=ik("tensor",e,t,n),o=n.getTensorList(r.id);return o.pushBack(i),[o.idTensor]}case"TensorListPopBack":{let r=ik("tensorListId",e,t,n),i=ik("elementShape",e,t,n),o=ik("elementDType",e,t,n);return[n.getTensorList(r.id).popBack(i,o)]}case"TensorListSplit":{let r=ik("tensor",e,t,n),i=ik("elementShape",e,t,n),o=function(e,t,n){let r=0,i=t.map(e=>(r+=e,r));if(r!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        ${r}, and tensor's shape is: ${e.shape}`);let o=mE(e.shape.slice(1),n),a=0===r?0:e.size/r,s=Xa(()=>{let n=[];e=$s(e,[1,r,a]);for(let r=0;r<t.length;++r){let s=[0,0===r?0:i[r-1],0],l=[1,t[r],a];n[r]=$s(Gs(e,s,l),o)}return e.dispose(),n}),l=new gE([],n,e.dtype,t.length);for(let e=0;e<s.length;e++)l.setItem(e,s[e]);return l}(r,ik("lengths",e,t,n),i);return n.addTensorList(o),[o.idTensor]}case"TensorListLength":{let r=ik("tensorListId",e,t,n);return[eu(n.getTensorList(r.id).size(),"int32")]}case"TensorListResize":{let r=ik("tensorListId",e,t,n),i=ik("size",e,t,n),o=n.getTensorList(r.id).resize(i);return n.addTensorList(o),[o.idTensor]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};function vE(e,t,n){let[r,i]=ik("fusedOps",e,t,n),o="biasadd"===r,a=!o,s="prelu"===i,l="fusedbatchnorm"===r,u=ik("numArgs",e,t,n);if(o){if(s&&2!==u)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&o&&1!==u)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");let c=ik("strides",e,t,n),p=ck(e,t,n),d=ik("dataFormat",e,t,n).toUpperCase(),h=ik("dilations",e,t,n),[f,m]=ik("args",e,t,n);return a&&(m=f,f=void 0),{stride:c,pad:p,dataFormat:d,dilations:h,biasArg:f,preluArg:m,activationFunc:i,leakyreluAlpha:ik("leakyreluAlpha",e,t,n)}}function bE(e,t,n){return{boxes:ik("boxes",e,t,n),scores:ik("scores",e,t,n),maxOutputSize:ik("maxOutputSize",e,t,n),iouThreshold:ik("iouThreshold",e,t,n),scoreThreshold:ik("scoreThreshold",e,t,n),softNmsSigma:ik("softNmsSigma",e,t,n)}}var xE=async(e,t,n,r)=>{switch(e.op){case"HashTable":case"HashTableV2":{let i=r.getHashTableHandleByName(e.name);if(null!=i)return[i];{let i=ik("keyDType",e,t,n),o=ik("valueDType",e,t,n),a=new class{get id(){return this.handle.id}constructor(e,t){this.keyDType=e,this.valueDType=t,this.handle=eu(0),this.tensorMap=new Map,Za(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return eu(this.size(),"int32")}async import(e,t){this.checkKeyAndValueTensor(e,t);let n=await e.data();return this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),Xa(()=>{let e=zp(t),r=n.length,i=e.length;Si.assert(r===i,()=>`The number of elements doesn't match, keys has ${r} elements, the values has ${i} elements.`);for(let t=0;t<r;t++){let r=n[t],i=e[t];Za(i),this.tensorMap.set(r,i)}return this.handle})}async find(e,t){this.checkKeyAndValueTensor(e,t);let n=await e.data();return Xa(()=>{let e=[];for(let r=0;r<n.length;r++){let i=n[r],o=this.findWithDefault(i,t);e.push(o)}return xp(e)})}findWithDefault(e,t){let n=this.tensorMap.get(e);return null!=n?n:t}checkKeyAndValueTensor(e,t){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(t.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${t.dtype}`)}}(i,o);return r.addHashTable(e.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{let i=ik("tableHandle",e,t,n,r),o=ik("keys",e,t,n),a=ik("values",e,t,n);return[await r.getHashTableById(i.id).import(o,a)]}case"LookupTableFind":case"LookupTableFindV2":{let i=ik("tableHandle",e,t,n,r),o=ik("keys",e,t,n),a=ik("defaultValue",e,t,n);return[await r.getHashTableById(i.id).find(o,a)]}case"LookupTableSize":case"LookupTableSizeV2":{let i=ik("tableHandle",e,t,n,r);return[r.getHashTableById(i.id).tensorSize()]}default:throw TypeError(`Node type ${e.op} is not implemented`)}};function wE(e,t,n,r,i=Xa){let o=((e,t,n)=>{switch(e.category){case"arithmetic":return i(()=>((e,t,n,r=pE)=>{switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(ik("a",e,t,n),ik("b",e,t,n))];case"AddN":return[r.addN(ik("tensors",e,t,n))];case"FloorMod":case"Mod":return[r.mod(ik("a",e,t,n),ik("b",e,t,n))];case"Mul":return[r.mul(ik("a",e,t,n),ik("b",e,t,n))];case"RealDiv":case"Div":return[r.div(ik("a",e,t,n),ik("b",e,t,n))];case"DivNoNan":return[r.divNoNan(ik("a",e,t,n),ik("b",e,t,n))];case"FloorDiv":return[r.floorDiv(ik("a",e,t,n),ik("b",e,t,n))];case"Sub":return[r.sub(ik("a",e,t,n),ik("b",e,t,n))];case"Minimum":return[r.minimum(ik("a",e,t,n),ik("b",e,t,n))];case"Maximum":return[r.maximum(ik("a",e,t,n),ik("b",e,t,n))];case"Pow":return[r.pow(ik("a",e,t,n),ik("b",e,t,n))];case"SquaredDifference":return[r.squaredDifference(ik("a",e,t,n),ik("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"basic_math":return i(()=>((e,t,n,r=pE)=>{switch(e.op){case"Abs":case"ComplexAbs":return[r.abs(ik("x",e,t,n))];case"Acos":return[r.acos(ik("x",e,t,n))];case"Acosh":return[r.acosh(ik("x",e,t,n))];case"Asin":return[r.asin(ik("x",e,t,n))];case"Asinh":return[r.asinh(ik("x",e,t,n))];case"Atan":return[r.atan(ik("x",e,t,n))];case"Atan2":return[r.atan2(ik("x",e,t,n),ik("y",e,t,n))];case"Atanh":return[r.atanh(ik("x",e,t,n))];case"Ceil":return[r.ceil(ik("x",e,t,n))];case"Complex":return[r.complex(ik("real",e,t,n),ik("imag",e,t,n))];case"Cos":return[r.cos(ik("x",e,t,n))];case"Cosh":return[r.cosh(ik("x",e,t,n))];case"Elu":return[r.elu(ik("x",e,t,n))];case"Erf":return[r.erf(ik("x",e,t,n))];case"Exp":return[r.exp(ik("x",e,t,n))];case"Expm1":return[r.expm1(ik("x",e,t,n))];case"Floor":return[r.floor(ik("x",e,t,n))];case"Log":return[r.log(ik("x",e,t,n))];case"Log1p":return[r.log1p(ik("x",e,t,n))];case"Imag":return[r.imag(ik("x",e,t,n))];case"Neg":return[r.neg(ik("x",e,t,n))];case"Reciprocal":return[r.reciprocal(ik("x",e,t,n))];case"Real":return[r.real(ik("x",e,t,n))];case"Relu":return[r.relu(ik("x",e,t,n))];case"Round":return[r.round(ik("x",e,t,n))];case"Selu":return[r.selu(ik("x",e,t,n))];case"Sigmoid":return[r.sigmoid(ik("x",e,t,n))];case"Sin":return[r.sin(ik("x",e,t,n))];case"Sign":return[r.sign(ik("x",e,t,n))];case"Sinh":return[r.sinh(ik("x",e,t,n))];case"Softplus":return[r.softplus(ik("x",e,t,n))];case"Sqrt":return[r.sqrt(ik("x",e,t,n))];case"Square":return[r.square(ik("x",e,t,n))];case"Tanh":return[r.tanh(ik("x",e,t,n))];case"Tan":return[r.tan(ik("x",e,t,n))];case"ClipByValue":return[r.clipByValue(ik("x",e,t,n),ik("clipValueMin",e,t,n),ik("clipValueMax",e,t,n))];case"Relu6":return[r.relu6(ik("x",e,t,n))];case"Rsqrt":return[r.rsqrt(ok(e.inputNames[0],t,n))];case"LeakyRelu":return[r.leakyRelu(ik("x",e,t,n),ik("alpha",e,t,n))];case"Prelu":return[r.prelu(ik("x",e,t,n),ik("alpha",e,t,n))];case"IsNan":return[r.isNaN(ok(e.inputNames[0],t,n))];case"IsInf":return[r.isInf(ok(e.inputNames[0],t,n))];case"IsFinite":return[r.isFinite(ok(e.inputNames[0],t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"control":return yE(e,t,n);case"convolution":return i(()=>((e,t,n,r=pE)=>{switch(e.op){case"Conv1D":{let i=ik("stride",e,t,n),o=ik("pad",e,t,n),a=ik("dataFormat",e,t,n).toUpperCase(),s=ik("dilation",e,t,n);return[r.conv1d(ik("x",e,t,n),ik("filter",e,t,n),i,o,a,s)]}case"Conv2D":{let i=ik("strides",e,t,n),o=ck(e,t,n),a=ik("dataFormat",e,t,n).toUpperCase(),s=ik("dilations",e,t,n);return[r.conv2d(ik("x",e,t,n),ik("filter",e,t,n),[i[1],i[2]],o,a,[s[1],s[2]])]}case"_FusedConv2D":{let{stride:i,pad:o,dataFormat:a,dilations:s,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:p}=vE(e,t,n);return[r.fused.conv2d({x:ik("x",e,t,n),filter:ik("filter",e,t,n),strides:[i[1],i[2]],pad:o,dataFormat:a,dilations:[s[1],s[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:p})]}case"FusedDepthwiseConv2dNative":{let{stride:i,pad:o,dataFormat:a,dilations:s,biasArg:l,preluArg:u,activationFunc:c,leakyreluAlpha:p}=vE(e,t,n);return[r.fused.depthwiseConv2d({x:ik("x",e,t,n),filter:ik("filter",e,t,n),strides:[i[1],i[2]],pad:o,dataFormat:a,dilations:[s[1],s[2]],bias:l,activation:c,preluActivationWeights:u,leakyreluAlpha:p})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{let i=ik("outputShape",e,t,n),o=ik("strides",e,t,n),a=ck(e,t,n);return[r.conv2dTranspose(ik("x",e,t,n),ik("filter",e,t,n),i,[o[1],o[2]],a)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{let i=ik("strides",e,t,n),o=ck(e,t,n),a=ik("dilations",e,t,n),s=ik("dataFormat",e,t,n).toUpperCase();return[r.depthwiseConv2d(ik("input",e,t,n),ik("filter",e,t,n),[i[1],i[2]],o,s,[a[1],a[2]])]}case"Conv3D":{let i=ik("strides",e,t,n),o=ik("pad",e,t,n),a=ik("dataFormat",e,t,n).toUpperCase(),s=ik("dilations",e,t,n);return[r.conv3d(ik("x",e,t,n),ik("filter",e,t,n),[i[1],i[2],i[3]],o,a,[s[1],s[2],s[3]])]}case"AvgPool":{let i=ik("strides",e,t,n),o=ik("pad",e,t,n),a=ik("kernelSize",e,t,n);return[r.avgPool(ik("x",e,t,n),[a[1],a[2]],[i[1],i[2]],o)]}case"MaxPool":{let i=ik("strides",e,t,n),o=ik("pad",e,t,n),a=ik("kernelSize",e,t,n);return[r.maxPool(ik("x",e,t,n),[a[1],a[2]],[i[1],i[2]],o)]}case"MaxPoolWithArgmax":{let i=ik("strides",e,t,n),o=ik("pad",e,t,n),a=ik("kernelSize",e,t,n),s=ik("includeBatchInIndex",e,t,n),{result:l,indexes:u}=r.maxPoolWithArgmax(ik("x",e,t,n),[a[1],a[2]],[i[1],i[2]],o,s);return[l,u]}case"AvgPool3D":{let i=ik("strides",e,t,n),o=ik("pad",e,t,n),a=ik("kernelSize",e,t,n);return[r.avgPool3d(ik("x",e,t,n),[a[1],a[2],a[3]],[i[1],i[2],i[3]],o)]}case"MaxPool3D":{let i=ik("strides",e,t,n),o=ik("pad",e,t,n),a=ik("kernelSize",e,t,n);return[r.maxPool3d(ik("x",e,t,n),[a[1],a[2],a[3]],[i[1],i[2],i[3]],o)]}case"Dilation2D":{let i=ik("strides",e,t,n),o=ik("pad",e,t,n),a=ik("dilations",e,t,n),s=i[1],l=i[2],u=a[1],c=a[2];return[r.dilation2d(ik("x",e,t,n),ik("filter",e,t,n),[s,l],o,[u,c],"NHWC")]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"creation":return i(()=>((e,t,n,r=pE)=>{switch(e.op){case"Fill":{let i=ik("shape",e,t,n),o=ik("dtype",e,t,n),a=ik("value",e,t,n);return[r.fill(i,a,o)]}case"LinSpace":{let i=ik("start",e,t,n),o=ik("stop",e,t,n),a=ik("num",e,t,n);return[r.linspace(i,o,a)]}case"Multinomial":{let i=ik("logits",e,t,n),o=ik("numSamples",e,t,n),a=ik("seed",e,t,n);return[r.multinomial(i,o,a)]}case"OneHot":{let i=ik("indices",e,t,n),o=ik("depth",e,t,n),a=ik("onValue",e,t,n),s=ik("offValue",e,t,n),l=ik("dtype",e,t,n);return[r.oneHot(i,o,a,s,l)]}case"Ones":return[r.ones(ik("shape",e,t,n),ik("dtype",e,t,n))];case"OnesLike":return[r.onesLike(ik("x",e,t,n))];case"RandomStandardNormal":return[r.randomStandardNormal(ik("shape",e,t,n),ik("dtype",e,t,n),ik("seed",e,t,n))];case"RandomUniform":return[r.randomUniform(ik("shape",e,t,n),ik("minval",e,t,n),ik("maxval",e,t,n),ik("dtype",e,t,n))];case"RandomUniformInt":return[r.randomUniformInt(ik("shape",e,t,n),ik("minval",e,t,n),ik("maxval",e,t,n),ik("seed",e,t,n))];case"Range":{let i=ik("start",e,t,n),o=ik("stop",e,t,n),a=ik("step",e,t,n);return[r.range(i,o,a,ik("dtype",e,t,n))]}case"TruncatedNormal":{let i=ik("shape",e,t,n),o=ik("mean",e,t,n),a=ik("stdDev",e,t,n),s=ik("seed",e,t,n);return[r.truncatedNormal(i,o,a,ik("dtype",e,t,n),s)]}case"Zeros":return[r.zeros(ik("shape",e,t,n),ik("dtype",e,t,n))];case"ZerosLike":return[r.zerosLike(ik("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"dynamic":return(async(e,t,n,r,i=pE)=>{switch(e.op){case"NonMaxSuppressionV5":{let{boxes:r,scores:o,maxOutputSize:a,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=bE(e,t,n),c=await i.image.nonMaxSuppressionWithScoreAsync(r,o,a,s,l,u);return[c.selectedIndices,c.selectedScores]}case"NonMaxSuppressionV4":{let{boxes:r,scores:o,maxOutputSize:a,iouThreshold:s,scoreThreshold:l}=bE(e,t,n),u=ik("padToMaxOutputSize",e,t,n),c=await i.image.nonMaxSuppressionPaddedAsync(r,o,a,s,l,u);return[c.selectedIndices,c.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{let{boxes:r,scores:o,maxOutputSize:a,iouThreshold:s,scoreThreshold:l}=bE(e,t,n);return[await i.image.nonMaxSuppressionAsync(r,o,a,s,l)]}case"Where":{let r=i.cast(ik("condition",e,t,n),"bool"),o=[await i.whereAsync(r)];return r.dispose(),o}case"ListDiff":return i.setdiff1dAsync(ik("x",e,t,n),ik("y",e,t,n));default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n);case"evaluation":return i(()=>((e,t,n,r=pE)=>{switch(e.op){case"LowerBound":{let i=ik("sortedSequence",e,t,n),o=ik("values",e,t,n);return[r.lowerBound(i,o)]}case"TopKV2":{let i=ik("x",e,t,n),o=ik("k",e,t,n),a=ik("sorted",e,t,n),s=r.topk(i,o,a);return[s.values,s.indices]}case"UpperBound":{let i=ik("sortedSequence",e,t,n),o=ik("values",e,t,n);return[r.upperBound(i,o)]}case"Unique":{let i=ik("x",e,t,n),o=r.unique(i);return[o.values,o.indices]}case"UniqueV2":{let i=ik("x",e,t,n),o=ik("axis",e,t,n),a=r.unique(i,o);return[a.values,a.indices]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"image":return i(()=>((e,t,n,r=pE)=>{switch(e.op){case"ResizeBilinear":{let i=ik("images",e,t,n),o=ik("size",e,t,n),a=ik("alignCorners",e,t,n),s=ik("halfPixelCenters",e,t,n);return[r.image.resizeBilinear(i,[o[0],o[1]],a,s)]}case"ResizeNearestNeighbor":{let i=ik("images",e,t,n),o=ik("size",e,t,n),a=ik("alignCorners",e,t,n),s=ik("halfPixelCenters",e,t,n);return[r.image.resizeNearestNeighbor(i,[o[0],o[1]],a,s)]}case"CropAndResize":{let i=ik("image",e,t,n),o=ik("boxes",e,t,n),a=ik("boxInd",e,t,n),s=ik("cropSize",e,t,n),l=ik("method",e,t,n),u=ik("extrapolationValue",e,t,n);return[r.image.cropAndResize(i,o,a,s,l,u)]}case"ImageProjectiveTransformV3":{let i=ik("images",e,t,n),o=ik("transforms",e,t,n),a=ik("outputShape",e,t,n),s=ik("fillValue",e,t,n),l=ik("interpolation",e,t,n),u=ik("fillMode",e,t,n);return[r.image.transform(i,o,l.toLowerCase(),u.toLowerCase(),s,a)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"graph":return i(()=>((e,t,n,r=pE)=>{switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":let i=ik("default",e,t,n);return[ok(e.name,t,n)||i];case"Placeholder":return[ok(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":return[pk(ik("x",e,t,n))];case"IdentityN":return ik("x",e,t,n).map(e=>pk(e));case"Snapshot":return[pk(ik("x",e,t,n))];case"Shape":return[r.tensor1d(ik("x",e,t,n).shape,"int32")];case"ShapeN":return ik("x",e,t,n).map(e=>r.tensor1d(e.shape));case"Size":return[r.scalar(ik("x",e,t,n).size,"int32")];case"Rank":return[r.scalar(ik("x",e,t,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":let o=ik("x",e,t,n),a=ik("data",e,t,n),s=ik("message",e,t,n),l=ik("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(s);for(let e=0;e<a.length;e++)console.log(Array.prototype.slice.call(a[e].dataSync()).slice(0,l));return[o];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"logical":return i(()=>((e,t,n,r=pE)=>{switch(e.op){case"Equal":return[r.equal(ik("a",e,t,n),ik("b",e,t,n))];case"NotEqual":return[r.notEqual(ik("a",e,t,n),ik("b",e,t,n))];case"Greater":return[r.greater(ik("a",e,t,n),ik("b",e,t,n))];case"GreaterEqual":return[r.greaterEqual(ik("a",e,t,n),ik("b",e,t,n))];case"Less":return[r.less(ik("a",e,t,n),ik("b",e,t,n))];case"LessEqual":return[r.lessEqual(ik("a",e,t,n),ik("b",e,t,n))];case"LogicalAnd":return[r.logicalAnd(ik("a",e,t,n),ik("b",e,t,n))];case"LogicalNot":return[r.logicalNot(ik("a",e,t,n))];case"LogicalOr":return[r.logicalOr(ik("a",e,t,n),ik("b",e,t,n))];case"Select":case"SelectV2":return[r.where(ik("condition",e,t,n),ik("a",e,t,n),ik("b",e,t,n))];case"BitwiseAnd":return[r.bitwiseAnd(ik("a",e,t,n),ik("b",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"matrices":return i(()=>((e,t,n,r=pE)=>{switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(ik("a",e,t,n),ik("b",e,t,n),ik("transposeA",e,t,n),ik("transposeB",e,t,n))];case"Einsum":return[r.einsum(ik("equation",e,t,n),...ik("tensors",e,t,n))];case"Transpose":return[r.transpose(ik("x",e,t,n),ik("perm",e,t,n))];case"_FusedMatMul":let[i,o]=ik("fusedOps",e,t,n),a="biasadd"===i,s="prelu"===o,l=ik("numArgs",e,t,n),u=ik("leakyreluAlpha",e,t,n);if(a){if(s&&2!==l)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&1!==l)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}let[c,p]=ik("args",e,t,n);return[r.fused.matMul({a:ik("a",e,t,n),b:ik("b",e,t,n),transposeA:ik("transposeA",e,t,n),transposeB:ik("transposeB",e,t,n),bias:c,activation:o,preluActivationWeights:p,leakyreluAlpha:u})];case"MatrixBandPart":return[r.linalg.bandPart(ik("a",e,t,n),ik("numLower",e,t,n),ik("numUpper",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"normalization":return i(()=>((e,t,n,r=pE)=>{switch(e.op){case"EuclideanNorm":return[r.euclideanNorm(ik("x",e,t,n),ik("axis",e,t,n),ik("keepDims",e,t,n))];case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[r.batchNorm(ik("x",e,t,n),ik("mean",e,t,n),ik("variance",e,t,n),ik("offset",e,t,n),ik("scale",e,t,n),ik("epsilon",e,t,n))];case"LRN":return[r.localResponseNormalization(ik("x",e,t,n),ik("radius",e,t,n),ik("bias",e,t,n),ik("alpha",e,t,n),ik("beta",e,t,n))];case"Softmax":return[r.softmax(ik("x",e,t,n))];case"LogSoftmax":return[r.logSoftmax(ik("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"ragged":return i(()=>((e,t,n,r=pE)=>{switch(e.op){case"RaggedGather":{let{outputNestedSplits:i,outputDenseValues:o}=r.raggedGather(ik("paramsNestedSplits",e,t,n),ik("paramsDenseValues",e,t,n),ik("indices",e,t,n),ik("outputRaggedRank",e,t,n));return i.concat(o)}case"RaggedRange":{let{rtNestedSplits:i,rtDenseValues:o}=r.raggedRange(ik("starts",e,t,n),ik("limits",e,t,n),ik("splits",e,t,n));return[i,o]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(ik("shape",e,t,n),ik("values",e,t,n),ik("defaultValue",e,t,n),ik("rowPartitionTensors",e,t,n),ik("rowPartitionTypes",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"reduction":return i(()=>((e,t,n,r=pE)=>{switch(e.op){case"Max":{let i=ik("axis",e,t,n),o=ik("keepDims",e,t,n);return[r.max(ik("x",e,t,n),i,o)]}case"Mean":{let i=ik("axis",e,t,n),o=ik("keepDims",e,t,n);return[r.mean(ik("x",e,t,n),i,o)]}case"Min":{let i=ik("axis",e,t,n),o=ik("keepDims",e,t,n);return[r.min(ik("x",e,t,n),i,o)]}case"Sum":{let i=ik("axis",e,t,n),o=ik("keepDims",e,t,n);return[r.sum(ik("x",e,t,n),i,o)]}case"All":{let i=ik("axis",e,t,n),o=ik("keepDims",e,t,n);return[r.all(ik("x",e,t,n),i,o)]}case"Any":{let i=ik("axis",e,t,n),o=ik("keepDims",e,t,n);return[r.any(ik("x",e,t,n),i,o)]}case"ArgMax":{let i=ik("axis",e,t,n);return[r.argMax(ik("x",e,t,n),i)]}case"ArgMin":{let i=ik("axis",e,t,n);return[r.argMin(ik("x",e,t,n),i)]}case"Prod":{let i=ik("axis",e,t,n),o=ik("keepDims",e,t,n);return[r.prod(ik("x",e,t,n),i,o)]}case"Cumprod":{let i=ik("axis",e,t,n),o=ik("exclusive",e,t,n),a=ik("reverse",e,t,n);return[r.cumprod(ik("x",e,t,n),i,o,a)]}case"Cumsum":{let i=ik("axis",e,t,n),o=ik("exclusive",e,t,n),a=ik("reverse",e,t,n);return[r.cumsum(ik("x",e,t,n),i,o,a)]}case"Bincount":let i=ik("x",e,t,n),o=ik("weights",e,t,n),a=ik("size",e,t,n);return[r.bincount(i,o,a)];case"DenseBincount":{let i=ik("x",e,t,n),o=ik("weights",e,t,n),a=ik("size",e,t,n),s=ik("binaryOutput",e,t,n);return[r.denseBincount(i,o,a,s)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"slice_join":return i(()=>((e,t,n,r=pE)=>{switch(e.op){case"ConcatV2":case"Concat":{let i=ik("n",e,t,n),o=ik("axis",e,t,n),a=ik("tensors",e,t,n);return a=a.slice(0,i),[r.concat(a,o)]}case"Gather":{let i=ik("x",e,t,n),o=ik("indices",e,t,n);return[r.gather(i,r.cast(o,"int32"),0)]}case"GatherV2":{let i=ik("axis",e,t,n),o=ik("batchDims",e,t,n),a=ik("x",e,t,n),s=ik("indices",e,t,n);return[r.gather(a,r.cast(s,"int32"),i,o)]}case"Reverse":{let i=ik("dims",e,t,n),o=[];for(let e=0;e<i.length;e++)i[e]&&o.push(e);let a=ik("x",e,t,n);return[r.reverse(a,o)]}case"ReverseV2":{let i=ik("axis",e,t,n),o=ik("x",e,t,n);return[r.reverse(o,i)]}case"Slice":{let i=ik("begin",e,t,n),o=ik("size",e,t,n);return[r.slice(ik("x",e,t,n),i,o)]}case"StridedSlice":{let i=ik("begin",e,t,n),o=ik("end",e,t,n),a=ik("strides",e,t,n),s=ik("beginMask",e,t,n),l=ik("endMask",e,t,n),u=ik("ellipsisMask",e,t,n),c=ik("newAxisMask",e,t,n),p=ik("shrinkAxisMask",e,t,n),d=ik("x",e,t,n);return[r.stridedSlice(d,i,o,a,s,l,u,c,p)]}case"Pack":return Xa(()=>{let i=ik("axis",e,t,n),o=ik("tensors",e,t,n),a=o[0].shape,s=r.squeeze(o[0]).shape,l=o.map(e=>{let t=Si.arraysEqual(e.shape,a);if(!t&&!Si.arraysEqual(r.squeeze(e).shape,s))throw new Error("the input tensors shape does not match");return t?e:r.reshape(e,a)});return[r.stack(l,i)]});case"Unpack":{let i=ik("axis",e,t,n),o=ik("tensor",e,t,n);return r.unstack(o,i)}case"Tile":{let i=ik("reps",e,t,n);return[r.tile(ik("x",e,t,n),i)]}case"Split":case"SplitV":{let i=ik("axis",e,t,n),o=ik("numOrSizeSplits",e,t,n),a=ik("x",e,t,n);return r.split(a,o,i)}case"ScatterNd":{let i=ik("indices",e,t,n),o=ik("values",e,t,n),a=ik("shape",e,t,n);return[r.scatterND(i,o,a)]}case"GatherNd":{let i=ik("x",e,t,n),o=ik("indices",e,t,n);return[r.gatherND(i,o)]}case"SparseToDense":{let i=ik("sparseIndices",e,t,n),o=ik("outputShape",e,t,n),a=ik("sparseValues",e,t,n),s=ik("defaultValue",e,t,n);return[r.sparseToDense(i,a,o,a.dtype===s.dtype?s:r.cast(s,a.dtype))]}case"TensorScatterUpdate":{let i=ik("indices",e,t,n),o=ik("values",e,t,n),a=ik("tensor",e,t,n);return[r.tensorScatterUpdate(a,i,o)]}default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"sparse":return i(()=>((e,t,n,r=pE)=>{switch(e.op){case"SparseFillEmptyRows":{let{outputIndices:i,outputValues:o,emptyRowIndicator:a,reverseIndexMap:s}=r.sparse.sparseFillEmptyRows(ik("indices",e,t,n),ik("values",e,t,n),ik("denseShape",e,t,n),ik("defaultValue",e,t,n));return[i,o,a,s]}case"SparseReshape":{let{outputIndices:i,outputShape:o}=r.sparse.sparseReshape(ik("inputIndices",e,t,n),ik("inputShape",e,t,n),ik("newShape",e,t,n));return[i,o]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(ik("data",e,t,n),ik("indices",e,t,n),ik("segmentIds",e,t,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(ik("data",e,t,n),ik("indices",e,t,n),ik("segmentIds",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"spectral":return i(()=>((e,t,n,r=pE)=>{switch(e.op){case"FFT":return[r.fft(ik("x",e,t,n))];case"IFFT":return[r.ifft(ik("x",e,t,n))];case"RFFT":return[r.rfft(ik("x",e,t,n))];case"IRFFT":return[r.irfft(ik("x",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"string":return i(()=>((e,t,n,r=pE)=>{switch(e.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(ik("input",e,t,n),ik("pattern",e,t,n),ik("rewrite",e,t,n),ik("replaceGlobal",e,t,n))];case"StringNGrams":{let{nGrams:i,nGramsSplits:o}=r.string.stringNGrams(ik("data",e,t,n),ik("dataSplits",e,t,n),ik("separator",e,t,n),ik("nGramWidths",e,t,n),ik("leftPad",e,t,n),ik("rightPad",e,t,n),ik("padWidth",e,t,n),ik("preserveShortSequences",e,t,n));return[i,o]}case"StringSplit":{let{indices:i,values:o,shape:a}=r.string.stringSplit(ik("input",e,t,n),ik("delimiter",e,t,n),ik("skipEmpty",e,t,n));return[i,o,a]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(ik("input",e,t,n),ik("numBuckets",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"transformation":return i(()=>((e,t,n,r=pE)=>{switch(e.op){case"Cast":return[r.cast(ik("x",e,t,n),ik("dtype",e,t,n))];case"ExpandDims":{let i=ik("axis",e,t,n);return[r.expandDims(ik("x",e,t,n),i)]}case"Squeeze":{let i=ik("axis",e,t,n);return[r.squeeze(ik("x",e,t,n),i)]}case"Reshape":return[r.reshape(ik("x",e,t,n),ik("shape",e,t,n))];case"EnsureShape":return[r.ensureShape(ik("x",e,t,n),ik("shape",e,t,n))];case"MirrorPad":return[r.mirrorPad(ik("x",e,t,n),ik("padding",e,t,n),ik("mode",e,t,n))];case"PadV2":case"Pad":return[r.pad(ik("x",e,t,n),ik("padding",e,t,n),ik("constantValue",e,t,n))];case"SpaceToBatchND":{let i=ik("blockShape",e,t,n),o=ik("paddings",e,t,n);return[r.spaceToBatchND(ik("x",e,t,n),i,o)]}case"BatchToSpaceND":{let i=ik("blockShape",e,t,n),o=ik("crops",e,t,n);return[r.batchToSpaceND(ik("x",e,t,n),i,o)]}case"DepthToSpace":{let i=ik("blockSize",e,t,n),o=ik("dataFormat",e,t,n).toUpperCase();return[r.depthToSpace(ik("x",e,t,n),i,o)]}case"BroadcastTo":return[r.broadcastTo(ik("x",e,t,n),ik("shape",e,t,n))];case"BroadcastArgs":return[r.broadcastArgs(ik("s0",e,t,n),ik("s1",e,t,n))];default:throw TypeError(`Node type ${e.op} is not implemented`)}})(e,t,n));case"hash_table":return xE(e,t,n,r);case"custom":let o=nk(e.op);if(o&&o.customExecutor)return o.customExecutor(new class{constructor(e,t,n){this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(e=>this.getInput(e)),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce((e,t)=>(e[t]=this.getAttr(t),e),{}))}getInput(e){return ok(e,this.tensorMap,this.context)}getAttr(e,t){let n=this.node.rawAttrs[e];if(null!=n.tensor)return ok(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return eE(this.node.rawAttrs,e,t);if(null!=n.s)return Yk(this.node.rawAttrs,e,t);if(null!=n.b)return Zk(this.node.rawAttrs,e,t);if(null!=n.shape)return aE(this.node.rawAttrs,e,t);if(null!=n.type)return rE(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return sE(this.node.rawAttrs,e,t);if(null!=n.list.s)return lE(this.node.rawAttrs,e,t);if(null!=n.list.shape)return uE(this.node.rawAttrs,e,t);if(null!=n.list.b)return cE(this.node.rawAttrs,e,t);if(null!=n.list.type)return iE(this.node.rawAttrs,e,t)}return t}}(e,t,n));throw TypeError(`Custom op ${e.op} is not registered.`);default:throw TypeError(`Unknown op '${e.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(e,t,n);return Si.isPromise(o)?o.then(e=>[].concat(e)):[].concat(o)}var _E=class{constructor(e={},t={},n={},r={},i){this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=r,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,t){return{id:e,frameName:t,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){let e=[];for(let t=0;t<this.contexts.length-1;t++){let n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(e=>0===e.id&&0===e.iterationId?"":`${e.frameName}-${e.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()}nextIteration(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");{this.contexts=this.contexts.slice(),this.lastId++;let e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(let t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(let t in this.tensorListMap)this.tensorListMap[t].clearAndClose(e)}};function CE(e,t,n,r){let i=new Set,o=[],a=null,s=null,l=new Set,u=new Set(Object.keys(e).map(e=>uk(e)[0]));r=r||[];let c=new Set(r.map(e=>uk(e.name)[0])),p=[...t];for(;p.length>0;){let e=p.pop();if((PE(e)||OE(e)||NE(e))&&null==a&&(a=e,s=a.children.map(e=>e.name).filter(e=>i.has(e))),i.add(e.name),null==n[e.name]&&!u.has(e.name)&&!c.has(e.name)){if(0===e.inputs.length){o.push(e.name);continue}e.inputs.forEach(e=>{l.has(e.name)||(l.add(e.name),p.push(e))})}}return{inputs:e,outputs:t,usedNodes:i,missingInputs:o,dynamicNode:a,syncInputs:s}}function SE(e,t){let{usedNodes:n,inputs:r}=t,i=Object.keys(r).map(e=>uk(e)[0]).map(t=>e.nodes[t]),o=e.initNodes||[],a=e=>n.has("string"==typeof e?e:e.name);function s(e){return[...new Map(e.map(e=>[e.name,e])).values()]}let l=s([...i,...e.weights,...o]).filter(a),u=s([...l,...Object.values(e.nodes)]).filter(a),c=new Map(u.map(e=>[e.name,e])),p={};for(let e of u){p[e.name]=p[e.name]||0;for(let t of e.children)a(t)||(p[t.name]=Number.POSITIVE_INFINITY),p[t.name]=(p[t.name]||0)+1}let d=Object.entries(p).filter(([,e])=>0===e).map(([e])=>e),h=[...d];for(;d.length>0;){let e=d.pop(),t=c.get(e);for(let e of t.children.filter(a))0==--p[e.name]&&(h.push(e.name),d.push(e.name))}let f=function(e,t){let n=new Map(e.map(e=>[e.name,e])),r=t.map(e=>e.name),i=new Set(r);for(;r.length>0;){let e=r.pop(),t=n.get(e);for(let e of t.children)!n.has(e.name)||i.has(e.name)||(i.add(e.name),r.push(e.name))}return e.filter(e=>i.has(e.name))}(h.map(e=>c.get(e)),l);return function(e,t){let n=new Map(e.map((e,t)=>[e.name,t])),r=new Set(t.map(e=>e.name)),i=e=>r.has("string"==typeof e?e:e.name),o=new Set(e.map(e=>e.name)),a=e=>o.has("string"==typeof e?e:e.name);for(let t of e){for(let e of t.children.filter(a)){if(!n.has(e.name))throw new kE(`Child ${e.name} of node ${t.name} is unreachable.`);if(n.get(t.name)>n.get(e.name))throw new kE(`Node ${t.name} is scheduled to run after its child ${e.name}.`)}if(!i(t))for(let e of t.inputs){if(!n.has(e.name))throw new kE(`Input ${e.name} of node ${t.name} is unreachable.`);if(n.get(e.name)>n.get(t.name))throw new kE(`Node ${t.name} is scheduled to run before its input ${e.name}.`)}}}(f,l),f}var kE=class extends Error{constructor(e){super("NodesExecutionOrderError: "+e)}};var EE=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),TE=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),IE=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function PE(e){return EE.has(e.op)}function OE(e){return TE.has(e.op)}function NE(e){return IE.has(e.op)}var RE=class{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){let t=Object.keys(e).map(t=>e[t].map(e=>e.id));this._weightIds=[].concat(...t),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{let t=e.signatureKey||e.name;return e.defaultOutput?`${t}:${e.defaultOutput}`:t})}get functions(){return Object.keys(this._functions).reduce((e,t)=>(e[t]=this._functions[t].signature,e),{})}constructor(e,t){this.graph=e,this.parent=t,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,null!=e.functions&&Object.keys(e.functions).forEach(t=>{this._functionExecutorMap[t]=new RE(e.functions[t],this)})}getCompilationKey(e,t){let n=e.map(e=>e.name).sort(),r=t.map(e=>e.name).sort();return n.join(this.SEPARATOR)+"--"+r.join(this.SEPARATOR)}compile(e,t){let n=CE(e,t,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:i,syncInputs:o}=n;if(null!=i)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(r.length>0){let n=t.map(e=>e.name),i=Object.keys(e);throw new Error(`Cannot compute the outputs [${n}] from the provided inputs [${i}]. Missing the following inputs: [${r}]`)}let a=SE(this.graph,n),s=function(e){let t=new Map(e.map((e,t)=>[e.name,t])),n=Number.MAX_SAFE_INTEGER,r=e.map((e,t)=>PE(e)?n:t),i=e=>{let n=r[t.get(e.name)];return null==n?-1:n},o=e.map((e,t)=>e.children.map(i).reduce((e,t)=>Math.max(e,t),r[t])),a=new Map;for(let t=0;t<e.length;++t){let r=o[t];if(r===n)continue;let i=e[t],s=e[r];a.has(s.name)||a.set(s.name,[]),a.get(s.name).push(i)}return a}(a);return{orderedNodes:a,nodeLiveUntilMap:s}}cloneAndKeepTensor(e){if(null==e)return null;let t=e.clone();return Za(t),t}cloneTensorList(e){return e?e.map(e=>this.cloneAndKeepTensor(e)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,this.cloneTensorList(t)]))}execute(e,t){this.disposeIntermediateTensors(),e=this.mapInputs(e);let n=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);let r=n.map(e=>this.graph.nodes[uk(e)[0]]),i=t.map(e=>uk(e)[0]),o=new Set(i),a=i.map(e=>this.graph.nodes[e]);0===a.length&&(a=this._outputs);let s=this.getCompilationKey(r,a),l=this.compiledMap.get(s);null==l&&(l=this.compile(e,a),this.compiledMap.set(s,l));try{this.keepIntermediateTensors=qe().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(e){this.keepIntermediateTensors=!1,console.warn(e.message)}let u={},c={};return Xa(()=>{let n=new _E(this.weightMap,u,c,this.functionExecutorMap,this.parseNodeNameCache),r=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(t=>{let[i,o]=uk(t,n),a=[];a[o]=e[t],r[i]=a,this.keepIntermediateTensors&&(this.clonedTensorsMap[i]=this.cloneTensorList(a))});let i=this.getFrozenTensorIds(r),{orderedNodes:a,nodeLiveUntilMap:s}=l;for(let e of a){if(r[e.name])continue;let t=wE(e,r,n,this._resourceManager);if(Si.isPromise(t))throw new Error(`The execution of the op '${e.op}' returned a promise. Please use model.executeAsync() instead.`);r[e.name]=t,this.keepIntermediateTensors&&(this.clonedTensorsMap[e.name]=this.cloneTensorList(t)),this.checkTensorForDisposalWithNodeLiveUntilInfo(e,r,n,i,o,s.get(e.name))}return null==this.parent&&n.dispose(i),t.map(e=>ok(e,r,n))})}getFrozenTensorIds(e){let t=[].concat.apply([],Object.keys(e).map(t=>e[t]).map(e=>e.map(e=>e.id)));return new Set(t)}checkTensorForDisposal(e,t,n,r,i,o,a){if(!PE(t)&&!o.has(e)){for(let r of n[e])null!=r&&(a[r.id]=(a[r.id]||0)+t.children.length);for(let e of t.inputs){if(PE(e))continue;let t=ak(e.name,n,r);if(null!=t)for(let e of t){if(!e||e.kept||i.has(e.id))continue;let t=a[e.id];1===t?(e.dispose(),delete a[e.id]):null!=t&&a[e.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,t,n,r,i,o){function a(e){return PE(e)||i.has(e.name)}if(!PE(e)&&null!=o)for(let e of o){if(a(e))continue;let i=ak(e.name,t,n);for(let e of i)!e||e.kept||r.has(e.id)||e.dispose()}}async executeAsync(e,t){return this._executeAsync(e,t)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(let t of e)t&&!t.isDisposed&&t.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,t,n=!1,r={},i={}){this.disposeIntermediateTensors(),n||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t));try{this.keepIntermediateTensors=qe().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(e){this.keepIntermediateTensors=!1,console.warn(e.message)}let o=new _E(this.weightMap,r,i,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));let a=await this.executeWithControlFlow(e,o,t,n),s=t.map(e=>ok(e,a,o)),l=s.map(e=>e.id),u=Object.keys(e).map(t=>e[t].id),c=new Set([...l,...u,...this.weightIds]);return Object.values(a).forEach(e=>{e.forEach(e=>{e&&!e.isDisposed&&!c.has(e.id)&&e.dispose()})}),null==this.parent&&o.dispose(c),s}async executeFunctionAsync(e,t,n){let r=e.reduce((e,t,n)=>(e[this.inputs[n].name]=t,e),{});return this._executeAsync(r,this.outputNodes,!0,t,n)}async executeWithControlFlow(e,t,n,r){let i=Object.keys(e),o=i.map(e=>this.graph.nodes[uk(e)[0]]),a=n.map(e=>uk(e)[0]),s=new Set(a),l=a.map(e=>this.graph.nodes[e]);0===l.length&&(l=this._outputs);let{usedNodes:u,missingInputs:c,dynamicNode:p,syncInputs:d}=CE(e,l,this.weightMap,this._initNodes),h=[...o,...this.graph.weights,...this._initNodes||[]].map(e=>({node:e,contexts:t.currentContext})),f=Object.assign({},this.weightMap);Object.keys(e).forEach(t=>{let[n,r]=uk(t),i=[];i[r]=e[t],f[n]=i});let m={},g=this.getFrozenTensorIds(f),y={};for(;h.length>0;){let e=this.processStack(o,h,t,f,y,g,s,m,u);await Promise.all(e)}null==p&&!r&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");let v=l.filter(e=>!PE(e)&&!ok(e.name,f,t)).map(e=>e.name);if(v.length>0){let e="";throw null!=p&&(e=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${d}]`),new Error(`Cannot compute the outputs [${v}] from the provided inputs [${i}]. Consider providing the following inputs: [${c}]. ${e}`)}return f}processStack(e,t,n,r,i,o,a,s,l){let u=[];for(;t.length>0;){let e=t.pop();n.currentContext=e.contexts;let c="";if("Enter"===e.node.op&&ik("isConstant",e.node,r,n)&&([c]=sk(e.node.name,n)),null==r[e.node.name]){let p=wE(e.node,r,n,this._resourceManager);c||([c]=sk(e.node.name,n));let d=n.currentContext;Si.isPromise(p)?u.push(p.then(u=>(r[c]=u,this.keepIntermediateTensors&&(this.clonedTensorsMap[c]=this.cloneTensorList(u)),n.currentContext=d,this.checkTensorForDisposal(c,e.node,r,n,o,a,s),this.processChildNodes(e.node,t,n,r,i,l),u))):(r[c]=p,this.keepIntermediateTensors&&(this.clonedTensorsMap[c]=this.cloneTensorList(p)),this.checkTensorForDisposal(c,e.node,r,n,o,a,s),this.processChildNodes(e.node,t,n,r,i,l))}else this.processChildNodes(e.node,t,n,r,i,l)}return u}processChildNodes(e,t,n,r,i,o){e.children.forEach(e=>{let[a]=sk(e.name,n);i[a]||!o.has(e.name)||("Merge"===e.op?e.inputNames.some(e=>!!ok(e,r,n))&&(i[a]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every(e=>!!ok(e,r,n))&&(i[a]=!0,t.push({contexts:n.currentContext,node:e})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(e=>e.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(t=>{let n=e[t],[r]=uk(t),i=this.graph.nodes[r];if(i.attrParams.shape&&i.attrParams.shape.value){let e=i.attrParams.shape.value,t=e.length===n.shape.length&&n.shape.every((t,n)=>-1===e[n]||e[n]===t);Si.assert(t,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${e}], but was [${n.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&Si.assert(n.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${n.dtype}`)})}mapInputs(e){var t,n;let r={};for(let i in e){let o=null===(n=null===(t=this._signature)||void 0===t?void 0:t.inputs)||void 0===n?void 0:n[i];null!=o?r[o.name]=e[i]:r[i]=e[i]}return r}checkInputs(e){let t=Object.keys(e).filter(e=>{let[t]=uk(e);return null==this.graph.nodes[t]});if(t.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${t}] that are not part of graph`)}mapOutputs(e){return e.map(e=>{var t,n;let r=null===(n=null===(t=this._signature)||void 0===t?void 0:t.outputs)||void 0===n?void 0:n[e];return null!=r?r.name:e},{})}checkOutputs(e){e.forEach(e=>{let[t]=uk(e);if(!this.graph.nodes[t])throw new Error(`The output '${e}' is not found in the graph`)})}},AE=class{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,t={},n=Th){this.modelUrl=e,this.loadOptions=t,this.version="n/a",this.io=n,null==t&&(this.loadOptions={}),this.resourceManager=new class{constructor(e={},t={}){this.hashTableNameToHandle=e,this.hashTableMap=t}addHashTable(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(let e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(let e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}}findIOHandler(){let e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{let t=this.io.getLoadHandlers(e,this.loadOptions);if(0===t.length)t.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error(`Found more than one (${t.length}) load handlers for URL '${[e]}'`);this.handler=t[0]}}load(){if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let e=this.handler.load();return Si.isPromise(e)?e.then(e=>this.loadSync(e)):this.loadSync(e)}loadSync(e){this.artifacts=e;let t=this.artifacts.modelTopology,n=this.artifacts.signature;if(null!=this.artifacts.userDefinedMetadata){let e=this.artifacts.userDefinedMetadata;null!=e.signature&&(n=e.signature),null!=e.structuredOutputKeys&&(this.structuredOutputKeys=e.structuredOutputKeys)}this.signature=n,this.version=`${t.versions.producer}.${t.versions.minConsumer}`;let r=this.io.decodeWeights(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new RE(Jk.Instance.transformGraph(t,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){let t=Jk.Instance.transformGraph(e.modelInitializer);this.initializer=new RE(t),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,t){if("string"==typeof e){let t=this.io.getSaveHandlers(e);if(0===t.length)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(t.length>1)throw new Error(`Found more than one (${t.length}) save handlers for URL '${e}'`);e=t[0]}if(null==e.save)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){let t={};return(e instanceof ro?[e]:e).forEach((e,n)=>t[this.structuredOutputKeys[n]]=e),t}return e}predict(e,t){let n=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(n)}async predictAsync(e,t){let n=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(n)}normalizeInputs(e){var t;if(!(e instanceof ro||Array.isArray(e))){let n=null===(t=this.signature)||void 0===t?void 0:t.inputs;if(null!=n)for(let t in n){let r=n[t];null!=r.resourceId&&(e[t]=this.resourceIdToCapturedInput[r.resourceId])}return e}e=Array.isArray(e)?e:[e];let n=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+n!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-n} non-resource placeholders, while there are ${e.length} input tensors provided.`);let r=0;return this.inputNodes.reduce((t,n)=>{var i,o,a;let s=null===(a=null===(o=null===(i=this.signature)||void 0===i?void 0:i.inputs)||void 0===o?void 0:o[n])||void 0===a?void 0:a.resourceId;return t[n]=null!=s?this.resourceIdToCapturedInput[s]:e[r++],t},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return null==this.initializer?[]:null==this.initializerSignature?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){let t=this.initializerSignature.outputs,n=Object.keys(t);for(let r=0;r<n.length;r++){let i=t[n[r]];this.resourceIdToCapturedInput[i.resourceId]=e[r]}}}execute(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);let n=this.executor.execute(e,t);return n.length>1?n:n[0]}async executeAsync(e,t){null==this.resourceIdToCapturedInput&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),t=this.normalizeOutputs(t);let n=await this.executor.executeAsync(e,t);return n.length>1?n:n[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((t,n)=>(t[n]=[e[n]],t),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&Ya(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}};async function DE(e,t={},n=Th){if(null==e)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");null==t&&(t={}),t.fromTFHub&&"string"==typeof e&&(e=function(e){return e.endsWith("/")||(e+="/"),e+"model.json?tfjs-format=file"}(e));let r=new AE(e,t,n);return await r.load(),r}function VE(e){if(null==e)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");let t;if(e instanceof Array){let[n,r]=e;if(!n)throw new Error("modelJSON must be the first element of the array");if(!(r&&r instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in n))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in n))throw new Error("Model JSON is missing 'weightsManifest'");let i=Th.getWeightSpecs(n.weightsManifest),o=Th.getModelArtifactsForJSONSync(n,i,r);t=Th.fromMemorySync(o)}else if("load"in e)t=e;else{if(!("modelTopology"in e&&"weightSpecs"in e&&"weightData"in e))throw new Error("Unknown model format");t=Th.fromMemorySync(e)}let n=new AE(t);return n.load(),n}var ME="4.7.0",FE={};b(FE,{CSVDataset:()=>TT,Dataset:()=>mT,FileDataSource:()=>jT,TextLineDataset:()=>wT,URLDataSource:()=>qT,array:()=>yT,csv:()=>$T,func:()=>BT,generator:()=>UT,microphone:()=>HT,version_data:()=>QT,webcam:()=>WT,zip:()=>vT});var LE=x(R()),zE=x(R());function jE(e,t,n=new Map,r=new Set){if(null==e)return null;if("function"==typeof Blob&&e instanceof Blob)return e.slice();if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);let i=t(e);if(i.recurse&&null!==i.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(i.recurse){if(UE(e)){let i=Array.isArray(e)?[]:{};r.add(e);for(let o in e){let a=jE(e[o],t,n,r);i[o]=a}return r.delete(e),e.__proto__&&(i.__proto__=e.__proto__),i}throw new Error("Can't recurse into non-iterable type: "+e)}return n.set(e,i.value),i.value}function qE(e,t=$E){return function e(t,n,r=new Set){let i=t[0];if(r.has(i))throw new Error("Circular references are not supported.");let o=n(t);if(o.recurse&&null!==o.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(o.recurse){if(UE(i)){let o=Array.isArray(i)?[]:{};r.add(i);for(let a in i){let i=t.map(e=>e[a]),s=e(i,n,r);o[a]=s}return r.delete(i),o}throw new Error("Can't recurse into non-iterable type: "+i)}return o.value}(e,t)}function $E(e){return null===e?null:UE(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}async function BE(e,t){let n=new Map;jE(e,t,n);for(let e of Array.from(n.keys())){let t=n.get(e);if(Si.isPromise(t)){let r=await t;n.set(e,r)}}return jE(e,t,n)}function UE(e){let t=!1;if(qe().get("IS_BROWSER"))t=e instanceof TextDecoder;else{let{StringDecoder:n}=A();t=e instanceof n}return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"==typeof e&&!(e instanceof ro)&&!(e instanceof Promise)&&!t)}function WE(e){return function(e,t){return jE(e,t)}(e,HE)}function HE(e){return e instanceof ro?{value:e.clone(),recurse:!1}:UE(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}var QE=class{constructor(e){if(this.capacity=e,this.begin=0,this.end=0,null==e)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}wrap(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity}get(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]}set(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t}length(){let e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e}isFull(){return this.length()===this.capacity}isEmpty(){return 0===this.length()}push(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)}pushAll(e){for(let t of e)this.push(t)}pop(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);let e=this.get(this.end);return this.set(this.end,void 0),e}unshift(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)}shift(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");let e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e}shuffleExcise(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");let t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n}},GE=class extends QE{constructor(){super(GE.INITIAL_CAPACITY)}isFull(){return!1}push(e){super.isFull()&&this.expand(),super.push(e)}unshift(e){super.isFull()&&this.expand(),super.unshift(e)}expand(){let e=2*this.capacity,t=new Array(e),n=this.length();for(let e=0;e<n;e++)t[e]=this.get(this.wrap(this.begin+e));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n}};function KE(e){return new ZE(e)}function JE(e){return new eT(e)}GE.INITIAL_CAPACITY=32;var XE,YE=class{async toArray(){let e=[],t=await this.next();for(;!t.done;)e.push(t.value),t=await this.next();return e}async toArrayForTest(){let e=this.prefetch(100),t=[],n=await e.next();for(;!n.done;)t.push(n.value),n=await e.next();return t}async resolveFully(){let e=await this.next();for(;!e.done;)e=await this.next()}async resolveWhile(e){let t=await this.next(),n=e(t.value);for(;!t.done&&n;)t=await this.next(),n=e(t.value)}handleErrors(e){return new sT(this,e)}filter(e){return new oT(this,e)}map(e){return new aT(this,e)}mapAsync(e){return new lT(this,e)}serialMapAsync(e){return new lT(this,e).serial()}flatmap(e){return new cT(this,e)}async forEachAsync(e){return this.map(e).resolveFully()}async serialForEach(e){return this.serialMapAsync(e).resolveWhile(e=>!0===e)}rowMajorBatch(e,t=!0){return new iT(this,e,t)}columnMajorBatch(e,t=!0,n=$E){return this.rowMajorBatch(e,t).map(e=>qE(e,n))}concatenate(e,t){return new pT(KE([this,e]),t)}take(e){return e<0||null==e?this:new rT(this,e)}skip(e){return e<0||null==e?this:new nT(this,e)}prefetch(e){return new hT(this,e)}shuffle(e,t){return new fT(this,e,t)}serial(){return new tT(this)}},ZE=class extends YE{constructor(e){super(),this.items=e,this.trav=0}summary(){return`Array of ${this.items.length} items`}async next(){if(this.trav>=this.items.length)return{value:null,done:!0};let e=this.items[this.trav];return this.trav++,{value:WE(e),done:!1}}},eT=class extends YE{constructor(e){super(),this.nextFn=e}summary(){return"Function call"}async next(){try{return this.nextFn()}catch(e){throw e.message="Error thrown while iterating through a dataset: "+e.message,e}}},tT=class extends YE{constructor(e){super(),this.upstream=e,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> Serial"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){return this.upstream.next()}},nT=class extends YE{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> Skip"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;this.count++<this.maxCount;){let e=await this.upstream.next();if(e.done)return e;Ya(e.value)}return this.upstream.next()}},rT=class extends YE{constructor(e,t){super(),this.upstream=e,this.maxCount=t,this.count=0}summary(){return this.upstream.summary()+" -> Take"}async next(){return this.count++>=this.maxCount?{value:null,done:!0}:this.upstream.next()}},iT=class extends YE{constructor(e,t,n=!0){super(),this.upstream=e,this.batchSize=t,this.enableSmallLastBatch=n,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> RowMajorBatch"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){let e=[];for(;e.length<this.batchSize;){let t=await this.upstream.next();if(t.done)return this.enableSmallLastBatch&&e.length>0?{value:e,done:!1}:{value:null,done:!0};e.push(t.value)}return{value:e,done:!1}}},oT=class extends YE{constructor(e,t){super(),this.upstream=e,this.predicate=t,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> Filter"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;){let e=await this.upstream.next();if(e.done||this.predicate(e.value))return e;Ya(e.value)}}},aT=class extends YE{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return this.upstream.summary()+" -> Map"}async next(){let e=await this.upstream.next();if(e.done)return{value:null,done:!0};let t=ho.getTensorsInContainer(e.value),n=this.transform(e.value),r=ho.getTensorsInContainer(n);for(let e of t)ho.isTensorInList(e,r)||e.dispose();return{value:n,done:!1}}},sT=class extends YE{constructor(e,t){super(),this.upstream=e,this.handler=t,this.count=0,this.lastRead=Promise.resolve({value:null,done:!1})}summary(){return this.upstream.summary()+" -> handleErrors"}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;;)try{return await this.upstream.next()}catch(e){if(!this.handler(e))return{value:null,done:!0}}}},lT=class extends YE{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return this.upstream.summary()+" -> AsyncMap"}async next(){let e=await this.upstream.next();if(e.done)return{value:null,done:!0};let t=ho.getTensorsInContainer(e.value),n=await this.transform(e.value),r=ho.getTensorsInContainer(n);for(let e of t)ho.isTensorInList(e,r)||e.dispose();return{value:n,done:!1}}},uT=class extends YE{constructor(){super(),this.outputQueue=new GE,this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}async serialNext(){for(;0===this.outputQueue.length();)if(!await this.pump())return{value:null,done:!0};return{value:this.outputQueue.shift(),done:!1}}},cT=class extends uT{constructor(e,t){super(),this.upstream=e,this.transform=t}summary(){return this.upstream.summary()+" -> Flatmap"}async pump(){let e=await this.upstream.next();if(e.done)return!1;let t=ho.getTensorsInContainer(e.value),n=this.transform(e.value),r=ho.getTensorsInContainer(n);this.outputQueue.pushAll(n);for(let e of t)ho.isTensorInList(e,r)||e.dispose();return!0}},pT=class extends YE{constructor(e,t){super(),this.baseErrorHandler=t,this.lastRead=null,this.iterator=null,this.moreIterators=e}summary(){return"TODO: fill in upstream of chained summaries -> Chained"}async next(){return this.lastRead=this.readFromChain(this.lastRead),this.lastRead}async readFromChain(e){if(await e,null==this.iterator){let e=await this.moreIterators.next();if(e.done)return{value:null,done:!0};this.iterator=e.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler))}let t=await this.iterator.next();return t.done?(this.iterator=null,this.readFromChain(e)):t}};!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(XE||(XE={}));var dT=class extends YE{constructor(e,t=XE.FAIL){super(),this.iterators=e,this.mismatchMode=t,this.count=0,this.currentPromise=null}summary(){return"{TODO: fill in upstream of zip summaries} -> Zip"}async nextState(e){await e;let t=0,n=0;let r=await BE(this.iterators,(function(e){return e instanceof YE?{value:e.next().then(e=>(t++,e.done&&n++,e.value)),recurse:!1}:{value:null,recurse:!0}}));if(t===n)return{value:null,done:!0};if(n>0)switch(this.mismatchMode){case XE.FAIL:throw new Error(`Zipped streams should have the same length. Mismatched at element ${this.count}.`);case XE.SHORTEST:return{value:null,done:!0};case XE.LONGEST:}return this.count++,{value:r,done:!1}}async next(){return this.currentPromise=this.nextState(this.currentPromise),this.currentPromise}},hT=class extends YE{constructor(e,t){super(),this.upstream=e,this.bufferSize=t,this.buffer=new QE(t)}summary(){return this.upstream.summary()+" -> Prefetch"}refill(){for(;!this.buffer.isFull();){let e=this.upstream.next();this.buffer.push(e)}}next(){return this.refill(),this.buffer.shift()}},fT=class extends hT{constructor(e,t,n){super(e,t),this.upstream=e,this.windowSize=t,this.upstreamExhausted=!1,this.random=zE.alea(n||Si.now().toString()),this.lastRead=Promise.resolve({value:null,done:!1})}async next(){return this.lastRead=this.lastRead.then(()=>this.serialNext()),this.lastRead}randomInt(e){return Math.floor(this.random()*e)}chooseIndex(){return this.randomInt(this.buffer.length())}async serialNext(){for(this.upstreamExhausted||this.refill();!this.buffer.isEmpty();){let e=this.chooseIndex(),t=await this.buffer.shuffleExcise(e);if(!t.done)return this.refill(),t;this.upstreamExhausted=!0}return{value:null,done:!0}}},mT=class{constructor(){this.size=null}batch(e,t=!0){let n,r=this;return Si.assert(e>0,()=>"batchSize needs to be positive, but it is\n      "+e),n=this.size===1/0||null==this.size?this.size:t?Math.ceil(this.size/e):Math.floor(this.size/e),gT(async()=>(await r.iterator()).columnMajorBatch(e,t,bT),n)}concatenate(e){let t,n=this;return t=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,gT(async()=>(await n.iterator()).concatenate(await e.iterator()),t)}filter(e){let t,n=this;return t=this.size===1/0?1/0:null,gT(async()=>(await n.iterator()).filter(t=>Xa(()=>e(t))),t)}async forEachAsync(e){return(await this.iterator()).forEachAsync(e)}map(e){let t=this;return gT(async()=>(await t.iterator()).map(t=>Xa(()=>e(t))),this.size)}mapAsync(e){let t=this;return gT(async()=>(await t.iterator()).mapAsync(e),this.size)}prefetch(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");let t=this;return gT(async()=>(await t.iterator()).prefetch(e),this.size)}repeat(e){let t,n=this;return t=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,gT(async()=>function(e,t){return new pT(e,t)}(JE(async()=>({value:await n.iterator(),done:!1})).take(e)),t)}skip(e){let t,n=this;return t=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,gT(async()=>(await n.iterator()).skip(e),t)}shuffle(e,t,n=!0){if(null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError(`\`Dataset.shuffle()\` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for \`tf.Tensor\`s), consider setting bufferSize to the dataset size (${this.size} elements)`);let r=this,i=LE.alea(t||Si.now().toString());return gT(async()=>{let t=i.int32();return n&&(t+=i.int32()),(await r.iterator()).shuffle(e,t.toString())},this.size)}take(e){let t,n=this;return t=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,gT(async()=>(await n.iterator()).take(e),t)}async toArray(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArray()}async toArrayForTest(){if(this.size===1/0)throw new Error("Can not convert infinite data stream to array.");return(await this.iterator()).toArrayForTest()}};function gT(e,t=null){return new class extends mT{constructor(){super(...arguments),this.size=t}async iterator(){return e()}}}function yT(e){return gT(async()=>KE(e),e.length)}function vT(e){if(!UE(e))throw new Error("The argument to zip() must be an object or array.");let t;if(Array.isArray(e))for(let n=0;n<e.length;n++)t=null==t?e[n].size:Math.min(t,e[n].size);else if(e instanceof Object)for(let n in e)t=null==t?e[n].size:Math.min(t,e[n].size);return gT(async()=>function(e,t=XE.FAIL){return new dT(e,t)}(await BE(e,e=>{if(e instanceof mT)return{value:e.iterator(),recurse:!1};if(UE(e))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")}),XE.SHORTEST),t)}function bT(e){if(null===e)return null;return function(e){return null==e||function(e){return null===e||"object"!=typeof e&&"function"!=typeof e}(e)||Array.isArray(e)||"object"==typeof e&&e instanceof ro||Si.isTypedArray(e)}(e[0])?{value:xT(e),recurse:!1}:{value:null,recurse:!0}}function xT(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof ro?xp(e):Bo(e)}mT.MAX_BUFFER_SIZE=1e4;var wT=class extends mT{constructor(e){super(),this.input=e}async iterator(){return(await this.input.iterator()).decodeUTF8().split("\n").map(e=>(e.endsWith("\r")&&(e=e.slice(0,-1)),e))}},_T=Symbol("out"),CT=Symbol("field"),ST=Symbol("quote"),kT=Symbol("quoteafterquote"),ET=Symbol("quoteinquote"),TT=class extends mT{async columnNames(){return this.columnNamesValidated||await this.setColumnNames(),this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames}async setColumnNames(){let e=await this.maybeReadHeaderLine();if(!this.fullColumnNames&&!e)throw new Error("Column names must be provided if there is no header line.");this.fullColumnNames&&e&&Si.assert(e.length===this.fullColumnNames.length,()=>"The length of provided columnNames ("+this.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+e.length.toString()+")."),this.fullColumnNames||(this.fullColumnNames=e);let t=this.fullColumnNames.reduce((e,t)=>(e[t]=e[t]+1||1,e),{}),n=Object.keys(t).filter(e=>t[e]>1);if(Si.assert(0===n.length,()=>"Duplicate column names found: "+n.toString()),this.columnConfigs)for(let e of Object.keys(this.columnConfigs))if(-1===this.fullColumnNames.indexOf(e))throw new Error('The key "'+e+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").");this.columnNamesValidated=!0}async maybeReadHeaderLine(){if(this.hasHeader){let e=await(await this.base.iterator()).next();if(e.done)throw new Error("No data was found for CSV parsing.");let t=e.value;return this.parseRow(t,!1)}return null}constructor(e,t){super(),this.input=e,this.hasHeader=!0,this.fullColumnNames=null,this.columnNamesValidated=!1,this.columnConfigs=null,this.configuredColumnsOnly=!1,this.delimiter=",",this.delimWhitespace=!1,this.base=new wT(e),t||(t={}),this.hasHeader=!1!==t.hasHeader,this.fullColumnNames=t.columnNames,this.columnConfigs=t.columnConfigs,this.configuredColumnsOnly=t.configuredColumnsOnly,t.delimWhitespace?(Si.assert(null==t.delimiter,()=>"Delimiter should not be provided when delimWhitespace is true."),this.delimWhitespace=!0,this.delimiter=" "):this.delimiter=t.delimiter?t.delimiter:","}async iterator(){this.columnNamesValidated||await this.setColumnNames();let e=await this.base.iterator();return this.hasHeader&&(e=e.skip(1)),e.map(e=>this.makeDataElement(e))}makeDataElement(e){let t=this.parseRow(e),n={},r={};for(let i=0;i<this.fullColumnNames.length;i++){let o=this.fullColumnNames[i],a=this.columnConfigs?this.columnConfigs[o]:null;if(!this.configuredColumnsOnly||a){let s=t[i],l=null;if(""===s)if(a&&void 0!==a.default)l=a.default;else{if(a&&(a.required||a.isLabel))throw new Error(`Required column ${o} is empty in this line: ${e}`);l=void 0}else{let e=Number(s);if(isNaN(e))l=a&&"bool"===a.dtype?this.getBoolean(s):s;else if(a&&a.dtype)switch(a.dtype){case"float32":l=e;break;case"int32":l=Math.floor(e);break;case"bool":l=this.getBoolean(s);break;default:l=e}else l=e}a&&a.isLabel?r[o]=l:n[o]=l}}return 0===Object.keys(r).length?n:{xs:n,ys:r}}getBoolean(e){return"1"===e||"true"===e.toLowerCase()?1:0}parseRow(e,t=!0){let n=[],r=0,i=e.length,o=_T;for(let t=0;t<i;t++)switch(o){case _T:switch(e.charAt(t)){case'"':r=t+1,o=ST;break;case this.delimiter:if(r=t+1," "===this.delimiter&&this.delimWhitespace)break;n.push(""),o=_T;break;default:o=CT,r=t}break;case CT:switch(e.charAt(t)){case this.delimiter:n.push(e.substring(r,t)),o=_T,r=t+1}break;case ST:switch(e.charAt(t)){case'"':o=kT}break;case kT:switch(e.charAt(t)){case this.delimiter:n.push(e.substring(r,t-1)),o=_T,r=t+1;break;case'"':o=ST;break;default:o=ET}break;case ET:switch(e.charAt(t)){case'"':o=ST}}if(o===kT?n.push(e.substring(r,i-1)):n.push(e.substring(r)),t&&n.length!==this.fullColumnNames.length)throw new Error(`Invalid row in csv file. Should have ${this.fullColumnNames.length} elements in a row, but got ${n}`);return n}},IT=class extends YE{constructor(e){super(),this.microphoneConfig=e,this.isClosed=!1,this.fftSize=e.fftSize||1024;let t=Math.log2(this.fftSize);if(this.fftSize<0||t<4||t>14||!Number.isInteger(t))throw new Error("Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got "+this.fftSize);if(this.numFrames=e.numFramesPerSpectrogram||43,this.sampleRateHz=e.sampleRateHz,this.columnTruncateLength=e.columnTruncateLength||this.fftSize,this.audioTrackConstraints=e.audioTrackConstraints,this.smoothingTimeConstant=e.smoothingTimeConstant||0,this.includeSpectrogram=!1!==e.includeSpectrogram,this.includeWaveform=!0===e.includeWaveform,!this.includeSpectrogram&&!this.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.")}summary(){return"microphone"}static async create(e={}){if(!qe().get("IS_BROWSER"))throw new Error("microphone API is only supported in browser environment.");let t=new IT(e);return await t.start(),t}async start(){try{this.stream=await navigator.mediaDevices.getUserMedia({audio:null==this.audioTrackConstraints||this.audioTrackConstraints,video:!1})}catch(e){throw new Error("Error thrown while initializing video stream: "+e.message)}if(!this.stream)throw new Error("Could not obtain audio from microphone.");let e=window.AudioContext||window.webkitAudioContext;if(this.audioContext=new e,this.sampleRateHz){if(this.audioContext.sampleRate!==this.sampleRateHz)throw new Error(`Mismatch in sampling rate: Expected: ${this.sampleRateHz}; Actual: ${this.audioContext.sampleRate}`)}else this.sampleRateHz=this.audioContext.sampleRate;let t=this.audioContext.createMediaStreamSource(this.stream);this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,t.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize)}async next(){if(this.isClosed)return{value:null,done:!0};let e,t,n=await this.getAudioData();if(this.includeSpectrogram){let t=this.flattenQueue(n.freqDataQueue);e=this.getTensorFromAudioDataArray(t,[this.numFrames,this.columnTruncateLength,1])}if(this.includeWaveform){let e=this.flattenQueue(n.timeDataQueue);t=this.getTensorFromAudioDataArray(e,[this.numFrames*this.fftSize,1])}return{value:{spectrogram:e,waveform:t},done:!1}}async capture(){return(await this.next()).value}async getAudioData(){let e=[],t=[],n=0;return new Promise(r=>{let i=setInterval(()=>{this.includeSpectrogram&&(this.analyser.getFloatFrequencyData(this.freqData),this.freqData[0]===-1/0&&r({freqDataQueue:e,timeDataQueue:t}),e.push(this.freqData.slice(0,this.columnTruncateLength))),this.includeWaveform&&(this.analyser.getFloatTimeDomainData(this.timeData),t.push(this.timeData.slice())),++n===this.numFrames&&(clearInterval(i),r({freqDataQueue:e,timeDataQueue:t}))},this.fftSize/this.sampleRateHz*1e3)})}stop(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())}toArray(){throw new Error("Can not convert infinite audio stream to array.")}getSampleRate(){return this.sampleRateHz}flattenQueue(e){let t=e[0].length,n=new Float32Array(e.length*t);return e.forEach((e,r)=>n.set(e,r*t)),n}getTensorFromAudioDataArray(e,t){let n=new Float32Array(Si.sizeFromShape(t));return n.set(e,n.length-e.length),Bo(n,t)}},PT=class extends YE{constructor(e,t){if(super(),this.webcamVideoElement=e,this.webcamConfig=t,this.isClosed=!0,this.resize=!1,this.needToResize())if(this.resize=!0,this.cropSize=[this.webcamConfig.resizeHeight,this.webcamConfig.resizeWidth],this.cropBoxInd=Sp([0],"int32"),this.webcamConfig.centerCrop){let e=1*this.webcamConfig.resizeWidth/this.webcamVideoElement.width,t=1*this.webcamConfig.resizeHeight/this.webcamVideoElement.height,n=(1-e)/2,r=(1-t)/2,i=n+e,o=t+r;this.cropBox=kp([r,n,o,i],[1,4])}else this.cropBox=kp([0,0,1,1],[1,4])}summary(){return"webcam"}static async create(e,t={}){if(!qe().get("IS_BROWSER"))throw new Error("tf.data.webcam is only supported in browser environment.");if(!e){if(e=document.createElement("video"),!t.resizeWidth||!t.resizeHeight)throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");e.width=t.resizeWidth,e.height=t.resizeHeight}let n=new PT(e,t);return await n.start(),n}async start(){this.webcamConfig.facingMode&&Si.assert("user"===this.webcamConfig.facingMode||"environment"===this.webcamConfig.facingMode,()=>`Invalid webcam facing mode: ${this.webcamConfig.facingMode}. Please provide 'user' or 'environment'`);try{this.stream=await navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}})}catch(e){throw e.message="Error thrown while initializing video stream: "+e.message,e}if(!this.stream)throw new Error("Could not obtain video from webcam.");try{this.webcamVideoElement.srcObject=this.stream}catch(e){console.log(e),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,new Promise(e=>{this.webcamVideoElement.onloadedmetadata=()=>{e()}})}async next(){if(this.isClosed)return{value:null,done:!0};let e;try{e=Kh.fromPixels(this.webcamVideoElement)}catch(e){throw new Error("Error thrown converting video to pixels: "+JSON.stringify(e))}if(!this.resize)return{value:e,done:!1};try{return{value:this.cropAndResizeFrame(e),done:!1}}catch(e){throw new Error("Error thrown cropping the video: "+e.message)}finally{e.dispose()}}needToResize(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)}cropAndResizeFrame(e){return Xa(()=>{let t,n=su(ja(e,"float32"),0);t=uh.cropAndResize(n,this.cropBox,this.cropBoxInd,this.cropSize,"bilinear");let r=t.shape;return $s(t,r.slice(1))})}async capture(){return(await this.next()).value}stop(){this.stream.getTracks().forEach(e=>e.stop());try{this.webcamVideoElement.srcObject=null}catch(e){console.log(e),this.webcamVideoElement.src=null}this.isClosed=!0}toArray(){throw new Error("Can not convert infinite video stream to array.")}},OT=class{},NT=class extends YE{split(e){return new RT(this,e)}},RT=class extends NT{constructor(e,t){super(),this.upstream=e,this.impl=new AT(e,t)}summary(){return this.impl.summary()}async next(){return this.impl.next()}},AT=class extends uT{constructor(e,t){super(),this.upstream=e,this.separator=t,this.carryover=""}summary(){return`${this.upstream.summary()} -> Split('${this.separator}')`}async pump(){let e=await this.upstream.next();if(e.done)return""!==this.carryover&&(this.outputQueue.push(this.carryover),this.carryover="",!0);let t=e.value.split(this.separator);t[0]=this.carryover+t[0];for(let e of t.slice(0,-1))this.outputQueue.push(e);return this.carryover=t[t.length-1],!0}},DT=class extends YE{decodeUTF8(){return new VT(this)}},VT=class extends NT{constructor(e){super(),this.upstream=e,this.impl=new MT(e)}summary(){return this.impl.summary()}async next(){return this.impl.next()}},MT=class extends uT{constructor(e){if(super(),this.upstream=e,qe().get("IS_BROWSER"))this.decoder=new TextDecoder("utf-8");else{let{StringDecoder:e}=A();this.decoder=new e("utf8")}}summary(){return this.upstream.summary()+" -> Utf8"}async pump(){let e,t,n=await this.upstream.next();return!n.done&&(e=n.value,t=qe().get("IS_BROWSER")?this.decoder.decode(e,{stream:!0}):this.decoder.write(a.from(e.buffer)),this.outputQueue.push(t),!0)}},FT=class extends DT{constructor(e,t={}){super(),this.file=e,this.options=t,Si.assert(e instanceof Uint8Array||!!qe().get("IS_BROWSER")&&(e instanceof File||e instanceof Blob),()=>"FileChunkIterator only supports File, Blob and Uint8Array right now."),this.offset=t.offset||0,this.chunkSize=t.chunkSize||1048576}summary(){return"FileChunks "+this.file}async next(){return this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size)?{value:null,done:!0}:{value:await new Promise((e,t)=>{let n=this.offset+this.chunkSize;if(this.file instanceof Uint8Array)e(new Uint8Array(this.file.slice(this.offset,n)));else{let r=new FileReader;r.onload=n=>{let i=r.result;if(i instanceof ArrayBuffer&&(i=new Uint8Array(i)),!(i instanceof Uint8Array))return t(new TypeError("FileReader returned unknown type."));e(i)},r.onabort=e=>t(new Error("Aborted")),r.onerror=e=>t(new Error(e.type));let i=this.file.slice(this.offset,n);r.readAsArrayBuffer(i)}this.offset=n}),done:!1}}};var LT=e=>({method:e.method,headers:e.headers,body:e.body,mode:e.mode,credentials:e.credentials,cache:e.cache,redirect:e.redirect,referrer:e.referrer,integrity:e.integrity});function zT(e){return"string"==typeof e&&"file://"===e.slice(0,7)}var jT=class extends OT{constructor(e,t={}){super(),this.input=e,this.options=t}async iterator(){if(zT(this.input)&&qe().get("IS_NODE")){let e=D();this.input=e.readFileSync(this.input.slice(7))}return new FT(this.input,this.options)}},qT=class extends OT{constructor(e,t={}){super(),this.url=e,this.fileOptions=t}async iterator(){return zT(this.url)?new jT(this.url,this.fileOptions).iterator():async function(e,t={},n){let r,i;"string"==typeof e?r=e:(r=e.url,i=LT(e));let o=await(n||Si.fetch)(r,i);if(o.ok){let e=new Uint8Array(await o.arrayBuffer());return new FT(e,t)}throw new Error(o.statusText)}(this.url,this.fileOptions)}};function $T(e,t={}){return new TT(new qT(e),t)}function BT(e){let t=JE(e);return gT(async()=>t)}function UT(e){return gT(async()=>{let t=await e();return JE(()=>t.next())})}async function WT(e,t){return PT.create(e,t)}async function HT(e){return IT.create(e)}var QT="4.7.0";function GT(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{null!=e&&Si.assert("complex64"!==e.dtype,()=>t+" does not support complex64 tensors in the CPU backend.")})}var KT=Vm.whereImpl,JT=class extends B{nextDataId(){return JT.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new $(this,Ga())}write(e,t,n){this.firstUse&&(this.firstUse=!1,qe().get("IS_NODE")&&Rf.warn("\n============================\nHi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. \n============================"));let r={id:this.nextDataId()};return this.data.set(r,{values:e,dtype:n,refCount:1}),r}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&Si.isString(n[0])){let i=n.map(e=>Si.encodeString(e));r=this.write(i,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){this.data.get(e).refCount++}decRef(e){if(this.data.has(e)){this.data.get(e).refCount--}}move(e,t,n,r,i){this.data.set(e,{values:t,dtype:r,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){let{dtype:t,complexTensorInfos:n}=this.data.get(e);if("complex64"===t){let e=this.readSync(n.real.dataId),t=this.readSync(n.imag.dataId);return Rf.mergeRealAndImagArrays(e,t)}return Si.convertBackendValuesAndArrayBuffer(this.data.get(e).values,t)}bufferSync(e){let t=this.readSync(e.dataId);if("string"===e.dtype)try{let n=t.map(e=>Si.decodeString(e));return za(e.shape,e.dtype,n)}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return za(e.shape,e.dtype,t)}makeOutput(e,t,n){return Ga().makeTensorFromTensorInfo(this.makeTensorInfo(t,n,e),this)}disposeData(e,t=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!t&&this.data.get(e).refCount>0)return!1;let{complexTensorInfos:n}=this.data.get(e);null!=n&&(this.disposeData(n.real.dataId,!0),this.disposeData(n.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){let t=Si.now();return e(),{kernelMs:Si.now()-t}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){GT([e],"where");let t=this.readSync(e.dataId);return KT(e.shape,t)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}};JT.nextDataId=0;var XT={};function YT(e){let t=new Float32Array(e.length);for(let n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}b(XT,{addImpl:()=>hI,bincountImpl:()=>yI,bincountReduceImpl:()=>vI,bitwiseAndImpl:()=>bI,castImpl:()=>lI,ceilImpl:()=>kI,concatImpl:()=>II,equalImpl:()=>PI,expImpl:()=>RI,expm1Impl:()=>VI,floorDivImpl:()=>qI,floorImpl:()=>LI,gatherNdImpl:()=>UI,gatherV2Impl:()=>WI,greaterEqualImpl:()=>KI,greaterImpl:()=>HI,lessEqualImpl:()=>tP,lessImpl:()=>YI,linSpaceImpl:()=>iP,logImpl:()=>oP,maxImpl:()=>lP,maximumImpl:()=>uP,minimumImpl:()=>dP,multiplyImpl:()=>mP,negImpl:()=>bP,notEqualImpl:()=>wP,prodImpl:()=>TP,raggedGatherImpl:()=>RP,raggedRangeImpl:()=>DP,raggedTensorToTensorImpl:()=>zP,rangeImpl:()=>jP,rsqrtImpl:()=>qP,scatterImpl:()=>UP,sigmoidImpl:()=>WP,simpleAbsImpl:()=>YT,sliceImpl:()=>GP,sparseFillEmptyRowsImpl:()=>XP,sparseReshapeImpl:()=>YP,sparseSegmentReductionImpl:()=>ZP,sqrtImpl:()=>eO,squaredDifferenceImpl:()=>rO,staticRegexReplaceImpl:()=>aO,stridedSliceImpl:()=>uO,stringNGramsImpl:()=>cO,stringSplitImpl:()=>dO,stringToHashBucketFastImpl:()=>hO,subImpl:()=>fO,tileImpl:()=>vO,topKImpl:()=>wO,transposeImpl:()=>SP,uniqueImpl:()=>_O});var ZT={kernelName:He,backendName:"cpu",kernelFunc:e=>{let{x:t}=e.inputs,n=e.backend;GT(t,"abs");let r=new Float32Array(Si.sizeFromShape(t.shape));return r=YT(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,t.dtype)}};function eI(e){return(t,n,r,i,o)=>{let a=Rf.assertAndGetBroadcastShape(t,n),s=a.length,l=Si.computeStrides(a),u=Si.sizeFromShape(a),c=Si.getTypedArrayFromDType(o,u),p=t.length,d=n.length,h=Si.computeStrides(t),f=Si.computeStrides(n),m=Rf.getBroadcastDims(t,a),g=Rf.getBroadcastDims(n,a);if(m.length+g.length===0)for(let t=0;t<c.length;++t)c[t]=e(r[t%r.length],i[t%i.length]);else for(let t=0;t<c.length;++t){let n=Si.indexToLoc(t,s,l),o=n.slice(-p);m.forEach(e=>o[e]=0);let a=Si.locToIndex(o,p,h),u=n.slice(-d);g.forEach(e=>u[e]=0);let y=Si.locToIndex(u,d,f);c[t]=e(r[a],i[y])}return[c,a]}}function tI(e){let{inputs:t,backend:n}=e,{real:r,imag:i}=t,o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",o),imag:n.makeTensorInfo(i.shape,"float32",a)},s}var nI={kernelName:bt,backendName:"cpu",kernelFunc:tI};function rI(e,t,n="float32"){if("complex64"===n){return tI({inputs:{real:rI(e,t,"float32"),imag:rI(e,t,"float32")},backend:e})}let r=Si.makeZerosTypedArray(Si.sizeFromShape(t),n);return e.makeTensorInfo(t,n,r)}function iI(e){let{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var oI={kernelName:un,backendName:"cpu",kernelFunc:iI};function aI(e){let{inputs:t,backend:n}=e,{input:r}=t,i=n.data.get(r.dataId).complexTensorInfos.real,o=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,o)}var sI={kernelName:sr,backendName:"cpu",kernelFunc:aI};function lI(e,t,n,r){if("int32"===r){return[t,"int32",Int32Array.from(e)]}if("bool"===r){let r=Si.toTypedArray([0],n),[i,o]=eI((e,t)=>e!==t?1:0)(t,[],e,r,"bool");return[o,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function uI(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dtype:o}=r;if("complex64"===o){if("complex64"===i.dtype)return iI({inputs:{x:i},backend:n});let e=rI(n,i.shape,i.dtype),t=uI({inputs:{x:i},backend:n,attrs:{dtype:"float32"}}),r=tI({inputs:{real:t,imag:e},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),r}if("complex64"===i.dtype){let e=aI({inputs:{input:i},backend:n}),t=uI({inputs:{x:e},backend:n,attrs:{dtype:o}});return n.disposeIntermediateTensorInfo(e),t}if(!Si.hasEncodingLoss(i.dtype,o)){let e=iI({inputs:{x:i},backend:n});return{dataId:e.dataId,shape:e.shape,dtype:o}}let a=n.data.get(i.dataId).values,[s,l,u]=lI(a,i.shape,i.dtype,o);return n.makeTensorInfo(s,l,u)}var cI={kernelName:gt,backendName:"cpu",kernelFunc:uI};function pI(e,t,n,r){return null==n?({inputs:n,backend:i})=>{let{a:o,b:a}=n,s=i;GT([o,a],e);let l=s.data.get(o.dataId).values,u=s.data.get(a.dataId).values,c="string"===o.dtype?Rf.fromUint8ToStringArray(l):l,p="string"===o.dtype?Rf.fromUint8ToStringArray(u):u,d=r||o.dtype,[h,f]=t(o.shape,a.shape,c,p,d);return s.makeTensorInfo(f,d,h)}:({inputs:e,backend:i})=>{let{a:o,b:a}=e,s=i;if("complex64"===o.dtype||"complex64"===a.dtype){let e=uI({inputs:{x:o},backend:s,attrs:{dtype:"complex64"}}),t=s.data.get(e.dataId),r=t.complexTensorInfos.real,i=t.complexTensorInfos.imag,l=s.data.get(r.dataId).values,u=s.data.get(i.dataId).values,c=uI({inputs:{x:a},backend:s,attrs:{dtype:"complex64"}}),p=s.data.get(c.dataId),d=p.complexTensorInfos.real,h=p.complexTensorInfos.imag,f=s.data.get(d.dataId).values,m=s.data.get(h.dataId).values,[g,y,v]=n(o.shape,a.shape,l,u,f,m),b=s.makeTensorInfo(v,"float32",g),x=s.makeTensorInfo(v,"float32",y),w=tI({inputs:{real:b,imag:x},backend:s});return s.disposeIntermediateTensorInfo(e),s.disposeIntermediateTensorInfo(c),s.disposeIntermediateTensorInfo(b),s.disposeIntermediateTensorInfo(x),w}{let e=s.data.get(o.dataId).values,n=s.data.get(a.dataId).values,i=r||o.dtype,[l,u]=t(o.shape,a.shape,e,n,i);return s.makeTensorInfo(u,i,l)}}}function dI(e){return(t,n,r,i,o,a)=>{let s=Rf.assertAndGetBroadcastShape(t,n),l=Si.sizeFromShape(s),u=s.length,c=Si.computeStrides(s),p=Si.getTypedArrayFromDType("float32",l),d=Si.getTypedArrayFromDType("float32",l),h=Rf.getBroadcastDims(t,s),f=Rf.getBroadcastDims(n,s),m=Rf.mergeRealAndImagArrays(r,i),g=Rf.mergeRealAndImagArrays(o,a),y=t.length,v=Si.computeStrides(t),b=n.length,x=Si.computeStrides(n);if(h.length+f.length===0)for(let t=0;t<p.length;t++){let n=t%m.length,r=t%g.length,i=e(m[2*n],m[2*n+1],g[2*r],g[2*r+1]);p[t]=i.real,d[t]=i.imag}else for(let t=0;t<p.length;t++){let n=Si.indexToLoc(t,u,c),r=n.slice(-y);h.forEach(e=>r[e]=0);let i=Si.locToIndex(r,y,v),o=n.slice(-b);f.forEach(e=>o[e]=0);let a=Si.locToIndex(o,b,x),s=e(m[2*i],m[2*i+1],g[2*a],g[2*a+1]);p[t]=s.real,d[t]=s.imag}return[p,d,s]}}var hI=eI((e,t)=>e+t),fI=dI((e,t,n,r)=>({real:e+n,imag:t+r})),mI=pI(Ke,hI,fI),gI={kernelName:Ke,backendName:"cpu",kernelFunc:mI};function yI(e,t,n,r,i){let o=Si.sizeFromShape(r),a=Si.makeZerosTypedArray(i,n);for(let n=0;n<e.length;n++){let r=e[n];if(r<0)throw new Error("Input x must be non-negative!");r>=i||(a[r]+=o>0?t[n]:1)}return a}function vI(e,t,n,r=!1){let i=e.shape[0],o=e.shape[1],a=za([i,n],t.dtype);for(let s=0;s<i;s++)for(let i=0;i<o;i++){let o=e.get(s,i);if(o<0)throw new Error("Input x must be non-negative!");o>=n||(r?a.set(1,s,o):t.size>0?a.set(a.get(s,o)+t.get(s,i),s,o):a.set(a.get(s,o)+1,s,o))}return a}var bI=eI((e,t)=>e&t),xI=pI(ht,bI),wI={kernelName:ht,backendName:"cpu",kernelFunc:xI};function _I(e){return(t,n,r)=>{let i=Si.getArrayFromDType(n,t.length);for(let n=0;n<t.length;++n)i[n]=e(t[n],r);return i}}function CI(e,t,n){return SI(e,_I(t),n)}function SI(e,t,n){return({inputs:r,attrs:i,backend:o})=>{let{x:a}=r;GT(a,e);let s,l=o,u=l.data.get(a.dataId).values;if("string"===a.dtype){if(!Array.isArray(u))throw new Error("String tensor's value was not an instance of Array");s=Rf.fromUint8ToStringArray(u)}else s=u;let c=n||a.dtype,p=t(s,c,i);return l.makeTensorInfo(a.shape,c,p)}}var kI=_I(e=>Math.ceil(e)),EI=SI(yt,kI),TI={kernelName:yt,backendName:"cpu",kernelFunc:EI};function II(e,t,n,r){let i=Si.getArrayFromDType(n,Si.sizeFromShape(t));if(r&&"string"!==n){let t=0;e.forEach(e=>{let n=Si.sizeFromShape(e.shape);i.set(e.vals,t),t+=n})}else{let r=0;e.forEach(e=>{let o="string"===n?Rf.fromUint8ToStringArray(e.vals):e.vals,a=0;for(let n=0;n<e.shape[0];++n){let s=n*t[1]+r;for(let t=0;t<e.shape[1];++t)i[s+t]=o[a++]}r+=e.shape[1]})}return i}var PI=eI((e,t)=>e===t?1:0),OI=pI(Gt,PI,null,"bool"),NI={kernelName:Gt,backendName:"cpu",kernelFunc:OI},RI=_I(e=>Math.exp(e)),AI=SI(Kt,RI,"float32"),DI={kernelName:Kt,backendName:"cpu",kernelFunc:AI},VI=_I(e=>Math.expm1(e)),MI=SI(Xt,VI),FI={kernelName:Xt,backendName:"cpu",kernelFunc:MI},LI=_I(e=>Math.floor(e)),zI=SI(tn,LI),jI={kernelName:tn,backendName:"cpu",kernelFunc:zI},qI=eI((e,t)=>Math.floor(e/t)),$I=pI(nn,qI,null,"int32"),BI={kernelName:nn,backendName:"cpu",kernelFunc:$I};function UI(e,t,n,r,i,o,a,s,l){let u=za([r,o],n);for(let n=0;n<r;n++){let r=[],c=0;for(let t=0;t<i;t++){let o=e[n*i+t];c+=o*a[t],r.push(o)}if(c<0||c>=l/o)throw new Error(`Invalid indices: ${r} does not index into ${s}`);for(let e=0;e<o;e++)u.values[n*o+e]=t.get(...t.indexToLoc(c*o+e))}return u}function WI(e,t,n){let r=za(n,e.dtype);for(let n=0;n<r.size;++n){let i=r.indexToLoc(n).slice(),o=i[0],a=i[2],s=t.locToIndex([o,a]);i[2]=t.values[s];let l=e.locToIndex(i);0<=l&&l<e.values.length&&(r.values[n]=e.values[l])}return r}var HI=eI((e,t)=>e>t?1:0),QI=pI(sn,HI,null,"bool"),GI={kernelName:sn,backendName:"cpu",kernelFunc:QI},KI=eI((e,t)=>e>=t?1:0),JI=pI(ln,KI,null,"bool"),XI={kernelName:ln,backendName:"cpu",kernelFunc:JI},YI=eI((e,t)=>e<t?1:0),ZI=pI(gn,YI,null,"bool"),eP={kernelName:gn,backendName:"cpu",kernelFunc:ZI},tP=eI((e,t)=>e<=t?1:0),nP=pI(yn,tP,null,"bool"),rP={kernelName:yn,backendName:"cpu",kernelFunc:nP};function iP(e,t,n){let r=(t-e)/(n-1),i=Si.makeZerosTypedArray(n,"float32");i[0]=e;for(let e=1;e<i.length;e++)i[e]=i[e-1]+r;return i}var oP=_I(e=>Math.log(e)),aP=SI(bn,oP),sP={kernelName:bn,backendName:"cpu",kernelFunc:aP};function lP(e,t,n,r){let i=Si.getTypedArrayFromDType(r,Si.sizeFromShape(n));for(let n=0;n<i.length;++n){let r=n*t,o=e[r];for(let n=0;n<t;++n){let t=e[r+n];(Number.isNaN(t)||t>o)&&(o=t)}i[n]=o}return i}var uP=eI((e,t)=>Math.max(e,t)),cP=pI(Nn,uP),pP={kernelName:Nn,backendName:"cpu",kernelFunc:cP},dP=eI((e,t)=>Math.min(e,t)),hP=pI(zn,dP),fP={kernelName:zn,backendName:"cpu",kernelFunc:hP},mP=eI((e,t)=>e*t),gP=dI((e,t,n,r)=>({real:e*n-t*r,imag:e*r+t*n})),yP=pI(Bn,mP,gP),vP={kernelName:Bn,backendName:"cpu",kernelFunc:yP};function bP(e,t,n){let r=Si.createScalarValue(-1,n);return mP([],t,r,e,n)}var xP={kernelName:Un,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{x:r}=t;GT(r,"neg");let i=n.data.get(r.dataId).values,[o,a]=bP(i,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,o)}},wP=eI((e,t)=>e!==t?1:0),_P=pI(Wn,wP,null,"bool"),CP={kernelName:Wn,backendName:"cpu",kernelFunc:_P};function SP(e,t,n,r,i){let o=t.length,a=Si.sizeFromShape(t),s=Si.computeStrides(t),l=Si.computeStrides(i),u=Si.getTypedArrayFromDType(n,Si.sizeFromShape(i));for(let t=0;t<a;++t){let n=Si.indexToLoc(t,o,s),i=new Array(n.length);for(let e=0;e<i.length;e++)i[e]=n[r[e]];u[Si.locToIndex(i,o,l)]=e[t]}return u}function kP(e){let{inputs:t,attrs:n,backend:r}=e,{x:i}=t,{perm:o}=n;GT(i,"transpose");let a=i.shape.length,s=new Array(a);for(let e=0;e<s.length;e++)s[e]=i.shape[o[e]];let l=SP(r.data.get(i.dataId).values,i.shape,i.dtype,o,s);return{dataId:r.write(l,s,i.dtype),shape:s,dtype:i.dtype}}var EP={kernelName:Zr,backendName:"cpu",kernelFunc:kP};function TP(e,t,n,r){let[i,o]=Rf.computeOutAndReduceShapes(e,r),a=mo(t,"int32"),s=Si.makeZerosTypedArray(Si.sizeFromShape(i),a),l=Si.sizeFromShape(o);for(let e=0;e<s.length;++e){let t=e*l,r=1;for(let e=0;e<l;++e)r*=n[t+e];s[e]=r}return{outVals:s,outShape:i,outDtype:a}}var IP={kernelName:nr,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r;GT(i,"prod");let s=i.shape.length,l=Si.parseAxisParam(o,i.shape),u=Rf.getAxesPermutation(l,s),c=l,p=i,d=[];null!=u&&(p=kP({inputs:{x:i},backend:n,attrs:{perm:u}}),d.push(p),c=Rf.getInnerMostAxes(c.length,s));let h=n.data.get(p.dataId).values,{outVals:f,outShape:m,outDtype:g}=TP(p.shape,p.dtype,h,c),y=m;return a&&(y=Rf.expandShapeToKeepDim(m,l)),d.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(y,g,f)}};function PP(e,t,n,r){let i=[],o=0,a=t.length-1+n.length,s=new Array(a).fill(null).map(()=>[0]);!function(e,t){for(let n=0;n<e.length;++n){let r=e[n],i=n===e.length-1?t:e[n+1].length;if(0===r.length)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>i)throw new Error("Ragged splits must not point past values");for(let e=1;e<r.length;++e)if(r[e-1]>r[e])throw new Error("Ragged splits must be sorted in ascending order")}}(n,r);let l=1;for(let e=0;e<t.length-1;++e){l*=t[e];let n=t[e+1];for(let t=1;t<l+1;++t)s[e].push(t*n)}for(let r=0;r<e.length;++r){let a=e[r],l=e[r]+1;for(let e=0;e<n.length;++e){let r=n[e],i=e+t.length-1;if(i>=0){let e=s[i],t=e[e.length-1]-r[a];for(let e=a;e<l;++e)s[i].push(r[e+1]+t)}a=r[a],l=r[l]}l!==a&&(i.push([a,l]),o+=l-a)}return{outSplits:s,valueSlices:i,numValues:o}}function OP(e,t){let n=e.slice(0,t);for(;n.length<t;)n.push(1);for(let r=t;r<e.length;r++)n[t-1]*=e[r];return n}function NP(e,t,n,r,i){let o=t.slice();o[0]=i;let a=Si.getArrayFromDType(n,Si.sizeFromShape(o)),s=e.length;return function(e,t,n,r,i,o){let a=OP(t,2)[1],s=OP(o,2)[1],l=0;for(let t of n)for(let n=t[0];n<t[1];++n){for(let t=0;t<r;++t)i[l*s+t]=e[n*a+t];++l}}(e,t,r,0===s?0:s/t[0],a,o),[a,o]}function RP(e,t,n,r,i,o,a,s){if(0===e.length)throw new Error("paramsNestedSplits must be non empty");if(0===t[0].length)throw new Error("Split tensors must not be scalars");if(function(e,t,n){e.forEach((e,r)=>{if(e<0||e>=n){let i=Si.indexToLoc(r,t.length,Si.computeStrides(t)).join(",");throw new Error(`indices[${i}] = ${e} is not in [0, ${n})`)}})}(o,a,t[0][0]-1),0===r.length)throw new Error("params.rank must be nonzero");let l=r[0],{outSplits:u,valueSlices:c,numValues:p}=PP(o,a,e,l),d=function(e){let t=[];for(let n=0;n<e.length;++n){let r=e[n].length,i=Si.getArrayFromDType("int32",r);t.push(i),e[n].forEach((e,t)=>i[t]=e)}return t}(u),h=NP(n,r,i,c,p);return[d,h[0],h[1]]}var AP=2147483647;function DP(e,t,n,r,i,o,a){if(t.length>1)throw new Error("starts must be a scalar or vector");if(i.length>1)throw new Error("limits must be a scalar or vector");if(a.length>1)throw new Error("deltas must be a scalar or vector");let s=0===t.length,l=0===i.length,u=0===a.length,c=[];s||c.push(t[0]),l||c.push(i[0]),u||c.push(a[0]);for(let e=1;e<c.length;++e)if(c[e]!==c[e-1])throw new Error("starts, limits, and deltas must have the same shape");let p=0===c.length?1:c[0],d=Si.getArrayFromDType("int32",p+1);d[0]=0;for(let t=0;t<p;++t){let n,i=s?e[0]:e[t],a=l?r[0]:r[t],c=u?o[0]:o[t];if(0===c)throw new Error("Requires delta != 0");if(c>0&&a<i||c<0&&a>i)n=0;else if(n=Math.ceil(Math.abs((a-i)/c)),n>AP)throw new Error("Requires ((limit - start) / delta) <= "+AP);d[t+1]=d[t]+n}let h=d[p],f=Si.getArrayFromDType(n,h),m=0;for(let t=0;t<p;++t){let n=d[t+1]-d[t],r=s?e[0]:e[t],i=u?o[0]:o[t];for(let e=0;e<n;++e)f[m++]=r,r+=i}return[d,f]}var VP=Rf.RowPartitionType,MP=class{constructor(e,t,n,r,i,o,a,s,l,u){this.shape=e,this.shapeShape=t,this.values=n,this.valuesShape=r,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=a,this.rowPartitionValues=s,this.rowPartitionValuesShapes=l,this.rowPartitionTypes=Rf.getRowPartitionTypesHelper(u),this.raggedRank=Rf.getRaggedRank(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===VP.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===VP.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){let t=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case VP.VALUE_ROWIDS:return MP.getMaxWidthValueRowID(t);case VP.ROW_SPLITS:return MP.getMaxWidthRowSplit(t);default:throw new Error("Cannot handle partition type "+VP[this.getRowPartitionTypeByDimension(e-1)])}}static getMaxWidthRowSplit(e){let t=e.length;if(0===t||1===t)return 0;let n=0;for(let r=0;r<t-1;++r){let t=e[r+1]-e[r];t>n&&(n=t)}return n}static getMaxWidthValueRowID(e){let t=e.length;if(0===t)return 0;let n=0,r=e[0],i=0;for(let o=1;o<t;++o){let t=e[o];t!==r&&(r=t,i=Math.max(o-n,i),n=o)}return Math.max(t-n,i)}tensorShapeFromTensor(e,t,n=!0){if(0===t.length){if(-1===e[0])return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return LP(e,n)}calculateOutputSize(e){let t=this.valuesShape,n=this.defaultValueShape;Rf.validateDefaultValueShape(n,t);let r=this.tensorShapeFromTensor(this.shape,this.shapeShape),i=Rf.combineRaggedTensorToTensorShapes(this.raggedRank,r,t);i[0]<0&&(i[0]=e);for(let e=1;e<=this.raggedRank;++e)i[e]<0&&(i[e]=this.getMaxWidth(e));return i}calculateFirstParentOutputIndex(e,t,n){let r=Math.min(e,n),i=[],o=0;for(let e=0;e<r;++e,o+=t)i.push(o);for(let t=r;t<e;++t)i.push(-1);return Si.assert(i.length===e,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(e,t,n,r){let i=e.length,o=[];for(let a=0;a<i-1;++a){let i=e[a+1]-e[a],s=Math.min(r,i),l=t[a];-1===l&&(s=0);for(let e=0;e<s;++e)o.push(l),l+=n;for(let e=0;e<i-s;++e)o.push(-1)}if(i>0&&o.length!==e[i-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,t,n,r){let i=e.length,o=[];if(0===i)return[];let a=0,s=e[0];if(s>=t.length)throw new Error(`Got currentValueRowId=${s}, which is not less than ${t.length}`);let l=t[s];o.push(l);for(let u=1;u<i;++u){let i=e[u];if(i===s)l>=0&&(++a,a<r?l+=n:l=-1);else{if(a=0,s=i,i>=t.length)throw new Error(`Got nextValueRowId=${i} which is not less than ${t.length}`);l=t[i]}o.push(l)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,t,n,r){let i=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case VP.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,t,n,r);case VP.ROW_SPLITS:if(i.length-1>t.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${t.length}`);return this.calculateOutputIndexRowSplit(i,t,n,r);default:throw new Error("Unsupported partition type: "+VP[o])}}getFirstDimensionSize(){let e=this.rowPartitionValues[0];if(0===this.rowPartitionTypes.length)throw new Error("No row_partition_types given.");let t=this.rowPartitionTypes[0];switch(t){case VP.FIRST_DIM_SIZE:return e[0];case VP.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case VP.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error("Cannot handle type "+VP[t])}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");let e=this.getFirstDimensionSize(),t=this.calculateOutputSize(e),n=new Array(this.raggedRank+1);n[n.length-1]=1;for(let e=n.length-2;e>=0;--e)n[e]=n[e+1]*t[e+1];let r=LP(t,!1),i=Si.getArrayFromDType(this.valuesDType,Si.sizeFromShape(r));if(n[0]*t[0]>0){let o=this.calculateFirstParentOutputIndex(e,n[0],t[0]);for(let e=1;e<=this.raggedRank;++e)o=this.calculateOutputIndex(e-1,o,n[e],t[e]);this.setOutput(this.raggedRank,o,i,r)}return[r,i]}setOutput(e,t,n,r){if(0===n.length)return;let i=this.values,o=n,a=r.slice();a=a.slice(e+1);let s=Si.sizeFromShape(a),l=t.length,u=this.defaultValue;if(u.length!==s&&1!==u.length){let e=this.defaultValueShape;Xa(()=>{let t=$s(u,e);u=al(t,a).dataSync()})}let c=0,p=0,d=0;for(let e=0;e<=l;++e){let r=e<l?t[e]:-1;if(r!==d){if(p<d){let e=i.subarray(c*s);FP(o.subarray(p*s),e,(d-p)*s)}if(e>=l){let e=n.length;r=Math.floor(e/s)}if(r>d)if(1===this.defaultValue.length)o.subarray(d*s,r*s).fill(this.defaultValue[0]),d=r;else for(;r>d;){FP(o.slice(d*s),u,s),++d}r<0?(c=e+1,p=d):(c=e,p=d,d=p+1)}else++d}}};function FP(e,t,n){for(let r=0;r<n;r++)e[r]=t[r]}function LP(e,t){let n=[];for(let r of e){if(r<0){if(!t)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function zP(e,t,n,r,i,o,a,s,l,u){return new MP(e,t,n,r,i,o,a,s,l,u).compute()}function jP(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return Si.makeZerosTypedArray(0,r);let i=Math.abs(Math.ceil((t-e)/n)),o=Si.makeZerosTypedArray(i,r);t<e&&1===n&&(n=-1),o[0]=e;for(let e=1;e<o.length;e++)o[e]=o[e-1]+n;return o}var qP=_I(e=>1/Math.sqrt(e)),$P=SI(vr,qP),BP={kernelName:vr,backendName:"cpu",kernelFunc:$P};function UP(e,t,n,r,i,o,a,s,l,u){let c=[r/i,i],p=e.values,d=t.values;if(0===r)return za(n,t.dtype);let h=l instanceof eo?l:za(c,t.dtype);"string"==typeof l||"number"==typeof l?h.values.fill(l):"boolean"==typeof l&&h.values.fill(+l);for(let e=0;e<o;e++){let o=[],l=0;for(let t=0;t<a;t++){let n=p[e*a+t];o.push(n),l+=n*s[t]}if(l<0||l>=r/i)throw new Error(`Invalid indices: ${o} does not index into ${n}`);for(let n=0;n<i;n++)u?h.values[l*i+n]+=d[e*i+n]:h.values[l*i+n]=0===t.rank?d[0]:d[e*i+n]}return h}var WP=_I(e=>1/(1+Math.exp(-e))),HP=CI(Ir,e=>1/(1+Math.exp(-e))),QP={kernelName:Ir,backendName:"cpu",kernelFunc:HP};function GP(e,t,n,r,i){let o=lf.isSliceContinous(r,t,n),a=Si.sizeFromShape(n),s=Si.computeStrides(r);if(o){let n=lf.computeFlatOffset(t,s);return"string"===i?e.slice(n,n+a):e.subarray(n,n+a)}let l=za(r,i,"string"===i?Rf.fromUint8ToStringArray(e):e),u=za(n,i);for(let e=0;e<u.size;++e){let n=u.indexToLoc(e),r=n.map((e,n)=>e+t[n]);u.set(l.get(...r),...n)}return"string"===i?Rf.fromStringArrayToUint8(u.values):u.values}function KP(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:o,size:a}=r;GT(i,"slice");let[s,l]=lf.parseSliceParams(i,o,a);lf.assertParamsValid(i,s,l);let u=GP(n.data.get(i.dataId).values,s,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,u)}var JP={kernelName:Sr,backendName:"cpu",kernelFunc:KP};function XP(e,t,n,r,i,o,a){let s=t[0],l=o[0],u=new Array(l),c=new Array(s),p=t[1];if(0===l){if(0!==s)throw new Error(Rf.getSparseFillEmptyRowsIndicesDenseShapeMismatch(s));return[Si.getArrayFromDType(n,0),[0,p],Si.getArrayFromDType(i,0),u,c]}let d=!0,h=0,f=new Array(l).fill(0);for(let t=0;t<s;++t){let n=e[t*p];if(n<0)throw new Error(Rf.getSparseFillEmptyRowsNegativeIndexErrorMessage(t,n));if(n>=l)throw new Error(Rf.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(t,n,l));++f[n],d=d&&n>=h,h=n}let m=!0;for(let e=0;e<l;++e){let t=0===f[e];u[e]=t,m=m&&!t,f[e]=Math.max(f[e],1),e>0&&(f[e]+=f[e-1])}if(m&&d){let t=e,n=r;for(let e=0;e<s;++e)c[e]=e;return[t,[s,p],n,u,c]}{let t=f[l-1],o=Si.getArrayFromDType(n,t*p),d=Si.getArrayFromDType(i,t),h=new Array(l).fill(0);for(let t=0;t<s;++t){let n=e[t*p],i=h[n],a=(0===n?0:f[n-1])+i;h[n]++;for(let n=0;n<p;++n)o[a*p+n]=e[t*p+n];d[a]=r[t],c[t]=a}for(let e=0;e<l;++e)if(0===h[e]){let t=0===e?0:f[e-1];o[t*p+0]=e;for(let e=1;e<p;++e)o[t*p+e]=0;d[t]=a}return[o,[t,p],d,u,c]}}function YP(e,t,n,r,i){let o=Si.sizeFromShape(r),a=t[0],s=i.length,l=[],u=1,c=-1;for(let e=0;e<s;++e){let t=i[e];if(-1===t){if(-1!==c)throw new Error(Rf.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(c,e));c=e,l.push(1)}else{if(t<0)throw new Error(Rf.getSparseReshapeNegativeOutputDimErrorMessage(e,t));u*=t,l.push(t)}}if(-1!==c){if(u<=0)throw new Error(Rf.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage());let e=Math.trunc(o/u);if(u*e!==o)throw new Error(Rf.getSparseReshapeInputOutputMultipleErrorMessage(r,l));l[c]=e}if(Si.sizeFromShape(l)!==o)throw new Error(Rf.getSparseReshapeInputOutputMismatchErrorMessage(r,l));let p=r.length,d=[];if(p>0){d[p-1]=1;for(let e=p-2;e>=0;--e)d[e]=d[e+1]*r[e+1]}let h=[];if(s>0){h[s-1]=1;for(let e=s-2;e>=0;--e)h[e]=h[e+1]*l[e+1]}let f=Si.getArrayFromDType(n,a*s);for(let t=0;t<a;++t){let n=0;for(let r=0;r<p;++r)n+=e[t*p+r]*d[r];for(let e=0;e<s;++e)f[t*s+e]=Math.trunc(n/h[e]),n%=h[e]}return[f,[a,s],l]}function ZP(e,t,n,r,i,o=!1,a=0){let s=r.length,l=[t[0],e.length/t[0]],u=l[1],c=s>0?i[s-1]+1:0;if(c<0)throw new Error(Rf.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let p=t.slice();p[0]=c;let d=p.reduce((e,t)=>e*t,1),h=Si.getArrayFromDType(n,d);if(0===s)return c>0&&h.fill(a),[h,p];if(c<=0)throw new Error(Rf.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let f=0,m=1,g=0,y=i[f];for(;;){let t=0;if(m<s){if(t=i[m],y===t){++m;continue}if(y>=t)throw new Error(Rf.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage())}if(y<0||y>=c)throw new Error(Rf.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(y,c));y>g&&h.fill(a,g*u,y*u);for(let t=f;t<m;++t){let n=r[t];if(n<0||n>=l[0])throw new Error(Rf.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(t,r[t],l[0]));for(let t=0;t<u;t++)h[y*u+t]+=e[n*u+t]}if(o)for(let e=0;e<u;e++)h[y*u+e]/=m-f;if(f=m,++m,g=y+1,y=t,m>s)break}return g<c&&h.fill(a,g*u,c*u),[h,p]}var eO=_I(e=>Math.sqrt(e)),tO=CI(Or,e=>Math.sqrt(e)),nO={kernelName:Or,backendName:"cpu",kernelFunc:tO},rO=eI((e,t)=>{let n=e-t;return n*n}),iO=pI(jr,rO),oO={kernelName:jr,backendName:"cpu",kernelFunc:iO},aO=_I((e,t)=>{let{pattern:n,replaceGlobal:r,rewrite:i}=t;return e.replace(new RegExp(n,r?"g":""),i)}),sO=SI($r,aO),lO={kernelName:$r,backendName:"cpu",kernelFunc:sO};function uO(e,t,n,r){let i=za(e,t.dtype);for(let e=0;e<i.size;e++){let o=i.indexToLoc(e),a=new Array(o.length);for(let e=0;e<a.length;e++)a[e]=o[e]*n[e]+r[e];i.set(t.get(...a),...o)}return i}function cO(e,t,n,r,i,o,a,s){return new class{constructor(e,t,n,r,i,o){this.separator=Si.encodeString(e),this.nGramWidths=t,this.leftPad=Si.encodeString(n),this.rightPad=Si.encodeString(r),this.padWidth=i,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,t){let n=this.getPadWidth(t);return Math.max(0,e+2*n-t+1)}createNGrams(e,t,n,r,i,o){for(let a=0;a<i;++a){let s=this.getPadWidth(o),l=Math.max(0,s-a),u=Math.max(0,s-(i-(a+1))),c=o-(l+u),p=t+(l>0?0:a-s),d=0;d+=l*this.leftPad.length;for(let t=0;t<c;++t)d+=e[p+t].length;d+=u*this.rightPad.length,d+=(l+u+c-1)*this.separator.length,n[r+a]=new Uint8Array(d);let h=n[r+a],f=0,m=e=>e.forEach(e=>h[f++]=e);for(let e=0;e<l;++e)m(this.leftPad),m(this.separator);for(let t=0;t<c-1;++t)m(e[p+t]),m(this.separator);if(c>0){m(e[p+c-1]);for(let e=0;e<u;++e)m(this.separator),m(this.rightPad)}else{for(let e=0;e<u-1;++e)m(this.rightPad),m(this.separator);m(this.rightPad)}}}compute(e,t){let n=e.length,r=t.length;if(r>0){let e=t[0];if(0!==e)throw new Error("First split value must be 0, got "+e);for(let i=1;i<r;++i){let r=t[i]>=e;if(r=r&&t[i]<=n,!r)throw new Error(`Invalid split value ${t[i]}, must be in [${e}, ${n}]`);e=t[i]}if(e!==n)throw new Error(`Last split value must be data size. Expected ${n}, got ${e}`)}let i=r-1,o=Si.getArrayFromDType("int32",r);if(0===n||0===r){let e=new Array(n);for(let e=0;e<=i;++e)o[e]=0;return[e,o]}o[0]=0;for(let e=1;e<=i;++e){let n=t[e]-t[e-1],r=0;this.nGramWidths.forEach(e=>{r+=this.getNumNGrams(n,e)}),this.preserveShort&&n>0&&0===r&&(r=1),o[e]=o[e-1]+r}let a=new Array(o[i]);for(let n=0;n<i;++n){let r=t[n],i=o[n];if(this.nGramWidths.forEach(o=>{let s=t[n+1]-t[n],l=this.getNumNGrams(s,o);this.createNGrams(e,r,a,i,l,o),i+=l}),this.preserveShort&&i===o[n]){let o=t[n+1]-t[n];if(0===o)continue;let s=o+2*this.padWidth,l=1;this.createNGrams(e,r,a,i,l,s)}}return[a,o]}}(n,r,i,o,a,s).compute(e,t)}function pO(e,t,n,r){if(!e.length)return;if(0===t.length){for(let t=0;t<e.length;++t)r.push(e.subarray(t,t+1));return}if(1===t.length){let i=t[0],o=e.indexOf(i);for(;-1!==o;){let t=e.subarray(0,o);(!n||0!==t.length)&&r.push(t),o=(e=e.subarray(o+1)).indexOf(i)}return void((!n||0!==e.length)&&r.push(e))}let i=0;for(let o=0;o<e.length+1;o++)if(o===e.length||-1!==t.indexOf(e[o])){let t=e.subarray(i,o);(!n||0!==t.length)&&r.push(t),i=o+1}}function dO(e,t,n){let r=e.length,i=[],o=0,a=0,s=new Array(r);for(let l=0;l<r;++l){let r=i.length;pO(e[l],t,n,i);let u=i.length-r;s[l]=u,o+=u,a=Math.max(a,u)}let l=Si.getArrayFromDType("int32",2*o),u=new Array(o),c=[r,a],p=0;for(let e=0;e<r;++e)for(let t=0;t<s[e];++t)l[2*p]=e,l[2*p+1]=t,u[p]=i[p],++p;return[l,u,c]}function hO(e,t){let n=Si.getArrayFromDType("int32",e.length);for(let r=0;r<e.length;++r)n[r]=Si.fingerPrint64(e[r]).modulo(t).getLowBitsUnsigned();return n}var fO=eI((e,t)=>e-t),mO=dI((e,t,n,r)=>({real:e-n,imag:t-r})),gO=pI(Qr,fO,mO),yO={kernelName:Qr,backendName:"cpu",kernelFunc:gO};function vO(e,t){let n=new Array(e.rank);for(let r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];let r=za(n,e.dtype);for(let t=0;t<r.values.length;++t){let n=r.indexToLoc(t),i=new Array(e.rank);for(let t=0;t<i.length;t++)i[t]=n[t]%e.shape[t];let o=e.locToIndex(i);r.values[t]=e.values[o]}return r}var bO=(e,t)=>{let n=t.value-e.value;return 0===n?e.index-t.index:n};function xO(e,t,n=0,r=e.length-1){for(;r>n;){if(r-n>600){let i=r-n+1,o=t-n+1,a=Math.log(i),s=.5*Math.exp(2*a/3),l=.5*Math.sqrt(a*s*(i-s)/i)*Math.sign(o-i/2);xO(e,t,Math.max(n,Math.floor(t-o*s/i+l)),Math.min(r,Math.floor(t+(i-o)*s/i+l)))}let i=e[t],o=n,a=r;for(Si.swap(e,n,t),bO(e[r],i)>0&&Si.swap(e,n,r);o<a;){for(Si.swap(e,o,a),o++,a--;bO(e[o],i)<0;)o+=1;for(;bO(e[a],i)>0;)a-=1}0===bO(e[n],i)?Si.swap(e,n,a):(a+=1,Si.swap(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}}function wO(e,t,n,r,i){let o=t[t.length-1],[a,s]=[e.length/o,o],l=Si.getTypedArrayFromDType(n,a*r),u=Si.getTypedArrayFromDType("int32",a*r);for(let t=0;t<a;t++){let n=t*s,o=e.subarray(n,n+s),a=new Array(o.length);o.forEach((e,t)=>a[t]={value:e,index:t}),r<a.length&&(xO(a,r),a=a.slice(0,r)),i&&a.sort(bO);let c=t*r,p=l.subarray(c,c+r),d=u.subarray(c,c+r);for(let e=0;e<r;e++)p[e]=a[e].value,d[e]=a[e].index}let c=t.slice();return c[c.length-1]=r,[za(c,n,l),za(c,"int32",u)]}function _O(e,t,n,r){let i=Si.parseAxisParam(t,n)[0],o=[1,n[0],1];for(let e=0;e<i;e++)o[0]*=n[e];o[1]=n[i];for(let e=i+1;e<n.length;e++)o[2]*=n[e];let a=new Map,s=new Int32Array(n[i]),l=new eo(o,r,e),u=[],c=1===o[0]&&1===o[2];for(let t=0;t<n[i];t++){let n;if(c)n=e[t].toString();else{let e=[];for(let n=0;n<o[0];n++)for(let r=0;r<o[2];r++)e.push(l.get(n,t,r));n=e.join(",")}let r=a.get(n);if(null!=r)s[t]=r;else{let e=a.size;a.set(n,e),s[t]=e,u.push(t)}}let p=o.slice();p[1]=a.size;let d=new eo(p,r);u.forEach((e,t)=>{for(let n=0;n<o[0];n++)for(let r=0;r<o[2];r++)d.set(l.get(n,e,r),n,t,r)});let h=n.slice();return h[i]=p[1],{outputValues:d.values,outputShape:h,indices:s}}var CO="4.7.0";ss("cpu",()=>new JT,1);var SO=CI(Wt,e=>e>=0?e:Math.exp(e)-1),kO={kernelName:Wt,backendName:"cpu",kernelFunc:SO};function EO(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{alpha:o}=r;GT([i],"leakyRelu");let a=Si.sizeFromShape(i.shape),s=n.data.get(i.dataId).values,l=Si.getTypedArrayFromDType("float32",a);for(let e=0;e<s.length;e++)l[e]=s[e]<0?o*s[e]:s[e];return n.makeTensorInfo(i.shape,"float32",l)}var TO={kernelName:mn,backendName:"cpu",kernelFunc:EO},IO=eI((e,t)=>e<0?t*e:e);function PO(e){let{inputs:t,backend:n}=e,{x:r,alpha:i}=t;GT([r,i],"prelu");let o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,[s,l]=IO(r.shape,i.shape,o,a,"float32");return n.makeTensorInfo(l,"float32",s)}var OO={kernelName:tr,backendName:"cpu",kernelFunc:PO},NO=CI(ur,e=>Math.max(0,e)),RO={kernelName:ur,backendName:"cpu",kernelFunc:NO},AO=CI(mr,e=>Math.min(Math.max(0,e),6)),DO={kernelName:mr,backendName:"cpu",kernelFunc:AO};function VO(e,t,n,r,i){if("linear"===n)return iI({inputs:{x:t},backend:e});if("relu"===n)return NO({inputs:{x:t},backend:e});if("elu"===n)return SO({inputs:{x:t},backend:e});if("relu6"===n)return AO({inputs:{x:t},backend:e});if("prelu"===n)return PO({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return EO({inputs:{x:t},backend:e,attrs:{alpha:i}});if("sigmoid"===n)return HP({inputs:{x:t},backend:e});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}function MO(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{shape:o}=r,a=Si.sizeFromShape(i.shape),s=Si.inferFromImplicitShape(o,a),l=Si.sizeFromShape(s);Si.assert(a===l,()=>`The new shape (${s}) has ${l} elements and the old shape (${i.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`),n.incRef(i.dataId);let u=n.data.get(i.dataId);if(null!=u.complexTensorInfos){let e=u.complexTensorInfos.real,t=u.complexTensorInfos.imag;e.shape=s,t.shape=s}return{dataId:i.dataId,shape:s,dtype:i.dtype}}var FO={kernelName:cr,backendName:"cpu",kernelFunc:MO};function LO(e){let{inputs:t,backend:n,attrs:r}=e,{a:i,b:o}=t,{transposeA:a,transposeB:s}=r;GT([i,o],"matMul");let l=i.shape.length,u=o.shape.length,c=a?i.shape[l-2]:i.shape[l-1],p=s?o.shape[u-1]:o.shape[u-2],d=a?i.shape[l-1]:i.shape[l-2],h=s?o.shape[u-2]:o.shape[u-1],f=i.shape.slice(0,-2),m=o.shape.slice(0,-2),g=Si.sizeFromShape(f),y=Si.sizeFromShape(m),v=Ol.assertAndGetBroadcastShape(i.shape.slice(0,-2),o.shape.slice(0,-2)).concat([d,h]);Si.assert(c===p,()=>`Error in matMul: inner shapes (${c}) and (${p}) of Tensors with shapes ${i.shape} and ${o.shape} and transposeA=${a} and transposeB=${s} must match.`);let b=s?[y,h,p]:[y,p,h],x=MO({inputs:{x:i},backend:n,attrs:{shape:a?[g,c,d]:[g,d,c]}}),w=MO({inputs:{x:o},backend:n,attrs:{shape:b}}),_=a?x.shape[1]:x.shape[2],C=a?x.shape[2]:x.shape[1],S=s?w.shape[1]:w.shape[2],k=Math.max(g,y),E=n.data.get(x.dataId).values,T=n.data.get(w.dataId).values,I=Si.computeStrides(x.shape),P=Si.computeStrides(w.shape),[O,N,R]=a?[I[0],1,I[1]]:[I[0],I[1],1],[A,D,V]=s?[1,P[1],P[0]]:[P[1],1,P[0]],M=C*S,F=za([k,C,S],x.dtype),L=F.values,z=n.blockSize;for(let e=0;e<k;e++){let t=e%g,n=e%y;for(let r=0;r<C;r+=z){let i=Math.min(r+z,C);for(let o=0;o<S;o+=z){let a=Math.min(o+z,S);for(let s=0;s<_;s+=z){let l=Math.min(s+z,_);for(let u=r;u<i;u++)for(let r=o;r<a;r++){let i=0;for(let e=s;e<l;e++){i+=E[t*O+u*N+e*R]*T[e*A+r*D+n*V]}L[e*M+(u*S+r)]+=i}}}}}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w),n.makeTensorInfo(v,F.dtype,F.values)}var zO={kernelName:ct,backendName:"cpu",kernelFunc:LO};var jO={kernelName:li,backendName:"cpu",kernelFunc:function(e){let t,n,r,{inputs:i,backend:o,attrs:a}=e,{a:s,b:l,bias:u,preluActivationWeights:c}=i,{transposeA:p,transposeB:d,activation:h,leakyreluAlpha:f}=a,m=[];t=LO({inputs:{a:s,b:l},attrs:{transposeA:p,transposeB:d},backend:o}),u&&(n=mI({inputs:{a:t,b:u},backend:o}),m.push(t),t=n),h&&(r=VO(o,t,h,c,f),m.push(t),t=r);for(let e of m)o.disposeIntermediateTensorInfo(e);return t}},qO=CI(Qe,e=>Math.acos(e)),$O={kernelName:Qe,backendName:"cpu",kernelFunc:qO},BO=CI(Ge,e=>Math.acosh(e)),UO={kernelName:Ge,backendName:"cpu",kernelFunc:BO};var WO={kernelName:Je,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,r=t;GT(t,"addN");let i=r.map(e=>n.data.get(e.dataId).values),o=za(r[0].shape,r[0].dtype),a=o.values;for(let e=0;e<r.length;e++){let t=i[e];for(let e=0;e<a.length;e++)a[e]+=t[e]}return n.makeTensorInfo(o.shape,o.dtype,o.values)}};var HO={kernelName:Xe,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r;GT(i,"all");let s=Si.parseAxisParam(o,i.shape),l=s,u=Rf.getAxesPermutation(l,i.shape.length),c=i;null!=u&&(c=kP({inputs:{x:i},backend:n,attrs:{perm:u}}),l=Rf.getInnerMostAxes(l.length,i.shape.length)),Rf.assertAxesAreInnerMostDims("all",l,c.shape.length);let[p,d]=Rf.computeOutAndReduceShapes(c.shape,l),h=Si.sizeFromShape(d),f=Si.makeZerosTypedArray(Si.sizeFromShape(p),c.dtype),m=n.data.get(c.dataId).values;for(let e=0;e<f.length;++e){let t=e*h,n=m[t];for(let e=0;e<h;++e){let r=m[t+e];n=n&&r}f[e]=n}null!=u&&n.disposeIntermediateTensorInfo(c);let g=n.makeTensorInfo(p,c.dtype,f);if(a){let e=MO({inputs:{x:g},backend:n,attrs:{shape:Rf.expandShapeToKeepDim(p,s)}});return n.disposeIntermediateTensorInfo(g),e}return g}};var QO={kernelName:Ye,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r;GT(i,"any");let s=Si.parseAxisParam(o,i.shape),l=s,u=Rf.getAxesPermutation(l,i.shape.length),c=i;null!=u&&(c=kP({inputs:{x:i},backend:n,attrs:{perm:u}}),l=Rf.getInnerMostAxes(l.length,i.shape.length)),Rf.assertAxesAreInnerMostDims("any",l,c.shape.length);let[p,d]=Rf.computeOutAndReduceShapes(c.shape,l),h=Si.sizeFromShape(d),f=Si.makeZerosTypedArray(Si.sizeFromShape(p),c.dtype),m=n.data.get(c.dataId).values;for(let e=0;e<f.length;++e){let t=e*h,n=m[t];for(let e=0;e<h;++e){let r=m[t+e];n=n||r}f[e]=n}null!=u&&n.disposeIntermediateTensorInfo(c);let g=n.makeTensorInfo(p,c.dtype,f);if(a){let e=MO({inputs:{x:g},backend:n,attrs:{shape:Rf.expandShapeToKeepDim(p,s)}});return n.disposeIntermediateTensorInfo(g),e}return g}};var GO={kernelName:Ze,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o}=r;GT(i,"argMax");let a=Si.parseAxisParam(o,i.shape),s=Rf.getAxesPermutation(a,i.shape.length),l=i,u=[];null!=s&&(l=kP({inputs:{x:i},backend:n,attrs:{perm:s}}),u.push(l),a=Rf.getInnerMostAxes(a.length,l.shape.length)),a=[a[0]],Rf.assertAxesAreInnerMostDims("argMax",a,l.shape.length);let[c,p]=Rf.computeOutAndReduceShapes(l.shape,a),d=Si.sizeFromShape(c),h=Si.makeZerosTypedArray(d,"int32"),f=Si.sizeFromShape(p),m=n.data.get(l.dataId).values;for(let e=0;e<h.length;++e){let t=e*f,n=m[t],r=0;for(let e=0;e<f;++e){let i=m[t+e];i>n&&(n=i,r=e)}h[e]=r}return u.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(c,"int32",h)}};var KO={kernelName:et,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o}=r;GT(i,"argMin");let a=Si.parseAxisParam(o,i.shape),s=Rf.getAxesPermutation(a,i.shape.length),l=i,u=[];null!=s&&(l=kP({inputs:{x:i},backend:n,attrs:{perm:s}}),u.push(l),a=Rf.getInnerMostAxes(a.length,l.shape.length)),a=[a[0]],Rf.assertAxesAreInnerMostDims("argMin",a,l.shape.length);let[c,p]=Rf.computeOutAndReduceShapes(l.shape,a),d=Si.sizeFromShape(c),h=Si.makeZerosTypedArray(d,"int32"),f=Si.sizeFromShape(p),m=n.data.get(l.dataId).values;for(let e=0;e<h.length;++e){let t=e*f,n=m[t],r=0;for(let e=0;e<f;++e){let i=m[t+e];i<n&&(n=i,r=e)}h[e]=r}return u.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(c,"int32",h)}},JO=CI(tt,e=>Math.asin(e)),XO={kernelName:tt,backendName:"cpu",kernelFunc:JO},YO=CI(nt,e=>Math.asinh(e)),ZO={kernelName:nt,backendName:"cpu",kernelFunc:YO},eN=CI(rt,e=>Math.atan(e)),tN={kernelName:rt,backendName:"cpu",kernelFunc:eN},nN=eI((e,t)=>Math.atan2(e,t)),rN=pI(ot,nN),iN={kernelName:ot,backendName:"cpu",kernelFunc:rN},oN=CI(it,e=>Math.atanh(e)),aN={kernelName:it,backendName:"cpu",kernelFunc:oN};function sN(e,t,n,r,i,o){let a=i.strideHeight,s=i.strideWidth,l=i.dilationHeight,u=i.dilationWidth,c=i.effectiveFilterHeight,p=i.effectiveFilterWidth,d=i.padInfo.top,h=i.padInfo.left,f="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=za(i.outShape,n),g=m.values,y=i.outShape[1]*i.outShape[2]*i.outShape[3],v=i.outShape[2]*i.outShape[3],b=i.outShape[3];for(let t=0;t<i.batchSize;++t){let n=t*y,m=t*r[0];for(let t=0;t<i.inChannels;++t)for(let y=0;y<i.outHeight;++y){let x=y*a-d,w=Math.max(0,x),_=Math.min(i.inHeight,c+x),C=n+y*v;for(let n=0;n<i.outWidth;++n){let a=n*s-h,c=Math.max(0,a),d=Math.min(i.inWidth,p+a),y=f,v=0,x=0;for(let n=w;n<_;n+=l){let i=m+n*r[1];for(let n=c;n<d;n+=u){let a=e[i+n*r[2]+t];"max"===o&&a>y?y=a:"avg"===o&&(v+=a,x++)}if(isNaN(y))break}g[C+n*b+t]="avg"===o?v/x:y}}}return m}function lN(e,t,n,r,i=!1,o=!1){let a=za(r.outShape,"int32"),s=r.strideHeight,l=r.strideWidth,u=r.dilationHeight,c=r.dilationWidth,p=r.effectiveFilterHeight,d=r.effectiveFilterWidth,h=r.padInfo.top,f=r.padInfo.left,m=za(t,n,e);for(let e=0;e<r.batchSize;++e)for(let t=0;t<r.inChannels;++t)for(let n=0;n<r.outHeight;++n){let g=n*s-h,y=g;for(;y<0;)y+=u;let v=Math.min(r.inHeight,p+g);for(let s=0;s<r.outWidth;++s){let p=s*l-f,h=p;for(;h<0;)h+=c;let b=Math.min(r.inWidth,d+p),x=Number.NEGATIVE_INFINITY,w=-1;for(let n=y;n<v;n+=u){let a=n-g;for(let s=h;s<b;s+=c){let l=s-p,u=m.get(e,n,s,t);u>x&&(x=u,w=i?o?((e*r.inHeight+n)*r.inWidth+s)*r.inChannels+t:(n*r.inWidth+s)*r.inChannels+t:a*d+l)}}a.set(w,e,n,s,t)}}return a}function uN(e,t,n,r,i,o){let a=i.strideDepth,s=i.strideHeight,l=i.strideWidth,u=i.dilationDepth,c=i.dilationHeight,p=i.dilationWidth,d=i.effectiveFilterDepth,h=i.effectiveFilterHeight,f=i.effectiveFilterWidth,m=i.padInfo.front,g=i.padInfo.top,y=i.padInfo.left,v="max"===o?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=za(i.outShape,n),x=b.values,w=i.outShape[1]*i.outShape[2]*i.outShape[3]*i.outShape[4],_=i.outShape[2]*i.outShape[3]*i.outShape[4],C=i.outShape[3]*i.outShape[4],S=i.outShape[4];for(let t=0;t<i.batchSize;++t){let n=t*w,b=t*r[0];for(let t=0;t<i.inChannels;++t)for(let w=0;w<i.outDepth;++w){let k=w*a-m,E=k;for(;E<0;)E+=u;let T=Math.min(i.inDepth,d+k),I=n+w*_;for(let n=0;n<i.outHeight;++n){let a=n*s-g,d=a;for(;d<0;)d+=c;let m=Math.min(i.inHeight,h+a),w=I+n*C;for(let n=0;n<i.outWidth;++n){let a=n*l-y,s=a;for(;s<0;)s+=p;let h=Math.min(i.inWidth,f+a),g=w+n*S,_=v,C=0,k=0;for(let n=E;n<T;n+=u){let i=b+n*r[1];for(let n=d;n<m;n+=c){let a=i+n*r[2];for(let n=s;n<h;n+=p){let i=e[a+n*r[3]+t];if("max"===o&&i>_?_=i:"avg"===o&&(C+=i,k++),isNaN(_))break}if(isNaN(_))break}if(isNaN(_))break}x[g+t]="avg"===o?C/Math.max(k,1):_}}}}return b}var cN={kernelName:at,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t;GT(i,"avgPool");let{filterSize:o,strides:a,pad:s,dimRoundingMode:l}=r;Si.assert(Rf.eitherStridesOrDilationsAreOne(a,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '1'`);let u,c=Rf.computePool2DInfo(i.shape,o,a,1,s,l);if(1===c.filterWidth&&1===c.filterHeight&&Si.arraysEqual(c.inShape,c.outShape))u=iI({inputs:{x:i},backend:n});else{let e=n.data.get(i.dataId).values,t=Si.computeStrides(i.shape),r=sN(e,i.shape,i.dtype,t,c,"avg");u=n.makeTensorInfo(c.outShape,i.dtype,r.values)}return u}};var pN={kernelName:lt,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:o,strides:a,pad:s,dimRoundingMode:l,dataFormat:u}=r;GT(i,"avgPool3d");let c=Rf.computePool3DInfo(i.shape,o,a,1,s,l,u),p=uN(n.data.get(i.dataId).values,i.shape,i.dtype,Si.computeStrides(i.shape),c,"avg");return n.makeTensorInfo(p.shape,"float32",p.values)}};var dN={kernelName:ut,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,{filterSize:a,strides:s,pad:l,dimRoundingMode:u}=r;GT([i,o],"avgPool3DGrad");let c=Rf.computePool3DInfo(o.shape,a,s,1,l,u),p=c.strideDepth,d=c.strideHeight,h=c.strideWidth,f=c.filterDepth,m=c.filterHeight,g=c.filterWidth,y=c.dilationDepth,v=c.dilationHeight,b=c.dilationWidth,x=c.effectiveFilterDepth,w=c.effectiveFilterHeight,_=c.effectiveFilterWidth,C=x-1-c.padInfo.front,S=_-1-c.padInfo.left,k=w-1-c.padInfo.top,E=za(o.shape,"float32"),T=1/(f*m*g),I=n.bufferSync(i);for(let e=0;e<c.batchSize;++e)for(let t=0;t<c.inChannels;++t)for(let n=0;n<c.inDepth;++n)for(let r=0;r<c.inHeight;++r)for(let i=0;i<c.inWidth;++i){let o=n-C,a=r-k,s=i-S,l=0;for(let n=0;n<x;n+=y){let r=(o+n)/p;if(!(r<0||r>=c.outDepth||Math.floor(r)!==r))for(let n=0;n<w;n+=v){let i=(a+n)/d;if(!(i<0||i>=c.outHeight||Math.floor(i)!==i))for(let n=0;n<_;n+=b){let o=(s+n)/h;o<0||o>=c.outWidth||Math.floor(o)!==o||(l+=I.get(e,r,i,o,t))}}}E.set(l*T,e,n,r,i,t)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}};var hN={kernelName:st,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,a=o;GT([i,o],"avgPoolGrad");let{filterSize:s,strides:l,pad:u}=r,c=Rf.computePool2DInfo(a.shape,s,l,1,u),p=c.strideHeight,d=c.strideWidth,h=c.filterHeight,f=c.filterWidth,m=c.dilationHeight,g=c.dilationWidth,y=c.effectiveFilterHeight,v=c.effectiveFilterWidth,b=v-1-c.padInfo.left,x=y-1-c.padInfo.top,w=za(a.shape,"float32"),_=1/(h*f),C=n.data.get(i.dataId).values,S=za(i.shape,"float32",C);for(let e=0;e<c.batchSize;++e)for(let t=0;t<c.inChannels;++t)for(let n=0;n<c.inHeight;++n)for(let r=0;r<c.inWidth;++r){let i=n-x,o=r-b,a=0;for(let n=0;n<y;n+=m){let r=(i+n)/p;if(!(r<0||r>=c.outHeight||Math.floor(r)!==r))for(let n=0;n<v;n+=g){let i=(o+n)/d;i<0||i>=c.outWidth||Math.floor(i)!==i||(a+=S.get(e,r,i,t))}}w.set(a*_,e,n,r,t)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};var fN={kernelName:rn,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,scale:o,offset:a,mean:s,variance:l}=t;Si.assert(s.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Si.assert(null==a||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Si.assert(null==o||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),GT([i,s,l,o,a],"batchNorm");let{varianceEpsilon:u}=r;null==u&&(u=.001);let c=n.data.get(i.dataId).values,p=n.data.get(s.dataId).values,d=n.data.get(l.dataId).values,h=o?n.data.get(o.dataId).values:new Float32Array([1]),f=a?n.data.get(a.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),g=f.length,y=h.length,v=d.length,b=p.length,x=0,w=0,_=0,C=0;for(let e=0;e<c.length;++e)m[e]=f[x++]+(c[e]-p[w++])*h[_++]/Math.sqrt(d[C++]+u),x>=g&&(x=0),w>=b&&(w=0),_>=y&&(_=0),C>=v&&(C=0);return n.makeTensorInfo(i.shape,i.dtype,m)}};var mN={kernelName:pt,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:o,crops:a}=r;GT([i],"batchToSpaceND");let s=o.reduce((e,t)=>e*t),l=Rf.getReshaped(i.shape,o,s),u=Rf.getPermuted(l.length,o.length),c=Rf.getReshapedPermuted(i.shape,o,s),p=Rf.getSliceBeginCoords(a,o.length),d=Rf.getSliceSize(c,a,o.length),h=MO({inputs:{x:i},backend:n,attrs:{shape:l}}),f=kP({inputs:{x:h},backend:n,attrs:{perm:u}}),m=MO({inputs:{x:f},backend:n,attrs:{shape:c}}),g=KP({inputs:{x:m},backend:n,attrs:{begin:p,size:d}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}};var gN={kernelName:dt,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,weights:o}=t,{size:a}=r,s=yI(n.data.get(i.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,a);return n.makeTensorInfo([a],o.dtype,s)}};var yN={kernelName:mt,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{s0:r,s1:i}=t,o=n.data.get(r.dataId).values,a=n.data.get(i.dataId).values,s=Rf.assertAndGetBroadcastShape(Array.from(o),Array.from(a));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},vN=CI(vt,(e,t)=>{let n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e}),bN={kernelName:vt,backendName:"cpu",kernelFunc:vN},xN={kernelName:xt,backendName:"cpu",kernelFunc:e=>{let{x:t}=e.inputs,n=e.backend,r=new Float32Array(Si.sizeFromShape(t.shape)),i=n.data.get(t.dataId),o=i.complexTensorInfos.real,a=i.complexTensorInfos.imag,s=n.data.get(o.dataId).values,l=n.data.get(a.dataId).values;for(let e=0;e<s.length;e++){let t=s[e],n=l[e];r[e]=Math.hypot(t,n)}return n.makeOutput(r,t.shape,"float32")}};function wN(e){let{inputs:t,backend:n}=e,{input:r}=t,i=n.data.get(r.dataId).complexTensorInfos.imag,o=n.data.get(i.dataId).values;return n.makeTensorInfo(i.shape,i.dtype,o)}var _N={kernelName:pn,backendName:"cpu",kernelFunc:wN};function CN(e){let{inputs:t,backend:n,attrs:r}=e,{axis:i}=r,o=Si.parseAxisParam(i,t[0].shape)[0],a=t.map(e=>e.shape);Rf.assertParamsConsistent(a,o);let s=Rf.computeOutShape(t.map(e=>e.shape),o);if(0===Si.sizeFromShape(s))return n.makeTensorInfo(s,t[0].dtype,[]);let l=t.filter(e=>Si.sizeFromShape(e.shape)>0);if(1===l.length)return iI({inputs:{x:l[0]},backend:n});if("complex64"===l[0].dtype){let e=l.map(e=>aI({inputs:{input:e},backend:n})),t=l.map(e=>wN({inputs:{input:e},backend:n})),r=CN({inputs:e,backend:n,attrs:{axis:o}}),i=CN({inputs:t,backend:n,attrs:{axis:o}}),a=tI({inputs:{real:r,imag:i},backend:n});return e.forEach(e=>n.disposeIntermediateTensorInfo(e)),t.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),a}let u=l.map(e=>{let t=[-1,Si.sizeFromShape(e.shape.slice(o))];return MO({inputs:{x:e},backend:n,attrs:{shape:t}})}),c=u.map(e=>({vals:n.data.get(e.dataId).values,shape:e.shape}));s=Rf.computeOutShape(u.map(e=>e.shape),1);let p=1===u[0].shape[0],d=II(c,s,t[0].dtype,p),h=Rf.computeOutShape(l.map(e=>e.shape),o),f=n.makeTensorInfo(h,t[0].dtype,d);return u.forEach(e=>n.disposeIntermediateTensorInfo(e)),f}var SN={kernelName:wt,backendName:"cpu",kernelFunc:CN};function kN(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:a,pad:s,dataFormat:l,dilations:u,dimRoundingMode:c}=r;GT([i,o],"conv2d");let p=Rf.convertConv2DDataFormat(l),d=Rf.computeConv2DInfo(i.shape,o.shape,a,u,s,c,!1,p),h=d.filterHeight,f=d.filterWidth,m=d.dilationHeight,g=d.dilationWidth,y=d.padInfo.left,v=d.padInfo.top,b="channelsLast"===d.dataFormat,x=new eo(d.outShape,i.dtype),w=Si.computeStrides(i.shape),_=Si.computeStrides(o.shape),C=w[0],S=b?w[1]:w[2],k=b?w[2]:1,E=b?1:w[1],T=x.strides[0],I=b?x.strides[1]:x.strides[2],P=b?x.strides[2]:1,O=b?1:x.strides[1],N=n.data.get(i.dataId).values,R=n.data.get(o.dataId).values,A=x.values;for(let e=0;e<d.batchSize;++e){let t=e*C,n=e*T;for(let e=0;e<d.outHeight;++e){let r=n+e*I,i=e*d.strideHeight-v;for(let e=0;e<h;++e){let n=i+e*m;if(n<0||n>=d.inHeight)continue;let o=e*_[0],a=t+n*S;for(let e=0;e<d.outWidth;++e){let t=r+e*P,n=e*d.strideWidth-y;for(let e=0;e<f;++e){let r=n+e*g;if(r<0||r>=d.inWidth)continue;let i=a+r*k,s=o+e*_[1];for(let e=0;e<d.inChannels;++e){let n=N[i+e*E];for(let e=0;e<d.outChannels;++e)A[t+e*O]+=n*R[s+e];s+=d.outChannels}}}}}}return n.makeTensorInfo(x.shape,x.dtype,A)}var EN={kernelName:_t,backendName:"cpu",kernelFunc:kN};var TN={kernelName:Ct,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:a,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:c}=r;GT([i,o],"conv2dBackpropFilter");let p=Rf.convertConv2DDataFormat(l),d=Rf.computeConv2DInfo(i.shape,c,a,1,s,u,!1,p),{strideHeight:h,strideWidth:f,filterHeight:m,filterWidth:g}=d,y="channelsLast"===d.dataFormat,v=new eo(d.filterShape,"float32"),b=d.padInfo.left,x=d.padInfo.top,w=n.data.get(i.dataId).values,_=n.data.get(o.dataId).values,C=new eo(i.shape,i.dtype,w),S=new eo(o.shape,o.dtype,_);for(let e=0;e<m;++e){let t=Math.max(0,Math.ceil((x-e)/h)),n=Math.min(d.outHeight,(d.inHeight+x-e)/h);for(let r=0;r<g;++r){let i=Math.max(0,Math.ceil((b-r)/f)),o=Math.min(d.outWidth,(d.inWidth+b-r)/f);for(let a=0;a<d.inChannels;++a)for(let s=0;s<d.outChannels;++s){let l=0;for(let u=0;u<d.batchSize;++u)for(let c=t;c<n;++c){let t=e+c*h-x;for(let e=i;e<o;++e){let n=r+e*f-b;l+=y?C.get(u,t,n,a)*S.get(u,c,e,s):C.get(u,a,t,n)*S.get(u,s,c,e)}}v.set(l,e,r,a,s)}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};var IN={kernelName:St,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{inputShape:a,strides:s,pad:l,dataFormat:u,dimRoundingMode:c}=r;GT([i,o],"conv2dBackpropInput");let p=Si.computeStrides(o.shape),d=Si.computeStrides(i.shape),h=Rf.convertConv2DDataFormat(u),f=Rf.computeConv2DInfo(a,o.shape,s,1,l,c,!1,h),m=new eo(f.inShape,"float32"),g=m.values,y=n.data.get(i.dataId).values,v=n.data.get(o.dataId).values,[b,x,w]=p,{batchSize:_,filterHeight:C,filterWidth:S,inChannels:k,inHeight:E,inWidth:T,outChannels:I,outHeight:P,outWidth:O,strideHeight:N,strideWidth:R}=f;h=f.dataFormat;let A=C-1-f.padInfo.top,D=S-1-f.padInfo.left,V="channelsLast"===h,M=m.strides[0],F=V?m.strides[1]:m.strides[2],L=V?m.strides[2]:1,z=V?1:m.strides[1],j=d[0],q=V?d[1]:d[2],$=V?d[2]:1,B=V?1:d[1];for(let e=0;e<_;++e)for(let t=0;t<k;++t)for(let n=0;n<E;++n){let r=n-A,i=Math.max(0,Math.ceil(r/N)),o=Math.min(P,(C+r)/N);for(let a=0;a<T;++a){let s=a-D,l=Math.max(0,Math.ceil(s/R)),u=Math.min(O,(S+s)/R),c=0;for(let n=i;n<o;++n){let i=n*N-r;for(let r=l;r<u;++r){let o=j*e+q*n+$*r,a=b*(C-1-i)+x*(S-1-(r*R-s))+w*t;for(let e=0;e<I;++e){c+=y[o+B*e]*v[a+e]}}}g[M*e+F*n+L*a+z*t]=c}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};var PN={kernelName:kt,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:a,pad:s,dilations:l}=r;GT([i,o],"conv3d");let u=Rf.computeConv3DInfo(i.shape,o.shape,a,l,s),{filterDepth:c,filterHeight:p,filterWidth:d,dilationDepth:h,dilationHeight:f,dilationWidth:m,padInfo:g}=u,y=g.front,v=g.left,b=g.top,x=new eo(u.outShape,i.dtype),w=n.data.get(i.dataId).values,_=n.data.get(o.dataId).values,C=x.values,S=Si.computeStrides(i.shape),k=Si.computeStrides(o.shape);for(let e=0;e<u.batchSize;++e){let t=e*S[0],n=e*x.strides[0];for(let e=0;e<u.outDepth;++e){let r=n+e*x.strides[1],i=e*u.strideDepth-y;for(let e=0;e<c;++e){let n=i+e*h;if(n<0||n>=u.inDepth)continue;let o=e*k[0],a=t+n*S[1];for(let e=0;e<u.outHeight;++e){let t=r+e*x.strides[2],n=e*u.strideHeight-b;for(let e=0;e<p;++e){let r=n+e*f;if(r<0||r>=u.inHeight)continue;let i=o+e*k[1],s=a+r*S[2];for(let e=0;e<u.outWidth;++e){let n=t+e*u.outChannels,r=e*u.strideWidth-v;for(let e=0;e<d;++e){let t=r+e*m;if(t<0||t>=u.inWidth)continue;let o=i+e*k[2],a=s+t*u.inChannels,l=o;for(let e=0;e<u.inChannels;++e){let t=w[a+e];for(let e=0;e<u.outChannels;++e)C[n+e]+=t*_[l+e];l+=u.outChannels}}}}}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};var ON={kernelName:Et,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:a,pad:s,filterShape:l}=r;GT([i,o],"conv3dBackpropFilterV2");let u=Si.computeStrides(i.shape),c=Si.computeStrides(o.shape),p=Rf.computeConv3DInfo(i.shape,l,a,1,s),d=p.strideDepth,h=p.strideHeight,f=p.strideWidth,m=p.filterDepth,g=p.filterHeight,y=p.filterWidth,v=new eo(p.filterShape,"float32"),b=v.values,[x,w,_,C]=v.strides,S=n.data.get(o.dataId).values,[k,E,T,I]=c,P=n.data.get(i.dataId).values,[O,N,R,A]=u,D=p.padInfo.front,V=p.padInfo.left,M=p.padInfo.top;for(let e=0;e<m;++e){let t=Math.max(0,Math.ceil((D-e)/d)),n=Math.min(p.outDepth,(p.inDepth+D-e)/d),r=e*x;for(let i=0;i<g;++i){let o=Math.max(0,Math.ceil((M-i)/h)),a=Math.min(p.outHeight,(p.inHeight+M-i)/h),s=i*w+r;for(let r=0;r<y;++r){let l=Math.max(0,Math.ceil((V-r)/f)),u=Math.min(p.outWidth,(p.inWidth+V-r)/f),c=r*_+s;for(let s=0;s<p.inChannels;++s){let m=s*C+c;for(let c=0;c<p.outChannels;++c){let g=0;for(let m=0;m<p.batchSize;++m){let p=m*O,y=m*k;for(let m=t;m<n;++m){let t=(e+m*d-D)*N+p,n=m*E+y;for(let e=o;e<a;++e){let o=(i+e*h-M)*R+t,a=e*T+n;for(let e=l;e<u;++e){let t=e*I+a;g+=P[(r+e*f-V)*A+o+s]*S[t+c]}}}}b[m+c]=g}}}}}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};var NN={kernelName:Tt,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{pad:a,strides:s,inputShape:l}=r;GT([i],"conv3dBackpropInputV2");let u=Si.computeStrides(i.shape),c=Si.computeStrides(o.shape),p=Rf.computeConv3DInfo(l,o.shape,s,1,a),d=new eo(p.inShape,"float32"),h=d.values,[f,m,g,y]=d.strides,v=n.data.get(i.dataId).values,[b,x,w,_]=u,C=n.data.get(o.dataId).values,[S,k,E,T]=c,{batchSize:I,filterDepth:P,filterHeight:O,filterWidth:N,inChannels:R,inDepth:A,inHeight:D,inWidth:V,outChannels:M,outDepth:F,outHeight:L,outWidth:z,strideDepth:j,strideHeight:q,strideWidth:$}=p,B=P-1-p.padInfo.front,U=O-1-p.padInfo.top,W=N-1-p.padInfo.left;for(let e=0;e<I;++e)for(let t=0;t<R;++t)for(let n=0;n<A;++n){let r=n-B,i=Math.max(0,Math.ceil(r/j)),o=Math.min(F,(P+r)/j);for(let a=0;a<D;++a){let s=a-U,l=Math.max(0,Math.ceil(s/q)),u=Math.min(L,(O+s)/q);for(let c=0;c<V;++c){let p=c-W,d=Math.max(0,Math.ceil(p/$)),I=Math.min(z,(N+p)/$),R=0;for(let n=i;n<o;++n){let i=n*j-r;for(let r=l;r<u;++r){let o=r*q-s;for(let a=d;a<I;++a){let s=b*e+x*n+w*r+_*a,l=S*(P-1-i)+k*(O-1-o)+E*(N-1-(a*$-p))+T*t;for(let e=0;e<M;++e){R+=v[s+e]*C[l+e]}}}}h[f*e+m*n+g*a+y*c+t]=R}}}return n.makeTensorInfo(d.shape,d.dtype,d.values)}},RN=CI(It,e=>Math.cos(e)),AN={kernelName:It,backendName:"cpu",kernelFunc:RN},DN=CI(Pt,e=>Math.cosh(e)),VN={kernelName:Pt,backendName:"cpu",kernelFunc:DN};var MN={kernelName:Rt,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{image:i,boxes:o,boxInd:a}=t,{cropSize:s,method:l,extrapolationValue:u}=r,[c,p,d,h]=i.shape,f=o.shape[0],[m,g]=s,y=za([f,m,g,h],"float32"),v=n.data.get(o.dataId).values,b=n.data.get(a.dataId).values,x=n.data.get(i.dataId).values,w=Si.computeStrides(i.shape),_=Si.computeStrides(y.shape);for(let e=0;e<f;e++){let t=4*e,n=v[t],r=v[t+1],i=v[t+2],o=v[t+3],a=b[e];if(a>=c)continue;let s=m>1?(i-n)*(p-1)/(m-1):0,f=g>1?(o-r)*(d-1)/(g-1):0;for(let t=0;t<m;t++){let c=m>1?n*(p-1)+t*s:.5*(n+i)*(p-1);if(c<0||c>p-1)for(let n=0;n<g;n++)for(let r=0;r<h;r++){let i=r+n*_[2]+t*_[1]+e*_[0];y.values[i]=u}else if("bilinear"===l){let n=Math.floor(c),i=Math.ceil(c),s=c-n;for(let l=0;l<g;l++){let c=g>1?r*(d-1)+l*f:.5*(r+o)*(d-1);if(c<0||c>d-1){for(let n=0;n<h;n++){let r=n+l*_[2]+t*_[1]+e*_[0];y.values[r]=u}continue}let p=Math.floor(c),m=Math.ceil(c),v=c-p;for(let r=0;r<h;r++){let o=r+p*w[2]+n*w[1]+a*w[0],u=x[o];o=r+m*w[2]+n*w[1]+a*w[0];let c=x[o];o=r+p*w[2]+i*w[1]+a*w[0];let d=x[o];o=r+m*w[2]+i*w[1]+a*w[0];let h=u+(c-u)*v,f=d+(x[o]-d)*v;o=r+l*_[2]+t*_[1]+e*_[0],y.values[o]=h+(f-h)*s}}}else for(let n=0;n<g;++n){let i=g>1?r*(d-1)+n*f:.5*(r+o)*(d-1);if(i<0||i>d-1){for(let r=0;r<h;r++){let i=r+n*_[2]+t*_[1]+e*_[0];y.values[i]=u}continue}let s=Math.round(i),l=Math.round(c);for(let r=0;r<h;r++){let i=r+s*w[2]+l*w[1]+a*w[0],o=r+n*_[2]+t*_[1]+e*_[0];y.values[o]=x[i]}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};var FN={kernelName:Ot,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,exclusive:a,reverse:s}=r;GT(i,"cumprod");let l=Rf.getAxesPermutation([o],i.shape.length),u=i;null!=l&&(u=kP({inputs:{x:i},backend:n,attrs:{perm:l}}));let c=Rf.getInnerMostAxes(1,i.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);let p=mo(u.dtype,"int32"),d=Si.makeOnesTypedArray(Si.sizeFromShape(u.shape),p),h=n.data.get(u.dataId).values,f=u.shape[u.shape.length-1],m=s?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let e=0;e<h.length;e+=f)for(let t=0;t<f;t++){let n=m(e,t);if(0===t)d[n]=a?1:h[n];else{let r=m(e,t-1);d[n]=a?h[r]*d[r]:h[n]*d[r]}}let g=n.makeTensorInfo(u.shape,p,d);if(null!=l){let e=kP({inputs:{x:g},backend:n,attrs:{perm:Rf.getUndoAxesPermutation(l)}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),e}return g}};var LN={kernelName:Nt,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,exclusive:a,reverse:s}=r;GT(i,"cumsum");let l=Rf.getAxesPermutation([o],i.shape.length),u=i;null!=l&&(u=kP({inputs:{x:i},backend:n,attrs:{perm:l}}));let c=Rf.getInnerMostAxes(1,i.shape.length)[0];if(c!==u.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${u.shape.length-1} but got axis=${c}`);let p=mo(u.dtype,"int32"),d=Si.makeZerosTypedArray(Si.sizeFromShape(u.shape),p),h=n.data.get(u.dataId).values,f=u.shape[u.shape.length-1],m=s?(e,t)=>e+f-t-1:(e,t)=>e+t;for(let e=0;e<h.length;e+=f)for(let t=0;t<f;t++){let n=m(e,t);if(0===t)d[n]=a?0:h[n];else{let r=m(e,t-1);d[n]=a?h[r]+d[r]:h[n]+d[r]}}let g=n.makeTensorInfo(u.shape,p,d);if(null!=l){let e=kP({inputs:{x:g},backend:n,attrs:{perm:Rf.getUndoAxesPermutation(l)}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(u),e}return g}};var zN={kernelName:At,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,weights:o}=t,{size:a,binaryOutput:s}=r;if(1===i.shape.length){let e=yI(n.data.get(i.dataId).values,n.data.get(o.dataId).values,o.dtype,o.shape,a);return n.makeTensorInfo([a],o.dtype,e)}if(2===i.shape.length){let e=vI(n.bufferSync(i),n.bufferSync(o),a,s);return n.makeTensorInfo(e.shape,o.dtype,e.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}};var jN={kernelName:Dt,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockSize:o,dataFormat:a}=r;Si.assert("NHWC"===a,()=>"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+a);let s=i.shape[0],l=i.shape[1],u=i.shape[2],c=i.shape[3],p=l*o,d=u*o,h=c/(o*o),f=n.data.get(i.dataId).values,m=new Float32Array(s*p*d*h),g=0;for(let e=0;e<s;++e)for(let t=0;t<p;++t){let n=Math.floor(t/o),r=t%o;for(let t=0;t<d;++t){let i=Math.floor(t/o),a=(r*o+t%o)*h;for(let t=0;t<h;++t){let r=t+a+c*(i+u*(n+l*e));m[g++]=f[r]}}}return n.makeTensorInfo([s,p,d,h],i.dtype,m)}};function qN(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:a,pad:s,dilations:l,dimRoundingMode:u}=r;GT([i,o],"depthwiseConv2DNative");let c=Si.computeStrides(i.shape),p=Si.computeStrides(o.shape),d=l;null==d&&(d=[1,1]),Si.assert(Rf.eitherStridesOrDilationsAreOne(a,d),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${d}'`);let h=Rf.computeConv2DInfo(i.shape,o.shape,a,d,s,u,!0),{filterHeight:f,filterWidth:m,dilationHeight:g,dilationWidth:y,padInfo:v}=h,b=v.left,x=v.top,w=h.outChannels/h.inChannels,_=new eo(h.outShape,i.dtype),C=n.data.get(i.dataId).values,S=n.data.get(o.dataId).values,k=_.values;for(let e=0;e<h.batchSize;++e){let t=e*c[0],n=e*_.strides[0];for(let e=0;e<h.outHeight;++e){let r=n+e*_.strides[1],i=e*h.strideHeight-x;for(let e=0;e<f;++e){let n=i+e*g;if(n<0||n>=h.inHeight)continue;let o=e*p[0],a=t+n*c[1];for(let e=0;e<h.outWidth;++e){let t=r+e*_.strides[2],n=e*h.strideWidth-b;for(let e=0;e<m;++e){let r=n+e*y;if(r<0||r>=h.inWidth)continue;let i=o+e*p[1],s=a+r*h.inChannels,l=t,u=i;for(let e=0;e<h.inChannels;++e){let t=C[s+e];for(let e=0;e<w;++e)k[l+e]+=t*S[u+e];l+=w,u+=w}}}}}}return n.makeTensorInfo(_.shape,_.dtype,_.values)}var $N={kernelName:Vt,backendName:"cpu",kernelFunc:qN};var BN={kernelName:Mt,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:a,dilations:s,pad:l,dimRoundingMode:u,filterShape:c}=r;GT([i,o],"depthwiseConv2dNativeBackpropFilter");let p=Rf.computeConv2DInfo(i.shape,c,a,s,l,u,!0),{strideHeight:d,strideWidth:h,filterHeight:f,filterWidth:m}=p,g=new eo(p.filterShape,"float32"),y=p.padInfo.left,v=p.padInfo.top,b=p.outChannels/p.inChannels,x=n.data.get(i.dataId).values,w=new eo(i.shape,i.dtype,x),_=n.data.get(o.dataId).values,C=new eo(o.shape,o.dtype,_);for(let e=0;e<f;++e){let t=Math.max(0,Math.ceil((v-e)/d)),n=Math.min(p.outHeight,(p.inHeight+v-e)/d);for(let r=0;r<m;++r){let i=Math.max(0,Math.ceil((y-r)/h)),o=Math.min(p.outWidth,(p.inWidth+y-r)/h);for(let a=0;a<p.outChannels;++a){let s=Math.trunc(a/b),l=a%b,u=0;for(let l=0;l<p.batchSize;++l)for(let c=t;c<n;++c){let t=e+c*d-v;for(let e=i;e<o;++e){let n=r+e*h-y;u+=w.get(l,t,n,s)*C.get(l,c,e,a)}}g.set(u,e,r,s,l)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}};var UN={kernelName:Ft,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{strides:a,dilations:s,pad:l,dimRoundingMode:u,inputShape:c}=r;GT([i,o],"depthwiseConv2DNativeBackpropInput");let p=Si.computeStrides(i.shape),d=Si.computeStrides(o.shape),h=Rf.computeConv2DInfo(c,o.shape,a,s,l,u,!0),f=new eo(h.inShape,"float32"),m=f.values,[g,y,v]=f.strides,b=n.data.get(i.dataId).values,[x,w,_]=p,C=n.data.get(o.dataId).values,[S,k,E]=d,{batchSize:T,filterHeight:I,filterWidth:P,inChannels:O,inHeight:N,inWidth:R,outChannels:A,outHeight:D,outWidth:V,strideHeight:M,strideWidth:F}=h,L=I-1-h.padInfo.top,z=P-1-h.padInfo.left,j=A/O;for(let e=0;e<T;++e)for(let t=0;t<O;++t)for(let n=0;n<N;++n){let r=n-L,i=Math.max(0,Math.ceil(r/M)),o=Math.min(D,(I+r)/M);for(let a=0;a<R;++a){let s=a-z,l=Math.max(0,Math.ceil(s/F)),u=Math.min(V,(P+s)/F),c=0;for(let n=i;n<o;++n){let i=n*M-r;for(let r=l;r<u;++r){let o=x*e+w*n+_*r,a=S*(I-1-i)+k*(P-1-(r*F-s))+E*t;for(let e=0;e<j;++e){c+=b[o+(t*j+e)]*C[a+e]}}}m[g*e+y*n+v*a+t]=c}}return n.makeTensorInfo(f.shape,f.dtype,f.values)}};var WN={kernelName:Lt,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{x:r}=t,i=Si.sizeFromShape(r.shape),o=n.data.get(r.dataId).values,a=za([i,i],r.dtype),s=a.values;for(let e=0;e<o.length;e++)s[e*i+e]=o[e];let l=[...r.shape,...r.shape];return n.makeTensorInfo(l,a.dtype,a.values)}},HN={kernelName:zt,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r,filter:i}=e,{strides:o,pad:a,dilations:s}=n,l=t,u=l.data.get(r.dataId).values,c=r.shape.length,p=l.data.get(i.dataId).values,d=i.shape.length,{batchSize:h,inHeight:f,inWidth:m,inChannels:g,outHeight:y,outWidth:v,padInfo:b,strideHeight:x,strideWidth:w,filterHeight:_,filterWidth:C,dilationHeight:S,dilationWidth:k,outShape:E}=Rf.computeDilation2DInfo(r.shape,i.shape,o,a,"NHWC",s),T=Si.sizeFromShape(E),I=E.length,P=Si.getArrayFromDType(r.dtype,T);for(let e=0;e<h;++e)for(let t=0;t<y;++t){let n=t*x-b.top;for(let o=0;o<v;++o){let a=o*w-b.left;for(let s=0;s<g;++s){let l=Number.MIN_SAFE_INTEGER;for(let t=0;t<_;++t){let o=n+t*S;if(o>=0&&o<f)for(let n=0;n<C;++n){let h=a+n*k;if(h>=0&&h<m){let a=Si.locToIndex([e,o,h,s],c,Si.computeStrides(r.shape)),f=Si.locToIndex([t,n,s],d,Si.computeStrides(i.shape)),m=u[a]+p[f];m>l&&(l=m)}}}P[Si.locToIndex([e,t,o,s],I,Si.computeStrides(E))]=l}}}return{dataId:l.write(Si.toTypedArray(P,r.dtype),E,r.dtype),shape:E,dtype:r.dtype}}},QN={kernelName:qt,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r,filter:i,dy:o}=e,{strides:a,pad:s,dilations:l}=n,u=t,c=Si.toNestedArray(r.shape,u.data.get(r.dataId).values),p=Si.toNestedArray(i.shape,u.data.get(i.dataId).values),{batchSize:d,inHeight:h,inWidth:f,inChannels:m,outHeight:g,outWidth:y,padInfo:v,strideHeight:b,strideWidth:x,filterHeight:w,filterWidth:_,dilationHeight:C,dilationWidth:S,outShape:k}=Rf.computeDilation2DInfo(r.shape,i.shape,a,s,"NHWC",l);Si.assert(o.rank===k.length,()=>`Error in ${qt}, dy must have the same rank as output ${k.length}, but got ${o.rank}`);let E=Si.toNestedArray(k,u.data.get(o.dataId).values),T=Si.makeZerosNestedTypedArray(i.shape,i.dtype);for(let e=0;e<d;++e)for(let t=0;t<g;++t){let n=t*b-v.top;for(let r=0;r<y;++r){let i=r*x-v.left;for(let o=0;o<m;++o){let a=Number.MIN_SAFE_INTEGER,s=0,l=0;for(let t=0;t<w;++t){let r=n+t*C;if(r>=0&&r<h)for(let n=0;n<_;++n){let u=i+n*S;if(u>=0&&u<f){let i=c[e][r][u][o]+p[t][n][o];i>a&&(a=i,s=t,l=n)}}}T[s][l][o]+=E[e][t][r][o]}}}return{dataId:u.write(Si.toTypedArray(T,r.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},GN={kernelName:jt,backendName:"cpu",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r,filter:i,dy:o}=e,{strides:a,pad:s,dilations:l}=n,u=t,c=Si.toNestedArray(r.shape,u.data.get(r.dataId).values),p=Si.toNestedArray(i.shape,u.data.get(i.dataId).values),{batchSize:d,inHeight:h,inWidth:f,inChannels:m,outHeight:g,outWidth:y,padInfo:v,strideHeight:b,strideWidth:x,filterHeight:w,filterWidth:_,dilationHeight:C,dilationWidth:S,outShape:k}=Rf.computeDilation2DInfo(r.shape,i.shape,a,s,"NHWC",l);Si.assert(o.rank===k.length,()=>`Error in ${jt}, dy must have the same rank as output ${k.length}, but got ${o.rank}`);let E=Si.toNestedArray(k,u.data.get(o.dataId).values),T=Si.makeZerosNestedTypedArray(r.shape,r.dtype);for(let e=0;e<d;++e)for(let t=0;t<g;++t){let n=t*b-v.top;for(let r=0;r<y;++r){let i=r*x-v.left;for(let o=0;o<m;++o){let a=Number.MIN_SAFE_INTEGER,s=n<0?0:n,l=i<0?0:i;for(let t=0;t<w;++t){let r=n+t*C;if(r>=0&&r<h)for(let n=0;n<_;++n){let u=i+n*S;if(u>=0&&u<f){let i=c[e][r][u][o]+p[t][n][o];i>a&&(a=i,s=r,l=u)}}}T[e][s][l][o]+=E[e][t][r][o]}}}return{dataId:u.write(Si.toTypedArray(T,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};var KN={kernelName:$t,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{image:i}=t,{canvas:o,options:a}=r,{contextOptions:s,imageOptions:l}=a||{},u=(null==l?void 0:l.alpha)||1,c=(null==s?void 0:s.contextType)||"2d";if("2d"!==c)throw new Error(`Context type ${s.contextType} is not supported by the CPU backend.`);let p=o.getContext(c,(null==s?void 0:s.contextAttributes)||{});if(null==p)throw new Error(`Could not get the context with ${c} type.`);let[d,h]=i.shape.slice(0,2),f=2===i.shape.length?1:i.shape[2],m=n.data.get(i.dataId).values,g="float32"===i.dtype?255:1,y=new Uint8ClampedArray(h*d*4);for(let e=0;e<d*h;++e){let t=[0,0,0,255*u];for(let n=0;n<f;n++){let r=m[e*f+n];if("float32"===i.dtype){if(r<0||r>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${r}.`)}else if("int32"===i.dtype&&(r<0||r>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${r}.`);1===f?(t[0]=r*g,t[1]=r*g,t[2]=r*g):t[n]=r*g}let n=4*e;y[n+0]=Math.round(t[0]),y[n+1]=Math.round(t[1]),y[n+2]=Math.round(t[2]),y[n+3]=Math.round(t[3])}o.width=h,o.height=d;let v=new ImageData(y,h,d);return p.putImageData(v,0,0),i}};function JN(e){let t,{inputs:n,backend:r,attrs:i}=e,{x:o}=n,{axis:a,keepDims:s}=i;GT(o,"sum"),t="bool"===o.dtype?uI({inputs:{x:o},backend:r,attrs:{dtype:"int32"}}):iI({inputs:{x:o},backend:r});let l=t.shape.length,u=Si.parseAxisParam(a,t.shape),c=Rf.getAxesPermutation(u,l),p=u,d=t;null!=c&&(d=kP({inputs:{x:t},backend:r,attrs:{perm:c}}),p=Rf.getInnerMostAxes(p.length,l)),Rf.assertAxesAreInnerMostDims("sum",p,d.shape.length);let[h,f]=Rf.computeOutAndReduceShapes(d.shape,p),m=rI(r,h,Rf.upcastType(d.dtype,"int32")),g=Si.sizeFromShape(f),y=r.data.get(m.dataId).values,v=r.data.get(d.dataId).values;for(let e=0;e<y.length;++e){let t=e*g,n=0;for(let e=0;e<g;++e)n+=v[t+e];y[e]=n}if(s){let e=m;m=MO({inputs:{x:m},backend:r,attrs:{shape:Rf.expandShapeToKeepDim(m.shape,u)}}),r.disposeIntermediateTensorInfo(e)}return r.disposeIntermediateTensorInfo(t),null!=c&&r.disposeIntermediateTensorInfo(d),m}var XN={kernelName:Nr,backendName:"cpu",kernelFunc:JN};var YN={kernelName:Ut,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{equation:i}=r,o=t,{allDims:a,summedDims:s,idDims:l}=Rf.decodeEinsumEquation(i,o.length);Rf.checkEinsumDimSizes(a.length,l,o);let{path:u,steps:c}=Rf.getEinsumComputePath(s,l),p=c.length,d=null,h=a.length,f=[];for(let e=0;e<p;++e){for(let t of c[e]){let e,{permutationIndices:r,expandDims:i}=Rf.getEinsumPermutation(h,l[t]);Rf.isIdentityPermutation(r)?e=o[t]:(e=kP({inputs:{x:o[t]},backend:n,attrs:{perm:r}}),f.push(e));let a=e.shape.slice();for(let e=0;e<i.length;++e)a.splice(i[e],0,1);Si.arraysEqual(e.shape,a)||(e=MO({inputs:{x:e},backend:n,attrs:{shape:a}}),f.push(e)),null===d?d=e:(d=yP({inputs:{a:e,b:d},backend:n}),f.push(d))}e<p-1&&(u[e]>=0&&(d=JN({inputs:{x:d},backend:n,attrs:{axis:u[e]-(a.length-h),keepDims:!1}}),f.push(d)),h--)}for(let e of f)e!==d&&n.disposeIntermediateTensorInfo(e);return d}};var ZN={kernelName:Ht,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{dy:r,y:i}=t;GT([r,i],"eluGrad");let o=new Float32Array(Si.sizeFromShape(i.shape)),a=n.data.get(i.dataId).values,s=n.data.get(r.dataId).values;for(let e=0;e<a.length;++e){let t=a[e];o[e]=t>=0?s[e]:s[e]*(t+1)}return n.makeTensorInfo(i.shape,"float32",o)}},eR=Rf.ERF_P,tR=Rf.ERF_A1,nR=Rf.ERF_A2,rR=Rf.ERF_A3,iR=Rf.ERF_A4,oR=Rf.ERF_A5,aR=CI(Qt,e=>{let t=Math.sign(e),n=Math.abs(e),r=1/(1+eR*n);return t*(1-((((oR*r+iR)*r+rR)*r+nR)*r+tR)*r*Math.exp(-n*n))}),sR={kernelName:Qt,backendName:"cpu",kernelFunc:aR};function lR(e){let{inputs:t,backend:n,attrs:r}=e,{input:i}=t,{dim:o}=r,a=i.shape.length,s=i.shape.slice(),l=o;return o<0&&(Si.assert(-(a+1)<=o,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),l=a+o+1),s.splice(l,0,1),MO({inputs:{x:i},backend:n,attrs:{shape:s}})}var uR={kernelName:Jt,backendName:"cpu",kernelFunc:lR},cR=eI((e,t)=>e/t),pR=pI(Bt,cR),dR={kernelName:Bt,backendName:"cpu",kernelFunc:pR};function hR(e,t,n){let r=e.shape,i=r[0],o=r[1],a=n.data.get(e.dataId),s=a.complexTensorInfos.real,l=a.complexTensorInfos.imag,u=[i,o],c=Si.sizeFromShape(u),p=Si.getTypedArrayFromDType("float32",c),d=Si.getTypedArrayFromDType("float32",c);for(let e=0;e<i;e++){let r=KP({inputs:{x:s},backend:n,attrs:{begin:[e,0],size:[1,o]}}),i=KP({inputs:{x:l},backend:n,attrs:{begin:[e,0],size:[1,o]}}),a=tI({inputs:{real:r,imag:i},backend:n}),{real:u,imag:c}=fR(a,t,n),h=Rf.mergeRealAndImagArrays(u,c);for(let t=0;t<o;t++){let n=Rf.getComplexWithIndex(h,t);p[e*o+t]=n.real,d[e*o+t]=n.imag}n.disposeIntermediateTensorInfo(r),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(a)}let h=n.makeTensorInfo(u,"float32",p),f=n.makeTensorInfo(u,"float32",d),m=tI({inputs:{real:h,imag:f},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),m}function fR(e,t,n){let r=Si.sizeFromShape(e.shape),i=n.data.get(e.dataId),o=n.data.get(i.complexTensorInfos.real.dataId).values,a=n.data.get(i.complexTensorInfos.imag.dataId).values;if(function(e){return 0==(e&e-1)}(r)){let i=function e(t,n,r,i,o){if(1===r)return{real:t,imag:n};let a=Rf.mergeRealAndImagArrays(t,n),s=r/2,l=Rf.complexWithEvenIndex(a),u=l.real,c=l.imag,p=[u.length],d=o.makeTensorInfo(p,"float32",u),h=o.makeTensorInfo(p,"float32",c),f=tI({inputs:{real:d,imag:h},backend:o}),m=Rf.complexWithOddIndex(a),g=m.real,y=m.imag,v=[g.length],b=o.makeTensorInfo(v,"float32",g),x=o.makeTensorInfo(v,"float32",y),w=tI({inputs:{real:b,imag:x},backend:o}),_=e(u,c,s,i,o),C=_.real,S=_.imag,k=[C.length],E=o.makeTensorInfo(k,"float32",C),T=o.makeTensorInfo(k,"float32",S),I=tI({inputs:{real:E,imag:T},backend:o}),P=e(g,y,s,i,o),O=P.real,N=P.imag,R=[O.length],A=o.makeTensorInfo(R,"float32",O),D=o.makeTensorInfo(R,"float32",N),V=tI({inputs:{real:A,imag:D},backend:o}),M=Rf.exponents(r,i),F=[M.real.length],L=o.makeTensorInfo(F,"float32",M.real),z=o.makeTensorInfo(F,"float32",M.imag),j=tI({inputs:{real:L,imag:z},backend:o}),q=yP({inputs:{a:j,b:V},backend:o}),$=mI({inputs:{a:I,b:q},backend:o}),B=gO({inputs:{a:I,b:q},backend:o}),U=aI({inputs:{input:$},backend:o}),W=aI({inputs:{input:B},backend:o}),H=wN({inputs:{input:$},backend:o}),Q=wN({inputs:{input:B},backend:o}),G=CN({inputs:[U,W],backend:o,attrs:{axis:0}}),K=CN({inputs:[H,Q],backend:o,attrs:{axis:0}}),J=o.data.get(G.dataId).values,X=o.data.get(K.dataId).values;return o.disposeIntermediateTensorInfo(d),o.disposeIntermediateTensorInfo(h),o.disposeIntermediateTensorInfo(f),o.disposeIntermediateTensorInfo(b),o.disposeIntermediateTensorInfo(x),o.disposeIntermediateTensorInfo(w),o.disposeIntermediateTensorInfo(E),o.disposeIntermediateTensorInfo(T),o.disposeIntermediateTensorInfo(I),o.disposeIntermediateTensorInfo(A),o.disposeIntermediateTensorInfo(D),o.disposeIntermediateTensorInfo(V),o.disposeIntermediateTensorInfo(L),o.disposeIntermediateTensorInfo(z),o.disposeIntermediateTensorInfo(j),o.disposeIntermediateTensorInfo(q),o.disposeIntermediateTensorInfo($),o.disposeIntermediateTensorInfo(B),o.disposeIntermediateTensorInfo(U),o.disposeIntermediateTensorInfo(H),o.disposeIntermediateTensorInfo(W),o.disposeIntermediateTensorInfo(Q),o.disposeIntermediateTensorInfo(G),o.disposeIntermediateTensorInfo(K),{real:J,imag:X}}(o,a,r,t,n),s=[e.shape[0],e.shape[1]];if(t){let e=n.makeTensorInfo(s,"float32",i.real),t=n.makeTensorInfo(s,"float32",i.imag),o=n.makeTensorInfo([],"float32",Si.createScalarValue(r,"float32")),a=iI({inputs:{x:o},backend:n}),l=dR.kernelFunc({inputs:{a:e,b:o},backend:n}),u=dR.kernelFunc({inputs:{a:t,b:a},backend:n}),c=n.data.get(l.dataId).values,p=n.data.get(u.dataId).values;return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(u),{real:c,imag:p}}return i}{let e=function(e,t,n){let r=new Float32Array(2*t);for(let i=0;i<t;i++){let o=0,a=0;for(let r=0;r<t;r++){let s=Rf.exponent(i*r,t,n),l=Rf.getComplexWithIndex(e,r);o+=l.real*s.real-l.imag*s.imag,a+=l.real*s.imag+l.imag*s.real}n&&(o/=t,a/=t),Rf.assignToTypedArray(r,o,a,i)}return r}(Rf.mergeRealAndImagArrays(o,a),r,t);return Rf.splitRealAndImagArrays(e)}}var mR={kernelName:Yt,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{input:r}=t,i=Si.sizeFromShape(r.shape),o=r.shape[r.shape.length-1],a=MO({inputs:{x:r},backend:n,attrs:{shape:[i/o,o]}}),s=hR(a,!1,n),l=MO({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),l}};function gR(e){let{backend:t,attrs:n}=e,{shape:r,value:i,dtype:o}=n,a=o||Si.inferDtype(i),s=Si.getArrayFromDType(a,Si.sizeFromShape(r));return function(e,t,n){e.fill(t)}(s,i),t.makeTensorInfo(r,a,s)}var yR={kernelName:Zt,backendName:"cpu",kernelFunc:gR};var vR={kernelName:en,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{image:r}=e,i=n,o=Si.getTypedArrayFromDType(r.dtype,Si.sizeFromShape(r.shape)),[a,s,l,u]=r.shape,c=i.data.get(r.dataId).values;for(let e=0;e<a;e++){let t=e*l*s*u;for(let e=0;e<s;e++){let n=e*(l*u);for(let e=0;e<l;e++){let r=e*u;for(let i=0;i<u;i++){let a=Math.round(l-e-1),s=t+n+r+i,p=c[s];if(a>=0&&a<l){p=c[t+n+a*u+i]}o[s]=p}}}}return{dataId:i.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};var bR={kernelName:ui,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o,bias:a,preluActivationWeights:s}=t,{strides:l,pad:u,dataFormat:c,dilations:p,dimRoundingMode:d,activation:h,leakyreluAlpha:f}=r,m=kN({inputs:{x:i,filter:o},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:p,dimRoundingMode:d}});if(a){let e=m;if("NCHW"===c&&1===a.shape.length&&1!==a.shape[0]){let e=MO({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});m=mI({inputs:{a:m,b:e},backend:n}),n.disposeIntermediateTensorInfo(e)}else m=mI({inputs:{a:m,b:a},backend:n});n.disposeIntermediateTensorInfo(e)}if(h){let e=m;if("NCHW"===c&&"prelu"===h&&1===s.shape.length&&1!==s.shape[0]){let e=MO({inputs:{x:s},backend:n,attrs:{shape:[s.shape[0],1,1]}});m=VO(n,m,h,e,f),n.disposeIntermediateTensorInfo(e)}else m=VO(n,m,h,s,f);n.disposeIntermediateTensorInfo(e)}return m}};var xR={kernelName:ci,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o,bias:a,preluActivationWeights:s}=t,{strides:l,pad:u,dataFormat:c,dilations:p,dimRoundingMode:d,activation:h,leakyreluAlpha:f}=r,m=qN({inputs:{x:i,filter:o},backend:n,attrs:{strides:l,pad:u,dataFormat:c,dilations:p,dimRoundingMode:d}});if(a){let e=m;m=mI({inputs:{a:m,b:a},backend:n}),n.disposeIntermediateTensorInfo(e)}if(h){let e=m;m=VO(n,m,h,s,f),n.disposeIntermediateTensorInfo(e)}return m}};var wR={kernelName:an,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{params:r,indices:i}=t,o=Si.sizeFromShape(r.shape),a=i.shape,s=a[a.length-1],[l,u,c,p]=Rf.prepareAndValidate(r,i);if(0===u)return n.makeTensorInfo(l,r.dtype,[]);let d=UI(n.data.get(i.dataId).values,n.bufferSync(r),r.dtype,u,s,c,p,r.shape,o);return n.makeTensorInfo(l,r.dtype,d.values)}};var _R={kernelName:on,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,indices:o}=t,{axis:a,batchDims:s}=r;GT([i,o],"gatherV2");let l=Si.parseAxisParam(a,i.shape)[0],u=n.data.get(o.dataId).values,c=i.shape[l];for(let e=0;e<u.length;++e){let t=u[e];Si.assert(t<=c-1&&t>=0,()=>`GatherV2: the index value ${t} is not in [0, ${c-1}]`)}let p=s;null==s&&(p=0);let d=Si.sizeFromShape(o.shape),h=Rf.segment_util.collectGatherOpShapeInfo(i,o,l,p),f=MO({inputs:{x:i},backend:n,attrs:{shape:[h.batchSize,h.outerSize,h.dimSize,h.sliceSize]}}),m=MO({inputs:{x:o},backend:n,attrs:{shape:[h.batchSize,d/h.batchSize]}}),g=[h.batchSize,h.outerSize,d/h.batchSize,h.sliceSize],y=n.bufferSync(m),v=WI(n.bufferSync(f),y,g);return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(h.outputShape,v.dtype,v.values)}};var CR={kernelName:cn,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{input:r}=t,i=Si.sizeFromShape(r.shape),o=r.shape[r.shape.length-1],a=MO({inputs:{x:r},backend:n,attrs:{shape:[i/o,o]}}),s=hR(a,!0,n),l=MO({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(s),l}},SR=CI(dn,e=>Number.isFinite(e)?1:0,"bool"),kR={kernelName:dn,backendName:"cpu",kernelFunc:SR},ER=CI(hn,e=>Math.abs(e)===1/0?1:0,"bool"),TR={kernelName:hn,backendName:"cpu",kernelFunc:ER},IR=CI(fn,e=>Number.isNaN(e)?1:0,"bool"),PR={kernelName:fn,backendName:"cpu",kernelFunc:IR};var OR={kernelName:vn,backendName:"cpu",kernelFunc:function(e){let{backend:t,attrs:n}=e,{start:r,stop:i,num:o}=n,a=iP(r,i,o);return t.makeTensorInfo([a.length],"float32",a)}},NR=CI(xn,e=>Math.log1p(e)),RR={kernelName:xn,backendName:"cpu",kernelFunc:NR},AR=eI((e,t)=>e&&t),DR=pI(wn,AR,null,"bool"),VR={kernelName:wn,backendName:"cpu",kernelFunc:DR},MR=CI(_n,e=>e?0:1,"bool"),FR={kernelName:_n,backendName:"cpu",kernelFunc:MR},LR=eI((e,t)=>e||t),zR=pI(Cn,LR,null,"bool"),jR={kernelName:Cn,backendName:"cpu",kernelFunc:zR};var qR={kernelName:Tn,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{depthRadius:o,bias:a,alpha:s,beta:l}=r;GT(i,"LRN");let u=i.shape[3],c=u-1,p=n.data.get(i.dataId).values,d=Si.sizeFromShape(i.shape),h=new Float32Array(d);function f(e){let t=e%u,n=e-t+Math.max(0,t-o),r=e-t+Math.min(t+o,c),i=0;for(;n<=r;n++){let e=p[n];i+=e*e}return i}for(let e=0;e<d;e++){let t=f(e),n=p[e]*Math.pow(a+s*t,-l);h[e]=n}return n.makeTensorInfo(i.shape,i.dtype,h)}};var $R={kernelName:In,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,y:o,dy:a}=t,{depthRadius:s,bias:l,alpha:u,beta:c}=r;GT(a,"LRNGrad");let p=Si.sizeFromShape(a.shape),d=a.shape[3],h=n.data.get(a.dataId).values,f=n.data.get(i.dataId).values,m=n.data.get(o.dataId).values,g=new Float32Array(p),y=p;for(let e=0;e<y;e++){let t=e%d,n=e-t+Math.max(0,t-s),r=e-t+Math.min(d,t+s+1),i=0;for(let e=n;e<r;e++)i+=Math.pow(f[e],2);i=u*i+l;for(let t=n;t<r;t++){let n=-2*u*c*f[t]*m[e]/i;e===t&&(n+=Math.pow(i,-c)),n*=h[e],g[t]+=n}}return n.makeTensorInfo(a.shape,i.dtype,g)}};function BR(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reductionIndices:o,keepDims:a}=r,s=n,l=i.shape,u=l.length,c=Si.parseAxisParam(o,l),p=c,d=Rf.getAxesPermutation(p,u),h=s.data.get(i.dataId).values;if(null!=d){let e=new Array(u);for(let t=0;t<e.length;t++)e[t]=l[d[t]];h=SP(h,l,i.dtype,d,e),p=Rf.getInnerMostAxes(p.length,u),l=e}GT(i,"max"),Rf.assertAxesAreInnerMostDims("max",p,u);let[f,m]=Rf.computeOutAndReduceShapes(l,p),g=lP(h,Si.sizeFromShape(m),f,i.dtype),y=s.write(g,f,i.dtype),v=f;return a&&(v=Rf.expandShapeToKeepDim(f,c)),{dataId:y,shape:v,dtype:i.dtype}}var UR={kernelName:On,backendName:"cpu",kernelFunc:BR};var WR={kernelName:Rn,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t;GT(i,"maxPool");let{filterSize:o,strides:a,pad:s,dimRoundingMode:l}=r;Si.assert(Rf.eitherStridesOrDilationsAreOne(a,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '1'`);let u,c=Rf.computePool2DInfo(i.shape,o,a,1,s,l);if(1===c.filterWidth&&1===c.filterHeight&&Si.arraysEqual(c.inShape,c.outShape))u=iI({inputs:{x:i},backend:n});else{let e=n.data.get(i.dataId).values,t=Si.computeStrides(i.shape),r=sN(e,i.shape,i.dtype,t,c,"max");u=n.makeTensorInfo(c.outShape,i.dtype,r.values)}return u}};var HR={kernelName:Dn,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:o,strides:a,pad:s,dimRoundingMode:l,dataFormat:u}=r;GT(i,"maxPool3d");let c=Rf.computePool3DInfo(i.shape,o,a,1,s,l,u),p=uN(n.data.get(i.dataId).values,i.shape,i.dtype,Si.computeStrides(i.shape),c,"max");return n.makeTensorInfo(p.shape,"float32",p.values)}};var QR={kernelName:Vn,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,{filterSize:a,strides:s,pad:l,dimRoundingMode:u}=r;GT([i,o],"maxPool3DGrad");let c=Rf.computePool3DInfo(o.shape,a,s,1,l,u),p=function(e,t){let n=za(t.outShape,"int32"),r=t.strideDepth,i=t.strideHeight,o=t.strideWidth,a=t.dilationDepth,s=t.dilationHeight,l=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,p=t.effectiveFilterWidth,d=t.padInfo.front,h=t.padInfo.top,f=t.padInfo.left;for(let m=0;m<t.batchSize;++m)for(let g=0;g<t.inChannels;++g)for(let y=0;y<t.outDepth;++y){let v=y*r-d,b=v;for(;b<0;)b+=a;let x=Math.min(t.inDepth,u+v);for(let r=0;r<t.outHeight;++r){let u=r*i-h,d=u;for(;d<0;)d+=s;let w=Math.min(t.inHeight,c+u);for(let i=0;i<t.outWidth;++i){let h=i*o-f,_=h;for(;_<0;)_+=l;let C=Math.min(t.inWidth,p+h),S=Number.NEGATIVE_INFINITY,k=-1;for(let t=b;t<x;t+=a){let n=t-v;for(let r=d;r<w;r+=s){let i=r-u;for(let o=_;o<C;o+=l){let a=o-h,s=e.get(m,t,r,o,g);s>=S&&(S=s,k=n*c*p+i*c+a)}}}n.set(k,m,y,r,i,g)}}}return n}(n.bufferSync(o),c),d=c.strideDepth,h=c.strideHeight,f=c.strideWidth,m=c.dilationDepth,g=c.dilationHeight,y=c.dilationWidth,v=c.effectiveFilterDepth,b=c.effectiveFilterHeight,x=c.effectiveFilterWidth,w=v-1-c.padInfo.front,_=x-1-c.padInfo.left,C=b-1-c.padInfo.top,S=za(o.shape,"float32"),k=n.bufferSync(i);for(let e=0;e<c.batchSize;++e)for(let t=0;t<c.inChannels;++t)for(let n=0;n<c.inDepth;++n)for(let r=0;r<c.inHeight;++r)for(let i=0;i<c.inWidth;++i){let o=n-w,a=r-C,s=i-_,l=0;for(let n=0;n<v;n+=m){let r=(o+n)/d;if(!(r<0||r>=c.outDepth||Math.floor(r)!==r))for(let i=0;i<b;i+=g){let o=(a+i)/h;if(!(o<0||o>=c.outHeight||Math.floor(o)!==o))for(let a=0;a<x;a+=y){let u=(s+a)/f;if(u<0||u>=c.outWidth||Math.floor(u)!==u)continue;let d=v*b*x-1-p.get(e,r,o,u,t)===n*b*x+i*x+a?1:0;0!==d&&(l+=k.get(e,r,o,u,t)*d)}}}S.set(l,e,n,r,i,t)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}};var GR={kernelName:An,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o,output:a}=t,s=o;GT([o,a],"maxPoolGrad");let{filterSize:l,strides:u,pad:c,dimRoundingMode:p}=r,d=Rf.computePool2DInfo(s.shape,l,u,1,c,p),h=n.data.get(s.dataId).values,f=za(d.outShape,s.dtype,lN(h,s.shape,s.dtype,d).values),m=d.strideHeight,g=d.strideWidth,y=d.dilationHeight,v=d.dilationWidth,b=d.effectiveFilterHeight,x=d.effectiveFilterWidth,w=x-1-d.padInfo.left,_=b-1-d.padInfo.top,C=za(s.shape,"float32"),S=n.data.get(i.dataId).values,k=za(i.shape,"float32",S);for(let e=0;e<d.batchSize;++e)for(let t=0;t<d.inChannels;++t)for(let n=0;n<d.inHeight;++n)for(let r=0;r<d.inWidth;++r){let i=n-_,o=r-w,a=0;for(let n=0;n<b;n+=y){let r=(i+n)/m;if(!(r<0||r>=d.outHeight||Math.floor(r)!==r))for(let i=0;i<x;i+=v){let s=(o+i)/g;if(s<0||s>=d.outWidth||Math.floor(s)!==s)continue;let l=b*x-1-f.get(e,r,s,t)===n*x+i?1:0;0!==l&&(a+=k.get(e,r,s,t)*l)}}C.set(a,e,n,r,t)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}};var KR={kernelName:Mn,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{x:r}=e,{filterSize:i,strides:o,pad:a,includeBatchInIndex:s}=t,l=n;GT(r,"MaxPoolWithArgmax");let u=l.data.get(r.dataId).values,c=Rf.computePool2DInfo(r.shape,i,o,[1,1],a),[p,d]=function(e,t,n,r,i){let o=sN(e,0,n,Si.computeStrides(t),i,"max"),a=lN(e,t,n,i,!0,r);return[o.values,a.values]}(u,r.shape,r.dtype,s,c),h=l.write(p,c.outShape,r.dtype),f=l.write(d,c.outShape,r.dtype);return[{dataId:h,shape:c.outShape,dtype:r.dtype},{dataId:f,shape:c.outShape,dtype:"int32"}]}};var JR={kernelName:Fn,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r,s=Si.parseAxisParam(o,i.shape),l=Rf.computeOutAndReduceShapes(i.shape,s)[1],u=Si.sizeFromShape(l),c=[],p=n.makeTensorInfo([],"float32",new Float32Array([u]));c.push(p);let d=uI({inputs:{x:i},backend:n,attrs:{dtype:"float32"}});c.push(d);let h=pR({inputs:{a:d,b:p},backend:n});c.push(h);let f=JN({inputs:{x:h},backend:n,attrs:{axis:o,keepDims:a}});return c.forEach(e=>n.disposeIntermediateTensorInfo(e)),f}};var XR={kernelName:Ln,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r;GT(i,"min");let s=Si.parseAxisParam(o,i.shape),l=s,u=Rf.getAxesPermutation(l,i.shape.length),c=i;null!=u&&(c=kP({inputs:{x:i},backend:n,attrs:{perm:u}}),l=Rf.getInnerMostAxes(l.length,i.shape.length)),Rf.assertAxesAreInnerMostDims("min",l,c.shape.length);let[p,d]=Rf.computeOutAndReduceShapes(c.shape,l),h=Si.sizeFromShape(d),f=Si.makeZerosTypedArray(Si.sizeFromShape(p),c.dtype),m=n.data.get(c.dataId).values;for(let e=0;e<f.length;++e){let t=e*h,n=m[t];for(let e=0;e<h;++e){let r=m[t+e];(Number.isNaN(r)||r<n)&&(n=r)}f[e]=n}null!=u&&n.disposeIntermediateTensorInfo(c);let g=n.makeTensorInfo(p,c.dtype,f);if(a){let e=MO({inputs:{x:g},backend:n,attrs:{shape:Rf.expandShapeToKeepDim(p,s)}});return n.disposeIntermediateTensorInfo(g),e}return g}};var YR={kernelName:jn,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:o,mode:a}=r;GT(i,"mirrorPad");let s=o.map((e,t)=>e[0]+i.shape[t]+e[1]),l=o.map(e=>e[0]),u=o.map((e,t)=>e[0]+i.shape[t]),c="reflect"===a?0:1,p=n.data.get(i.dataId).values,d=i.shape.length,h=Si.computeStrides(i.shape),f=Si.sizeFromShape(s),m=s.length,g=Si.computeStrides(s),y=Si.getTypedArrayFromDType(i.dtype,f);for(let e=0;e<f;e++){let t=Si.indexToLoc(e,m,g);for(let e=0;e<m;e++)t[e]<l[e]?t[e]=2*l[e]-t[e]-c:t[e]>=u[e]&&(t[e]=2*(u[e]-1)-t[e]+c);t=t.map((e,t)=>e-l[t]);let n=Si.locToIndex(t,d,h);y[e]=p[n]}return{dataId:n.write(y,s,i.dtype),shape:s,dtype:i.dtype}}},ZR=eI((e,t)=>{let n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}),eA=pI(qn,ZR),tA={kernelName:qn,backendName:"cpu",kernelFunc:eA},nA=x(R());function rA(e){let{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{dim:o}=r,a=i.shape.length,s=o;if(-1===s&&(s=a-1),s!==a-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${a} and dim was ${s}`);let l=Si.parseAxisParam([s],i.shape),u=BR({inputs:{x:i},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),c=Rf.expandShapeToKeepDim(u.shape,l),p=MO({inputs:{x:u},backend:n,attrs:{shape:c}}),d=gO({inputs:{a:i,b:p},backend:n}),h=AI({inputs:{x:d},backend:n}),f=JN({inputs:{x:h},backend:n,attrs:{axis:l,keepDims:!1}}),m=MO({inputs:{x:f},backend:n,attrs:{shape:c}}),g=pR({inputs:{a:h,b:m},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}var iA={kernelName:Dr,backendName:"cpu",kernelFunc:rA};var oA={kernelName:$n,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{numSamples:o,seed:a,normalized:s}=r;GT(i,"multinomial");let l=s?i:rA({inputs:{logits:i},backend:n,attrs:{dim:-1}}),u=l.shape[0],c=l.shape[1],p=n.data.get(l.dataId).values,d=[u,o],h=Si.makeZerosTypedArray(Si.sizeFromShape(d),"int32");for(let e=0;e<u;++e){let t=e*c,n=new Float32Array(c-1);n[0]=p[t];for(let e=1;e<n.length;++e)n[e]=n[e-1]+p[t+e];let r=nA.alea(a.toString()),i=e*o;for(let e=0;e<o;++e){let t=r();h[i+e]=n.length;for(let r=0;r<n.length;r++)if(t<n[r]){h[i+e]=r;break}}}return s||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(d,"int32",h)}},aA=Vm.nonMaxSuppressionV3Impl;var sA={kernelName:Hn,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l}=r;GT(i,"NonMaxSuppression");let u=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values,{selectedIndices:p}=aA(u,c,a,s,l);return n.makeTensorInfo([p.length],"int32",new Int32Array(p))}},lA=Vm.nonMaxSuppressionV4Impl;var uA={kernelName:Qn,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:u}=r;GT(i,"NonMaxSuppressionPadded");let c=n.data.get(i.dataId).values,p=n.data.get(o.dataId).values,{selectedIndices:d,validOutputs:h}=lA(c,p,a,s,l,u);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},cA=Vm.nonMaxSuppressionV5Impl;var pA={kernelName:Gn,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=r;GT(i,"NonMaxSuppressionWithScore");let c=n.data.get(i.dataId).values,p=n.data.get(o.dataId).values,d=a,h=s,f=l,m=u,{selectedIndices:g,selectedScores:y}=cA(c,p,d,h,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}};var dA={kernelName:Jn,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{indices:i}=t,{dtype:o,depth:a,onValue:s,offValue:l}=r;GT(i,"oneHot");let u=Si.sizeFromShape(i.shape),c=new Float32Array(u*a);c.fill(l);let p=n.data.get(i.dataId).values;for(let e=0;e<u;++e)p[e]>=0&&p[e]<a&&(c[e*a+p[e]]=s);return n.makeTensorInfo([...i.shape,a],o,c)}};function hA(e){let{inputs:t,backend:n}=e,{x:r}=t;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){let e=aI({inputs:{input:r},backend:n}),t=hA({inputs:{x:e},backend:n}),i=wN({inputs:{input:r},backend:n}),o=hA({inputs:{x:i},backend:n}),a=tI({inputs:{real:t,imag:o},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),a}return gR({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var fA={kernelName:ii,backendName:"cpu",kernelFunc:hA};var mA={kernelName:Kn,backendName:"cpu",kernelFunc:function e(t){let{inputs:n,backend:r}=t,{x:i}=n;if("string"===i.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===i.dtype){let t=aI({inputs:{input:i},backend:r}),n=e({inputs:{x:t},backend:r}),o=wN({inputs:{input:i},backend:r}),a=hA({inputs:{x:o},backend:r}),s=tI({inputs:{real:n,imag:a},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(a),s}return gR({backend:r,attrs:{shape:i.shape,value:1,dtype:i.dtype}})}};function gA(e){let{inputs:t,backend:n,attrs:r}=e,{axis:i}=r;if(1===t.length)return lR({inputs:{input:t[0]},backend:n,attrs:{dim:i}});let o=t[0].shape,a=t[0].dtype;t.forEach(e=>{Si.assertShapesMatch(o,e.shape,"All tensors passed to stack must have matching shapes"),Si.assert(a===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});let s=[],l=CN({inputs:t.map(e=>{let t=lR({inputs:{input:e},backend:n,attrs:{dim:i}});return s.push(t),t}),backend:n,attrs:{axis:i}});return s.forEach(e=>n.disposeIntermediateTensorInfo(e)),l}var yA={kernelName:Xn,backendName:"cpu",kernelFunc:gA};var vA={kernelName:Yn,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:o,constantValue:a}=r;GT(i,"pad");let s=o.map((e,t)=>e[0]+i.shape[t]+e[1]),l=o.map(e=>e[0]),u=n.data.get(i.dataId).values,c=Si.sizeFromShape(i.shape),p=i.shape.length,d=Si.computeStrides(i.shape),h=Si.sizeFromShape(s),f=s.length,m=Si.computeStrides(s),g=Si.getTypedArrayFromDType(i.dtype,h);0!==a&&g.fill(a);for(let e=0;e<c;e++){let t=Si.indexToLoc(e,p,d).map((e,t)=>e+l[t]);g[Si.locToIndex(t,f,m)]=u[e]}return{dataId:n.write(g,s,i.dtype),shape:s,dtype:i.dtype}}},bA=eI((e,t)=>Math.pow(e,t)),xA=pI(er,bA),wA={kernelName:er,backendName:"cpu",kernelFunc:xA};var _A={kernelName:rr,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:i,paramsDenseValues:o,indices:a}=t,{outputRaggedRank:s}=r,l=i.map(e=>n.data.get(e.dataId).values),u=i.map(e=>e.shape),c=n.data.get(o.dataId).values,p=n.data.get(a.dataId).values,[d,h,f]=RP(l,u,c,o.shape,o.dtype,p,a.shape),m=d.map(e=>n.makeTensorInfo([e.length],"int32",e)),g=n.makeTensorInfo(f,o.dtype,h);return m.concat([g])}};var CA={kernelName:ir,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{starts:r,limits:i,deltas:o}=t,a=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,[u,c]=DP(a,r.shape,r.dtype,s,i.shape,l,o.shape);return[n.makeTensorInfo([u.length],"int32",u),n.makeTensorInfo([c.length],r.dtype,c)]}};var SA={kernelName:or,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{shape:i,values:o,defaultValue:a,rowPartitionTensors:s}=t,{rowPartitionTypes:l}=r,u=n.data.get(i.dataId).values,c=n.data.get(o.dataId).values,p=n.data.get(a.dataId).values,d=s.map(e=>n.data.get(e.dataId).values),h=s.map(e=>e.shape),[f,m]=zP(u,i.shape,c,o.shape,o.dtype,p,a.shape,d,h,l);return n.makeTensorInfo(f,o.dtype,m)}};var kA={kernelName:ar,backendName:"cpu",kernelFunc:function(e){let{backend:t,attrs:n}=e,{start:r,stop:i,dtype:o,step:a}=n,s=jP(r,i,a,o);return t.makeTensorInfo([s.length],o,s)}},EA=CI(lr,e=>1/e),TA={kernelName:lr,backendName:"cpu",kernelFunc:EA};var IA={kernelName:hr,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:o,halfPixelCenters:a,size:s}=r;GT(i,"resizeBilinear");let l=Si.computeStrides(i.shape),[u,c]=s,[p,d,h,f]=i.shape,m=n.data.get(i.dataId).values,g=new Float32Array(Si.sizeFromShape([p,u,c,f])),y=[o&&u>1?d-1:d,o&&c>1?h-1:h],v=[o&&u>1?u-1:u,o&&c>1?c-1:c],b=0,x=y[0]/v[0],w=y[1]/v[1];for(let e=0;e<p;e++)for(let t=0;t<u;t++){let n;n=a?x*(t+.5)-.5:x*t;let r=Math.max(0,Math.floor(n)),i=n-r,o=Math.min(d-1,Math.ceil(n)),s=e*l[0]+r*l[1],u=e*l[0]+o*l[1];for(let e=0;e<c;e++){let t;t=a?w*(e+.5)-.5:w*e;let n=Math.max(0,Math.floor(t)),r=t-n,o=Math.min(h-1,Math.ceil(t)),c=s+n*l[2],p=u+n*l[2],d=s+o*l[2],y=u+o*l[2];for(let e=0;e<f;e++){let t=m[c+e],n=m[p+e],o=t+(m[d+e]-t)*r,a=o+(n+(m[y+e]-n)*r-o)*i;g[b++]=a}}}return n.makeTensorInfo([p,u,c,f],"float32",g)}};var PA={kernelName:fr,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:i,dy:o}=t,{alignCorners:a}=r;GT([o,i],"resizeBilinearGrad");let s=Si.computeStrides(i.shape),[l,u,c,p]=i.shape,[,d,h]=o.shape,f=new Float32Array(l*u*c*p),m=[a&&d>1?u-1:u,a&&h>1?c-1:c],g=[a&&d>1?d-1:d,a&&h>1?h-1:h],y=m[0]/g[0],v=m[1]/g[1],b=n.data.get(o.dataId).values,x=0;for(let e=0;e<l;e++){let t=e*s[0];for(let e=0;e<d;e++){let n=e*y,r=Math.floor(n),i=Math.min(Math.ceil(n),u-1),o=t+r*s[1],a=t+i*s[1],l=n-r,d=1-l;for(let e=0;e<h;e++){let t=e*v,n=Math.floor(t),r=Math.min(Math.ceil(t),c-1),i=t-n,u=1-i,h=o+n*s[2],m=o+r*s[2],g=a+n*s[2],y=a+r*s[2],w=d*u,_=d*i,C=l*u,S=l*i;for(let e=0;e<p;e++){let t=b[x++];f[h+e]+=t*w,f[m+e]+=t*_,f[g+e]+=t*C,f[y+e]+=t*S}}}}return n.makeTensorInfo([l,c,u,p],"float32",f)}};var OA={kernelName:pr,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:o,halfPixelCenters:a,size:s}=r;GT(i,"resizeNearestNeighbor");let l=Si.computeStrides(i.shape),[u,c]=s,[p,d,h,f]=i.shape,m=n.data.get(i.dataId).values,g=new Float32Array(p*u*c*f),y=[o&&u>1?d-1:d,o&&c>1?h-1:h],v=[o&&u>1?u-1:u,o&&c>1?c-1:c],b=y[0]/v[0],x=y[1]/v[1],w=0;for(let e=0;e<p;e++){let t=e*l[0];for(let e=0;e<u;e++){let n=a?b*(e+.5):b*e,r=Math.min(d-1,o?Math.round(n):Math.floor(n));a&&(r=Math.max(0,r));let i=t+r*l[1];for(let e=0;e<c;e++){let t=a?x*(e+.5):x*e,n=Math.min(h-1,o?Math.round(t):Math.floor(t));a&&(n=Math.max(0,n));let r=i+n*l[2];for(let e=0;e<f;e++){let t=m[r+e];g[w++]=t}}}}return n.makeTensorInfo([p,u,c,f],i.dtype,g)}};var NA={kernelName:dr,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:i,dy:o}=t,{alignCorners:a}=r;GT([o,i],"resizeNearestNeighborGrad");let s=Si.computeStrides(i.shape),l=Si.computeStrides(o.shape),[u,c,p,d]=i.shape,[,h,f]=o.shape,m=new Float32Array(u*c*p*d),g=n.data.get(o.dataId).values,y=[a&&h>1?c-1:c,a&&f>1?p-1:p],v=[a&&h>1?h-1:h,a&&f>1?f-1:f],b=y[0]/v[0],x=y[1]/v[1],w=1/b,_=1/x,C=2*Math.ceil(w)+2,S=2*Math.ceil(_)+2;for(let e=0;e<u;e++){let t=e*s[0];for(let e=0;e<c;e++){let n=t+e*s[1],r=Math.floor(e*w),i=Math.floor(r-C/2);for(let r=0;r<p;r++){let o=n+r*s[2],u=Math.floor(r*_),y=Math.floor(u-S/2);for(let n=0;n<d;n++){let s=0;for(let o=0;o<C;o++){let u=o+i;if(u<0||u>=h)continue;let d=t+u*l[1],m=u*b;if(e===Math.min(c-1,a?Math.round(m):Math.floor(m)))for(let e=0;e<S;e++){let t=e+y;if(t<0||t>=f)continue;let i=d+t*l[2],o=t*x;r===Math.min(p-1,a?Math.round(o):Math.floor(o))&&(s+=g[i+n])}}m[o+n]=s}}}}return n.makeTensorInfo(i.shape,i.dtype,m)}};var RA={kernelName:gr,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dims:o}=r;GT(i,"reverse");let a=i.shape.length,s=Si.parseAxisParam(o,i.shape);if(0===a)return iI({inputs:{x:i},backend:n});let l=new eo(i.shape,i.dtype),u=n.bufferSync(i);for(let e=0;e<l.size;e++){let t=l.indexToLoc(e),n=t.slice();s.forEach(e=>n[e]=i.shape[e]-1-n[e]),l.set(u.get(...n),...t)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}},AA={kernelName:si,backendName:"cpu",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{image:r}=e,{radians:i,fillValue:o,center:a}=t,s=n,l=Si.getTypedArrayFromDType(r.dtype,Si.sizeFromShape(r.shape)),[u,c,p,d]=r.shape,[h,f]=Rf.getImageCenter(a,c,p),m=Math.sin(i),g=Math.cos(i),y=s.data.get(r.dataId).values;for(let e=0;e<u;e++){let t=e*p*c*d;for(let e=0;e<c;e++){let n=e*(p*d);for(let r=0;r<p;r++){let i=r*d;for(let a=0;a<d;a++){let s=[u,e,r,a],v=s[2],b=s[1],x=(v-h)*g-(b-f)*m,w=(v-h)*m+(b-f)*g;x=Math.round(x+h),w=Math.round(w+f);let _=o;if("number"!=typeof o&&(_=3===a?255:o[a]),x>=0&&x<p&&w>=0&&w<c){_=y[t+w*(p*d)+x*d+a]}l[t+n+i+a]=_}}}}return{dataId:s.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},DA=CI(yr,e=>{let t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2==0?t:t+1}),VA={kernelName:yr,backendName:"cpu",kernelFunc:DA};var MA={kernelName:br,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{indices:i,updates:o}=t,{shape:a}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:p}=Rf.calculateShapes(o,i,a),d=UP(n.bufferSync(i),n.bufferSync(o),a,p,u,l,s,c,0,!0);return n.makeTensorInfo(a,d.dtype,d.values)}};function FA(e,t){let n=0,r=e.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),e[i]<t?n=i+1:r=i;return r}function LA(e,t){let n=0,r=e.length,i=0;for(;n<r;)i=Math.floor((n+r)/2),e[i]<=t?n=i+1:r=i;return r}var zA={kernelName:wr,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{sortedSequence:i,values:o}=t,{side:a}=r,s=function(e,t,n,r,i,o){let a=Si.getArrayFromDType("int32",n*i);for(let s=0;s<n;++s){let n=e.slice(s*r,(s+1)*r),l=s*i;for(let e=0;e<i;++e)a[l+e]="left"===o?FA(n,t[e+l]):LA(n,t[e+l])}return a}(n.data.get(i.dataId).values,n.data.get(o.dataId).values,i.shape[0],i.shape[1],o.shape[1],a);return n.makeTensorInfo(o.shape,"int32",s)}};var jA={kernelName:_r,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{condition:r,t:i,e:o}=t;GT([r,i,o],"select");let a=r.shape.length,s=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values,c=mo(i.dtype,o.dtype),p=Si.makeZerosTypedArray(Si.sizeFromShape(i.shape),c),d=0,h=0===a||a>1||1===i.shape.length?1:Si.sizeFromShape(i.shape.slice(1));for(let e=0;e<s.length;e++)for(let t=0;t<h;t++)1===s[e]?p[d++]=l[e]:p[d++]=u[e];return n.makeTensorInfo(i.shape,c,p)}},qA=Rf.SELU_SCALEALPHA,$A=Rf.SELU_SCALE,BA=CI(Cr,e=>e>=0?$A*e:qA*(Math.exp(e)-1)),UA={kernelName:Cr,backendName:"cpu",kernelFunc:BA},WA=CI(Tr,e=>e<0?-1:e>0?1:0),HA={kernelName:Tr,backendName:"cpu",kernelFunc:WA},QA=CI(kr,e=>Math.sin(e)),GA={kernelName:kr,backendName:"cpu",kernelFunc:QA},KA=CI(Er,e=>Math.sinh(e)),JA={kernelName:Er,backendName:"cpu",kernelFunc:KA},XA=Math.log(1.1920928955078125e-7)+2,YA=CI(Pr,e=>{let t,n=e>-XA,r=e<XA,i=Math.exp(e);return t=r?i:n?e:Math.log(1+i),t}),ZA={kernelName:Pr,backendName:"cpu",kernelFunc:YA};var eD={kernelName:Rr,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:o,paddings:a}=r;GT([i],"spaceToBatchND");let s=Si.sizeFromShape(o),l=[[0,0]];l.push(...a);for(let e=1+o.length;e<i.shape.length;++e)l.push([0,0]);let u=vA.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),c=Rf.getReshaped(u.shape,o,s,!1),p=Rf.getPermuted(c.length,o.length,!1),d=Rf.getReshapedPermuted(u.shape,o,s,!1),h=MO({inputs:{x:u},backend:n,attrs:{shape:c}}),f=kP({inputs:{x:h},backend:n,attrs:{perm:p}}),m=MO({inputs:{x:f},backend:n,attrs:{shape:d}});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),m}};var tD={kernelName:Vr,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{indices:r,values:i,denseShape:o,defaultValue:a}=t;if(1!==o.shape.length)throw new Error("Dense shape must be a vector, saw:\n        "+o.shape);if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n        "+r.shape);if(1!==i.shape.length)throw new Error("Values must be a vector, saw:\n        "+i.shape);if(0!==a.shape.length)throw new Error("Default value must be a scalar, saw:\n        "+a.shape);let s=n.data.get(r.dataId).values,l=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values,c=n.data.get(a.dataId).values[0],[p,d,h,f,m]=XP(s,r.shape,r.dtype,l,i.dtype,u,c);return[n.makeTensorInfo(d,r.dtype,p),n.makeTensorInfo([d[0]],i.dtype,h),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(e=>Number(e)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};var nD={kernelName:Mr,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{inputIndices:r,inputShape:i,newShape:o}=t;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        "+r.shape);if(1!==i.shape.length)throw new Error("Input shape should be a vector but received shape\n        "+i.shape);if(1!==o.shape.length)throw new Error("Target shape should be a vector but received shape "+o.shape);let a=Array.from(n.data.get(i.dataId).values),s=n.data.get(r.dataId).values,l=Array.from(n.data.get(o.dataId).values),[u,c,p]=YP(s,r.shape,r.dtype,a,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([p.length],o.dtype,new Int32Array(p))]}};var rD={kernelName:Fr,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:o}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error("Indices should be a vector but received shape\n          "+i.shape);if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n          "+o.shape);if(i.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");let a=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,[u,c]=ZP(a,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(c,r.dtype,u)}};var iD={kernelName:Lr,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:o}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error("Indices should be a vector but received shape\n         "+i.shape);if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n         "+o.shape);if(i.shape[0]!==o.shape[0])throw new Error("segmentIds and indices should have same size.");let a=n.data.get(r.dataId).values,s=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values,[u,c]=ZP(a,r.shape,r.dtype,s,l);return n.makeTensorInfo(c,r.dtype,u)}};var oD={kernelName:zr,backendName:"cpu",kernelFunc:function(e){let t,{inputs:n,backend:r,attrs:i}=e,{sparseIndices:o,sparseValues:a,defaultValue:s}=n,{outputShape:l}=i,{sliceRank:u,numUpdates:c,sliceSize:p,strides:d,outputSize:h}=Rf.calculateShapes(a,o,l),f=r.bufferSync(o);switch(a.dtype){case"bool":t=UP(f,r.bufferSync(a),l,h,p,c,u,d,!!r.data.get(s.dataId).values[0],!1);break;case"float32":case"int32":t=UP(f,r.bufferSync(a),l,h,p,c,u,d,r.data.get(s.dataId).values[0],!1);break;case"string":t=UP(f,r.bufferSync(a),l,h,p,c,u,d,Si.decodeString(r.data.get(s.dataId).values[0]),!1);break;default:throw new Error("Unsupported type "+a.dtype)}return r.makeTensorInfo(l,t.dtype,t.values)}};var aD={kernelName:Ar,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{numOrSizeSplits:o,axis:a}=r,s=Si.parseAxisParam(a,i.shape)[0],l=Rf.prepareSplitSize(i,o,s),u=new Array(i.shape.length).fill(0),c=i.shape.slice();return l.map(e=>{let t=[...c];t[s]=e;let r=KP({inputs:{x:i},backend:n,attrs:{begin:u,size:t}});return u[s]+=e,r})}},sD={kernelName:qr,backendName:"cpu",kernelFunc:({inputs:e,backend:t})=>{let{x:n}=e,r=t;GT(n,"square");let i=r.data.get(n.dataId).values,o=new Float32Array(i.length);for(let e=0;e<i.length;++e){let t=i[e];o[e]=t*t}return{dataId:r.write(o,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},lD=CI(oi,(e,t)=>{let n=t;return isNaN(e)?NaN:e>0?1:n.alpha}),uD={kernelName:oi,backendName:"cpu",kernelFunc:lD};var cD={kernelName:Br,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:o,end:a,strides:s,beginMask:l,endMask:u,ellipsisMask:c,newAxisMask:p,shrinkAxisMask:d}=r;GT(i,"stridedSlice");let h,{finalShapeSparse:f,finalShape:m,isIdentity:g,sliceDim0:y,isSimpleSlice:v,begin:b,end:x,strides:w}=lf.sliceInfo(i.shape,o,a,s,l,u,c,p,d);if(g)h=MO({inputs:{x:i},backend:n,attrs:{shape:m}});else if(y||v){Si.assert(i.shape.length>=1,()=>"Input must have rank at least 1, got: "+i.shape.length);let e=lf.computeOutShape(b,x,w),t=KP({inputs:{x:i},backend:n,attrs:{begin:b,size:e}});h=MO({inputs:{x:t},backend:n,attrs:{shape:m}}),n.disposeIntermediateTensorInfo(t)}else{let e=uO(f,n.bufferSync(i),w,b);h=n.makeTensorInfo(m,e.dtype,e.values)}return h}};var pD={kernelName:Ur,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{separator:i,nGramWidths:o,leftPad:a,rightPad:s,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:p}=t,d=n.data.get(c.dataId).values,h=n.data.get(p.dataId).values,[f,m]=cO(d,h,i,o,a,s,l,u);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(p.shape,"int32",m)]}};var dD={kernelName:Wr,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{skipEmpty:i}=r,{input:o,delimiter:a}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(1!==o.shape.length)throw new Error("Input must be a vector, got shape: "+o.shape);if(0!==a.shape.length)throw new Error("Delimiter must be a scalar, got shape: "+a.shape);let s=n.data.get(o.dataId).values,l=n.data.get(a.dataId).values[0],[u,c,p]=dO(s,l,i),d=c.length;return[n.makeTensorInfo([d,2],"int32",u),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(p))]}};var hD={kernelName:Hr,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{numBuckets:i}=r,{input:o}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");let a=hO(n.data.get(o.dataId).values,i);return n.makeTensorInfo(o.shape,"int32",a)}},fD=CI(Gr,e=>Math.tan(e)),mD={kernelName:Gr,backendName:"cpu",kernelFunc:fD},gD=CI(Kr,e=>Math.tanh(e));function yD(e,t,n){switch(n){case"reflect":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{let e=2*t;n<e&&(n=e*Math.trunc(-n/e)+n),n=n<-t?n+e:-n-1}else if(n>t-1)if(t<=1)n=0;else{let e=2*t;n-=e*Math.trunc(n/e),n>=t&&(n=e-n-1)}return Si.clamp(0,n,t-1)}(e,t);case"wrap":return function(e,t){let n=e;if(n<0)if(t<=1)n=0;else{let e=t-1;n+=t*(Math.trunc(-n/e)+1)}else if(n>t-1)if(t<=1)n=0;else{let e=t-1;n-=t*Math.trunc(n/e)}return Si.clamp(0,n,t-1)}(e,t);case"nearest":return function(e,t){return Si.clamp(0,e,t-1)}(e,t);case"constant":default:return function(e,t){return e}(e)}}function vD(e,t,n,r,i,o,a,s,l,u,c){return 0<=s&&s<t&&0<=l&&l<n?e[a*r+s*i+l*o+u]:c}function bD(e,t,n,r,i,o,a,s,l,u,c){return vD(e,t,n,r,i,o,a,Math.round(s),Math.round(l),u,c)}function xD(e,t,n,r,i,o,a,s,l,u,c){let p=Math.floor(s),d=Math.floor(l),h=p+1,f=d+1;return(h-s)*((f-l)*vD(e,t,n,r,i,o,a,p,d,u,c)+(l-d)*vD(e,t,n,r,i,o,a,p,f,u,c))+(s-p)*((f-l)*vD(e,t,n,r,i,o,a,h,d,u,c)+(l-d)*vD(e,t,n,r,i,o,a,h,f,u,c))}var wD=[jO,ZT,$O,UO,gI,WO,HO,QO,GO,KO,XO,ZO,tN,iN,aN,cN,pN,dN,hN,zO,fN,mN,gN,wI,yN,cI,TI,bN,nI,xN,SN,EN,TN,IN,PN,ON,NN,AN,VN,MN,FN,LN,zN,jN,$N,BN,UN,WN,HN,QN,GN,KN,YN,kO,ZN,NI,sR,DI,uR,FI,mR,yR,vR,jI,BI,bR,xR,wR,_R,GI,XI,oI,CR,_N,kR,TR,PR,TO,eP,rP,OR,sP,RR,VR,FR,jR,qR,$R,UR,pP,WR,HR,QR,GR,KR,JR,XR,fP,YR,tA,oA,vP,xP,sA,uA,pA,CP,dA,mA,yA,vA,wA,OO,IP,_A,CA,SA,kA,sI,dR,TA,RO,DO,FO,IA,PA,OA,NA,RA,AA,VA,BP,MA,zA,jA,UA,QP,HA,GA,JA,JP,iA,ZA,eD,tD,nD,rD,iD,oD,aD,nO,sD,oO,lO,uD,cD,pD,dD,hD,yO,XN,mD,{kernelName:Kr,backendName:"cpu",kernelFunc:gD},{kernelName:xr,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n}=e,{tensor:r,indices:i,updates:o}=t,{sliceRank:a,numUpdates:s,sliceSize:l,strides:u,outputSize:c}=Rf.calculateShapes(o,i,r.shape),p=n.bufferSync(i),d=n.bufferSync(o),h=n.bufferSync(r),f=UP(p,d,r.shape,c,l,s,a,u,h,!1);return n.makeTensorInfo(r.shape,f.dtype,f.values)}},{kernelName:Jr,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reps:o}=r;GT(i,"tile");let a=vO(n.bufferSync(i),o);return n.makeTensorInfo(a.shape,a.dtype,a.values)}},{kernelName:Xr,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{k:o,sorted:a}=r;GT(i,"topk");let s=n.data.get(i.dataId).values,[l,u]=wO(s,i.shape,i.dtype,o,a);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}},{kernelName:Yr,backendName:"cpu",kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{image:i,transforms:o}=t,{interpolation:a,fillMode:s,fillValue:l,outputShape:u}=n,[c,p,d,h]=i.shape,[f,m]=null!=u?u:[p,d],g=[c,f,m,h],y=Si.computeStrides(i.shape),v=y[0],b=y[1],x=y[2],w=Si.computeStrides(g),_=w[0],C=w[1],S=w[2],k=Si.getTypedArrayFromDType(i.dtype,Si.sizeFromShape(g));k.fill(l);let E=r.data.get(i.dataId).values,T=r.data.get(o.dataId).values;for(let e=0;e<c;++e){let t=1===o.shape[0]?T:T.subarray(8*e,8*e+8);for(let n=0;n<f;++n)for(let r=0;r<m;++r)for(let i=0;i<h;++i){let o,u=t[6]*r+t[7]*n+1;if(0===u)continue;let c=(t[0]*r+t[1]*n+t[2])/u,h=(t[3]*r+t[4]*n+t[5])/u,f=yD(c,d,s),m=yD(h,p,s);switch(a){case"nearest":o=bD(E,p,d,v,b,x,e,m,f,i,l);break;case"bilinear":o=xD(E,p,d,v,b,x,e,m,f,i,l);break;default:throw new Error("Error in Transform: Expect 'nearest' or 'bilinear', but got "+a)}k[e*_+n*C+r*S+i]=o}return r.makeTensorInfo(g,i.dtype,k)}return{dataId:r.write(k,g,i.dtype),shape:i.shape,dtype:i.dtype}}},EP,{kernelName:ei,backendName:"cpu",kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{axis:i}=n,{x:o}=t;GT(o,"unique");let a=r.data.get(o.dataId).values,{outputValues:s,outputShape:l,indices:u}=_O(a,i,o.shape,o.dtype);return[r.makeTensorInfo(l,o.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}},{kernelName:ti,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{value:i}=t,{axis:o}=r;o<0&&(o+=i.shape.length);let a=i.shape.length,s=i.shape[o],l=new Array(a-1),u=0;for(let e=0;e<a;e++)e!==o&&(l[u++]=i.shape[e]);let c=new Array(a).fill(0),p=i.shape.slice();p[o]=1;let d=new Array(s);for(let e=0;e<d.length;e++){c[o]=e;let t=KP({inputs:{x:i},backend:n,attrs:{begin:c,size:p}});d[e]=MO({inputs:{x:t},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(t)}return d}},{kernelName:ni,backendName:"cpu",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,segmentIds:o}=t,{numSegments:a}=r;GT(i,"unsortedSegmentSum");let s=[],l=[],u=i.shape.length-o.shape.length,c=o;for(let e=0;e<u;++e){let t=lR({inputs:{input:c},backend:n,attrs:{dim:e+1}});c=t,l.push(t)}for(let e=0;e<a;++e){let t=Si.createScalarValue(e,"int32"),r=n.makeTensorInfo([],"int32",t),o=OI({inputs:{a:r,b:c},backend:n}),a=uI({inputs:{x:o},backend:n,attrs:{dtype:"float32"}}),u=yP({inputs:{a:a,b:i},backend:n}),p=JN({inputs:{x:u},backend:n,attrs:{axis:0,keepDims:!1}});s.push(p),l.push(r),l.push(o),l.push(a),l.push(u),l.push(p)}let p=gA({inputs:s,backend:n,attrs:{axis:0}});return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),p}},fA];for(let e of wD)vi(e);var _D={};b(_D,{assertNotComplex:()=>PV,bindCanvasToFramebuffer:()=>oV,bindColorTextureToFramebuffer:()=>aV,bindTextureToProgramUniformSampler:()=>iV,bindTextureUnit:()=>eV,bindVertexBufferToProgramAttribute:()=>ZD,callAndCheck:()=>DD,canBeRepresented:()=>VD,createFragmentShader:()=>zD,createFramebuffer:()=>YD,createProgram:()=>UD,createStaticIndexBuffer:()=>GD,createStaticVertexBuffer:()=>QD,createTexture:()=>JD,createVertexShader:()=>LD,getBatchDim:()=>dV,getExtensionOrThrow:()=>FD,getFramebufferErrorMessage:()=>uV,getMaxTexturesInShader:()=>wV,getNumChannels:()=>KD,getProgramUniformLocation:()=>rV,getProgramUniformLocationOrThrow:()=>nV,getRowsCols:()=>hV,getShapeAs3D:()=>fV,getTextureShapeFromLogicalShape:()=>mV,getWebGLDisjointQueryTimerVersion:()=>_V,getWebGLErrorMessage:()=>MD,getWebGLMaxTextureSize:()=>vV,hasExtension:()=>CV,isCapableOfRenderingToFloatTexture:()=>kV,isDownloadFloatTextureEnabled:()=>EV,isReshapeFree:()=>yV,isWebGLFenceEnabled:()=>IV,isWebGLVersionEnabled:()=>SV,linkProgram:()=>WD,logShaderSourceAndInfoLog:()=>BD,resetMaxTextureSize:()=>bV,resetMaxTexturesInShader:()=>xV,unbindColorTextureFromFramebuffer:()=>sV,unbindTextureUnit:()=>tV,validateFramebuffer:()=>lV,validateProgram:()=>HD,validateTextureSize:()=>XD});var CD,SD,kD,ED={},TD={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function ID(e,t){ED[e]=t}function PD(e,t){if(!(e in ED)||null!=t){let n=function(e,t){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");let n=null==t?function(e){if(!qe().getBool("IS_SAFARI")&&"undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e):t;return n.addEventListener("webglcontextlost",t=>{t.preventDefault(),delete ED[e]},!1),qe().getBool("SOFTWARE_WEBGL_ENABLED")&&(TD.failIfMajorPerformanceCaveat=!1),1===e?n.getContext("webgl",TD)||n.getContext("experimental-webgl",TD):n.getContext("webgl2",TD)}(e,t);if(null===n)return console.log("Could not get context for WebGL version",e),null;ED[e]=n}let n=ED[e];return null==n||n.isContextLost()?(delete ED[e],PD(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),ED[e])}function OD(e,t){return[t,e]}function ND(e){let t=Si.sizeFromShape(e),n=Math.ceil(t/4);return Si.sizeToSquarishShape(n)}function RD(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function AD(e,t){let n,r,i,o,a,s,l,u,c,p,d=e;return 2===qe().getNumber("WEBGL_VERSION")?(n=d.R32F,r=d.R16F,i=d.RGBA16F,o=d.RGBA32F,a=d.RED,l=4,u=1,c=d.HALF_FLOAT,p=d.FLOAT,s=d.RGBA8):(n=e.RGBA,r=e.RGBA,i=e.RGBA,o=d.RGBA,a=e.RGBA,l=4,u=4,c=null!=t?t.HALF_FLOAT_OES:null,p=e.FLOAT,s=e.RGBA),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:s,downloadUnpackNumChannels:l,defaultNumChannels:u,textureTypeHalfFloat:c,textureTypeFloat:p}}function DD(e,t){let n=t();return qe().getBool("DEBUG")&&function(e){let t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+MD(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(CD||(CD={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(SD||(SD={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(kD||(kD={}));function VD(e){return!!(qe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function MD(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function FD(e,t){return cV(e,()=>e.getExtension(t),'Extension "'+t+'" not supported on this browser.')}function LD(e,t){let n=cV(e,()=>e.createShader(e.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(DD(e,()=>e.shaderSource(n,t)),DD(e,()=>e.compileShader(n)),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function zD(e,t){let n=cV(e,()=>e.createShader(e.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(DD(e,()=>e.shaderSource(n,t)),DD(e,()=>e.compileShader(n)),qe().get("ENGINE_COMPILE_ONLY"))return n;if(!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw BD(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var jD,qD,$D=/ERROR: [0-9]+:([0-9]+):/g;function BD(e,t){let n=$D.exec(t);if(null==n)return console.log("Couldn't parse line number in error: "+t),void console.log(e);let r=+n[1],i=e.split("\n"),o=i.length.toString().length+2,a=i.map((e,t)=>Si.rightPad((t+1).toString(),o)+e),s=0;for(let e=0;e<a.length;e++)s=Math.max(a[e].length,s);let l=a.slice(0,r-1),u=a.slice(r-1,r),c=a.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c "+Si.rightPad(u[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(c.join("\n"))}function UD(e){return cV(e,()=>e.createProgram(),"Unable to create WebGLProgram.")}function WD(e,t){if(DD(e,()=>e.linkProgram(t)),!qe().get("ENGINE_COMPILE_ONLY")&&!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function HD(e,t){if(DD(e,()=>e.validateProgram(t)),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function QD(e,t){let n=cV(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return DD(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),DD(e,()=>e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function GD(e,t){let n=cV(e,()=>e.createBuffer(),"Unable to create WebGLBuffer");return DD(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)),DD(e,()=>e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)),n}function KD(){return 2===qe().getNumber("WEBGL_VERSION")?1:4}function JD(e){return cV(e,()=>e.createTexture(),"Unable to create WebGLTexture.")}function XD(e,t){let n=qe().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){throw new Error("Requested texture size "+`[${e}x${t}]`+" is invalid.")}if(e>n||t>n){throw new Error("Requested texture size "+`[${e}x${t}]`+" greater than WebGL maximum on this browser / GPU "+`[${n}x${n}]`+".")}}function YD(e){return cV(e,()=>e.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function ZD(e,t,n,r,i,o,a){let s=e.getAttribLocation(t,n);return-1!==s&&(DD(e,()=>e.bindBuffer(e.ARRAY_BUFFER,r)),DD(e,()=>e.vertexAttribPointer(s,i,e.FLOAT,!1,o,a)),DD(e,()=>e.enableVertexAttribArray(s)),!0)}function eV(e,t,n){pV(e,n),DD(e,()=>e.activeTexture(e.TEXTURE0+n)),DD(e,()=>e.bindTexture(e.TEXTURE_2D,t))}function tV(e,t){pV(e,t),DD(e,()=>e.activeTexture(e.TEXTURE0+t)),DD(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function nV(e,t,n){return cV(e,()=>e.getUniformLocation(t,n),'uniform "'+n+'" not present in program.')}function rV(e,t,n){return e.getUniformLocation(t,n)}function iV(e,t,n,r){DD(e,()=>eV(e,t,r)),DD(e,()=>e.uniform1i(n,r))}function oV(e){DD(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),DD(e,()=>e.viewport(0,0,e.canvas.width,e.canvas.height)),DD(e,()=>e.scissor(0,0,e.canvas.width,e.canvas.height))}function aV(e,t,n){DD(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,n)),DD(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0))}function sV(e,t){DD(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,t)),DD(e,()=>e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0))}function lV(e){let t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+uV(e,t))}function uV(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function cV(e,t,n){let r=DD(e,()=>t());if(null==r)throw new Error(n);return r}function pV(e,t){let n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n){throw new Error(`textureUnit must be in ${`[gl.TEXTURE0, gl.TEXTURE${n}]`}.`)}}function dV(e,t=2){return Si.sizeFromShape(e.slice(0,e.length-t))}function hV(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function fV(e){let t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[dV(e),...hV(e)]),t}function mV(e,t=!1){let n=qe().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=qe().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&qe().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),t&&(n*=2,r*=2,1===(e=e.map((t,n)=>n>=e.length-2?Si.nearestLargerEven(e[n]):e[n])).length&&(e=[2,e[0]])),2!==e.length&&(e=Si.squeezeShape(e).newShape);let i=Si.sizeFromShape(e),o=null;e.length<=1&&i<=n?o=[1,i]:2===e.length&&e[0]<=n&&e[1]<=n?o=e:3===e.length&&e[0]*e[1]<=n&&e[2]<=n?o=[e[0]*e[1],e[2]]:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?o=[e[0],e[1]*e[2]]:4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n?o=[e[0]*e[1]*e[2],e[3]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n&&(o=[e[0],e[1]*e[2]*e[3]]);let a=null!=o&&Math.max(...o)>r&&Math.min(...o)<=(t?2:1)&&Math.min(...o)>0;if(null==o||a)if(t){let t=dV(e),n=2,r=2;e.length&&([n,r]=hV(e)),i=t*(n/2)*(r/2),o=Si.sizeToSquarishShape(i).map(e=>2*e)}else o=Si.sizeToSquarishShape(i);return o}function gV(e){return e%2==0}function yV(e,t){if(e=e.slice(-2),t=t.slice(-2),Si.arraysEqual(e,t)||!e.length||!t.length||0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){let n=e[e.length-1],r=t[t.length-1];if(n===r||gV(n)&&gV(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&gV(e[0])&&gV(t[0])}function vV(e){if(null==jD){let t=PD(e);jD=t.getParameter(t.MAX_TEXTURE_SIZE)}return jD}function bV(){jD=null}function xV(){qD=null}function wV(e){if(null==qD){let t=PD(e);qD=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,qD)}function _V(e){if(0===e)return 0;let t,n=PD(e);return t=CV(n,"EXT_disjoint_timer_query_webgl2")&&2===e?2:CV(n,"EXT_disjoint_timer_query")?1:0,t}function CV(e,t){return null!=e.getExtension(t)}function SV(e){try{if(null!=PD(e))return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function kV(e){if(0===e)return!1;let t=PD(e);if(1===e){if(!CV(t,"OES_texture_float"))return!1}else if(!CV(t,"EXT_color_buffer_float"))return!1;return TV(t)}function EV(e){if(0===e)return!1;let t=PD(e);if(1!==e){if(CV(t,"EXT_color_buffer_float"))return TV(t);let e="EXT_color_buffer_half_float";if(CV(t,e)){let n=t.getExtension(e);return function(e,t){let n=AD(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);let i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);let o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(i),o}(t,n)}return!1}return!(!CV(t,"OES_texture_float")||!CV(t,"WEBGL_color_buffer_float"))&&TV(t)}function TV(e){let t=AD(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);let r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);let i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),i}function IV(e){return 2===e&&null!=PD(e).fenceSync}function PV(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{null!=e&&Si.assert("complex64"!==e.dtype,()=>t+" does not support complex64 tensors in the WebGL backend.")})}var OV=qe();function NV(){let e,t,n,r,i,o,a,s,l,u;return 2===qe().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",i="texture",o="outputColor",a="out vec4 outputColor;",s=qe().getBool("WEBGL2_ISNAN_CUSTOM")?"\n      bool isnan_custom(float val) {\n        uint floatToUint = floatBitsToUint(val);\n        return (floatToUint & 0x7fffffffu) > 0x7f800000u;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ":"",l="",u="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",i="texture2D",o="gl_FragColor",a="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",u="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:i,output:o,defineOutput:a,defineSpecialNaN:s,defineSpecialInf:l,defineRound:u}}function RV(e,t,n="index"){let r=Si.computeStrides(t);return r.map((t,i)=>`${`int ${e[i]} = ${n} / ${t}`}; ${i===r.length-1?`int ${e[i+1]} = ${n} - ${e[i]} * ${t}`:`index -= ${e[i]} * ${t}`};`).join("")}function AV(e,t,n="index"){let r=Si.computeStrides(t);return r.map((t,i)=>`${`int ${e[i]} = ${n} / outShapeStrides[${i}]`}; ${i===r.length-1?`int ${e[i+1]} = ${n} - ${e[i]} * outShapeStrides[${i}]`:`index -= ${e[i]} * outShapeStrides[${i}]`};`).join("")}function DV(e,t,n="index"){let r=function(e,t){let n=e.length,r=e.map(e=>`${t}[${e}]`),i=new Array(n-1);i[n-2]=r[n-1];for(let e=n-3;e>=0;--e)i[e]=`(${i[e+1]} * ${r[e+1]})`;return i}(e.map((e,t)=>t),t);return r.map((t,i)=>`${`int ${e[i]} = ${n} / ${r[i]}`}; ${i===r.length-1?`int ${e[i+1]} = ${n} - ${e[i]} * ${r[i]}`:`index -= ${e[i]} * ${r[i]}`};`).join("")}function VV(e){let t=Si.computeStrides(e).map(e=>e.toString());return`\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * ${t[0]} + coords.y * ${t[1]} + coords.z;\n  }\n`}OV.registerFlag("HAS_WEBGL",()=>OV.getNumber("WEBGL_VERSION")>0),OV.registerFlag("WEBGL_VERSION",()=>SV(2)?2:SV(1)?1:0),OV.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1),OV.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>2===OV.get("WEBGL_VERSION")),OV.registerFlag("WEBGL_CPU_FORWARD",()=>!0),OV.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1),OV.registerFlag("WEBGL_PACK",()=>OV.getBool("HAS_WEBGL")),OV.registerFlag("WEBGL_PACK_NORMALIZATION",()=>OV.getBool("WEBGL_PACK")),OV.registerFlag("WEBGL_PACK_CLIP",()=>OV.getBool("WEBGL_PACK")),OV.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>OV.getBool("WEBGL_PACK")),OV.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>OV.getBool("WEBGL_PACK")),OV.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>OV.getBool("WEBGL_PACK")),OV.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>OV.getBool("WEBGL_PACK")),OV.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>OV.getBool("WEBGL_PACK")),OV.registerFlag("WEBGL_PACK_REDUCE",()=>OV.getBool("WEBGL_PACK")),OV.registerFlag("WEBGL_LAZILY_UNPACK",()=>OV.getBool("WEBGL_PACK")),OV.registerFlag("WEBGL_CONV_IM2COL",()=>OV.getBool("WEBGL_PACK")),OV.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>vV(OV.getNumber("WEBGL_VERSION"))),OV.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>wV(OV.getNumber("WEBGL_VERSION"))),OV.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{let e=OV.getNumber("WEBGL_VERSION");return 0===e?0:_V(e)}),OV.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>OV.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Oo.isMobile()),OV.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>kV(OV.getNumber("WEBGL_VERSION"))),OV.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>!OV.getBool("WEBGL_FORCE_F16_TEXTURES")&&OV.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")),OV.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>EV(OV.getNumber("WEBGL_VERSION"))),OV.registerFlag("WEBGL_FENCE_API_ENABLED",()=>IV(OV.getNumber("WEBGL_VERSION"))),OV.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>OV.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0),OV.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,e=>{if(e<0&&-1!==e)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${e}.`)}),OV.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>Oo.isMobile()?1:-1,e=>{if(e<0&&-1!==e)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${e}.`)}),OV.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128),OV.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1),OV.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5),OV.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128),OV.registerFlag("WEBGL_EXP_CONV",()=>!1),OV.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>OV.getBool("IS_TEST")),OV.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0),OV.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1),OV.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1),OV.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);var MV="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",{getBroadcastDims:FV}=Rf;function LV(e,t,n){let r=[];if(e.forEach(e=>{let t=Si.sizeFromShape(e.shapeInfo.logicalShape);if(e.shapeInfo.isUniform?r.push(`uniform float ${e.name}${t>1?`[${t}]`:""};`):(r.push(`uniform sampler2D ${e.name};`),r.push(`uniform int offset${e.name};`)),n.enableShapeUniforms){let{uniformShape:t}=KV(n.packedInputs,e.shapeInfo.logicalShape,e.shapeInfo.texShape);switch(t.length){case 1:r.push(`uniform int ${e.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${e.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${e.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${e.name}Shape;`)}r.push(`uniform ivec2 ${e.name}TexShape;`)}}),n.enableShapeUniforms){switch(t.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;")}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(e=>{r.push(`uniform ${e.type} ${e.name}${e.arrayIndex?`[${e.arrayIndex}]`:""};`)});let i,o,a=r.join("\n"),s=e.map(e=>function(e,t,n=!1,r){let i="";i+=n?jV(e,r):zV(e,r);let o=e.shapeInfo.logicalShape,a=t.logicalShape;return o.length<=a.length&&(i+=n?function(e,t){let n,r=e.name,i=r.charAt(0).toUpperCase()+r.slice(1),o="get"+i+"AtOutCoords",a=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,l=FV(e.shapeInfo.logicalShape,t.logicalShape),u=GV(s),c=s-a,p=["x","y","z","w","u","v"];n=0===a?"":s<2&&l.length>=1?"coords = 0;":l.map(e=>`coords.${p[e+c]} = 0;`).join("\n");let d="";d=s<2&&a>0?"coords":e.shapeInfo.logicalShape.map((e,t)=>"coords."+p[t+c]).join(", ");let h="return outputValue;",f=1===Si.sizeFromShape(e.shapeInfo.logicalShape),m=1===Si.sizeFromShape(t.logicalShape);if(1!==a||f||m){if(f&&!m)h=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(l.length){let e=a-2,t=a-1;l.indexOf(e)>-1&&l.indexOf(t)>-1?h="return vec4(outputValue.x);":l.indexOf(e)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":l.indexOf(t)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}}else h="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return`\n    vec4 ${o}() {\n      ${u} coords = getOutputCoords();\n      ${n}\n      vec4 outputValue = get${i}(${d});\n      ${h}\n    }\n  `}(e,t):function(e,t){let n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",o=t.texShape,a=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===l&&null==e.shapeInfo.flatOffset&&Si.arraysEqual(a,o))return`\n      float ${i}() {\n        return sampleTexture(${n}, resultUV);\n      }\n    `;let u,c=GV(l),p=FV(e.shapeInfo.logicalShape,t.logicalShape),d=l-s,h=["x","y","z","w","u","v"];u=0===s?"":l<2&&p.length>=1?"coords = 0;":p.map(e=>`coords.${h[e+d]} = 0;`).join("\n");let f="";return f=l<2&&s>0?"coords":e.shapeInfo.logicalShape.map((e,t)=>"coords."+h[t+d]).join(", "),`\n    float ${i}() {\n      ${c} coords = getOutputCoords();\n      ${u}\n      return get${r}(${f});\n    }\n  `}(e,t)),i}(e,t,n.packedInputs,n.enableShapeUniforms)).join("\n"),l=t.texShape,u=NV(),c=function(e){return`\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return ${e.texture2D}(textureSampler, uv).r;\n    }\n  `}(u),p=function(e){return`${e.version}\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    ${e.varyingFs} vec2 resultUV;\n    ${e.defineOutput}\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    ${e.defineSpecialNaN}\n    ${e.defineSpecialInf}\n    ${e.defineRound}\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    ${qV}\n    ${$V}\n    ${BV}\n  `}(u);return t.isPacked?(i=function(e,t,n){switch(e.length){case 0:return WV();case 1:return function(e,t,n){let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===r[0]?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * ${r[1]}.0);\n      }\n    `:1===r[1]?n?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));\n      }\n    ":`\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * ${r[0]}.0);\n      }\n    `:n?"\n    int getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);\n    }\n  ":`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);\n    }\n  `}(0,t,n);case 2:return function(e,t,n){let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(Si.arraysEqual(e,t))return n?"\n      ivec2 getOutputCoords() {\n        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));\n      }\n    `;let i=Math.ceil(e[1]/2);return n?"\n    ivec2 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec2(r, c);\n    }\n  ":`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec2(r, c);\n    }\n  `}(e,t,n);case 3:return function(e,t,n){if(n)return"\n    ivec3 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],i=Math.ceil(e[2]/2),o=i*Math.ceil(e[1]/2);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      int b = index / ${o};\n      index -= b * ${o};\n\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec3(b, r, c);\n    }\n  `}(e,t,n);default:return function(e,t,n){if(n)return"\n    ivec4 getOutputCoords() {\n      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(packedTexShape[0], packedTexShape[1]));\n      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;\n\n      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));\n      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));\n      int texelsInBatchN = texelsInBatch * outShape[1];\n\n      int b2 = index / texelsInBatchN;\n      index -= b2 * texelsInBatchN;\n\n      int b = index / texelsInBatch;\n      index -= b * texelsInBatch;\n\n      int r = 2 * (index / texelsInLogicalRow);\n      int c = imod(index, texelsInLogicalRow) * 2;\n\n      return ivec4(b2, b, r, c);\n    }\n  ";let r=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],i=Math.ceil(e[e.length-1]/2),o=i*Math.ceil(e[e.length-2]/2),a=o,s="",l="b, r, c";for(let t=2;t<e.length-1;t++)a*=e[e.length-t-1],s=`\n      int b${t} = index / ${a};\n      index -= b${t} * ${a};\n    `+s,l=`b${t}, `+l;return`\n    ivec${e.length} getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${r[0]}, ${r[1]}));\n      int index = resTexRC.x * ${r[1]} + resTexRC.y;\n\n      ${s}\n\n      int b = index / ${o};\n      index -= b * ${o};\n\n      int r = 2 * (index / ${i});\n      int c = imod(index, ${i}) * 2;\n\n      return ivec${e.length}(${l});\n    }\n  `}(e,t,n)}}(t.logicalShape,l,n.enableShapeUniforms),o=function(e){return`\n    void setOutput(vec4 val) {\n      ${e.output} = val;\n    }\n  `}(u)):(i=function(e,t,n){switch(e.length){case 0:return WV();case 1:return function(e,t,n){return 1===t[0]?n?"\n      int getOutputCoords() {\n        return int(resultUV.x * float(outTexShape[1]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.x * ${t[1]}.0);\n      }\n    `:1===t[1]?n?"\n      int getOutputCoords() {\n        return int(resultUV.y * float(outTexShape[0]));\n      }\n    ":`\n      int getOutputCoords() {\n        return int(resultUV.y * ${t[0]}.0);\n      }\n    `:n?"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      return resTexRC.x * outTexShape[1] + resTexRC.y;\n    }\n  ":`\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      return resTexRC.x * ${t[1]} + resTexRC.y;\n    }\n  `}(0,t,n);case 2:return function(e,t,n){return Si.arraysEqual(e,t)?n?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2(${t[0]}, ${t[1]}));\n      }\n    `:1===e[1]?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    `:1===e[0]?n?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(outTexShape[0], outTexShape[1]));\n        int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":`\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2(${t[0]}, ${t[1]}));\n        int index = resTexRC.x * ${t[1]} + resTexRC.y;\n        return ivec2(0, index);\n      }\n    `:n?"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      int r = index / outShape[1];\n      int c = index - r * outShape[1];\n      return ivec2(r, c);\n    }\n  ":`\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      int r = index / ${e[1]};\n      int c = index - r * ${e[1]};\n      return ivec2(r, c);\n    }\n  `}(e,t,n);case 3:return function(e,t,n){if(n)return`\n  ivec3 getOutputCoords() {\n    ivec2 resTexRC = ivec2(resultUV.yx *\n                           vec2(outTexShape[0], outTexShape[1]));\n    int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n    ${AV(["r","c","d"],e)}\n    return ivec3(r, c, d);\n  }\n`;let r=RV(["r","c","d"],e);return`\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${r}\n      return ivec3(r, c, d);\n    }\n  `}(e,t,n);case 4:return function(e,t,n){if(n)return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(outTexShape[0], outTexShape[1]));\n      int index = resTexRC.x * outTexShape[1] + resTexRC.y;\n      ${AV(["r","c","d","d2"],e)}\n      return ivec4(r, c, d, d2);\n    }\n  `;let r=RV(["r","c","d","d2"],e);return`\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n      ${r}\n      return ivec4(r, c, d, d2);\n    }\n  `}(e,t,n);case 5:return function(e,t){let n=RV(["r","c","d","d2","d3"],e);return`\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${t[0]},\n                             ${t[1]}));\n\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  `}(e,t);case 6:return function(e,t){let n=RV(["r","c","d","d2","d3","d4"],e);return`\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2(${t[0]}, ${t[1]}));\n      int index = resTexRC.x * ${t[1]} + resTexRC.y;\n\n      ${n}\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  `}(e,t);default:throw new Error(e.length+"-D output sampling is not yet supported")}}(t.logicalShape,l,n.enableShapeUniforms),o=function(e){return`\n    void setOutput(float val) {\n      ${e.output} = vec4(val, 0, 0, 0);\n    }\n  `}(u)),n.packedInputs&&(p+=UV),[p,c,o,a,i,s,n.userCode].join("\n")}function zV(e,t=!1){let n=e.shapeInfo.logicalShape;switch(n.length){case 0:return function(e,t){let n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;let[i,o]=e.shapeInfo.texShape;if(1===i&&1===o)return`\n      float ${r}() {\n        return sampleTexture(${n}, halfCR);\n      }\n    `;let a=HV(n);if(t)return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${a});\n      return sampleTexture(${n}, uv);\n    }\n  `;let[s,l]=e.shapeInfo.texShape;return`\n    float ${r}() {\n      vec2 uv = uvFromFlat(${s}, ${l}, ${a});\n      return sampleTexture(${n}, uv);\n    }\n  `}(e,t);case 1:return function(e,t){let n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(e.shapeInfo.isUniform)return`\n      float ${r}(int index) {\n        ${QV(e)}\n      }\n    `;let i=e.shapeInfo.texShape,o=i[0],a=i[1];if(1===a&&1===o)return`\n      float ${r}(int index) {\n        return sampleTexture(${n}, halfCR);\n      }\n    `;let s=HV(n);return 1===a?t?`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / float(${n}TexShape[0]));\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2(0.5, (float(index + ${s}) + 0.5) / ${o}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `:1===o?t?`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${s}) + 0.5) / float(${n}TexShape[1]), 0.5);\n        return sampleTexture(${n}, uv);\n      }\n    `:`\n      float ${r}(int index) {\n        vec2 uv = vec2((float(index + ${s}) + 0.5) / ${a}.0, 0.5);\n        return sampleTexture(${n}, uv);\n      }\n    `:t?`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${s});\n      return sampleTexture(${n}, uv);\n    }\n  `:`\n    float ${r}(int index) {\n      vec2 uv = uvFromFlat(${o}, ${a}, index + ${s});\n      return sampleTexture(${n}, uv);\n    }\n  `}(e,t);case 2:return function(e,t){let n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape;if(null!=o&&Si.arraysEqual(n,o)){if(t)return`\n      float ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `;let e=o[0],n=o[1];return`\n    float ${i}(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2(${n}.0, ${e}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `}let{newShape:a,keptDims:s}=Si.squeezeShape(n),l=a;if(l.length<n.length){let n=JV(e,l),r=["row","col"];return`\n      ${zV(n,t)}\n      float ${i}(int row, int col) {\n        return ${i}(${XV(r,s)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${i}(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));\n        ${QV(e)}\n      }\n    `;let u=o[0],c=o[1],p=HV(r);return 1===c?t?`\n      float ${i}(int row, int col) {\n        float index = dot(vec3(row, col, ${p}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${i}(int row, int col) {\n      float index = dot(vec3(row, col, ${p}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / ${u}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `:1===u?t?`\n      float ${i}(int row, int col) {\n        float index = dot(vec3(row, col, ${p}), vec3(${r}Shape[1], 1, 1));\n        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${i}(int row, int col) {\n      float index = dot(vec3(row, col, ${p}), vec3(${n[1]}, 1, 1));\n      vec2 uv = vec2((index + 0.5) / ${c}.0, 0.5);\n      return sampleTexture(${r}, uv);\n    }\n  `:t?`\n      float ${i}(int row, int col) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${r}Shape[1] + col + ${p};\n        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n  float ${i}(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * ${n[1]} + col + ${p};\n    vec2 uv = uvFromFlat(${u}, ${c}, index);\n    return sampleTexture(${r}, uv);\n  }\n`}(e,t);case 3:return function(e,t){let n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[1]*n[2],a=n[2],{newShape:s,keptDims:l}=Si.squeezeShape(n),u=s;if(u.length<n.length){let n=JV(e,u),r=["row","col","depth"];return`\n        ${zV(n,t)}\n        float ${i}(int row, int col, int depth) {\n          return ${i}(${XV(r,l)});\n        }\n      `}if(e.shapeInfo.isUniform)return`\n      float ${i}(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3(${o}, ${a}, 1)));\n        ${QV(e)}\n      }\n    `;let c=e.shapeInfo.texShape,p=c[0],d=c[1],h=e.shapeInfo.flatOffset;if(d===o&&null==h)return t?`\n      float ${i}(int row, int col, int depth) {\n        int stride1 = ${r}Shape[2];\n        float texR = float(row);\n        float texC = dot(vec2(col, depth), vec2(stride1, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n        float ${i}(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2(${a}, 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2(${d}.0, ${p}.0);\n          return sampleTexture(${r}, uv);\n        }\n      `;if(d===a&&null==h)return t?`\n      float ${i}(int row, int col, int depth) {\n        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));\n        float texC = float(depth);\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n    float ${i}(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${d}.0, ${p}.0);\n      return sampleTexture(${r}, uv);\n    }\n  `;let f=HV(r);return t?`\n    float ${i}(int row, int col, int depth) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int stride0 = ${r}Shape[1] * ${r}Shape[2];\n      int stride1 = ${r}Shape[2];\n      int index = row * stride0 + col * stride1 + depth + ${f};\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);\n      return sampleTexture(${r}, uv);\n    }\n    `:`\n      float ${i}(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * ${o} + col * ${a} + depth + ${f};\n        vec2 uv = uvFromFlat(${p}, ${d}, index);\n        return sampleTexture(${r}, uv);\n      }\n  `}(e,t);case 4:return function(e,t){let n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=n[3],a=n[2]*o,s=n[1]*a,{newShape:l,keptDims:u}=Si.squeezeShape(n);if(l.length<n.length){let n=JV(e,l),r=["row","col","depth","depth2"];return`\n      ${zV(n,t)}\n      float ${i}(int row, int col, int depth, int depth2) {\n        return ${i}(${XV(r,u)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${i}(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4(${s}, ${a}, ${o}, 1)));\n        ${QV(e)}\n      }\n    `;let c=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,d=p[0],h=p[1],f=`int stride2 = ${r}Shape[3];`,m=`int stride1 = ${r}Shape[2] * stride2;`,g=`int stride0 = ${r}Shape[1] * stride1;`;if(h===s&&null==c)return t?`\n      float ${i}(int row, int col, int depth, int depth2) {\n        ${f}\n        ${m}\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(stride1, stride2, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3(${a}, ${o}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${h}.0, ${d}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;if(h===o&&null==c)return t?`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${r}TexShape[1], ${r}TexShape[0]);\n        return sampleTexture(${r}, uv);\n      }\n    `:`\n      float ${i}(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3(${n[1]*n[2]}, ${n[2]}, 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${h}.0, ${d}.0);\n        return sampleTexture(${r}, uv);\n      }\n    `;let y=HV(r);return t?`\n    float ${i}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      ${f}\n      ${m}\n      ${g}\n      int index = row * stride0 + col * stride1 +\n          depth * stride2 + depth2;\n      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${y});\n      return sampleTexture(${r}, uv);\n    }\n  `:`\n    float ${i}(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${s} + col * ${a} +\n          depth * ${o} + depth2;\n      vec2 uv = uvFromFlat(${d}, ${h}, index + ${y});\n      return sampleTexture(${r}, uv);\n    }\n  `}(e,t);case 5:return function(e){let t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t[4],o=t[3]*i,a=t[2]*o,s=t[1]*a,{newShape:l,keptDims:u}=Si.squeezeShape(t);if(l.length<t.length){let t=JV(e,l),n=["row","col","depth","depth2","depth3"];return`\n      ${zV(t)}\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        return ${r}(${XV(n,u)});\n      }\n    `}if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${s}, ${a}, ${o}, ${i})) +\n          depth3;\n        ${QV(e)}\n      }\n    `;let c=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,d=p[0],h=p[1];if(h===s&&null==c)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4(${a}, ${o}, ${i}, 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${h}.0, ${d}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(h===i&&null==c)return`\n      float ${r}(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]},\n               ${t[2]*t[3]}, ${t[3]}, 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${h}.0, ${d}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;let f=HV(n);return`\n    float ${r}(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${s} + col * ${a} + depth * ${o} +\n          depth2 * ${i} + depth3 + ${f};\n      vec2 uv = uvFromFlat(${d}, ${h}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);case 6:return function(e){let t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:i,keptDims:o}=Si.squeezeShape(t);if(i.length<t.length){let t=JV(e,i),n=["row","col","depth","depth2","depth3","depth4"];return`\n      ${zV(t)}\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return ${r}(${XV(n,o)});\n      }\n    `}let a=t[5],s=t[4]*a,l=t[3]*s,u=t[2]*l,c=t[1]*u;if(e.shapeInfo.isUniform)return`\n      float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4(${c}, ${u}, ${l}, ${s})) +\n          dot(\n            vec2(depth3, depth4),\n            vec2(${a}, 1)));\n        ${QV(e)}\n      }\n    `;let p=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,h=d[0],f=d[1];if(f===c&&null==p)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4(${u}, ${l}, ${s}, ${a})) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2(${f}.0, ${h}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;if(f===a&&null==p)return`\n      float ${r}(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4(${t[1]*t[2]*t[3]*t[4]},\n               ${t[2]*t[3]*t[4]},\n               ${t[3]*t[4]},\n               ${t[4]})) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2(${f}.0, ${h}.0);\n        return sampleTexture(${n}, uv);\n      }\n    `;let m=HV(n);return`\n    float ${r}(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * ${c} + col * ${u} + depth * ${l} +\n          depth2 * ${s} + depth3 * ${a} + depth4 + ${m};\n      vec2 uv = uvFromFlat(${h}, ${f}, index);\n      return sampleTexture(${n}, uv);\n    }\n  `}(e);default:throw new Error(n.length+"-D input sampling is not yet supported")}}function jV(e,t){switch(e.shapeInfo.logicalShape.length){case 0:return function(e){let t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=NV();return`\n    vec4 ${n}() {\n      return ${r.texture2D}(${t}, halfCR);\n    }\n  `}(e);case 1:return function(e,t){let n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape,o=NV();if(t)return`\n    vec4 ${r}(int index) {\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      vec2 uv = packedUVfrom1D(\n        packedTexShape[0], packedTexShape[1], index);\n      return ${o.texture2D}(${n}, uv);\n    }\n  `;let a=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return`\n    vec4 ${r}(int index) {\n      vec2 uv = packedUVfrom1D(\n        ${a[0]}, ${a[1]}, index);\n      return ${o.texture2D}(${n}, uv);\n    }\n  `}(e,t);case 2:return function(e,t){let n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,a=o[0],s=o[1],l=NV();if(null!=o&&Si.arraysEqual(n,o))return t?`\n      vec4 ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);\n\n        return ${l.texture2D}(${r}, uv);\n      }\n    `:`\n      vec4 ${i}(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}.0, ${a}.0);\n\n        return ${l.texture2D}(${r}, uv);\n      }\n    `;if(t)return`\n    vec4 ${i}(int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);\n      return ${l.texture2D}(${r}, uv);\n    }\n  `;let u=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],c=Math.ceil(n[1]/2);return`\n    vec4 ${i}(int row, int col) {\n      vec2 uv = packedUVfrom2D(${c}, ${u[0]}, ${u[1]}, row, col);\n      return ${l.texture2D}(${r}, uv);\n    }\n  `}(e,t);case 3:return function(e,t){let n=e.shapeInfo.logicalShape,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,a=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===n[0]){let r=n.slice(1),o=[1,2],a=JV(e,r),s=["b","row","col"];return`\n        ${jV(a,t)}\n        vec4 ${i}(int b, int row, int col) {\n          return ${i}(${XV(s,o)});\n        }\n      `}let s=NV();if(t)return`\n    vec4 ${i}(int b, int row, int col) {\n      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));\n      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));\n      vec2 uv = packedUVfrom3D(\n        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);\n      return ${s.texture2D}(${r}, uv);\n    }\n  `;let l=a[0],u=a[1],c=Math.ceil(n[2]/2),p=c*Math.ceil(n[1]/2);return`\n    vec4 ${i}(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        ${l}, ${u}, ${p}, ${c}, b, row, col);\n      return ${s.texture2D}(${r}, uv);\n    }\n  `}(e,t);default:return function(e,t){let n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=NV();if(t)return`\n    vec4 ${r}(int b2, int b, int row, int col) {\n      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));\n      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));\n      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);\n      texelsInBatch *= ${n}Shape[1];\n      index = b2 * texelsInBatch + index;\n      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));\n      int texR = index / packedTexShape[1];\n      int texC = index - texR * packedTexShape[1];\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${i.texture2D}(${n}, uv);\n    }\n  `;let o=e.shapeInfo.logicalShape,a=o.length,s=e.shapeInfo.texShape,l=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],u=l[0],c=l[1],p=Math.ceil(o[a-1]/2),d=p*Math.ceil(o[a-2]/2),h="int b, int row, int col",f=`b * ${d} + (row / 2) * ${p} + (col / 2)`;for(let e=2;e<a-1;e++)h=`int b${e}, `+h,d*=o[a-e-1],f=`b${e} * ${d} + `+f;return`\n    vec4 ${r}(${h}) {\n      int index = ${f};\n      int texR = index / ${c};\n      int texC = index - texR * ${c};\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${c}, ${u});\n      return ${i.texture2D}(${n}, uv);\n    }\n  `}(e,t)}}var qV="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",$V="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",BV="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",UV="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function WV(){return"\n    int getOutputCoords() {\n      return 0;\n    }\n  "}function HV(e){return"offset"+e}function QV(e){let t=e.name,n=Si.sizeFromShape(e.shapeInfo.logicalShape);return n<2?`return ${t};`:`\n    for (int i = 0; i < ${n}; i++) {\n      if (i == index) {\n        return ${t}[i];\n      }\n    }\n  `}function GV(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error(`GPU for rank ${e} is not yet supported`)}function KV(e,t,n){let{newShape:r,keptDims:i}=Si.squeezeShape(t),o=t.length,a=e&&3===o&&1===t[0],s=a?t.slice(1):r,l=!e&&o>1&&!Si.arraysEqual(t,n)&&r.length<o||a;return{useSqueezeShape:l,uniformShape:l?s:t,keptDims:i}}function JV(e,t){let n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function XV(e,t){return t.map(t=>e[t]).join(", ")}function YV(e,t,n){let r,i,o,a=[],s=[],l=null,u=null;u=e.getUniformLocation(n,"NAN",!1),1===qe().getNumber("WEBGL_VERSION")&&(l=e.getUniformLocation(n,"INFINITY",!1));let c=!1;for(let r of t.variableNames){let i={name:r,uniform:e.getUniformLocation(n,r,c),offset:e.getUniformLocation(n,"offset"+r,c)};t.enableShapeUniforms&&(i.shape=e.getUniformLocation(n,r+"Shape",c),i.texShape=e.getUniformLocation(n,r+"TexShape",c)),a.push(i)}if(t.enableShapeUniforms&&(r=e.getUniformLocation(n,"outShape",c),o=e.getUniformLocation(n,"outShapeStrides",c),i=e.getUniformLocation(n,"outTexShape",c)),t.customUniforms)for(let r of t.customUniforms)s.push(e.getUniformLocation(n,r.name,c));return{variablesLocations:a,customUniformLocations:s,infLoc:l,nanLoc:u,outShapeLocation:r,outShapeStridesLocation:o,outTexShapeLocation:i}}function ZV(e,t){if(e.length!==t.length)throw Error(`Binary was compiled with ${e.length} inputs, but was executed with ${t.length} inputs`);e.forEach((e,n)=>{let r=e.logicalShape,i=t[n],o=i.shape;if(!Si.arraysEqual(r,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${r} and ${o} must match`);if(e.isUniform&&i.isUniform)return;let a=e.texShape,s=i.isUniform?null:i.texData.texShape;if(!Si.arraysEqual(a,s))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${s} must match`)})}function eM(e){return qe().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&e<=4}var tM={R:0,G:1,B:2,A:3},nM=class{constructor(e,t=!1,n="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];let r=NV();this.outputShape=e,this.enableShapeUniforms=eM(this.outputShape.length);let i="result";t&&(i="floor(result * 255. + 0.5)");let o="";for(let e=0;e<n.length;e++){let t=n[e];o+=`\n          if(offset == ${e}) {\n            result = values[${tM[t]}];\n          }`}this.userCode=`\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":VV(e)}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int flatIndex = getFlatIndex(coords);\n        float result = 0.;\n        int offset = imod(flatIndex, ${n.length});\n\n        flatIndex = idiv(flatIndex, ${n.length}, 1.);\n\n        int r = flatIndex / texShape[1];\n        if (r < texShape[0]) {\n          int c = imod(flatIndex, texShape[1]);\n          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n          vec4 values = ${r.texture2D}(A, uv);\n          ${o}\n        }\n        ${r.output} = vec4(${i}, 0., 0., 0.);\n      }\n    `}},rM={};function iM(e){let t=NV();return LD(e,`${t.version}\n    precision highp float;\n    ${t.attribute} vec3 clipSpacePos;\n    ${t.attribute} vec2 uv;\n    ${t.varyingVs} vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }`)}function oM(e){return QD(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function aM(e){return GD(e,new Uint16Array([0,1,2,2,1,3]))}function sM(e,t,n,r,i,o){XD(t,n);let a=JD(e),s=e.TEXTURE_2D;return DD(e,()=>e.bindTexture(s,a)),DD(e,()=>e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)),DD(e,()=>e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),DD(e,()=>e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)),DD(e,()=>e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)),1===qe().getNumber("WEBGL_VERSION")?DD(e,()=>e.texImage2D(s,0,r,t,n,0,i,o,null)):DD(e,()=>e.texStorage2D(s,1,r,t,n)),DD(e,()=>e.bindTexture(e.TEXTURE_2D,null)),{texture:a,texShape:[n,t]}}function lM(e){return e.internalFormatFloat}function uM(e,t,n,r){let[i,o]=OD(t,n);return sM(e,i,o,lM(r),r.textureFormatFloat,e.FLOAT)}function cM(e){return e.internalFormatHalfFloat}function pM(e,t,n,r){let[i,o]=OD(t,n);return sM(e,i,o,cM(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function dM(e){return e.downloadTextureFormat}function hM(e,t,n,r){let[i,o]=OD(t,n);return sM(e,i,o,dM(r),e.RGBA,e.UNSIGNED_BYTE)}function fM(e){return e.internalFormatPackedFloat}function mM(e,t,n,r){let[i,o]=RD(t,n);return sM(e,i,o,fM(r),e.RGBA,e.FLOAT)}function gM(e){return e.internalFormatPackedHalfFloat}function yM(e,t,n,r){let[i,o]=RD(t,n);return sM(e,i,o,gM(r),e.RGBA,r.textureTypeHalfFloat)}function vM(e,t,n){return DD(e,()=>e.bindBuffer(e.ARRAY_BUFFER,n)),ZD(e,t,"clipSpacePos",n,3,20,0)&&ZD(e,t,"uv",n,2,20,12)}function bM(e,t,n,r,i,o){let a,s,l;DD(e,()=>e.bindTexture(e.TEXTURE_2D,t)),i instanceof Uint8Array?(a=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,l=e.RGBA):(a=new Float32Array(n*r*4),s=e.FLOAT,l=o.internalFormatPackedFloat),a.set(i),2===qe().getNumber("WEBGL_VERSION")?DD(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n,r,e.RGBA,s,a)):DD(e,()=>e.texImage2D(e.TEXTURE_2D,0,l,n,r,0,e.RGBA,s,a)),DD(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function xM(e,t,n){DD(e,()=>e.bindTexture(e.TEXTURE_2D,t)),n.data instanceof Uint8Array?2===qe().getNumber("WEBGL_VERSION")?DD(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,e.RGBA,e.UNSIGNED_BYTE,n.data)):DD(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)):2===qe().getNumber("WEBGL_VERSION")?DD(e,()=>e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,n)):DD(e,()=>e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),DD(e,()=>e.bindTexture(e.TEXTURE_2D,null))}function wM(e,t,n,r){let i=e.createBuffer();DD(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,i));let o=16*t*n;return DD(e,()=>e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)),DD(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)),DD(e,()=>e.bindBuffer(e.PIXEL_PACK_BUFFER,null)),i}function _M(e,t,n){let r=e,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function CM(e,t,n,r){let[i,o]=OD(t,n),a=new Uint8Array(function(e,t){return e*t}(t*n,4));return DD(e,()=>e.readPixels(0,0,i,o,r.downloadTextureFormat,e.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function SM(e,t,n,r,i,o,a,s){let l=e,u=new Float32Array(function(e,t){let[n,r]=RD(e,t);return n*r*4}(o,a));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function kM(e,t,n){let r=new Float32Array(t*n*4);return DD(e,()=>e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)),r}b(rM,{bindVertexProgramAttributeStreams:()=>vM,createBufferFromOutputTexture:()=>wM,createFloat16MatrixTexture:()=>pM,createFloat16PackedMatrixTexture:()=>yM,createFloat32MatrixTexture:()=>uM,createIndexBuffer:()=>aM,createPackedMatrixTexture:()=>mM,createUnsignedBytesMatrixTexture:()=>hM,createVertexBuffer:()=>oM,createVertexShader:()=>iM,downloadByteEncodedFloatMatrixFromOutputTexture:()=>CM,downloadFloat32MatrixFromBuffer:()=>_M,downloadMatrixFromPackedOutputTexture:()=>kM,downloadPackedMatrixFromBuffer:()=>SM,getInternalFormatForFloat16MatrixTexture:()=>cM,getInternalFormatForFloat16PackedMatrixTexture:()=>gM,getInternalFormatForFloat32MatrixTexture:()=>lM,getInternalFormatForPackedMatrixTexture:()=>fM,getInternalFormatForUnsignedBytesMatrixTexture:()=>dM,uploadDenseMatrixToTexture:()=>bM,uploadPixelDataToTexture:()=>xM});var EM=class{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];let t=qe().getNumber("WEBGL_VERSION");if(null!=e?(this.gl=e,ID(t,e)):this.gl=PD(t),e=this.gl,2===qe().getNumber("WEBGL_VERSION")){let t=e;this.createVertexArray=()=>DD(t,()=>t.createVertexArray()),this.bindVertexArray=e=>DD(t,()=>t.bindVertexArray(e)),this.deleteVertexArray=e=>DD(t,()=>t.deleteVertexArray(e)),this.getVertexArray=()=>DD(t,()=>t.getParameter(t.VERTEX_ARRAY_BINDING))}else if(null!=e){let t=e.getExtension("OES_vertex_array_object");if(null==t)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>DD(e,()=>t.createVertexArrayOES()),this.bindVertexArray=n=>DD(e,()=>t.bindVertexArrayOES(n)),this.deleteVertexArray=n=>DD(e,()=>t.deleteVertexArrayOES(n)),this.getVertexArray=()=>DD(e,()=>e.getParameter(t.VERTEX_ARRAY_BINDING_OES))}let n="WEBGL_color_buffer_float",r="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),1===qe().getNumber("WEBGL_VERSION")){let e="OES_texture_float",t="OES_texture_half_float";if(this.textureFloatExtension=FD(this.gl,e),CV(this.gl,t))this.textureHalfFloatExtension=FD(this.gl,t);else if(qe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),CV(this.gl,r))this.colorBufferHalfFloatExtension=FD(this.gl,r);else if(qe().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",CV(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!CV(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=oM(this.gl),this.indexBuffer=aM(this.gl),this.framebuffer=YD(this.gl),this.textureConfig=AD(this.gl,this.textureHalfFloatExtension)}get debug(){return qe().getBool("DEBUG")}dispose(){if(this.disposed)return;null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");let e=this.gl;DD(e,()=>e.finish()),DD(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),DD(e,()=>e.deleteFramebuffer(this.framebuffer)),DD(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),DD(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),DD(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,t){return this.throwIfDisposed(),uM(this.gl,e,t,this.textureConfig)}createFloat16MatrixTexture(e,t){return this.throwIfDisposed(),pM(this.gl,e,t,this.textureConfig)}createUnsignedBytesMatrixTexture(e,t){return this.throwIfDisposed(),hM(this.gl,e,t,this.textureConfig)}uploadPixelDataToTexture(e,t){this.throwIfDisposed(),xM(this.gl,e,t)}uploadDenseMatrixToTexture(e,t,n,r){this.throwIfDisposed(),bM(this.gl,e,t,n,r,this.textureConfig)}createFloat16PackedMatrixTexture(e,t){return this.throwIfDisposed(),yM(this.gl,e,t,this.textureConfig)}createPackedMatrixTexture(e,t){return this.throwIfDisposed(),mM(this.gl,e,t,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(sV(this.gl,this.framebuffer),this.outputTexture=null),DD(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,t,n){return this.downloadMatrixDriver(e,()=>CM(this.gl,t,n,this.textureConfig))}downloadPackedMatrixFromBuffer(e,t,n,r,i,o){return SM(this.gl,e,0,0,0,i,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,t){return _M(this.gl,e,t)}createBufferFromTexture(e,t,n){this.bindTextureToFrameBuffer(e);let r=wM(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r}createAndWaitForFence(){let e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let t,n;if(qe().getBool("WEBGL_FENCE_API_ENABLED")){let r=e,i=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=()=>{let e=r.clientWaitSync(i,0,0);return e===r.ALREADY_SIGNALED||e===r.CONDITION_SATISFIED},t=i}else qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=()=>this.isQueryAvailable(t,qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):n=()=>!0;return{query:t,isFencePassed:n}}downloadMatrixFromPackedTexture(e,t,n){return this.downloadMatrixDriver(e,()=>kM(this.gl,t,n))}createProgram(e){this.throwIfDisposed();let t=this.gl;null==this.vertexShader&&(this.vertexShader=iM(t));let n=UD(t);DD(t,()=>t.attachShader(n,this.vertexShader)),DD(t,()=>t.attachShader(n,e)),WD(t,n);let r=Object.assign(n,{vao:this.createVertexArray()});return this.debug&&HD(t,r),r}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);let t=this.gl;DD(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),vM(t,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&(DD(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&HD(this.gl,this.program),DD(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,t,n=!0){return this.throwIfDisposed(),n?nV(this.gl,e,t):rV(this.gl,e,t)}getAttributeLocation(e,t){return this.throwIfDisposed(),DD(this.gl,()=>this.gl.getAttribLocation(e,t))}getUniformLocationNoThrow(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)}setInputMatrixTexture(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),iV(this.gl,e,t,n)}setOutputMatrixTexture(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)}setOutputPackedMatrixTexture(e,t,n){this.throwIfDisposed();let[r,i]=RD(t,n);this.setOutputMatrixTextureDriver(e,r,i)}setOutputMatrixWriteRegion(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)}setOutputPackedMatrixWriteRegion(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){null!=this.program&&HD(this.gl,this.program),lV(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();let e=this.gl;if(this.debug){let e=this.getVertexArray();console.assert(e===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}DD(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),DD(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=FD(this.gl,2===qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(2===qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){let e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}let e=this.getQueryTimerExtensionWebGL1(),t=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,t),t}endQuery(){if(2===qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){let e=this.gl,t=this.getQueryTimerExtensionWebGL2();return void e.endQuery(t.TIME_ELAPSED_EXT)}let e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await Si.repeatedTry(()=>this.disposed||this.isQueryAvailable(e,qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,t){if(0===t)return null;if(2===t){let t=this.gl;return t.getQueryParameter(e,t.QUERY_RESULT)/1e6}{let t=this.getQueryTimerExtensionWebGL1();return t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,t){if(0===t)return!0;if(2===t){let t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.getQueryParameter(e,t.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(n.GPU_DISJOINT_EXT)),r&&!this.disjoint}{let t=this.getQueryTimerExtensionWebGL1(),n=t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(t.GPU_DISJOINT_EXT)),n&&!this.disjoint}}pollFence(e){return new Promise(t=>{this.addItemToPoll(()=>e.isFencePassed(),()=>t())})}pollItems(){let e=function(e){let t=0;for(;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map(e=>e.isDoneFn));for(let t=0;t<=e;++t){let{resolveFn:e}=this.itemsToPoll[t];e()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,t){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1)return;let n;"setTimeoutCustom"in qe().platform&&(n=qe().platform.setTimeoutCustom.bind(qe().platform)),Si.repeatedTry(()=>(this.pollItems(),0===this.itemsToPoll.length),()=>0,null,n)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),aV(this.gl,e,this.framebuffer),this.debug&&lV(this.gl)}unbindTextureToFrameBuffer(){null!=this.outputTexture?(aV(this.gl,this.outputTexture,this.framebuffer),this.debug&&lV(this.gl)):sV(this.gl,this.framebuffer)}downloadMatrixDriver(e,t){this.bindTextureToFrameBuffer(e);let n=t();return this.unbindTextureToFrameBuffer(),n}setOutputMatrixTextureDriver(e,t,n){this.throwIfDisposed();let r=this.gl;aV(r,e,this.framebuffer),this.debug&&lV(r),this.outputTexture=e,DD(r,()=>r.viewport(0,0,t,n)),DD(r,()=>r.scissor(0,0,t,n))}setOutputMatrixWriteRegionDriver(e,t,n,r){this.throwIfDisposed(),DD(this.gl,()=>this.gl.scissor(e,t,n,r))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(null==this.program)throw new Error("No GPU program is currently set.")}};var{addImpl:TM,bincountImpl:IM,bincountReduceImpl:PM,bitwiseAndImpl:OM,castImpl:NM,ceilImpl:RM,concatImpl:AM,equalImpl:DM,expImpl:VM,expm1Impl:MM,floorImpl:FM,gatherNdImpl:LM,gatherV2Impl:zM,greaterImpl:jM,greaterEqualImpl:qM,lessImpl:$M,lessEqualImpl:BM,linSpaceImpl:UM,logImpl:WM,maxImpl:HM,maximumImpl:QM,minimumImpl:GM,multiplyImpl:KM,negImpl:JM,notEqualImpl:XM,prodImpl:YM,raggedGatherImpl:ZM,raggedRangeImpl:eF,raggedTensorToTensorImpl:tF,rangeImpl:nF,rsqrtImpl:rF,scatterImpl:iF,sigmoidImpl:oF,simpleAbsImpl:aF,sliceImpl:sF,sparseFillEmptyRowsImpl:lF,sparseReshapeImpl:uF,sparseSegmentReductionImpl:cF,sqrtImpl:pF,staticRegexReplaceImpl:dF,stridedSliceImpl:hF,stringNGramsImpl:fF,stringSplitImpl:mF,stringToHashBucketFastImpl:gF,subImpl:yF,tileImpl:vF,topKImpl:bF,transposeImpl:xF,uniqueImpl:wF}=XT;function _F(e,t){return["x","y","z","w","u","v"].slice(0,t).map(t=>`${e}.${t}`)}function CF(e,t){return 1===t?[e]:_F(e,t)}var SF=class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=eM(this.outputShape.length);let n="";for(let e=0;e<4;e++){let t="thisRC = rc;";e%2==1&&(t+="thisRC.z += 1;"),e>1&&(t+="thisRC.y += 1;"),n+=`\n        ${t}\n        ${e>0?"if(thisRC.y < rows && thisRC.z < cols){":""}\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result[${e}] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        ${e>0?"}":""}\n      `}this.userCode=`\n      ${function(e,t){return`\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      ${t?DV(["r","c","d"],"inputShape"):RV(["r","c","d"],e)}\n      return ivec3(r, c, d);\n    }\n  `}(t,this.enableShapeUniforms)}\n      ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":VV(e)}\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};\n        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};\n\n        ${n}\n\n        setOutput(result);\n      }\n    `}};function kF(e,t,n,r,i){let o,a=function(e,t){switch(e){case kD.PACKED_2X2_FLOAT32:return fM(t);case kD.PACKED_2X2_FLOAT16:return gM(t);case kD.UNPACKED_FLOAT32:return lM(t);case kD.UNPACKED_FLOAT16:return cM(t);case kD.PACKED_4X1_UNSIGNED_BYTE:return dM(t);default:throw new Error("Unknown physical texture type "+e)}}(t,r);if(i){let[t,n]=RD(e[0],e[1]);o=t*n}else{let[t,n]=OD(e[0],e[1]);o=t*n}return o*function(e,t){let n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F||t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;if(t===n.RGBA8)return 4;throw new Error("Unknown internal format "+t)}(n,a)}function EF(e,t){if(e===SD.UPLOAD)return kD.PACKED_2X2_FLOAT32;if(e===SD.RENDER||null==e)return function(e){return qe().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?kD.PACKED_2X2_FLOAT32:kD.UNPACKED_FLOAT32:e?kD.PACKED_2X2_FLOAT16:kD.UNPACKED_FLOAT16}(t);if(e===SD.DOWNLOAD||e===SD.PIXELS)return kD.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function TF(e,t,n){return`${e[0]}_${e[1]}_${t}_${n}`}var IF=class{constructor(e,t){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=eM(this.outputShape.length),this.userCode=`\n      float unaryOperation(float x) {\n        ${t}\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}},PF="return abs(x);",OF="return x;",NF=class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=eM(this.outputShape.length),this.userCode=`\n      vec4 unaryOperation(vec4 x) {\n        ${t}\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    `}},RF=Vm.whereImpl,AF={};var DF=qe().getNumber("CPU_HANDOFF_SIZE_THRESHOLD");var VF=class extends B{nextDataId(){return VF.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!qe().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let t;if(null!=e){if(e instanceof EM)t=e;else{let n=PD(qe().getNumber("WEBGL_VERSION"),e);t=new EM(n)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{let e=PD(qe().getNumber("WEBGL_VERSION"));t=new EM(e),this.binaryCache=function(e){return e in AF||(AF[e]={}),AF[e]}(qe().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=t,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new class{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,t,n){let r=EF(t,n),i=TF(e,r,n);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);let o,a=kF(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=a,this.log();let e=this.freeTextures[i].pop();return this.usedTextures[i].push(e),e}return r===kD.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===kD.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===kD.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===kD.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===kD.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(o),this.numUsedTextures++,this._numBytesAllocated+=a,this.log(),o}releaseTexture(e,t,n,r){if(null==this.freeTextures)return;let i=EF(n,r),o=TF(t,i,r);o in this.freeTextures||(this.freeTextures[o]=[]);let a=kF(t,i,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=qe().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;let l=this.usedTextures[o],u=l&&l.indexOf(e);if(null==u||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");l[u]=l[l.length-1],l.pop(),this.log()}log(){if(!this.logEnabled)return;let e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);let t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: "+this._numBytesAllocated),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*t)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(null!=this.freeTextures){for(let e in this.freeTextures)this.freeTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});for(let e in this.usedTextures)this.usedTextures[e].forEach(e=>{this.gpgpu.deleteMatrixTexture(e.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}(this.gpgpu),this.numMBBeforeWarning=null==qe().global.screen?1024:qe().global.screen.height*qe().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new $(this,Ga())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,t,n,r,i,o){let a=this.makeTensorInfo(t,n),s=this.texData.get(a.dataId);s.isPacked=!1,s.texture={texture:e,texShape:[r,i]},s.texShape=[r,i];let l=fV(t),u=new nM(l,!1,o),c=this.runWebGLProgram(u,[a],n,[[r,i]]);return c.shape=t,s.texture=null,this.disposeIntermediateTensorInfo(a),c.dataId}write(e,t,n){if((qe().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||qe().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");let r={id:this.nextDataId()};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:SD.UPLOAD,refCount:1}),r}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){this.texData.get(e).refCount++}decRef(e){if(this.texData.has(e)){this.texData.get(e).refCount--}}move(e,t,n,r,i){if(qe().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:SD.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){let t=this.texData.get(e),{values:n,dtype:r,complexTensorInfos:i,slice:o,shape:a,isPacked:s}=t;if(null!=o){let t;t=s?new NF(a,OF):new IF(a,OF);let n=this.runWebGLProgram(t,[{dataId:e,shape:a,dtype:r}],r),i=this.readSync(n.dataId);return this.disposeIntermediateTensorInfo(n),i}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;let l,u,c=null!=this.activeTimers;if(c&&(l=Si.now()),"complex64"===r){let e=this.readSync(i.real.dataId),t=this.readSync(i.imag.dataId);u=Rf.mergeRealAndImagArrays(e,t)}else u=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=Si.now()-l),this.convertAndCacheOnCPU(e,u)}async read(e){if(this.pendingRead.has(e)){let t=this.pendingRead.get(e);return new Promise(e=>t.push(e))}let t=this.texData.get(e),{values:n,shape:r,slice:i,dtype:o,complexTensorInfos:a,isPacked:s}=t;if(null!=i){let t;t=s?new NF(r,OF):new IF(r,OF);let n=this.runWebGLProgram(t,[{dataId:e,shape:r,dtype:o}],o),i=this.read(n.dataId);return this.disposeIntermediateTensorInfo(n),i}if(null!=n)return this.convertAndCacheOnCPU(e);if(qe().getBool("DEBUG")&&!qe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===qe().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let l,u,c=null;if("complex64"!==o&&qe().get("WEBGL_BUFFER_SUPPORTED")){l=this.decode(e);let t=this.texData.get(l.dataId);c=this.gpgpu.createBufferFromTexture(t.texture.texture,...ND(r))}if(this.pendingRead.set(e,[]),"complex64"!==o&&await this.gpgpu.createAndWaitForFence(),"complex64"===o){let e=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),t=e[0],n=e[1];u=Rf.mergeRealAndImagArrays(t,n)}else if(null==c)u=this.getValuesFromTexture(e);else{let e=Si.sizeFromShape(r);u=this.gpgpu.downloadFloat32MatrixFromBuffer(c,e)}if(null!=l&&this.disposeIntermediateTensorInfo(l),null!=c){let e=this.gpgpu.gl;DD(e,()=>e.deleteBuffer(c))}let p=this.convertAndCacheOnCPU(e,u),d=this.pendingRead.get(e);return this.pendingRead.delete(e),d.forEach(e=>e(p)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&Ga().removeDataId(e,this),this.pendingDeletes--),p}readToGPU(e,t={}){let n=this.texData.get(e),{values:r,shape:i,slice:o,dtype:a,isPacked:s,texture:l}=n;if("complex64"===a)throw new Error("Does not support reading texture for complex64 dtype.");if(null!=o){let n;n=s?new NF(i,OF):new IF(i,OF);let r=this.runWebGLProgram(n,[{dataId:e,shape:i,dtype:a}],a),o=this.readToGPU(r,t);return this.disposeIntermediateTensorInfo(r),o}if(null==l)throw null!=r?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");let u=this.decode(e,t.customTexShape),c=Ga().makeTensorFromTensorInfo(u),p=this.texData.get(u.dataId);return Object.assign({tensorRef:c},p.texture)}bufferSync(e){let t=this.readSync(e.dataId);if("string"===e.dtype)try{let n=t.map(e=>Si.decodeString(e));return za(e.shape,e.dtype,n)}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return za(e.shape,e.dtype,t)}checkNumericalProblems(e){if(null!=e)for(let t=0;t<e.length;t++){let n=e[t];if(!VD(n))throw qe().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${n} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${n} cannot be represented on this device.`)}}getValuesFromTexture(e){let{shape:t,dtype:n,isPacked:r}=this.texData.get(e),i=Si.sizeFromShape(t);if(qe().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){let n=this.decode(e),r=this.texData.get(n.dataId),o=this.gpgpu.downloadMatrixFromPackedTexture(r.texture.texture,...ND(t)).subarray(0,i);return this.disposeIntermediateTensorInfo(n),o}let o=qe().getBool("WEBGL_PACK")&&!0===r,a=o?fV(t):t,s=o?new class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=SD.DOWNLOAD;let t=NV();this.outputShape=e,this.userCode=`\n      ${MV}\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        ${t.output} = encode_float(x);\n      }\n    `}}(a):new class{constructor(e){this.variableNames=["A"],this.outTexUsage=SD.DOWNLOAD;let t=NV();this.outputShape=e,this.userCode=`\n      ${MV}\n\n      void main() {\n        float x = getAAtOutCoords();\n        ${t.output} = encode_float(x);\n      }\n    `}}(a),l=this.runWebGLProgram(s,[{shape:a,dtype:n,dataId:e}],"float32"),u=this.texData.get(l.dataId),c=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(l),c}timerAvailable(){return qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){let t=this.activeTimers,n=[],r=!1;null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e();let i=Si.flatten(this.activeTimers.map(e=>e.query)).filter(e=>null!=e),o=Si.flatten(this.activeTimers.map(e=>e.name)).filter(e=>null!=e);this.activeTimers=t,r&&(this.programTimersStack=null);let a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){let e=await Promise.all(i);a.kernelMs=Si.sum(e),a.getExtraProfileInfo=()=>e.map((e,t)=>({name:o[t],ms:e})).map(e=>`${e.name}: ${e.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Si.now(),endMs:null}}endTimer(e){return qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Si.now(),e)}async getQueryTime(e){if(qe().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);let t=e;return t.endMs-t.startMs}disposeData(e,t=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(t?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!t&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);let{complexTensorInfos:n}=this.texData.get(e);return null!=n&&(this.disposeData(n.real.dataId,t),this.disposeData(n.imag.dataId,t)),this.texData.delete(e),!0}releaseGPUData(e){let{texture:t,dtype:n,texShape:r,usage:i,isPacked:o,slice:a}=this.texData.get(e),s=a&&a.origDataId||e,l=this.dataRefCount.get(s);l>1?this.dataRefCount.set(s,l-1):(this.dataRefCount.delete(s),null!=t&&(this.numBytesInGPU-=this.computeBytes(r,n),this.textureManager.releaseTexture(t,r,i,o)));let u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,t=DF){return qe().getBool("WEBGL_CPU_FORWARD")&&e.every(e=>null==this.texData.get(e.dataId).texture&&Si.sizeFromShape(e.shape)<t)}getGPGPUContext(){return this.gpgpu}where(e){Rf.warn("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");let t=e.dataSync();return RF(e.shape,t)}packedUnaryOp(e,t,n){let r=new NF(e.shape,t),i=this.compileAndRun(r,[e],n);return Ga().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){let t=aF(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(qe().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,PF,e.dtype);let t=new IF(e.shape,PF),n=this.compileAndRun(t,[e]);return Ga().makeTensorFromTensorInfo(n)}makeTensorInfo(e,t,n){let r;if("string"===t&&null!=n&&n.length>0&&Si.isString(n[0])){let i=n.map(e=>Si.encodeString(e));r=this.write(i,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}}makeOutput(e,t,n){return Ga().makeTensorFromTensorInfo(this.makeTensorInfo(e,t,n),this)}unpackTensor(e){let t=new class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=eM(this.outputShape.length);let t=e.length,n=CF("rc",t),r=GV(t),i=function(e,t){if(1===e)return"rc";let n="";for(let r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),o=n.slice(-2),a=t<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`\n      void main() {\n        ${r} rc = getOutputCoords();\n        vec4 packedInput = getA(${i});\n\n        setOutput(getChannel(packedInput, ${a}));\n      }\n    `}}(e.shape);return this.runWebGLProgram(t,[e],e.dtype)}packTensor(e){let t=new class{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=eM(this.outputShape.length),0===this.rank)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{let e=CF("rc",this.rank),t=GV(this.rank),n=this.getOutOfBoundsCondition(e),r=this.getSetup(e),i=this.getOutput(e);this.userCode=`\n        void main() {\n          ${t} rc = getOutputCoords();\n\n          if(${n}) {\n            setOutput(vec4(0));\n          } else {\n            ${r}\n\n            setOutput(vec4(${i}));\n          }\n        }\n      `}}getSourceCoordsArr(e){let t=[];for(let n=0;n<=1;n++)for(let r=0;r<=1;r++){let i=`${0===n?"r":"rp1"}, ${0===r?"c":"cp1"}`;for(let t=2;t<this.rank;t++)i=e[e.length-1-t]+","+i;t.push(i)}return t}getOutOfBoundsCondition(e){if(1===this.rank)return"rc > "+(this.enableShapeUniforms?"outShape":this.outputShape[0]);let t="";for(let n=this.rank-2;n<this.rank;n++)t+=`${e[n]} >= ${this.enableShapeUniforms?`outShape[${n}]`:this.outputShape[n]}`,n<this.rank-1&&(t+="||");return t}getSetup(e){if(1===this.rank)return"";let t=e.slice(-2),n=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],r=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`\n      int r = ${t[0]};\n      int c = ${t[1]};\n      int rp1 = r + 1;\n      int cp1 = c + 1;\n\n      bool cEdge = cp1 >= ${n};\n      bool rEdge = rp1 >= ${r};\n    `}getOutput(e){let t=this.getSourceCoordsArr(e);return 1===this.rank?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${t[0]}),\n            cEdge ? 0. : getA(${t[1]}),\n            rEdge ? 0. : getA(${t[2]}),\n            rEdge || cEdge ? 0. : getA(${t[3]})`}}(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)}packedReshape(e,t){let n=[dV(e.shape),...hV(e.shape)],r={dtype:e.dtype,shape:n,dataId:e.dataId},i=[dV(t),...hV(t)],o=new SF(i,n),a=[n],s=this.runWebGLProgram(o,[r],e.dtype,a,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}decode(e,t){let n=this.texData.get(e),{isPacked:r,shape:i,dtype:o}=n;if(null!=t){let e=Si.sizeFromShape(i),n=t[0]*t[1]*4;Si.assert(e<=n,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}let a,s=fV(i);a=r?new class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=CD.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let t=NV();this.outputShape=e,this.enableShapeUniforms=eM(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?AV(["r","c","d"],e):RV(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        ${t.output} = result;\n      }\n    `}}(s):new class{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=CD.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];let t=NV();this.outputShape=e,this.enableShapeUniforms=eM(this.outputShape.length),this.userCode=`\n      ivec3 outCoordsFromFlatIndex(int index) {\n        ${this.enableShapeUniforms?AV(["r","c","d"],e):RV(["r","c","d"],e)}\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));\n        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        ${t.output} = result;\n      }\n    `}}(s);let l=[null!=t?t:ND(s)];return{dtype:o,shape:i,dataId:this.runWebGLProgram(a,[{shape:s,dtype:o,dataId:e}],o,l,!0,t).dataId}}runWebGLProgram(e,t,n,r,i=!1,o){let a=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(a.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===CD.DENSE){let t=null!=o?o:ND(e.outputShape);s.texShape=t.map(e=>2*e)}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===Si.sizeFromShape(a.shape))return s.values=Si.getTypedArrayFromDType(a.dtype,0),a;let l=[],u=t.map(t=>{if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let n=this.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&Si.sizeFromShape(t.shape)<=qe().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}if(this.uploadToGPU(t.dataId),!!n.isPacked!=!!e.packedInputs)t=n.isPacked?this.unpackTensor(t):this.packTensor(t),l.push(t),n=this.texData.get(t.dataId);else if(n.isPacked&&!yV(n.shape,t.shape)){let e=t,r=t.shape;t.shape=n.shape,t=this.packedReshape(t,r),l.push(t),n=this.texData.get(t.dataId),e.shape=r}return{shape:t.shape,texData:n,isUniform:!1}});this.uploadToGPU(a.dataId);let c,p={shape:a.shape,texData:s,isUniform:!1},d=function(e,t,n){let r="";t.concat(n).forEach(t=>{let i=null!=t.texData&&null!=t.texData.slice&&t.texData.slice.flatOffset>0;if(e.enableShapeUniforms&&!t.isUniform){let o=t.texData.texShape,{useSqueezeShape:a,uniformShape:s,keptDims:l}=KV(e.packedInputs,t.shape,o),u="",c="",p="";if(1===s.length&&e.packedInputs){let e=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];u=`${e[0]>1}_${e[1]>1}`}else if(2!==s.length||e.packedInputs){if(s.length>2&&!e.packedInputs){let e=Si.computeStrides(s);p=`${e[0]===o[1]}_${e[e.length-1]===o[1]}`}}else c=`${s[0]>1}_${s[1]>1}`;let d=t.shape.length,h=2===s.length&&Si.arraysEqual(t.shape,o),f=1===Si.sizeFromShape(t.shape),m=Rf.getBroadcastDims(t.shape,n.shape),g=!e.packedInputs&&d===n.shape.length&&Si.arraysEqual(o,n.texData.texShape),y=e.packedInputs||s.length>2?"":`${o[0]>1}_${o[1]>1}`;r+=`${d}_${g}_${a?l:""}_${s.length}_${f}_${m}_${h}_${u}_${c}_${p}_${y}_${i}`}else{let e=t.isUniform?"uniform":t.texData.texShape;r+=`${t.shape}_${e}_${i}`}});let i=e.userCode,o=e.constructor.name;return o+="_"+r+"_"+i+qe().getNumber("WEBGL_VERSION"),o}(e,u,p),h=this.getAndSaveBinary(d,()=>function(e,t,n,r){let i=n.map((e,n)=>{let r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}}),o=i.map(e=>e.shapeInfo),a={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},s=LV(i,a,t),l=zD(e.gl,s),u=e.createProgram(l);return qe().get("ENGINE_COMPILE_ONLY")?{program:t,fragmentShader:l,source:s,webGLProgram:u,inShapeInfos:o,outShapeInfo:a,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(e.buildVao(u),Object.assign({program:t,fragmentShader:l,source:s,webGLProgram:u,inShapeInfos:o,outShapeInfo:a},YV(e,t,u)))}(this.gpgpu,e,u,p)),f=null!=this.activeTimers;f&&(c=this.startTimer()),qe().get("ENGINE_COMPILE_ONLY")||function(e,t,n,r,i){t.program.enableShapeUniforms||(ZV(t.inShapeInfos,n),ZV([t.outShapeInfo],[r]));let o=r.texData.texture,a=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(o.texture,a[0],a[1]):e.setOutputMatrixTexture(o.texture,a[0],a[1]),e.setProgram(t.webGLProgram),e.bindVertexArray(t.webGLProgram.vao),1===qe().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN);for(let r=0;r<n.length;++r){let i=n[r],{uniform:o,offset:a,shape:s,texShape:l}=t.variablesLocations[r];if(s){let{uniformShape:n}=KV(t.program.packedInputs,i.shape,i.texData.texShape);switch(n.length){case 1:e.gl.uniform1iv(s,new Int32Array(n));break;case 2:e.gl.uniform2iv(s,new Int32Array(n));break;case 3:e.gl.uniform3iv(s,new Int32Array(n));break;case 4:e.gl.uniform4iv(s,new Int32Array(n))}}if(l&&e.gl.uniform2i(l,i.texData.texShape[0],i.texData.texShape[1]),null!=o){if(i.isUniform){if(Si.sizeFromShape(i.shape)<2)e.gl.uniform1f(o,i.uniformValues[0]);else{let t=i.uniformValues;t instanceof Float32Array||(t=new Float32Array(t)),e.gl.uniform1fv(o,t)}continue}null!=i.texData.slice&&null!=a&&e.gl.uniform1i(a,i.texData.slice.flatOffset),e.setInputMatrixTexture(i.texData.texture.texture,o,r)}}let s=t.outShapeLocation;if(s)switch(r.shape.length){case 1:e.gl.uniform1iv(s,new Int32Array(r.shape));break;case 2:e.gl.uniform2iv(s,new Int32Array(r.shape));break;case 3:e.gl.uniform3iv(s,new Int32Array(r.shape));break;case 4:e.gl.uniform4iv(s,new Int32Array(r.shape))}if(t.outShapeStridesLocation){let n=Si.computeStrides(r.shape);switch(r.shape.length){case 2:e.gl.uniform1iv(t.outShapeStridesLocation,new Int32Array(n));break;case 3:e.gl.uniform2iv(t.outShapeStridesLocation,new Int32Array(n));break;case 4:e.gl.uniform3iv(t.outShapeStridesLocation,new Int32Array(n))}}if(t.outTexShapeLocation&&e.gl.uniform2i(t.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),t.program.customUniforms&&i)for(let n=0;n<t.program.customUniforms.length;++n){let r=t.program.customUniforms[n],o=t.customUniformLocations[n],a=i[n];if("float"===r.type)e.gl.uniform1fv(o,a);else if("vec2"===r.type)e.gl.uniform2fv(o,a);else if("vec3"===r.type)e.gl.uniform3fv(o,a);else if("vec4"===r.type)e.gl.uniform4fv(o,a);else if("int"===r.type)e.gl.uniform1iv(o,a);else if("ivec2"===r.type)e.gl.uniform2iv(o,a);else if("ivec3"===r.type)e.gl.uniform3iv(o,a);else{if("ivec4"!==r.type)throw Error(`uniform type ${r.type} is not supported yet.`);e.gl.uniform4iv(o,a)}}e.executeProgram()}(this.gpgpu,h,u,p,r),l.forEach(e=>this.disposeIntermediateTensorInfo(e)),f&&(c=this.endTimer(c),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(c)}));let m=qe().get("WEBGL_FLUSH_THRESHOLD");if(m>0){let e=Si.now();e-this.lastGlFlushTime>m&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=e)}if(!qe().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===i){let e=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),e}return a}compileAndRun(e,t,n,r,i=!1){return n=n||t[0].dtype,this.runWebGLProgram(e,t,n,r,i)}getAndSaveBinary(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(qe().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(e=>{this.gpgpu.deleteProgram(this.binaryCache[e].webGLProgram),delete this.binaryCache[e]}),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return null==this.floatPrecisionValue&&(this.floatPrecisionValue=Xa(()=>{if(!qe().get("WEBGL_RENDER_FLOAT32_ENABLED")){let e=qe().getBool("DEBUG");qe().set("DEBUG",!1);let t=this.abs(eu(1e-8)).dataSync()[0];if(qe().set("DEBUG",e),t>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return 32===this.floatPrecision()?1e-7:1e-4}uploadToGPU(e){let t=this.texData.get(e),{shape:n,dtype:r,values:i,texture:o,usage:a,isPacked:s}=t;if(null!=o)return;let l,u=null!=this.activeTimers;u&&(l=Si.now());let c=t.texShape;if(null==c&&(c=mV(n,s),t.texShape=c),null!=i){let e,o=fV(n),a=c[1],p=c[0],d=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(s||!d)&&([a,p]=RD(c[0],c[1])),e=s?new class{constructor(e,t=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];let n=NV();this.outputShape=e,this.enableShapeUniforms=eM(this.outputShape.length);let r="",i="result";t&&(i="floor(result * 255. + 0.5)");for(let t=0;t<=1;t++)for(let i=0;i<=1;i++){let o=2*t+i;r+=`\n          localCoords = coords;\n          if(localCoords[2] + ${i} < ${this.enableShapeUniforms?"outShape[2]":""+e[2]}) {\n          localCoords[2] += ${i};\n          if (localCoords[1] + ${t} < ${this.enableShapeUniforms?"outShape[1]":""+e[1]}) {\n            localCoords[1] += ${t};\n\n            flatIndex = getFlatIndex(localCoords);\n            offset = imod(flatIndex, 4);\n\n            flatIndex = idiv(flatIndex, 4, 1.);\n\n            int r = flatIndex / texShape[1];\n            int c = imod(flatIndex, texShape[1]);\n            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);\n            values = ${n.texture2D}(A, uv);\n\n            if (offset == 0) {\n              result[${o}] = values[0];\n            } else if (offset == 1) {\n              result[${o}] = values[1];\n            } else if (offset == 2) {\n              result[${o}] = values[2];\n            } else {\n              result[${o}] = values[3];\n            }\n          }\n        }\n        `}this.userCode=`\n        ${this.enableShapeUniforms?"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;\n  }\n":VV(e)}\n\n        void main() {\n          ivec3 coords = getOutputCoords();\n\n          vec4 result = vec4(0.);\n          int flatIndex, r, c, offset;\n          ivec3 localCoords;\n          vec2 uv;\n          vec4 values;\n\n          ${r}\n\n          ${n.output} = ${i};\n        }\n    `}}(o,d):new nM(o,d);let h=d?[p,a]:c,f=this.makeTensorInfo(h,r),m=this.texData.get(f.dataId);m.usage=d?SD.PIXELS:SD.UPLOAD,m.texShape=h,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(f.dataId),a,p,i);let g=[[p,a]],y=!0,v=this.runWebGLProgram(e,[f],r,g,y),b=this.texData.get(v.dataId);t.texShape=b.texShape,t.isPacked=b.isPacked,t.usage=b.usage,qe().get("ENGINE_COMPILE_ONLY")?this.disposeData(v.dataId):(t.texture=b.texture,t.values=null,this.texData.delete(v.dataId)),this.disposeIntermediateTensorInfo(f),u&&(this.uploadWaitMs+=Si.now()-l)}else{let e=this.acquireTexture(c,a,r,s);t.texture=e}}convertAndCacheOnCPU(e,t){let n=this.texData.get(e),{dtype:r}=n;return null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){let n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length);for(let t=0;t<n.length;++t)n[t]=Math.round(e[t]);return n}throw new Error("Unknown dtype "+t)}(t,r)),n.values}acquireTexture(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){let e=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${e} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,t,r)}computeBytes(e,t){return e[0]*e[1]*Si.bytesPerElement(t)}checkCompileCompletion(){for(let[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){let e=[];if(this.gpgpu.parallelCompilationExtension){for(let[,t]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(t));return Promise.all(e)}for(let[,t]of Object.entries(this.binaryCache)){let n=new Promise(e=>{try{this.checkCompletion_(t),e(!0)}catch(e){throw e}});e.push(n)}return Promise.all(e)}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await Of(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(!1===this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS))throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),!1===this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)?(BD(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(let e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);let{variablesLocations:t,customUniformLocations:n,infLoc:r,nanLoc:i,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:s}=YV(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=t,e.customUniformLocations=n,e.infLoc=r,e.nanLoc=i,e.outShapeLocation=o,e.outShapeStridesLocation=a,e.outTexShapeLocation=s}}createTensorFromGPUData(e,t,n){e.channels=e.channels||"RGBA";let{texture:r,height:i,width:o,channels:a}=e,s=Ga().backend;if(!s.gpgpu.gl.isTexture(r))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");let l=s.writeTexture(r,t,n,i,o,a);return Ga().makeTensorFromDataId(l,t,n,s)}};VF.nextDataId=0;var MF="4.7.0";function FF(){qe().set("WEBGL_FORCE_F16_TEXTURES",!0)}Oo.isBrowser()&&ss("webgl",()=>new VF,2);var LF={forceHalfFloat:FF},zF=class{constructor(e,t,n){this.variableNames=["A","B"],this.outputShape=Rf.assertAndGetBroadcastShape(t,n),this.enableShapeUniforms=eM(this.outputShape.length),this.userCode=`\n      float binaryOperation(float a, float b) {\n        ${e}\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    `}},jF="\n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n",qF=class{constructor(e,t,n,r=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Rf.assertAndGetBroadcastShape(t,n);let i=this.outputShape.length;this.enableShapeUniforms=eM(i);let o="";if(r)if(0===i||1===Si.sizeFromShape(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(o=`\n          ${GV(i)} coords = getOutputCoords();\n        `,1===i)this.enableShapeUniforms?o+="\n            result.y = (coords + 1) >= outShape ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ":o+=`\n            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          `;else{let e=CF("coords",i);this.enableShapeUniforms?o+=`\n            bool nextRowOutOfBounds =\n              (${e[i-2]} + 1) >= outShape[${i} - 2];\n            bool nextColOutOfBounds =\n              (${e[i-1]} + 1) >= outShape[${i} - 1];\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `:o+=`\n            bool nextRowOutOfBounds =\n              (${e[i-2]} + 1) >= ${this.outputShape[i-2]};\n            bool nextColOutOfBounds =\n              (${e[i-1]} + 1) >= ${this.outputShape[i-1]};\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          `}this.userCode=`\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        ${e}\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        ${o}\n\n        setOutput(result);\n      }\n    `}};function $F(e){let{inputs:t,backend:n}=e,{x:r}=t;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var BF={kernelName:un,backendName:"webgl",kernelFunc:$F};function UF(e){let{inputs:t,backend:n}=e,{real:r,imag:i}=t,o=n.makeTensorInfo(r.shape,"complex64"),a=n.texData.get(o.dataId),s=$F({inputs:{x:r},backend:n}),l=$F({inputs:{x:i},backend:n});return a.complexTensorInfos={real:s,imag:l},o}var WF={kernelName:bt,backendName:"webgl",kernelFunc:UF},HF="return (a < 0.) ? b * a : a;",QF="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var GF={kernelName:mn,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{alpha:o}=r,a=n.makeTensorInfo([],"float32",Si.createScalarValue(o,"float32")),s=qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new qF(QF,i.shape,a.shape):new zF(HF,i.shape,a.shape),l=n.runWebGLProgram(s,[i,a],"float32");return n.disposeIntermediateTensorInfo(a),l}},KF="return (a < 0.) ? b * a : a;",JF="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";var XF={kernelName:tr,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{x:r,alpha:i}=t,o=qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new qF(JF,r.shape,i.shape):new zF(KF,r.shape,i.shape);return n.runWebGLProgram(o,[r,i],"float32")}};function YF({opSnippet:e,packedOpSnippet:t,cpuKernelImpl:n,dtype:r}){return({inputs:i,backend:o})=>{let a,{x:s}=i,l=o,u=r||s.dtype;if(l.shouldExecuteOnCPU([s])&&null!=n){let e=l.texData.get(s.dataId),t=n(e.values,u);return l.makeTensorInfo(s.shape,u,t)}return a=qe().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=t?new NF(s.shape,t):new IF(s.shape,e),l.runWebGLProgram(a,[s],u)}}function ZF({opSnippet:e,packedOpSnippet:t,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:i,dtype:o}){return({inputs:a,backend:s})=>{let{a:l,b:u}=a,c=s;if(r&&"complex64"===l.dtype){let t=c.texData.get(l.dataId),n=c.texData.get(u.dataId),[r,i]=[[t.complexTensorInfos.real,n.complexTensorInfos.real],[t.complexTensorInfos.imag,n.complexTensorInfos.imag]].map(t=>{let[n,r]=t,i={dataId:n.dataId,dtype:n.dtype,shape:l.shape},o={dataId:r.dataId,dtype:r.dtype,shape:u.shape},a=new zF(e,l.shape,u.shape);return c.runWebGLProgram(a,[i,o],mo(n.dtype,r.dtype))}),o=UF({inputs:{real:r,imag:i},backend:c});return c.disposeIntermediateTensorInfo(r),c.disposeIntermediateTensorInfo(i),o}let p,d=o||mo(l.dtype,u.dtype);if(("string"===l.dtype||"string"===u.dtype||c.shouldExecuteOnCPU([l,u]))&&null!=i){let e=c.texData.get(l.dataId).values,t=c.texData.get(u.dataId).values,n="string"===l.dtype?Rf.fromUint8ToStringArray(e):e,r="string"===l.dtype?Rf.fromUint8ToStringArray(t):t,[o,a]=i(l.shape,u.shape,n,r,d),s=c.makeTensorInfo(a,d);return c.texData.get(s.dataId).values=o,s}return p=qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=t?new qF(t,l.shape,u.shape,n):new zF(e,l.shape,u.shape),c.runWebGLProgram(p,[l,u],d)}}function eL(e,t=!1){if("linear"===e)return"return x;";if("relu"===e)return t?"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n";if("elu"===e)return t?"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n":"return (x >= 0.0) ? x : (exp(x) - 1.0);";if("relu6"===e)return t?"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n":"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n";if("prelu"===e)return t?JF:KF;if("leakyrelu"===e)return t?QF:HF;if("sigmoid"===e)return"return 1.0 / (1.0 + exp(-1.0 * x));";throw new Error(`Activation ${e} has not been implemented for the WebGL backend.`)}var tL=class{constructor(e,t,n,r=!1,i=!1,o=!1,a=null,s=!1,l=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.enableShapeUniforms=eM(this.outputShape.length);let u=r?e[1]:e[2],c=Math.ceil(u/2),p=r?"i * 2, rc.y":"rc.y, i * 2",d=i?"rc.z, i * 2":"i * 2, rc.z",h=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],f=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],m="",g="";a&&(m=s?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${a}\n        }`:l?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${a}\n        }`:`vec4 activation(vec4 x) {\n          ${a}\n        }`,g="result = activation(result);");let y=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),l&&this.variableNames.push("leakyreluAlpha");let v="rc.x",b="rc.x";e[0]<t[0]?v=`imod(rc.x, ${e[0]})`:t[0]<e[0]&&(b=`imod(rc.x, ${t[0]})`),this.userCode=`\n      ${m}\n      // Don't use uniform for sharedDimensionPacked for performance.\n      const float sharedDimension = ${c}.0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        int batchA = ${v};\n        int batchB = ${b};\n        for (int i = 0; i < ${c}; i++) {\n          vec4 a = getMatrixA(batchA, ${p});\n          vec4 b = getMatrixB(batchB, ${d});\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += (${h[0]} * ${f[0]});\n          result += (${h[1]} * ${f[1]});\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        ${y}\n\n        ${g}\n\n        setOutput(result);\n      }\n    `}},nL="return areal * breal - aimag * bimag;",rL="return areal * bimag + aimag * breal;",iL=class{constructor(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Rf.assertAndGetBroadcastShape(t,n),this.userCode=`\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        ${e}\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    `}},oL="return a * b;";function aL(e){let t,{inputs:n,backend:r}=e,{a:i,b:o}=n,a=Rf.upcastType(i.dtype,o.dtype);if("complex64"===i.dtype){let e=r.texData.get(i.dataId),t=r.texData.get(o.dataId),n=new iL(nL,i.shape,o.shape),a=new iL(rL,i.shape,o.shape),s=[{dataId:e.complexTensorInfos.real.dataId,dtype:e.complexTensorInfos.real.dtype,shape:i.shape},{dataId:e.complexTensorInfos.imag.dataId,dtype:e.complexTensorInfos.imag.dtype,shape:i.shape},{dataId:t.complexTensorInfos.real.dataId,dtype:t.complexTensorInfos.real.dtype,shape:o.shape},{dataId:t.complexTensorInfos.imag.dataId,dtype:t.complexTensorInfos.imag.dtype,shape:o.shape}],l=r.runWebGLProgram(n,s,"float32"),u=r.runWebGLProgram(a,s,"float32"),c=UF({inputs:{real:l,imag:u},backend:r});return r.disposeIntermediateTensorInfo(l),r.disposeIntermediateTensorInfo(u),c}if(r.shouldExecuteOnCPU([i,o])){let e=r.texData.get(i.dataId),t=r.texData.get(o.dataId),[n,s]=KM(i.shape,o.shape,e.values,t.values,a),l=r.makeTensorInfo(s,a);return r.texData.get(l.dataId).values=n,l}return t=qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new qF(oL,i.shape,o.shape):new zF(oL,i.shape,o.shape),r.runWebGLProgram(t,[i,o],a)}var sL={kernelName:Bn,backendName:"webgl",kernelFunc:aL};function lL(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{shape:o}=r,a=n,s=Si.sizeFromShape(i.shape),l=Si.inferFromImplicitShape(o,s),u=Si.sizeFromShape(l);Si.assert(s===u,()=>`The new shape (${l}) has ${u} elements and the old shape (${i.shape}) has ${s} elements. The new shape and old shape must have the same number of elements.`);let c=a.texData.get(i.dataId);return!c.isPacked||yV(i.shape,l)||null!==c.texture&&yV(c.shape,l)?(a.incRef(i.dataId),{dataId:i.dataId,shape:l,dtype:i.dtype}):function(e,t,n){let r=[dV(e.shape),...hV(e.shape)],i={dtype:e.dtype,shape:r,dataId:e.dataId},o=[dV(t),...hV(t)],a=new SF(o,r),s=[r],l=n.runWebGLProgram(a,[i],e.dtype,s,!0);return{dataId:l.dataId,shape:t,dtype:l.dtype}}(i,l,a)}var uL={kernelName:cr,backendName:"webgl",kernelFunc:lL},cL=class{constructor(e,t){this.variableNames=["x"];let{windowSize:n,batchSize:r,inSize:i,outSize:o}=e;this.outputShape=[r,o];let a=4*Math.floor(n/4),s=n%4,l="sumValue += dot(values, ones);";if(null!=t){let e=1/t;l=`sumValue += dot(values * ${Si.isInt(e)?e.toPrecision(2):e}, ones);`}let u="";i%n>0&&(u=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return 0.0;\n        }\n      `),this.userCode=`\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${u}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${a}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${l}\n        }\n\n        int inIdx = inOffset + ${a};\n        if (${1===s}) {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          ${l}\n        } else if (${2===s}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          ${l}\n        } else if (${3===s}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          ${l}\n        }\n        setOutput(sumValue);\n      }\n    `}},pL=class{constructor(e,t){this.variableNames=["x"];let{windowSize:n,batchSize:r,inSize:i,outSize:o}=e;this.outputShape=[r,o];let a="0.0",s="";"prod"===t?a="1.0":"min"===t?(a="1.0 / 1e-20",s="min"):"max"===t&&(a="-1.0 / 1e-20",s="max");let l=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"sum"===t?l="sumValue":"prod"===t?l="prodValue":"all"===t?l="allValue":"any"===t&&(l="anyValue");let u=4*Math.floor(n/4),c=n%4,p=`\n      if (${"sum"===t}) {\n        sumValue += dot(values, ones);\n      } else if (${"prod"===t}) {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = ${s}(values, minMaxValue);\n        if (${"min"===t} || ${"max"===t}) {\n          minMaxValue = ${s}(values, minMaxValue);\n          bvec4 isNaN = isnan(values);\n          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {\n            minMaxValue = vec4(NAN);\n          }\n        }\n      }\n    `,d="vec4";"all"===t?(a="1.0",p="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",d="bvec4"):"any"===t&&(a="0.0",p="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",d="bvec4");let h="";i%n>0&&(h=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return initializationValue;\n        }\n      `),this.userCode=`\n      const float initializationValue = ${a};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        ${h}\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${n};\n\n        vec4 minMaxValue = vec4(${a});\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < ${u}; i += 4) {\n          int inIdx = inOffset + i;\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          ${p}\n        }\n\n        int inIdx = inOffset + ${u};\n        if (${1===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          ${p}\n        } else if (${2===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          ${p}\n        } else if (${3===c}) {\n          ${d} values = ${d}(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          ${p}\n        }\n        setOutput(${l});\n      }\n    `}};function dL(e,t,n,r){let i=function(e){let t=[];for(;0===t.length||1!==t[t.length-1].outSize;){let n=t.length?t[t.length-1].outSize:e[1],r=Rf.computeOptimalWindowSize(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),o=e;for(let a=0;a<i.length;a++){let s,l,{inSize:u,windowSize:c,outSize:p}=i[a];s="mean"===n?0===a?new cL({windowSize:c,inSize:u,batchSize:e.shape[0],outSize:p},u):new cL({windowSize:c,inSize:u,batchSize:e.shape[0],outSize:p}):new pL({windowSize:c,inSize:u,batchSize:e.shape[0],outSize:p},n),l=o,o=r.runWebGLProgram(s,[o],t),l.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(l)}return o}function hL(e,t,n){let r=qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;let n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);let r=GV(this.rank),i=_F("rc",this.rank),o=new Array(this.rank);for(let e=0;e<t.length;e++)o[t[e]]=i[e];let a=`vec2(${o.slice(-2).join()})`,s=`++${i[this.rank-1]} < ${n[this.rank-1]}`,l=`getChannel(getA(${o.join()}), ${a})`;this.userCode=`\n    void main() {\n      ${r} rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = ${l};\n      if(${s}) {\n        result[1] = ${l};\n      }\n      --${i[this.rank-1]};\n      if(++${i[this.rank-2]} < ${n[this.rank-2]}) {\n        result[2] = ${l};\n        if(${s}) {\n          result[3] = ${l};\n        }\n      }\n      setOutput(result);\n    }\n    `}}(e.shape,t):new class{constructor(e,t){this.variableNames=["A"];let n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;let r=GV(this.rank),i=function(e){let t=e.length;if(t>6)throw Error(`Transpose for rank ${t} is not yet supported`);let n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t);for(let t=0;t<e.length;t++)r[e[t]]=n[t];return r.join()}(t);this.userCode=`\n    void main() {\n      ${r} resRC = getOutputCoords();\n      setOutput(getA(${i}));\n    }\n    `}}(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}function fL(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r;return function(e,t,n,r){let i=t,o=e.shape.length,a=Si.parseAxisParam(i,e.shape),s=a,l=Rf.getAxesPermutation(s,o),u=null!=l,c=e;u&&(c=hL(e,l,r),s=Rf.getInnerMostAxes(s.length,o)),Rf.assertAxesAreInnerMostDims("sum",s,o);let[p,d]=Rf.computeOutAndReduceShapes(c.shape,s),h=p;n&&(h=Rf.expandShapeToKeepDim(p,a));let f=Si.sizeFromShape(d),m=lL({inputs:{x:c},attrs:{shape:[Si.sizeFromShape(e.shape)/f,f]},backend:r}),g=dL(m,go(e.dtype),"sum",r),y=lL({inputs:{x:g},attrs:{shape:h},backend:r});return r.disposeIntermediateTensorInfo(m),r.disposeIntermediateTensorInfo(g),u&&r.disposeIntermediateTensorInfo(c),y}(i,o,a,n)}var mL={kernelName:Nr,backendName:"webgl",kernelFunc:fL};function gL(e){let t,{inputs:n,backend:r,attrs:i}=e,{x:o}=n,{perm:a}=i,s=r,l=o.shape.length,u=new Array(l);for(let e=0;e<u.length;e++)u[e]=o.shape[a[e]];if(s.shouldExecuteOnCPU([o])){let e=s.texData.get(o.dataId).values,n=xF(e,o.shape,o.dtype,a,u);t=s.makeTensorInfo(u,o.dtype),s.texData.get(t.dataId).values=n}else t=hL(o,a,s);return t}var yL={kernelName:Zr,backendName:"webgl",kernelFunc:gL};function vL({a:e,b:t,transposeA:n,transposeB:r,backend:i,bias:o=null,preluActivationWeights:a=null,leakyreluAlpha:s=0,activation:l=null}){let u=e.shape.length,c=t.shape.length,p=n?e.shape[u-2]:e.shape[u-1],d=r?t.shape[c-1]:t.shape[c-2],h=n?e.shape[u-1]:e.shape[u-2],f=r?t.shape[c-2]:t.shape[c-1],m=e.shape.slice(0,-2),g=t.shape.slice(0,-2),y=Si.sizeFromShape(m),v=Si.sizeFromShape(g),b=Ol.assertAndGetBroadcastShape(e.shape.slice(0,-2),t.shape.slice(0,-2)).concat([h,f]);Si.assert(p===d,()=>`Error in matMul: inner shapes (${p}) and (${d}) of Tensors with shapes ${e.shape} and ${t.shape} and transposeA=${n} and transposeB=${r} must match.`);let x,w=n?[y,p,h]:[y,h,p],_=r?[v,f,d]:[v,d,f],C=lL({inputs:{x:e},backend:i,attrs:{shape:w}}),S=lL({inputs:{x:t},backend:i,attrs:{shape:_}}),k=[C,S],E=Math.max(y,v),T=n?C.shape[1]:C.shape[2],I=null!=o,P=null!=a,O="leakyrelu"===l,N=null!=l?eL(l,!0):null;if((1===h||1===f)&&T>1e3&&!1===(I||P||O||null!=N)){let e=C,t=S;n&&(e=gL({inputs:{x:C},backend:i,attrs:{perm:[0,2,1]}}),k.push(e)),r&&(t=gL({inputs:{x:S},backend:i,attrs:{perm:[0,2,1]}}),k.push(t));let o=1===f,a=e;1!==f&&(a=lL({inputs:{x:e},backend:i,attrs:{shape:[E,T,1]}}),k.push(a));let s=1===f?2:1,l=t;o&&(l=lL({inputs:{x:t},backend:i,attrs:{shape:[E,1,T]}}),k.push(l));let u=aL({inputs:{a:a,b:l},backend:i});x=fL({inputs:{x:u},backend:i,attrs:{axis:s,keepDims:!0}}),k.push(u)}else{let l=mo(e.dtype,t.dtype),u=new tL(w,_,[E,h,f],n,r,I,N,P,O),c=[C,S];if(null!=o&&c.push(o),P&&c.push(a),O){let e=i.makeTensorInfo([],"float32",Si.createScalarValue(s,"float32"));c.push(e),k.push(e)}x=i.runWebGLProgram(u,c,l)}let R=lL({inputs:{x:x},backend:i,attrs:{shape:b}});k.push(x);for(let e of k)i.disposeIntermediateTensorInfo(e);return R}var bL={kernelName:li,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{a:i,b:o,bias:a,preluActivationWeights:s}=t,{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:p}=r;return vL({a:i,b:o,transposeA:l,transposeB:u,backend:n,bias:a,preluActivationWeights:s,leakyreluAlpha:p,activation:c})}},xL="return abs(x);";var wL={kernelName:He,backendName:"webgl",kernelFunc:function(e){let t,{inputs:n,backend:r}=e,{x:i}=n;if(r.shouldExecuteOnCPU([i])&&"complex64"!==i.dtype){let e=r.texData.get(i.dataId),t=aF(e.values);return r.makeTensorInfo(i.shape,i.dtype,t)}return t=qe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new NF(i.shape,xL):new IF(i.shape,xL),r.runWebGLProgram(t,[i],i.dtype)}},_L=YF({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),CL={kernelName:Qe,backendName:"webgl",kernelFunc:_L},SL=YF({opSnippet:"if (isnan(x)) return x;\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),kL={kernelName:Ge,backendName:"webgl",kernelFunc:SL},EL="return a + b;",TL=ZF({opSnippet:EL,packedOpSnippet:EL,supportsComplex:!0,cpuKernelImpl:TM}),IL={kernelName:Ke,backendName:"webgl",kernelFunc:TL};var PL={kernelName:Je,backendName:"webgl",kernelFunc:function e(t){let{inputs:n,backend:r}=t,i=n;if(1===i.length)return $F({inputs:{x:i[0]},backend:r});if(i.length>qe().get("WEBGL_MAX_TEXTURES_IN_SHADER")){let t=Math.floor(i.length/2),n=e({inputs:i.slice(0,t),backend:r}),o=e({inputs:i.slice(t),backend:r});return e({inputs:[n,o],backend:r})}let o=i.map(e=>e.dtype).reduce((e,t)=>mo(e,t)),a=i.map(e=>e.shape),s=qe().getBool("WEBGL_PACK")?new class{constructor(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((e,t)=>"T"+t);let n=[];this.variableNames.forEach(e=>{n.push(`vec4 v${e} = get${e}AtOutCoords();`)});let r=this.variableNames.map(e=>"v"+e).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        vec4 result = ${r};\n        setOutput(result);\n      }\n    `}}(i[0].shape,a):new class{constructor(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((e,t)=>"T"+t);let n=[];this.variableNames.forEach(e=>{n.push(`float v${e} = get${e}AtOutCoords();`)});let r=this.variableNames.map(e=>"v"+e).join(" + ");this.userCode=`\n      void main() {\n        ${n.join("\n        ")}\n\n        float result = ${r};\n        setOutput(result);\n      }\n    `}}(i[0].shape,a);return r.runWebGLProgram(s,i,o)}};var OL={kernelName:Xe,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r,s=i.shape.length,l=Si.parseAxisParam(o,i.shape),u=l,c=Rf.getAxesPermutation(u,s),p=i;null!=c&&(p=gL({inputs:{x:i},backend:n,attrs:{perm:c}}),u=Rf.getInnerMostAxes(u.length,s)),Rf.assertAxesAreInnerMostDims("all",u,s);let d,[h,f]=Rf.computeOutAndReduceShapes(p.shape,u),m=lL({inputs:{x:p},backend:n,attrs:{shape:[-1,Si.sizeFromShape(f)]}}),g=dL(m,m.dtype,"all",n);if(a){d=lL({inputs:{x:g},backend:n,attrs:{shape:Rf.expandShapeToKeepDim(h,l)}})}else d=lL({inputs:{x:g},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=c&&n.disposeIntermediateTensorInfo(p),d}};var NL={kernelName:Ye,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r,s=i.shape.length,l=Si.parseAxisParam(o,i.shape),u=l,c=Rf.getAxesPermutation(u,s),p=i;null!=c&&(p=gL({inputs:{x:i},backend:n,attrs:{perm:c}}),u=Rf.getInnerMostAxes(u.length,s)),Rf.assertAxesAreInnerMostDims("any",u,s);let d,[h,f]=Rf.computeOutAndReduceShapes(p.shape,u),m=lL({inputs:{x:p},backend:n,attrs:{shape:[-1,Si.sizeFromShape(f)]}}),g=dL(m,m.dtype,"any",n);if(a){d=lL({inputs:{x:g},backend:n,attrs:{shape:Rf.expandShapeToKeepDim(h,l)}})}else d=lL({inputs:{x:g},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=c&&n.disposeIntermediateTensorInfo(p),d}};function RL(e,t,n,r=null){let i=null!=r?r.shape:t.shape,o=i[i.length-1],a=Rf.computeOptimalWindowSize(o),s=new class{constructor(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Si.assert(e.length>2,()=>`Packed arg${n.charAt(0).toUpperCase()+n.slice(1)} supports only inputs with rank above 2.`);let i=e[e.length-1],o=Math.ceil(i/t);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");let a,s,l=this.outputShape,u=l.length,c=GV(u),p=CF("coords",u);if(1===o){s=u+1;let e=GV(s);a=`\n        ${e} sourceLocR = ${e}(${p.join()}, 0);\n        ++${p[u-1]};\n        ${e} sourceLocG = ${e}(${p.join()}, 0);\n        ++${p[u-2]};\n        ${e} sourceLocA = ${e}(${p.join()}, 0);\n        --${p[u-1]};\n        ${e} sourceLocB = ${e}(${p.join()}, 0);\n        --${p[u-2]};`}else s=u,a=`\n        ${c} sourceLocR = coords;\n        ++${p[u-1]};\n        ${c} sourceLocG = coords;\n        ++${p[u-2]};\n        ${c} sourceLocA = coords;\n        --${p[u-1]};\n        ${c} sourceLocB = coords;\n        --${p[u-2]};`;let d=["x","y","z","w","u","v"].slice(0,s),h="."+d[s-1],f=d.map(e=>"int "+e),m=CF("sourceLocR",s-1).concat("inIdx.r"),g=CF("sourceLocG",s-1).concat("inIdx.g"),y=CF("sourceLocB",s-1).concat("inIdx.b"),v=CF("sourceLocA",s-1).concat("inIdx.a"),b="max"===n?"greaterThan":"lessThan",x=r?"":`\n          inIdx = round(vec4(getBestIndicesAChannel(${m.join()}),\n                             getBestIndicesAChannel(${g.join()}),\n                             getBestIndicesAChannel(${y.join()}),\n                             getBestIndicesAChannel(${v.join()})));`,w=`vec4(\n            getAChannel(${m.join()}),\n            hasNextCol ? getAChannel(${g.join()}) : 0.,\n            hasNextRow ? getAChannel(${y.join()}) : 0.,\n            hasNextRow && hasNextCol ? getAChannel(${v.join()}) : 0.)`,_=r?"":`\n      float getBestIndicesAChannel(${f.join()}) {\n        return getChannel(getBestIndicesA(${d.join()}),\n                                          vec2(${d.slice(-2).join()}));\n      }`;this.userCode=`\n      float getAChannel(${f.join()}) {\n        return getChannel(getA(${d.join()}),\n                               vec2(${d.slice(-2).join()}));\n      }\n      ${_}\n      void main() {\n        ${c} coords = getOutputCoords();\n        bool hasNextCol = ${p[u-1]} < ${l[u-1]-1};\n        bool hasNextRow = ${p[u-2]} < ${l[u-2]-1};\n        ${a}\n        ivec4 srcIdx = ivec4(sourceLocR${h}, sourceLocG${h},\n          sourceLocB${h}, sourceLocA${h}) * ${t};\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = ${w};\n\n        for (int i = 0; i < ${t}; i++) {\n          inIdx = srcIdx;\n          ${x}\n          vec4 candidate = ${w};\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4(${b}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    `}}(i,a,n,null==r),l=null==r?[t]:[t,r],u=e.runWebGLProgram(s,l,"int32");if(u.shape.length===t.shape.length){let r=RL(e,t,n,u);return e.disposeIntermediateTensorInfo(u),r}return u}function AL(e,t,n,r){let i=[n];if(Rf.assertAxesAreInnerMostDims("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,t.shape.length),!qe().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){let n=[],o=e.texData.get(t.dataId),a=t;null!==o&&o.isPacked&&(a=e.unpackTensor(t),n.push(a));let[s,l]=Rf.computeOutAndReduceShapes(a.shape,i),u=Si.sizeFromShape(l),c=lL({inputs:{x:a},backend:e,attrs:{shape:[-1,u]}});n.push(c);let p=function e(t,n,r,i=null){let o=n.shape[0],a=n.shape[1];null!=i&&(o=i.shape[0],a=i.shape[1]);let s=Rf.computeOptimalWindowSize(a),l={windowSize:s,inSize:a,batchSize:o,outSize:Math.ceil(a/s)},u=new class{constructor(e,t,n){this.variableNames=["A"];let{windowSize:r,batchSize:i,outSize:o}=e;n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];let a="max"===t?">":"<",s=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * ${r};\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < ${r}; i++) {\n          int inIdx = ${s};\n          float candidate = getA(batch, inIdx);\n          if (candidate ${a} bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    `}}(l,r,null==i),c=[n];null!=i&&c.push(i);let p=t.runWebGLProgram(u,c,"int32");if(1===p.shape[1])return p;let d=e(t,n,r,p);return t.disposeIntermediateTensorInfo(p),d}(e,c,r);n.push(p);let d=lL({inputs:{x:p},backend:e,attrs:{shape:s}});return n.forEach(t=>e.disposeIntermediateTensorInfo(t)),d}return RL(e,t,r)}var DL={kernelName:Ze,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o}=r,a=Si.parseAxisParam(o,i.shape),s=Rf.getAxesPermutation(a,i.shape.length),l=i,u=[];null!=s&&(l=gL({inputs:{x:i},backend:n,attrs:{perm:s}}),u.push(l),a=Rf.getInnerMostAxes(a.length,l.shape.length)),Rf.assertAxesAreInnerMostDims("argMax",[a[0]],l.shape.length);let c=AL(n,l,a[0],"max");return u.forEach(e=>n.disposeIntermediateTensorInfo(e)),c}};var VL={kernelName:et,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o}=r,a=Si.parseAxisParam(o,i.shape),s=Rf.getAxesPermutation(a,i.shape.length),l=i,u=[];null!=s&&(l=gL({inputs:{x:i},backend:n,attrs:{perm:s}}),u.push(l),a=Rf.getInnerMostAxes(a.length,l.shape.length)),Rf.assertAxesAreInnerMostDims("argMin",[a[0]],l.shape.length);let c=AL(n,l,a[0],"min");return u.forEach(e=>n.disposeIntermediateTensorInfo(e)),c}},ML=YF({opSnippet:"if (isnan(x)) return x;\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),FL={kernelName:tt,backendName:"webgl",kernelFunc:ML},LL=YF({opSnippet:"if (isnan(x)) return x;return log(x + sqrt(x * x + 1.0));"}),zL={kernelName:nt,backendName:"webgl",kernelFunc:LL},jL=YF({opSnippet:"if (isnan(x)) return x;\n  return atan(x);\n"}),qL={kernelName:rt,backendName:"webgl",kernelFunc:jL},$L=ZF({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n"}),BL={kernelName:ot,backendName:"webgl",kernelFunc:$L},UL=YF({opSnippet:"if (isnan(x)) return x;\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),WL={kernelName:it,backendName:"webgl",kernelFunc:UL},HL=class{constructor(e,t,n,r=!1,i=!1){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");let o=e.filterWidth,a=e.strideHeight,s=e.strideWidth,l=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterHeight,p=e.effectiveFilterWidth,d=e.padInfo.top,h=e.padInfo.left;this.outputShape=e.outShape;let f="avg"===t,m=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,g=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`,y="0.0";if(f||(y="-1.0 / 1e-20"),n){let t=">=";return void(this.userCode=`\n        const ivec2 strides = ivec2(${a}, ${s});\n        const ivec2 pads = ivec2(${d}, ${h});\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < ${c};\n              wR += ${l}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${p};\n                wC += ${u}) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value ${t} currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = ${r?i?m:g:`wR * ${p} + wC`};\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}let v=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(v="avgValue / max(count, 1.0)");let b=4*Math.floor(o/4),x=o%4,w=`\n      if (${f}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec2 strides = ivec2(${a}, ${s});\n      const ivec2 pads = ivec2(${d}, ${h});\n      const float initializationValue = ${y};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${y});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < ${c};\n            wR += ${l}) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${b}; wC += 4) {\n            int xC = xCCorner + wC * ${u};\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              getValue(batch, xR, xC + 3 * ${u}, d)\n            );\n\n            ${w}\n          }\n\n          int xC = xCCorner + ${b};\n          if (${1===x}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            ${w}\n          } else if (${2===x}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              initializationValue,\n              initializationValue\n            );\n\n            ${w}\n          } else if (${3===x}) {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + ${u}, d),\n              getValue(batch, xR, xC + 2 * ${u}, d),\n              initializationValue\n            );\n\n            ${w}\n          }\n        }\n        setOutput(${v});\n      }\n    `}},QL=class{constructor(e,t,n,r=!1,i=!1){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");let o=e.filterWidth,a=e.strideDepth,s=e.strideHeight,l=e.strideWidth,u=e.dilationDepth,c=e.dilationHeight,p=e.dilationWidth,d=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,m=e.padInfo.front,g=e.padInfo.top,y=e.padInfo.left;this.outputShape=e.outShape;let v="avg"===t,b="0.0";if(v||(b="-1.0 / 1e-20"),n){let t=">=";return void(this.userCode=`\n        const ivec3 strides =\n            ivec3(${a}, ${s}, ${l});\n        const ivec3 pads = ivec3(${m}, ${g}, ${y});\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < ${d};\n              wD += ${u}) {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int wR = 0; wR < ${h};\n                wR += ${c}) {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int wC = 0; wC < ${f};\n                  wC += ${p}) {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value ${t} currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = ${r?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${h} * ${f} +\n                      wR * ${f} + wC`};\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      `)}let x=`${t}(${t}(${t}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;"avg"===t&&(x="avgValue / max(count, 1.0)");let w=4*Math.floor(o/4),_=o%4,C=`\n      if (${v}) {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    `;this.userCode=`\n      const ivec3 strides =\n        ivec3(${a}, ${s}, ${l});\n      const ivec3 pads = ivec3(${m}, ${g}, ${y});\n      const float initializationValue = ${b};\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= ${e.inWidth}) {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4(${b});\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < ${d};\n            wD += ${u}) {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${h};\n            wR += ${c}) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${w}; wC += 4) {\n              int xC = xCCorner + wC * ${p};\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${p}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${p}, ch),\n                getValue(batch, xD, xR, xC + 3 * ${p}, ch)\n              );\n\n              ${C}\n            }\n\n            int xC = xCCorner + ${w};\n            if (${1===_}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              ${C}\n            } else if (${2===_}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${p}, ch),\n                initializationValue,\n                initializationValue\n              );\n\n              ${C}\n            } else if (${3===_}) {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + ${p}, ch),\n                getValue(batch, xD, xR, xC + 2 * ${p}, ch),\n                initializationValue\n              );\n\n              ${C}\n            }\n          }\n        }\n        setOutput(${x});\n      }\n    `}};var GL={kernelName:at,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t;PV(i,"avgPool");let{filterSize:o,strides:a,pad:s,dimRoundingMode:l}=r;Si.assert(Rf.eitherStridesOrDilationsAreOne(a,1),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${a} and dilations '1'`);let u=Rf.computePool2DInfo(i.shape,o,a,1,s,l);if(1===u.filterWidth&&1===u.filterHeight&&Si.arraysEqual(u.inShape,u.outShape))return $F({inputs:{x:i},backend:n});let c=new HL(u,"avg",!1);return n.runWebGLProgram(c,[i],"float32")}};var KL={kernelName:lt,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:o,strides:a,pad:s,dimRoundingMode:l,dataFormat:u}=r,c=Rf.computePool3DInfo(i.shape,o,a,[1,1,1],s,l,u),p=new QL(c,"avg",!1);return n.runWebGLProgram(p,[i],"float32")}};var JL={kernelName:ut,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,a=o,{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=r,p=Rf.computePool3DInfo(a.shape,s,l,[1,1,1],u,c),d=new class{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;let t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,p=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=c-1-e.padInfo.front,f=p-1-e.padInfo.top,m=d-1-e.padInfo.left,g=1/(t*n*r);this.userCode=`\n      const ivec3 pads = ivec3(${h}, ${f}, ${m});\n      const float avgMultiplier = float(${g});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${c};\n            wD += ${s}) {\n          float dyD = float(dyDCorner + wD) / ${i}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${p};\n              wR += ${l}) {\n            float dyR = float(dyRCorner + wR) / ${o}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${d};\n                wC += ${u}) {\n              float dyC = float(dyCCorner + wC) / ${a}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(p);return n.runWebGLProgram(d,[i],a.dtype)}};var XL={kernelName:st,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,a=o;PV([i,o],"avgPoolGrad");let{filterSize:s,strides:l,pad:u}=r,c=Rf.computePool2DInfo(a.shape,s,l,1,u),p=new class{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;let t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterHeight,l=e.effectiveFilterWidth,u=s-1-e.padInfo.top,c=l-1-e.padInfo.left,p=1/(t*n);this.userCode=`\n      const ivec2 pads = ivec2(${u}, ${c});\n      const float avgMultiplier = float(${p});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${s};\n            wR += ${o}) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${l};\n            wC+= ${a}) {\n            float dyC = float(dyCCorner + wC) / ${i}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(c);return n.runWebGLProgram(p,[i],a.dtype)}};var YL={kernelName:ct,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{a:i,b:o}=t,{transposeA:a,transposeB:s}=r;return vL({a:i,b:o,transposeA:a,transposeB:s,backend:n})}},ZL={kernelName:rn,backendName:"webgl",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r,mean:i,variance:o,offset:a,scale:s}=e;Si.assert(i.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),Si.assert(null==a||i.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),Si.assert(null==s||i.shape.length===s.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;null==l&&(l=.001);let u=[r,i,o],c=null;null!=a&&(c=a.shape,u.push(a));let p=null;null!=s&&(p=s.shape,u.push(s));let d=qe().getBool("WEBGL_PACK_NORMALIZATION")?new class{constructor(e,t,n,r,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Rf.assertAndGetBroadcastShape(e,t),Rf.assertAndGetBroadcastShape(e,n);let a="vec4(0.0)";null!=r&&(Rf.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let s="vec4(1.0)";null!=i&&(Rf.assertAndGetBroadcastShape(e,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        vec4 offset = ${a};\n        vec4 scale = ${s};\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4(${o}));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    `}}(r.shape,i.shape,o.shape,c,p,l):new class{constructor(e,t,n,r,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],Rf.assertAndGetBroadcastShape(e,t),Rf.assertAndGetBroadcastShape(e,n);let a="0.0";null!=r&&(Rf.assertAndGetBroadcastShape(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let s="1.0";null!=i&&(Rf.assertAndGetBroadcastShape(e,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = ${a};\n        float scale = ${s};\n        float inv = scale * inversesqrt(variance + float(${o}));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    `}}(r.shape,i.shape,o.shape,c,p,l);return t.runWebGLProgram(d,u,u[0].dtype)}},ez=["x","y","z","w","u","v"];function tz(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{begin:o,size:a}=r,[s,l]=lf.parseSliceParams(i,o,a);if(lf.assertParamsValid(i,s,l),0===Si.sizeFromShape(l))return n.makeTensorInfo(l,i.dtype,[]);if(n.shouldExecuteOnCPU([i])||"string"===i.dtype){let e=n.texData.get(i.dataId),t=sF(e.values,s,l,i.shape,i.dtype);return n.makeTensorInfo(l,i.dtype,t)}let{isPacked:u}=n.texData.get(i.dataId),c=lf.isSliceContinous(i.shape,s,l);if(u||!c){let e=qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new class{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let t=GV(this.rank),n=CF("coords",this.rank),r=CF("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":`vec2(${r.slice(-2).join()})`,o=`getChannel(getSource(${r.join()}), ${i})`,a=`\n      result.x = ${o};\n      if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n        ++${r[this.rank-1]};\n        result.y = ${o};\n        --${r[this.rank-1]};\n      }\n    `,s=1===this.rank?"":`\n      --${n[this.rank-1]};\n      if (++${n[this.rank-2]} < ${e[this.rank-2]}) {\n        ++${r[this.rank-2]};\n        result.z = ${o};\n        if (++${n[this.rank-1]} < ${e[this.rank-1]}) {\n          ++${r[this.rank-1]};\n          result.w = ${o};\n        }\n      }\n    `,l=this.rank<=4?`sourceLoc = coords +\n            ${t}(${e.map((e,t)=>`start[${t}]`).join()});`:e.map((e,t)=>`${r[t]} = ${n[t]} + start[${t}];`).join("\n");this.userCode=`\n      void main() {\n        ${t} coords = getOutputCoords();\n        ${t} sourceLoc;\n        ${l}\n        vec4 result = vec4(0.);\n        ${a}\n        ${s}\n        setOutput(result);\n      }\n    `}}(l):new class{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;let t=GV(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];let n,r=function(e){if(1===e)return"sourceLoc";if(e<=6)return ez.slice(0,e).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${e} is not yet supported`)}(this.rank);n=`\n        ${t} sourceLoc;\n        ${t} coords = getOutputCoords();\n        ${e.map((e,t)=>`sourceLoc.${ez[t]} = start[${t}] + coords.${ez[t]};`).join("\n")}\n      `,this.userCode=`\n      void main() {\n        ${n}\n        setOutput(getSource(${r}));\n      }\n    `}}(l),t=[s];return n.runWebGLProgram(e,[i],i.dtype,t)}return n.uploadToGPU(i.dataId),function(e,t,n,r){let i=r.texData.get(e.dataId),o=r.makeTensorInfo(n,e.dtype),a=r.texData.get(o.dataId);Object.assign(a,i),a.refCount=1,a.shape=n,a.dtype=e.dtype;let s=lf.computeFlatOffset(t,Si.computeStrides(e.shape));i.slice&&(s+=i.slice.flatOffset),a.slice={flatOffset:s,origDataId:i.slice&&i.slice.origDataId||e.dataId};let l=r.dataRefCount.get(a.slice.origDataId)||1;return r.dataRefCount.set(a.slice.origDataId,l+1),o}(i,s,l,n)}var nz={kernelName:Sr,backendName:"webgl",kernelFunc:tz},rz={kernelName:pt,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:o,crops:a}=r;Si.assert(i.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");let s=o.reduce((e,t)=>e*t),l=Rf.getReshaped(i.shape,o,s),u=Rf.getPermuted(l.length,o.length),c=Rf.getReshapedPermuted(i.shape,o,s),p=Rf.getSliceBeginCoords(a,o.length),d=Rf.getSliceSize(c,a,o.length),h=[],f=lL({inputs:{x:i},backend:n,attrs:{shape:l}}),m=gL({inputs:{x:f},backend:n,attrs:{perm:u}}),g=lL({inputs:{x:m},backend:n,attrs:{shape:c}}),y=tz({inputs:{x:g},backend:n,attrs:{begin:p,size:d}});return h.push(f),h.push(m),h.push(g),h.forEach(e=>n.disposeIntermediateTensorInfo(e)),y}};var iz={kernelName:dt,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,weights:o}=t,{size:a}=r,s=n.readSync(i.dataId),l=n.readSync(o.dataId),u=IM(s,l,o.dtype,o.shape,a);return n.makeTensorInfo([a],o.dtype,u)}};var oz={kernelName:ht,backendName:"webgl",kernelFunc:function(e){let t,{inputs:n,backend:r}=e,{a:i,b:o}=n,a=qe().getBool("WEBGL_PACK_BINARY_OPERATIONS"),s=qe().getNumber("WEBGL_VERSION");if(r.shouldExecuteOnCPU([i,o])||1===s){let e=r.texData.get(i.dataId).values,t=r.texData.get(o.dataId).values,[n,a]=OM(i.shape,o.shape,e,t,i.dtype),s=r.makeTensorInfo(a,i.dtype);return r.texData.get(s.dataId).values=n,s}return t=a?new qF("\n  int r = int(a.r) & int(b.r);\n  int g = int(a.g) & int(b.g);\n  int rb = int(a.b) & int(b.b);\n  int ra = int(a.a) & int(b.a);\n  return vec4(r, g, rb, ra);\n",i.shape,o.shape,!1):new zF("\n  return float(int(a.r) & int(b.r));\n",i.shape,o.shape),r.runWebGLProgram(t,[i,o],i.dtype)}};var az={kernelName:mt,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{s0:r,s1:i}=t,o=n.readSync(r.dataId),a=n.readSync(i.dataId),s=Rf.assertAndGetBroadcastShape(Array.from(o),Array.from(a));return n.makeTensorInfo([s.length],"int32",Int32Array.from(s))}},sz=ZF({opSnippet:"return float(a != b);",cpuKernelImpl:XM,dtype:"bool"}),lz={kernelName:Wn,backendName:"webgl",kernelFunc:sz};function uz(e){let{inputs:t,backend:n}=e,{input:r}=t;return $F({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var cz={kernelName:sr,backendName:"webgl",kernelFunc:uz};var pz={kernelName:gt,backendName:"webgl",kernelFunc:function e(t){let{inputs:n,backend:r,attrs:i}=t,{x:o}=n,{dtype:a}=i;if("complex64"===a){if("complex64"===o.dtype)return $F({inputs:{x:o},backend:r});let t=Xu(o.shape),n=e({inputs:{x:o},backend:r,attrs:{dtype:"float32"}}),i=UF({inputs:{real:n,imag:t},backend:r});return t.dispose(),r.disposeIntermediateTensorInfo(n),i}if("complex64"===o.dtype){let t=uz({inputs:{input:o},backend:r}),n=e({inputs:{x:t},backend:r,attrs:{dtype:a}});return r.disposeIntermediateTensorInfo(t),n}if(!Si.hasEncodingLoss(o.dtype,a)){let e=$F({inputs:{x:o},backend:r});return{dataId:e.dataId,shape:e.shape,dtype:a}}if(r.shouldExecuteOnCPU([o])){let e=r.texData.get(o.dataId).values,[t,n,i]=NM(e,o.shape,o.dtype,a);return r.makeTensorInfo(t,n,i)}if("int32"===a)return function(e,t){let n=new IF(e.shape,"return float(int(x));"),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(o,r);if("bool"===a){let e=r.makeTensorInfo([],"bool",Si.getTypedArrayFromDType("bool",1)),t=sz({inputs:{a:o,b:e},backend:r});return r.disposeIntermediateTensorInfo(e),t}throw new Error(`Error in Cast: failed to cast ${o.dtype} to ${a}`)}},dz="return ceil(x);",hz=YF({opSnippet:dz,packedOpSnippet:dz,cpuKernelImpl:RM}),fz={kernelName:yt,backendName:"webgl",kernelFunc:hz};var mz={kernelName:vt,backendName:"webgl",kernelFunc:function(e){let t,{inputs:n,backend:r,attrs:i}=e,{x:o}=n,{clipValueMin:a,clipValueMax:s}=i;t=qe().getBool("WEBGL_PACK_CLIP")?new class{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}}(o.shape):new class{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode="\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}}(o.shape);let l=[[a],[s]];return r.runWebGLProgram(t,[o],o.dtype,l)}};function gz(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var yz={kernelName:xt,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{x:r}=t,i=n.texData.get(r.dataId),o=new class{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}(r.shape),a=[gz(r,i.complexTensorInfos.real),gz(r,i.complexTensorInfos.imag)];return n.runWebGLProgram(o,a,a[0].dtype)}};function vz(e,t,n){let r=e.indexOf(t);return e.map((e,t)=>t===r?`${e} - ${n}`:e).join()}function bz(e){let{inputs:t,backend:n}=e,{input:r}=t;return $F({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var xz={kernelName:pn,backendName:"webgl",kernelFunc:bz};function wz(e,t,n){let r=e[0].dtype;if("complex64"===r){let r=e.map(e=>uz({inputs:{input:e},backend:n})),i=e.map(e=>bz({inputs:{input:e},backend:n})),o=wz(r,t,n),a=wz(i,t,n),s=UF({inputs:{real:o,imag:a},backend:n});return r.forEach(e=>n.disposeIntermediateTensorInfo(e)),i.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),s}let i=n.shouldExecuteOnCPU(e);if("string"===r&&(i=!0),i){let i=e.map(e=>{let r=[-1,Si.sizeFromShape(e.shape.slice(t))];return lL({inputs:{x:e},backend:n,attrs:{shape:r}})}),o=i.map(e=>({vals:n.readSync(e.dataId),shape:e.shape})),a=Rf.computeOutShape(i.map(e=>e.shape),1),s=1===i[0].shape[0],l=AM(o,a,r,s),u=Rf.computeOutShape(e.map(e=>e.shape),t),c=n.makeTensorInfo(u,r,l);return i.forEach(e=>n.disposeIntermediateTensorInfo(e)),c}let o=e.filter(e=>Si.sizeFromShape(e.shape)>0),a=qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&o[0].shape.length>1;if(1===o.length){let t=a?new IF(e[0].shape,OF):new NF(e[0].shape,OF);return n.runWebGLProgram(t,e,r)}let s=qe().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(o.length>s){let e=[];for(let r=0;r<o.length;r+=s){let i=o.slice(r,r+s);e.push(wz(i,t,n))}let r=wz(e,t,n);for(let t of e)n.disposeIntermediateTensorInfo(t);return r}if(a){let e=new class{constructor(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Rf.computeOutShape(e,t);let n=this.outputShape,r=n.length,i=GV(r),o=CF("coords",r),a=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((e,t)=>"T"+t);let s=new Array(e.length-1);s[0]=e[0][t];for(let n=1;n<s.length;n++)s[n]=s[n-1]+e[n][t];let l=a[t],u=a.slice(-2),c=a.join(),p=`if (${l} < ${s[0]}) {\n        return getChannel(\n            getT0(${c}), vec2(${u.join()}));\n        }`;for(let e=1;e<s.length;e++){let t=s[e-1];p+=`\n        if (${l} < ${s[e]}  && ${l} >= ${s[e-1]}) {\n          return getChannel(\n            getT${e}(${vz(a,l,t)}),\n            vec2(${vz(u,l,t)}));\n        }`}let d=s.length,h=s[s.length-1];p+=`\n        return getChannel(\n          getT${d}(${vz(a,l,h)}),\n          vec2(${vz(u,l,h)}));`,this.userCode=`\n      float getValue(${a.map(e=>"int "+e)}) {\n        ${p}\n      }\n\n      void main() {\n        ${i} coords = getOutputCoords();\n        vec4 result = vec4(getValue(${o}), 0., 0., 0.);\n\n        ${o[r-1]} = ${o[r-1]} + 1;\n        if (${o[r-1]} < ${n[r-1]}) {\n          result.g = getValue(${o});\n        }\n\n        ${o[r-2]} = ${o[r-2]} + 1;\n        if (${o[r-2]} < ${n[r-2]}) {\n          result.a = getValue(${o});\n        }\n\n        ${o[r-1]} = ${o[r-1]} - 1;\n        if (${o[r-2]} < ${n[r-2]} &&\n            ${o[r-1]} < ${n[r-1]}) {\n          result.b = getValue(${o});\n        }\n        setOutput(result);\n      }\n    `}}(o.map(e=>e.shape),t);return n.runWebGLProgram(e,o,r)}let{tensors2D:l,outShape:u}=function(e,t,n){let r=Rf.computeOutShape(e.map(e=>e.shape),t);return{tensors2D:e.map(e=>lL({inputs:{x:e},attrs:{shape:[-1,Si.sizeFromShape(e.shape.slice(t))]},backend:n})),outShape:r}}(o,t,n),c=new class{constructor(e){this.outputShape=[],this.outputShape=Rf.computeOutShape(e,1),this.variableNames=e.map((e,t)=>"T"+t);let t=new Array(e.length-1);t[0]=e[0][1];for(let n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];let n=[`if (yC < ${t[0]}) setOutput(getT0(yR, yC));`];for(let e=1;e<t.length;e++){let r=t[e-1];n.push(`else if (yC < ${t[e]}) setOutput(getT${e}(yR, yC-${r}));`)}let r=t.length,i=t[t.length-1];n.push(`else setOutput(getT${r}(yR, yC-${i}));`),this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        ${n.join("\n        ")}\n      }\n    `}}(l.map(e=>e.shape)),p=n.runWebGLProgram(c,l,r);l.forEach(e=>n.disposeIntermediateTensorInfo(e));let d=lL({inputs:{x:p},attrs:{shape:u},backend:n});return n.disposeIntermediateTensorInfo(p),d}function _z(e){let{inputs:t,backend:n,attrs:r}=e,{axis:i}=r,o=Si.parseAxisParam(i,t[0].shape)[0],a=t.map(e=>e.shape);Rf.assertParamsConsistent(a,o);let s=Rf.computeOutShape(t.map(e=>e.shape),o);if(0===Si.sizeFromShape(s))return n.makeTensorInfo(s,t[0].dtype,[]);let l=t.filter(e=>Si.sizeFromShape(e.shape)>0);return 1===l.length?$F({inputs:{x:l[0]},backend:n}):wz(l,o,n)}var Cz={kernelName:wt,backendName:"webgl",kernelFunc:_z},Sz=class{constructor(e,t=!1,n=null,r=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;let o=e.padInfo.top,a=e.padInfo.left,s=e.strideHeight,l=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,p=e.filterHeight,d=e.filterWidth,h=4*Math.floor(e.inChannels/4),f=e.inChannels%4,m="channelsLast"===e.dataFormat,g=m?1:2,y=m?2:3,v=m?3:1,b="",x="";n&&(b=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:i?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,x="result = activation(result);");let w=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${b}\n\n      const ivec2 strides = ivec2(${s}, ${l});\n      const ivec2 pads = ivec2(${o}, ${a});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[${v}];\n\n        ivec2 xRCCorner =\n            ivec2(coords[${g}], coords[${y}]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${p}; wR++) {\n          int xR = xRCorner + wR * ${u};\n\n          if (xR < 0 || xR >= ${e.inHeight}) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${d}; wC++) {\n            int xC = xCCorner + wC * ${c};\n\n            if (xC < 0 || xC >= ${e.inWidth}) {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < ${h}; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if (${m}) {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if (${1===f}) {\n\n              if (${m}) {\n                dotProd +=\n                    getX(batch, xR, xC, ${h}) *\n                    getW(wR, wC, ${h}, d2);\n              } else {\n                dotProd +=\n                    getX(batch, ${h}, xR, xC) *\n                    getW(wR, wC, ${h}, d2);\n              }\n\n            } else if (${2===f}) {\n              vec2 wValues = vec2(\n                getW(wR, wC, ${h}, d2),\n                getW(wR, wC, ${h} + 1, d2)\n              );\n\n              if (${m}) {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, ${h}),\n                  getX(batch, xR, xC, ${h} + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, ${h}, xR, xC),\n                  getX(batch, ${h} + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if (${3===f}) {\n              vec3 wValues = vec3(\n                getW(wR, wC, ${h}, d2),\n                getW(wR, wC, ${h} + 1, d2),\n                getW(wR, wC, ${h} + 2, d2)\n              );\n\n              if (${m}) {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, ${h}),\n                  getX(batch, xR, xC, ${h} + 1),\n                  getX(batch, xR, xC, ${h} + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, ${h}, xR, xC),\n                  getX(batch, ${h} + 1, xR, xC),\n                  getX(batch, ${h} + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        ${w}\n        ${x}\n        setOutput(result);\n      }\n    `}},kz=class{constructor(e,t=!1,n=null,r=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=eM(this.outputShape.length);let o=e.padInfo.left,a=e.strideWidth,s=e.dilationWidth,l=e.filterHeight,u=e.filterWidth,c=u,p="\n       int xR; int xC; int xCOffset;\n       vec4 wTexel; vec4 previous; vec4 final;";for(let e=0;e<u;e++)p+=`\n           vec4 xTexelC${2*e};\n           int xTexelC${2*e}Ready;\n           vec4 xTexelC${2*e+1};\n           int xTexelC${2*e+1}Ready;\n           vec4 xC${e};`;p+=`\n     for (int r = 0; r < ${l}; r++) {\n      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {\n       `;for(let e=0;e<u;e++)p+=`\n           xTexelC${2*e} = vec4(0.0);\n           xTexelC${2*e}Ready = 0;\n           xTexelC${2*e+1} = vec4(0.0);\n           xTexelC${2*e+1}Ready = 0;\n           xC${e} = vec4(0.0);`;p+="\n         xR = xRCorner + r * dilations[0];\n         if (xR >=0 && xR < inDims[0]) {\n       ";for(let t=0;t<(c+1)/2;t++){let n=2*t;if(p+=`\n           xC = xCCorner + ${n*s};\n           `,1===a){if(n<u&&(o%2==1?(p+=`\n                 xCOffset = xC + 1;\n                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${n}Ready == 0) {\n                   xTexelC${n} = getX(batch, xR, xCOffset, d1);\n\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${n}.zw = vec2(0.0);\n                   }\n                   xTexelC${n}Ready = 1;\n                 }\n               `,p+=1===s&&n>0?`\n                 xC${n} = vec4(xTexelC${n-2}.zw, xTexelC${n}.xy);\n                 `:`\n                   xCOffset = xC + 1 - 2;\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       previous.zw = vec2(0.0);\n                     }\n\n                     xC${n} = vec4(previous.zw, xTexelC${n}.xy);\n                   } else {\n                     xC${n} = vec4(0.0, 0.0, xTexelC${n}.xy);\n                   }\n                   `):p+=`\n                 if (xC >= 0 && xC < inDims[1] && xTexelC${n}Ready == 0) {\n                   xTexelC${n} = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC${n}.zw = vec2(0.0);\n                   }\n                   xTexelC${n}Ready = 1;\n                 }\n\n                 xC${n} = xTexelC${n};\n                 `,n+1<u)){let e=o%2==0?Si.nearestLargerEven(s):s;s%2==0&&o%2==1||s%2!=0&&o%2!=1?(p+=`\n                   xCOffset = xC + imod(pads[1], 2) + ${e};\n\n                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${n+1}Ready == 0) {\n                     xTexelC${n+1} = getX(batch, xR, xCOffset, d1);\n\n                     // Need to manually clear unused channels in case\n                     // we're reading from recycled texture.\n                     if (xCOffset + 1 >= inDims[1]) {\n                       xTexelC${n+1}.zw = vec2(0.0);\n                     }\n                     xTexelC${n+1}Ready = 1;\n                   }\n                   `,p+=s>1?`\n                     xCOffset -= 2;\n                     if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                      previous = getX(batch, xR, xCOffset, d1);\n                      xC${n+1} = vec4(previous.zw, xTexelC${n+1}.xy);\n                     } else {\n                      xC${n+1} = vec4(0.0, 0.0, xTexelC${n+1}.xy);\n                     }\n                     `:`\n                     xC${n+1} = vec4(xTexelC${n}.zw, xTexelC${n+1}.xy);\n                     `):p+=1===e?`\n                     xC${n+1} = xTexelC${n};\n                     `:`\n                     xCOffset = xC + ${e};\n\n                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${n+1}Ready == 0) {\n                       xTexelC${n+1} = getX(batch, xR, xCOffset, d1);\n                       if (xCOffset + 1 >= inDims[1]) {\n                         xTexelC${n+1}.zw = vec2(0.0);\n                       }\n                       xTexelC${n+1}Ready = 1;\n                     }\n\n                     xC${n+1} = xTexelC${n+1};\n                     `}}else n<u&&(o%2==1?(p+=`\n                 xCOffset = xC + 1 - strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${n}Ready == 0) {\n                   xTexelC${n} = getX(batch, xR, xCOffset, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${n}.zw = vec2(0.0);\n                   }\n                   xTexelC${n}Ready = 1;\n                 }\n\n                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${n+1}Ready == 0) {\n                   xTexelC${n+1} = getX(batch, xR, xC + 1, d1);\n                   // Need to manually clear unused channels in case\n                   // we're reading from recycled texture.\n                   if (xC + 2 >= inDims[1]) {\n                     xTexelC${n+1}.zw = vec2(0.0);\n                   }\n                   xTexelC${n+1}Ready = 1;\n                 }\n\n                 xC${n} = vec4(xTexelC${n}.zw, xTexelC${n+1}.zw);\n               `,n+1<u&&(p+=`\n                   final = vec4(0.0);\n                   xCOffset = xC + 1 + strides[1];\n                   if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                     final = getX(batch, xR, xCOffset, d1);\n                   }\n                   xC${n+1} = vec4(xTexelC${n+1}.xy, final.xy);\n                 `)):(p+=`\n                 if(xC >= 0 && xC < inDims[1] && xTexelC${n}Ready == 0) {\n                   xTexelC${n} = getX(batch, xR, xC, d1);\n                   if (xC + 1 >= inDims[1]) {\n                     xTexelC${n}.zw = vec2(0.0);\n                   }\n                   xTexelC${n}Ready = 1;\n                 }\n\n                 xCOffset = xC + strides[1];\n                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${n+1}Ready == 0) {\n                   xTexelC${n+1} = getX(batch, xR, xCOffset, d1);\n                   if (xCOffset + 1 >= inDims[1]) {\n                     xTexelC${n+1}.zw = vec2(0.);\n                   }\n                   xTexelC${n+1}Ready = 1;\n                 }\n\n                 xC${n} = vec4(\n                   xTexelC${n}.xy, xTexelC${n+1}.xy);\n               `,n+1<u&&(p+=`\n                   xC${n+1} = vec4(xTexelC${n}.zw, xTexelC${n+1}.zw);\n                 `)));n<u&&(p+=`\n             wTexel = getW(r, ${n}, d1, d2);\n             dotProd += xC${n}.xxzz * vec4(wTexel.xy, wTexel.xy);\n             if(d1 + 1 < ${e.inChannels}) {\n               dotProd += xC${n}.yyww * vec4(wTexel.zw, wTexel.zw);\n             }\n           `,n+1<u&&(p+=`\n               wTexel = getW(r, ${n+1}, d1, d2);\n               dotProd += xC${n+1}.xxzz * vec4(wTexel.xy, wTexel.xy);\n               if(d1 + 1 < ${e.inChannels}) {\n                 dotProd += xC${n+1}.yyww * vec4(wTexel.zw, wTexel.zw);\n               }\n             `))}p+="\n     }\n   ",p+="\n     }\n   ",p+="\n     }\n   ";let d="",h="";n&&(d=r?`vec4 activation(vec4 a) {\n           vec4 b = getPreluActivationWeightsAtOutCoords();\n           ${n}\n         }`:i?`vec4 activation(vec4 a) {\n           vec4 b = getLeakyreluAlphaAtOutCoords();\n           ${n}\n         }`:`vec4 activation(vec4 x) {\n           ${n}\n         }`,h="result = activation(result);");let f=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n       ${d}\n\n       void main() {\n         ivec4 coords = getOutputCoords();\n         int batch = coords.x;\n         ivec2 xRCCorner = coords.yz * strides - pads;\n         int d2 = coords.w;\n         int xRCorner = xRCCorner.x;\n         int xCCorner = xRCCorner.y;\n\n         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n         vec4 dotProd = vec4(0.000000000000001);\n\n         ${p}\n\n         vec4 result = dotProd - vec4(0.000000000000001);\n         ${f}\n         ${h}\n         setOutput(result);\n       }\n     `}};function Ez(e,t){let n=e.length;return n>=3?t?[...e.slice(0,-3),e[n-3]*e[n-2],e[n-1]]:[...e.slice(0,-3),e[n-3],e[n-2]*e[n-1]]:!t&&1===n&&e[0]>1?[e[0],1]:null}function Tz({x:e,filter:t,convInfo:n,backend:r,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:s=null}){let l,u=e.shape,c=r.texData.get(e.dataId),p=n.inChannels,d=u[0]*u[1]*u[2],h=n.outChannels,f="channelsLast"===n.dataFormat,m=[];if(null!=o){let e=Ez(o.shape,f);null!=e&&(o=lL({inputs:{x:o},backend:r,attrs:{shape:e}}),m.push(o))}if(null!=i){let e=Ez(i.shape,f);null!=e&&(i=lL({inputs:{x:i},backend:r,attrs:{shape:e}}),m.push(i))}if((1!==d&&1!==h||!(p>1e3))&&c.isPacked&&f&&null!=c.texture&&u[2]%2!=0&&Si.arraysEqual(c.shape.slice(-3),u.slice(-3))){let p=u[0]*u[1]*(u[2]+1),d={dataId:e.dataId,shape:[1,p,n.inChannels],dtype:e.dtype},h=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,Si.assert(yV(c.shape,d.shape),()=>`packed reshape ${c.shape} to ${d.shape} isn't free`);let f=lL({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});m.push(f);let g=vL({a:d,b:f,backend:r,transposeA:!1,transposeB:!1,bias:i,activation:s,preluActivationWeights:o,leakyreluAlpha:a}),y=r.texData.get(g.dataId);Si.assert(y.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=h,y.shape=n.outShape,l=$F({inputs:{x:g},backend:r}),l.shape=n.outShape,m.push(g)}else{let u=n.outHeight*n.outWidth,c=lL({inputs:{x:e},backend:r,attrs:{shape:f?[n.batchSize,u,n.inChannels]:[n.batchSize,n.inChannels,u]}}),p=lL({inputs:{x:t},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),d=vL({a:f?c:p,b:f?p:c,transposeA:!f,transposeB:!1,backend:r,bias:i,activation:s,preluActivationWeights:o,leakyreluAlpha:a});l=lL({inputs:{x:d},backend:r,attrs:{shape:n.outShape}}),m.push(c),m.push(p),m.push(d)}for(let e of m)r.disposeIntermediateTensorInfo(e);return l}function Iz({x:e,filter:t,convInfo:n,backend:r,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:s=null}){let{filterWidth:l,filterHeight:u,inChannels:c,outWidth:p,outHeight:d,dataFormat:h}=n,f="channelsLast"===h,m=l*u*c,g=d*p,y=[n.batchSize,m,g],v=[];if(null!=o){let e=Ez(o.shape,f);null!=e&&(o=lL({inputs:{x:o},backend:r,attrs:{shape:e}}),v.push(o))}if(null!=i){let e=Ez(i.shape,f);null!=e&&(i=lL({inputs:{x:i},backend:r,attrs:{shape:e}}),v.push(i))}let b=lL({inputs:{x:t},backend:r,attrs:{shape:[1,m,Si.sizeFromShape(t.shape)/m]}});v.push(b);let x=new class{constructor(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=eM(this.outputShape.length);let{dataFormat:n}=t,r=NV(),i="channelsLast"===n,o=i?1:2,a=i?2:3,s=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`,l="";for(let e=0;e<=1;e++)for(let t=0;t<=1;t++)l+=`\n          blockIndex = rc.z + ${t};\n          pos = rc.y + ${e};\n\n          ${s}\n            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];\n            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);\n\n            if(d0 < inputShape[${o}] && d0 >= 0) {\n              // Use custom imod instead mod. On Intel GPU, mod may generate\n              // unexpected value.\n              // https://github.com/tensorflow/tfjs/issues/5447\n              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];\n              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /\n                  inChannels);\n\n              if(d1 < inputShape[${a}] && d1 >= 0) {\n\n                ch = imod(pos, inChannels);\n\n                if (${i}) {\n                  innerDims = vec2(d1, ch);\n                  result[${2*e+t}] = getChannel(\n                    getA(rc.x, d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result[${2*e+t}] = getChannel(\n                    getA(rc.x, ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        `;this.userCode=`\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        ${l}\n\n        ${r.output} = result;\n      }\n    `}}(y,n),w=[e.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],_=r.runWebGLProgram(x,[e],"float32",w),C=lL({inputs:{x:_},backend:r,attrs:{shape:y}});v.push(_),v.push(C);let S=null!=i,k=null!=o,E="leakyrelu"===s,T=s?eL(s,!0):null,I=new tL(f?C.shape:b.shape,f?b.shape:C.shape,f?[n.batchSize,g,n.outChannels]:[n.batchSize,n.outChannels,g],!0,!1,S,T,k,E),P=f?[C,b]:[b,C];if(i&&P.push(i),k&&P.push(o),E){let e=r.makeTensorInfo([],"float32",Si.createScalarValue(a,"float32"));P.push(e),v.push(e)}let O=r.runWebGLProgram(I,P,"float32"),N=lL({inputs:{x:O},backend:r,attrs:{shape:n.outShape}});v.push(O);for(let e of v)r.disposeIntermediateTensorInfo(e);return N}var Pz={kernelName:_t,backendName:"webgl",kernelFunc:function(e){let t,{inputs:n,backend:r,attrs:i}=e,{x:o,filter:a}=n,{strides:s,pad:l,dataFormat:u,dilations:c,dimRoundingMode:p}=i,d=Rf.convertConv2DDataFormat(u),h=Rf.computeConv2DInfo(o.shape,a.shape,s,c,l,p,!1,d);if(1!==h.filterHeight||1!==h.filterWidth||1!==h.dilationHeight||1!==h.dilationWidth||1!==h.strideHeight||1!==h.strideWidth||"SAME"!==h.padInfo.type&&"VALID"!==h.padInfo.type)if(h.strideWidth<=2&&"channelsLast"===d&&qe().getBool("WEBGL_EXP_CONV")){let e=new kz(h),n=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];t=r.runWebGLProgram(e,[o,a],"float32",n)}else if(qe().getBool("WEBGL_CONV_IM2COL"))t=Iz({x:o,filter:a,convInfo:h,backend:r});else{let e=new Sz(h);t=r.runWebGLProgram(e,[o,a],"float32")}else t=Tz({x:o,filter:a,convInfo:h,backend:r});let f=lL({inputs:{x:t},backend:r,attrs:{shape:h.outShape}});return r.disposeIntermediateTensorInfo(t),f}};var Oz={kernelName:Ct,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:a,pad:s,dataFormat:l,dimRoundingMode:u,filterShape:c}=r,p=Rf.convertConv2DDataFormat(l),d=Rf.computeConv2DInfo(i.shape,c,a,1,s,u,!1,p),h=new class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;let t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,o="channelsLast"===e.dataFormat;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${r};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${i};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              ${o?"float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);":"float dyValue = getDy(b, d2, yR, yC);\n              float xValue = getX(b, d1, xR, xC);\n              dotProd += (xValue * dyValue);"}\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(d);return n.runWebGLProgram(h,[i,o],"float32")}};var Nz={kernelName:St,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{inputShape:a,strides:s,pad:l,dataFormat:u,dimRoundingMode:c}=r,p=Rf.convertConv2DDataFormat(u),d=Rf.computeConv2DInfo(a,o.shape,s,1,l,c,!1,p);if(qe().getBool("WEBGL_PACK")&&"channelsLast"===p){let e=[[d.strideHeight,d.strideWidth]],t=new class{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=eM(this.outputShape.length);let t=e.filterHeight,n=e.filterWidth,r=t-1-e.padInfo.top,i=n-1-e.padInfo.left;this.userCode=`\n      const ivec2 pads = ivec2(${r}, ${i});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        vec4 result = vec4(0.);\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / strides[0];\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            int wCPerm = ${n} - 1 - wC;\n\n            float dyC = float(dyCCorner + wC) / strides[1];\n            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)\n              && (fract(dyC) == 0.0);\n            int idyC = int(dyC);\n\n            float dyC2 = float(dyCCorner + wC + 1) / strides[1];\n            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)\n              && (fract(dyC2) == 0.0);\n            int idyC2 = int(dyC2);\n\n            if (idyCVal && idyCVal2) {\n              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?\n                  dySample : getDy(batch, idyR, idyC2, d2);\n\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n\n                dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample2.xy : dySample2.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal) {\n              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC, d2);\n                vec2 dyValue = mod(float(idyC), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.xy += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            } else if (idyCVal2) {\n              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {\n                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);\n                vec4 dySample = getDy(batch, idyR, idyC2, d2);\n                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?\n                  dySample.xy : dySample.zw;\n                result.zw += vec2(dot(dyValue, wValue.xy),\n                  dot(dyValue, wValue.zw));\n              }\n            }\n          }\n        }\n        setOutput(result);\n      }\n    `}}(d);return n.runWebGLProgram(t,[i,o],"float32",e)}{let e=new class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,o="channelsLast"===e.dataFormat,a=t-1-e.padInfo.top,s=n-1-e.padInfo.left,l=o?1:2,u=o?2:3,c=o?3:1;this.userCode=`\n      const ivec2 pads = ivec2(${a}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[${c}];\n\n        ivec2 dyCorner = ivec2(coords[${l}], coords[${u}]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${i}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n\n              if (${o}) {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(d);return n.runWebGLProgram(e,[i,o],"float32")}}};var Rz={kernelName:kt,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:a,pad:s,dilations:l}=r,u=Rf.computeConv3DInfo(i.shape,o.shape,a,l,s),c=new class{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;let t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.filterDepth,p=e.filterHeight,d=e.filterWidth,h=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode=`\n      const ivec3 strides = ivec3(${i}, ${o}, ${a});\n      const ivec3 pads = ivec3(${t}, ${n}, ${r});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${c}; wF++) {\n          int xF = xFCorner + wF * ${s};\n\n          if (xF < 0 || xF >= ${e.inDepth}) {\n            continue;\n          }\n\n          for (int wR = 0; wR < ${p}; wR++) {\n            int xR = xRCorner + wR * ${l};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int wC = 0; wC < ${d}; wC++) {\n              int xC = xCCorner + wC * ${u};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < ${h}; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if (${1===f}) {\n                dotProd +=\n                  getX(batch, xF, xR, xC, ${h}) *\n                  getW(wF, wR, wC, ${h}, d2);\n              } else if (${2===f}) {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, ${h}),\n                  getX(batch, xF, xR, xC, ${h} + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, ${h}, d2),\n                  getW(wF, wR, wC, ${h} + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if (${3===f}) {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, ${h}),\n                  getX(batch, xF, xR, xC, ${h} + 1),\n                  getX(batch, xF, xR, xC, ${h} + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, ${h}, d2),\n                  getW(wF, wR, wC, ${h} + 1, d2),\n                  getW(wF, wR, wC, ${h} + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(u);return n.runWebGLProgram(c,[i,o],"float32")}};var Az={kernelName:Et,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:a,pad:s,filterShape:l}=r,u=Rf.computeConv3DInfo(i.shape,l,a,1,s),c=new class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;let t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,i=e.padInfo.front,o=e.padInfo.top,a=e.padInfo.left;this.userCode=`\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yF = 0; yF < ${e.outDepth}; yF++) {\n            int xF = wF + yF * ${t} - ${i};\n\n            if (xF < 0 || xF >= ${e.inDepth}) {\n              continue;\n            }\n\n            for (int yR = 0; yR < ${e.outHeight}; yR++) {\n              int xR = wR + yR * ${n} - ${o};\n\n              if (xR < 0 || xR >= ${e.inHeight}) {\n                continue;\n              }\n\n              for (int yC = 0; yC < ${e.outWidth}; yC++) {\n                int xC = wC + yC * ${r} - ${a};\n\n                if (xC < 0 || xC >= ${e.inWidth}) {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(u);return n.runWebGLProgram(c,[i,o],"float32")}};var Dz,Vz={kernelName:Tt,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{pad:a,strides:s,inputShape:l}=r,u=Rf.computeConv3DInfo(l,o.shape,s,1,a),c=new class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,s=t-1-e.padInfo.front,l=n-1-e.padInfo.top,u=r-1-e.padInfo.left;this.userCode=`\n      const ivec3 pads = ivec3(${s}, ${l}, ${u});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < ${t}; wF++) {\n          float dyF = float(dyFCorner + wF) / ${i}.0;\n\n          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = ${t} - 1 - wF;\n\n          for (int wR = 0; wR < ${n}; wR++) {\n            float dyR = float(dyRCorner + wR) / ${o}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = ${n} - 1 - wR;\n\n            for (int wC = 0; wC < ${r}; wC++) {\n              float dyC = float(dyCCorner + wC) / ${a}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = ${r} - 1 - wC;\n\n              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(u);return n.runWebGLProgram(c,[i,o],"float32")}},Mz=YF({opSnippet:"if (isnan(x)) return x;\n  return cos(x);\n",packedOpSnippet:`\n  vec4 result = cos(x);\n  bvec4 isNaN = isnan(x);\n  ${jF}\n  return result;\n`}),Fz={kernelName:It,backendName:"webgl",kernelFunc:Mz},Lz=YF({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),zz={kernelName:Pt,backendName:"webgl",kernelFunc:Lz},jz={kernelName:Rt,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{image:i,boxes:o,boxInd:a}=t,{cropSize:s,method:l,extrapolationValue:u}=r,c=new class{constructor(e,t,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];let[o,a,s,l]=e,[u]=t,[c,p]=n;this.outputShape=[u,c,p,l];let d="bilinear"===r?1:0,[h,f]=[a-1+".0",s-1+".0"],[m,g,y]=c>1?[""+(a-1)/(c-1),"(y2-y1) * height_ratio",`y1*${h} + float(y)*(height_scale)`]:["0.0","0.0","0.5 * (y1+y2) * "+h],[v,b,x]=p>1?[""+(s-1)/(p-1),"(x2-x1) * width_ratio",`x1*${f} + float(x)*(width_scale)`]:["0.0","0.0","0.5 * (x1+x2) * "+f];this.userCode=`\n      const float height_ratio = float(${m});\n      const float width_ratio = float(${v});\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= ${o}) {\n          return;\n        }\n\n        float height_scale = ${g};\n        float width_scale = ${b};\n\n        float in_y = ${y};\n        if( in_y < 0.0 || in_y > ${h} ) {\n          setOutput(float(${i}));\n          return;\n        }\n        float in_x = ${x};\n        if( in_x < 0.0 || in_x > ${f} ) {\n          setOutput(float(${i}));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if(${d} == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    `}}(i.shape,o.shape,s,l,u);return n.runWebGLProgram(c,[i,o,a],"float32")}};!function(e){e.Prod="*",e.Sum="+"}(Dz||(Dz={}));var qz=class{constructor(e,t,n,r){this.op=e,this.outputShape=t,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];let i=this.outputShape.length,o=this.op===Dz.Prod?"1.0":"0.0",a=n?o:`getX(${$z(i,"coords",this.op)})`,s=this.outputShape[this.outputShape.length-1],l="",u="";n?(l=r?"end != "+(s-1):"end != 0",u=r?"end + 1":"end - 1"):(l=r?"end + pow2 < "+s:"end >= pow2",u=r?"end + pow2":"end - pow2"),this.userCode=`\n      void main() {\n        ${GV(i)} coords = getOutputCoords();\n        int end = ${Bz(i,"coords",this.op)};\n        float val = ${a};\n        int pow2 = int(pow(2.0, index));\n        if (${l}) {\n          int idx = ${u};\n          ${Bz(i,"coords",this.op)} = idx;\n          val ${this.op}= getX(${$z(i,"coords",this.op)});\n        }\n        setOutput(val);\n      }\n    `}};function $z(e,t,n){if(1===e)return""+t;if(2===e)return`${t}.x, ${t}.y`;if(3===e)return`${t}.x, ${t}.y, ${t}.z`;if(4===e)return`${t}.x, ${t}.y, ${t}.z, ${t}.w`;throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function Bz(e,t,n){if(1===e)return""+t;if(2===e)return t+".y";if(3===e)return t+".z";if(4===e)return t+".w";throw new Error(`Cumulative ${n} for rank ${e} is not yet supported`)}function Uz(e,t,n,r,i,o){let a=t.shape.length,s=Rf.getAxesPermutation([r],a),l=t;null!=s&&(l=gL({inputs:{x:t},backend:n,attrs:{perm:s}}));let u=Rf.getInnerMostAxes(1,a)[0];if(u!==a-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${t.shape.length-1} but got axis=${r}`);let c=l.shape[u],p=$F({inputs:{x:l},backend:n});for(let t=0;t<=Math.ceil(Math.log2(c))-1;t++){let r=new qz(e,l.shape,!1,o),i=[[t]],a=p;p=n.runWebGLProgram(r,[p],p.dtype,i),n.disposeIntermediateTensorInfo(a)}if(i){let t=new qz(e,l.shape,i,o),r=p;p=n.runWebGLProgram(t,[p],p.dtype),n.disposeIntermediateTensorInfo(r)}if(null!=s){let e=gL({inputs:{x:p},backend:n,attrs:{perm:Rf.getUndoAxesPermutation(s)}});return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(l),e}return p}var Wz={kernelName:Ot,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,exclusive:a,reverse:s}=r;return Uz(Dz.Prod,i,n,o,a,s)}};var Hz={kernelName:Nt,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,exclusive:a,reverse:s}=r;return Uz(Dz.Sum,i,n,o,a,s)}};var Qz={kernelName:At,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,weights:o}=t,{size:a,binaryOutput:s}=r;if(1===i.shape.length){let e=n.readSync(i.dataId),t=n.readSync(o.dataId),r=IM(e,t,o.dtype,o.shape,a);return n.makeTensorInfo([a],o.dtype,r)}if(2===i.shape.length){let e=n.bufferSync(i),t=n.bufferSync(o),r=PM(e,t,a,s);return n.makeTensorInfo(r.shape,o.dtype,r.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${i.shape.length}.`)}};var Gz={kernelName:Dt,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockSize:o,dataFormat:a}=r,s=i.shape[0],l=("NHWC"===a?i.shape[1]:i.shape[2])*o,u=("NHWC"===a?i.shape[2]:i.shape[3])*o,c=("NHWC"===a?i.shape[3]:i.shape[1])/(o*o),p="NHWC"===a?[s,l,u,c]:[s,c,l,u],d=new class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode=`\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = ${this.getHeightCoordString()};\n      int w = ${this.getWidthCoordString()};\n      int d = ${this.getDepthCoordString()};\n\n      int in_h = h / ${t};\n      int offset_h = imod(h, ${t});\n      int in_w = w / ${t};\n      int offset_w = imod(w, ${t});\n      int offset_d = (offset_h * ${t} + offset_w) *\n        ${this.getOutputDepthSize()};\n      int in_d = d + offset_d;\n\n      float result = ${this.getInputSamplingString()};\n      setOutput(result);\n    }\n  `}getHeightCoordString(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"}getWidthCoordString(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"}getDepthCoordString(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"}getOutputDepthSize(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}(p,o,a);return n.runWebGLProgram(d,[i],i.dtype)}},Kz=class{constructor(e,t=!1,n=null,r=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=eM(this.outputShape.length);let o=e.filterHeight,a=e.filterWidth,s=e.outChannels/e.inChannels,l="",u="";n&&(l=r?`float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:i?`float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`\n          float activation(float x) {\n            ${n}\n          }\n        `,u="result = activation(result);");let c=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${l}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${s};\n        int q = d2 - d1 * ${s};\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < ${o}; wR++) {\n          int xR = xRCorner + wR * dilations[0];\n\n          if (xR < 0 || xR >= inDims[0]) {\n            continue;\n          }\n\n          for (int wC = 0; wC < ${a}; wC++) {\n            int xC = xCCorner + wC * dilations[1];\n\n            if (xC < 0 || xC >= inDims[1]) {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        ${c}\n        ${u}\n        setOutput(result);\n      }\n    `}},Jz=class{constructor(e,t=!1,n=null,r=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=eM(this.outputShape.length);let o=e.outChannels/e.inChannels,a=e.padInfo.left,s=e.strideWidth,l=e.dilationWidth,u=e.filterHeight,c=e.filterWidth,p=c,d="\n      int xR; int xC; int xCOffset;\n      vec4 wTexel; vec4 previous; vec4 final;";for(let e=0;e<c;e++)d+=`\n          vec4 xTexelC${2*e};\n          int xTexelC${2*e}Ready;\n          vec4 xTexelC${2*e+1};\n          int xTexelC${2*e+1}Ready;\n          vec4 xC${e};`;d+=`\n    for (int r = 0; r < ${u}; r++) {\n      `;for(let e=0;e<c;e++)d+=`\n          xTexelC${2*e} = vec4(0.0);\n          xTexelC${2*e}Ready = 0;\n          xTexelC${2*e+1} = vec4(0.0);\n          xTexelC${2*e+1}Ready = 0;\n          xC${e} = vec4(0.0);`;d+="\n        xR = xRCorner + r * dilations[0];\n        if (xR >=0 && xR < inDims[0]) {\n      ";for(let e=0;e<(p+1)/2;e++){let t=2*e;if(d+=`\n          xC = xCCorner + ${t*l};\n          `,1===s){if(t<c&&(a%2==1?(d+=`\n                xCOffset = xC + 1;\n                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n              `,d+=1===l&&t>0?`\n                xC${t} = vec4(xTexelC${t-2}.zw, xTexelC${t}.xy);\n                `:`\n                  xCOffset = xC + 1 - 2;\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                    previous = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      previous.zw = vec2(0.0);\n                    }\n\n                    xC${t} = vec4(previous.zw, xTexelC${t}.xy);\n                  } else {\n                    xC${t} = vec4(0.0, 0.0, xTexelC${t}.xy);\n                  }\n                  `):d+=`\n                if (xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n\n                xC${t} = xTexelC${t};\n                `,t+1<c)){let e=a%2==0?Si.nearestLargerEven(l):l;l%2==0&&a%2==1||l%2!=0&&a%2!=1?(d+=`\n                  xCOffset = xC + imod(pads[1], 2) + ${e};\n\n                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                    xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n\n                    // Need to manually clear unused channels in case\n                    // we're reading from recycled texture.\n                    if (xCOffset + 1 >= inDims[1]) {\n                      xTexelC${t+1}.zw = vec2(0.0);\n                    }\n                    xTexelC${t+1}Ready = 1;\n                  }\n                  `,d+=l>1?`\n                    xCOffset -= 2;\n                    if (xCOffset >= 0 && xCOffset < inDims[1]) {\n                     previous = getX(batch, xR, xCOffset, d1);\n                     xC${t+1} = vec4(previous.zw, xTexelC${t+1}.xy);\n                    } else {\n                     xC${t+1} = vec4(0.0, 0.0, xTexelC${t+1}.xy);\n                    }\n                    `:`\n                    xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.xy);\n                    `):d+=1===e?`\n                    xC${t+1} = xTexelC${t};\n                    `:`\n                    xCOffset = xC + ${e};\n\n                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                      xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n                      if (xCOffset + 1 >= inDims[1]) {\n                        xTexelC${t+1}.zw = vec2(0.0);\n                      }\n                      xTexelC${t+1}Ready = 1;\n                    }\n\n                    xC${t+1} = xTexelC${t+1};\n                    `}}else t<c&&(a%2==1?(d+=`\n                xCOffset = xC + 1 - strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xCOffset, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${t+1}Ready == 0) {\n                  xTexelC${t+1} = getX(batch, xR, xC + 1, d1);\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if (xC + 2 >= inDims[1]) {\n                    xTexelC${t+1}.zw = vec2(0.0);\n                  }\n                  xTexelC${t+1}Ready = 1;\n                }\n\n                xC${t} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);\n              `,t+1<c&&(d+=`\n                  final = vec4(0.0);\n                  xCOffset = xC + 1 + strides[1];\n                  if(xCOffset >= 0 && xCOffset < inDims[1]) {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xC${t+1} = vec4(xTexelC${t+1}.xy, final.xy);\n                `)):(d+=`\n                if(xC >= 0 && xC < inDims[1] && xTexelC${t}Ready == 0) {\n                  xTexelC${t} = getX(batch, xR, xC, d1);\n                  if (xC + 1 >= inDims[1]) {\n                    xTexelC${t}.zw = vec2(0.0);\n                  }\n                  xTexelC${t}Ready = 1;\n                }\n\n                xCOffset = xC + strides[1];\n                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${t+1}Ready == 0) {\n                  xTexelC${t+1} = getX(batch, xR, xCOffset, d1);\n                  if (xCOffset + 1 >= inDims[1]) {\n                    xTexelC${t+1}.zw = vec2(0.);\n                  }\n                  xTexelC${t+1}Ready = 1;\n                }\n\n                xC${t} = vec4(\n                  xTexelC${t}.xy, xTexelC${t+1}.xy);\n              `,t+1<c&&(d+=`\n                  xC${t+1} = vec4(xTexelC${t}.zw, xTexelC${t+1}.zw);\n                `)));t<c&&(d+=`\n            wTexel = getW(r, ${t}, d1, q);\n            dotProd += xC${t} * vec4(wTexel.xz, wTexel.xz);\n          `,t+1<c&&(d+=`\n              wTexel = getW(r, ${t+1}, d1, q);\n              dotProd += xC${t+1} * vec4(wTexel.xz, wTexel.xz);\n            `))}d+="\n    }\n  ",d+="\n      }\n    ";let h="",f="";n&&(h=r?`vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          ${n}\n        }`:i?`vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          ${n}\n        }`:`vec4 activation(vec4 x) {\n          ${n}\n        }`,f="result = activation(result);");let m=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`\n      ${h}\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / ${o};\n        int q = d2 - d1 * ${o};\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.\n        vec4 dotProd = vec4(0.000000000000001);\n\n        ${d}\n\n        vec4 result = dotProd - vec4(0.000000000000001);\n        ${m}\n        ${f}\n        setOutput(result);\n      }\n    `}};var Xz={kernelName:Vt,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:a,pad:s,dilations:l,dimRoundingMode:u}=r,c=l;null==c&&(c=[1,1]),Si.assert(Rf.eitherStridesOrDilationsAreOne(a,c),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${a} and dilations '${c}'`);let p,d=Rf.computeConv2DInfo(i.shape,o.shape,a,c,s,u,!0);p=qe().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels==1?new Jz(d):new Kz(d);let h=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(p,[i,o],"float32",h)}};var Yz={kernelName:Mt,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:a,dilations:s,pad:l,dimRoundingMode:u,filterShape:c}=r,p=Rf.computeConv2DInfo(i.shape,c,a,s,l,u,!0),d=new class{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;let t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * ${o} + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < ${e.batchSize}; b++) {\n          for (int yR = 0; yR < ${e.outHeight}; yR++) {\n            int xR = wR + yR * ${t} - ${r};\n\n            if (xR < 0 || xR >= ${e.inHeight}) {\n              continue;\n            }\n\n            for (int yC = 0; yC < ${e.outWidth}; yC++) {\n              int xC = wC + yC * ${n} - ${i};\n\n              if (xC < 0 || xC >= ${e.inWidth}) {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(p);return n.runWebGLProgram(d,[i,o],"float32")}};var Zz={kernelName:Ft,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{strides:a,dilations:s,pad:l,dimRoundingMode:u,inputShape:c}=r,p=Rf.computeConv2DInfo(c,o.shape,a,s,l,u,!0),d=new class{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;let t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,o=t-1-e.padInfo.top,a=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode=`\n      const ivec2 pads = ivec2(${o}, ${a});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < ${t}; wR++) {\n          float dyR = float(dyRCorner + wR) / ${r}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = ${t} - 1 - wR;\n\n          for (int wC = 0; wC < ${n}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${i}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = ${n} - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < ${s}; dm++) {\n              int d2 = d1 * ${s} + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(p);return n.runWebGLProgram(d,[i,o],"float32")}};var ej={kernelName:Lt,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{x:r}=t,i=[...r.shape,...r.shape],o=Si.sizeFromShape(r.shape),a=lL({inputs:{x:r},backend:n,attrs:{shape:[o]}}),s=new class{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}(o),l=n.runWebGLProgram(s,[a],a.dtype),u=lL({inputs:{x:l},backend:n,attrs:{shape:i}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),u}};var tj={kernelName:zt,backendName:"webgl",kernelFunc:function(e){let t,{inputs:n,backend:r,attrs:i}=e,{x:o,filter:a}=n,{strides:s,pad:l,dilations:u}=i,c=Rf.computeDilation2DInfo(o.shape,a.shape,s,l,"NHWC",u),p=new class{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;let{inHeight:t,inWidth:n,padInfo:r,strideHeight:i,strideWidth:o,filterHeight:a,filterWidth:s,dilationHeight:l,dilationWidth:u}=e,{top:c,left:p}=r;this.userCode=`\n      const ivec2 strides = ivec2(${i}, ${o});\n      const ivec2 pads = ivec2(${c}, ${p});\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < ${a}; h++) {\n          int hIn = hBeg + h * ${l};\n\n          if (hIn >= 0 && hIn < ${t}) {\n            for (int w = 0; w < ${s}; w++) {\n              int wIn = wBeg + w * ${u};\n\n              if (wIn >= 0 && wIn < ${n}) {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    `}}(c);t=r.runWebGLProgram(p,[o,a],"float32");let d=lL({inputs:{x:t},backend:r,attrs:{shape:c.outShape}});return r.disposeIntermediateTensorInfo(t),d}};var nj={kernelName:Ut,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{equation:i}=r,o=t,{allDims:a,summedDims:s,idDims:l}=Rf.decodeEinsumEquation(i,o.length);Rf.checkEinsumDimSizes(a.length,l,o);let{path:u,steps:c}=Rf.getEinsumComputePath(s,l),p=c.length,d=null,h=a.length,f=[];for(let e=0;e<p;++e){for(let t of c[e]){let e,{permutationIndices:r,expandDims:i}=Rf.getEinsumPermutation(h,l[t]);Rf.isIdentityPermutation(r)?e=o[t]:(e=gL({inputs:{x:o[t]},backend:n,attrs:{perm:r}}),f.push(e));let a=e.shape.slice();for(let e=0;e<i.length;++e)a.splice(i[e],0,1);Si.arraysEqual(e.shape,a)||(e=lL({inputs:{x:e},backend:n,attrs:{shape:a}}),f.push(e)),null===d?d=e:(d=aL({inputs:{a:e,b:d},backend:n}),f.push(d))}e<p-1&&(u[e]>=0&&(d=fL({inputs:{x:d},backend:n,attrs:{axis:u[e]-(a.length-h),keepDims:!1}}),f.push(d)),h--)}for(let e of f)e!==d&&n.disposeIntermediateTensorInfo(e);return d}},rj=YF({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),ij={kernelName:Wt,backendName:"webgl",kernelFunc:rj},oj={kernelName:Ht,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n}=e,{dy:r,y:i}=t,o=qe().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new qF("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,i.shape):new zF("return (b >= 0.0) ? a : a * (b + 1.0);",r.shape,i.shape);return n.runWebGLProgram(o,[r,i],r.dtype)}},aj=ZF({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool",cpuKernelImpl:DM}),sj={kernelName:Gt,backendName:"webgl",kernelFunc:aj},lj=YF({opSnippet:`\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = ${Rf.ERF_P};\n  float a1 = ${Rf.ERF_A1};\n  float a2 = ${Rf.ERF_A2};\n  float a3 = ${Rf.ERF_A3};\n  float a4 = ${Rf.ERF_A4};\n  float a5 = ${Rf.ERF_A5};\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n`}),uj={kernelName:Qt,backendName:"webgl",kernelFunc:lj},cj=YF({opSnippet:"if (isnan(x)) return x;\n  return exp(x);\n",packedOpSnippet:"\n  vec4 result = exp(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:VM,dtype:"float32"}),pj={kernelName:Kt,backendName:"webgl",kernelFunc:cj};function dj(e){let{inputs:t,attrs:n,backend:r}=e,{dim:i}=n,{input:o}=t,a=o.shape.length,s=o.shape.slice(),l=i;return i<0&&(Si.assert(-(a+1)<=i,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),l=a+i+1),s.splice(l,0,1),lL({inputs:{x:o},backend:r,attrs:{shape:s}})}var hj={kernelName:Jt,backendName:"webgl",kernelFunc:dj},fj="return exp(x) - 1.0;",mj=YF({opSnippet:fj,packedOpSnippet:fj,cpuKernelImpl:MM}),gj={kernelName:Xt,backendName:"webgl",kernelFunc:mj},yj=class{constructor(e,t,n){this.variableNames=["real","imag"];let r=t[1];this.outputShape=t;let i,o=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,a=n?r+".0":"1.0";if("real"===e)i="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);i="return real * expI + imag * expR;"}this.userCode=`\n      const float exponentMultiplier = ${o};\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        ${i}\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float(${r});\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < ${r}; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / ${a};\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    `}};function vj(e,t,n){let r=n.texData.get(e.dataId),i=Si.sizeFromShape(e.shape),o=e.shape[e.shape.length-1],a=lL({inputs:{x:e},backend:n,attrs:{shape:[i/o,o]}}),s=a.shape,l=new yj("real",s,t),u=new yj("imag",s,t),c=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:s},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:s}],p=n.runWebGLProgram(l,c,"float32"),d=n.runWebGLProgram(u,c,"float32"),h=UF({inputs:{real:p,imag:d},backend:n});n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(d);let f=lL({inputs:{x:h},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(h),f}var bj={kernelName:Yt,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{input:r}=t;return vj(r,!1,n)}};function xj(e){let{backend:t,attrs:n}=e,{shape:r,value:i}=n,{dtype:o}=n;if(o=o||Si.inferDtype(i),"string"===o){let e=Si.getArrayFromDType(o,Si.sizeFromShape(r));return e.fill(i),t.makeTensorInfo(r,o,e)}{let e=new class{constructor(e,t){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}}(r,i),n=[[i]];return t.runWebGLProgram(e,[],o,n)}}var wj,_j={kernelName:Zt,backendName:"webgl",kernelFunc:xj},Cj={kernelName:en,backendName:"webgl",kernelFunc:({inputs:e,backend:t})=>{let{image:n}=e,r=t,i=new class{constructor(e){this.variableNames=["Image"],this.outputShape=[];let t=e[2];this.outputShape=e,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = ${t} - x - 1;\n          float outputValue;\n          if(coordX >= 0 && coordX < ${t}) {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}(n.shape);return r.runWebGLProgram(i,[n],n.dtype)}},Sj="return floor(x);",kj=YF({opSnippet:Sj,packedOpSnippet:Sj,cpuKernelImpl:FM}),Ej={kernelName:tn,backendName:"webgl",kernelFunc:kj},Tj=ZF({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),Ij={kernelName:nn,backendName:"webgl",kernelFunc:Tj},Pj={kernelName:ai,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{pixels:i}=t,{numChannels:o}=r,a="undefined"!=typeof HTMLVideoElement&&i instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&i instanceof HTMLImageElement,[l,u]=a?[i.videoWidth,i.videoHeight]:[i.width,i.height],c=[u,l],p=[u,l,o];if(s||a){let e=qe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(null==wj||e!==Oj)&&(Oj=e,wj=document.createElement("canvas").getContext("2d",{willReadFrequently:Oj})),wj.canvas.width=l,wj.canvas.height=u,wj.drawImage(i,0,0,l,u),i=wj.canvas}let d=n.makeTensorInfo(c,"int32");n.texData.get(d.dataId).usage=SD.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),i);let h=qe().getBool("WEBGL_PACK")?new class{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;let t=NV(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2(${r}.0, ${n}.0);\n            vec4 values = ${t.texture2D}(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        ${t.output} = result;\n      }\n    `}}(p):new class{constructor(e){this.variableNames=["A"];let t=NV(),[n,r]=e;this.outputShape=e,this.userCode=`\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}.0, ${n}.0);\n\n        vec4 values = ${t.texture2D}(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    `}}(p),f=n.runWebGLProgram(h,[d],"int32");return n.disposeData(d.dataId),f}},Oj=qe().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");var Nj={kernelName:ui,backendName:"webgl",kernelFunc:function(e){let t,{inputs:n,backend:r,attrs:i}=e,{x:o,filter:a,bias:s,preluActivationWeights:l}=n,{strides:u,pad:c,dataFormat:p,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:m}=i,g=Rf.convertConv2DDataFormat(p),y=Rf.computeConv2DInfo(o.shape,a.shape,u,d,c,h,!1,g),v=[],b=null!=s,x=null!=l,w="leakyrelu"===f,_=()=>{let e=[o,a],t=(e,t)=>{if("NCHW"===t&&1===e.shape.length&&1!==e.shape[0]){let t=lL({inputs:{x:e},backend:r,attrs:{shape:[e.shape[0],1,1]}});return v.push(t),t}return e};if(b&&e.push(t(s,p)),x&&e.push(t(l,p)),w){let t=r.makeTensorInfo([],"float32",Si.createScalarValue(m,"float32"));e.push(t),v.push(t)}return e};if(1!==y.filterHeight||1!==y.filterWidth||1!==y.dilationHeight||1!==y.dilationWidth||1!==y.strideHeight||1!==y.strideWidth||"SAME"!==y.padInfo.type&&"VALID"!==y.padInfo.type)if(y.strideWidth<=2&&"channelsLast"===g&&qe().getBool("WEBGL_EXP_CONV")){let e=f?eL(f,!0):null,n=new kz(y,b,e,x,w),i=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],o=_();t=r.runWebGLProgram(n,o,"float32",i)}else if(qe().getBool("WEBGL_CONV_IM2COL"))t=Iz({x:o,filter:a,convInfo:y,backend:r,bias:s,activation:f,preluActivationWeights:l,leakyreluAlpha:m});else{let e=f?eL(f,!1):null,n=new Sz(y,b,e,x,w),i=_();t=r.runWebGLProgram(n,i,"float32")}else t=Tz({x:o,filter:a,convInfo:y,backend:r,bias:s,activation:f,preluActivationWeights:l,leakyreluAlpha:m});let C=lL({inputs:{x:t},backend:r,attrs:{shape:y.outShape}});return v.push(t),v.forEach(e=>r.disposeIntermediateTensorInfo(e)),C}};var Rj={kernelName:ci,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o,bias:a,preluActivationWeights:s}=t,{strides:l,pad:u,dilations:c,dimRoundingMode:p,activation:d,leakyreluAlpha:h}=r,f=[],m=c;null==m&&(m=[1,1]),Si.assert(Rf.eitherStridesOrDilationsAreOne(l,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`);let g,y=Rf.computeConv2DInfo(i.shape,o.shape,l,m,u,p,!0),v=qe().getBool("WEBGL_PACK_DEPTHWISECONV")&&y.strideWidth<=2&&y.outChannels/y.inChannels==1,b=d?eL(d,v):null,x=[i,o],w=null!=a,_=null!=s,C="leakyrelu"===d;if(w&&x.push(a),_&&x.push(s),C){let e=n.makeTensorInfo([],"float32",Si.createScalarValue(h,"float32"));x.push(e),f.push(e)}g=v?new Jz(y,w,b,_,C):new Kz(y,w,b,_,C);let S=[[y.padInfo.top,y.padInfo.left],[y.strideHeight,y.strideWidth],[y.dilationHeight,y.dilationWidth],[y.inHeight,y.inWidth]],k=n.runWebGLProgram(g,x,"float32",S);return f.forEach(e=>n.disposeIntermediateTensorInfo(e)),k}};var Aj={kernelName:an,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{params:r,indices:i}=t,o=i.shape,a=o[o.length-1],s=Si.sizeFromShape(r.shape),[l,u,c,p]=Rf.prepareAndValidate(r,i),d=lL({inputs:{x:i},backend:n,attrs:{shape:[u,a]}}),h=lL({inputs:{x:r},backend:n,attrs:{shape:[Si.sizeFromShape(r.shape)/c,c]}});if(n.shouldExecuteOnCPU([r,i])||"string"===r.dtype){let e=n.readSync(i.dataId),t=n.bufferSync(r),o=LM(e,t,r.dtype,u,a,c,p,r.shape,s);return n.makeTensorInfo(l,r.dtype,o.values)}let f=new class{constructor(e,t,n,r){this.sliceDim=e,this.strides=t,this.paramsShape=r,this.variableNames=["x","indices"],this.outputShape=n;let i=GV(n.length),o="\n    int index;";for(let e=0;e<this.sliceDim;e++)o+=`\n          index = round(getIndices(coords[0], ${e}));\n          out_of_bounds = out_of_bounds || index < 0;\n          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[e]};\n          flattenIndex += index * ${this.strides[e]};`;this.userCode=`\n         void main() {\n          ${i} coords = getOutputCoords();\n          int flattenIndex = 0;\n          bool out_of_bounds = false;\n\n          ${o}\n\n          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));\n        }\n      `}}(a,p,[u,c],r.shape),m=n.runWebGLProgram(f,[h,d],h.dtype),g=lL({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),g}};function Dj(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,indices:o}=t,{axis:a,batchDims:s}=r,l=Si.parseAxisParam(a,i.shape)[0];if(qe().get("DEBUG")){let e=n.readSync(o.dataId),t=i.shape[l];for(let n=0;n<e.length;++n){let r=e[n];Si.assert(r<=t-1&&r>=0,()=>`GatherV2: the index value ${r} is not in [0, ${t-1}]`)}}let u=Rf.segment_util.collectGatherOpShapeInfo(i,o,l,s),c=Si.sizeFromShape(o.shape),p=[],d=lL({inputs:{x:i},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),h=lL({inputs:{x:o},backend:n,attrs:{shape:[u.batchSize,c/u.batchSize]}});p.push(d),p.push(h);let f=[u.batchSize,u.outerSize,c/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([i,o])||"string"===i.dtype){let e=n.bufferSync(h),t=n.bufferSync(d),r=zM(t,e,f);return p.forEach(e=>n.disposeIntermediateTensorInfo(e)),n.makeTensorInfo(u.outputShape,r.dtype,r.values)}let m=new class{constructor(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;let n=GV(this.rank),r=function(e,t){let n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let t=0;t<e.length;t++)2===t?r.push("index"):r.push(""+n[t]);return r.join()}(e);this.userCode=`\n      void main() {\n        ${n} resRC = getOutputCoords();\n        int index = int(getIndices(resRC.x, resRC.z));\n        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;\n        setOutput(inBounds * getA(${r}));\n      }\n    `}}(d.shape,f),g=n.runWebGLProgram(m,[d,h],d.dtype);p.push(g);let y=lL({inputs:{x:g},backend:n,attrs:{shape:u.outputShape}});return p.forEach(e=>n.disposeIntermediateTensorInfo(e)),y}var Vj={kernelName:on,backendName:"webgl",kernelFunc:Dj},Mj=ZF({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:jM,dtype:"bool"}),Fj={kernelName:sn,backendName:"webgl",kernelFunc:Mj},Lj=ZF({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool",cpuKernelImpl:qM}),zj={kernelName:ln,backendName:"webgl",kernelFunc:Lj};var jj={kernelName:cn,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{input:r}=t;return vj(r,!0,n)}},qj=YF({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),$j={kernelName:dn,backendName:"webgl",kernelFunc:qj},Bj=YF({opSnippet:"return float(isinf(x));",dtype:"bool"}),Uj={kernelName:hn,backendName:"webgl",kernelFunc:Bj},Wj=YF({opSnippet:"return float(isnan(x));",dtype:"bool"}),Hj={kernelName:fn,backendName:"webgl",kernelFunc:Wj},Qj=ZF({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:$M,dtype:"bool"}),Gj={kernelName:gn,backendName:"webgl",kernelFunc:Qj},Kj=ZF({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",cpuKernelImpl:BM,dtype:"bool"}),Jj={kernelName:yn,backendName:"webgl",kernelFunc:Kj};var Xj={kernelName:vn,backendName:"webgl",kernelFunc:function(e){let{backend:t,attrs:n}=e,{start:r,stop:i,num:o}=n,a=UM(r,i,o);return t.makeTensorInfo([a.length],"float32",a)}},Yj=YF({opSnippet:"if (isnan(x)) return x;\n  return x < 0.0 ? 0./0. : log(x);\n",packedOpSnippet:"\n  vec4 result = log(x);\n  bvec4 isNaN = isnan(x);\n  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);\n  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);\n  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);\n  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);\n  return result;\n",cpuKernelImpl:WM}),Zj={kernelName:bn,backendName:"webgl",kernelFunc:Yj},eq=YF({opSnippet:"if (isnan(x)) return x;\n  return log(1.0 + x);\n"}),tq={kernelName:xn,backendName:"webgl",kernelFunc:eq},nq=ZF({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),rq={kernelName:wn,backendName:"webgl",kernelFunc:nq},iq=YF({opSnippet:"return float(!(x >= 1.0));"}),oq={kernelName:_n,backendName:"webgl",kernelFunc:iq},aq=ZF({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),sq={kernelName:Cn,backendName:"webgl",kernelFunc:aq},lq={kernelName:Tn,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{depthRadius:o,bias:a,alpha:s,beta:l}=r,u=qe().getBool("WEBGL_PACK_NORMALIZATION")?new class{constructor(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;let o=t,a=e[3]-1;this.outputShape=e;let s,l=`float(${n}) + float(${r}) * sum`;s=.5===i?`inversesqrt(${l})`:1===i?`1.0/(${l})`:`exp(log(${l}) * float(-${i}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < ${this.outputShape[3]};\n        bool hasNextRow = c < ${this.outputShape[2]};\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - ${o};\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - ${o}; j <= ${o}; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * ${s};\n        setOutput(result);\n      }\n    `}}(i.shape,o,a,s,l):new class{constructor(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[];let o=t,a=e[3]-1;this.outputShape=e;let s,l=`float(${n}) + float(${r}) * sum`;s=.5===i?`inversesqrt(${l})`:1===i?`1.0/(${l})`:`exp(log(${l}) * float(-${i}));`,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -${o}; j <= ${o}; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  ${a}) {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * ${s};\n        setOutput(val);\n      }\n    `}}(i.shape,o,a,s,l);return n.runWebGLProgram(u,[i],i.dtype)}},uq={kernelName:In,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{x:i,y:o,dy:a}=t,{depthRadius:s,bias:l,alpha:u,beta:c}=r,p=new class{constructor(e,t,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=i,this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < ${this.depth}; ++d) {\n          int depthBegin = int(max(0.0, float(d - ${t})));\n          int depthEnd = int(min(float(${this.depth}),\n              float(d + ${t} + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = ${this.depth};\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float(${r}) * norm + float(${n});\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float(${r})\n                * float(${i})\n                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * ${i});\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    `}}(i.shape,s,l,u,c);return n.runWebGLProgram(p,[i,o,a],i.dtype)}};function cq(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reductionIndices:o,keepDims:a}=r,s=i.shape.length,l=Si.parseAxisParam(o,i.shape),u=l,c=Rf.getAxesPermutation(u,s),p=null!=c,d=n.shouldExecuteOnCPU([i]),h=i;if(p){if(d){let e=n.texData.get(h.dataId).values,t=new Array(s);for(let e=0;e<t.length;e++)t[e]=i.shape[c[e]];let r=xF(e,i.shape,i.dtype,c,t);h=n.makeTensorInfo(t,i.dtype),n.texData.get(h.dataId).values=r}else h=hL(i,c,n);u=Rf.getInnerMostAxes(u.length,s)}Rf.assertAxesAreInnerMostDims("max",u,s);let f,[m,g]=Rf.computeOutAndReduceShapes(h.shape,u),y=m;if(a&&(y=Rf.expandShapeToKeepDim(m,l)),d){let e=n.texData.get(h.dataId).values,t=HM(e,Si.sizeFromShape(g),y,i.dtype);f=n.makeTensorInfo(y,i.dtype),n.texData.get(f.dataId).values=t}else f=function(e,t,n,r){let i=Si.sizeFromShape(t),o=lL({inputs:{x:e},attrs:{shape:[Si.sizeFromShape(e.shape)/i,i]},backend:r}),a=dL(o,e.dtype,"max",r),s=lL({inputs:{x:a},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(a),s}(h,g,y,n);return p&&n.disposeIntermediateTensorInfo(h),f}var pq={kernelName:On,backendName:"webgl",kernelFunc:cq},dq=ZF({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:QM}),hq={kernelName:Nn,backendName:"webgl",kernelFunc:dq};var fq={kernelName:Rn,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t;PV(i,"maxPool");let{filterSize:o,strides:a,pad:s,dimRoundingMode:l}=r;Si.assert(Rf.eitherStridesOrDilationsAreOne(a,1),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '1'`);let u=Rf.computePool2DInfo(i.shape,o,a,1,s,l);if(1===u.filterWidth&&1===u.filterHeight&&Si.arraysEqual(u.inShape,u.outShape))return $F({inputs:{x:i},backend:n});let c=new HL(u,"max",!1);return n.runWebGLProgram(c,[i],i.dtype)}};var mq={kernelName:Dn,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:o,strides:a,pad:s,dataFormat:l,dimRoundingMode:u}=r,c=Rf.computePool3DInfo(i.shape,o,a,[1,1,1],s,u,l),p=new QL(c,"max",!1);return n.runWebGLProgram(p,[i],i.dtype)}};var gq={kernelName:Vn,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,a=o,{filterSize:s,strides:l,pad:u,dimRoundingMode:c}=r,p=Rf.computePool3DInfo(a.shape,s,l,[1,1,1],u,c),d=new QL(p,"max",!0),h=n.runWebGLProgram(d,[a],a.dtype),f=new class{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;let t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterDepth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=s-1-e.padInfo.front,p=l-1-e.padInfo.top,d=u-1-e.padInfo.left,h=s*l*u-1;this.userCode=`\n      const ivec3 pads = ivec3(${c}, ${p}, ${d});\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < ${s};\n           wD += ${i}) {\n          float dyD = float(dyDCorner + wD) / ${t}.0;\n\n          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < ${l};\n              wR += ${o}) {\n            float dyR = float(dyRCorner + wR) / ${n}.0;\n\n            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < ${u};\n                wC += ${a}) {\n              float dyC = float(dyCCorner + wC) / ${r}.0;\n\n              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = ${h} -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * ${l} * ${u} +\n                  wR * ${u} + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(p),m=n.runWebGLProgram(f,[i,h],a.dtype);return n.disposeIntermediateTensorInfo(h),m}};var yq={kernelName:An,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o,output:a}=t,s=o;PV([o,a],"maxPoolGrad");let{filterSize:l,strides:u,pad:c,dimRoundingMode:p}=r,d=Rf.computePool2DInfo(s.shape,l,u,1,c,p),h=new HL(d,"max",!0),f=n.runWebGLProgram(h,[s],s.dtype),m=new class{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;let t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,i=e.effectiveFilterHeight,o=e.effectiveFilterWidth,a=i-1-e.padInfo.top,s=o-1-e.padInfo.left,l=i*o-1;this.userCode=`\n      const ivec2 pads = ivec2(${a}, ${s});\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < ${i};\n          wR += ${r}) {\n          float dyR = float(dyRCorner + wR) / ${t}.0;\n\n          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < ${o}; wC++) {\n            float dyC = float(dyCCorner + wC) / ${n}.0;\n\n            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = ${l} - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * ${o} + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    `}}(d),g=n.runWebGLProgram(m,[i,f],s.dtype);return n.disposeIntermediateTensorInfo(f),g}};var vq={kernelName:Mn,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{x:r}=e,{filterSize:i,strides:o,pad:a,includeBatchInIndex:s}=t,l=n;Si.assert(4===r.shape.length,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);let u=[1,1];Si.assert(Rf.eitherStridesOrDilationsAreOne(o,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);let c=Rf.computePool2DInfo(r.shape,i,o,u,a),[p,d]=function(e,t,n,r){let i=new HL(n,"max",!1),o=r.runWebGLProgram(i,[e],"float32");return i=new HL(n,"max",!0,!0,t),[o,r.runWebGLProgram(i,[e],"float32")]}(r,s,c,l);return[p,d]}};var bq={kernelName:Fn,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{x:r}=e,{keepDims:i,axis:o}=t,a=n,s=r.shape.length,l=Si.parseAxisParam(o,r.shape),u=l,c=Rf.getAxesPermutation(u,s),p=null!=c,d=a.shouldExecuteOnCPU([r]),h=[],f=r;if(p){if(d){let e=a.texData.get(f.dataId).values,t=new Array(s);for(let e=0;e<t.length;e++)t[e]=r.shape[c[e]];let n=xF(e,r.shape,r.dtype,c,t);f=a.makeTensorInfo(t,r.dtype),a.texData.get(f.dataId).values=n}else f=hL(r,c,a);h.push(f),u=Rf.getInnerMostAxes(u.length,s)}Rf.assertAxesAreInnerMostDims("sum",u,s);let[m,g]=Rf.computeOutAndReduceShapes(f.shape,u),y=m;i&&(y=Rf.expandShapeToKeepDim(m,l));let v=function(e,t,n,r){let i=Si.sizeFromShape(t),o=lL({inputs:{x:e},attrs:{shape:[Si.sizeFromShape(e.shape)/i,i]},backend:r}),a=dL(o,"float32","mean",r),s=lL({inputs:{x:a},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(a),s}(f,g,y,a);for(let e of h)a.disposeIntermediateTensorInfo(e);return v}};var xq={kernelName:Ln,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,keepDims:a}=r,s=i.shape.length,l=Si.parseAxisParam(o,i.shape),u=l,c=Rf.getAxesPermutation(u,s),p=i;null!=c&&(p=gL({inputs:{x:i},backend:n,attrs:{perm:c}}),u=Rf.getInnerMostAxes(u.length,i.shape.length)),Rf.assertAxesAreInnerMostDims("min",u,s);let d,[h,f]=Rf.computeOutAndReduceShapes(p.shape,u),m=lL({inputs:{x:p},backend:n,attrs:{shape:[-1,Si.sizeFromShape(f)]}}),g=dL(m,m.dtype,"min",n);if(a){d=lL({inputs:{x:g},backend:n,attrs:{shape:Rf.expandShapeToKeepDim(h,l)}})}else d=lL({inputs:{x:g},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),null!=c&&n.disposeIntermediateTensorInfo(p),d}},wq=ZF({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  bvec4 isNaNA = isnan(a);\n  bvec4 isNaNB = isnan(b);\n  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:GM}),_q={kernelName:zn,backendName:"webgl",kernelFunc:wq},Cq={kernelName:jn,backendName:"webgl",kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r}=e,{paddings:i,mode:o}=n,a=qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new class{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);let r=e.length,i=GV(r),o=t.map(e=>e[0]).join(","),a=t.map((t,n)=>t[0]+e[n]).join(","),s=CF("rc",r),l=CF("source",r),u=`${s[r-1]} < ${this.outputShape[r-1]}`,c=1===r?"source":`vec2(${l.slice(-2).join()})`,p="reflect"===n?0:1,d="";if(1===r){let e=`\n        ${i} source = rc;\n        if (source < start) {\n          source = start * 2 - source - ${p};\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + ${p};\n        }\n        source -= start;\n      `;d=`\n        ${i} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${l.join()}), ${c});\n        ${s[r-1]} += 1;\n        if(${u}) {\n          ${e}\n          result[1] = getChannel(getX(${l.join()}), ${c});\n        }\n      `}else{let e=`\n        ${i} source = rc;\n        ${i} lt = ${i}(lessThan(source, start));\n        ${i} gte = ${i}(greaterThanEqual(source, end));\n        ${i} orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - ${p}) +\n                gte * ((end - 1) * 2 - source + ${p});\n        source -= start;\n      `;d=`\n        ${i} rc = outputLoc;\n        ${e}\n        result[0] = getChannel(getX(${l.join()}), ${c});\n        ${s[r-1]} += 1;\n        if(${u}) {\n          ${e}\n          result[1] = getChannel(getX(${l.join()}), ${c});\n        }\n        rc = outputLoc;\n        ${s[r-2]} += 1;\n        if(${s[r-2]} < ${this.outputShape[r-2]}) {\n          ${e}\n          result[2] = getChannel(getX(${l.join()}), ${c});\n          ${s[r-1]} += 1;\n          if(${u}) {\n            ${e}\n            result[3] = getChannel(getX(${l.join()}), ${c});\n          }\n        }\n      `}this.userCode=`\n      const ${i} start = ${i}(${o});\n      const ${i} end = ${i}(${a});\n\n      void main() {\n        ${i} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${d}\n        setOutput(result);\n      }\n    `}}(r.shape,i,o):new class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);let r=e.length,i=GV(r),o=t.map(e=>e[0]).join(","),a=t.map((t,n)=>t[0]+e[n]).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),l="reflect"===n?0:1;this.userCode=1!==r?`\n      ${i} start = ${i}(${o});\n      ${i} end = ${i}(${a});\n\n      void main() {\n        ${i} outC = getOutputCoords();\n        for (int i = 0; i < ${r}; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - ${l};\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + ${l};\n          }\n        }\n        ${i} coords = outC - start;\n        setOutput(getX(${s}));\n      }\n    `:`\n        int start = ${o};\n        int end = ${a};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - ${l};\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + ${l};\n          }\n          setOutput(getX(outC - start));\n        }\n      `}}(r.shape,i,o);return t.runWebGLProgram(a,[r],r.dtype)}},Sq=ZF({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  bvec4 isNaN = equal(b, vec4(0.0));\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n"}),kq={kernelName:qn,backendName:"webgl",kernelFunc:Sq},Eq=ZF({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),Tq={kernelName:Bt,backendName:"webgl",kernelFunc:Eq},Iq="return a - b;",Pq=ZF({opSnippet:Iq,packedOpSnippet:Iq,supportsComplex:!0,cpuKernelImpl:yF}),Oq={kernelName:Qr,backendName:"webgl",kernelFunc:Pq};function Nq(e){let{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{dim:o}=r,a=Si.parseAxisParam([o],i.shape),s=cq({inputs:{x:i},backend:n,attrs:{reductionIndices:a,keepDims:!1}}),l=Rf.expandShapeToKeepDim(s.shape,a),u=lL({inputs:{x:s},backend:n,attrs:{shape:l}}),c=Pq({inputs:{a:i,b:u},backend:n}),p=cj({inputs:{x:c},backend:n}),d=fL({inputs:{x:p},backend:n,attrs:{axis:a,keepDims:!1}}),h=lL({inputs:{x:d},backend:n,attrs:{shape:l}}),f=Eq({inputs:{a:p,b:h},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),f}var Rq={kernelName:Dr,backendName:"webgl",kernelFunc:Nq};var Aq={kernelName:$n,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{numSamples:o,seed:a,normalized:s}=r,l=s?i:Nq({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),u=l.shape[0],c=l.shape[1],p=new class{constructor(e,t,n){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,n],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < ${t-1}; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float(${t-1}));\n      }\n    `}}(u,c,o),d=[[a]],h=n.runWebGLProgram(p,[l],"int32",d);return s||n.disposeIntermediateTensorInfo(l),h}};var Dq={kernelName:Un,backendName:"webgl",kernelFunc:function(e){let t,{inputs:n,backend:r}=e,{x:i}=n;if(r.shouldExecuteOnCPU([i])){let e=r.texData.get(i.dataId),[t,n]=JM(e.values,i.shape,i.dtype);return r.makeTensorInfo(n,i.dtype,t)}return t=qe().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new NF(i.shape,"\n  vec4 result = -x;\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"):new IF(i.shape,"if (isnan(x)) return x;\n  return -x;\n"),r.runWebGLProgram(t,[i],i.dtype)}},Vq=Vm.nonMaxSuppressionV3Impl;var Mq={kernelName:Hn,backendName:"webgl",kernelFunc:function(e){Rf.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l}=r,u=n.readSync(i.dataId),c=n.readSync(o.dataId),{selectedIndices:p}=Vq(u,c,a,s,l);return n.makeTensorInfo([p.length],"int32",new Int32Array(p))}},Fq=Vm.nonMaxSuppressionV4Impl;var Lq={kernelName:Qn,backendName:"webgl",kernelFunc:function(e){Rf.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l,padToMaxOutputSize:u}=r,c=n.readSync(i.dataId),p=n.readSync(o.dataId),{selectedIndices:d,validOutputs:h}=Fq(c,p,a,s,l,u);return[n.makeTensorInfo([d.length],"int32",new Int32Array(d)),n.makeTensorInfo([],"int32",new Int32Array([h]))]}},zq=Vm.nonMaxSuppressionV5Impl;var jq={kernelName:Gn,backendName:"webgl",kernelFunc:function(e){Rf.warn("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");let{inputs:t,backend:n,attrs:r}=e,{boxes:i,scores:o}=t,{maxOutputSize:a,iouThreshold:s,scoreThreshold:l,softNmsSigma:u}=r,c=n.readSync(i.dataId),p=n.readSync(o.dataId),d=a,h=s,f=l,m=u,{selectedIndices:g,selectedScores:y}=zq(c,p,d,h,f,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}},qq={kernelName:Jn,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{indices:i}=t,{dtype:o,depth:a,onValue:s,offValue:l}=r,u=Si.sizeFromShape(i.shape),c=new class{constructor(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float(${r}), float(${n}),\n                      float(index == coords.y)));\n      }\n    `}}(u,a,s,l),p=lL({inputs:{x:i},backend:n,attrs:{shape:[u]}}),d=n.runWebGLProgram(c,[p],o);n.disposeIntermediateTensorInfo(p);let h=lL({inputs:{x:d},backend:n,attrs:{shape:[...i.shape,a]}});return n.disposeIntermediateTensorInfo(d),h}};function $q(e){let{inputs:t,backend:n}=e,{x:r}=t;if("complex64"===r.dtype){let e=uz({inputs:{input:r},backend:n}),t=$q({inputs:{x:e},backend:n}),i=bz({inputs:{input:r},backend:n}),o=$q({inputs:{x:i},backend:n}),a=UF({inputs:{real:t,imag:o},backend:n});return n.disposeIntermediateTensorInfo(e),n.disposeIntermediateTensorInfo(t),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),a}return xj({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var Bq={kernelName:ii,backendName:"webgl",kernelFunc:$q};var Uq={kernelName:Kn,backendName:"webgl",kernelFunc:function e(t){let{inputs:n,backend:r}=t,{x:i}=n;if("string"===i.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===i.dtype){let t=uz({inputs:{input:i},backend:r}),n=e({inputs:{x:t},backend:r}),o=bz({inputs:{input:i},backend:r}),a=$q({inputs:{x:o},backend:r}),s=UF({inputs:{real:n,imag:a},backend:r});return r.disposeIntermediateTensorInfo(t),r.disposeIntermediateTensorInfo(n),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(a),s}return xj({attrs:{shape:i.shape,dtype:i.dtype,value:1},backend:r})}};var Wq={kernelName:Xn,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{axis:i}=r;if(1===t.length)return dj({inputs:{input:t[0]},backend:n,attrs:{dim:i}});let o=t[0].shape,a=t[0].dtype;t.forEach(e=>{Si.assertShapesMatch(o,e.shape,"All tensors passed to stack must have matching shapes"),Si.assert(a===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});let s=[],l=_z({inputs:t.map(e=>{let t=dj({inputs:{input:e},backend:n,attrs:{dim:i}});return s.push(t),t}),backend:n,attrs:{axis:i}});return s.forEach(e=>n.disposeIntermediateTensorInfo(e)),l}},Hq=e=>{let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{paddings:o,constantValue:a}=r;if(0===Si.sizeFromShape(i.shape)){return xj({backend:n,attrs:{shape:o.map((e,t)=>e[0]+i.shape[t]+e[1]),value:a,dtype:i.dtype}})}let s=qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new class{constructor(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);let r=e.length,i=GV(r),o=t.map(e=>e[0]).join(","),a=t.map((t,n)=>t[0]+e[n]).join(","),s=CF("rc",r),l=CF("source",r),u=`${s[r-1]} < ${this.outputShape[r-1]}`,c=1===r?"source":`vec2(${l.slice(-2).join()})`,p=[i+" rc = outputLoc;",`${s[r-1]} += 1;\n       if(${u}) {\n      `,1===r?"":`}\n       rc = outputLoc;\n       ${s[r-2]} += 1;\n       if(${s[r-2]} < ${this.outputShape[r-2]}) {`,1===r?"":`  ${s[r-1]} += 1;\n         if(${u}) {`],d=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="";for(let e=0,t=1===r?2:4;e<t;e++)h+=`\n        ${p[e]}\n        if (${d}) {\n          result[${e}] = float(value);\n        } else {\n          ${i} source = rc - start;\n          result[${e}] = getChannel(getX(${l.join()}), ${c});\n        }\n      `;h+=1===r?"} ":"}}",this.userCode=`\n      const ${i} start = ${i}(${o});\n      const ${i} end = ${i}(${a});\n\n      void main() {\n        ${i} outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        ${h}\n        setOutput(result);\n      }\n    `}}(i.shape,o,a):new class{constructor(e,t,n){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=t.map((t,n)=>t[0]+e[n]+t[1]);let r=e.length,i=GV(r),o=t.map(e=>e[0]).join(","),a=t.map((t,n)=>t[0]+e[n]).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?`\n      ${i} start = ${i}(${o});\n      ${i} end = ${i}(${a});\n\n      void main() {\n        ${i} outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(value);\n        } else {\n          ${i} coords = outC - start;\n          setOutput(getX(${s}));\n        }\n      }\n    `:`\n        int start = ${o};\n        int end = ${a};\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(value);\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      `}}(i.shape,o,a),l=[[a]];return n.runWebGLProgram(s,[i],i.dtype,l)},Qq={kernelName:Yn,backendName:"webgl",kernelFunc:Hq},Gq=ZF({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  bvec4 isNaN1 = lessThan(a, vec4(0.0));\n  bvec4 isNaN2 = lessThan(floor(b), b);\n  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);\n  \n  result.r = isNaN.r ? NAN : result.r;\n  result.g = isNaN.g ? NAN : result.g;\n  result.b = isNaN.b ? NAN : result.b;\n  result.a = isNaN.a ? NAN : result.a;\n\n  return result;\n"}),Kq={kernelName:er,backendName:"webgl",kernelFunc:Gq};var Jq={kernelName:nr,backendName:"webgl",kernelFunc:function(e){let t,{inputs:n,backend:r,attrs:i}=e,{x:o}=n,{axis:a,keepDims:s}=i,l=o.shape.length,u=[],c=Si.parseAxisParam(a,o.shape),p=c,d=Rf.getAxesPermutation(p,l),h=o;if(null!=d&&(h=gL({inputs:{x:o},backend:r,attrs:{perm:d}}),p=Rf.getInnerMostAxes(p.length,l),u.push(h)),Rf.assertAxesAreInnerMostDims("prod",p,l),r.shouldExecuteOnCPU([h])){let e=r.texData.get(h.dataId).values,{outVals:n,outShape:i,outDtype:o}=YM(h.shape,h.dtype,e,p);t=r.makeTensorInfo(i,o,n)}else{let[e,n]=Rf.computeOutAndReduceShapes(h.shape,p),i=Si.sizeFromShape(n),a=lL({inputs:{x:h},backend:r,attrs:{shape:[-1,i]}}),s=dL(a,go(o.dtype),"prod",r);t=lL({inputs:{x:s},backend:r,attrs:{shape:e}}),u.push(a),u.push(s)}if(s){u.push(t);let e=Rf.expandShapeToKeepDim(t.shape,c);t=lL({inputs:{x:t},backend:r,attrs:{shape:e}})}return u.forEach(e=>r.disposeIntermediateTensorInfo(e)),t}};var Xq={kernelName:rr,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{paramsNestedSplits:i,paramsDenseValues:o,indices:a}=t,{outputRaggedRank:s}=r,l=i.map(e=>n.readSync(e.dataId)),u=i.map(e=>e.shape),c=n.readSync(o.dataId),p=n.readSync(a.dataId),[d,h,f]=ZM(l,u,c,o.shape,o.dtype,p,a.shape,s),m=d.map(e=>n.makeTensorInfo([e.length],"int32",e)),g=n.makeTensorInfo(f,o.dtype,h);return m.concat([g])}};var Yq={kernelName:ir,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{starts:r,limits:i,deltas:o}=t,a=n.readSync(r.dataId),s=n.readSync(i.dataId),l=n.readSync(o.dataId),[u,c]=eF(a,r.shape,r.dtype,s,i.shape,l,o.shape);return[n.makeTensorInfo([u.length],"int32",u),n.makeTensorInfo([c.length],r.dtype,c)]}};var Zq={kernelName:or,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{shape:i,values:o,defaultValue:a,rowPartitionTensors:s}=t,{rowPartitionTypes:l}=r,u=n.readSync(i.dataId),c=n.readSync(o.dataId),p=n.readSync(a.dataId),d=s.map(e=>n.readSync(e.dataId)),h=s.map(e=>e.shape),[f,m]=tF(u,i.shape,c,o.shape,o.dtype,p,a.shape,d,h,l);return n.makeTensorInfo(f,o.dtype,m)}},e$=e=>{let{backend:t,attrs:n}=e,{start:r,stop:i,step:o,dtype:a}=n,s=nF(r,i,o,a);return t.makeTensorInfo([s.length],a,s)},t$={kernelName:ar,backendName:"webgl",kernelFunc:e$},n$=YF({opSnippet:"return 1.0 / x;"}),r$={kernelName:lr,backendName:"webgl",kernelFunc:n$},i$=YF({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),o$={kernelName:ur,backendName:"webgl",kernelFunc:i$},a$=YF({opSnippet:"if (isnan(x)) return x;\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),s$={kernelName:mr,backendName:"webgl",kernelFunc:a$};var l$={kernelName:hr,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:o,halfPixelCenters:a,size:s}=r,[l,u]=s,c=qe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new class{constructor(e,t,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[o,a,s,l]=e;this.outputShape=[o,t,n,l];let u,c=[r&&t>1?a-1:a,r&&n>1?s-1:s],p=[r&&t>1?t-1:t,r&&n>1?n-1:n];u=i?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${c[0]/p[0]},\n          ${c[1]/p[1]},\n          ${c[1]/p[1]});\n      const vec3 inputShapeRC = vec3(${a}.0, ${s}.0,\n                                     ${s}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${u};\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${l-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    `}}(i.shape,l,u,o,a):new class{constructor(e,t,n,r,i){this.variableNames=["A"],this.outputShape=[];let[o,a,s,l]=e;this.outputShape=[o,t,n,l];let u,c=[r&&t>1?a-1:a,r&&n>1?s-1:s],p=[r&&t>1?t-1:t,r&&n>1?n-1:n];u=i?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${c[0]/p[0]},\n          ${c[1]/p[1]});\n      const vec2 inputShapeRC = vec2(${a}.0, ${s}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${u};\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    `}}(i.shape,l,u,o,a);return n.runWebGLProgram(c,[i],"float32")}};var u$={kernelName:fr,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:i,dy:o}=t,{alignCorners:a}=r,s=new class{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;let[,r,i]=t,[,o,a]=e,s=[n&&o>1?r-1:r,n&&a>1?i-1:i],l=[n&&o>1?o-1:o,n&&a>1?a-1:a],u=s[0]/l[0],c=s[1]/l[1],p=1/u,d=1/c,h=2*Math.ceil(p)+2,f=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${c});\n\n        const float invHeightScale = float(${p});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${h});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${o}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${a}) {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), ${r-1}.0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}(o.shape,i.shape,a);return n.runWebGLProgram(s,[o],o.dtype)}};var c$={kernelName:pr,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:i}=t,{alignCorners:o,halfPixelCenters:a,size:s}=r,[l,u]=s,c=qe().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new class{constructor(e,t,n,r,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];let[o,a,s,l]=e;this.outputShape=[o,t,n,l];let u,c=[r&&t>1?a-1:a,r&&n>1?s-1:s],p=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=r?"0.5":"0.0";u=i?"max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          ${c[0]/p[0]},\n          ${c[1]/p[1]},\n          ${c[1]/p[1]});\n      const vec3 inputShapeRC = vec3(${a}.0, ${s}.0,\n                                     ${s}.0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = ${u};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec3 sourceNearestRC = ivec3(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < ${l-1};\n        bool hasNextRow = coords.z < ${n-1};\n\n        vec4 newValue = vec4(\n          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),\n          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);\n\n        setOutput(newValue);\n      }\n    `}}(i.shape,l,u,o,a):new class{constructor(e,t,n,r,i){this.variableNames=["A"],this.outputShape=[];let[o,a,s,l]=e;this.outputShape=[o,t,n,l];let u,c=[r&&t>1?a-1:a,r&&n>1?s-1:s],p=[r&&t>1?t-1:t,r&&n>1?n-1:n],d=r?"0.5":"0.0";u=i?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          ${c[0]/p[0]},\n          ${c[1]/p[1]});\n      const vec2 inputShapeRC = vec2(${a}.0, ${s}.0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = ${u};\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${d})));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    `}}(i.shape,l,u,o,a);return n.runWebGLProgram(c,[i],i.dtype)}};var p$={kernelName:dr,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{images:i,dy:o}=t,{alignCorners:a}=r,s=new class{constructor(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;let[,r,i]=t,[,o,a]=e,s=[n&&o>1?r-1:r,n&&a>1?i-1:i],l=[n&&o>1?o-1:o,n&&a>1?a-1:a],u=s[0]/l[0],c=s[1]/l[1],p=1/u,d=1/c,h=2*Math.ceil(p)+2,f=2*Math.ceil(d)+2;this.userCode=`\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float(${u});\n        const float widthScale = float(${c});\n\n        const float invHeightScale = float(${p});\n        const float invWidthScale = float(${d});\n\n        const int winHeight = int(${h});\n        const int winWidth = int(${f});\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= ${o}) {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= ${a}) {\n              continue;\n            }\n\n            float sourceFracRow =\n              float(${s[0]}) *\n                (float(dyR) / float(${l[0]}));\n\n            float sourceFracCol =\n                float(${s[1]}) *\n                  (float(dyC) / float(${l[1]}));\n\n            int sourceNearestRow = int(min(\n                float(int(${r}) - 1),\n                ${n} ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int(${i}) - 1),\n                ${n} ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    `}}(o.shape,i.shape,a);return n.runWebGLProgram(s,[o],o.dtype)}};var d$={kernelName:gr,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dims:o}=r,a=i.shape.length,s=Si.parseAxisParam(o,i.shape);if(0===a)return $F({inputs:{x:i},backend:n});let l=qe().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new class{constructor(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;let n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);this.outputShape=e;let r=CF("rc",n),i=`${r[n-1]} + 1 < ${this.outputShape[n-1]}`,o=`${r[n-2]} + 1 < ${this.outputShape[n-2]}`,a=GV(n);var s;function l(n){let r=e.map((r,i)=>function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - ${r[n]} - 1`:""+r[n]}(i,n));return`getChannel(getX(${r.join(",")}), vec2(${r.slice(-2).join(",")}))`}this.userCode=1===n?`\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX(${e[0]} - rc - 1),\n            ${e[0]} - rc - 1);\n          if(${i}){\n              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),\n                ${e[0]} - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      `:`\n        void main() {\n          ${a} rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = ${s=r.slice(),l(s)};\n          if(${i}){\n            result.g = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",l(e)}(r.slice())};\n          }\n          if(${o}) {\n            result.b = ${function(e){return e[n-2]="("+e[n-2]+" + 1)",l(e)}(r.slice())};\n            if(${i}) {\n              result.a = ${function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",l(e)}(r.slice())};\n            }\n          }\n          setOutput(result);\n        }\n    `}}(i.shape,s):new class{constructor(e,t){this.variableNames=["x"];let n=e.length;if(n>4)throw new Error(`WebGL backend: Reverse of rank-${n} tensor is not yet supported`);if(this.outputShape=e,1===n)return void(this.userCode=`\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX(${e[0]} - coord - 1));\n        }\n      `);let r=e.map((n,r)=>(n=>-1!==t.indexOf(n)&&1!==e[n]?`${e[n]} - coords[${n}] - 1`:`coords[${n}]`)(r)).join(","),i=GV(n);this.userCode=`\n      void main() {\n        ${i} coords = getOutputCoords();\n        setOutput(getX(${r}));\n      }\n    `}}(i.shape,s);return n.runWebGLProgram(l,[i],i.dtype)}},h$={kernelName:si,backendName:"webgl",kernelFunc:({inputs:e,attrs:t,backend:n})=>{let{image:r}=e,{radians:i,fillValue:o,center:a}=t,s=n,l=new class{constructor(e,t){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];let n=e[1],r=e[2];this.outputShape=e;let i="";i="number"==typeof t?`float outputValue = ${t.toFixed(2)};`:`\n        vec3 fill = vec3(${t.join(",")});\n        float outputValue = fill[coords[3]];`,this.userCode=`\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - params[0]) * params[3] -\n            (float(y) - params[1]) * params[2];\n          float coordYFloat = (float(x) - params[0]) * params[2] +\n            (float(y) - params[1]) * params[3];\n          int coordX = int(round(coordXFloat + params[0]));\n          int coordY = int(round(coordYFloat + params[1]));\n          ${i}\n          if(coordX >= 0 && coordX < ${r} && coordY >= 0 && coordY < ${n}) {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    `}}(r.shape,o),[u,c]=Rf.getImageCenter(a,r.shape[1],r.shape[2]),p=[[u,c,Math.sin(i),Math.cos(i)]];return s.runWebGLProgram(l,[r],r.dtype,p)}},f$=YF({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),m$={kernelName:yr,backendName:"webgl",kernelFunc:f$},g$=YF({opSnippet:"return inversesqrt(x);",cpuKernelImpl:rF}),y$={kernelName:vr,backendName:"webgl",kernelFunc:g$},v$=class{constructor(e,t,n,r,i,o,a=!0,s=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;let l=GV(i.length),u=GV(o.length),c="";1===n?c="i":2===n&&(c="i, j");let p=`getIndices(${c})`,d="";1===r?d="i":2===r&&(d="i, coords[1]");let h=`getUpdates(${d})`,f="";s&&(f="coords[0], coords[1]");let m=`getDefaultValue(${f})`,g=t>1?"strides[j]":"strides";this.userCode=`\n        ${l} strides = ${l}(${i});\n\n        void main() {\n          ${u} coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < ${e}; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < ${t}; j++) {\n              int index = round(${p});\n              flattenedIndex += index * ${g};\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += ${h};\n              found = true;\n            }\n          }\n          setOutput(mix(${m}, sum, float(found)));\n        }\n      `}};var b$={kernelName:br,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{indices:i,updates:o}=t,{shape:a}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:p}=Rf.calculateShapes(o,i,a),d=[p/u,u];if(0===p)return n.makeTensorInfo(a,i.dtype);let h,f=lL({inputs:{x:i},backend:n,attrs:{shape:[l,s]}}),m=lL({inputs:{x:o},backend:n,attrs:{shape:[l,u]}}),g=n.makeTensorInfo([],"float32",new Float32Array([0]));h=qe().getBool("WEBGL_PACK")?new class{constructor(e,t,n,r,i,o,a=!0,s=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;let l=GV(i.length),u=GV(o.length),c="";1===n?c="i":2===n&&(c="i, j");let p=`getIndices(${c})`,d="";1===r?d="i":2===r&&(d="i, coords[1]");let h=`getUpdates(${d})`,f="";s&&(f="coords[0], coords[1]");let m=`getDefaultValue(${f})`,g=t>1?"strides[j]":"strides",y=t>1?"strides[j + 1]":"strides";this.userCode=`\n        ${l} strides = ${l}(${i});\n\n        void main() {\n          ${u} coords = getOutputCoords();\n          vec4 sum = vec4(0.);\n          vec4 found = vec4(0.);\n          for (int i = 0; i < ${e}; i+=2) {\n            ivec2 flattenedIndex = ivec2(0);\n            for (int j = 0; j < ${t}; j+=2) {\n              ivec4 index = round(${p});\n              flattenedIndex += index.xz * ${g};\n              if (j + 1 < ${t}) {\n                flattenedIndex += index.yw * ${y};\n              }\n            }\n            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||\n                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {\n              vec4 updVals = ${h};\n              if (flattenedIndex[0] == coords[0]) {\n                sum.xy += updVals.xy;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[0] == coords[0] + 1) {\n                sum.zw += updVals.xy;\n                found.zw = vec2(1.);\n              }\n              if (flattenedIndex[1] == coords[0]) {\n                sum.xy += updVals.zw;\n                found.xy = vec2(1.);\n              } else if (flattenedIndex[1] == coords[0] + 1) {\n                sum.zw += updVals.zw;\n                found.zw = vec2(1.);\n              }\n            }\n          }\n          setOutput(mix(${m}, sum, found));\n        }\n      `}}(l,s,f.shape.length,m.shape.length,c,d):new v$(l,s,f.shape.length,m.shape.length,c,d);let y=n.runWebGLProgram(h,[m,f,g],m.dtype),v=lL({inputs:{x:y},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(g),v}};var x$={kernelName:wr,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{sortedSequence:i,values:o}=t,{side:a}=r,s=new class{constructor(e,t,n,r){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,n];let i=`for (int i = 0; i < ${Math.ceil(Math.log2(t+1))}; ++i) { if (left >= right) break;`,o=2===qe().getNumber("WEBGL_VERSION")?"while (left < right) {":i,a="left"===r?"<":"<=";this.userCode=`\n       int findBound(int batch, float value) {\n         int left = 0;\n         int right = numInputs;\n         int mid;\n         ${o}\n           mid = (left + right) / 2;\n           if (getSortedSequence(batch, mid) ${a} value) {\n             left = mid + 1;\n           } else {\n             right = mid;\n           }\n         }\n         return right;\n       }\n\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int valueIndex = coords[1];\n\n         float value = getValues(batch, valueIndex);\n\n         setOutput(float(findBound(batch, value)));\n       }\n     `}}(i.shape[0],i.shape[1],o.shape[1],a),l=[[i.shape[1]]];return n.runWebGLProgram(s,[i,o],"int32",l)}};var w$={kernelName:_r,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{condition:r,t:i,e:o}=t,a=new class{constructor(e,t,n){let r,i;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error(`Where for rank ${n} is not yet supported`);if(1===n)i="resRC",r="resRC";else{let n=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],a=[];for(let r=0;r<t.length;r++)a.push(""+n[r]),r<e&&o.push(""+n[r]);r=o.join(),i=a.join()}let o=GV(n);this.userCode=`\n      void main() {\n        ${o} resRC = getOutputCoords();\n        float cVal = getC(${r});\n        if (cVal >= 1.0) {\n          setOutput(getA(${i}));\n        } else {\n          setOutput(getB(${i}));\n        }\n      }\n    `}}(r.shape.length,i.shape,i.shape.length);return n.runWebGLProgram(a,[r,i,o],mo(i.dtype,o.dtype))}},_$=YF({opSnippet:`\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = ${Rf.SELU_SCALEALPHA};\n  float scale = ${Rf.SELU_SCALE};\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n`}),C$={kernelName:Cr,backendName:"webgl",kernelFunc:_$},S$=YF({opSnippet:"if (isnan(x)) return x;\n  return 1.0 / (1.0 + exp(-1.0 * x));\n",packedOpSnippet:"\n  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",cpuKernelImpl:oF}),k$={kernelName:Ir,backendName:"webgl",kernelFunc:S$},E$=YF({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),T$={kernelName:Tr,backendName:"webgl",kernelFunc:E$},I$=YF({opSnippet:"if (isnan(x)) return x;\n  return sin(x);\n",packedOpSnippet:`\n  vec4 result = sin(x);\n  bvec4 isNaN = isnan(x);\n  ${jF}\n  return result;\n`}),P$={kernelName:kr,backendName:"webgl",kernelFunc:I$},O$=YF({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),N$={kernelName:Er,backendName:"webgl",kernelFunc:O$},R$=YF({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),A$={kernelName:Pr,backendName:"webgl",kernelFunc:R$},D$={kernelName:Rr,backendName:"webgl",kernelFunc:e=>{let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:o,paddings:a}=r;Si.assert(i.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");let s=o.reduce((e,t)=>e*t),l=[[0,0]];l.push(...a);for(let e=1+o.length;e<i.shape.length;++e)l.push([0,0]);let u=[],c=Hq({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),p=Rf.getReshaped(c.shape,o,s,!1),d=Rf.getPermuted(p.length,o.length,!1),h=Rf.getReshapedPermuted(c.shape,o,s,!1),f=lL({inputs:{x:c},backend:n,attrs:{shape:p}}),m=gL({inputs:{x:f},backend:n,attrs:{perm:d}}),g=lL({inputs:{x:m},backend:n,attrs:{shape:h}});return u.push(c),u.push(f),u.push(m),u.forEach(e=>n.disposeIntermediateTensorInfo(e)),g}};var V$={kernelName:Vr,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{indices:r,values:i,denseShape:o,defaultValue:a}=t;if(1!==o.shape.length)throw new Error("Dense shape must be a vector, saw:\n         "+o.shape);if(2!==r.shape.length)throw new Error("Indices must be a matrix, saw:\n         "+r.shape);if(1!==i.shape.length)throw new Error("Values must be a vector, saw:\n         "+i.shape);if(0!==a.shape.length)throw new Error("Default value must be a scalar, saw:\n        "+a.shape);let s=n.readSync(r.dataId),l=n.readSync(i.dataId),u=n.readSync(o.dataId),c=n.readSync(a.dataId)[0],[p,d,h,f,m]=lF(s,r.shape,r.dtype,l,i.dtype,u,c);return[n.makeTensorInfo(d,r.dtype,p),n.makeTensorInfo([d[0]],i.dtype,h),n.makeTensorInfo([f.length],"bool",new Uint8Array(f.map(e=>Number(e)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}};var M$={kernelName:Mr,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{inputIndices:r,inputShape:i,newShape:o}=t;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape "+r.shape);if(1!==i.shape.length)throw new Error("Input shape should be a vector but received shape "+i.shape);if(1!==o.shape.length)throw new Error("Target shape should be a vector but received shape "+o.shape);let a=Array.from(n.readSync(i.dataId)),s=n.readSync(r.dataId),l=Array.from(n.readSync(o.dataId)),[u,c,p]=uF(s,r.shape,r.dtype,a,l);return[n.makeTensorInfo(c,r.dtype,u),n.makeTensorInfo([p.length],o.dtype,new Int32Array(p))]}};var F$={kernelName:Fr,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:o}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error("Indices should be a vector but received shape\n              "+i.shape);if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n              "+o.shape);let a=n.readSync(r.dataId),s=n.readSync(i.dataId),l=n.readSync(o.dataId),[u,c]=cF(a,r.shape,r.dtype,s,l,!0);return n.makeTensorInfo(c,r.dtype,u)}};var L$={kernelName:Lr,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n}=e,{data:r,indices:i,segmentIds:o}=t;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(1!==i.shape.length)throw new Error("Indices should be a vector but received shape\n             "+i.shape);if(1!==o.shape.length)throw new Error("Segment ids should be a vector but received shape\n             "+o.shape);let a=n.readSync(r.dataId),s=n.readSync(i.dataId),l=n.readSync(o.dataId),[u,c]=cF(a,r.shape,r.dtype,s,l);return n.makeTensorInfo(c,r.dtype,u)}};var z$={kernelName:zr,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{sparseIndices:i,sparseValues:o,defaultValue:a}=t,{outputShape:s}=r,{sliceRank:l,numUpdates:u,sliceSize:c,strides:p,outputSize:d}=Rf.calculateShapes(o,i,s);if("string"===o.dtype){let e=n.bufferSync(i),t=n.bufferSync(o),r=Si.decodeString(n.readSync(a.dataId)[0]),h=iF(e,t,s,d,c,u,l,p,r,!1);return n.makeTensorInfo(s,h.dtype,h.values)}let h=new v$(u,l,i.shape.length,o.shape.length,p,[d,1],!1),f=n.runWebGLProgram(h,[o,i,a],o.dtype),m=lL({inputs:{x:f},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(f),m}};var j$={kernelName:Ar,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{numOrSizeSplits:o,axis:a}=r,s=Si.parseAxisParam(a,i.shape)[0],l=Rf.prepareSplitSize(i,o,s),u=i.shape.length,c=new Array(u).fill(0),p=i.shape.slice();return l.map(e=>{let t=[...p];t[s]=e;let r=tz({inputs:{x:i},backend:n,attrs:{begin:c,size:t}});return c[s]+=e,r})}},q$="return sqrt(x);",$$=YF({opSnippet:q$,packedOpSnippet:q$,cpuKernelImpl:pF}),B$={kernelName:Or,backendName:"webgl",kernelFunc:$$},U$=YF({opSnippet:"return x * x;"}),W$={kernelName:qr,backendName:"webgl",kernelFunc:U$},H$="return (a - b) * (a - b);",Q$=ZF({opSnippet:H$,packedOpSnippet:H$}),G$={kernelName:jr,backendName:"webgl",kernelFunc:Q$};var K$={kernelName:$r,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t;if("string"!==i.dtype)throw new Error("Input must be of datatype string");let o=n.readSync(i.dataId),a=Rf.fromUint8ToStringArray(o),s=dF(a,"string",r);return n.makeTensorInfo(i.shape,"string",s)}};var J$={kernelName:oi,backendName:"webgl",kernelFunc:function({inputs:e,attrs:t,backend:n}){let{x:r}=e,i=`if (isnan(x)) return x;\n    return x > 0.0 ? 1.0 : float(${t.alpha});\n  `,o=new IF(r.shape,i);return n.runWebGLProgram(o,[r],r.dtype)}};var X$={kernelName:Br,backendName:"webgl",kernelFunc:function(e){let t,{inputs:n,backend:r,attrs:i}=e,{x:o}=n,{begin:a,end:s,strides:l,beginMask:u,endMask:c,ellipsisMask:p,newAxisMask:d,shrinkAxisMask:h}=i,{finalShapeSparse:f,finalShape:m,isIdentity:g,sliceDim0:y,isSimpleSlice:v,begin:b,end:x,strides:w}=lf.sliceInfo(o.shape,a,s,l,u,c,p,d,h);if(g)t=lL({inputs:{x:o},backend:r,attrs:{shape:m}});else if(y||v){Si.assert(o.shape.length>=1,()=>"Input must have rank at least 1, got: "+o.shape.length);let e=lf.computeOutShape(b,x,w),n=tz({inputs:{x:o},backend:r,attrs:{begin:b,size:e}});t=lL({inputs:{x:n},backend:r,attrs:{shape:m}}),r.disposeIntermediateTensorInfo(n)}else if(r.shouldExecuteOnCPU([o])){let e=r.readSync(o.dataId),n=za(o.shape,o.dtype,e),i=hF(f,n,w,b);t=r.makeTensorInfo(m,o.dtype,i.values)}else{let e=new class{constructor(e,t,n){this.variableNames=["x"],this.outputShape=n;let r=n.length,i=GV(n.length),o=GV(n.length),a="";if(1===r)a="coords * strides + begin";else{let e=0;a=n.map((t,r)=>(e++,1===n.length?`coords * strides[${r}] + begin[${r}]`:`coords[${e-1}] * strides[${r}] + begin[${r}]`)).join(",")}this.userCode=`\n      ${i} begin = ${i}(${e});\n      ${i} strides = ${i}(${t});\n\n      void main() {\n        ${o} coords = getOutputCoords();\n        setOutput(getX(${a}));\n      }\n    `}}(b,w,f);t=r.runWebGLProgram(e,[o],o.dtype)}let _=lL({inputs:{x:t},backend:r,attrs:{shape:m}});return r.disposeIntermediateTensorInfo(t),_}};var Y$={kernelName:Ur,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{separator:i,nGramWidths:o,leftPad:a,rightPad:s,padWidth:l,preserveShortSequences:u}=r,{data:c,dataSplits:p}=t,d=n.readSync(c.dataId),h=n.readSync(p.dataId),[f,m]=fF(d,h,i,o,a,s,l,u);return[n.makeTensorInfo([f.length],"string",f),n.makeTensorInfo(p.shape,"int32",m)]}};var Z$={kernelName:Wr,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{skipEmpty:i}=r,{input:o,delimiter:a}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(1!==o.shape.length)throw new Error("Input must be a vector, got shape: "+o.shape);if(0!==a.shape.length)throw new Error("Delimiter must be a scalar, got shape: "+a.shape);let s=n.readSync(o.dataId),l=n.readSync(a.dataId)[0],[u,c,p]=mF(s,l,i),d=c.length;return[n.makeTensorInfo([d,2],"int32",u),n.makeTensorInfo([d],"string",c),n.makeTensorInfo([2],"int32",new Int32Array(p))]}};var eB={kernelName:Hr,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{numBuckets:i}=r,{input:o}=t;if("string"!==o.dtype)throw new Error("Input must be of datatype string");if(i<=0)throw new Error("Number of buckets must be at least 1");let a=n.readSync(o.dataId),s=gF(a,i);return n.makeTensorInfo(o.shape,"int32",s)}},tB=YF({opSnippet:"return tan(x);"}),nB={kernelName:Gr,backendName:"webgl",kernelFunc:tB},rB=YF({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),iB={kernelName:Kr,backendName:"webgl",kernelFunc:rB};var oB={kernelName:xr,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{tensor:i,indices:o,updates:a}=t,{}=r,{sliceRank:s,numUpdates:l,sliceSize:u,strides:c,outputSize:p}=Rf.calculateShapes(a,o,i.shape),d=[p/u,u];if(0===p)return n.makeTensorInfo(i.shape,o.dtype);let h=lL({inputs:{x:o},backend:n,attrs:{shape:[l,s]}}),f=lL({inputs:{x:a},backend:n,attrs:{shape:[l,u]}}),m=lL({inputs:{x:i},backend:n,attrs:{shape:d}}),g=new v$(l,s,h.shape.length,f.shape.length,c,d,!1,!0),y=n.runWebGLProgram(g,[f,h,m],m.dtype),v=lL({inputs:{x:y},backend:n,attrs:{shape:i.shape}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),v}};function aB(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{reps:o}=r;if("string"===i.dtype||i.shape.length>5){let e=n.readSync(i.dataId),t="string"===i.dtype?e.map(e=>Si.decodeString(e)):e,r=za(i.shape,i.dtype,t),a=vF(r,o);return n.makeTensorInfo(a.shape,a.dtype,a.values)}let a=new class{constructor(e,t){this.variableNames=["A"];let n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;let r=GV(this.rank),i=function(e){let t=e.length;if(t>5)throw Error(`Tile for rank ${t} is not yet supported`);if(1===t)return`imod(resRC, ${e[0]})`;let n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let t=0;t<e.length;t++)r.push(`imod(${n[t]}, ${e[t]})`);return r.join()}(e);this.userCode=`\n      void main() {\n        ${r} resRC = getOutputCoords();\n        setOutput(getA(${i}));\n      }\n    `}}(i.shape,o);return n.runWebGLProgram(a,[i],i.dtype)}var sB={kernelName:Jr,backendName:"webgl",kernelFunc:aB},lB=class{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode="\n    void main() {\n         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // The output size is half of the previous size.\n         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),\n         // we only need to output the indices at positions |, the indices at\n         // positions _ can be thrown away, see Figure5(b) After Phase 2\n         // (Merge phase) in the Bitonic Top K paper referenced above.\n         // For example, the paper shows we only need to output the orange bars.\n         // The output sequence should look like this | | | | | | | |.\n         // Because the sequence is halved, to map the output index back\n         // to the previous sequence to find the corresponding value,\n         // we need to double the index. When we double the index,\n         // we basically interpolate a position, so 2i looks like\n         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position\n         // of each 2k positions by - elemIdx % k. E.g. for output at\n         // index 4,5,6,7, we want to get the corresponding element at\n         // original index 8,9,10,11, for output at index 8,9,10,11,\n         // we want to get the corresponding element at original index\n         // 16,17,18,19, so on and so forth.\n\n         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));\n\n         float x0 = getX(batch, i0);\n         float x1 = i1 < n ? getX(batch, i1) : x0;\n\n         setOutput(x0 >= x1 ? float(i0) : float(i1));\n       }\n     "}};function uB(e,t){null!==t&&e.disposeIntermediateTensorInfo(t)}function cB(e){let t=1;for(;t<e;)t*=2;return t}var pB={kernelName:Xr,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{k:o,sorted:a}=r,s=qe().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=qe().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),u=i.shape,c=u[u.length-1];if(n.shouldExecuteOnCPU([i])||c<s||o>l){let e=n.readSync(i.dataId),[t,r]=bF(e,u,i.dtype,o,a);return[n.makeTensorInfo(t.shape,t.dtype,t.values),n.makeTensorInfo(r.shape,r.dtype,r.values)]}if(0===o)return u[u.length-1]=0,[n.makeTensorInfo(u,i.dtype,[]),n.makeTensorInfo(u,"int32",[])];if(1===c)return[i,xj({attrs:{shape:u,dtype:"int32",value:0},backend:n})];let p=n.texData.get(i.dataId),d=null!==p&&p.isPacked,h=d?n.unpackTensor(i):i,f=Si.sizeFromShape(u)/c,m=lL({inputs:{x:h},attrs:{shape:[f,c]},backend:n});d&&uB(n,h);let g=cB(o),y=cB(c),v=null,b=()=>null===v?[m,m]:[m,v],x=(e,t,r)=>{let i=b(),o=new class{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode="\n       void main() {\n         ivec2 coords = getOutputCoords();\n         int batch = coords[0];\n         int elemIdx = coords[1];\n\n         // We compare elements pair-wise within a group of size 2 * inc.\n         // The comparing rule for each group alternates between ascending\n         // and descending. Within each group, we compare each pair at\n         // positions i and i+inc. To decide whether an element at position i\n         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than\n         // inc, it is in the first half of the group, we denote it as x0,\n         // otherwise we denote it as x1.\n         // For example, as shown in the Bitonic top K paper referenced above,\n         // Figure5(a) shows that element[1] is in the\n         // second half of the group when group size is 2, but it is in the\n         // first half of the group when group size is 4.\n\n         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;\n         int i = isFirstInPair ? elemIdx : elemIdx - inc;\n\n         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));\n         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));\n         float x0 = i0 < n ? getX(batch, i0) : negativeInf;\n         float x1 = i1 < n ? getX(batch, i1) : negativeInf;\n\n         // Denotes which direction indices are in (ascending or descending).\n         bool reverse = imod(elemIdx, 2 * dir) >= dir;\n         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);\n         if (reverse == isGreater) { // Elements in opposite order of direction\n           int iTemp = i0;\n           i0 = i1;\n           i1 = iTemp;\n         }\n         if (isFirstInPair) {\n            setOutput(float(i0));\n         } else {\n            setOutput(float(i1));\n         }\n       }\n     "}}(r),a=[[c],[null===v?1:0],[Number.NEGATIVE_INFINITY],[e],[t]],s=v;v=n.runWebGLProgram(o,i,"int32",a),uB(n,s)};for(let e=1;e<g;e*=2){let t=2*e;for(let n=e;n>=1;n/=2)x(t,n,[f,y])}for(let e=y;e>g;e/=2){let t=b(),r=new lB([f,e/2]),i=[[c],[null===v?1:0],[g]],o=v;v=n.runWebGLProgram(r,t,"int32",i),uB(n,o);let a=g/2,s=2*a;for(let e=a;e>=1;e/=2)x(s,e,v.shape)}let w=v;v=tz({inputs:{x:v},backend:n,attrs:{begin:0,size:[f,o]}}),uB(n,w);let _=Dj({inputs:{x:m,indices:v},backend:n,attrs:{axis:1,batchDims:1}});uB(n,m);let C=u.slice(0,-1);C.push(o),w=v,v=lL({inputs:{x:v},attrs:{shape:C},backend:n}),uB(n,w);let S=_;return _=lL({inputs:{x:_},attrs:{shape:C},backend:n}),uB(n,S),[_,v]}};var dB={kernelName:Yr,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{image:i,transforms:o}=t,{interpolation:a,fillMode:s,fillValue:l,outputShape:u}=r,[c,p,d,h]=i.shape,[f,m]=null!=u?u:[p,d],g=[c,f,m,h],y=new class{constructor(e,t,n,r,i,o){this.variableNames=["Image","Transforms"],this.outputShape=o;let a,s="nearest"===n?1:2;switch(r){case"constant":a=1;break;case"reflect":a=2;break;case"wrap":a=3;break;case"nearest":a=4;break;default:a=1}this.userCode=`\n            float mapCoord(float outCoord, float len) {\n              float inCoord = outCoord;\n              if(${a} == 2) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    if (inCoord < sz2) {\n                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +\n                      inCoord;\n                    }\n                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz2 = 2.0 * len;\n                    inCoord -= sz2 * float(int(float(inCoord / sz2)));\n                    if (inCoord >= len) {\n                      inCoord = sz2 - inCoord - 1.0;\n                    }\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${a} == 3) {\n                if (inCoord < 0.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);\n                  }\n                } else if (inCoord > len - 1.0) {\n                  if (len <= 1.0) {\n                    inCoord = 0.0;\n                  } else {\n                    float sz = len - 1.0;\n                    inCoord -= len * float(int(float(inCoord / sz)));\n                  }\n                }\n                return clamp(inCoord, 0.0, len - 1.0);\n              } else if (${a} == 4) {\n                return clamp(outCoord, 0.0, len - 1.0);\n              } else {\n                return outCoord;\n              }\n            }\n\n            float readWithFillValue(int batch, int coordY, int coordX,\n              int channel) {\n              float outputValue;\n              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${t}) {\n                  outputValue = getImage(batch, coordY, coordX, channel);\n              } else {\n                outputValue = float(${i});\n              }\n              return outputValue;\n            }\n\n            void main() {\n              ivec4 coords = getOutputCoords();\n              float outputValue;\n              int batch = coords[0];\n              int x = coords[2];\n              int y = coords[1];\n              int channel = coords[3];\n              float xf = float(x);\n              float yf = float(y);\n              float a1 = getTransforms(batch, 0);\n              float a2 = getTransforms(batch, 1);\n              float a3 = getTransforms(batch, 2);\n              float b1 = getTransforms(batch, 3);\n              float b2 = getTransforms(batch, 4);\n              float b3 = getTransforms(batch, 5);\n              float c1 = getTransforms(batch, 6);\n              float c2 = getTransforms(batch, 7);\n              float projection = c1 * xf + c2 * yf + 1.0;\n              if (projection == 0.0) {\n                outputValue = float(${i});\n              } else {\n                float inX = (a1 * xf + a2 * yf + a3) / projection;\n                float inY = (b1 * xf + b2 * yf + b3) / projection;\n                float mapX = mapCoord(inX, float(${t}));\n                float mapY = mapCoord(inY, float(${e}));\n\n                if (${s} == 1) {\n                  int coordY = int(round(mapY));\n                  int coordX = int(round(mapX));\n                  outputValue = readWithFillValue(batch, coordY, coordX,\n                    channel);\n                } else {\n                  float yFloor = floor(mapY);\n                  float xFloor = floor(mapX);\n                  float yCeil = yFloor + 1.0;\n                  float xCeil = xFloor + 1.0;\n                  float valueYFloor = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);\n                  float valueYCeil = (xCeil - mapX) *\n                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +\n                  (mapX - xFloor) *\n                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);\n                  outputValue = (yCeil - mapY) * valueYFloor +\n                  (mapY - yFloor) * valueYCeil;\n                }\n              }\n              setOutput(outputValue);\n            }\n        `}}(p,d,a,s,l,g);return n.runWebGLProgram(y,[i,o],"float32")}};var hB={kernelName:ei,backendName:"webgl",kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{axis:i}=n,{x:o}=t;PV(o,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");let a=r.readSync(o.dataId),{outputValues:s,outputShape:l,indices:u}=wF(a,i,o.shape,o.dtype);return[r.makeTensorInfo(l,o.dtype,s),r.makeTensorInfo([u.length],"int32",u)]}};var fB={kernelName:ti,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{value:i}=t,{axis:o}=r;o<0&&(o+=i.shape.length);let a=i,s=a.shape.length,l=i.shape[o],u=new Array(s-1),c=0;for(let e=0;e<s;e++)e!==o&&(u[c++]=a.shape[e]);let p=[],d=new Array(s).fill(0),h=a.shape.slice();h[o]=1;let f=new Array(l);for(let e=0;e<f.length;e++){d[o]=e;let t=tz({inputs:{x:a},backend:n,attrs:{begin:d,size:h}}),r=lL({inputs:{x:t},backend:n,attrs:{shape:u}});f[e]=r,p.push(t)}return p.forEach(e=>n.disposeIntermediateTensorInfo(e)),f}};var mB,gB,yB,vB=[bL,wL,CL,kL,IL,PL,OL,NL,DL,VL,FL,zL,qL,BL,WL,GL,KL,JL,XL,YL,ZL,rz,iz,oz,az,pz,fz,mz,WF,yz,Cz,Pz,Oz,Nz,Rz,Az,Vz,Fz,zz,jz,Wz,Hz,Qz,Gz,Xz,Yz,Zz,ej,tj,nj,ij,oj,sj,uj,pj,hj,gj,bj,_j,Cj,Ej,Ij,Pj,Nj,Rj,Aj,Vj,Fj,zj,BF,jj,xz,$j,Uj,Hj,GF,Gj,Jj,Xj,Zj,tq,rq,oq,sq,lq,uq,pq,hq,fq,mq,gq,yq,vq,bq,xq,_q,Cq,kq,Aq,sL,Dq,Mq,Lq,jq,lz,qq,Uq,Wq,Qq,Kq,XF,Jq,Xq,Yq,Zq,t$,cz,Tq,r$,o$,s$,uL,l$,u$,c$,p$,d$,h$,m$,y$,b$,x$,w$,C$,k$,T$,P$,N$,nz,Rq,A$,D$,V$,M$,F$,L$,z$,j$,B$,W$,G$,K$,J$,X$,Y$,Z$,eB,Oq,mL,nB,iB,oB,sB,pB,dB,yL,hB,fB,{kernelName:ni,backendName:"webgl",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,segmentIds:o}=t,{numSegments:a}=r,s=i.shape.length,l=[],u=0,c=Rf.getAxesPermutation([u],s),p=i;null!=c&&(p=gL({inputs:{x:i},backend:n,attrs:{perm:c}}),l.push(p),u=Rf.getInnerMostAxes(1,s)[0]);let d=Rf.segment_util.computeOutShape(p.shape,u,a),h=Si.sizeFromShape([p.shape[u]]),f=lL({inputs:{x:p},backend:n,attrs:{shape:[-1,h]}});l.push(f);let m=go(i.dtype),g=(e,t,r,i,o)=>{let a=e.shape[0],s=e.shape[1],u=Rf.segment_util.segOpComputeOptimalWindowSize(s,o),c={windowSize:u,inSize:s,batchSize:a,numSegments:o},p=new class{constructor(e,t){this.variableNames=["x","segmentIds"];let n=e.windowSize,r=e.batchSize,i=e.inSize,o=e.numSegments,a=o*Math.ceil(i/n);this.outputShape=[r,a];let s=4*Math.floor(n/4),l=n%4,u="\n        sumValue += dot(values, segFilter);\n    ",c="";i%n>0&&(c=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return initializationValue;\n        }\n      `);let p="";i%n>0&&(p=`\n        if (inIdx < 0 || inIdx >= ${i}) {\n          return -1.0;\n        }\n      `),this.userCode=`\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        ${c}\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        ${p}\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          ${o})) * float(${n}));\n        int currentSeg = int(mod(float(outIdx), float(${o})));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < ${s}; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          ${u}\n        }\n\n        int inIdx = inOffset + ${s};\n        if (${1===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          ${u}\n        } else if (${2===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          ${u}\n        } else if (${3===l}) {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          ${u}\n        }\n        setOutput(sumValue);\n      }\n    `}}(c,t),d=n.compileAndRun(p,[e,r],i);if(l.push(d),d.shape[1]===o)return d;let h=e$({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),f=aB({inputs:{x:h},backend:n,attrs:{reps:[s/u]}});return l.push(h),l.push(f),g(d,t,f,i,o)},y=lL({inputs:{x:g(f,"unsortedSegmentSum",o,m,a)},backend:n,attrs:{shape:d}}),v=y;if(null!=c){l.push(y);let e=Rf.getUndoAxesPermutation(c);v=gL({inputs:{x:v},backend:n,attrs:{perm:e}})}return l.forEach(e=>n.disposeIntermediateTensorInfo(e)),v}},Bq];for(let e of vB)vi(e);!function(e){e[e.float32=0]="float32",e[e.int32=1]="int32",e[e.bool=2]="bool",e[e.string=3]="string",e[e.complex64=4]="complex64"}(mB||(mB={})),function(e){e[e.linear=0]="linear",e[e.relu=1]="relu",e[e.relu6=2]="relu6",e[e.prelu=3]="prelu",e[e.leakyrelu=4]="leakyrelu",e[e.sigmoid=5]="sigmoid",e[e.elu=6]="elu"}(gB||(gB={}));var bB={kernelName:li,backendName:"wasm",setupFunc:function(e){yB=e.wasm.cwrap(li,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{a:i,b:o,bias:a,preluActivationWeights:s}=t;if("float32"!==i.dtype||"float32"!==o.dtype)throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");let{transposeA:l,transposeB:u,activation:c,leakyreluAlpha:p}=r,d=n.dataIdMap.get(i.dataId).id,h=n.dataIdMap.get(o.dataId).id,f=0;if(null!=a){let e=n.dataIdMap.get(a.dataId);if(1!==e.shape.length)throw new Error(`_FusedMatMul only supports rank-1 bias but got rank ${e.shape.length}.`);f=e.id}let m=null==s?0:n.dataIdMap.get(s.dataId).id,g=gB[c];if(null==g)throw new Error(c+" activation not yet supported for FusedConv2D in the wasm backend.");let y=l?i.shape[2]:i.shape[1],v=u?o.shape[1]:o.shape[2],b=Ol.assertAndGetBroadcastShape(i.shape.slice(0,-2),o.shape.slice(0,-2)),x=n.makeOutput([...b,y,v],i.dtype),w=n.dataIdMap.get(x.dataId).id,_=new Uint8Array(new Int32Array(i.shape).buffer),C=new Uint8Array(new Int32Array(o.shape).buffer);return yB(d,_,i.shape.length,h,C,o.shape.length,l,u,g,f,m,p||0,w),x}};function xB(e,t){let n;return{kernelName:e,backendName:"wasm",setupFunc:function(t){n=t.wasm.cwrap(e,null,["number","number","number"])},kernelFunc:function(e){let{backend:r,inputs:{x:i}}=e,o=r.dataIdMap.get(i.dataId).id,a=r.makeOutput(i.shape,t||i.dtype),s=r.dataIdMap.get(a.dataId).id;return 0===Si.sizeFromShape(a.shape)||n(o,mB[i.dtype],s),a}}}var wB=xB(He),_B=xB(Qe),CB=xB(Ge);function SB(e,t,n){let r;return{kernelName:e,backendName:"wasm",setupFunc:function(t){r=t.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:i}=e,{a:o,b:a}=i,s=t.dataIdMap.get(o.dataId).id,l=t.dataIdMap.get(a.dataId).id,u=null!=n?n:o.dtype,c=Rf.assertAndGetBroadcastShape(o.shape,a.shape),p=t.makeOutput(c,u);if(0===Si.sizeFromShape(c))return p;let d=new Uint8Array(new Int32Array(o.shape).buffer),h=new Uint8Array(new Int32Array(a.shape).buffer),f=t.dataIdMap.get(p.dataId).id;return r(s,d,o.shape.length,l,h,a.shape.length,mB[o.dtype],f),p}}}var kB,EB=SB(Ke);var TB={kernelName:Je,backendName:"wasm",setupFunc:function(e){kB=e.wasm.cwrap(Je,null,["array","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n}=e,r=n.makeOutput(t[0].shape,t[0].dtype);if(0===Si.sizeFromShape(r.shape))return r;let i=t.map(e=>n.dataIdMap.get(e.dataId).id),o=new Uint8Array(new Int32Array(i).buffer),a=n.dataIdMap.get(r.dataId).id;return kB(o,i.length,mB[r.dtype],a),r}};function IB(e){let{inputs:{x:t},backend:n}=e;if("string"===t.dtype)return Bo(n.readSync(t.dataId),t.shape,t.dtype);let r=n.makeOutput(t.shape,t.dtype),i=n.typedArrayFromHeap(t);return n.typedArrayFromHeap(r).set(i),r}var PB,OB={kernelName:un,backendName:"wasm",kernelFunc:IB};function NB(e){let{inputs:t,backend:n,attrs:r}=e,[i,o]=function(e,t){let n=[],r=[];for(let i=0;i<e.length;++i)1!==e[i]&&n.push(e[i]),1!==e[t[i]]&&r.push(t[i]);for(let e=0;e<r.length;++e){let t=-1;for(let n=0;n<r.length;++n)r[n]>=e&&(-1===t||r[t]>r[n])&&(t=n);r[t]=e}return[n,r]}(t.x.shape,r.perm),a=!0;for(let e=0;e<o.length;e++)o[e]!==e&&(a=!1);let s=function(e,t){let n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e[t[r]];return n}(t.x.shape,r.perm),l={dataId:t.x.dataId,shape:i,dtype:t.x.dtype};if(a){let e=IB({inputs:t,backend:n});return e.shape=s,e}let u=n.makeOutput(s,l.dtype),c=n.dataIdMap.get(l.dataId).id,p=n.dataIdMap.get(u.dataId).id,d=new Uint8Array(new Int32Array(o).buffer),h=new Uint8Array(new Int32Array(l.shape).buffer);return PB(c,h,l.shape.length,mB[l.dtype],p,d,o.length),u}var RB,AB={kernelName:Zr,backendName:"wasm",kernelFunc:NB,setupFunc:function(e){PB=e.wasm.cwrap(Zr,null,["number","array","number","number","number","array","number"])}};function DB(e,t,n){let r=e.shape,i=e.shape.length,o=Si.parseAxisParam(t,r),a=o,s=Rf.getAxesPermutation(a,i),l=null,u=!1;if(null!=s){let t=new Array(i);for(let e=0;e<t.length;e++)t[e]=r[s[e]];a=Rf.getInnerMostAxes(a.length,i),l=NB({inputs:{x:e},attrs:{perm:s},backend:n});let o=n.dataIdMap.get(e.dataId).id;n.dataIdMap.get(l.dataId).id!==o&&(u=!0)}return{transposed:l,originalAxes:o,axes:a,inputWasTransposed:u}}var VB,MB={kernelName:Xe,backendName:"wasm",setupFunc:function(e){RB=e.wasm.cwrap(Xe,null,["number, number, number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{axis:i,keepDims:o}=r,{x:a}=n,s=t.dataIdMap.get(a.dataId).id,l=a,{transposed:u,axes:c,originalAxes:p,inputWasTransposed:d}=DB(a,i,t);if(d){l=u,s=t.dataIdMap.get(u.dataId).id}let h=l.shape.length;Rf.assertAxesAreInnerMostDims("all",c,h);let[f,m]=Rf.computeOutAndReduceShapes(l.shape,c),g=Si.sizeFromShape(m),y=t.makeOutput(f,a.dtype);if(0!==Si.sizeFromShape(l.shape)){let e=t.dataIdMap.get(y.dataId).id;RB(s,g,e)}if(d&&t.disposeData(u.dataId),o){let e=Rf.expandShapeToKeepDim(y.shape,p);y.shape=e}return y}};var FB={kernelName:Ye,backendName:"wasm",setupFunc:function(e){VB=e.wasm.cwrap(Ye,null,["number, number, number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{axis:i,keepDims:o}=r,{x:a}=n,s=t.dataIdMap.get(a.dataId).id,l=a,{transposed:u,axes:c,originalAxes:p,inputWasTransposed:d}=DB(a,i,t);if(d){l=u,s=t.dataIdMap.get(u.dataId).id}let h=l.shape.length;Rf.assertAxesAreInnerMostDims("any",c,h);let[f,m]=Rf.computeOutAndReduceShapes(l.shape,c),g=Si.sizeFromShape(m),y=t.makeOutput(f,a.dtype);if(0!==Si.sizeFromShape(l.shape)){let e=t.dataIdMap.get(y.dataId).id;VB(s,g,e)}if(d&&t.disposeData(u.dataId),o){let e=Rf.expandShapeToKeepDim(y.shape,p);y.shape=e}return y}};function LB(e){let t;return{kernelName:e,backendName:"wasm",setupFunc:function(n){t=n.wasm.cwrap(e,null,["number","number","number","number","number"])},kernelFunc:function(e){let{backend:n,inputs:r,attrs:i}=e,{axis:o}=i,{x:a}=r,s=n.dataIdMap.get(a.dataId).id,l=s,u=a,{transposed:c,axes:p,inputWasTransposed:d}=DB(a,o,n);if(d){let e=n.dataIdMap.get(c.dataId).id;e!==s&&(u=c,l=e)}let h=u.shape.slice(0,-1),f=n.makeOutput(h,"int32"),m=n.dataIdMap.get(f.dataId).id,g=Si.sizeFromShape(f.shape),y=u.shape[p[0]];return t(l,mB[u.dtype],g,y,m),d&&n.disposeData(c.dataId),f}}}var zB,jB=LB(Ze),qB=LB(et),$B=xB(tt),BB=xB(nt),UB=xB(rt),WB=SB(ot),HB=xB(it);var QB,GB={kernelName:at,backendName:"wasm",setupFunc:function(e){zB=e.wasm.cwrap(at,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,i=t.x,o=r.dataIdMap.get(i.dataId).id,{filterSize:a,strides:s,pad:l,dimRoundingMode:u}=n,c=Rf.computePool2DInfo(i.shape,a,s,1,l,u),p=c.filterHeight,d=c.filterWidth,h=c.padInfo.top,f=c.padInfo.right,m=c.padInfo.bottom,g=c.padInfo.left,y=c.strideHeight,v=c.strideWidth,b=c.inChannels;if("channelsLast"!==c.dataFormat)throw new Error(`wasm backend does not support dataFormat:'${c.dataFormat}'. Please use 'channelsLast'.`);if(1!==c.dilationWidth||1!==c.dilationHeight)throw new Error(`was backend only supports average pooling with dilation = [1, 1], got [${c.dilationHeight}, ${c.dilationWidth}].`);let x=r.makeOutput(c.outShape,"float32"),w=r.dataIdMap.get(x.dataId).id;return zB(o,i.shape[0],i.shape[1],i.shape[2],p,d,h,f,m,g,y,v,b,w),x}};var KB,JB={kernelName:lt,backendName:"wasm",setupFunc:function(e){QB=e.wasm.cwrap("AvgPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:o,strides:a,pad:s,dimRoundingMode:l,dataFormat:u}=r,c=Rf.computePool3DInfo(i.shape,o,a,1,s,l,u),p=n.makeOutput(c.outShape,i.dtype);return QB(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(p.dataId).id,c.batchSize,c.inChannels,c.inDepth,c.inHeight,c.inWidth,c.outDepth,c.outHeight,c.outWidth,c.strideDepth,c.strideHeight,c.strideWidth,c.dilationDepth,c.dilationHeight,c.dilationWidth,c.effectiveFilterDepth,c.effectiveFilterHeight,c.effectiveFilterWidth,c.padInfo.front,c.padInfo.top,c.padInfo.left),p}};var XB,YB={kernelName:ut,backendName:"wasm",setupFunc:function(e){KB=e.wasm.cwrap("AvgPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,{filterSize:a,strides:s,pad:l,dimRoundingMode:u}=r,c=Rf.computePool3DInfo(o.shape,a,s,1,l,u),p=n.makeOutput(o.shape,o.dtype);return KB(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(p.dataId).id,c.batchSize,c.inChannels,c.inDepth,c.inHeight,c.inWidth,c.outDepth,c.outHeight,c.outWidth,c.strideDepth,c.strideHeight,c.strideWidth,c.dilationDepth,c.dilationHeight,c.dilationWidth,c.effectiveFilterDepth,c.effectiveFilterHeight,c.effectiveFilterWidth,c.padInfo.front,c.padInfo.top,c.padInfo.left,c.filterDepth,c.filterHeight,c.filterWidth),p}};var ZB={kernelName:st,backendName:"wasm",setupFunc:function(e){XB=e.wasm.cwrap("AvgPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,{filterSize:a,strides:s,pad:l}=r,u=Rf.computePool2DInfo(o.shape,a,s,1,l),c=n.makeOutput(o.shape,o.dtype);return XB(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(c.dataId).id,u.batchSize,u.inChannels,u.inHeight,u.inWidth,u.outHeight,u.outWidth,u.strideHeight,u.strideWidth,u.dilationHeight,u.dilationWidth,u.effectiveFilterHeight,u.effectiveFilterWidth,u.padInfo.top,u.padInfo.left,u.filterHeight,u.filterWidth),c}};function eU(e){let{inputs:t,attrs:n}=e,{x:r}=t,{shape:i}=n,o=Si.sizeFromShape(r.shape),a=Si.inferFromImplicitShape(i,o);return Si.assert(o===Si.sizeFromShape(a),()=>`new shape: ${a}, old shape: ${r.shape}. New shape and old shape must have the same number of elements.`),e.backend.incRef(r.dataId),{dataId:r.dataId,shape:a,dtype:r.dtype}}var tU,nU={kernelName:cr,backendName:"wasm",kernelFunc:eU};var rU={kernelName:ct,backendName:"wasm",setupFunc:function(e){tU=e.wasm.cwrap(ct,null,["number","array","number","number","array","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{a:i,b:o}=t,{transposeA:a,transposeB:s}=r;if("float32"!==i.dtype||"float32"!==o.dtype)throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");let l=i.shape.length,u=o.shape.length,c=a?i.shape[l-2]:i.shape[l-1],p=s?o.shape[u-1]:o.shape[u-2],d=a?i.shape[l-1]:i.shape[l-2],h=s?o.shape[u-2]:o.shape[u-1],f=i.shape.slice(0,-2),m=o.shape.slice(0,-2),g=Si.sizeFromShape(f),y=Si.sizeFromShape(m),v=Ol.assertAndGetBroadcastShape(i.shape.slice(0,-2),o.shape.slice(0,-2)).concat([d,h]);Si.assert(c===p,()=>`Error in matMul: inner shapes (${c}) and (${p}) of Tensors with shapes ${i.shape} and ${o.shape} and transposeA=${a} and transposeB=${s} must match.`);let b=s?[y,h,p]:[y,p,h],x=eU({inputs:{x:i},backend:n,attrs:{shape:a?[g,c,d]:[g,d,c]}}),w=eU({inputs:{x:o},backend:n,attrs:{shape:b}}),_=n.dataIdMap.get(x.dataId).id,C=n.dataIdMap.get(w.dataId).id,S=a?x.shape[2]:x.shape[1],k=s?w.shape[1]:w.shape[2],E=Math.max(g,y),T=n.makeOutput([E,S,k],x.dtype),I=n.dataIdMap.get(T.dataId).id,P=new Uint8Array(new Int32Array(x.shape).buffer),O=new Uint8Array(new Int32Array(w.shape).buffer);return tU(_,P,x.shape.length,C,O,w.shape.length,a,s,I),n.disposeData(x.dataId),n.disposeData(w.dataId),T.shape=v,T}};function iU(e){let{inputs:{x:t},attrs:{begin:n,size:r},backend:i}=e,[o,a]=lf.parseSliceParams(t,n,r),s=lf.isSliceContinous(t.shape,o,a),l=i.readSync(t.dataId),u=i.makeOutput(a,t.dtype),c=Si.computeStrides(t.shape),p=i.dataIdMap.get(u.dataId);if(s){let e=lf.computeFlatOffset(o,c);return"string"===t.dtype?p.stringBytes=l.slice(e,e+Si.sizeFromShape(a)):i.typedArrayFromHeap(u).set(l.subarray(e,e+Si.sizeFromShape(a))),u}if("string"===t.dtype){let e=GP(l,o,a,t.shape,t.dtype);return p.stringBytes=e,u}let d=i.typedArrayFromHeap(u),h=t.shape.length;if(2===h)!function(e,t,n,r,i){let o=0,a=r[0],s=r[1],l=a+i[0];for(let r=a;r<l;r++){let a=r*t+s;n.set(e.subarray(a,a+i[1]),o),o+=i[1]}}(l,c[0],d,o,a);else if(3===h)!function(e,t,n,r,i,o){let a=0,s=i[0],l=i[1],u=i[2],c=s+o[0],p=l+o[1];for(let i=s;i<c;i++)for(let s=l;s<p;s++){let l=i*t+s*n+u;r.set(e.subarray(l,l+o[2]),a),a+=o[2]}}(l,c[0],c[1],d,o,a);else if(4===h)!function(e,t,n,r,i,o,a){let s=0,l=o[0],u=o[1],c=o[2],p=l+a[0],d=u+a[1],h=c+a[2],f=o[3];for(let o=l;o<p;o++)for(let l=u;l<d;l++)for(let u=c;u<h;u++){let c=o*t+l*n+u*r+f;i.set(e.subarray(c,c+a[3]),s),s+=a[3]}}(l,c[0],c[1],c[2],d,o,a);else{let e=GP(l,o,a,t.shape,t.dtype);d.set(e)}return u}var oU={kernelName:Sr,backendName:"wasm",kernelFunc:iU};var aU,sU={kernelName:pt,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:o,crops:a}=r,s=o.reduce((e,t)=>e*t),l=Rf.getReshaped(i.shape,o,s),u=Rf.getPermuted(l.length,o.length),c=Rf.getReshapedPermuted(i.shape,o,s),p=Rf.getSliceBeginCoords(a,o.length),d=Rf.getSliceSize(c,a,o.length),h=eU({inputs:{x:i},backend:n,attrs:{shape:l}}),f=NB({inputs:{x:h},backend:n,attrs:{perm:u}}),m=iU({inputs:{x:eU({inputs:{x:f},backend:n,attrs:{shape:c}})},backend:n,attrs:{begin:p,size:d}});return n.disposeData(h.dataId),n.disposeData(f.dataId),n.disposeData(h.dataId),m}};var lU={kernelName:dt,backendName:"wasm",setupFunc:function(e){aU=e.wasm.cwrap(dt,null,["number","number","boolean","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{x:i,weights:o}=n,{size:a}=r,s=0!==o.shape.reduce((e,t)=>e*t,1),l=1===i.shape.length?[a]:[i.shape[0],a],u=t.makeOutput(l,o.dtype);function c(e){return t.dataIdMap.get(e.dataId).id}return aU(c(i),a,s,c(o),mB[o.dtype],c(u)),u}},uU=SB(ht);var cU={kernelName:mt,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:n}=e,{s0:r,s1:i}=t,o=n.typedArrayFromHeap(r),a=n.typedArrayFromHeap(i),s=Rf.assertAndGetBroadcastShape(Array.from(o),Array.from(a));return n.makeOutput([s.length],"int32",void 0,new Int32Array(s))}};function pU(e){let{inputs:{x:t},attrs:{dtype:n},backend:r}=e,i=r.makeOutput(t.shape,n),o=r.typedArrayFromHeap(t);return r.typedArrayFromHeap(i).set(o),i}var dU,hU={kernelName:gt,backendName:"wasm",kernelFunc:pU},fU=xB(yt);var mU={kernelName:vt,backendName:"wasm",setupFunc:function(e){dU=e.wasm.cwrap(vt,null,["number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{clipValueMin:o,clipValueMax:a}=r,s=n.dataIdMap.get(i.dataId).id,l=n.makeOutput(i.shape,i.dtype),u=n.dataIdMap.get(l.dataId).id;return dU(s,o,a,u),l}};function gU(e){let{inputs:t,backend:n}=e,r=Si.parseAxisParam(e.attrs.axis,t[0].shape)[0],i=t.map(e=>e.shape);Rf.assertParamsConsistent(i,r);let o=Rf.computeOutShape(t.map(e=>e.shape),r),a=t.filter(e=>Si.sizeFromShape(e.shape)>0);if(1===a.length)return IB({inputs:{x:a[0]},backend:n});let s=n.makeOutput(o,t[0].dtype);if(0===Si.sizeFromShape(o))return s;if("string"===a[0].dtype){let e=a.map(e=>{let t=[-1,Si.sizeFromShape(e.shape.slice(r))];return eU({inputs:{x:e},backend:n,attrs:{shape:t}})}),i=e.map(e=>({vals:n.readSync(e.dataId),shape:e.shape}));o=Rf.computeOutShape(e.map(e=>e.shape),1);let l=1===e[0].shape[0],u=II(i,o,t[0].dtype,l),c=Rf.computeOutShape(a.map(e=>e.shape),r);return s.shape=c,n.dataIdMap.get(s.dataId).stringBytes=Rf.fromStringArrayToUint8(u),e.forEach(e=>n.disposeData(e.dataId)),s}let l=Si.sizeFromShape(a[0].shape.slice(0,r)),u=0,c=a.map(e=>{let t=Si.sizeFromShape(e.shape.slice(r));return u+=t,t}),p=a.map(e=>n.typedArrayFromHeap(e)),d=n.typedArrayFromHeap(s);for(let e=0;e<l;e++){let t=e*u;for(let n=0;n<p.length;n++){let r=c[n],i=e*r,o=p[n].subarray(i,i+r);d.set(o,t),t+=r}}return s}var yU,vU={kernelName:wt,backendName:"wasm",kernelFunc:gU};var bU,xU={kernelName:_t,backendName:"wasm",setupFunc:function(e){yU=e.wasm.cwrap(_t,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{x:i,filter:o}=t,a=r.dataIdMap.get(i.dataId).id,s=r.dataIdMap.get(o.dataId).id,{strides:l,dilations:u,pad:c,dimRoundingMode:p,dataFormat:d}=n,h=Rf.convertConv2DDataFormat(d),f=Rf.computeConv2DInfo(i.shape,o.shape,l,u,c,p,!1,h),m=f.filterHeight,g=f.filterWidth,y=f.padInfo.top,v=f.padInfo.right,b=f.padInfo.bottom,x=f.padInfo.left,w=f.dilationHeight,_=f.dilationWidth,C=f.strideHeight,S=f.strideWidth,k=f.inChannels,E=f.outChannels,T="SAME"===f.padInfo.type?1:0;if("channelsLast"!==f.dataFormat)throw new Error(`wasm backend Conv2D does not support dataFormat:'${f.dataFormat}'. Please use 'channelsLast'.`);let I=r.makeOutput(f.outShape,"float32"),P=r.dataIdMap.get(I.dataId).id;return yU(a,i.shape[0],i.shape[1],i.shape[2],s,m,g,y,v,b,x,T,w,_,C,S,k,E,P),I}};var wU,_U={kernelName:St,backendName:"wasm",setupFunc:function(e){bU=e.wasm.cwrap(St,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{dy:i,filter:o}=n,{strides:a,pad:s,dataFormat:l,dimRoundingMode:u,inputShape:c}=r,p=Rf.convertConv2DDataFormat(l),d=Rf.computeConv2DInfo(c,o.shape,a,1,s,u,!1,p),{batchSize:h,filterHeight:f,filterWidth:m,inChannels:g,inHeight:y,inWidth:v,outChannels:b,outHeight:x,outWidth:w,strideHeight:_,strideWidth:C}=d,S=f-1-d.padInfo.top,k=m-1-d.padInfo.left,E="channelsLast"===d.dataFormat,T=Si.computeStrides(d.inShape),I=Si.computeStrides(i.shape),[P,O,N]=Si.computeStrides(o.shape),R=T[0],A=E?T[1]:T[2],D=E?T[2]:1,V=E?1:T[1],M=I[0],F=E?I[1]:I[2],L=E?I[2]:1,z=E?1:I[1],j=t.makeOutput(d.inShape,"float32"),q=t.dataIdMap.get(j.dataId).id,$=t.dataIdMap.get(i.dataId).id,B=t.dataIdMap.get(o.dataId).id;return bU($,B,h,f,m,y,v,g,x,w,b,_,C,S,k,P,O,N,R,A,D,V,M,F,L,z,q),j}};var CU,SU={kernelName:kt,backendName:"wasm",setupFunc:function(e){wU=e.wasm.cwrap(kt,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:a,pad:s,dilations:l}=r;if("float32"!==i.dtype)throw new Error("Tensor x must have dtype float32, got "+i.dtype);if("float32"!==o.dtype)throw new Error("Tensor filter must have dtype float32, got "+o.dtype);let u=Rf.computeConv3DInfo(i.shape,o.shape,a,l,s),c=n.makeOutput(u.outShape,i.dtype);return wU(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(c.dataId).id,u.batchSize,u.inDepth,u.inHeight,u.inWidth,u.inChannels,u.outDepth,u.outHeight,u.outWidth,u.outChannels,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.filterDepth,u.filterHeight,u.filterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left),c}};var kU,EU={kernelName:Et,backendName:"wasm",setupFunc:function(e){CU=e.wasm.cwrap(Et,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,dy:o}=t,{strides:a,pad:s,filterShape:l}=r;if("float32"!==i.dtype)throw new Error("Tensor dy must have dtype float32, got "+i.dtype);if("float32"!==o.dtype)throw new Error("Tensor filter must have dtype float32, got "+o.dtype);let u=Rf.computeConv3DInfo(i.shape,l,a,1,s),c=n.makeOutput(u.filterShape,o.dtype);return CU(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(c.dataId).id,u.batchSize,u.inDepth,u.inHeight,u.inWidth,u.inChannels,u.outDepth,u.outHeight,u.outWidth,u.outChannels,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.filterDepth,u.filterHeight,u.filterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left),c}};var TU,IU,PU={kernelName:Tt,backendName:"wasm",setupFunc:function(e){kU=e.wasm.cwrap(Tt,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,filter:o}=t,{pad:a,strides:s,inputShape:l}=r;if("float32"!==i.dtype)throw new Error("Tensor dy must have dtype float32, got "+i.dtype);if("float32"!==o.dtype)throw new Error("Tensor filter must have dtype float32, got "+o.dtype);let u=Rf.computeConv3DInfo(l,o.shape,s,1,a),c=n.makeOutput(u.inShape,i.dtype);return kU(n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(c.dataId).id,u.batchSize,u.inDepth,u.inHeight,u.inWidth,u.inChannels,u.outDepth,u.outHeight,u.outWidth,u.outChannels,u.strideDepth,u.strideHeight,u.strideWidth,u.dilationDepth,u.dilationHeight,u.dilationWidth,u.filterDepth,u.filterHeight,u.filterWidth,u.padInfo.front,u.padInfo.top,u.padInfo.left),c}},OU=xB(It),NU=xB(Pt);!function(e){e[e.bilinear=0]="bilinear",e[e.nearest=1]="nearest"}(TU||(TU={}));var RU,AU={kernelName:Rt,backendName:"wasm",setupFunc:function(e){IU=e.wasm.cwrap(Rt,null,["number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){let t,{backend:n,inputs:r,attrs:i}=e,{method:o,extrapolationValue:a,cropSize:s}=i,{image:l,boxes:u,boxInd:c}=r,p=u.shape[0],[d,h]=s,f=[p,d,h,l.shape[3]],m=n.dataIdMap.get(l.dataId);"float32"!==l.dtype&&(t=pU({backend:n,inputs:{x:l},attrs:{dtype:"float32"}}),m=n.dataIdMap.get(t.dataId));let g=m.id,y=n.dataIdMap.get(u.dataId).id,v=n.dataIdMap.get(c.dataId).id,b=n.makeOutput(f,"float32"),x=n.dataIdMap.get(b.dataId).id,w=new Uint8Array(new Int32Array(l.shape).buffer);return IU(g,y,v,p,w,d,h,TU[o],a,x),null!=t&&n.disposeData(t.dataId),b}};var DU,VU={kernelName:Ot,backendName:"wasm",setupFunc:function(e){RU=e.wasm.cwrap(Ot,null,["number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,exclusive:a,reverse:s}=r,l=i.shape.length;Si.assert("float32"===i.dtype||"int32"===i.dtype,()=>`cumprod does not support ${i.dtype} tensors in the WASM backend`);let u=Rf.getAxesPermutation([o],l),c=i;null!==u&&(c=NB({inputs:{x:i},attrs:{perm:u},backend:n}));let p=Rf.getInnerMostAxes(1,l)[0];Rf.assertAxesAreInnerMostDims("cumprod",[p],l);let d=n.makeOutput(c.shape,c.dtype),h=c.shape[p],f=n.dataIdMap.get(c.dataId).id,m=n.dataIdMap.get(d.dataId).id;RU(f,a?1:0,s?1:0,h,m,mB[i.dtype]);let g=d;if(null!==u){g=NB({inputs:{x:d},attrs:{perm:Rf.getUndoAxesPermutation(u)},backend:n}),n.disposeData(c.dataId),n.disposeData(d.dataId)}return g}};var MU,FU={kernelName:Nt,backendName:"wasm",setupFunc:function(e){DU=e.wasm.cwrap(Nt,null,["number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{axis:o,exclusive:a,reverse:s}=r,l=i.shape.length;Si.assert("float32"===i.dtype||"int32"===i.dtype,()=>`cumsum does not support ${i.dtype} tensors in the WASM backend`);let u=Rf.getAxesPermutation([o],l),c=i;null!==u&&(c=NB({inputs:{x:i},attrs:{perm:u},backend:n}));let p=Rf.getInnerMostAxes(1,l)[0];Rf.assertAxesAreInnerMostDims("cumsum",[p],l);let d=n.makeOutput(c.shape,c.dtype),h=c.shape[p],f=n.dataIdMap.get(c.dataId).id,m=n.dataIdMap.get(d.dataId).id;DU(f,a?1:0,s?1:0,h,m,mB[i.dtype]);let g=d;if(null!==u){g=NB({inputs:{x:d},attrs:{perm:Rf.getUndoAxesPermutation(u)},backend:n}),n.disposeData(c.dataId),n.disposeData(d.dataId)}return g}};var LU,zU={kernelName:At,backendName:"wasm",setupFunc:function(e){MU=e.wasm.cwrap("DenseBincount",null,["number","array","number","number","boolean","number","number","boolean","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{x:i,weights:o}=n,{size:a,binaryOutput:s}=r,l=0!==o.shape.reduce((e,t)=>e*t,1),u=1===i.shape.length?[a]:[i.shape[0],a],c=t.makeOutput(u,o.dtype);function p(e){return t.dataIdMap.get(e.dataId).id}return MU(p(i),new Uint8Array(new Int32Array(i.shape).buffer),i.shape.length,a,l,p(o),mB[o.dtype],s,p(c)),c}};var jU,qU={kernelName:Dt,backendName:"wasm",setupFunc:function(e){LU=e.wasm.cwrap(Dt,null,["number","number","number","array","number","array","array","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{x:i}=n,{blockSize:o,dataFormat:a}=r,s=i.shape[0],l=("NHWC"===a?i.shape[1]:i.shape[2])*o,u=("NHWC"===a?i.shape[2]:i.shape[3])*o,c=("NHWC"===a?i.shape[3]:i.shape[1])/(o*o),p="NHWC"===a?[s,l,u,c]:[s,c,l,u],d=t.makeOutput(p,"float32"),h=t.dataIdMap.get(i.dataId).id,f=new Uint8Array(new Int32Array(Si.computeStrides(i.shape)).buffer),m=new Uint8Array(new Int32Array(p).buffer),g=new Uint8Array(new Int32Array(Si.computeStrides(p)).buffer),y=t.dataIdMap.get(d.dataId).id;return LU(h,o,"NHWC"===a?1:0,f,i.shape.length-1,m,g,p.length,y),d}};var $U,BU={kernelName:Vt,backendName:"wasm",setupFunc:function(e){jU=e.wasm.cwrap(Vt,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{x:i,filter:o}=t,a=r.dataIdMap.get(i.dataId).id,s=r.dataIdMap.get(o.dataId).id,{strides:l,dilations:u,pad:c,dimRoundingMode:p}=n,d=null==u?[1,1]:u,h=Rf.computeConv2DInfo(i.shape,o.shape,l,d,c,p,!0),f=h.filterHeight,m=h.filterWidth,g=h.padInfo.top,y=h.padInfo.right,v=h.padInfo.bottom,b=h.padInfo.left,x=h.dilationHeight,w=h.dilationWidth,_=h.strideHeight,C=h.strideWidth,S=h.inChannels,k=h.outChannels,E="SAME"===h.padInfo.type?1:0;if("channelsLast"!==h.dataFormat)throw new Error(`wasm backend DepthwiseConv2dNative does not support dataFormat:'${h.dataFormat}'. Please use 'channelsLast'.`);let T=r.makeOutput(h.outShape,"float32"),I=r.dataIdMap.get(T.dataId).id;return jU(a,i.shape[0],i.shape[1],i.shape[2],s,f,m,g,y,v,b,E,x,w,_,C,S,k,I),T}};var UU,WU={kernelName:Lt,backendName:"wasm",setupFunc:function(e){$U=e.wasm.cwrap("Diag",null,["number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n}=e,{x:r}=t,i=Si.sizeFromShape(r.shape),o=n.makeOutput([...r.shape,...r.shape],r.dtype);return $U(n.dataIdMap.get(r.dataId).id,mB[r.dtype],i,n.dataIdMap.get(o.dataId).id),o}};var HU,QU={kernelName:zt,backendName:"wasm",setupFunc:function(e){UU=e.wasm.cwrap(zt,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o}=t,{strides:a,pad:s,dilations:l}=r;if(i.dtype!==o.dtype)throw new Error(`Dilation2D error: x must have the same dtype as filter. Got ${i.dtype} and ${o.dtype}`);let u=Rf.computeDilation2DInfo(i.shape,o.shape,a,s,"NHWC",l),c=n.makeOutput(u.outShape,i.dtype);return UU(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(c.dataId).id,mB[i.dtype],u.batchSize,u.inChannels,u.inHeight,u.inWidth,u.outHeight,u.outWidth,u.strideHeight,u.strideWidth,u.dilationHeight,u.dilationWidth,u.filterHeight,u.filterWidth,u.padInfo.top,u.padInfo.left),c}};var GU,KU={kernelName:qt,backendName:"wasm",setupFunc:function(e){HU=e.wasm.cwrap(qt,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o,dy:a}=t,{strides:s,pad:l,dilations:u}=r;if(i.dtype!==o.dtype||i.dtype!==a.dtype)throw new Error(`Dilation2DBackpropFilter error: x must have the same dtype as filter and dy. Got ${i.dtype}, ${o.dtype}, and ${a.dtype}`);let c=Rf.computeDilation2DInfo(i.shape,o.shape,s,l,"NHWC",u),p=n.makeOutput(o.shape,o.dtype);return HU(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(p.dataId).id,mB[i.dtype],c.batchSize,c.inChannels,c.inHeight,c.inWidth,c.outHeight,c.outWidth,c.strideHeight,c.strideWidth,c.dilationHeight,c.dilationWidth,c.filterHeight,c.filterWidth,c.padInfo.top,c.padInfo.left),p}};var JU,XU={kernelName:jt,backendName:"wasm",setupFunc:function(e){GU=e.wasm.cwrap(jt,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,filter:o,dy:a}=t,{strides:s,pad:l,dilations:u}=r;if(i.dtype!==o.dtype||i.dtype!==a.dtype)throw new Error(`Dilation2DBackpropInput error: x must have the same dtype as filter and dy. Got ${i.dtype}, ${o.dtype}, and ${a.dtype}`);let c=Rf.computeDilation2DInfo(i.shape,o.shape,s,l,"NHWC",u),p=n.makeOutput(i.shape,i.dtype);return GU(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(p.dataId).id,mB[i.dtype],c.batchSize,c.inChannels,c.inHeight,c.inWidth,c.outHeight,c.outWidth,c.strideHeight,c.strideWidth,c.dilationHeight,c.dilationWidth,c.filterHeight,c.filterWidth,c.padInfo.top,c.padInfo.left),p}},YU=xB(Wt);var ZU={kernelName:Ht,backendName:"wasm",setupFunc:function(e){JU=e.wasm.cwrap(Ht,null,["number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n}=e,{dy:r,y:i}=t,o=n.makeOutput(i.shape,"float32"),a=e=>n.dataIdMap.get(e.dataId).id;return JU(a(i),a(r),a(o)),o}},eW=SB(Gt,0,"bool"),tW=xB(Qt),nW=xB(Kt,"float32");function rW(e){let{inputs:t,attrs:n,backend:r}=e,{input:i}=t,{dim:o}=n,a=i.shape.length,s=i.shape.slice(),l=o;return o<0&&(Si.assert(-(a+1)<=o,()=>`Axis must be in the interval [${-(a+1)}, ${a}]`),l=a+o+1),s.splice(l,0,1),eU({inputs:{x:i},backend:r,attrs:{shape:s}})}var iW={kernelName:Jt,backendName:"wasm",kernelFunc:rW},oW=xB(Xt,"float32");function aW(e){let{attrs:{shape:t,value:n,dtype:r},backend:i}=e,o=i.makeOutput(t,r);return i.typedArrayFromHeap(o).fill(n),o}var sW,lW={kernelName:Zt,backendName:"wasm",kernelFunc:aW};var uW,cW={kernelName:en,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:n}=e,{image:r}=t,i=n.makeOutput(r.shape,r.dtype),o=n.dataIdMap.get(r.dataId).id,a=n.dataIdMap.get(i.dataId).id,[s,l,u,c]=r.shape;return sW(o,s,l,u,c,a),i},setupFunc:function(e){sW=e.wasm.cwrap(en,null,["number","number","number","number","number","number"])}},pW=xB(tn),dW=SB(nn);var hW,fW={kernelName:rn,backendName:"wasm",setupFunc:function(e){uW=e.wasm.cwrap(rn,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{varianceEpsilon:i}=r,{x:o,mean:a,variance:s,offset:l,scale:u}=n,c=t.dataIdMap.get(o.dataId).id,p=t.dataIdMap.get(a.dataId).id,d=t.dataIdMap.get(s.dataId).id,h=null!=l?t.dataIdMap.get(l.dataId).id:0,f=null!=u?t.dataIdMap.get(u.dataId).id:0,m=t.makeOutput(o.shape,o.dtype);if(0===Si.sizeFromShape(o.shape))return m;let g=t.dataIdMap.get(m.dataId).id;return uW(c,p,d,h,f,i,g),m}};var mW,gW={kernelName:ui,backendName:"wasm",setupFunc:function(e){hW=e.wasm.cwrap(ui,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{x:i,filter:o,bias:a,preluActivationWeights:s}=t,{strides:l,pad:u,dilations:c,dataFormat:p,dimRoundingMode:d,activation:h,leakyreluAlpha:f}=n,m=Rf.computeConv2DInfo(i.shape,o.shape,l,c,u,d),g=gB[h];if(null==g)throw new Error(h+" activation not yet supported for FusedConv2D in the wasm backend.");let y=r.dataIdMap.get(i.dataId).id,v=r.dataIdMap.get(o.dataId).id,b=m.outChannels,x=0;if(null!=a){let e=r.dataIdMap.get(a.dataId);if(1!==e.shape.length)throw new Error(`FusedConv2D only supports rank-1 bias but got rank ${e.shape.length}.`);if(e.shape[0]!==b)throw new Error(`FusedConv2D bias shape (${e.shape}) does not match the number of output channels (${b})`);x=e.id}let w=m.filterHeight,_=m.filterWidth,C=m.padInfo.top,S=m.padInfo.right,k=m.padInfo.bottom,E=m.padInfo.left,T=m.dilationHeight,I=m.dilationWidth,P=m.strideHeight,O=m.strideWidth,N=m.inChannels,R="SAME"===m.padInfo.type?1:0,A=m.batchSize,D=m.inHeight,V=m.inWidth;if("NHWC"!==p)throw new Error(`wasm backend FusedConv2D does not support dataFormat:'${p}'. Please use 'NHWC'.`);let M=r.makeOutput(m.outShape,"float32"),F=r.dataIdMap.get(M.dataId).id,L=null==s?0:r.dataIdMap.get(s.dataId).id;return hW(y,A,D,V,v,w,_,x,C,S,k,E,R,T,I,P,O,N,b,g,L,f||0,F),M}};var yW,vW={kernelName:ci,backendName:"wasm",setupFunc:function(e){mW=e.wasm.cwrap(ci,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{x:i,filter:o,bias:a,preluActivationWeights:s}=t,{strides:l,pad:u,dilations:c,dataFormat:p,dimRoundingMode:d,activation:h,leakyreluAlpha:f}=n,m=Rf.computeConv2DInfo(i.shape,o.shape,l,c,u,d,!0),g=gB[h];if(null==g)throw new Error(h+" activation not yet supported for FusedDepthwiseConv2D in the wasm backend.");let y=r.dataIdMap.get(i.dataId).id,v=r.dataIdMap.get(o.dataId).id,b=m.outChannels,x=0;if(null!=a){let e=r.dataIdMap.get(a.dataId);if(1!==e.shape.length)throw new Error(`FusedDepthwiseConv2D only supports rank-1 bias but got rank ${e.shape.length}.`);if(e.shape[0]!==b)throw new Error(`FusedDepthwiseConv2D bias shape (${e.shape}) does not match the number of output channels (${b})`);x=e.id}let w=m.filterHeight,_=m.filterWidth,C=m.padInfo.top,S=m.padInfo.right,k=m.padInfo.bottom,E=m.padInfo.left,T=m.dilationHeight,I=m.dilationWidth,P=m.strideHeight,O=m.strideWidth,N=m.inChannels,R="SAME"===m.padInfo.type?1:0,A=m.batchSize,D=m.inHeight,V=m.inWidth;if("NHWC"!==p)throw new Error(`wasm backend FusedDepthwiseConv2D does not support dataFormat:'${p}'. Please use 'NHWC'.`);let M=r.makeOutput(m.outShape,"float32"),F=r.dataIdMap.get(M.dataId).id,L=null==s?0:r.dataIdMap.get(s.dataId).id;return mW(y,A,D,V,v,w,_,x,C,S,k,E,R,T,I,P,O,N,b,g,L,f||0,F),M}};var bW,xW={kernelName:an,backendName:"wasm",setupFunc:function(e){yW=e.wasm.cwrap(an,null,["number","number","number","number","number","number","array","number"])},kernelFunc:function(e){let{backend:t,inputs:n}=e,{params:r,indices:i}=n,[o,a,s,l]=af.prepareAndValidate(r,i),u=t.makeOutput(o,r.dtype);if(0===a)return u;let c=i.shape,p=c[c.length-1],d=t.dataIdMap.get(r.dataId).id,h=t.dataIdMap.get(i.dataId).id,f=new Uint8Array(new Int32Array(l).buffer),m=t.dataIdMap.get(u.dataId).id;return yW(d,mB[r.dtype],h,a,p,s,f,m),u}};var wW,_W={kernelName:on,backendName:"wasm",setupFunc:function(e){bW=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{x:i,indices:o}=n,{axis:a,batchDims:s}=r,l=Si.parseAxisParam(a,i.shape)[0],u=t.readSync(o.dataId),c=i.shape[l];for(let e=0;e<u.length;++e){let t=u[e];Si.assert(t<=c-1&&t>=0,()=>`GatherV2: the index value ${t} is not in [0, ${c-1}]`)}let p=Rf.segment_util.collectGatherOpShapeInfo(i,o,l,s),d=eU({inputs:{x:i},attrs:{shape:[p.batchSize,p.outerSize,p.dimSize,p.sliceSize]},backend:t}),h=Si.sizeFromShape(o.shape),f=eU({inputs:{x:o},attrs:{shape:[p.batchSize,h/p.batchSize]},backend:t}),m=[p.batchSize,p.outerSize,h/p.batchSize,p.sliceSize],g=t.makeOutput(m,i.dtype);if(0===Si.sizeFromShape(i.shape))return g;let y=d.shape.length-1,v=t.dataIdMap.get(d.dataId).id,b=t.dataIdMap.get(f.dataId).id,x=t.dataIdMap.get(g.dataId).id,w=new Uint8Array(new Int32Array(Si.computeStrides(d.shape)).buffer),_=new Uint8Array(new Int32Array(Si.computeStrides(m)).buffer);return bW(v,mB[i.dtype],w,y,b,p.batchSize,_,x),t.disposeData(d.dataId),t.disposeData(f.dataId),g.shape=p.outputShape,g}},CW=SB(sn,0,"bool"),SW=SB(ln,0,"bool"),kW=xB(dn,"bool"),EW=xB(hn,"bool"),TW=xB(fn,"bool");var IW,PW={kernelName:mn,backendName:"wasm",setupFunc:function(e){wW=e.wasm.cwrap(mn,null,["number","number","number","number"])},kernelFunc:function(e){let{inputs:{x:t},attrs:{alpha:n},backend:r}=e,i=r.dataIdMap.get(t.dataId).id,o=r.makeOutput(t.shape,"float32");if(0!==Si.sizeFromShape(t.shape)){let e=r.dataIdMap.get(o.dataId).id;wW(i,mB[t.dtype],n,e)}return o}},OW=SB(gn,0,"bool"),NW=SB(yn,0,"bool");var RW,AW={kernelName:vn,backendName:"wasm",setupFunc:function(e){IW=e.wasm.cwrap(vn,null,["number","number","number","number"])},kernelFunc:function(e){let{attrs:t,backend:n}=e,{start:r,stop:i,num:o}=t,a=Math.floor(o),s=n.makeOutput([a],"float32");return IW(n.dataIdMap.get(s.dataId).id,r,i,a),s}},DW=xB(bn),VW=xB(xn),MW=SB(wn,0,"bool"),FW=xB(_n),LW=SB(Cn,0,"bool"),zW=SB(Sn,0,"bool");var jW,qW={kernelName:Tn,backendName:"wasm",setupFunc:function(e){RW=e.wasm.cwrap(Tn,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{depthRadius:o,bias:a,alpha:s,beta:l}=r;if("float32"!==i.dtype)throw new Error("LRN error: x must have dtype float32");let u=n.makeOutput(i.shape,i.dtype);return RW(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(u.dataId).id,i.shape[3],o,a,s,l),u}};var $W,BW={kernelName:In,backendName:"wasm",setupFunc:function(e){jW=e.wasm.cwrap(In,null,["number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i,y:o,dy:a}=t,{depthRadius:s,bias:l,alpha:u,beta:c}=r;if("float32"!==i.dtype||"float32"!==o.dtype||"float32"!==a.dtype)throw new Error("LRNGrad error: x, y, and dy must have dtype float32");let p=n.makeOutput(i.shape,i.dtype);return jW(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(a.dataId).id,n.dataIdMap.get(p.dataId).id,a.shape[3],s,l,u,c),p}};var UW,WW={kernelName:On,backendName:"wasm",setupFunc:function(e){$W=e.wasm.cwrap(On,null,["number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{reductionIndices:i,keepDims:o}=r,{x:a}=n,s=t.dataIdMap.get(a.dataId).id,l=a,{transposed:u,axes:c,originalAxes:p,inputWasTransposed:d}=DB(a,i,t);if(d){l=u,s=t.dataIdMap.get(u.dataId).id}let h=l.shape.length;Rf.assertAxesAreInnerMostDims("max",c,h);let[f,m]=Rf.computeOutAndReduceShapes(l.shape,c),g=Si.sizeFromShape(m),y=t.makeOutput(f,a.dtype);if(0!==Si.sizeFromShape(l.shape)){let e=t.dataIdMap.get(y.dataId).id;$W(s,mB[a.dtype],g,e)}if(d&&t.disposeData(u.dataId),o){let e=Rf.expandShapeToKeepDim(y.shape,p);y.shape=e}return y}},HW=SB(Nn);var QW,GW={kernelName:Rn,backendName:"wasm",setupFunc:function(e){UW=e.wasm.cwrap(Rn,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,i=t.x,o=r.dataIdMap.get(i.dataId).id;Si.assert("float32"===i.dtype,()=>`Error in MaxPool: only float32 input is supported. Got ${i.dtype}.`);let{filterSize:a,strides:s,pad:l,dimRoundingMode:u}=n,c=Rf.computePool2DInfo(i.shape,a,s,1,l,u),p=c.filterHeight,d=c.filterWidth,h=c.padInfo.top,f=c.padInfo.right,m=c.padInfo.bottom,g=c.padInfo.left,y=c.dilationHeight,v=c.dilationWidth,b=c.strideHeight,x=c.strideWidth,w=c.inChannels,_=c.outChannels;if("channelsLast"!==c.dataFormat)throw new Error(`wasm backend does not support dataFormat:'${c.dataFormat}'. Please use 'channelsLast'.`);let C=r.makeOutput(c.outShape,"float32"),S=r.dataIdMap.get(C.dataId).id;return UW(o,i.shape[0],i.shape[1],i.shape[2],p,d,h,f,m,g,y,v,b,x,w,_,S),C}};var KW,JW={kernelName:Dn,backendName:"wasm",setupFunc:function(e){QW=e.wasm.cwrap("MaxPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:o,strides:a,pad:s,dimRoundingMode:l,dataFormat:u}=r,c=Rf.computePool3DInfo(i.shape,o,a,1,s,l,u),p=n.makeOutput(c.outShape,i.dtype);return QW(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(p.dataId).id,c.batchSize,c.inChannels,c.inDepth,c.inHeight,c.inWidth,c.outDepth,c.outHeight,c.outWidth,c.strideDepth,c.strideHeight,c.strideWidth,c.dilationDepth,c.dilationHeight,c.dilationWidth,c.effectiveFilterDepth,c.effectiveFilterHeight,c.effectiveFilterWidth,c.padInfo.front,c.padInfo.top,c.padInfo.left),p}};var XW,YW={kernelName:Vn,backendName:"wasm",setupFunc:function(e){KW=e.wasm.cwrap("MaxPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,{filterSize:a,strides:s,pad:l,dimRoundingMode:u}=r,c=Rf.computePool3DInfo(o.shape,a,s,1,l,u),p=n.makeOutput(o.shape,o.dtype);return KW(n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(p.dataId).id,c.batchSize,c.inChannels,c.inDepth,c.inHeight,c.inWidth,c.outDepth,c.outHeight,c.outWidth,c.strideDepth,c.strideHeight,c.strideWidth,c.dilationDepth,c.dilationHeight,c.dilationWidth,c.effectiveFilterDepth,c.effectiveFilterHeight,c.effectiveFilterWidth,c.padInfo.front,c.padInfo.top,c.padInfo.left),p}};var ZW,eH={kernelName:An,backendName:"wasm",setupFunc:function(e){XW=e.wasm.cwrap("MaxPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{dy:i,input:o}=t,{filterSize:a,strides:s,pad:l,dimRoundingMode:u}=r,c=Rf.computePool2DInfo(o.shape,a,s,1,l,u),p=n.makeOutput(o.shape,o.dtype);return XW(n.dataIdMap.get(o.dataId).id,n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(p.dataId).id,c.batchSize,c.inChannels,c.inHeight,c.inWidth,c.outHeight,c.outWidth,c.strideHeight,c.strideWidth,c.dilationHeight,c.dilationWidth,c.effectiveFilterHeight,c.effectiveFilterWidth,c.padInfo.top,c.padInfo.left),p}};var tH,nH={kernelName:Mn,backendName:"wasm",setupFunc:function(e){ZW=e.wasm.cwrap("MaxPoolWithArgmax",null,["number","number","number","number","boolean","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{filterSize:o,strides:a,pad:s,includeBatchInIndex:l}=r;Si.assert(4===i.shape.length,()=>`Error in maxPool: input must be rank 4 but got rank ${i.shape.length}.`);let u=[1,1];Si.assert(Rf.eitherStridesOrDilationsAreOne(a,u),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${a} and dilations '${u}'`);let c=Rf.computePool2DInfo(i.shape,o,a,[1,1],s),p=n.makeOutput(c.outShape,i.dtype),d=n.makeOutput(c.outShape,"int32");return ZW(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(p.dataId).id,n.dataIdMap.get(d.dataId).id,mB[i.dtype],l,c.batchSize,c.inChannels,c.inHeight,c.inWidth,c.outHeight,c.outWidth,c.strideHeight,c.strideWidth,c.dilationHeight,c.dilationWidth,c.effectiveFilterHeight,c.effectiveFilterWidth,c.padInfo.top,c.padInfo.left),[p,d]}};var rH,iH={kernelName:Fn,backendName:"wasm",setupFunc:function(e){tH=e.wasm.cwrap(Fn,null,["number, number, number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{axis:i,keepDims:o}=r,{x:a}=n,s=t.dataIdMap.get(a.dataId).id,l=s,u=a,{transposed:c,axes:p,originalAxes:d,inputWasTransposed:h}=DB(a,i,t),f=p;if(h){let e=t.dataIdMap.get(c.dataId).id;e!==s&&(u=c,l=e,f=Rf.getInnerMostAxes(f.length,u.shape.length))}Rf.assertAxesAreInnerMostDims("mean",f,u.shape.length);let[m,g]=Rf.computeOutAndReduceShapes(u.shape,f),y=Si.sizeFromShape(g),v=u;"float32"!==u.dtype&&(v=pU({backend:t,inputs:{x:u},attrs:{dtype:"float32"}}),l=t.dataIdMap.get(v.dataId).id);let b=t.makeOutput(m,"float32");if(0!==Si.sizeFromShape(u.shape)){let e=t.dataIdMap.get(b.dataId).id;tH(l,y,e)}if(h&&t.disposeData(c.dataId),o){let e=Rf.expandShapeToKeepDim(b.shape,d);b.shape=e}return"float32"!==u.dtype&&t.disposeData(v.dataId),b}};var oH,aH,sH={kernelName:Ln,backendName:"wasm",setupFunc:function(e){rH=e.wasm.cwrap(Ln,null,["number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{axis:i,keepDims:o}=r,{x:a}=n,s=t.dataIdMap.get(a.dataId).id,l=s,u=a,{transposed:c,axes:p,originalAxes:d,inputWasTransposed:h}=DB(a,i,t);if(h){let e=t.dataIdMap.get(c.dataId).id;e!==s&&(u=c,l=e)}let f=u.shape.length;Rf.assertAxesAreInnerMostDims("min",p,f);let[m,g]=Rf.computeOutAndReduceShapes(u.shape,p),y=Si.sizeFromShape(g),v=t.makeOutput(m,u.dtype);if(0!==Si.sizeFromShape(u.shape)){let e=t.dataIdMap.get(v.dataId).id;rH(l,mB[a.dtype],y,e)}if(h&&t.disposeData(c.dataId),o){let e=Rf.expandShapeToKeepDim(v.shape,d);v.shape=e}return v}},lH=SB(zn);!function(e){e[e.reflect=0]="reflect",e[e.symmetric=1]="symmetric"}(oH||(oH={}));var uH,cH={kernelName:jn,backendName:"wasm",kernelFunc:function(e){let{inputs:{x:t},backend:n,attrs:{paddings:r,mode:i}}=e,o=r.map((e,n)=>e[0]+t.shape[n]+e[1]),a=n.dataIdMap.get(t.dataId).id,s=n.makeOutput(o,t.dtype),l=n.dataIdMap.get(s.dataId).id,u=new Uint8Array(new Int32Array(t.shape).buffer),c=r.map(e=>e[0]),p=r.map(e=>e[1]),d=new Uint8Array(new Int32Array(c).buffer),h=new Uint8Array(new Int32Array(p).buffer);return aH(a,u,t.shape.length,mB[t.dtype],d,h,oH[i],l),s},setupFunc:function(e){aH=e.wasm.cwrap(jn,null,["number","array","number","number","array","array","number","number"])}};function pH(e){let{backend:t,inputs:{logits:n},attrs:{dim:r}}=e,i=t.dataIdMap.get(n.dataId).id,o=t.makeOutput(n.shape,n.dtype),a=t.dataIdMap.get(o.dataId).id,s=n.shape[r],l=Si.sizeFromShape(n.shape)/s;return 0===Si.sizeFromShape(o.shape)||uH(i,a,s,l),o}var dH,hH={kernelName:Dr,backendName:"wasm",setupFunc:function(e){uH=e.wasm.cwrap(Dr,null,["number","number","number","number"])},kernelFunc:pH};var fH,mH={kernelName:$n,backendName:"wasm",setupFunc:function(e){dH=e.wasm.cwrap($n,null,["number","number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{logits:i}=t,{numSamples:o,seed:a,normalized:s}=r;if("float32"!==i.dtype)throw new Error("Tensor logits must have dtype float32, got "+i.dtype);let l=s?i:pH({inputs:{logits:i},backend:n,attrs:{dim:i.shape.length-1}}),[u,c]=l.shape,p=n.makeOutput([u,o],"int32");return dH(n.dataIdMap.get(l.dataId).id,u,c,o,a,n.dataIdMap.get(p.dataId).id),s||n.disposeData(l.dataId),p}},gH=SB(qn),yH=SB(Bn),vH=xB(Un);function bH(e,t){let n=new Int32Array(e.wasm.HEAPU8.buffer,t,4),r=n[0],i=n[1],o=n[2],a=n[3];return e.wasm._free(t),{pSelectedIndices:r,selectedSize:i,pSelectedScores:o,pValidOutputs:a}}var xH,wH={kernelName:Hn,backendName:"wasm",setupFunc:function(e){fH=e.wasm.cwrap(Hn,"number",["number","number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{iouThreshold:i,maxOutputSize:o,scoreThreshold:a}=r,{boxes:s,scores:l}=n,u=t.dataIdMap.get(s.dataId).id,c=t.dataIdMap.get(l.dataId).id,p=fH(u,c,o,i,a),{pSelectedIndices:d,selectedSize:h,pSelectedScores:f,pValidOutputs:m}=bH(t,p);return t.wasm._free(f),t.wasm._free(m),t.makeOutput([h],"int32",d)}};var _H,CH={kernelName:Qn,backendName:"wasm",setupFunc:function(e){xH=e.wasm.cwrap(Qn,"number",["number","number","number","number","number","bool"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{iouThreshold:i,maxOutputSize:o,scoreThreshold:a,padToMaxOutputSize:s}=r,{boxes:l,scores:u}=n,c=t.dataIdMap.get(l.dataId).id,p=t.dataIdMap.get(u.dataId).id,d=xH(c,p,o,i,a,s),{pSelectedIndices:h,selectedSize:f,pSelectedScores:m,pValidOutputs:g}=bH(t,d);return t.wasm._free(m),[t.makeOutput([f],"int32",h),t.makeOutput([],"int32",g)]}};var SH,kH={kernelName:Gn,backendName:"wasm",setupFunc:function(e){_H=e.wasm.cwrap(Gn,"number",["number","number","number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{iouThreshold:i,maxOutputSize:o,scoreThreshold:a,softNmsSigma:s}=r,{boxes:l,scores:u}=n,c=t.dataIdMap.get(l.dataId).id,p=t.dataIdMap.get(u.dataId).id,d=_H(c,p,o,i,a,s),{pSelectedIndices:h,selectedSize:f,pSelectedScores:m,pValidOutputs:g}=bH(t,d);return t.wasm._free(g),[t.makeOutput([f],"int32",h),t.makeOutput([f],"float32",m)]}},EH=SB(Wn,0,"bool");var TH={kernelName:Jn,backendName:"wasm",setupFunc:function(e){SH=e.wasm.cwrap(Jn,null,["number","number","number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{indices:i}=t,{dtype:o,depth:a,onValue:s,offValue:l}=r,u=n.makeOutput([...i.shape,a],o),c=n.dataIdMap.get(u.dataId).id,p=n.dataIdMap.get(i.dataId).id;return SH(p,a,s,l,c),u}};var IH={kernelName:Kn,backendName:"wasm",kernelFunc:function(e){let{inputs:{x:t},backend:n}=e,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(1),r}};var PH,OH={kernelName:Xn,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{axis:i}=r;if(1===t.length)return rW({inputs:{input:t[0]},backend:n,attrs:{dim:i}});let o=t[0].shape,a=t[0].dtype;t.forEach(e=>{Si.assertShapesMatch(o,e.shape,"All tensors passed to stack must have matching shapes"),Si.assert(a===e.dtype,()=>"All tensors passed to stack must have matching dtypes")});let s=[],l=gU({inputs:t.map(e=>{let t=rW({inputs:{input:e},backend:n,attrs:{dim:i}});return s.push(t),t}),backend:n,attrs:{axis:i}});return s.forEach(e=>n.disposeData(e.dataId)),l}};var NH,RH={kernelName:Yn,backendName:"wasm",kernelFunc:function(e){let{inputs:{x:t},backend:n,attrs:{paddings:r,constantValue:i}}=e,o=r.map((e,n)=>e[0]+t.shape[n]+e[1]);if(0===Si.sizeFromShape(t.shape))return aW({backend:n,attrs:{shape:o,value:i,dtype:t.dtype}});let a=n.dataIdMap.get(t.dataId).id,s=n.makeOutput(o,t.dtype),l=n.dataIdMap.get(s.dataId).id,u=new Uint8Array(new Int32Array(t.shape).buffer),c=r.map(e=>e[0]),p=r.map(e=>e[1]),d=new Uint8Array(new Int32Array(c).buffer),h=new Uint8Array(new Int32Array(p).buffer);return PH(a,u,t.shape.length,mB[t.dtype],d,h,i,l),s},setupFunc:function(e){PH=e.wasm.cwrap(Yn,null,["number","array","number","number","array","array","number","number"])}},AH=SB(er);var DH,VH={kernelName:tr,backendName:"wasm",setupFunc:function(e){NH=e.wasm.cwrap(tr,null,["number","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n}=e,{x:r,alpha:i}=t,o=n.dataIdMap.get(r.dataId).id,a=n.dataIdMap.get(i.dataId).id,s=o,l=r,u=l;"float32"!==l.dtype&&(u=pU({backend:n,inputs:{x:r},attrs:{dtype:"float32"}}),s=n.dataIdMap.get(u.dataId).id);let c=n.makeOutput(r.shape,"float32"),p=n.dataIdMap.get(c.dataId).id;return NH(s,a,p),"float32"!==l.dtype&&n.disposeData(u.dataId),c}};var MH,FH={kernelName:nr,backendName:"wasm",setupFunc:function(e){DH=e.wasm.cwrap(nr,null,["number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{axis:i,keepDims:o}=r,{x:a}=n,s=t.dataIdMap.get(a.dataId).id,l=s,u=a,{transposed:c,axes:p,originalAxes:d,inputWasTransposed:h}=DB(a,i,t),f=p;if(h){let e=t.dataIdMap.get(c.dataId).id;e!==s&&(u=c,l=e,f=Rf.getInnerMostAxes(f.length,u.shape.length))}Rf.assertAxesAreInnerMostDims("prod",f,u.shape.length);let[m,g]=Rf.computeOutAndReduceShapes(u.shape,f),y=Si.sizeFromShape(g),v=t.makeOutput(m,u.dtype);if(0!==Si.sizeFromShape(u.shape)){let e=t.dataIdMap.get(v.dataId).id;DH(l,y,mB[v.dtype],e)}if(h&&t.disposeData(c.dataId),o){let e=Rf.expandShapeToKeepDim(v.shape,d);v.shape=e}return v}},LH={kernelName:ar,backendName:"wasm",kernelFunc:e=>{let{backend:t,attrs:n}=e,{start:r,stop:i,step:o,dtype:a}=n,s=jP(r,i,o,a),l=t.makeOutput([s.length],a);return t.typedArrayFromHeap(l).set(s),l}},zH=SB(Bt),jH=xB(lr),qH=xB(ur),$H=xB(mr);var BH,UH={kernelName:hr,backendName:"wasm",setupFunc:function(e){MH=e.wasm.cwrap(hr,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let t,{backend:n,inputs:r,attrs:i}=e,{images:o}=r,{alignCorners:a,halfPixelCenters:s,size:l}=i,[u,c]=l,[p,d,h,f]=o.shape,m=[p,u,c,f],g=n.dataIdMap.get(o.dataId);"float32"!==g.dtype&&(t=pU({backend:n,inputs:{x:o},attrs:{dtype:"float32"}}),g=n.dataIdMap.get(t.dataId));let y=g.id,v=n.makeOutput(m,"float32");if(0===Si.sizeFromShape(o.shape))return v;let b=n.dataIdMap.get(v.dataId).id;return MH(y,p,d,h,f,u,c,a?1:0,s?1:0,b),null!=t&&n.disposeData(t.dataId),v}};var WH,HH={kernelName:fr,backendName:"wasm",setupFunc:function(e){BH=e.wasm.cwrap(fr,null,["number","number","number","array","array","boolean"])},kernelFunc:function(e){let t,{inputs:n,backend:r,attrs:i}=e,{images:o,dy:a}=n,{alignCorners:s}=i,l=r.makeOutput(o.shape,"float32"),u=r.dataIdMap.get(o.dataId);return"float32"!==u.dtype&&(t=pU({backend:r,inputs:{x:o},attrs:{dtype:"float32"}}),u=r.dataIdMap.get(t.dataId)),BH(r.dataIdMap.get(o.dataId).id,r.dataIdMap.get(a.dataId).id,r.dataIdMap.get(l.dataId).id,new Uint8Array(new Int32Array(o.shape).buffer),new Uint8Array(new Int32Array(a.shape).buffer),s),null!=t&&r.disposeData(t.dataId),l}};var QH,GH={kernelName:pr,backendName:"wasm",setupFunc:function(e){WH=e.wasm.cwrap(pr,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{images:i}=n,{alignCorners:o,halfPixelCenters:a,size:s}=r,[l,u]=s,[c,p,d,h]=i.shape,f=[c,l,u,h],m=t.makeOutput(f,"float32");if(0===Si.sizeFromShape(i.shape))return m;let g,y=t.dataIdMap.get(i.dataId);"float32"!==y.dtype&&(g=pU({backend:t,inputs:{x:i},attrs:{dtype:"float32"}}),y=t.dataIdMap.get(g.dataId));let v=y.id,b=t.dataIdMap.get(m.dataId).id;return WH(v,c,p,d,h,l,u,o?1:0,a?1:0,b),null!=g&&t.disposeData(g.dataId),m}};var KH,JH={kernelName:dr,backendName:"wasm",setupFunc:function(e){QH=e.wasm.cwrap(dr,null,["number","number","number","array","array","boolean"])},kernelFunc:function(e){let t,{inputs:n,backend:r,attrs:i}=e,{images:o,dy:a}=n,{alignCorners:s}=i,l=r.makeOutput(o.shape,"float32"),u=r.dataIdMap.get(o.dataId);return"float32"!==u.dtype&&(t=pU({backend:r,inputs:{x:o},attrs:{dtype:"float32"}}),u=r.dataIdMap.get(t.dataId)),QH(r.dataIdMap.get(o.dataId).id,r.dataIdMap.get(a.dataId).id,r.dataIdMap.get(l.dataId).id,new Uint8Array(new Int32Array(o.shape).buffer),new Uint8Array(new Int32Array(a.shape).buffer),s),null!=t&&r.disposeData(t.dataId),l}};var XH,YH={kernelName:gr,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{dims:o}=r,a=Si.parseAxisParam(o,i.shape);if(0===i.shape.length)return IB({inputs:{x:i},backend:n});let s=n.makeOutput(i.shape,i.dtype),l=n.dataIdMap.get(i.dataId).id,u=n.dataIdMap.get(s.dataId).id,c=new Uint8Array(new Int32Array(a).buffer),p=new Uint8Array(new Int32Array(i.shape).buffer);KH(l,c,a.length,p,i.shape.length,u);let d=eU({inputs:{x:s},attrs:{shape:i.shape},backend:n});return n.disposeData(s.dataId),d},setupFunc:function(e){KH=e.wasm.cwrap(gr,null,["number","array","number","array","number","number"])}};var ZH,eQ={kernelName:si,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{image:i}=t,{radians:o,fillValue:a,center:s}=r,l=n.makeOutput(i.shape,i.dtype),u=n.dataIdMap.get(i.dataId).id,c=n.dataIdMap.get(l.dataId).id,[p,d,h,f]=i.shape,[m,g]=Rf.getImageCenter(s,d,h),y="number"==typeof a?[a,a,a,0===a?0:255]:[...a,255],v=new Uint8Array(new Int32Array(y).buffer);return XH(u,p,d,h,f,o,m,g,v,y.length,c),l},setupFunc:function(e){XH=e.wasm.cwrap(si,null,["number","number","number","number","number","number","number","number","array","number","number"])}},tQ=xB(yr),nQ=xB(vr);var rQ,iQ={kernelName:br,backendName:"wasm",setupFunc:function(e){ZH=e.wasm.cwrap(br,null,["number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{indices:i,updates:o}=n,{shape:a}=r,s=t.makeOutput(a,o.dtype);if(0===Si.sizeFromShape(a))return s;let{sliceRank:l,numUpdates:u,sliceSize:c,strides:p,outputSize:d}=Op.calculateShapes(o,i,a),h=t.dataIdMap.get(i.dataId).id,f=t.dataIdMap.get(o.dataId).id,m=new Uint8Array(new Int32Array(p).buffer),g=t.dataIdMap.get(s.dataId).id;return ZH(h,f,mB[o.dtype],l,u,c,m,d,g),s}};var oQ,aQ={kernelName:wr,backendName:"wasm",setupFunc:function(e){rQ=e.wasm.cwrap(wr,null,["number","number","number","number","number","number","bool","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{sortedSequence:i,values:o}=t,{side:a}=r;if(i.dtype!==o.dtype)throw new Error(`SearchSorted error: sorted_sequence must have the same dtype as values. Got ${i.dtype} and ${o.dtype}`);let s=n.makeOutput(o.shape,"int32");function l(e){return n.dataIdMap.get(e.dataId).id}return rQ(l(i),l(o),i.shape[0],i.shape[1],o.shape[1],mB[i.dtype],"left"===a,l(s)),s}};var sQ,lQ={kernelName:_r,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:n}=e,{condition:r,t:i,e:o}=t,a=n.dataIdMap.get(r.dataId).id,s=n.dataIdMap.get(i.dataId).id,l=n.dataIdMap.get(o.dataId).id,u=n.makeOutput(i.shape,i.dtype),c=n.dataIdMap.get(u.dataId).id,p=r.shape.length,d=i.shape.length,h=0===p||p>1||1===d?1:Si.sizeFromShape(i.shape.slice(1));return oQ(a,s,l,h,c),u},setupFunc:function(e){oQ=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}},uQ=xB(Cr);var cQ={kernelName:"Sigmoid",backendName:"wasm",setupFunc:function(e){sQ=e.wasm.cwrap(Ir,null,["number","number"])},kernelFunc:function(e){let{backend:t,inputs:{x:n}}=e,r=t.dataIdMap.get(n.dataId).id,i=t.makeOutput(n.shape,n.dtype),o=t.dataIdMap.get(i.dataId).id;return 0===Si.sizeFromShape(i.shape)||sQ(r,o),i}},pQ=xB(Tr),dQ=xB(kr),hQ=xB(Er),fQ=xB(Pr);var mQ,gQ={kernelName:Rr,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,{blockShape:o,paddings:a}=r,s=Si.sizeFromShape(o),l=[[0,0]];l.push(...a);for(let e=1+o.length;e<i.shape.length;++e)l.push([0,0]);let u=RH.kernelFunc({inputs:{x:i},backend:n,attrs:{paddings:l,constantValue:0}}),c=Rf.getReshaped(u.shape,o,s,!1),p=Rf.getPermuted(c.length,o.length,!1),d=Rf.getReshapedPermuted(u.shape,o,s,!1),h=eU({inputs:{x:u},backend:n,attrs:{shape:c}}),f=NB({inputs:{x:h},backend:n,attrs:{perm:p}}),m=eU({inputs:{x:f},backend:n,attrs:{shape:d}});return n.disposeData(u.dataId),n.disposeData(h.dataId),n.disposeData(f.dataId),m}};var yQ,vQ={kernelName:Vr,backendName:"wasm",setupFunc:function(e){mQ=e.wasm.cwrap("SparseFillEmptyRows","number",["number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){let t,{backend:n,inputs:r}=e,{indices:i,values:o,denseShape:a,defaultValue:s}=r,l=i.shape[0],u=i.shape[1],c=n.readSync(a.dataId)[0],p=[l+c,u],d=n.dataIdMap.get(i.dataId).id,h=n.dataIdMap.get(o.dataId).id,f=n.dataIdMap.get(s.dataId).id,m=n.makeOutput(p,i.dtype),g=n.dataIdMap.get(m.dataId).id,y=n.makeOutput(p.slice(0,1),o.dtype),v=n.dataIdMap.get(y.dataId).id,b=n.makeOutput([c],"bool"),x=n.dataIdMap.get(b.dataId).id,w=n.makeOutput([l],i.dtype),_=n.dataIdMap.get(w.dataId).id,C=n.makeOutput([4],"int32"),S=n.dataIdMap.get(C.dataId).id,k=mQ(d,h,mB[o.dtype],l,c,u,f,g,v,x,_,S),E=n.readSync(C.dataId);switch(E[0]){case 1:t=Rf.getSparseFillEmptyRowsIndicesDenseShapeMismatch(E[1]);break;case 2:t=Rf.getSparseFillEmptyRowsNegativeIndexErrorMessage(E[1],E[2]);break;case 3:t=Rf.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(E[1],E[2],E[3]);break;default:t=""}if(n.disposeData(C.dataId),t)throw n.disposeData(m.dataId),n.disposeData(y.dataId),n.disposeData(b.dataId),n.disposeData(w.dataId),new Error(t);let T=m,I=y;return k!==p[0]&&(T=iU({inputs:{x:m},attrs:{begin:0,size:[k,u]},backend:n}),I=iU({inputs:{x:y},attrs:{begin:0,size:k},backend:n}),n.disposeData(m.dataId),n.disposeData(y.dataId)),[T,I,b,w]}};var bQ,xQ={kernelName:Mr,backendName:"wasm",setupFunc:function(e){yQ=e.wasm.cwrap(Mr,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n}=e,{inputIndices:r,inputShape:i,newShape:o}=n;if(2!==r.shape.length)throw new Error("Input indices should be a matrix but received shape\n        "+r.shape);if(1!==i.shape.length)throw new Error("Input shape should be a vector but received shape\n        "+i.shape);if(1!==o.shape.length)throw new Error("Target shape should be a vector but received shape "+o.shape);let a=t.dataIdMap.get(r.dataId).id,s=t.dataIdMap.get(i.dataId).id,l=t.dataIdMap.get(o.dataId).id,u=r.shape[0],c=Si.sizeFromShape(o.shape),p=t.makeOutput([u,c],r.dtype),d=t.dataIdMap.get(p.dataId).id,h=t.makeOutput([c],o.dtype),f=t.dataIdMap.get(h.dataId).id,m=t.makeOutput([3],"int32"),g=t.dataIdMap.get(m.dataId).id;yQ(a,s,l,u,d,f,g);let y,v=t.readSync(m.dataId);switch(v[0]){case 0:y=Rf.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(v[1],v[2]);break;case 1:y=Rf.getSparseReshapeNegativeOutputDimErrorMessage(v[1],v[2]);break;case 2:y=Rf.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage();break;case 3:{let e=Array.from(t.readSync(i.dataId)),n=Array.from(t.readSync(h.dataId));y=Rf.getSparseReshapeInputOutputMultipleErrorMessage(e,n);break}case 4:{let e=Array.from(t.readSync(i.dataId)),n=Array.from(t.readSync(h.dataId));y=Rf.getSparseReshapeInputOutputMismatchErrorMessage(e,n);break}default:y=""}if(t.disposeData(m.dataId),y)throw t.disposeData(p.dataId),t.disposeData(h.dataId),new Error(y);return[p,h]}};function wQ(e){bQ=e.wasm.cwrap("SparseSegmentReduction",null,["number","number","number","number","number","number","number","number","number"])}function _Q(e,t){let{backend:n,inputs:r}=e,{data:i,indices:o,segmentIds:a}=r,s=o.shape[0],l=n.readSync(a.dataId,s-1,s)[0],u=s>0?l+1:0;if(u<0)throw new Error(Rf.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());let c=i.shape.slice();c[0]=u;let p=n.dataIdMap.get(i.dataId).id,d=n.dataIdMap.get(o.dataId).id,h=n.dataIdMap.get(a.dataId).id,f=n.makeOutput(c,i.dtype),m=n.dataIdMap.get(f.dataId).id,g=n.makeOutput([4],"int32"),y=n.dataIdMap.get(g.dataId).id;bQ(p,mB[i.dtype],i.shape[0],d,h,m,y,t,0);let v,b=n.readSync(g.dataId);switch(b[0]){case 0:v=Rf.getSparseSegmentReductionNegativeSegmentIdsErrorMessage();break;case 1:v=Rf.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage();break;case 2:v=Rf.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(b[1],b[2]);break;case 3:v=Rf.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(b[1],b[2],b[3]);break;default:v=""}if(n.disposeData(g.dataId),v)throw n.disposeData(f.dataId),new Error(v);return f}var CQ={kernelName:Fr,backendName:"wasm",setupFunc:wQ,kernelFunc:function(e){return _Q(e,!0)}};var SQ,kQ={kernelName:Lr,backendName:"wasm",setupFunc:wQ,kernelFunc:function(e){return _Q(e,!1)}};var EQ={kernelName:zr,backendName:"wasm",setupFunc:function(e){SQ=e.wasm.cwrap(zr,null,["number","number","number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{sparseIndices:i,sparseValues:o,defaultValue:a}=n,{outputShape:s}=r,l=t.makeOutput(s,a.dtype);if(0===Si.sizeFromShape(s))return l;let{sliceRank:u,numUpdates:c,sliceSize:p,strides:d,outputSize:h}=Rf.calculateShapes(o,i,s),f=t.dataIdMap.get(i.dataId).id,m=t.dataIdMap.get(o.dataId).id,g=t.dataIdMap.get(a.dataId).id,y=new Uint8Array(new Int32Array(d).buffer),v=t.dataIdMap.get(l.dataId).id;return SQ(f,m,o.shape.length,g,mB[a.dtype],u,c,p,y,h,v),l}};var TQ,IQ={kernelName:Ar,backendName:"wasm",kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{x:i}=t,{numOrSizeSplits:o,axis:a}=n,s=Si.parseAxisParam(a,i.shape)[0],l=Rf.prepareSplitSize(i,o,s),u=new Array(i.shape.length).fill(0),c=i.shape.slice();return l.map(e=>{let t=[...c];t[s]=e;let n=iU({inputs:{x:i},attrs:{begin:u,size:t},backend:r});return u[s]+=e,n})}},PQ=xB(Or),OQ=xB(qr),NQ=SB(jr);var RQ,AQ={kernelName:oi,backendName:"wasm",setupFunc:function(e){TQ=e.wasm.cwrap(oi,null,["number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{alpha:i}=r,{x:o}=n,a=t.dataIdMap.get(o.dataId).id,s=t.makeOutput(o.shape,o.dtype),l=t.dataIdMap.get(s.dataId).id;return TQ(a,i,mB[o.dtype],l),s}};var DQ={kernelName:Br,backendName:"wasm",setupFunc:function(e){RQ=e.wasm.cwrap(Br,null,["number","array","number","array","array","array","array","array","number","number"])},kernelFunc:function(e){let t,{backend:n,inputs:r,attrs:i}=e,{x:o}=r,{begin:a,end:s,strides:l,beginMask:u,endMask:c,ellipsisMask:p,newAxisMask:d,shrinkAxisMask:h}=i,{finalShapeSparse:f,finalShape:m,isIdentity:g,sliceDim0:y,isSimpleSlice:v,begin:b,end:x,strides:w}=lf.sliceInfo(o.shape,a,s,l,u,c,p,d,h);if(g)t=eU({inputs:{x:o},backend:n,attrs:{shape:m}});else if(y||v){Si.assert(o.shape.length>=1,()=>"Input must have rank at least 1, got: "+o.shape.length);let e=lf.computeOutShape(b,x,w),r=iU({inputs:{x:o},backend:n,attrs:{begin:b,size:e}});t=eU({inputs:{x:r},backend:n,attrs:{shape:m}}),n.disposeData(r.dataId)}else{let e=n.makeOutput(f,"float32"),r=n.dataIdMap.get(o.dataId).id,i=new Uint8Array(new Int32Array(Si.computeStrides(o.shape)).buffer),a=new Uint8Array(new Int32Array(b).buffer),s=new Uint8Array(new Int32Array(x).buffer),l=new Uint8Array(new Int32Array(w).buffer),u=new Uint8Array(new Int32Array(f).buffer),c=new Uint8Array(new Int32Array(Si.computeStrides(f)).buffer),p=n.dataIdMap.get(e.dataId).id;RQ(r,i,o.shape.length,a,s,l,u,c,f.length,p),t=eU({inputs:{x:e},backend:n,attrs:{shape:m}}),n.disposeData(e.dataId)}return t}};var VQ={kernelName:Ur,backendName:"wasm",kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{data:i,dataSplits:o}=n,{separator:a,nGramWidths:s,leftPad:l,rightPad:u,padWidth:c,preserveShortSequences:p}=r,d=t.readSync(i.dataId),h=t.readSync(o.dataId),[f,m]=cO(d,h,a,s,l,u,c,p),g=t.makeOutput([f.length],"string");t.dataIdMap.get(g.dataId).stringBytes=f;let y=t.makeOutput(o.shape,"int32");return t.typedArrayFromHeap(y).set(m),[g,y]}};var MQ={kernelName:Wr,backendName:"wasm",kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{input:i,delimiter:o}=n,{skipEmpty:a}=r,s=t.readSync(i.dataId),l=t.readSync(o.dataId),[u,c,p]=dO(s,l[0],a),d=c.length,h=t.makeOutput([d,2],"int32");t.typedArrayFromHeap(h).set(u);let f=t.makeOutput([d],"string");t.dataIdMap.get(f.dataId).stringBytes=c;let m=t.makeOutput([2],"int32");return t.typedArrayFromHeap(m).set(p),[h,f,m]}};var FQ,LQ={kernelName:Hr,backendName:"wasm",kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{input:i}=n,{numBuckets:o}=r,a=hO(t.readSync(i.dataId),o),s=t.makeOutput(i.shape,"int32");return t.typedArrayFromHeap(s).set(a),s}},zQ=SB(Qr);var jQ,qQ,$Q,BQ={kernelName:Nr,backendName:"wasm",setupFunc:function(e){FQ=e.wasm.cwrap(Nr,null,["number","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{axis:i,keepDims:o}=r,{x:a}=n,s=t.dataIdMap.get(a.dataId).id,l=s,u=a,{transposed:c,axes:p,originalAxes:d,inputWasTransposed:h}=DB(a,i,t),f=p;if(h){let e=t.dataIdMap.get(c.dataId).id;e!==s&&(u=c,l=e,f=Rf.getInnerMostAxes(f.length,u.shape.length))}Rf.assertAxesAreInnerMostDims("sum",f,u.shape.length);let[m,g]=Rf.computeOutAndReduceShapes(u.shape,f),y=Si.sizeFromShape(g),v=t.makeOutput(m,u.dtype);if(0!==Si.sizeFromShape(u.shape)){let e=t.dataIdMap.get(v.dataId).id;FQ(l,y,mB[v.dtype],e)}if(h&&t.disposeData(c.dataId),o){let e=Rf.expandShapeToKeepDim(v.shape,d);v.shape=e}return v}},UQ=xB(Gr),WQ=xB(Kr);var HQ;var QQ=[bB,wB,_B,CB,EB,TB,MB,FB,jB,qB,$B,BB,UB,WB,HB,GB,ZB,JB,YB,rU,sU,lU,uU,cU,hU,fU,mU,vU,xU,_U,SU,EU,PU,OU,NU,AU,VU,FU,zU,qU,BU,WU,QU,KU,XU,YU,ZU,eW,tW,nW,iW,oW,lW,cW,pW,dW,fW,gW,vW,xW,_W,CW,SW,OB,kW,EW,TW,PW,OW,NW,AW,VW,DW,MW,FW,LW,zW,qW,BW,WW,HW,GW,JW,YW,eH,nH,iH,sH,lH,cH,mH,gH,yH,vH,wH,CH,kH,EH,TH,IH,OH,RH,AH,VH,FH,LH,zH,jH,qH,$H,nU,UH,HH,GH,JH,YH,eQ,tQ,nQ,iQ,aQ,lQ,uQ,cQ,pQ,dQ,hQ,oU,hH,fQ,gQ,vQ,xQ,CQ,kQ,EQ,IQ,PQ,OQ,NQ,AQ,DQ,VQ,MQ,LQ,zQ,BQ,UQ,WQ,{kernelName:xr,backendName:"wasm",setupFunc:function(e){jQ=e.wasm.cwrap(xr,null,["number","number","number","number","number","number","array","number","number","number"])},kernelFunc:function(e){let{backend:t,inputs:n,attrs:r}=e,{tensor:i,indices:o,updates:a}=n,{}=r,s=t.makeOutput(i.shape,i.dtype);if(0===Si.sizeFromShape(i.shape))return s;let{sliceRank:l,numUpdates:u,sliceSize:c,strides:p,outputSize:d}=Op.calculateShapes(a,o,i.shape),h=t.dataIdMap.get(o.dataId).id,f=t.dataIdMap.get(a.dataId).id,m=t.dataIdMap.get(i.dataId).id,g=new Uint8Array(new Int32Array(p).buffer),y=t.dataIdMap.get(s.dataId).id;return jQ(h,f,mB[a.dtype],l,u,c,g,d,y,m),s}},{kernelName:Jr,backendName:"wasm",setupFunc:function(e){qQ=e.wasm.cwrap(Jr,null,["number","array","number","array","number","number"])},kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{x:i}=t,o=n.dataIdMap.get(i.dataId).id,{reps:a}=r,s=new Array(i.shape.length);for(let e=0;e<s.length;e++)s[e]=i.shape[e]*a[e];let l=new Uint8Array(new Int32Array(i.shape).buffer),u=new Uint8Array(new Int32Array(s).buffer),c=n.makeOutput(s,i.dtype),p=n.dataIdMap.get(c.dataId).id;return qQ(o,l,i.shape.length,u,s.length,mB[c.dtype],p),c}},{kernelName:Xr,backendName:"wasm",setupFunc:function(e){$Q=e.wasm.cwrap(Xr,null,["number","array","number","number","number","bool","number","number"])},kernelFunc:({inputs:e,backend:t,attrs:n})=>{let{x:r}=e,{k:i,sorted:o}=n,a=t.dataIdMap.get(r.dataId).id,s=new Uint8Array(new Int32Array(r.shape).buffer),l=r.shape.slice();l[l.length-1]=i;let u=t.makeOutput(l,r.dtype),c=t.dataIdMap.get(u.dataId).id,p=t.makeOutput(l,"int32"),d=t.dataIdMap.get(p.dataId).id;return $Q(a,s,r.shape.length,mB[r.dtype],i,o,c,d),[u,p]}},{kernelName:Yr,backendName:"wasm",setupFunc:function(e){HQ=e.wasm.cwrap(Yr,null,["number","number","bool","number","number","number","number","number","number","array","number","array","number","number","number","number","number"])},kernelFunc:function(e){let t,{backend:n,inputs:r,attrs:i}=e,{image:o,transforms:a}=r,{interpolation:s,fillMode:l,fillValue:u,outputShape:c}=i,[p,d,h,f]=o.shape,[m,g]=null!=c?c:[d,h],y=[p,m,g,f],v=new Uint8Array(new Int32Array(Si.computeStrides(o.shape)).buffer),b=new Uint8Array(new Int32Array(Si.computeStrides(y)).buffer),x=n.makeOutput(y,o.dtype),w=n.dataIdMap.get(x.dataId).id,_=n.dataIdMap.get(o.dataId).id,C=n.dataIdMap.get(a.dataId).id,S="nearest"===s?1:2;switch(l){case"constant":t=1;break;case"reflect":t=2;break;case"wrap":t=3;break;case"nearest":t=4;break;default:t=1}return HQ(_,C,a.shape[0]>1,p,m,g,f,h,d,v,o.shape.length-1,b,y.length-1,S,t,u,w),x}},AB,{kernelName:ei,backendName:"wasm",kernelFunc:function(e){let{inputs:t,attrs:n,backend:r}=e,{axis:i}=n,{x:o}=t,{outputValues:a,outputShape:s,indices:l}=_O(r.readSync(o.dataId),i,o.shape,o.dtype);return[r.makeOutput(s,o.dtype,void 0,a),r.makeOutput([l.length],"int32",void 0,l)]}},{kernelName:ti,backendName:"wasm",kernelFunc:function(e){let{inputs:t,backend:n,attrs:r}=e,{value:i}=t,{axis:o}=r;o<0&&(o+=i.shape.length);let a=i.shape[o],s=i.shape.length,l=new Array(s-1),u=0;for(let e=0;e<s;e++)e!==o&&(l[u++]=i.shape[e]);let c=new Array(a),p=new Array(s).fill(0),d=i.shape.slice();d[o]=1;for(let e=0;e<c.length;e++)p[o]=e,c[e]=iU({inputs:{x:i},attrs:{begin:p,size:d},backend:n});return c.map(({dataId:e,dtype:t})=>({dataId:e,dtype:t,shape:l}))}},{kernelName:ii,backendName:"wasm",kernelFunc:function(e){let{inputs:{x:t},backend:n}=e,r=n.makeOutput(t.shape,t.dtype);return n.typedArrayFromHeap(r).fill(0),r}}];for(let e of QQ)vi(e);var GQ=qe();GQ.registerFlag("WASM_HAS_SIMD_SUPPORT",async()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]))}catch(e){return!1}}),GQ.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",async()=>{if(GQ.get("IS_NODE"))return!1;try{return(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch(e){return!1}});var KQ=x(z()),JQ=x(j()),XQ=x(q()),YQ=KQ.default||KQ,ZQ=XQ.default||XQ,eG=class extends B{constructor(e){super(),this.wasm=e,this.dataIdNextNumber=1,this.wasm.tfjs.initWithThreadsCount(pG),dG=this.wasm.tfjs.getThreadsCount(),this.dataIdMap=new $(this,Ga())}write(e,t,n){let r={id:this.dataIdNextNumber++};return this.move(r,e,t,n,1),r}numDataIds(){return this.dataIdMap.numDataIds()}async time(e){let t=Si.now();return e(),{kernelMs:Si.now()-t}}move(e,t,n,r,i){let o=this.dataIdNextNumber++;if("string"===r){let a=t;return void this.dataIdMap.set(e,{id:o,stringBytes:a,shape:n,dtype:r,memoryOffset:null,refCount:i})}let a=Si.sizeFromShape(n),s=a*Si.bytesPerElement(r),l=this.wasm._malloc(s)>>>0;this.dataIdMap.set(e,{id:o,memoryOffset:l,shape:n,dtype:r,refCount:i}),this.wasm.tfjs.registerTensor(o,a,l),null!=t&&this.wasm.HEAPU8.set(new Uint8Array(t.buffer,t.byteOffset,s),l)}async read(e){return this.readSync(e)}readSync(e,t,n){let{memoryOffset:r,dtype:i,shape:o,stringBytes:a}=this.dataIdMap.get(e);if("string"===i)return null!=t&&0!==t||!(null==n||n>=a.length)?a.slice(t,n):a;t=t||0,n=n||Si.sizeFromShape(o);let s=Si.bytesPerElement(i);return function(e,t){switch(t){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw new Error("Unknown dtype "+t)}}(this.wasm.HEAPU8.slice(r+t*s,r+n*s).buffer,i)}disposeData(e,t=!1){if(this.dataIdMap.has(e)){let n=this.dataIdMap.get(e);if(n.refCount--,!t&&n.refCount>0)return!1;this.wasm._free(n.memoryOffset),this.wasm.tfjs.disposeData(n.id),this.dataIdMap.delete(e)}return!0}refCount(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0}incRef(e){let t=this.dataIdMap.get(e);null!=t&&t.refCount++}floatPrecision(){return 32}getMemoryOffset(e){return this.dataIdMap.get(e).memoryOffset}dispose(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}memory(){return{unreliable:!1}}makeOutput(e,t,n,r){let i;if(null==n)i=this.write(null!=r?r:null,e,t);else{let r=this.dataIdNextNumber++;i={id:r},this.dataIdMap.set(i,{id:r,memoryOffset:n,shape:e,dtype:t,refCount:1});let o=Si.sizeFromShape(e);this.wasm.tfjs.registerTensor(r,o,n)}return{dataId:i,shape:e,dtype:t}}typedArrayFromHeap({shape:e,dtype:t,dataId:n}){let r=this.wasm.HEAPU8.buffer,{memoryOffset:i}=this.dataIdMap.get(n),o=Si.sizeFromShape(e);switch(t){case"float32":return new Float32Array(r,i,o);case"int32":return new Int32Array(r,i,o);case"bool":return new Uint8Array(r,i,o);default:throw new Error("Unknown dtype "+t)}}};function tG(e,t,n){if(null!=iG)return iG;let r="tfjs-backend-wasm.wasm";return e&&t?r="tfjs-backend-wasm-threaded-simd.wasm":e&&(r="tfjs-backend-wasm-simd.wasm"),null!=aG&&null!=aG[r]?aG[r]:n+r}async function nG(){let[e,t]=await Promise.all([qe().getAsync("WASM_HAS_SIMD_SUPPORT"),qe().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);return new Promise((n,r)=>{let i={locateFile:(n,r)=>{if(n.endsWith(".worker.js")){let e=JQ.wasmWorkerContents.replace(/\n/g,"\\n"),t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}return n.endsWith(".wasm")?tG(e,t,null!=oG?oG:r):r+n}};lG&&(i.instantiateWasm=function(e){return(t,n)=>(Si.fetch(e,{credentials:"same-origin"}).then(r=>{r.ok||t.env.a(`failed to load wasm binary file at '${e}'`),r.arrayBuffer().then(e=>{WebAssembly.instantiate(e,t).then(e=>{n(e.instance,e.module)})})}),{})}(tG(e,t,null!=oG?oG:"")));let o,a=!1;i.onAbort=()=>{a||sG||(sG=!0,r({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"}))},t&&e&&null==iG?(i.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+YQ.toString()],{type:"text/javascript"}),o=YQ(i)):o=ZQ(i),o.then(e=>{a=!0,sG=!1;e.tfjs={init:e.cwrap("init",null,[]),initWithThreadsCount:e.cwrap("init_with_threads_count",null,["number"]),getThreadsCount:e.cwrap("get_threads_count","number",[]),registerTensor:e.cwrap("register_tensor",null,["number","number","number"]),disposeData:e.cwrap("dispose_data",null,["number"]),dispose:e.cwrap("dispose",null,[])},n({wasm:e})}).catch(r)})}var rG=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"],iG=null,oG=null,aG={},sG=!1,lG=!1;function uG(e,t=!1){if(Ha("setWasmPath has been deprecated in favor of setWasmPaths and will be removed in a future release."),sG)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPath()` before you call `tf.setBackend()` or `tf.ready()`");iG=e,lG=t}function cG(e,t=!1){if(sG)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if("string"==typeof e)oG=e;else{aG=e;let t=rG.filter(e=>null==aG[e]);if(t.length>0)throw new Error(`There were no entries found for the following binaries: ${t.join(",")}. Please either call setWasmPaths with a map providing a path for each binary, or with a string indicating the directory where all the binaries can be found.`)}lG=t}var pG=-1,dG=-1;function hG(e){pG=e}function fG(){if(-1===dG)throw new Error("WASM backend not initialized.");return dG}var mG="4.7.0";ss("wasm",async()=>{let{wasm:e}=await nG();return new eG(e)},2);var gG={tfjs:"4.7.0","tfjs-core":"4.7.0","tfjs-converter":"4.7.0","tfjs-backend-cpu":"4.7.0","tfjs-backend-webgl":"4.7.0","tfjs-backend-wasm":"4.7.0"};function yG(e,t,n=!1){if(e.beginPath(),t.slice(1).forEach(({x:n,y:r},i)=>{let o=t[i];e.moveTo(o.x,o.y),e.lineTo(n,r)}),n){let n=t[t.length-1],r=t[0];if(!n||!r)return;e.moveTo(n.x,n.y),e.lineTo(r.x,r.y)}e.stroke()}c({},{AnchorPosition:()=>iK,DrawBox:()=>lK,DrawBoxOptions:()=>sK,DrawFaceLandmarks:()=>JK,DrawFaceLandmarksOptions:()=>KK,DrawTextField:()=>aK,DrawTextFieldOptions:()=>oK,drawContour:()=>yG,drawDetections:()=>uK,drawFaceExpressions:()=>HK,drawFaceLandmarks:()=>XK});c({},{computeReshapedDimensions:()=>IG,getCenterPoint:()=>PG,isDimensions:()=>TG,isEven:()=>kG,isFloat:()=>SG,isTensor:()=>bG,isTensor1D:()=>xG,isTensor2D:()=>wG,isTensor3D:()=>_G,isTensor4D:()=>CG,isValidNumber:()=>NG,isValidProbablitiy:()=>RG,range:()=>OG,round:()=>EG});var vG=class{constructor(e,t){if(!NG(e)||!NG(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:t}));this._width=e,this._height=t}get width(){return this._width}get height(){return this._height}reverse(){return new vG(1/this.width,1/this.height)}};function bG(e,t){return e instanceof ro&&e.shape.length===t}function xG(e){return bG(e,1)}function wG(e){return bG(e,2)}function _G(e){return bG(e,3)}function CG(e){return bG(e,4)}function SG(e){return e%1!=0}function kG(e){return e%2==0}function EG(e,t=2){let n=10**t;return Math.floor(e*n)/n}function TG(e){return e&&e.width&&e.height}function IG({width:e,height:t},n){let r=n/Math.max(t,e);return new vG(Math.round(e*r),Math.round(t*r))}function PG(e){return e.reduce((e,t)=>e.add(t),new AG(0,0)).div(new AG(e.length,e.length))}function OG(e,t,n){return Array(e).fill(0).map((e,r)=>t+r*n)}function NG(e){return!!e&&e!==1/0&&e!==-1/0&&!Number.isNaN(e)||0===e}function RG(e){return NG(e)&&e>=0&&e<=1}var AG=class{constructor(e,t){this._x=e,this._y=t}get x(){return this._x}get y(){return this._y}add(e){return new AG(this.x+e.x,this.y+e.y)}sub(e){return new AG(this.x-e.x,this.y-e.y)}mul(e){return new AG(this.x*e.x,this.y*e.y)}div(e){return new AG(this.x/e.x,this.y/e.y)}abs(){return new AG(Math.abs(this.x),Math.abs(this.y))}magnitude(){return Math.sqrt(this.x**2+this.y**2)}floor(){return new AG(Math.floor(this.x),Math.floor(this.y))}},DG=class{static isRect(e){return!!e&&[e.x,e.y,e.width,e.height].every(NG)}static assertIsValidBox(e,t,n=!1){if(!DG.isRect(e))throw new Error(`${t} - invalid box: ${JSON.stringify(e)}, expected object with properties x, y, width, height`);if(!n&&(e.width<0||e.height<0))throw new Error(`${t} - width (${e.width}) and height (${e.height}) must be positive numbers`)}constructor(e,t=!0){let n=e||{},r=[n.left,n.top,n.right,n.bottom].every(NG),i=[n.x,n.y,n.width,n.height].every(NG);if(!i&&!r)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(n));let[o,a,s,l]=i?[n.x,n.y,n.width,n.height]:[n.left,n.top,n.right-n.left,n.bottom-n.top];DG.assertIsValidBox({x:o,y:a,width:s,height:l},"Box.constructor",t),this._x=o,this._y=a,this._width=s,this._height=l}get x(){return this._x}get y(){return this._y}get width(){return this._width}get height(){return this._height}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get area(){return this.width*this.height}get topLeft(){return new AG(this.left,this.top)}get topRight(){return new AG(this.right,this.top)}get bottomLeft(){return new AG(this.left,this.bottom)}get bottomRight(){return new AG(this.right,this.bottom)}round(){let[e,t,n,r]=[this.x,this.y,this.width,this.height].map(e=>Math.round(e));return new DG({x:e,y:t,width:n,height:r})}floor(){let[e,t,n,r]=[this.x,this.y,this.width,this.height].map(e=>Math.floor(e));return new DG({x:e,y:t,width:n,height:r})}toSquare(){let{x:e,y:t,width:n,height:r}=this,i=Math.abs(n-r);return n<r&&(e-=i/2,n+=i),r<n&&(t-=i/2,r+=i),new DG({x:e,y:t,width:n,height:r})}rescale(e){let t=TG(e)?e.width:e,n=TG(e)?e.height:e;return new DG({x:this.x*t,y:this.y*n,width:this.width*t,height:this.height*n})}pad(e,t){let[n,r,i,o]=[this.x-e/2,this.y-t/2,this.width+e,this.height+t];return new DG({x:n,y:r,width:i,height:o})}clipAtImageBorders(e,t){let{x:n,y:r,right:i,bottom:o}=this,a=Math.max(n,0),s=Math.max(r,0),l=i-a,u=o-s,c=Math.min(l,e-a),p=Math.min(u,t-s);return new DG({x:a,y:s,width:c,height:p}).floor()}shift(e,t){let{width:n,height:r}=this,i=this.x+e,o=this.y+t;return new DG({x:i,y:o,width:n,height:r})}padAtBorders(e,t){let n=this.width+1,r=this.height+1,i=n,o=r,a=this.left,s=this.top,l=this.right,u=this.bottom;return l>t&&(i=-l+t+n,l=t),u>e&&(o=-u+e+r,u=e),a<1&&(o=2-a,a=1),s<1&&(o=2-s,s=1),{dy:1,edy:o,dx:1,edx:i,y:s,ey:u,x:a,ex:l,w:n,h:r}}calibrate(e){return new DG({left:this.left+e.left*this.width,top:this.top+e.top*this.height,right:this.right+e.right*this.width,bottom:this.bottom+e.bottom*this.height}).toSquare().round()}},VG=class extends DG{constructor(e,t,n,r,i=!1){super({left:e,top:t,right:n,bottom:r},i)}},MG=class{constructor(e,t,n,r,i){this._imageDims=new vG(i.width,i.height),this._score=e,this._classScore=t,this._className=n,this._box=new DG(r).rescale(this._imageDims)}get score(){return this._score}get classScore(){return this._classScore}get className(){return this._className}get box(){return this._box}get imageDims(){return this._imageDims}get imageWidth(){return this.imageDims.width}get imageHeight(){return this.imageDims.height}get relativeBox(){return new DG(this._box).rescale(this.imageDims.reverse())}forSize(e,t){return new MG(this.score,this.classScore,this.className,this.relativeBox,{width:e,height:t})}},FG=class extends MG{constructor(e,t,n){super(e,e,"",t,n)}forSize(e,t){let{score:n,relativeBox:r,imageDims:i}=super.forSize(e,t);return new FG(n,r,i)}};function LG(e,t,n=!0){let r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left))*Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top));return n?r/(e.area+t.area-r):r/Math.min(e.area,t.area)}function zG(e,t){return Xa(()=>{let[n,r,i]=t,o=ll([...e.shape.slice(0,3),1],n,"float32"),a=ll([...e.shape.slice(0,3),1],r,"float32"),s=ll([...e.shape.slice(0,3),1],i,"float32"),l=Ws([o,a,s],3);return Mu(e,l)})}function jG(e){return 1/(1+Math.exp(-e))}var qG,$G=class extends DG{constructor(e,t,n,r,i=!1){super({x:e,y:t,width:n,height:r},i)}},BG=class{constructor(e,t,n=new AG(0,0)){let{width:r,height:i}=t;this._imgDims=new vG(r,i),this._shift=n,this._positions=e.map(e=>e.mul(new AG(r,i)).add(n))}get shift(){return new AG(this._shift.x,this._shift.y)}get imageWidth(){return this._imgDims.width}get imageHeight(){return this._imgDims.height}get positions(){return this._positions}get relativePositions(){return this._positions.map(e=>e.sub(this._shift).div(new AG(this.imageWidth,this.imageHeight)))}forSize(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})}shiftBy(e,t){return new this.constructor(this.relativePositions,this._imgDims,new AG(e,t))}shiftByPoint(e){return this.shiftBy(e.x,e.y)}align(e,t={}){if(e){let n=e instanceof FG?e.box.floor():new DG(e);return this.shiftBy(n.x,n.y).align(null,t)}let{useDlibAlignment:n,minBoxPadding:r}={useDlibAlignment:!1,minBoxPadding:.2,...t};return n?this.alignDlib():this.alignMinBbox(r)}alignDlib(){let e=this.getRefPointsForAlignment(),[t,n,r]=e,i=e=>r.sub(e).magnitude(),o=(i(t)+i(n))/2,a=Math.floor(o/.45),s=PG(e),l=Math.floor(Math.max(0,s.x-.5*a)),u=Math.floor(Math.max(0,s.y-.43*a));return new $G(l,u,Math.min(a,this.imageWidth+l),Math.min(a,this.imageHeight+u))}alignMinBbox(e){let t=function(e){let t=e.map(e=>e.x),n=e.map(e=>e.y),r=t.reduce((e,t)=>t<e?t:e,1/0),i=n.reduce((e,t)=>t<e?t:e,1/0),o=t.reduce((e,t)=>e<t?t:e,0),a=n.reduce((e,t)=>e<t?t:e,0);return new VG(r,i,o,a)}(this.positions);return t.pad(t.width*e,t.height*e)}getRefPointsForAlignment(){throw new Error("getRefPointsForAlignment not implemented by base class")}},UG=class extends BG{getJawOutline(){return this.positions.slice(0,17)}getLeftEyeBrow(){return this.positions.slice(17,22)}getRightEyeBrow(){return this.positions.slice(22,27)}getNose(){return this.positions.slice(27,36)}getLeftEye(){return this.positions.slice(36,42)}getRightEye(){return this.positions.slice(42,48)}getMouth(){return this.positions.slice(48,68)}getRefPointsForAlignment(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(PG)}};function WG(e){return e.detection instanceof FG}function HG(e,t){return{...e,detection:t}}function QG(){let e=window.fetch;if(!e)throw new Error("fetch - missing fetch implementation for browser environment");return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D:CanvasRenderingContext2D,Image:HTMLImageElement,ImageData:ImageData,Video:HTMLVideoElement,createCanvasElement:()=>document.createElement("canvas"),createImageElement:()=>document.createElement("img"),createVideoElement:()=>document.createElement("video"),fetch:e,readFile:()=>{throw new Error("readFile - filesystem not available for browser environment")}}}function GG(){return"object"==typeof o&&void 0!==r&&null!=r.versions&&null!=r.versions.node}function KG(e){let t="";if(!e&&GG())try{e=u("fs")}catch(e){t=e.toString()}return{readFile:e?t=>new Promise((n,r)=>{e.readFile(t,(e,t)=>e?r(e):n(t))}):()=>{throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)}}}function JG(){let e=o.Canvas||o.HTMLCanvasElement,t=o.Image||o.HTMLImageElement,n=o.Video||o.HTMLVideoElement,r=o.fetch,i=KG();return{Canvas:e||class{},CanvasRenderingContext2D:o.CanvasRenderingContext2D||class{},Image:t||class{},ImageData:o.ImageData||class{},Video:o.HTMLVideoElement||class{},createCanvasElement:()=>{if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},createImageElement:()=>{if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},createVideoElement:()=>{if(n)return new n;throw new Error("createVideoElement - missing Video implementation for nodejs environment")},fetch:r,...i}}function XG(){return"object"==typeof window&&"undefined"!=typeof document&&"undefined"!=typeof HTMLImageElement&&"undefined"!=typeof HTMLCanvasElement&&"undefined"!=typeof HTMLVideoElement&&"undefined"!=typeof ImageData&&"undefined"!=typeof CanvasRenderingContext2D}function YG(e){qG=e}function ZG(){return XG()?YG(QG()):GG()?YG(JG()):null}var eK={getEnv:function(){if(!qG)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return qG},setEnv:YG,initialize:ZG,createBrowserEnv:QG,createFileSystem:KG,createNodejsEnv:JG,monkeyPatch:function(e){if(qG||ZG(),!qG)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");let{Canvas:t=qG.Canvas,Image:n=qG.Image}=e;qG.Canvas=t,qG.Image=n,qG.createCanvasElement=e.createCanvasElement||(()=>new t),qG.createImageElement=e.createImageElement||(()=>new n),qG.ImageData=e.ImageData||qG.ImageData,qG.Video=e.Video||qG.Video,qG.fetch=e.fetch||qG.fetch,qG.readFile=e.readFile||qG.readFile},isBrowser:XG,isNodejs:GG};function tK(e){return eK.isNodejs()||"string"!=typeof e?e:document.getElementById(e)}function nK(e){let{Canvas:t,CanvasRenderingContext2D:n}=eK.getEnv();if(e instanceof n)return e;let r=tK(e);if(!(r instanceof t))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");let i=r.getContext("2d",{willReadFrequently:!0});if(!i)throw new Error("resolveContext2d - canvas 2d context is null");return i}ZG();var rK,iK=((rK=iK||{}).TOP_LEFT="TOP_LEFT",rK.TOP_RIGHT="TOP_RIGHT",rK.BOTTOM_LEFT="BOTTOM_LEFT",rK.BOTTOM_RIGHT="BOTTOM_RIGHT",rK),oK=class{constructor(e={}){let{anchorPosition:t,backgroundColor:n,fontColor:r,fontSize:i,fontStyle:o,padding:a}=e;this.anchorPosition=t||"TOP_LEFT",this.backgroundColor=n||"rgba(0, 0, 0, 0.5)",this.fontColor=r||"rgba(255, 255, 255, 1)",this.fontSize=i||14,this.fontStyle=o||"Georgia",this.padding=a||4}},aK=class{constructor(e,t,n={}){this.text="string"==typeof e?[e]:e instanceof aK?e.text:e,this.anchor=t,this.options=new oK(n)}measureWidth(e){let{padding:t}=this.options;return this.text.map(t=>e.measureText(t).width).reduce((e,t)=>e<t?t:e,0)+2*t}measureHeight(){let{fontSize:e,padding:t}=this.options;return this.text.length*e+2*t}getUpperLeft(e,t){let{anchorPosition:n}=this.options,r="BOTTOM_RIGHT"===n||"TOP_RIGHT"===n,i="BOTTOM_LEFT"===n||"BOTTOM_RIGHT"===n,o=this.measureWidth(e),a=this.measureHeight(),s=r?this.anchor.x-o:this.anchor.x,l=i?this.anchor.y-a:this.anchor.y;if(t){let{width:e,height:n}=t;return{x:Math.max(Math.min(s,e-o),0),y:Math.max(Math.min(l,n-a),0)}}return{x:s,y:l}}draw(e){let t=tK(e),n=nK(t),{backgroundColor:r,fontColor:i,fontSize:o,fontStyle:a,padding:s}=this.options;n.font=`${o}px ${a}`;let l=this.measureWidth(n),u=this.measureHeight();n.fillStyle=r;let c=this.getUpperLeft(n,t);n.fillRect(c.x,c.y,l,u),n.fillStyle=i,this.text.forEach((e,t)=>{let r=s+c.x,i=s+c.y+(t+1)*o;n.fillText(e,r,i)})}},sK=class{constructor(e={}){let{boxColor:t,lineWidth:n,label:r,drawLabelOptions:i}=e;this.boxColor=t||"rgba(0, 0, 255, 1)",this.lineWidth=n||2,this.label=r;let o={anchorPosition:"BOTTOM_LEFT",backgroundColor:this.boxColor};this.drawLabelOptions=new oK({...o,...i})}},lK=class{constructor(e,t={}){this.box=new DG(e),this.options=new sK(t)}draw(e){let t=nK(e),{boxColor:n,lineWidth:r}=this.options,{x:i,y:o,width:a,height:s}=this.box;t.strokeStyle=n,t.lineWidth=r,t.strokeRect(i,o,a,s);let{label:l}=this.options;l&&new aK([l],{x:i-r/2,y:o},this.options.drawLabelOptions).draw(e)}};function uK(e,t){(Array.isArray(t)?t:[t]).forEach(t=>{let n=t instanceof FG?t.score:WG(t)?t.detection.score:void 0,r=t instanceof FG?t.box:WG(t)?t.detection.box:new DG(t),i=n?""+EG(n):void 0;new lK(r,{label:i}).draw(e)})}function cK(e){let{Image:t,Video:n}=eK.getEnv();return e instanceof t&&e.complete||e instanceof n&&e.readyState>=3}function pK(e){let{Image:t,Video:n}=eK.getEnv();return e instanceof t?new vG(e.naturalWidth,e.naturalHeight):e instanceof n?new vG(e.videoWidth,e.videoHeight):new vG(e.width,e.height)}function dK({width:e,height:t}){let{createCanvasElement:n}=eK.getEnv(),r=n();return r.width=e,r.height=t,r}function hK(e,t){let{ImageData:n}=eK.getEnv();if(!(e instanceof n||cK(e)))throw new Error("createCanvasFromMedia - media has not finished loading yet");let{width:r,height:i}=t||pK(e),o=dK({width:r,height:i});return e instanceof n?nK(o).putImageData(e,0,0):nK(o).drawImage(e,0,0,r,i),o}function fK(e){let{Image:t,Canvas:n,Video:r}=eK.getEnv();return e instanceof t||e instanceof n||e instanceof r}var mK=class{constructor(e,t=!1){if(this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],this._inputSize=0,!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach((e,t)=>{if(_G(e))return this._imageTensors[t]=e,void(this._inputDimensions[t]=e.shape);if(CG(e)){let n=e.shape[0];if(1!==n)throw new Error(`NetInput - tf.Tensor4D with batchSize ${n} passed, but not supported in input array`);return this._imageTensors[t]=e,void(this._inputDimensions[t]=e.shape.slice(1))}let n=e instanceof eK.getEnv().Canvas?e:hK(e);this._canvases[t]=n,this._inputDimensions[t]=[n.height,n.width,3]})}get imageTensors(){return this._imageTensors}get canvases(){return this._canvases}get isBatchInput(){return this.batchSize>1||this._treatAsBatchInput}get batchSize(){return this._batchSize}get inputDimensions(){return this._inputDimensions}get inputSize(){return this._inputSize}get reshapedInputDimensions(){return OG(this.batchSize,0,1).map((e,t)=>this.getReshapedInputDimensions(t))}getInput(e){return this.canvases[e]||this.imageTensors[e]}getInputDimensions(e){return this._inputDimensions[e]}getInputHeight(e){return this._inputDimensions[e][0]}getInputWidth(e){return this._inputDimensions[e][1]}getReshapedInputDimensions(e){if("number"!=typeof this.inputSize)throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");return IG({width:this.getInputWidth(e),height:this.getInputHeight(e)},this.inputSize)}toBatchTensor(e,t=!0){return this._inputSize=e,Xa(()=>{let n=OG(this.batchSize,0,1).map(n=>{let r=this.getInput(n);if(r instanceof ro){let n=CG(r)?r:su(r);return n=function(e,t=!1){return Xa(()=>{let[n,r]=e.shape.slice(1);if(n===r)return e;let i=Math.abs(n-r),o=Math.round(i*(t?.5:1)),a=n>r?2:1,s=t=>{let n=e.shape.slice();return n[a]=t,ll(n,0,"float32")},l=s(o),u=i-l.shape[a],c=[t&&u?s(u):null,e,l].filter(e=>!!e).map(e=>ja(e,"float32"));return Ws(c,a)})}(n,t),(n.shape[1]!==e||n.shape[2]!==e)&&(n=uh.resizeBilinear(n,[e,e],!1,!1)),n.as3D(e,e,3)}if(r instanceof eK.getEnv().Canvas)return Kh.fromPixels(function(e,t,n=!1){let{Image:r,Canvas:i}=eK.getEnv();if(!(e instanceof r||e instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");if(t<=0)return dK({width:1,height:1});let o=pK(e),a=t/Math.max(o.height,o.width),s=a*o.width,l=a*o.height,u=dK({width:t,height:t}),c=e instanceof i?e:hK(e),p=Math.abs(s-l)/2,d=n&&s<l?p:0,h=n&&l<s?p:0;return c.width>0&&c.height>0&&nK(u).drawImage(c,d,h,s,l),u}(r,e,t));throw new Error(`toBatchTensor - at batchIdx ${n}, expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have ${r}`)});return xp(n.map(e=>ja(e,"float32"))).as4D(this.batchSize,e,e,3)})}};async function gK(e){if(e instanceof mK)return e;let t=Array.isArray(e)?e:[e];if(!t.length)throw new Error("toNetInput - empty array passed as input");let n=t=>Array.isArray(e)?` at input index ${t}:`:"",r=t.map(tK);return r.forEach((e,r)=>{if(!fK(e)&&!_G(e)&&!CG(e))throw"string"==typeof t[r]?new Error(`toNetInput -${n(r)} string passed, but could not resolve HTMLElement for element id ${t[r]}`):new Error(`toNetInput -${n(r)} expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id`);if(CG(e)){let t=e.shape[0];if(1!==t)throw new Error(`toNetInput -${n(r)} tf.Tensor4D with batchSize ${t} passed, but not supported in input array`)}}),await Promise.all(r.map(e=>fK(e)&&function(e){return new Promise((t,n)=>{function r(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",i),e.currentTarget.removeEventListener("error",r),n(e))}function i(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",i),e.currentTarget.removeEventListener("error",r),t(e))}(e instanceof eK.getEnv().Canvas||cK(e))&&t(null),e.addEventListener("load",i),e.addEventListener("error",r)})}(e))),new mK(r,Array.isArray(e))}async function yK(e,t){let{Canvas:n}=eK.getEnv(),r=e;if(!(e instanceof n)){let t=await gK(e);if(t.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");let i=t.getInput(0);r=i instanceof n?i:await async function(e,t){let n=t||eK.getEnv().createCanvasElement(),[r,i,o]=e.shape.slice(CG(e)?1:0),a=Xa(()=>e.as3D(r,i,o).toInt());return await Kh.toPixels(a,n),a.dispose(),n}(i)}let i=nK(r);return t.map(e=>e instanceof FG?e.forSize(r.width,r.height).box.floor():e).map(e=>e.clipAtImageBorders(r.width,r.height)).map(({x:e,y:t,width:n,height:r})=>{let o=dK({width:n,height:r});return n>0&&r>0&&nK(o).putImageData(i.getImageData(e,t,n,r),0,0),o})}async function vK(e,t){if(!_G(e)&&!CG(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(CG(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return Xa(()=>{let[n,r,i]=e.shape.slice(CG(e)?1:0);return t.map(e=>e instanceof FG?e.forSize(r,n).box:e).map(e=>e.clipAtImageBorders(r,n)).filter(e=>e.width>0&&e.height>0).map(({x:t,y:o,width:a,height:s})=>cp(e.as3D(n,r,i),[o,t,0],[s,a,i]))})}async function bK(e,t){let{fetch:n}=eK.getEnv(),r=await n(e,t);if(!(r.status<400))throw new Error(`failed to fetch: (${r.status}) ${r.statusText}, from url: ${r.url}`);return r}function xK(e,t){let n=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:n};if("/"===e)return{modelBaseUri:"/",manifestUri:"/"+n};let r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"",i=(e=e.replace(r,"")).split("/").filter(e=>e),o=e.endsWith(".json")?i[i.length-1]:n,a=r+(e.endsWith(".json")?i.slice(0,i.length-1):i).join("/");return a=e.startsWith("/")?"/"+a:a,{modelBaseUri:a,manifestUri:"/"===a?"/"+o:`${a}/${o}`}}async function wK(e,t){let{manifestUri:n,modelBaseUri:r}=xK(e,t),i=await async function(e){return(await bK(e)).json()}(n);return Th.loadWeights(i,r)}function _K(e,t,n=!1){let{width:r,height:i}=n?pK(t):t;return e.width=r,e.height=i,{width:r,height:i}}var CK=class{constructor(e){this._params=void 0,this._paramMappings=[],this._name=e}get params(){return this._params}get paramMappings(){return this._paramMappings}get isLoaded(){return!!this.params}getParamFromPath(e){let{obj:t,objProp:n}=this.traversePropertyPath(e);return t[n]}reassignParamFromPath(e,t){let{obj:n,objProp:r}=this.traversePropertyPath(e);n[r].dispose(),n[r]=t}getParamList(){return this._paramMappings.map(({paramPath:e})=>({path:e,tensor:this.getParamFromPath(e)}))}getTrainableParams(){return this.getParamList().filter(e=>e.tensor instanceof oo)}getFrozenParams(){return this.getParamList().filter(e=>!(e.tensor instanceof oo))}variable(){this.getFrozenParams().forEach(({path:e,tensor:t})=>{this.reassignParamFromPath(e,t.variable())})}freeze(){this.getTrainableParams().forEach(({path:e,tensor:t})=>{let n=Bo(t.dataSync());t.dispose(),this.reassignParamFromPath(e,n)})}dispose(e=!0){this.getParamList().forEach(t=>{if(e&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+t.path);t.tensor.dispose()}),this._params=void 0}serializeParams(){return new Float32Array(this.getParamList().map(({tensor:e})=>Array.from(e.dataSync())).reduce((e,t)=>e.concat(t)))}async load(e){e instanceof Float32Array?this.extractWeights(e):await this.loadFromUri(e)}async loadFromUri(e){if(e&&"string"!=typeof e)throw new Error(this._name+".loadFromUri - expected model uri");let t=await wK(e,this.getDefaultModelName());this.loadFromWeightMap(t)}async loadFromDisk(e){if(e&&"string"!=typeof e)throw new Error(this._name+".loadFromDisk - expected model file path");let{readFile:t}=eK.getEnv(),{manifestUri:n,modelBaseUri:r}=xK(e,this.getDefaultModelName()),i=Th.weightsLoaderFactory(e=>Promise.all(e.map(e=>t(e).then(e=>e.buffer)))),o=JSON.parse((await t(n)).toString()),a=await i(o,r);this.loadFromWeightMap(a)}loadFromWeightMap(e){let{paramMappings:t,params:n}=this.extractParamsFromWeightMap(e);this._paramMappings=t,this._params=n}extractWeights(e){let{paramMappings:t,params:n}=this.extractParams(e);this._paramMappings=t,this._params=n}traversePropertyPath(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");let t=e.split("/").reduce((t,n)=>{if(!t.nextObj.hasOwnProperty(n))throw new Error(`traversePropertyPath - object does not have property ${n}, for path ${e}`);return{obj:t.nextObj,objProp:n,nextObj:t.nextObj[n]}},{nextObj:this.params}),{obj:n,objProp:r}=t;if(!(n&&r&&n[r]instanceof ro))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:n,objProp:r}}};function SK(e,t,n){return Xa(()=>{let r=rp(e,t.depthwise_filter,t.pointwise_filter,n,"same");return r=cs(r,t.bias),r})}function kK(e,t,n=!1){return Xa(()=>{let r=Qc(n?cs(fl(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):SK(e,t.conv0,[2,2])),i=SK(r,t.conv1,[1,1]),o=SK(Qc(cs(r,i)),t.conv2,[1,1]);return Qc(cs(r,cs(i,o)))})}function EK(e,t,n=!1,r=!0){return Xa(()=>{let i=Qc(n?cs(fl(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):SK(e,t.conv0,r?[2,2]:[1,1])),o=SK(i,t.conv1,[1,1]),a=SK(Qc(cs(i,o)),t.conv2,[1,1]),s=SK(Qc(cs(i,cs(o,a))),t.conv3,[1,1]);return Qc(cs(i,cs(o,cs(a,s))))})}function TK(e,t,n="same",r=!1){return Xa(()=>{let i=cs(fl(e,t.filters,[1,1],n),t.bias);return r?Qc(i):i})}function IK(e,t){Object.keys(e).forEach(n=>{t.some(e=>e.originalPath===n)||e[n].dispose()})}function PK(e,t){return(n,r,i,o)=>{let a=Tp(e(n*r*i*i),[i,i,n,r]),s=Sp(e(r));return t.push({paramPath:o+"/filters"},{paramPath:o+"/bias"}),{filters:a,bias:s}}}function OK(e,t){return(n,r,i)=>{let o=kp(e(n*r),[n,r]),a=Sp(e(r));return t.push({paramPath:i+"/weights"},{paramPath:i+"/bias"}),{weights:o,bias:a}}}var NK=class{constructor(e,t,n){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=n}};function RK(e,t){return(n,r,i)=>{let o=Tp(e(9*n),[3,3,n,1]),a=Tp(e(n*r),[1,1,n,r]),s=Sp(e(r));return t.push({paramPath:i+"/depthwise_filter"},{paramPath:i+"/pointwise_filter"},{paramPath:i+"/bias"}),new NK(o,a,s)}}function AK(e){return t=>{let n=e(t+"/depthwise_filter",4),r=e(t+"/pointwise_filter",4),i=e(t+"/bias",1);return new NK(n,r,i)}}function DK(e,t){return(n,r,i)=>{let o=e[n];if(!bG(o,r))throw new Error(`expected weightMap[${n}] to be a Tensor${r}D, instead have ${o}`);return t.push({originalPath:n,paramPath:i||n}),o}}function VK(e){let t=e;return{extractWeights:function(e){let n=t.slice(0,e);return t=t.slice(e),n},getRemainingWeights:function(){return t}}}function MK(e,t){let n=PK(e,t),r=RK(e,t);function i(e,t,i,o=!1){return{conv0:o?n(e,t,3,i+"/conv0"):r(e,t,i+"/conv0"),conv1:r(t,t,i+"/conv1"),conv2:r(t,t,i+"/conv2")}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:function(e,t,n,o=!1){let{conv0:a,conv1:s,conv2:l}=i(e,t,n,o);return{conv0:a,conv1:s,conv2:l,conv3:r(t,t,n+"/conv3")}}}}function FK(e){return t=>({filters:e(t+"/filters",4),bias:e(t+"/bias",1)})}function LK(e,t){let n=DK(e,t),r=FK(n),i=AK(n);return{extractDenseBlock3Params:function(e,t=!1){return{conv0:t?r(e+"/conv0"):i(e+"/conv0"),conv1:i(e+"/conv1"),conv2:i(e+"/conv2")}},extractDenseBlock4Params:function(e,t=!1){return{conv0:t?r(e+"/conv0"):i(e+"/conv0"),conv1:i(e+"/conv1"),conv2:i(e+"/conv2"),conv3:i(e+"/conv3")}}}}var zK=class extends CK{constructor(){super("FaceFeatureExtractor")}forwardInput(e){let{params:t}=this;if(!t)throw new Error("FaceFeatureExtractor - load model before inference");return Xa(()=>{let n=EK(zG(ja(e.toBatchTensor(112,!0),"float32"),[122.782,117.001,104.298]).div(255),t.dense0,!0);return n=EK(n,t.dense1),n=EK(n,t.dense2),n=EK(n,t.dense3),n=Bs(n,[7,7],[2,2],"valid"),n})}async forward(e){return this.forwardInput(await gK(e))}getDefaultModelName(){return"face_feature_extractor_model"}extractParamsFromWeightMap(e){return function(e){let t=[],{extractDenseBlock4Params:n}=LK(e,t),r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return IK(e,t),{params:r,paramMappings:t}}(e)}extractParams(e){return function(e){let t=[],{extractWeights:n,getRemainingWeights:r}=VK(e),{extractDenseBlock4Params:i}=MK(n,t),o=i(3,32,"dense0",!0),a=i(32,64,"dense1"),s=i(64,128,"dense2"),l=i(128,256,"dense3");if(0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{paramMappings:t,params:{dense0:o,dense1:a,dense2:s,dense3:l}}}(e)}};function jK(e,t){return Xa(()=>cs(Hs(e,t.weights),t.bias))}function qK(e){let t={},n={};return Object.keys(e).forEach(r=>{(r.startsWith("fc")?n:t)[r]=e[r]}),{featureExtractorMap:t,classifierMap:n}}var $K=class extends CK{constructor(e,t){super(e),this._faceFeatureExtractor=t}get faceFeatureExtractor(){return this._faceFeatureExtractor}runNet(e){let{params:t}=this;if(!t)throw new Error(this._name+" - load model before inference");return Xa(()=>{let n=e instanceof mK?this.faceFeatureExtractor.forwardInput(e):e;return jK(n.as2D(n.shape[0],-1),t.fc)})}dispose(e=!0){this.faceFeatureExtractor.dispose(e),super.dispose(e)}loadClassifierParams(e){let{params:t,paramMappings:n}=this.extractClassifierParams(e);this._params=t,this._paramMappings=n}extractClassifierParams(e){return function(e,t,n){let r=[],{extractWeights:i,getRemainingWeights:o}=VK(e),a=OK(i,r)(t,n,"fc");if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:r,params:{fc:a}}}(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())}extractParamsFromWeightMap(e){let{featureExtractorMap:t,classifierMap:n}=qK(e);return this.faceFeatureExtractor.loadFromWeightMap(t),function(e){let t=[],n=DK(e,t),r={fc:(i="fc",{weights:n(i+"/weights",2),bias:n(i+"/bias",1)})};var i;return IK(e,t),{params:r,paramMappings:t}}(n)}extractParams(e){let t=this.getClassifierChannelsIn(),n=this.getClassifierChannelsOut(),r=n*t+n,i=e.slice(0,e.length-r),o=e.slice(e.length-r);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(o)}},BK=["neutral","happy","sad","angry","fearful","disgusted","surprised"],UK=class{constructor(e){if(this.neutral=0,this.happy=0,this.sad=0,this.angry=0,this.fearful=0,this.disgusted=0,this.surprised=0,7!==e.length)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);BK.forEach((t,n)=>{this[t]=e[n]})}asSortedArray(){return BK.map(e=>({expression:e,probability:this[e]})).sort((e,t)=>t.probability-e.probability)}};function WK(e,t){return{...e,expressions:t}}function HK(e,t,n=.1,r){(Array.isArray(t)?t:[t]).forEach(t=>{let i=t instanceof UK?t:function(e){return e.expressions instanceof UK}(t)?t.expressions:void 0;if(!i)throw new Error("drawFaceExpressions - expected faceExpressions to be FaceExpressions | WithFaceExpressions<{}> or array thereof");let o=i.asSortedArray().filter(e=>e.probability>n),a=WG(t)?t.detection.box.bottomLeft:r||new AG(0,0);new aK(o.map(e=>`${e.expression} (${EG(e.probability)})`),a).draw(e)})}function QK(e){return WG(e)&&e.landmarks instanceof BG&&e.unshiftedLandmarks instanceof BG&&e.alignedRect instanceof FG}function GK(e,t){let{box:n}=e.detection,r=t.shiftBy(n.x,n.y),i=r.align(),{imageDims:o}=e.detection,a=new FG(e.detection.score,i.rescale(o.reverse()),o),s=function(e){let t=e=>180*e/Math.PI,n=(e,t)=>Math.sqrt((e._x-t._x)**2+(e._y-t._y)**2),r={roll:void 0,pitch:void 0,yaw:void 0};if(!e||!e._positions||68!==e._positions.length)return r;let i=e._positions;return r.roll=((e,n)=>{let r=Math.hypot(n._x-e._x,n._y-e._y),i=n._y-e._y,o=Math.asin(i/r),a=t(o);return Math.floor(90-a)*(n._x-e._x<0?-1:1)})(i[27],i[66]),r.pitch=((e,r,i)=>{let o=n(e,i),a={_x:(e._x+i._x)/2,_y:(e._y+i._y)/2},s=n(r,a),l=Math.atan(s/o);return Math.floor(t(l))*(a._y-r._y<0?-1:1)})(i[14],i[30],i[2]),r.yaw=(o=i[14],a=i[33],s=i[2],Math.floor(o._x-a._x)-Math.floor(a._x-s._x)),r;var o,a,s}(t);return{...e,landmarks:r,unshiftedLandmarks:t,alignedRect:a,angle:s}}var KK=class{constructor(e={}){let{drawLines:t=!0,drawPoints:n=!0,lineWidth:r,lineColor:i,pointSize:o,pointColor:a}=e;this.drawLines=t,this.drawPoints=n,this.lineWidth=r||1,this.pointSize=o||2,this.lineColor=i||"rgba(0, 255, 255, 1)",this.pointColor=a||"rgba(255, 0, 255, 1)"}},JK=class{constructor(e,t={}){this.faceLandmarks=e,this.options=new KK(t)}draw(e){let t=nK(e),{drawLines:n,drawPoints:r,lineWidth:i,lineColor:o,pointSize:a,pointColor:s}=this.options;if(n&&this.faceLandmarks instanceof UG&&(t.strokeStyle=o,t.lineWidth=i,yG(t,this.faceLandmarks.getJawOutline()),yG(t,this.faceLandmarks.getLeftEyeBrow()),yG(t,this.faceLandmarks.getRightEyeBrow()),yG(t,this.faceLandmarks.getNose()),yG(t,this.faceLandmarks.getLeftEye(),!0),yG(t,this.faceLandmarks.getRightEye(),!0),yG(t,this.faceLandmarks.getMouth(),!0)),r){t.strokeStyle=s,t.fillStyle=s;let e=e=>{t.beginPath(),t.arc(e.x,e.y,a,0,2*Math.PI),t.fill()};this.faceLandmarks.positions.forEach(e)}}};function XK(e,t){(Array.isArray(t)?t:[t]).forEach(t=>{let n=t instanceof BG?t:QK(t)?t.landmarks:void 0;if(!n)throw new Error("drawFaceLandmarks - expected faceExpressions to be FaceLandmarks | WithFaceLandmarks<WithFaceDetection<{}>> or array thereof");new JK(n).draw(e)})}function YK(e,t){let n=[],{extractWeights:r,getRemainingWeights:i}=VK(e),{extractConvParams:o,extractSeparableConvParams:a,extractReductionBlockParams:s,extractMainBlockParams:l}=function(e,t){let n=PK(e,t),r=RK(e,t);return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:function(e,t,i){return{separable_conv0:r(e,t,i+"/separable_conv0"),separable_conv1:r(t,t,i+"/separable_conv1"),expansion_conv:n(e,t,1,i+"/expansion_conv")}},extractMainBlockParams:function(e,t){return{separable_conv0:r(e,e,t+"/separable_conv0"),separable_conv1:r(e,e,t+"/separable_conv1"),separable_conv2:r(e,e,t+"/separable_conv2")}}}}(r,n),u={conv_in:o(3,32,3,"entry_flow/conv_in"),reduction_block_0:s(32,64,"entry_flow/reduction_block_0"),reduction_block_1:s(64,128,"entry_flow/reduction_block_1")},c={};OG(t,0,1).forEach(e=>{c["main_block_"+e]=l(128,"middle_flow/main_block_"+e)});let p={reduction_block:s(128,256,"exit_flow/reduction_block"),separable_conv:a(256,512,"exit_flow/separable_conv")};if(0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:n,params:{entry_flow:u,middle_flow:c,exit_flow:p}}}function ZK(e,t){let n=[],{extractConvParams:r,extractSeparableConvParams:i,extractReductionBlockParams:o,extractMainBlockParams:a}=function(e,t){let n=DK(e,t),r=FK(n),i=AK(n);return{extractConvParams:r,extractSeparableConvParams:i,extractReductionBlockParams:function(e){return{separable_conv0:i(e+"/separable_conv0"),separable_conv1:i(e+"/separable_conv1"),expansion_conv:r(e+"/expansion_conv")}},extractMainBlockParams:function(e){return{separable_conv0:i(e+"/separable_conv0"),separable_conv1:i(e+"/separable_conv1"),separable_conv2:i(e+"/separable_conv2")}}}}(e,n),s={conv_in:r("entry_flow/conv_in"),reduction_block_0:o("entry_flow/reduction_block_0"),reduction_block_1:o("entry_flow/reduction_block_1")},l={};OG(t,0,1).forEach(e=>{l["main_block_"+e]=a("middle_flow/main_block_"+e)});let u={reduction_block:o("exit_flow/reduction_block"),separable_conv:i("exit_flow/separable_conv")};return IK(e,n),{params:{entry_flow:s,middle_flow:l,exit_flow:u},paramMappings:n}}function eJ(e,t,n){return cs(fl(e,t.filters,n,"same"),t.bias)}function tJ(e,t,n=!0){let r=n?Qc(e):e;return r=SK(r,t.separable_conv0,[1,1]),r=SK(Qc(r),t.separable_conv1,[1,1]),r=Hu(r,[3,3],[2,2],"same"),r=cs(r,eJ(e,t.expansion_conv,[2,2])),r}var nJ=class extends CK{constructor(e){super("TinyXception"),this._numMainBlocks=e}forwardInput(e){let{params:t}=this;if(!t)throw new Error("TinyXception - load model before inference");return Xa(()=>{let n=zG(ja(e.toBatchTensor(112,!0),"float32"),[122.782,117.001,104.298]).div(255),r=Qc(eJ(n,t.entry_flow.conv_in,[2,2]));return r=tJ(r,t.entry_flow.reduction_block_0,!1),r=tJ(r,t.entry_flow.reduction_block_1),OG(this._numMainBlocks,0,1).forEach(e=>{r=function(e,t){let n=SK(Qc(e),t.separable_conv0,[1,1]);return n=SK(Qc(n),t.separable_conv1,[1,1]),n=SK(Qc(n),t.separable_conv2,[1,1]),n=cs(n,e),n}(r,t.middle_flow["main_block_"+e])}),r=tJ(r,t.exit_flow.reduction_block),r=Qc(SK(r,t.exit_flow.separable_conv,[1,1])),r})}async forward(e){return this.forwardInput(await gK(e))}getDefaultModelName(){return"tiny_xception_model"}extractParamsFromWeightMap(e){return ZK(e,this._numMainBlocks)}extractParams(e){return YK(e,this._numMainBlocks)}};var rJ,iJ=((rJ=iJ||{}).FEMALE="female",rJ.MALE="male",rJ),oJ=class extends $K{postProcess(e,t,n){let r=n.map(({width:e,height:n})=>{let r=t/Math.max(n,e);return{width:e*r,height:n*r}}),i=r.length;return Xa(()=>{let n=(e,t)=>xp([ll([68],e,"float32"),ll([68],t,"float32")],1).as2D(1,136).as1D(),o=(e,t)=>{let{width:n,height:i}=r[e];return t(n,i)?Math.abs(n-i)/2:0};return e.mul(ll([i,136],t,"float32")).sub(xp(Array.from(Array(i),(e,t)=>n((e=>o(e,(e,t)=>e<t))(t),(e=>o(e,(e,t)=>t<e))(t))))).div(xp(Array.from(Array(i),(e,t)=>n(r[t].width,r[t].height))))})}forwardInput(e){return Xa(()=>{let t=this.runNet(e);return this.postProcess(t,e.inputSize,e.inputDimensions.map(([e,t])=>({height:e,width:t})))})}async forward(e){return this.forwardInput(await gK(e))}async detectLandmarks(e){let t=await gK(e),n=Xa(()=>zp(this.forwardInput(t))),r=await Promise.all(n.map(async(e,n)=>{let r=Array.from(e.dataSync()),i=r.filter((e,t)=>kG(t)),o=r.filter((e,t)=>!kG(t));return new UG(Array(68).fill(0).map((e,t)=>new AG(i[t],o[t])),{height:t.getInputHeight(n),width:t.getInputWidth(n)})}));return n.forEach(e=>e.dispose()),t.isBatchInput?r:r[0]}getClassifierChannelsOut(){return 136}},aJ=class extends oJ{constructor(e=new zK){super("FaceLandmark68Net",e)}getDefaultModelName(){return"face_landmark_68_model"}getClassifierChannelsIn(){return 256}};var sJ=class extends CK{constructor(){super("TinyFaceFeatureExtractor")}forwardInput(e){let{params:t}=this;if(!t)throw new Error("TinyFaceFeatureExtractor - load model before inference");return Xa(()=>{let n=kK(zG(ja(e.toBatchTensor(112,!0),"float32"),[122.782,117.001,104.298]).div(255),t.dense0,!0);return n=kK(n,t.dense1),n=kK(n,t.dense2),n=Bs(n,[14,14],[2,2],"valid"),n})}async forward(e){return this.forwardInput(await gK(e))}getDefaultModelName(){return"face_feature_extractor_tiny_model"}extractParamsFromWeightMap(e){return function(e){let t=[],{extractDenseBlock3Params:n}=LK(e,t),r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return IK(e,t),{params:r,paramMappings:t}}(e)}extractParams(e){return function(e){let t=[],{extractWeights:n,getRemainingWeights:r}=VK(e),{extractDenseBlock3Params:i}=MK(n,t),o=i(3,32,"dense0",!0),a=i(32,64,"dense1"),s=i(64,128,"dense2");if(0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{paramMappings:t,params:{dense0:o,dense1:a,dense2:s}}}(e)}};function lJ(e,t,n,r,i="same"){let{filters:o,bias:a}=t.conv,s=fl(e,o,n,i);return s=cs(s,a),s=function(e,t){return cs(hs(e,t.weights),t.biases)}(s,t.scale),r?Qc(s):s}function uJ(e,t){return lJ(e,t,[1,1],!1)}function cJ(e,t){return lJ(e,t,[2,2],!0,"valid")}function pJ(e,t){function n(n,r,i,o){let a=function(t,n,r){let i=e(t),o=i.length/(n*r*r);if(SG(o))throw new Error(`depth has to be an integer: ${o}, weights.length: ${i.length}, numFilters: ${n}, filterSize: ${r}`);return Xa(()=>Wp(Tp(i,[n,o,r,r]),[2,3,1,0]))}(n,r,i),s=Sp(e(r));return t.push({paramPath:o+"/filters"},{paramPath:o+"/bias"}),{filters:a,bias:s}}function r(r,i,o,a){return{conv:n(r,i,o,a+"/conv"),scale:function(n,r){let i=Sp(e(n)),o=Sp(e(n));return t.push({paramPath:r+"/weights"},{paramPath:r+"/biases"}),{weights:i,biases:o}}(i,a+"/scale")}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e,t,n,i,o=!1){return{conv1:r((o?.5:1)*e,t,n,i+"/conv1"),conv2:r(e,t,n,i+"/conv2")}}}}function dJ(e,t){let n=DK(e,t);function r(e){return{conv:{filters:n(e+"/conv/filters",4),bias:n(e+"/conv/bias",1)},scale:function(e){return{weights:n(e+"/scale/weights",1),biases:n(e+"/scale/biases",1)}}(e)}}return{extractConvLayerParams:r,extractResidualLayerParams:function(e){return{conv1:r(e+"/conv1"),conv2:r(e+"/conv2")}}}}function hJ(e,t){let n=function(e,t){return lJ(e,t,[1,1],!0)}(e,t.conv1);return n=uJ(n,t.conv2),n=cs(n,e),n=Qc(n),n}function fJ(e,t){let n=cJ(e,t.conv1);n=uJ(n,t.conv2);let r=Bs(e,2,2,"valid"),i=Xu(r.shape),o=r.shape[3]!==n.shape[3];if(r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2]){let e=[...n.shape];e[1]=1;let t=Xu(e);n=Ws([n,t],1);let r=[...n.shape];r[2]=1;let i=Xu(r);n=Ws([n,i],2)}return r=o?Ws([r,i],3):r,n=cs(r,n),n=Qc(n),n}var mJ=class extends CK{constructor(){super("FaceRecognitionNet")}forwardInput(e){let{params:t}=this;if(!t)throw new Error("FaceRecognitionNet - load model before inference");return Xa(()=>{let n=cJ(zG(ja(e.toBatchTensor(150,!0),"float32"),[122.782,117.001,104.298]).div(255),t.conv32_down);n=Hu(n,3,2,"valid"),n=hJ(n,t.conv32_1),n=hJ(n,t.conv32_2),n=hJ(n,t.conv32_3),n=fJ(n,t.conv64_down),n=hJ(n,t.conv64_1),n=hJ(n,t.conv64_2),n=hJ(n,t.conv64_3),n=fJ(n,t.conv128_down),n=hJ(n,t.conv128_1),n=hJ(n,t.conv128_2),n=fJ(n,t.conv256_down),n=hJ(n,t.conv256_1),n=hJ(n,t.conv256_2),n=fJ(n,t.conv256_down_out);let r=n.mean([1,2]);return Hs(r,t.fc)})}async forward(e){return this.forwardInput(await gK(e))}async computeFaceDescriptor(e){var t;if(null!=(t=null==e?void 0:e.shape)&&t.some(e=>e<=0))return new Float32Array(128);let n=await gK(e),r=Xa(()=>zp(this.forwardInput(n))),i=await Promise.all(r.map(e=>e.data()));return r.forEach(e=>e.dispose()),n.isBatchInput?i:i[0]}getDefaultModelName(){return"face_recognition_model"}extractParamsFromWeightMap(e){return function(e){let t=[],{extractConvLayerParams:n,extractResidualLayerParams:r}=dJ(e,t),i=n("conv32_down"),o=r("conv32_1"),a=r("conv32_2"),s=r("conv32_3"),l=r("conv64_down"),u=r("conv64_1"),c=r("conv64_2"),p=r("conv64_3"),d=r("conv128_down"),h=r("conv128_1"),f=r("conv128_2"),m=r("conv256_down"),g=r("conv256_1"),y=r("conv256_2"),v=r("conv256_down_out"),{fc:b}=e;if(t.push({originalPath:"fc",paramPath:"fc"}),!wG(b))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+b);let x={conv32_down:i,conv32_1:o,conv32_2:a,conv32_3:s,conv64_down:l,conv64_1:u,conv64_2:c,conv64_3:p,conv128_down:d,conv128_1:h,conv128_2:f,conv256_down:m,conv256_1:g,conv256_2:y,conv256_down_out:v,fc:b};return IK(e,t),{params:x,paramMappings:t}}(e)}extractParams(e){return function(e){let{extractWeights:t,getRemainingWeights:n}=VK(e),r=[],{extractConvLayerParams:i,extractResidualLayerParams:o}=pJ(t,r),a=i(4704,32,7,"conv32_down"),s=o(9216,32,3,"conv32_1"),l=o(9216,32,3,"conv32_2"),u=o(9216,32,3,"conv32_3"),c=o(36864,64,3,"conv64_down",!0),p=o(36864,64,3,"conv64_1"),d=o(36864,64,3,"conv64_2"),h=o(36864,64,3,"conv64_3"),f=o(147456,128,3,"conv128_down",!0),m=o(147456,128,3,"conv128_1"),g=o(147456,128,3,"conv128_2"),y=o(589824,256,3,"conv256_down",!0),v=o(589824,256,3,"conv256_1"),b=o(589824,256,3,"conv256_2"),x=o(589824,256,3,"conv256_down_out"),w=Xa(()=>Wp(kp(t(32768),[128,256]),[1,0]));if(r.push({paramPath:"fc"}),0!==n().length)throw new Error("weights remaing after extract: "+n().length);return{params:{conv32_down:a,conv32_1:s,conv32_2:l,conv32_3:u,conv64_down:c,conv64_1:p,conv64_2:d,conv64_3:h,conv128_down:f,conv128_1:m,conv128_2:g,conv256_down:y,conv256_1:v,conv256_2:b,conv256_down_out:x,fc:w},paramMappings:r}}(e)}};function gJ(e,t){return{...e,descriptor:t}}function yJ(e,t){return{...e,age:t}}function vJ(e,t,n){return{...e,gender:t,genderProbability:n}}function bJ(e,t){function n(n,r,i,o,a){let s=Tp(e(n*r*i*i),[i,i,n,r]),l=Sp(e(r));return t.push({paramPath:o+"/filters"},{paramPath:`${o}/${a?"batch_norm_offset":"bias"}`}),{filters:s,bias:l}}function r(e,t,r,i){let{filters:o,bias:a}=n(e,t,r,i,!0);return{filters:o,batch_norm_offset:a}}function i(n,i,o){return{depthwise_conv:function(n,r){let i=Tp(e(9*n),[3,3,n,1]),o=Sp(e(n)),a=Sp(e(n)),s=Sp(e(n)),l=Sp(e(n));return t.push({paramPath:r+"/filters"},{paramPath:r+"/batch_norm_scale"},{paramPath:r+"/batch_norm_offset"},{paramPath:r+"/batch_norm_mean"},{paramPath:r+"/batch_norm_variance"}),{filters:i,batch_norm_scale:o,batch_norm_offset:a,batch_norm_mean:s,batch_norm_variance:l}}(n,o+"/depthwise_conv"),pointwise_conv:r(n,i,1,o+"/pointwise_conv")}}return{extractMobilenetV1Params:function(){return{conv_0:r(3,32,3,"mobilenetv1/conv_0"),conv_1:i(32,64,"mobilenetv1/conv_1"),conv_2:i(64,128,"mobilenetv1/conv_2"),conv_3:i(128,128,"mobilenetv1/conv_3"),conv_4:i(128,256,"mobilenetv1/conv_4"),conv_5:i(256,256,"mobilenetv1/conv_5"),conv_6:i(256,512,"mobilenetv1/conv_6"),conv_7:i(512,512,"mobilenetv1/conv_7"),conv_8:i(512,512,"mobilenetv1/conv_8"),conv_9:i(512,512,"mobilenetv1/conv_9"),conv_10:i(512,512,"mobilenetv1/conv_10"),conv_11:i(512,512,"mobilenetv1/conv_11"),conv_12:i(512,1024,"mobilenetv1/conv_12"),conv_13:i(1024,1024,"mobilenetv1/conv_13")}},extractPredictionLayerParams:function(){return{conv_0:r(1024,256,1,"prediction_layer/conv_0"),conv_1:r(256,512,3,"prediction_layer/conv_1"),conv_2:r(512,128,1,"prediction_layer/conv_2"),conv_3:r(128,256,3,"prediction_layer/conv_3"),conv_4:r(256,128,1,"prediction_layer/conv_4"),conv_5:r(128,256,3,"prediction_layer/conv_5"),conv_6:r(256,64,1,"prediction_layer/conv_6"),conv_7:r(64,128,3,"prediction_layer/conv_7"),box_predictor_0:{box_encoding_predictor:n(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),class_predictor:n(512,9,1,"prediction_layer/box_predictor_0/class_predictor")},box_predictor_1:{box_encoding_predictor:n(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),class_predictor:n(1024,18,1,"prediction_layer/box_predictor_1/class_predictor")},box_predictor_2:{box_encoding_predictor:n(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),class_predictor:n(512,18,1,"prediction_layer/box_predictor_2/class_predictor")},box_predictor_3:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_3/class_predictor")},box_predictor_4:{box_encoding_predictor:n(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),class_predictor:n(256,18,1,"prediction_layer/box_predictor_4/class_predictor")},box_predictor_5:{box_encoding_predictor:n(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),class_predictor:n(128,18,1,"prediction_layer/box_predictor_5/class_predictor")}}}}}function xJ(e){let t=[],{extractMobilenetV1Params:n,extractPredictionLayerParams:r}=function(e,t){let n=DK(e,t);function r(e,t,r){return{filters:n(`${e}/Conv2d_${t}_pointwise/weights`,4,r+"/filters"),batch_norm_offset:n(`${e}/Conv2d_${t}_pointwise/convolution_bn_offset`,1,r+"/batch_norm_offset")}}function i(e){let t="mobilenetv1/conv_"+e,i=`MobilenetV1/Conv2d_${e}_depthwise`,o=t+"/depthwise_conv",a=t+"/pointwise_conv";return{depthwise_conv:{filters:n(i+"/depthwise_weights",4,o+"/filters"),batch_norm_scale:n(i+"/BatchNorm/gamma",1,o+"/batch_norm_scale"),batch_norm_offset:n(i+"/BatchNorm/beta",1,o+"/batch_norm_offset"),batch_norm_mean:n(i+"/BatchNorm/moving_mean",1,o+"/batch_norm_mean"),batch_norm_variance:n(i+"/BatchNorm/moving_variance",1,o+"/batch_norm_variance")},pointwise_conv:r("MobilenetV1",e,a)}}function o(e,t){return{filters:n(e+"/weights",4,t+"/filters"),bias:n(e+"/biases",1,t+"/bias")}}function a(e){return{box_encoding_predictor:o(`Prediction/BoxPredictor_${e}/BoxEncodingPredictor`,`prediction_layer/box_predictor_${e}/box_encoding_predictor`),class_predictor:o(`Prediction/BoxPredictor_${e}/ClassPredictor`,`prediction_layer/box_predictor_${e}/class_predictor`)}}return{extractMobilenetV1Params:function(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:i(1),conv_2:i(2),conv_3:i(3),conv_4:i(4),conv_5:i(5),conv_6:i(6),conv_7:i(7),conv_8:i(8),conv_9:i(9),conv_10:i(10),conv_11:i(11),conv_12:i(12),conv_13:i(13)}},extractPredictionLayerParams:function(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:a(0),box_predictor_1:a(1),box_predictor_2:a(2),box_predictor_3:a(3),box_predictor_4:a(4),box_predictor_5:a(5)}}}}(e,t),i=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!_G(i))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+i);let o={mobilenetv1:n(),prediction_layer:r(),output_layer:{extra_dim:i}};return IK(e,t),{params:o,paramMappings:t}}function wJ(e,t,n){return Xa(()=>{let r=fl(e,t.filters,n,"same");return r=cs(r,t.batch_norm_offset),ul(r,0,6)})}function _J(e,t){return Xa(()=>{let n,r=wJ(e,t.conv_0,[2,2]);if([t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13].forEach((e,t)=>{let i=t+1,o=function(e){return[2,4,6,12].some(t=>t===e)?[2,2]:[1,1]}(i);r=function(e,t,n){return Xa(()=>{let r=Tl(e,t.filters,n,"same");return r=Zs(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,.0010000000474974513),ul(r,0,6)})}(r,e.depthwise_conv,o),r=wJ(r,e.pointwise_conv,[1,1]),11===i&&(n=r)}),null===n)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}})}function CJ(e,t,n){let r=e.arraySync(),i=Math.min(r[t][0],r[t][2]),o=Math.min(r[t][1],r[t][3]),a=Math.max(r[t][0],r[t][2]),s=Math.max(r[t][1],r[t][3]),l=Math.min(r[n][0],r[n][2]),u=Math.min(r[n][1],r[n][3]),c=Math.max(r[n][0],r[n][2]),p=Math.max(r[n][1],r[n][3]),d=(a-i)*(s-o),h=(c-l)*(p-u);if(d<=0||h<=0)return 0;let f=Math.max(i,l),m=Math.max(o,u),g=Math.min(a,c),y=Math.min(s,p),v=Math.max(g-f,0)*Math.max(y-m,0);return v/(d+h-v)}function SJ(e,t){let{sizes:n,centers:r}=function(e){let t=zp(Wp(e,[1,0])),n=[Mu(t[2],t[0]),Mu(t[3],t[1])];return{sizes:n,centers:[cs(t[0],ds(n[0],2)),cs(t[1],ds(n[1],2))]}}(e),i=zp(Wp(t,[1,0])),o=ds(hs(au(ds(i[2],5)),n[0]),2),a=cs(hs(ds(i[0],10),n[0]),r[0]),s=ds(hs(au(ds(i[3],5)),n[1]),2),l=cs(hs(ds(i[1],10),n[1]),r[1]);return Wp(xp([Mu(a,o),Mu(l,s),cs(a,o),cs(l,s)]),[1,0])}function kJ(e,t){return Xa(()=>{let n=e.shape[0];return{boxPredictionEncoding:$s(TK(e,t.box_encoding_predictor),[n,-1,1,4]),classPrediction:$s(TK(e,t.class_predictor),[n,-1,3])}})}var EJ=class{constructor({minConfidence:e,maxResults:t}={}){if(this._name="SsdMobilenetv1Options",this._minConfidence=e||.5,this._maxResults=t||100,"number"!=typeof this._minConfidence||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if("number"!=typeof this._maxResults)throw new Error(this._name+" - expected maxResults to be a number")}get minConfidence(){return this._minConfidence}get maxResults(){return this._maxResults}},TJ=class extends CK{constructor(){super("SsdMobilenetv1")}forwardInput(e){let{params:t}=this;if(!t)throw new Error("SsdMobilenetv1 - load model before inference");return Xa(()=>{let n=ja(e.toBatchTensor(512,!1),"float32"),r=_J(Mu(ds(n,127.5),1),t.mobilenetv1),{boxPredictions:i,classPredictions:o}=function(e,t,n){return Xa(()=>{let r=wJ(e,n.conv_0,[1,1]),i=wJ(r,n.conv_1,[2,2]),o=wJ(i,n.conv_2,[1,1]),a=wJ(o,n.conv_3,[2,2]),s=wJ(a,n.conv_4,[1,1]),l=wJ(s,n.conv_5,[2,2]),u=wJ(l,n.conv_6,[1,1]),c=wJ(u,n.conv_7,[2,2]),p=kJ(t,n.box_predictor_0),d=kJ(e,n.box_predictor_1),h=kJ(i,n.box_predictor_2),f=kJ(a,n.box_predictor_3),m=kJ(l,n.box_predictor_4),g=kJ(c,n.box_predictor_5);return{boxPredictions:Ws([p.boxPredictionEncoding,d.boxPredictionEncoding,h.boxPredictionEncoding,f.boxPredictionEncoding,m.boxPredictionEncoding,g.boxPredictionEncoding],1),classPredictions:Ws([p.classPrediction,d.classPrediction,h.classPrediction,f.classPrediction,m.classPrediction,g.classPrediction],1)}})}(r.out,r.conv11,t.prediction_layer);return function(e,t,n){return Xa(()=>{let r=e.shape[0],i=SJ($s(uu(n.extra_dim,[r,1,1]),[-1,4]),$s(e,[-1,4]));i=$s(i,[r,i.shape[0]/r,4]);let o=Qs(Gs(t,[0,0,1],[-1,-1,-1])),a=Gs(o,[0,0,0],[-1,-1,1]);return a=$s(a,[r,a.shape[1]]),{boxes:zp(i),scores:zp(a)}})}(i,o,t.output_layer)})}async forward(e){return this.forwardInput(await gK(e))}async locateFaces(e,t={}){let{maxResults:n,minConfidence:r}=new EJ(t),i=await gK(e),{boxes:o,scores:a}=this.forwardInput(i),s=o[0],l=a[0];for(let e=1;e<o.length;e++)o[e].dispose(),a[e].dispose();let u=Array.from(l.dataSync()),c=function(e,t,n,r,i){let o=e.shape[0],a=Math.min(n,o),s=t.map((e,t)=>({score:e,boxIndex:t})).filter(e=>e.score>i).sort((e,t)=>t.score-e.score),l=e=>e<=r?1:0,u=[];return s.forEach(t=>{if(u.length>=a)return;let n=t.score;for(let n=u.length-1;n>=0;--n){let r=CJ(e,t.boxIndex,u[n]);if(0!==r&&(t.score*=l(r),t.score<=i))break}n===t.score&&u.push(t.boxIndex)}),u}(s,u,n,.5,r),p=i.getReshapedInputDimensions(0),d=i.inputSize,h=d/p.width,f=d/p.height,m=s.arraySync(),g=c.map(e=>{let[t,n]=[Math.max(0,m[e][0]),Math.min(1,m[e][2])].map(e=>e*f),[r,o]=[Math.max(0,m[e][1]),Math.min(1,m[e][3])].map(e=>e*h);return new FG(u[e],new $G(r,t,o-r,n-t),{height:i.getInputHeight(0),width:i.getInputWidth(0)})});return s.dispose(),l.dispose(),g}getDefaultModelName(){return"ssd_mobilenetv1_model"}extractParamsFromWeightMap(e){return xJ(e)}extractParams(e){return function(e){let t=[],{extractWeights:n,getRemainingWeights:r}=VK(e),{extractMobilenetV1Params:i,extractPredictionLayerParams:o}=bJ(n,t),a=i(),s=o(),l={extra_dim:Ep(n(20472),[1,5118,4])};if(t.push({paramPath:"output_layer/extra_dim"}),0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{mobilenetv1:a,prediction_layer:s,output_layer:l},paramMappings:t}}(e)}};var IJ=[new AG(.738768,.874946),new AG(2.42204,2.65704),new AG(4.30971,7.04493),new AG(10.246,4.59428),new AG(12.6868,11.8741)],PJ=[new AG(1.603231,2.094468),new AG(6.041143,7.080126),new AG(2.882459,3.518061),new AG(4.266906,5.178857),new AG(9.041765,10.66308)],OJ=[117.001,114.697,97.404],NJ=e=>"number"==typeof e;function RJ(e){return Xa(()=>{let t=hs(e,eu(.10000000149011612));return cs(Qc(Mu(e,t)),t)})}function AJ(e,t){return Xa(()=>{let n=cc(e,[[0,0],[1,1],[1,1],[0,0]]);return n=fl(n,t.conv.filters,[1,1],"valid"),n=Mu(n,t.bn.sub),n=hs(n,t.bn.truediv),n=cs(n,t.conv.bias),RJ(n)})}function DJ(e,t){return Xa(()=>{let n=cc(e,[[0,0],[1,1],[1,1],[0,0]]);return n=rp(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),n=cs(n,t.bias),RJ(n)})}function VJ(e,t){let n=PK(e,t);let r=RK(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:function(r,i,o){return{conv:n(r,i,3,o+"/conv"),bn:function(n,r){let i=Sp(e(n)),o=Sp(e(n));return t.push({paramPath:r+"/sub"},{paramPath:r+"/truediv"}),{sub:i,truediv:o}}(i,o+"/bn")}},extractSeparableConvParams:r}}function MJ(e,t){let n=DK(e,t);function r(e){return{filters:n(e+"/filters",4),bias:n(e+"/bias",1)}}return{extractConvParams:r,extractConvWithBatchNormParams:function(e){return{conv:r(e+"/conv"),bn:function(e){return{sub:n(e+"/sub",1),truediv:n(e+"/truediv",1)}}(e+"/bn")}},extractSeparableConvParams:AK(n)}}var FJ=class{constructor({inputSize:e,scoreThreshold:t}={}){if(this._name="TinyYolov2Options",this._inputSize=e||416,this._scoreThreshold=t||.5,"number"!=typeof this._inputSize||this._inputSize%32!=0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if("number"!=typeof this._scoreThreshold||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}get inputSize(){return this._inputSize}get scoreThreshold(){return this._scoreThreshold}},LJ=class extends CK{constructor(e){super("TinyYolov2"),function(e){if(!e)throw new Error("invalid config: "+e);if("boolean"!=typeof e.withSeparableConvs)throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!NJ(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(e=>"string"==typeof e))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(e=>e||{}).every(e=>NJ(e.x)&&NJ(e.y)))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||3!==e.meanRgb.length||!e.meanRgb.every(NJ)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}(e),this._config=e}get config(){return this._config}get withClassScores(){return this.config.withClassScores||this.config.classes.length>1}get boxEncodingSize(){return 5+(this.withClassScores?this.config.classes.length:0)}runTinyYolov2(e,t){let n=AJ(e,t.conv0);return n=Hu(n,[2,2],[2,2],"same"),n=AJ(n,t.conv1),n=Hu(n,[2,2],[2,2],"same"),n=AJ(n,t.conv2),n=Hu(n,[2,2],[2,2],"same"),n=AJ(n,t.conv3),n=Hu(n,[2,2],[2,2],"same"),n=AJ(n,t.conv4),n=Hu(n,[2,2],[2,2],"same"),n=AJ(n,t.conv5),n=Hu(n,[2,2],[1,1],"same"),n=AJ(n,t.conv6),n=AJ(n,t.conv7),TK(n,t.conv8,"valid",!1)}runMobilenet(e,t){let n=this.config.isFirstLayerConv2d?RJ(TK(e,t.conv0,"valid",!1)):DJ(e,t.conv0);return n=Hu(n,[2,2],[2,2],"same"),n=DJ(n,t.conv1),n=Hu(n,[2,2],[2,2],"same"),n=DJ(n,t.conv2),n=Hu(n,[2,2],[2,2],"same"),n=DJ(n,t.conv3),n=Hu(n,[2,2],[2,2],"same"),n=DJ(n,t.conv4),n=Hu(n,[2,2],[2,2],"same"),n=DJ(n,t.conv5),n=Hu(n,[2,2],[1,1],"same"),n=t.conv6?DJ(n,t.conv6):n,n=t.conv7?DJ(n,t.conv7):n,TK(n,t.conv8,"valid",!1)}forwardInput(e,t){let{params:n}=this;if(!n)throw new Error("TinyYolov2 - load model before inference");return Xa(()=>{let r=ja(e.toBatchTensor(t,!1),"float32");return r=this.config.meanRgb?zG(r,this.config.meanRgb):r,r=r.div(255),this.config.withSeparableConvs?this.runMobilenet(r,n):this.runTinyYolov2(r,n)})}async forward(e,t){return this.forwardInput(await gK(e),t)}async detect(e,t={}){let{inputSize:n,scoreThreshold:r}=new FJ(t),i=await gK(e),o=await this.forwardInput(i,n),a=Xa(()=>zp(o)[0].expandDims()),s={width:i.getInputWidth(0),height:i.getInputHeight(0)},l=await this.extractBoxes(a,i.getReshapedInputDimensions(0),r);o.dispose(),a.dispose();let u=l.map(e=>e.box),c=l.map(e=>e.score),p=l.map(e=>e.classScore),d=l.map(e=>this.config.classes[e.label]);return function(e,t,n,r=!0){let i=t.map((e,t)=>({score:e,boxIndex:t})).sort((e,t)=>e.score-t.score).map(e=>e.boxIndex),o=[];for(;i.length>0;){let t=i.pop();o.push(t);let a=i,s=[];for(let n=0;n<a.length;n++){let i=a[n],o=e[t],l=e[i];s.push(LG(o,l,r))}i=i.filter((e,t)=>s[t]<=n)}return o}(u.map(e=>e.rescale(n)),c,this.config.iouThreshold,!0).map(e=>new MG(c[e],p[e],d[e],u[e],s))}getDefaultModelName(){return""}extractParamsFromWeightMap(e){return function(e,t){let n,r=[],{extractConvParams:i,extractConvWithBatchNormParams:o,extractSeparableConvParams:a}=MJ(e,r);if(t.withSeparableConvs){let e=t.filterSizes&&t.filterSizes.length||9;n={conv0:t.isFirstLayerConv2d?i("conv0"):a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:e>7?a("conv6"):void 0,conv7:e>8?a("conv7"):void 0,conv8:i("conv8")}}else n={conv0:o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:o("conv6"),conv7:o("conv7"),conv8:i("conv8")};return IK(e,r),{params:n,paramMappings:r}}(e,this.config)}extractParams(e){let t=this.config.filterSizes||LJ.DEFAULT_FILTER_SIZES,n=t?t.length:void 0;if(7!==n&&8!==n&&9!==n)throw new Error(`TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found ${n} filterSizes in config`);return function(e,t,n,r){let i,{extractWeights:o,getRemainingWeights:a}=VK(e),s=[],{extractConvParams:l,extractConvWithBatchNormParams:u,extractSeparableConvParams:c}=VJ(o,s);if(t.withSeparableConvs){let[e,o,a,s,u,p,d,h,f]=r;i={conv0:t.isFirstLayerConv2d?l(e,o,3,"conv0"):c(e,o,"conv0"),conv1:c(o,a,"conv1"),conv2:c(a,s,"conv2"),conv3:c(s,u,"conv3"),conv4:c(u,p,"conv4"),conv5:c(p,d,"conv5"),conv6:h?c(d,h,"conv6"):void 0,conv7:f?c(h,f,"conv7"):void 0,conv8:l(f||h||d,5*n,1,"conv8")}}else{let[e,t,o,a,s,c,p,d,h]=r;i={conv0:u(e,t,"conv0"),conv1:u(t,o,"conv1"),conv2:u(o,a,"conv2"),conv3:u(a,s,"conv3"),conv4:u(s,c,"conv4"),conv5:u(c,p,"conv5"),conv6:u(p,d,"conv6"),conv7:u(d,h,"conv7"),conv8:l(h,5*n,1,"conv8")}}if(0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{params:i,paramMappings:s}}(e,this.config,this.boxEncodingSize,t)}async extractBoxes(e,t,n){let{width:r,height:i}=t,o=Math.max(r,i),a=o/r,s=o/i,l=e.shape[1],u=this.config.anchors.length,[c,p,d]=Xa(()=>{let t=e.reshape([l,l,u,this.boxEncodingSize]);return[t.slice([0,0,0,0],[l,l,u,4]),t.slice([0,0,0,4],[l,l,u,1]),this.withClassScores?dp(t.slice([0,0,0,5],[l,l,u,this.config.classes.length]),3):eu(0)]}),h=[],f=await p.array(),m=await c.array();for(let e=0;e<l;e++)for(let t=0;t<l;t++)for(let r=0;r<u;r++){let i=jG(f[e][t][r][0]);if(!n||i>n){let n=(t+jG(m[e][t][r][0]))/l*a,o=(e+jG(m[e][t][r][1]))/l*s,u=Math.exp(m[e][t][r][2])*this.config.anchors[r].x/l*a,c=Math.exp(m[e][t][r][3])*this.config.anchors[r].y/l*s,p=n-u/2,f=o-c/2,g={row:e,col:t,anchor:r},{classScore:y,label:v}=this.withClassScores?await this.extractPredictedClass(d,g):{classScore:1,label:0};h.push({box:new VG(p,f,p+u,f+c),score:i,classScore:i*y,label:v,...g})}}return c.dispose(),p.dispose(),d.dispose(),h}async extractPredictedClass(e,t){let{row:n,col:r,anchor:i}=t,o=await e.array();return Array(this.config.classes.length).fill(0).map((e,t)=>o[n][r][i][t]).map((e,t)=>({classScore:e,label:t})).reduce((e,t)=>e.classScore>t.classScore?e:t)}},zJ=LJ;zJ.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024];var jJ=class extends zJ{constructor(e=!0){super({withSeparableConvs:e,iouThreshold:.4,classes:["face"],...e?{anchors:PJ,meanRgb:OJ}:{anchors:IJ,withClassScores:!0}})}get withSeparableConvs(){return this.config.withSeparableConvs}get anchors(){return this.config.anchors}async locateFaces(e,t){return(await this.detect(e,t)).map(e=>new FG(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight}))}getDefaultModelName(){return this.withSeparableConvs?"tiny_yolov2_separable_conv_model":"tiny_yolov2_model"}extractParamsFromWeightMap(e){return super.extractParamsFromWeightMap(e)}};var qJ=class extends FJ{constructor(){super(...arguments),this._name="TinyFaceDetectorOptions"}},$J=class{async then(e){return e(await this.run())}async run(){throw new Error("ComposableTask - run is not implemented")}};async function BJ(e,t,n,r,i=(({alignedRect:e})=>e)){let o=e.map(e=>QK(e)?i(e):e.detection),a=r||(t instanceof ro?await vK(t,o):await yK(t,o)),s=await n(a);return a.forEach(e=>e instanceof ro&&e.dispose()),s}async function UJ(e,t,n,r,i){return BJ([e],t,async e=>n(e[0]),r,i)}var WJ=[new AG(1.603231,2.094468),new AG(6.041143,7.080126),new AG(2.882459,3.518061),new AG(4.266906,5.178857),new AG(9.041765,10.66308)],HJ=[117.001,114.697,97.404],QJ=class extends zJ{constructor(){super({withSeparableConvs:!0,iouThreshold:.4,classes:["face"],anchors:WJ,meanRgb:HJ,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]})}get anchors(){return this.config.anchors}async locateFaces(e,t){return(await this.detect(e,t)).map(e=>new FG(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight}))}getDefaultModelName(){return"tiny_face_detector_model"}extractParamsFromWeightMap(e){return super.extractParamsFromWeightMap(e)}},GJ={ssdMobilenetv1:new TJ,tinyFaceDetector:new QJ,tinyYolov2:new jJ,faceLandmark68Net:new aJ,faceLandmark68TinyNet:new class extends oJ{constructor(e=new sJ){super("FaceLandmark68TinyNet",e)}getDefaultModelName(){return"face_landmark_68_tiny_model"}getClassifierChannelsIn(){return 128}},faceRecognitionNet:new mJ,faceExpressionNet:new class extends $K{constructor(e=new zK){super("FaceExpressionNet",e)}forwardInput(e){return Xa(()=>dp(this.runNet(e)))}async forward(e){return this.forwardInput(await gK(e))}async predictExpressions(e){let t=await gK(e),n=await this.forwardInput(t),r=await Promise.all(zp(n).map(async e=>{let t=e.dataSync();return e.dispose(),t}));n.dispose();let i=r.map(e=>new UK(e));return t.isBatchInput?i:i[0]}getDefaultModelName(){return"face_expression_model"}getClassifierChannelsIn(){return 256}getClassifierChannelsOut(){return 7}},ageGenderNet:new class extends CK{constructor(e=new nJ(2)){super("AgeGenderNet"),this._faceFeatureExtractor=e}get faceFeatureExtractor(){return this._faceFeatureExtractor}runNet(e){let{params:t}=this;if(!t)throw new Error(this._name+" - load model before inference");return Xa(()=>{let n=e instanceof mK?this.faceFeatureExtractor.forwardInput(e):e,r=Bs(n,[7,7],[2,2],"valid").as2D(n.shape[0],-1);return{age:jK(r,t.fc.age).as1D(),gender:jK(r,t.fc.gender)}})}forwardInput(e){return Xa(()=>{let{age:t,gender:n}=this.runNet(e);return{age:t,gender:dp(n)}})}async forward(e){return this.forwardInput(await gK(e))}async predictAgeAndGender(e){let t=await gK(e),n=await this.forwardInput(t),r=zp(n.age),i=zp(n.gender),o=r.map((e,t)=>({ageTensor:e,genderTensor:i[t]})),a=await Promise.all(o.map(async({ageTensor:e,genderTensor:t})=>{let n=e.dataSync()[0],r=t.dataSync()[0],i=r>.5,o=i?"male":"female",a=i?r:1-r;return e.dispose(),t.dispose(),{age:n,gender:o,genderProbability:a}}));return n.age.dispose(),n.gender.dispose(),t.isBatchInput?a:a[0]}getDefaultModelName(){return"age_gender_model"}dispose(e=!0){this.faceFeatureExtractor.dispose(e),super.dispose(e)}loadClassifierParams(e){let{params:t,paramMappings:n}=this.extractClassifierParams(e);this._params=t,this._paramMappings=n}extractClassifierParams(e){return function(e){let t=[],{extractWeights:n,getRemainingWeights:r}=VK(e),i=OK(n,t),o=i(512,1,"fc/age"),a=i(512,2,"fc/gender");if(0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{paramMappings:t,params:{fc:{age:o,gender:a}}}}(e)}extractParamsFromWeightMap(e){let{featureExtractorMap:t,classifierMap:n}=qK(e);return this.faceFeatureExtractor.loadFromWeightMap(t),function(e){let t=[],n=DK(e,t);function r(e){return{weights:n(e+"/weights",2),bias:n(e+"/bias",1)}}let i={fc:{age:r("fc/age"),gender:r("fc/gender")}};return IK(e,t),{params:i,paramMappings:t}}(n)}extractParams(e){let t=e.slice(0,e.length-1539),n=e.slice(e.length-1539);return this.faceFeatureExtractor.extractWeights(t),this.extractClassifierParams(n)}}},KJ=e=>GJ.tinyFaceDetector.load(e),JJ=e=>GJ.faceLandmark68Net.load(e),XJ=e=>GJ.faceRecognitionNet.load(e),YJ=e=>GJ.faceExpressionNet.load(e),ZJ=class extends $J{constructor(e,t,n){super(),this.parentTask=e,this.input=t,this.extractedFaces=n}},eX=class extends ZJ{async run(){let e=await this.parentTask,t=await BJ(e,this.input,async e=>Promise.all(e.map(e=>GJ.faceExpressionNet.predictExpressions(e))),this.extractedFaces);return e.map((e,n)=>WK(e,t[n]))}withAgeAndGender(){return new oX(this,this.input)}},tX=class extends ZJ{async run(){let e=await this.parentTask;if(e)return WK(e,await UJ(e,this.input,e=>GJ.faceExpressionNet.predictExpressions(e),this.extractedFaces))}withAgeAndGender(){return new aX(this,this.input)}},nX=class extends eX{withAgeAndGender(){return new sX(this,this.input)}withFaceDescriptors(){return new cX(this,this.input)}},rX=class extends tX{withAgeAndGender(){return new lX(this,this.input)}withFaceDescriptor(){return new pX(this,this.input)}},iX=class extends $J{constructor(e,t,n){super(),this.parentTask=e,this.input=t,this.extractedFaces=n}},oX=class extends iX{async run(){let e=await this.parentTask,t=await BJ(e,this.input,async e=>Promise.all(e.map(e=>GJ.ageGenderNet.predictAgeAndGender(e))),this.extractedFaces);return e.map((e,n)=>{let{age:r,gender:i,genderProbability:o}=t[n];return yJ(vJ(e,i,o),r)})}withFaceExpressions(){return new eX(this,this.input)}},aX=class extends iX{async run(){let e=await this.parentTask;if(!e)return;let{age:t,gender:n,genderProbability:r}=await UJ(e,this.input,e=>GJ.ageGenderNet.predictAgeAndGender(e),this.extractedFaces);return yJ(vJ(e,n,r),t)}withFaceExpressions(){return new tX(this,this.input)}},sX=class extends oX{withFaceExpressions(){return new nX(this,this.input)}withFaceDescriptors(){return new cX(this,this.input)}},lX=class extends aX{withFaceExpressions(){return new rX(this,this.input)}withFaceDescriptor(){return new pX(this,this.input)}},uX=class extends $J{constructor(e,t){super(),this.parentTask=e,this.input=t}},cX=class extends uX{async run(){let e=await this.parentTask;return(await BJ(e,this.input,e=>Promise.all(e.map(e=>GJ.faceRecognitionNet.computeFaceDescriptor(e))),null,e=>e.landmarks.align(null,{useDlibAlignment:!0}))).map((t,n)=>gJ(e[n],t))}withFaceExpressions(){return new nX(this,this.input)}withAgeAndGender(){return new sX(this,this.input)}},pX=class extends uX{async run(){let e=await this.parentTask;if(e)return gJ(e,await UJ(e,this.input,e=>GJ.faceRecognitionNet.computeFaceDescriptor(e),null,e=>e.landmarks.align(null,{useDlibAlignment:!0})))}withFaceExpressions(){return new rX(this,this.input)}withAgeAndGender(){return new lX(this,this.input)}},dX=class extends $J{constructor(e,t,n){super(),this.parentTask=e,this.input=t,this.useTinyLandmarkNet=n}get landmarkNet(){return this.useTinyLandmarkNet?GJ.faceLandmark68TinyNet:GJ.faceLandmark68Net}},hX=class extends dX{async run(){let e=await this.parentTask,t=e.map(e=>e.detection),n=this.input instanceof ro?await vK(this.input,t):await yK(this.input,t),r=await Promise.all(n.map(e=>this.landmarkNet.detectLandmarks(e)));return n.forEach(e=>e instanceof ro&&e.dispose()),e.filter((e,t)=>r[t]).map((e,t)=>GK(e,r[t]))}withFaceExpressions(){return new nX(this,this.input)}withAgeAndGender(){return new sX(this,this.input)}withFaceDescriptors(){return new cX(this,this.input)}},fX=class extends dX{async run(){let e=await this.parentTask;if(!e)return;let{detection:t}=e,n=this.input instanceof ro?await vK(this.input,[t]):await yK(this.input,[t]),r=await this.landmarkNet.detectLandmarks(n[0]);return n.forEach(e=>e instanceof ro&&e.dispose()),GK(e,r)}withFaceExpressions(){return new rX(this,this.input)}withAgeAndGender(){return new lX(this,this.input)}withFaceDescriptor(){return new pX(this,this.input)}},mX=class extends $J{constructor(e,t=new EJ){super(),this.input=e,this.options=t}},gX=class extends mX{async run(){let e,{input:t,options:n}=this;if(n instanceof qJ)e=GJ.tinyFaceDetector.locateFaces(t,n);else if(n instanceof EJ)e=GJ.ssdMobilenetv1.locateFaces(t,n);else{if(!(n instanceof FJ))throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | TinyYolov2Options");e=GJ.tinyYolov2.locateFaces(t,n)}return e}runAndExtendWithFaceDetections(){return new Promise((e,t)=>{this.run().then(t=>e(t.map(e=>HG({},e)))).catch(e=>t(e))})}withFaceLandmarks(e=!1){return new hX(this.runAndExtendWithFaceDetections(),this.input,e)}withFaceExpressions(){return new eX(this.runAndExtendWithFaceDetections(),this.input)}withAgeAndGender(){return new oX(this.runAndExtendWithFaceDetections(),this.input)}},yX=class extends mX{async run(){let e=await new gX(this.input,this.options),t=e[0];return e.forEach(e=>{e.score>t.score&&(t=e)}),t}runAndExtendWithFaceDetection(){return new Promise(async e=>{let t=await this.run();e(t?HG({},t):void 0)})}withFaceLandmarks(e=!1){return new fX(this.runAndExtendWithFaceDetection(),this.input,e)}withFaceExpressions(){return new tX(this.runAndExtendWithFaceDetection(),this.input)}withAgeAndGender(){return new aX(this.runAndExtendWithFaceDetection(),this.input)}};function vX(e,t=new EJ){return new yX(e,t)}function bX(e,t){let{width:n,height:r}=new vG(t.width,t.height);if(n<=0||r<=0)throw new Error("resizeResults - invalid dimensions: "+JSON.stringify({width:n,height:r}));if(Array.isArray(e))return e.map(e=>bX(e,{width:n,height:r}));if(QK(e)){let t=e.detection.forSize(n,r),i=e.unshiftedLandmarks.forSize(t.box.width,t.box.height);return GK(HG(e,t),i)}return WG(e)?HG(e,e.detection.forSize(n,r)):e instanceof BG||e instanceof FG?e.forSize(n,r):e}}).call(this,"/index.js",n(49),"/",n(25),n(50).Buffer,n(91).setImmediate)},,function(e,t,n){"use strict";n.d(t,"e",(function(){return b})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return y})),n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return v}));const r=Object.create(null);r.open="0",r.close="1",r.ping="2",r.pong="3",r.message="4",r.upgrade="5",r.noop="6";const i=Object.create(null);Object.keys(r).forEach(e=>{i[r[e]]=e});const o={type:"error",data:"parser error"},a="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),s="function"==typeof ArrayBuffer,l=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};var u=({type:e,data:t},n,i)=>{return a&&t instanceof Blob?n?i(t):l(t,i):s&&(t instanceof ArrayBuffer||(o=t,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(o):o&&o.buffer instanceof ArrayBuffer))?n?i(t):l(new Blob([t]),i):i(r[e]+(t||""));var o};const c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<c.length;e++)p[c.charCodeAt(e)]=e;const d="function"==typeof ArrayBuffer,h=(e,t)=>{if(d){const n=(e=>{let t,n,r,i,o,a=.75*e.length,s=e.length,l=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);const u=new ArrayBuffer(a),c=new Uint8Array(u);for(t=0;t<s;t+=4)n=p[e.charCodeAt(t)],r=p[e.charCodeAt(t+1)],i=p[e.charCodeAt(t+2)],o=p[e.charCodeAt(t+3)],c[l++]=n<<2|r>>4,c[l++]=(15&r)<<4|i>>2,c[l++]=(3&i)<<6|63&o;return u})(e);return f(n,t)}return{base64:!0,data:e}},f=(e,t)=>{switch(t){case"blob":return e instanceof ArrayBuffer?new Blob([e]):e;case"arraybuffer":default:return e}};var m=(e,t)=>{if("string"!=typeof e)return{type:"message",data:f(e,t)};const n=e.charAt(0);if("b"===n)return{type:"message",data:h(e.substring(1),t)};return i[n]?e.length>1?{type:i[n],data:e.substring(1)}:{type:i[n]}:o};const g=String.fromCharCode(30),y=(e,t)=>{const n=e.length,r=new Array(n);let i=0;e.forEach((e,o)=>{u(e,!1,e=>{r[o]=e,++i===n&&t(r.join(g))})})},v=(e,t)=>{const n=e.split(g),r=[];for(let e=0;e<n.length;e++){const i=m(n[e],t);if(r.push(i),"error"===i.type)break}return r},b=4},function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}}(),e.exports=n(63)},function(e,t,n){"use strict";var r=n(68),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?a:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var u=Object.defineProperty,c=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(f){var i=h(n);i&&i!==f&&e(t,i,r)}var a=c(n);p&&(a=a.concat(p(n)));for(var s=l(t),m=l(n),g=0;g<a.length;++g){var y=a[g];if(!(o[y]||r&&r[y]||m&&m[y]||s&&s[y])){var v=d(n,y);try{u(t,y,v)}catch(e){}}}}return t}},function(e,t){function n(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise((function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,l,"next",e)}function l(e){n(a,i,o,s,l,"throw",e)}s(void 0)}))}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(21),i=n(16),o=n(17);class a extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class s extends i.a{constructor(e){super(),this.writable=!1,Object(o.b)(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,t,n){return super.emitReserved("error",new a(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Object(r.a)(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}}},function(e,t,n){var r=n(71),i=n(72),o=n(45),a=n(73);e.exports=function(e){return r(e)||i(e)||o(e)||a()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";function r(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function i(e){let t={},n=e.split("&");for(let e=0,r=n.length;e<r;e++){let r=n[e].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}))},function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",(function(){return r}))},function(e,t,n){
/*!
 * surveyjs - Survey JavaScript library v1.8.58
 * Copyright (c) 2015-2021 Devsoft Baltic O  - http://surveyjs.io/
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 */
var r;r=function(e,t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./src/entries/react.ts")}({"./node_modules/signature_pad/dist/signature_pad.mjs":
/*!***********************************************************!*\
  !*** ./node_modules/signature_pad/dist/signature_pad.mjs ***!
  \***********************************************************/
/*! exports provided: default */function(e,t,n){"use strict";
/*!
 * Signature Pad v2.3.2
 * https://github.com/szimek/signature_pad
 *
 * Copyright 2017 Szymon Nowak
 * Released under the MIT license
 *
 * The main idea and some parts of the code (e.g. drawing variable width Bzier curve) are taken from:
 * http://corner.squareup.com/2012/07/smoother-signatures.html
 *
 * Implementation of interpolation using cubic Bzier curves is taken from:
 * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript
 *
 * Algorithm for approximated length of a Bzier curve is taken from:
 * http://www.lemoda.net/maths/bezier-length/index.html
 *
 */
function r(e,t,n){this.x=e,this.y=t,this.time=n||(new Date).getTime()}function i(e,t,n,r){this.startPoint=e,this.control1=t,this.control2=n,this.endPoint=r}function o(e,t){var n=this,r=t||{};this.velocityFilterWeight=r.velocityFilterWeight||.7,this.minWidth=r.minWidth||.5,this.maxWidth=r.maxWidth||2.5,this.throttle="throttle"in r?r.throttle:16,this.minDistance="minDistance"in r?r.minDistance:5,this.throttle?this._strokeMoveUpdate=function(e,t,n){var r,i,o,a=null,s=0;n||(n={});var l=function(){s=!1===n.leading?0:Date.now(),a=null,o=e.apply(r,i),a||(r=i=null)};return function(){var u=Date.now();s||!1!==n.leading||(s=u);var c=t-(u-s);return r=this,i=arguments,c<=0||c>t?(a&&(clearTimeout(a),a=null),s=u,o=e.apply(r,i),a||(r=i=null)):a||!1===n.trailing||(a=setTimeout(l,c)),o}}(o.prototype._strokeUpdate,this.throttle):this._strokeMoveUpdate=o.prototype._strokeUpdate,this.dotSize=r.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=r.penColor||"black",this.backgroundColor=r.backgroundColor||"rgba(0,0,0,0)",this.onBegin=r.onBegin,this.onEnd=r.onEnd,this._canvas=e,this._ctx=e.getContext("2d"),this.clear(),this._handleMouseDown=function(e){1===e.which&&(n._mouseButtonDown=!0,n._strokeBegin(e))},this._handleMouseMove=function(e){n._mouseButtonDown&&n._strokeMoveUpdate(e)},this._handleMouseUp=function(e){1===e.which&&n._mouseButtonDown&&(n._mouseButtonDown=!1,n._strokeEnd(e))},this._handleTouchStart=function(e){if(1===e.targetTouches.length){var t=e.changedTouches[0];n._strokeBegin(t)}},this._handleTouchMove=function(e){e.preventDefault();var t=e.targetTouches[0];n._strokeMoveUpdate(t)},this._handleTouchEnd=function(e){e.target===n._canvas&&(e.preventDefault(),n._strokeEnd(e))},this.on()}n.r(t),r.prototype.velocityFrom=function(e){return this.time!==e.time?this.distanceTo(e)/(this.time-e.time):1},r.prototype.distanceTo=function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},r.prototype.equals=function(e){return this.x===e.x&&this.y===e.y&&this.time===e.time},i.prototype.length=function(){for(var e=0,t=void 0,n=void 0,r=0;r<=10;r+=1){var i=r/10,o=this._point(i,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),a=this._point(i,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(r>0){var s=o-t,l=a-n;e+=Math.sqrt(s*s+l*l)}t=o,n=a}return e},i.prototype._point=function(e,t,n,r,i){return t*(1-e)*(1-e)*(1-e)+3*n*(1-e)*(1-e)*e+3*r*(1-e)*e*e+i*e*e*e},o.prototype.clear=function(){var e=this._ctx,t=this._canvas;e.fillStyle=this.backgroundColor,e.clearRect(0,0,t.width,t.height),e.fillRect(0,0,t.width,t.height),this._data=[],this._reset(),this._isEmpty=!0},o.prototype.fromDataURL=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new Image,i=n.ratio||window.devicePixelRatio||1,o=n.width||this._canvas.width/i,a=n.height||this._canvas.height/i;this._reset(),r.src=e,r.onload=function(){t._ctx.drawImage(r,0,0,o,a)},this._isEmpty=!1},o.prototype.toDataURL=function(e){var t;switch(e){case"image/svg+xml":return this._toSVG();default:for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=this._canvas).toDataURL.apply(t,[e].concat(r))}},o.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()},o.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),this._canvas.removeEventListener("touchend",this._handleTouchEnd)},o.prototype.isEmpty=function(){return this._isEmpty},o.prototype._strokeBegin=function(e){this._data.push([]),this._reset(),this._strokeUpdate(e),"function"==typeof this.onBegin&&this.onBegin(e)},o.prototype._strokeUpdate=function(e){var t=e.clientX,n=e.clientY,r=this._createPoint(t,n),i=this._data[this._data.length-1],o=i&&i[i.length-1],a=o&&r.distanceTo(o)<this.minDistance;if(!o||!a){var s=this._addPoint(r),l=s.curve,u=s.widths;l&&u&&this._drawCurve(l,u.start,u.end),this._data[this._data.length-1].push({x:r.x,y:r.y,time:r.time,color:this.penColor})}},o.prototype._strokeEnd=function(e){var t=this.points.length>2,n=this.points[0];if(!t&&n&&this._drawDot(n),n){var r=this._data[this._data.length-1],i=r[r.length-1];n.equals(i)||r.push({x:n.x,y:n.y,time:n.time,color:this.penColor})}"function"==typeof this.onEnd&&this.onEnd(e)},o.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},o.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.style.touchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),this._canvas.addEventListener("touchend",this._handleTouchEnd)},o.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._ctx.fillStyle=this.penColor},o.prototype._createPoint=function(e,t,n){var i=this._canvas.getBoundingClientRect();return new r(e-i.left,t-i.top,n||(new Date).getTime())},o.prototype._addPoint=function(e){var t=this.points;if(t.push(e),t.length>2){3===t.length&&t.unshift(t[0]);var n=this._calculateCurveControlPoints(t[0],t[1],t[2]).c2,r=this._calculateCurveControlPoints(t[1],t[2],t[3]).c1,o=new i(t[1],n,r,t[2]),a=this._calculateCurveWidths(o);return t.shift(),{curve:o,widths:a}}return{}},o.prototype._calculateCurveControlPoints=function(e,t,n){var i=e.x-t.x,o=e.y-t.y,a=t.x-n.x,s=t.y-n.y,l=(e.x+t.x)/2,u=(e.y+t.y)/2,c=(t.x+n.x)/2,p=(t.y+n.y)/2,d=Math.sqrt(i*i+o*o),h=Math.sqrt(a*a+s*s),f=h/(d+h),m=c+(l-c)*f,g=p+(u-p)*f,y=t.x-m,v=t.y-g;return{c1:new r(l+y,u+v),c2:new r(c+y,p+v)}},o.prototype._calculateCurveWidths=function(e){var t=e.startPoint,n=e.endPoint,r={start:null,end:null},i=this.velocityFilterWeight*n.velocityFrom(t)+(1-this.velocityFilterWeight)*this._lastVelocity,o=this._strokeWidth(i);return r.start=this._lastWidth,r.end=o,this._lastVelocity=i,this._lastWidth=o,r},o.prototype._strokeWidth=function(e){return Math.max(this.maxWidth/(e+1),this.minWidth)},o.prototype._drawPoint=function(e,t,n){var r=this._ctx;r.moveTo(e,t),r.arc(e,t,n,0,2*Math.PI,!1),this._isEmpty=!1},o.prototype._drawCurve=function(e,t,n){var r=this._ctx,i=n-t,o=Math.floor(e.length());r.beginPath();for(var a=0;a<o;a+=1){var s=a/o,l=s*s,u=l*s,c=1-s,p=c*c,d=p*c,h=d*e.startPoint.x;h+=3*p*s*e.control1.x,h+=3*c*l*e.control2.x,h+=u*e.endPoint.x;var f=d*e.startPoint.y;f+=3*p*s*e.control1.y,f+=3*c*l*e.control2.y,f+=u*e.endPoint.y;var m=t+u*i;this._drawPoint(h,f,m)}r.closePath(),r.fill()},o.prototype._drawDot=function(e){var t=this._ctx,n="function"==typeof this.dotSize?this.dotSize():this.dotSize;t.beginPath(),this._drawPoint(e.x,e.y,n),t.closePath(),t.fill()},o.prototype._fromData=function(e,t,n){for(var i=0;i<e.length;i+=1){var o=e[i];if(o.length>1)for(var a=0;a<o.length;a+=1){var s=o[a],l=new r(s.x,s.y,s.time),u=s.color;if(0===a)this.penColor=u,this._reset(),this._addPoint(l);else if(a!==o.length-1){var c=this._addPoint(l),p=c.curve,d=c.widths;p&&d&&t(p,d,u)}}else this._reset(),n(o[0])}},o.prototype._toSVG=function(){var e=this,t=this._data,n=this._canvas,r=Math.max(window.devicePixelRatio||1,1),i=n.width/r,o=n.height/r,a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttributeNS(null,"width",n.width),a.setAttributeNS(null,"height",n.height),this._fromData(t,(function(e,t,n){var r=document.createElement("path");if(!(isNaN(e.control1.x)||isNaN(e.control1.y)||isNaN(e.control2.x)||isNaN(e.control2.y))){var i="M "+e.startPoint.x.toFixed(3)+","+e.startPoint.y.toFixed(3)+" C "+e.control1.x.toFixed(3)+","+e.control1.y.toFixed(3)+" "+e.control2.x.toFixed(3)+","+e.control2.y.toFixed(3)+" "+e.endPoint.x.toFixed(3)+","+e.endPoint.y.toFixed(3);r.setAttribute("d",i),r.setAttribute("stroke-width",(2.25*t.end).toFixed(3)),r.setAttribute("stroke",n),r.setAttribute("fill","none"),r.setAttribute("stroke-linecap","round"),a.appendChild(r)}}),(function(t){var n=document.createElement("circle"),r="function"==typeof e.dotSize?e.dotSize():e.dotSize;n.setAttribute("r",r),n.setAttribute("cx",t.x),n.setAttribute("cy",t.y),n.setAttribute("fill",t.color),a.appendChild(n)}));var s='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 '+i+" "+o+'" width="'+i+'" height="'+o+'">',l=a.innerHTML;if(void 0===l){var u=document.createElement("dummy"),c=a.childNodes;u.innerHTML="";for(var p=0;p<c.length;p+=1)u.appendChild(c[p].cloneNode(!0));l=u.innerHTML}return"data:image/svg+xml;base64,"+btoa(s+l+"</svg>")},o.prototype.fromData=function(e){var t=this;this.clear(),this._fromData(e,(function(e,n){return t._drawCurve(e,n.start,n.end)}),(function(e){return t._drawDot(e)})),this._data=e},o.prototype.toData=function(){return this._data},t.default=o},"./node_modules/sortablejs/modular/sortable.esm.js":
/*!*********************************************************!*\
  !*** ./node_modules/sortablejs/modular/sortable.esm.js ***!
  \*********************************************************/
/*! exports provided: default, MultiDrag, Sortable, Swap */function(e,t,n){"use strict";
/**!
 * Sortable 1.13.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}n.r(t),n.d(t,"MultiDrag",(function(){return bt})),n.d(t,"Sortable",(function(){return je})),n.d(t,"Swap",(function(){return lt}));var c=u(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),p=u(/Edge/i),d=u(/firefox/i),h=u(/safari/i)&&!u(/chrome/i)&&!u(/android/i),f=u(/iP(ad|od|hone)/i),m=u(/chrome/i)&&u(/android/i),g={capture:!1,passive:!1};function y(e,t,n){e.addEventListener(t,n,!c&&g)}function v(e,t,n){e.removeEventListener(t,n,!c&&g)}function b(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function x(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function w(e,t,n,r){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&b(e,t):b(e,t))||r&&e===n)return e;if(e===n)break}while(e=x(e))}return null}var _,C=/\s+/g;function S(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(C," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(C," ")}}function k(e,t,n){var r=e&&e.style;if(r){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in r||-1!==t.indexOf("webkit")||(t="-webkit-"+t),r[t]=n+("string"==typeof n?"":"px")}}function E(e,t){var n="";if("string"==typeof e)n=e;else do{var r=k(e,"transform");r&&"none"!==r&&(n=r+" "+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function T(e,t,n){if(e){var r=e.getElementsByTagName(t),i=0,o=r.length;if(n)for(;i<o;i++)n(r[i],i);return r}return[]}function I(){var e=document.scrollingElement;return e||document.documentElement}function P(e,t,n,r,i){if(e.getBoundingClientRect||e===window){var o,a,s,l,u,p,d;if(e!==window&&e.parentNode&&e!==I()?(a=(o=e.getBoundingClientRect()).top,s=o.left,l=o.bottom,u=o.right,p=o.height,d=o.width):(a=0,s=0,l=window.innerHeight,u=window.innerWidth,p=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(i=i||e.parentNode,!c))do{if(i&&i.getBoundingClientRect&&("none"!==k(i,"transform")||n&&"static"!==k(i,"position"))){var h=i.getBoundingClientRect();a-=h.top+parseInt(k(i,"border-top-width")),s-=h.left+parseInt(k(i,"border-left-width")),l=a+o.height,u=s+o.width;break}}while(i=i.parentNode);if(r&&e!==window){var f=E(i||e),m=f&&f.a,g=f&&f.d;f&&(l=(a/=g)+(p/=g),u=(s/=m)+(d/=m))}return{top:a,left:s,bottom:l,right:u,width:d,height:p}}}function O(e,t,n){for(var r=V(e,!0),i=P(e)[t];r;){var o=P(r)[n];if(!("top"===n||"left"===n?i>=o:i<=o))return r;if(r===I())break;r=V(r,!1)}return!1}function N(e,t,n){for(var r=0,i=0,o=e.children;i<o.length;){if("none"!==o[i].style.display&&o[i]!==je.ghost&&o[i]!==je.dragged&&w(o[i],n.draggable,e,!1)){if(r===t)return o[i];r++}i++}return null}function R(e,t){for(var n=e.lastElementChild;n&&(n===je.ghost||"none"===k(n,"display")||t&&!b(n,t));)n=n.previousElementSibling;return n||null}function A(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===je.clone||t&&!b(e,t)||n++;return n}function D(e){var t=0,n=0,r=I();if(e)do{var i=E(e),o=i.a,a=i.d;t+=e.scrollLeft*o,n+=e.scrollTop*a}while(e!==r&&(e=e.parentNode));return[t,n]}function V(e,t){if(!e||!e.getBoundingClientRect)return I();var n=e,r=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=k(n);if(n.clientWidth<n.scrollWidth&&("auto"==i.overflowX||"scroll"==i.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==i.overflowY||"scroll"==i.overflowY)){if(!n.getBoundingClientRect||n===document.body)return I();if(r||t)return n;r=!0}}}while(n=n.parentNode);return I()}function M(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function F(e,t){return function(){if(!_){var n=arguments,r=this;1===n.length?e.call(r,n[0]):e.apply(r,n),_=setTimeout((function(){_=void 0}),t)}}}function L(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function z(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function j(e,t){k(e,"position","absolute"),k(e,"top",t.top),k(e,"left",t.left),k(e,"width",t.width),k(e,"height",t.height)}function q(e){k(e,"position",""),k(e,"top",""),k(e,"left",""),k(e,"width",""),k(e,"height","")}var $="Sortable"+(new Date).getTime();function B(){var e,t=[];return{captureAnimationState:function(){t=[],this.options.animation&&[].slice.call(this.el.children).forEach((function(e){if("none"!==k(e,"display")&&e!==je.ghost){t.push({target:e,rect:P(e)});var n=a({},t[t.length-1].rect);if(e.thisAnimationDuration){var r=E(e,!0);r&&(n.top-=r.f,n.left-=r.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var r=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof n&&n());var i=!1,o=0;t.forEach((function(e){var t=0,n=e.target,a=n.fromRect,s=P(n),l=n.prevFromRect,u=n.prevToRect,c=e.rect,p=E(n,!0);p&&(s.top-=p.f,s.left-=p.e),n.toRect=s,n.thisAnimationDuration&&M(l,s)&&!M(a,s)&&(c.top-s.top)/(c.left-s.left)==(a.top-s.top)/(a.left-s.left)&&(t=function(e,t,n,r){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*r.animation}(c,l,u,r.options)),M(s,a)||(n.prevFromRect=a,n.prevToRect=s,t||(t=r.options.animation),r.animate(n,c,s,t)),t&&(i=!0,o=Math.max(o,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),i?e=setTimeout((function(){"function"==typeof n&&n()}),o):"function"==typeof n&&n(),t=[]},animate:function(e,t,n,r){if(r){k(e,"transition",""),k(e,"transform","");var i=E(this.el),o=i&&i.a,a=i&&i.d,s=(t.left-n.left)/(o||1),l=(t.top-n.top)/(a||1);e.animatingX=!!s,e.animatingY=!!l,k(e,"transform","translate3d("+s+"px,"+l+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),k(e,"transition","transform "+r+"ms"+(this.options.easing?" "+this.options.easing:"")),k(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){k(e,"transition",""),k(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),r)}}}}var U=[],W={initializeByDefault:!0},H={mount:function(e){for(var t in W)W.hasOwnProperty(t)&&!(t in e)&&(e[t]=W[t]);U.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),U.push(e)},pluginEvent:function(e,t,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var i=e+"Global";U.forEach((function(r){t[r.pluginName]&&(t[r.pluginName][i]&&t[r.pluginName][i](a({sortable:t},n)),t.options[r.pluginName]&&t[r.pluginName][e]&&t[r.pluginName][e](a({sortable:t},n)))}))},initializePlugins:function(e,t,n,r){for(var i in U.forEach((function(r){var i=r.pluginName;if(e.options[i]||r.initializeByDefault){var a=new r(e,t,e.options);a.sortable=e,a.options=e.options,e[i]=a,o(n,a.defaults)}})),e.options)if(e.options.hasOwnProperty(i)){var a=this.modifyOption(e,i,e.options[i]);void 0!==a&&(e.options[i]=a)}},getEventProperties:function(e,t){var n={};return U.forEach((function(r){"function"==typeof r.eventProperties&&o(n,r.eventProperties.call(t[r.pluginName],e))})),n},modifyOption:function(e,t,n){var r;return U.forEach((function(i){e[i.pluginName]&&i.optionListeners&&"function"==typeof i.optionListeners[t]&&(r=i.optionListeners[t].call(e[i.pluginName],n))})),r}};function Q(e){var t=e.sortable,n=e.rootEl,r=e.name,i=e.targetEl,o=e.cloneEl,s=e.toEl,l=e.fromEl,u=e.oldIndex,d=e.newIndex,h=e.oldDraggableIndex,f=e.newDraggableIndex,m=e.originalEvent,g=e.putSortable,y=e.extraEventProperties;if(t=t||n&&n[$]){var v,b=t.options,x="on"+r.charAt(0).toUpperCase()+r.substr(1);!window.CustomEvent||c||p?(v=document.createEvent("Event")).initEvent(r,!0,!0):v=new CustomEvent(r,{bubbles:!0,cancelable:!0}),v.to=s||n,v.from=l||n,v.item=i||n,v.clone=o,v.oldIndex=u,v.newIndex=d,v.oldDraggableIndex=h,v.newDraggableIndex=f,v.originalEvent=m,v.pullMode=g?g.lastPutMode:void 0;var w=a({},y,H.getEventProperties(r,t));for(var _ in w)v[_]=w[_];n&&n.dispatchEvent(v),b[x]&&b[x].call(t,v)}}var G=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.evt,i=s(n,["evt"]);H.pluginEvent.bind(je)(e,t,a({dragEl:J,parentEl:X,ghostEl:Y,rootEl:Z,nextEl:ee,lastDownEl:te,cloneEl:ne,cloneHidden:re,dragStarted:ge,putSortable:ue,activeSortable:je.active,originalEvent:r,oldIndex:ie,oldDraggableIndex:ae,newIndex:oe,newDraggableIndex:se,hideGhostForTarget:Me,unhideGhostForTarget:Fe,cloneNowHidden:function(){re=!0},cloneNowShown:function(){re=!1},dispatchSortableEvent:function(e){K({sortable:t,name:e,originalEvent:r})}},i))};function K(e){Q(a({putSortable:ue,cloneEl:ne,targetEl:J,rootEl:Z,oldIndex:ie,oldDraggableIndex:ae,newIndex:oe,newDraggableIndex:se},e))}var J,X,Y,Z,ee,te,ne,re,ie,oe,ae,se,le,ue,ce,pe,de,he,fe,me,ge,ye,ve,be,xe,we=!1,_e=!1,Ce=[],Se=!1,ke=!1,Ee=[],Te=!1,Ie=[],Pe="undefined"!=typeof document,Oe=f,Ne=p||c?"cssFloat":"float",Re=Pe&&!m&&!f&&"draggable"in document.createElement("div"),Ae=function(){if(Pe){if(c)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),De=function(e,t){var n=k(e),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=N(e,0,t),o=N(e,1,t),a=i&&k(i),s=o&&k(o),l=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+P(i).width,u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+P(o).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&a.float&&"none"!==a.float){var c="left"===a.float?"left":"right";return!o||"both"!==s.clear&&s.clear!==c?"horizontal":"vertical"}return i&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||l>=r&&"none"===n[Ne]||o&&"none"===n[Ne]&&l+u>r)?"vertical":"horizontal"},Ve=function(e){function t(e,n){return function(r,i,o,a){var s=r.options.group.name&&i.options.group.name&&r.options.group.name===i.options.group.name;if(null==e&&(n||s))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(r,i,o,a),n)(r,i,o,a);var l=(n?r:i).options.group.name;return!0===e||"string"==typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var n={},i=e.group;i&&"object"==r(i)||(i={name:i}),n.name=i.name,n.checkPull=t(i.pull,!0),n.checkPut=t(i.put),n.revertClone=i.revertClone,e.group=n},Me=function(){!Ae&&Y&&k(Y,"display","none")},Fe=function(){!Ae&&Y&&k(Y,"display","")};Pe&&document.addEventListener("click",(function(e){if(_e)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),_e=!1,!1}),!0);var Le=function(e){if(J){e=e.touches?e.touches[0]:e;var t=(i=e.clientX,o=e.clientY,Ce.some((function(e){if(!R(e)){var t=P(e),n=e[$].options.emptyInsertThreshold,r=i>=t.left-n&&i<=t.right+n,s=o>=t.top-n&&o<=t.bottom+n;return n&&r&&s?a=e:void 0}})),a);if(t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[$]._onDragOver(n)}}var i,o,a},ze=function(e){J&&J.parentNode[$]._isOutsideThisEl(e.target)};function je(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=o({},t),e[$]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return De(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==je.supportPointer&&"PointerEvent"in window&&!h,emptyInsertThreshold:5};for(var r in H.initializePlugins(this,e,n),n)!(r in t)&&(t[r]=n[r]);for(var i in Ve(t),this)"_"===i.charAt(0)&&"function"==typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!t.forceFallback&&Re,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?y(e,"pointerdown",this._onTapStart):(y(e,"mousedown",this._onTapStart),y(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(y(e,"dragover",this),y(e,"dragenter",this)),Ce.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),o(this,B())}function qe(e,t,n,r,i,o,a,s){var l,u,d=e[$],h=d.options.onMove;return!window.CustomEvent||c||p?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=n,l.draggedRect=r,l.related=i||t,l.relatedRect=o||P(t),l.willInsertAfter=s,l.originalEvent=a,e.dispatchEvent(l),h&&(u=h.call(d,l,a)),u}function $e(e){e.draggable=!1}function Be(){Te=!1}function Ue(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function We(e){return setTimeout(e,0)}function He(e){return clearTimeout(e)}je.prototype={constructor:je,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(ye=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,J):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,r=this.options,i=r.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(a||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,u=r.filter;if(function(e){Ie.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var r=t[n];r.checked&&Ie.push(r)}}(n),!J&&!(/mousedown|pointerdown/.test(o)&&0!==e.button||r.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!h||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=w(s,r.draggable,n,!1))&&s.animated||te===s)){if(ie=A(s),ae=A(s,r.draggable),"function"==typeof u){if(u.call(this,e,s,this))return K({sortable:t,rootEl:l,name:"filter",targetEl:s,toEl:n,fromEl:n}),G("filter",t,{evt:e}),void(i&&e.cancelable&&e.preventDefault())}else if(u&&(u=u.split(",").some((function(r){if(r=w(l,r.trim(),n,!1))return K({sortable:t,rootEl:r,name:"filter",targetEl:s,fromEl:n,toEl:n}),G("filter",t,{evt:e}),!0}))))return void(i&&e.cancelable&&e.preventDefault());r.handle&&!w(l,r.handle,n,!1)||this._prepareDragStart(e,a,s)}}},_prepareDragStart:function(e,t,n){var r,i=this,o=i.el,a=i.options,s=o.ownerDocument;if(n&&!J&&n.parentNode===o){var l=P(n);if(Z=o,X=(J=n).parentNode,ee=J.nextSibling,te=n,le=a.group,je.dragged=J,ce={target:J,clientX:(t||e).clientX,clientY:(t||e).clientY},fe=ce.clientX-l.left,me=ce.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,J.style["will-change"]="all",r=function(){G("delayEnded",i,{evt:e}),je.eventCanceled?i._onDrop():(i._disableDelayedDragEvents(),!d&&i.nativeDraggable&&(J.draggable=!0),i._triggerDragStart(e,t),K({sortable:i,name:"choose",originalEvent:e}),S(J,a.chosenClass,!0))},a.ignore.split(",").forEach((function(e){T(J,e.trim(),$e)})),y(s,"dragover",Le),y(s,"mousemove",Le),y(s,"touchmove",Le),y(s,"mouseup",i._onDrop),y(s,"touchend",i._onDrop),y(s,"touchcancel",i._onDrop),d&&this.nativeDraggable&&(this.options.touchStartThreshold=4,J.draggable=!0),G("delayStart",this,{evt:e}),!a.delay||a.delayOnTouchOnly&&!t||this.nativeDraggable&&(p||c))r();else{if(je.eventCanceled)return void this._onDrop();y(s,"mouseup",i._disableDelayedDrag),y(s,"touchend",i._disableDelayedDrag),y(s,"touchcancel",i._disableDelayedDrag),y(s,"mousemove",i._delayedDragTouchMoveHandler),y(s,"touchmove",i._delayedDragTouchMoveHandler),a.supportPointer&&y(s,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(r,a.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){J&&$e(J),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;v(e,"mouseup",this._disableDelayedDrag),v(e,"touchend",this._disableDelayedDrag),v(e,"touchcancel",this._disableDelayedDrag),v(e,"mousemove",this._delayedDragTouchMoveHandler),v(e,"touchmove",this._delayedDragTouchMoveHandler),v(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?y(document,"pointermove",this._onTouchMove):y(document,t?"touchmove":"mousemove",this._onTouchMove):(y(J,"dragend",this),y(Z,"dragstart",this._onDragStart));try{document.selection?We((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(we=!1,Z&&J){G("dragStarted",this,{evt:t}),this.nativeDraggable&&y(document,"dragover",ze);var n=this.options;!e&&S(J,n.dragClass,!1),S(J,n.ghostClass,!0),je.active=this,e&&this._appendGhost(),K({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(pe){this._lastX=pe.clientX,this._lastY=pe.clientY,Me();for(var e=document.elementFromPoint(pe.clientX,pe.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(pe.clientX,pe.clientY))!==t;)t=e;if(J.parentNode[$]._isOutsideThisEl(e),t)do{if(t[$]&&t[$]._onDragOver({clientX:pe.clientX,clientY:pe.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break;e=t}while(t=t.parentNode);Fe()}},_onTouchMove:function(e){if(ce){var t=this.options,n=t.fallbackTolerance,r=t.fallbackOffset,i=e.touches?e.touches[0]:e,o=Y&&E(Y,!0),a=Y&&o&&o.a,s=Y&&o&&o.d,l=Oe&&xe&&D(xe),u=(i.clientX-ce.clientX+r.x)/(a||1)+(l?l[0]-Ee[0]:0)/(a||1),c=(i.clientY-ce.clientY+r.y)/(s||1)+(l?l[1]-Ee[1]:0)/(s||1);if(!je.active&&!we){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(Y){o?(o.e+=u-(de||0),o.f+=c-(he||0)):o={a:1,b:0,c:0,d:1,e:u,f:c};var p="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");k(Y,"webkitTransform",p),k(Y,"mozTransform",p),k(Y,"msTransform",p),k(Y,"transform",p),de=u,he=c,pe=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Y){var e=this.options.fallbackOnBody?document.body:Z,t=P(J,!0,Oe,!0,e),n=this.options;if(Oe){for(xe=e;"static"===k(xe,"position")&&"none"===k(xe,"transform")&&xe!==document;)xe=xe.parentNode;xe!==document.body&&xe!==document.documentElement?(xe===document&&(xe=I()),t.top+=xe.scrollTop,t.left+=xe.scrollLeft):xe=I(),Ee=D(xe)}S(Y=J.cloneNode(!0),n.ghostClass,!1),S(Y,n.fallbackClass,!0),S(Y,n.dragClass,!0),k(Y,"transition",""),k(Y,"transform",""),k(Y,"box-sizing","border-box"),k(Y,"margin",0),k(Y,"top",t.top),k(Y,"left",t.left),k(Y,"width",t.width),k(Y,"height",t.height),k(Y,"opacity","0.8"),k(Y,"position",Oe?"absolute":"fixed"),k(Y,"zIndex","100000"),k(Y,"pointerEvents","none"),je.ghost=Y,e.appendChild(Y),k(Y,"transform-origin",fe/parseInt(Y.style.width)*100+"% "+me/parseInt(Y.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,r=e.dataTransfer,i=n.options;G("dragStart",this,{evt:e}),je.eventCanceled?this._onDrop():(G("setupClone",this),je.eventCanceled||((ne=z(J)).draggable=!1,ne.style["will-change"]="",this._hideClone(),S(ne,this.options.chosenClass,!1),je.clone=ne),n.cloneId=We((function(){G("clone",n),je.eventCanceled||(n.options.removeCloneOnHide||Z.insertBefore(ne,J),n._hideClone(),K({sortable:n,name:"clone"}))})),!t&&S(J,i.dragClass,!0),t?(_e=!0,n._loopId=setInterval(n._emulateDragOver,50)):(v(document,"mouseup",n._onDrop),v(document,"touchend",n._onDrop),v(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",i.setData&&i.setData.call(n,r,J)),y(document,"drop",n),k(J,"transform","translateZ(0)")),we=!0,n._dragStartId=We(n._dragStarted.bind(n,t,e)),y(document,"selectstart",n),ge=!0,h&&k(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,r,i,o=this.el,s=e.target,l=this.options,u=l.group,c=je.active,p=le===u,d=l.sort,h=ue||c,f=this,m=!1;if(!Te){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),s=w(s,l.draggable,o,!0),M("dragOver"),je.eventCanceled)return m;if(J.contains(e.target)||s.animated&&s.animatingX&&s.animatingY||f._ignoreWhileAnimating===s)return z(!1);if(_e=!1,c&&!l.disabled&&(p?d||(r=!Z.contains(J)):ue===this||(this.lastPutMode=le.checkPull(this,c,J,e))&&u.checkPut(this,c,J,e))){if(i="vertical"===this._getDirection(e,s),t=P(J),M("dragOverValid"),je.eventCanceled)return m;if(r)return X=Z,F(),this._hideClone(),M("revert"),je.eventCanceled||(ee?Z.insertBefore(J,ee):Z.appendChild(J)),z(!0);var g=R(o,l.draggable);if(!g||function(e,t,n){var r=P(R(n.el,n.options.draggable));return t?e.clientX>r.right+10||e.clientX<=r.right&&e.clientY>r.bottom&&e.clientX>=r.left:e.clientX>r.right&&e.clientY>r.top||e.clientX<=r.right&&e.clientY>r.bottom+10}(e,i,this)&&!g.animated){if(g===J)return z(!1);if(g&&o===e.target&&(s=g),s&&(n=P(s)),!1!==qe(Z,o,J,t,s,n,e,!!s))return F(),o.appendChild(J),X=o,j(),z(!0)}else if(s.parentNode===o){n=P(s);var y,v,b,x=J.parentNode!==o,_=!function(e,t,n){var r=n?e.left:e.top,i=n?e.right:e.bottom,o=n?e.width:e.height,a=n?t.left:t.top,s=n?t.right:t.bottom,l=n?t.width:t.height;return r===a||i===s||r+o/2===a+l/2}(J.animated&&J.toRect||t,s.animated&&s.toRect||n,i),C=i?"top":"left",E=O(s,"top","top")||O(J,"top","top"),T=E?E.scrollTop:void 0;if(ye!==s&&(v=n[C],Se=!1,ke=!_&&l.invertSwap||x),0!==(y=function(e,t,n,r,i,o,a,s){var l=r?e.clientY:e.clientX,u=r?n.height:n.width,c=r?n.top:n.left,p=r?n.bottom:n.right,d=!1;if(!a)if(s&&be<u*i){if(!Se&&(1===ve?l>c+u*o/2:l<p-u*o/2)&&(Se=!0),Se)d=!0;else if(1===ve?l<c+be:l>p-be)return-ve}else if(l>c+u*(1-i)/2&&l<p-u*(1-i)/2)return function(e){return A(J)<A(e)?1:-1}(t);return(d=d||a)&&(l<c+u*o/2||l>p-u*o/2)?l>c+u/2?1:-1:0}(e,s,n,i,_?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,ke,ye===s))){var I=A(J);do{I-=y,b=X.children[I]}while(b&&("none"===k(b,"display")||b===Y))}if(0===y||b===s)return z(!1);ye=s,ve=y;var N=s.nextElementSibling,D=!1,V=qe(Z,o,J,t,s,n,e,D=1===y);if(!1!==V)return 1!==V&&-1!==V||(D=1===V),Te=!0,setTimeout(Be,30),F(),D&&!N?o.appendChild(J):s.parentNode.insertBefore(J,D?N:s),E&&L(E,0,T-E.scrollTop),X=J.parentNode,void 0===v||ke||(be=Math.abs(v-P(s)[C])),j(),z(!0)}if(o.contains(J))return z(!1)}return!1}function M(l,u){G(l,f,a({evt:e,isOwner:p,axis:i?"vertical":"horizontal",revert:r,dragRect:t,targetRect:n,canSort:d,fromSortable:h,target:s,completed:z,onMove:function(n,r){return qe(Z,o,J,t,n,P(n),e,r)},changed:j},u))}function F(){M("dragOverAnimationCapture"),f.captureAnimationState(),f!==h&&h.captureAnimationState()}function z(t){return M("dragOverCompleted",{insertion:t}),t&&(p?c._hideClone():c._showClone(f),f!==h&&(S(J,ue?ue.options.ghostClass:c.options.ghostClass,!1),S(J,l.ghostClass,!0)),ue!==f&&f!==je.active?ue=f:f===je.active&&ue&&(ue=null),h===f&&(f._ignoreWhileAnimating=s),f.animateAll((function(){M("dragOverAnimationComplete"),f._ignoreWhileAnimating=null})),f!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(s===J&&!J.animated||s===o&&!s.animated)&&(ye=null),l.dragoverBubble||e.rootEl||s===document||(J.parentNode[$]._isOutsideThisEl(e.target),!t&&Le(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function j(){oe=A(J),se=A(J,l.draggable),K({sortable:f,name:"change",toEl:o,newIndex:oe,newDraggableIndex:se,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){v(document,"mousemove",this._onTouchMove),v(document,"touchmove",this._onTouchMove),v(document,"pointermove",this._onTouchMove),v(document,"dragover",Le),v(document,"mousemove",Le),v(document,"touchmove",Le)},_offUpEvents:function(){var e=this.el.ownerDocument;v(e,"mouseup",this._onDrop),v(e,"touchend",this._onDrop),v(e,"pointerup",this._onDrop),v(e,"touchcancel",this._onDrop),v(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;oe=A(J),se=A(J,n.draggable),G("drop",this,{evt:e}),X=J&&J.parentNode,oe=A(J),se=A(J,n.draggable),je.eventCanceled||(we=!1,ke=!1,Se=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),He(this.cloneId),He(this._dragStartId),this.nativeDraggable&&(v(document,"drop",this),v(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),h&&k(document.body,"user-select",""),k(J,"transform",""),e&&(ge&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),Y&&Y.parentNode&&Y.parentNode.removeChild(Y),(Z===X||ue&&"clone"!==ue.lastPutMode)&&ne&&ne.parentNode&&ne.parentNode.removeChild(ne),J&&(this.nativeDraggable&&v(J,"dragend",this),$e(J),J.style["will-change"]="",ge&&!we&&S(J,ue?ue.options.ghostClass:this.options.ghostClass,!1),S(J,this.options.chosenClass,!1),K({sortable:this,name:"unchoose",toEl:X,newIndex:null,newDraggableIndex:null,originalEvent:e}),Z!==X?(oe>=0&&(K({rootEl:X,name:"add",toEl:X,fromEl:Z,originalEvent:e}),K({sortable:this,name:"remove",toEl:X,originalEvent:e}),K({rootEl:X,name:"sort",toEl:X,fromEl:Z,originalEvent:e}),K({sortable:this,name:"sort",toEl:X,originalEvent:e})),ue&&ue.save()):oe!==ie&&oe>=0&&(K({sortable:this,name:"update",toEl:X,originalEvent:e}),K({sortable:this,name:"sort",toEl:X,originalEvent:e})),je.active&&(null!=oe&&-1!==oe||(oe=ie,se=ae),K({sortable:this,name:"end",toEl:X,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){G("nulling",this),Z=J=X=Y=ee=ne=te=re=ce=pe=ge=oe=se=ie=ae=ye=ve=ue=le=je.dragged=je.ghost=je.clone=je.active=null,Ie.forEach((function(e){e.checked=!0})),Ie.length=de=he=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":J&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,r=0,i=n.length,o=this.options;r<i;r++)w(e=n[r],o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||Ue(e));return t},sort:function(e,t){var n={},r=this.el;this.toArray().forEach((function(e,t){var i=r.children[t];w(i,this.options.draggable,r,!1)&&(n[e]=i)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(r.removeChild(n[e]),r.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return w(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var r=H.modifyOption(this,e,t);n[e]=void 0!==r?r:t,"group"===e&&Ve(n)},destroy:function(){G("destroy",this);var e=this.el;e[$]=null,v(e,"mousedown",this._onTapStart),v(e,"touchstart",this._onTapStart),v(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(v(e,"dragover",this),v(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Ce.splice(Ce.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!re){if(G("hideClone",this),je.eventCanceled)return;k(ne,"display","none"),this.options.removeCloneOnHide&&ne.parentNode&&ne.parentNode.removeChild(ne),re=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(re){if(G("showClone",this),je.eventCanceled)return;J.parentNode!=Z||this.options.group.revertClone?ee?Z.insertBefore(ne,ee):Z.appendChild(ne):Z.insertBefore(ne,J),this.options.group.revertClone&&this.animate(J,ne),k(ne,"display",""),re=!1}}else this._hideClone()}},Pe&&y(document,"touchmove",(function(e){(je.active||we)&&e.cancelable&&e.preventDefault()})),je.utils={on:y,off:v,css:k,find:T,is:function(e,t){return!!w(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:F,closest:w,toggleClass:S,clone:z,index:A,nextTick:We,cancelNextTick:He,detectDirection:De,getChild:N},je.get=function(e){return e[$]},je.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(je.utils=a({},je.utils,e.utils)),H.mount(e)}))},je.create=function(e,t){return new je(e,t)},je.version="1.13.0";var Qe,Ge,Ke,Je,Xe,Ye,Ze=[],et=!1;function tt(){Ze.forEach((function(e){clearInterval(e.pid)})),Ze=[]}function nt(){clearInterval(Ye)}var rt,it=F((function(e,t,n,r){if(t.scroll){var i,o=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,l=t.scrollSpeed,u=I(),c=!1;Ge!==n&&(Ge=n,tt(),Qe=t.scroll,i=t.scrollFn,!0===Qe&&(Qe=V(n,!0)));var p=0,d=Qe;do{var h=d,f=P(h),m=f.top,g=f.bottom,y=f.left,v=f.right,b=f.width,x=f.height,w=void 0,_=void 0,C=h.scrollWidth,S=h.scrollHeight,E=k(h),T=h.scrollLeft,O=h.scrollTop;h===u?(w=b<C&&("auto"===E.overflowX||"scroll"===E.overflowX||"visible"===E.overflowX),_=x<S&&("auto"===E.overflowY||"scroll"===E.overflowY||"visible"===E.overflowY)):(w=b<C&&("auto"===E.overflowX||"scroll"===E.overflowX),_=x<S&&("auto"===E.overflowY||"scroll"===E.overflowY));var N=w&&(Math.abs(v-o)<=s&&T+b<C)-(Math.abs(y-o)<=s&&!!T),R=_&&(Math.abs(g-a)<=s&&O+x<S)-(Math.abs(m-a)<=s&&!!O);if(!Ze[p])for(var A=0;A<=p;A++)Ze[A]||(Ze[A]={});Ze[p].vx==N&&Ze[p].vy==R&&Ze[p].el===h||(Ze[p].el=h,Ze[p].vx=N,Ze[p].vy=R,clearInterval(Ze[p].pid),0==N&&0==R||(c=!0,Ze[p].pid=setInterval(function(){r&&0===this.layer&&je.active._onTouchMove(Xe);var t=Ze[this.layer].vy?Ze[this.layer].vy*l:0,n=Ze[this.layer].vx?Ze[this.layer].vx*l:0;"function"==typeof i&&"continue"!==i.call(je.dragged.parentNode[$],n,t,e,Xe,Ze[this.layer].el)||L(Ze[this.layer].el,n,t)}.bind({layer:p}),24))),p++}while(t.bubbleScroll&&d!==u&&(d=V(d,!1)));et=c}}),30),ot=function(e){var t=e.originalEvent,n=e.putSortable,r=e.dragEl,i=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var l=n||i;a();var u=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,c=document.elementFromPoint(u.clientX,u.clientY);s(),l&&!l.el.contains(c)&&(o("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function at(){}function st(){}function lt(){function e(){this.defaults={swapClass:"sortable-swap-highlight"}}return e.prototype={dragStart:function(e){var t=e.dragEl;rt=t},dragOverValid:function(e){var t=e.completed,n=e.target,r=e.onMove,i=e.activeSortable,o=e.changed,a=e.cancel;if(i.options.swap){var s=this.sortable.el,l=this.options;if(n&&n!==s){var u=rt;!1!==r(n)?(S(n,l.swapClass,!0),rt=n):rt=null,u&&u!==rt&&S(u,l.swapClass,!1)}o(),t(!0),a()}},drop:function(e){var t,n,r,i,o,a,s=e.activeSortable,l=e.putSortable,u=e.dragEl,c=l||this.sortable,p=this.options;rt&&S(rt,p.swapClass,!1),rt&&(p.swap||l&&l.options.swap)&&u!==rt&&(c.captureAnimationState(),c!==s&&s.captureAnimationState(),n=rt,o=(t=u).parentNode,a=n.parentNode,o&&a&&!o.isEqualNode(n)&&!a.isEqualNode(t)&&(r=A(t),i=A(n),o.isEqualNode(a)&&r<i&&i++,o.insertBefore(n,o.children[r]),a.insertBefore(t,a.children[i])),c.animateAll(),c!==s&&s.animateAll())},nulling:function(){rt=null}},o(e,{pluginName:"swap",eventProperties:function(){return{swapItem:rt}}})}at.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=N(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:ot},o(at,{pluginName:"revertOnSpill"}),st.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:ot},o(st,{pluginName:"removeOnSpill"});var ut,ct,pt,dt,ht,ft=[],mt=[],gt=!1,yt=!1,vt=!1;function bt(){function e(e){for(var t in this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this));e.options.supportPointer?y(document,"pointerup",this._deselectMultiDrag):(y(document,"mouseup",this._deselectMultiDrag),y(document,"touchend",this._deselectMultiDrag)),y(document,"keydown",this._checkKeyDown),y(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(t,n){var r="";ft.length&&ct===e?ft.forEach((function(e,t){r+=(t?", ":"")+e.textContent})):r=n.textContent,t.setData("Text",r)}}}return e.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(e){var t=e.dragEl;pt=t},delayEnded:function(){this.isMultiDrag=~ft.indexOf(pt)},setupClone:function(e){var t=e.sortable,n=e.cancel;if(this.isMultiDrag){for(var r=0;r<ft.length;r++)mt.push(z(ft[r])),mt[r].sortableIndex=ft[r].sortableIndex,mt[r].draggable=!1,mt[r].style["will-change"]="",S(mt[r],this.options.selectedClass,!1),ft[r]===pt&&S(mt[r],this.options.chosenClass,!1);t._hideClone(),n()}},clone:function(e){var t=e.sortable,n=e.rootEl,r=e.dispatchSortableEvent,i=e.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||ft.length&&ct===t&&(xt(!0,n),r("clone"),i()))},showClone:function(e){var t=e.cloneNowShown,n=e.rootEl,r=e.cancel;this.isMultiDrag&&(xt(!1,n),mt.forEach((function(e){k(e,"display","")})),t(),ht=!1,r())},hideClone:function(e){var t=this,n=(e.sortable,e.cloneNowHidden),r=e.cancel;this.isMultiDrag&&(mt.forEach((function(e){k(e,"display","none"),t.options.removeCloneOnHide&&e.parentNode&&e.parentNode.removeChild(e)})),n(),ht=!0,r())},dragStartGlobal:function(e){e.sortable,!this.isMultiDrag&&ct&&ct.multiDrag._deselectMultiDrag(),ft.forEach((function(e){e.sortableIndex=A(e)})),ft=ft.sort((function(e,t){return e.sortableIndex-t.sortableIndex})),vt=!0},dragStarted:function(e){var t=this,n=e.sortable;if(this.isMultiDrag){if(this.options.sort&&(n.captureAnimationState(),this.options.animation)){ft.forEach((function(e){e!==pt&&k(e,"position","absolute")}));var r=P(pt,!1,!0,!0);ft.forEach((function(e){e!==pt&&j(e,r)})),yt=!0,gt=!0}n.animateAll((function(){yt=!1,gt=!1,t.options.animation&&ft.forEach((function(e){q(e)})),t.options.sort&&wt()}))}},dragOver:function(e){var t=e.target,n=e.completed,r=e.cancel;yt&&~ft.indexOf(t)&&(n(!1),r())},revert:function(e){var t=e.fromSortable,n=e.rootEl,r=e.sortable,i=e.dragRect;ft.length>1&&(ft.forEach((function(e){r.addAnimationState({target:e,rect:yt?P(e):i}),q(e),e.fromRect=i,t.removeAnimationState(e)})),yt=!1,function(e,t){ft.forEach((function(n,r){var i=t.children[n.sortableIndex+(e?Number(r):0)];i?t.insertBefore(n,i):t.appendChild(n)}))}(!this.options.removeCloneOnHide,n))},dragOverCompleted:function(e){var t=e.sortable,n=e.isOwner,r=e.insertion,i=e.activeSortable,o=e.parentEl,a=e.putSortable,s=this.options;if(r){if(n&&i._hideClone(),gt=!1,s.animation&&ft.length>1&&(yt||!n&&!i.options.sort&&!a)){var l=P(pt,!1,!0,!0);ft.forEach((function(e){e!==pt&&(j(e,l),o.appendChild(e))})),yt=!0}if(!n)if(yt||wt(),ft.length>1){var u=ht;i._showClone(t),i.options.animation&&!ht&&u&&mt.forEach((function(e){i.addAnimationState({target:e,rect:dt}),e.fromRect=dt,e.thisAnimationDuration=null}))}else i._showClone(t)}},dragOverAnimationCapture:function(e){var t=e.dragRect,n=e.isOwner,r=e.activeSortable;if(ft.forEach((function(e){e.thisAnimationDuration=null})),r.options.animation&&!n&&r.multiDrag.isMultiDrag){dt=o({},t);var i=E(pt,!0);dt.top-=i.f,dt.left-=i.e}},dragOverAnimationComplete:function(){yt&&(yt=!1,wt())},drop:function(e){var t=e.originalEvent,n=e.rootEl,r=e.parentEl,i=e.sortable,o=e.dispatchSortableEvent,a=e.oldIndex,s=e.putSortable,l=s||this.sortable;if(t){var u=this.options,c=r.children;if(!vt)if(u.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),S(pt,u.selectedClass,!~ft.indexOf(pt)),~ft.indexOf(pt))ft.splice(ft.indexOf(pt),1),ut=null,Q({sortable:i,rootEl:n,name:"deselect",targetEl:pt,originalEvt:t});else{if(ft.push(pt),Q({sortable:i,rootEl:n,name:"select",targetEl:pt,originalEvt:t}),t.shiftKey&&ut&&i.el.contains(ut)){var p,d,h=A(ut),f=A(pt);if(~h&&~f&&h!==f)for(f>h?(d=h,p=f):(d=f,p=h+1);d<p;d++)~ft.indexOf(c[d])||(S(c[d],u.selectedClass,!0),ft.push(c[d]),Q({sortable:i,rootEl:n,name:"select",targetEl:c[d],originalEvt:t}))}else ut=pt;ct=l}if(vt&&this.isMultiDrag){if((r[$].options.sort||r!==n)&&ft.length>1){var m=P(pt),g=A(pt,":not(."+this.options.selectedClass+")");if(!gt&&u.animation&&(pt.thisAnimationDuration=null),l.captureAnimationState(),!gt&&(u.animation&&(pt.fromRect=m,ft.forEach((function(e){if(e.thisAnimationDuration=null,e!==pt){var t=yt?P(e):m;e.fromRect=t,l.addAnimationState({target:e,rect:t})}}))),wt(),ft.forEach((function(e){c[g]?r.insertBefore(e,c[g]):r.appendChild(e),g++})),a===A(pt))){var y=!1;ft.forEach((function(e){e.sortableIndex===A(e)||(y=!0)})),y&&o("update")}ft.forEach((function(e){q(e)})),l.animateAll()}ct=l}(n===r||s&&"clone"!==s.lastPutMode)&&mt.forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))}},nullingGlobal:function(){this.isMultiDrag=vt=!1,mt.length=0},destroyGlobal:function(){this._deselectMultiDrag(),v(document,"pointerup",this._deselectMultiDrag),v(document,"mouseup",this._deselectMultiDrag),v(document,"touchend",this._deselectMultiDrag),v(document,"keydown",this._checkKeyDown),v(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(e){if(!(void 0!==vt&&vt||ct!==this.sortable||e&&w(e.target,this.options.draggable,this.sortable.el,!1)||e&&0!==e.button))for(;ft.length;){var t=ft[0];S(t,this.options.selectedClass,!1),ft.shift(),Q({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:t,originalEvt:e})}},_checkKeyDown:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(e){e.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},o(e,{pluginName:"multiDrag",utils:{select:function(e){var t=e.parentNode[$];t&&t.options.multiDrag&&!~ft.indexOf(e)&&(ct&&ct!==t&&(ct.multiDrag._deselectMultiDrag(),ct=t),S(e,t.options.selectedClass,!0),ft.push(e))},deselect:function(e){var t=e.parentNode[$],n=ft.indexOf(e);t&&t.options.multiDrag&&~n&&(S(e,t.options.selectedClass,!1),ft.splice(n,1))}},eventProperties:function(){var e=this,t=[],n=[];return ft.forEach((function(r){var i;t.push({multiDragElement:r,index:r.sortableIndex}),i=yt&&r!==pt?-1:yt?A(r,":not(."+e.options.selectedClass+")"):A(r),n.push({multiDragElement:r,index:i})})),{items:l(ft),clones:[].concat(mt),oldIndicies:t,newIndicies:n}},optionListeners:{multiDragKey:function(e){return"ctrl"===(e=e.toLowerCase())?e="Control":e.length>1&&(e=e.charAt(0).toUpperCase()+e.substr(1)),e}}})}function xt(e,t){mt.forEach((function(n,r){var i=t.children[n.sortableIndex+(e?Number(r):0)];i?t.insertBefore(n,i):t.appendChild(n)}))}function wt(){ft.forEach((function(e){e!==pt&&e.parentNode&&e.parentNode.removeChild(e)}))}je.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?y(document,"dragover",this._handleAutoScroll):this.options.supportPointer?y(document,"pointermove",this._handleFallbackAutoScroll):t.touches?y(document,"touchmove",this._handleFallbackAutoScroll):y(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?v(document,"dragover",this._handleAutoScroll):(v(document,"pointermove",this._handleFallbackAutoScroll),v(document,"touchmove",this._handleFallbackAutoScroll),v(document,"mousemove",this._handleFallbackAutoScroll)),nt(),tt(),clearTimeout(_),_=void 0},nulling:function(){Xe=Ge=Qe=et=Ye=Ke=Je=null,Ze.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,r=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,o=document.elementFromPoint(r,i);if(Xe=e,t||p||c||h){it(e,this.options,o,t);var a=V(o,!0);!et||Ye&&r===Ke&&i===Je||(Ye&&nt(),Ye=setInterval((function(){var o=V(document.elementFromPoint(r,i),!0);o!==a&&(a=o,tt()),it(e,n.options,o,t)}),10),Ke=r,Je=i)}else{if(!this.options.bubbleScroll||V(o,!0)===I())return void tt();it(e,this.options,V(o,!1),!1)}}},o(e,{pluginName:"scroll",initializeByDefault:!0})}),je.mount(st,at),t.default=je},"./src/actions/action.ts":
/*!*******************************!*\
  !*** ./src/actions/action.ts ***!
  \*******************************/
/*! exports provided: Action */function(e,t,n){"use strict";n.r(t),n.d(t,"Action",(function(){return l}));var r,i=n(/*! ../base */"./src/base.ts"),o=n(/*! ../jsonobject */"./src/jsonobject.ts"),a=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},l=function(e){function t(t){var n=e.call(this)||this;return Object.assign(n,t),n}return a(t,e),Object.defineProperty(t.prototype,"disabled",{get:function(){return void 0!==this.enabled&&!this.enabled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitle",{get:function(){return("small"!=this.mode&&(this.showTitle||void 0===this.showTitle)||!this.iconName)&&!!this.title},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return"popup"!==this.mode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canShrink",{get:function(){return!!this.iconName},enumerable:!1,configurable:!0}),s([Object(o.property)()],t.prototype,"id",void 0),s([Object(o.property)()],t.prototype,"iconName",void 0),s([Object(o.property)()],t.prototype,"visible",void 0),s([Object(o.property)()],t.prototype,"title",void 0),s([Object(o.property)()],t.prototype,"tooltip",void 0),s([Object(o.property)()],t.prototype,"enabled",void 0),s([Object(o.property)()],t.prototype,"showTitle",void 0),s([Object(o.property)()],t.prototype,"action",void 0),s([Object(o.property)()],t.prototype,"css",void 0),s([Object(o.property)()],t.prototype,"innerCss",void 0),s([Object(o.property)()],t.prototype,"data",void 0),s([Object(o.property)()],t.prototype,"popupModel",void 0),s([Object(o.property)()],t.prototype,"needSeparator",void 0),s([Object(o.property)()],t.prototype,"active",void 0),s([Object(o.property)()],t.prototype,"template",void 0),s([Object(o.property)()],t.prototype,"component",void 0),s([Object(o.property)()],t.prototype,"items",void 0),s([Object(o.property)()],t.prototype,"visibleIndex",void 0),s([Object(o.property)({defaultValue:"large"})],t.prototype,"mode",void 0),s([Object(o.property)()],t.prototype,"disableTabStop",void 0),t}(i.Base)},"./src/actions/adaptive-container.ts":
/*!*******************************************!*\
  !*** ./src/actions/adaptive-container.ts ***!
  \*******************************************/
/*! exports provided: AdaptiveActionContainer */function(e,t,n){"use strict";n.r(t),n.d(t,"AdaptiveActionContainer",(function(){return u}));var r,i=n(/*! ../list */"./src/list.ts"),o=n(/*! ../popup */"./src/popup.ts"),a=n(/*! ./action */"./src/actions/action.ts"),s=n(/*! ./container */"./src/actions/container.ts"),l=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(){var t=e.call(this)||this;return t.invisibleItemsListModel=new i.ListModel([],(function(e){t.invisibleItemSelected(e),t.dotsItemPopupModel.toggleVisibility()}),!1),t.dotsItemPopupModel=new o.PopupModel("sv-list",{model:t.invisibleItemsListModel}),t.dotsItem=new a.Action({id:"dotsItem-id",component:"sv-action-bar-item-dropdown",css:"sv-dots",innerCss:"sv-dots__item",iconName:"icon-dots",action:function(e){t.dotsItemPopupModel.toggleVisibility()},popupModel:t.dotsItemPopupModel}),t}return l(t,e),Object.defineProperty(t.prototype,"visibleItems",{get:function(){return this.actions.filter((function(e){return"popup"!==e.mode}))},enumerable:!1,configurable:!0}),t.prototype.setItems=function(e,t){void 0===t&&(t=!0);var n=e.map((function(e){return e instanceof a.Action?e:new a.Action(e)}));this.actions=t?this.sortItems(n):n},t.prototype.sortItems=function(e){return[].concat(e.filter((function(e){return e.visibleIndex>=0||void 0===e.visibleIndex}))).sort((function(e,t){return e.visibleIndex-t.visibleIndex}))},Object.defineProperty(t.prototype,"hasItems",{get:function(){return(this.actions||[]).length>0},enumerable:!1,configurable:!0}),t.prototype.invisibleItemSelected=function(e){e&&"function"==typeof e.action&&e.action()},t.prototype.showFirstN=function(e){var t=this,n=e,r=[];this.actions.forEach((function(e){e!==t.dotsItem&&(n<=0&&(e.mode="popup",r.push(e)),n--)})),this.invisibleItemsListModel.items=r,this.addDotsButton(e)},t.prototype.removeDotsButton=function(){var e=this.actions.indexOf(this.dotsItem);-1!==e&&this.actions.splice(e,1)},t.prototype.addDotsButton=function(e){e<this.actions.length&&this.actions.splice(e,0,this.dotsItem)},t}(s.ActionContainer)},"./src/actions/container.ts":
/*!**********************************!*\
  !*** ./src/actions/container.ts ***!
  \**********************************/
/*! exports provided: ActionContainer */function(e,t,n){"use strict";n.r(t),n.d(t,"ActionContainer",(function(){return l}));var r,i=n(/*! ../jsonobject */"./src/jsonobject.ts"),o=n(/*! ../base */"./src/base.ts"),a=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),Object.defineProperty(t.prototype,"hasItems",{get:function(){return(this.actions||[]).length>0},enumerable:!1,configurable:!0}),s([Object(i.propertyArray)()],t.prototype,"actions",void 0),t}(o.Base)},"./src/base.ts":
/*!*********************!*\
  !*** ./src/base.ts ***!
  \*********************/
/*! exports provided: Bindings, Base, ArrayChanges, Event, EventBase */function(e,t,n){"use strict";n.r(t),n.d(t,"Bindings",(function(){return c})),n.d(t,"Base",(function(){return p})),n.d(t,"ArrayChanges",(function(){return d})),n.d(t,"Event",(function(){return h})),n.d(t,"EventBase",(function(){return f}));var r,i=n(/*! ./localizablestring */"./src/localizablestring.ts"),o=n(/*! ./helpers */"./src/helpers.ts"),a=n(/*! ./jsonobject */"./src/jsonobject.ts"),s=n(/*! ./settings */"./src/settings.ts"),l=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},c=function(){function e(e){this.obj=e,this.properties=null,this.values=null}return e.prototype.getType=function(){return"bindings"},e.prototype.getNames=function(){var e=[];this.fillProperties();for(var t=0;t<this.properties.length;t++)this.properties[t].isVisible("",this.obj)&&e.push(this.properties[t].name);return e},e.prototype.getProperties=function(){var e=[];this.fillProperties();for(var t=0;t<this.properties.length;t++)e.push(this.properties[t]);return e},e.prototype.setBinding=function(e,t){this.values||(this.values={}),t?this.values[e]=t:(delete this.values[e],0==Object.keys(this.values).length&&(this.values=null))},e.prototype.clearBinding=function(e){this.setBinding(e,"")},e.prototype.isEmpty=function(){return!this.values},e.prototype.getValueNameByPropertyName=function(e){if(this.values)return this.values[e]},e.prototype.getPropertiesByValueName=function(e){if(!this.values)return[];var t=[];for(var n in this.values)this.values[n]==e&&t.push(n);return t},e.prototype.getJson=function(){if(this.isEmpty())return null;var e={};for(var t in this.values)e[t]=this.values[t];return e},e.prototype.setJson=function(e){if(this.values=null,e)for(var t in this.values={},e)this.values[t]=e[t]},e.prototype.fillProperties=function(){if(null===this.properties){this.properties=[];for(var e=a.Serializer.getPropertiesByObj(this.obj),t=0;t<e.length;t++)e[t].isBindable&&this.properties.push(e[t])}},e}(),p=function(){function e(){this.propertyHash={},this.eventList=[],this.isLoadingFromJsonValue=!1,this.loadingOwner=null,this.onPropertyChanged=this.addEvent(),this.onItemValuePropertyChanged=this.addEvent(),this.isCreating=!0,this.bindingsValue=new c(this),a.CustomPropertiesCollection.createProperties(this),this.onBaseCreating(),this.isCreating=!1}return Object.defineProperty(e,"commentPrefix",{get:function(){return s.settings.commentPrefix},set:function(e){s.settings.commentPrefix=e},enumerable:!1,configurable:!0}),e.prototype.isValueEmpty=function(e,t){return void 0===t&&(t=!0),t&&(e=this.trimValue(e)),o.Helpers.isValueEmpty(e)},e.prototype.trimValue=function(e){return e&&("string"==typeof e||e instanceof String)?e.trim():e},e.prototype.IsPropertyEmpty=function(e){return""!==e&&this.isValueEmpty(e)},e.prototype.dispose=function(){for(var e=0;e<this.eventList.length;e++)this.eventList[e].clear();this.isDisposedValue=!0},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return!0===this.isDisposedValue},enumerable:!1,configurable:!0}),e.prototype.addEvent=function(){var e=new f;return this.eventList.push(e),e},e.prototype.onBaseCreating=function(){},e.prototype.getType=function(){return"base"},e.prototype.getSurvey=function(e){return void 0===e&&(e=!1),null},Object.defineProperty(e.prototype,"inSurvey",{get:function(){return!!this.getSurvey(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bindings",{get:function(){return this.bindingsValue},enumerable:!1,configurable:!0}),e.prototype.checkBindings=function(e,t){},e.prototype.updateBindings=function(e,t){var n=this.bindings.getValueNameByPropertyName(e);n&&this.updateBindingValue(n,t)},e.prototype.updateBindingValue=function(e,t){},e.prototype.getTemplate=function(){return this.getType()},Object.defineProperty(e.prototype,"isLoadingFromJson",{get:function(){return this.getIsLoadingFromJson()},enumerable:!1,configurable:!0}),e.prototype.getIsLoadingFromJson=function(){return!(!this.loadingOwner||!this.loadingOwner.isLoadingFromJson)||this.isLoadingFromJsonValue},e.prototype.startLoadingFromJson=function(){this.isLoadingFromJsonValue=!0},e.prototype.endLoadingFromJson=function(){this.isLoadingFromJsonValue=!1},e.prototype.toJSON=function(){return(new a.JsonObject).toJsonObject(this)},e.prototype.fromJSON=function(e){return(new a.JsonObject).toObject(e,this)},e.prototype.clone=function(){var e=a.Serializer.createClass(this.getType());return e.fromJSON(this.toJSON()),e},e.prototype.getPropertyByName=function(e){return a.Serializer.findProperty(this.getType(),e)},e.prototype.isPropertyVisible=function(e){var t=this.getPropertyByName(e);return!!t&&t.isVisible("",this)},e.createProgressInfo=function(){return{questionCount:0,answeredQuestionCount:0,requiredQuestionCount:0,requiredAnsweredQuestionCount:0}},e.prototype.getProgressInfo=function(){return e.createProgressInfo()},e.prototype.localeChanged=function(){},e.prototype.locStrsChanged=function(){if(this.arraysInfo)for(var t in this.arraysInfo)if((r=this.arraysInfo[t])&&r.isItemValues){var n=this.getPropertyValue(t);n&&e.itemValueLocStrChanged&&e.itemValueLocStrChanged(n)}if(this.localizableStrings)for(var t in this.localizableStrings){var r;(r=this.getLocalizableString(t))&&r.strChanged()}},e.prototype.getPropertyValue=function(e,t){void 0===t&&(t=null);var n=this.getPropertyValueCore(this.propertyHash,e);if(this.IsPropertyEmpty(n)){if(null!=t)return t;var r=a.Serializer.findProperty(this.getType(),e);if(r&&(!r.isCustom||!this.isCreating)){if(!this.IsPropertyEmpty(r.defaultValue)&&!Array.isArray(r.defaultValue))return r.defaultValue;if("boolean"==r.type||"switch"==r.type)return!1;if(r.isCustom&&r.onGetValue)return r.onGetValue(this)}}return n},e.prototype.getPropertyValueCore=function(e,t){return this.getPropertyValueCoreHandler?this.getPropertyValueCoreHandler(e,t):e[t]},e.prototype.geValueFromHash=function(){return this.propertyHash.value},e.prototype.setPropertyValueCore=function(e,t,n){this.setPropertyValueCoreHandler&&!this.isDisposedValue?this.setPropertyValueCoreHandler(e,t,n):e[t]=n},Object.defineProperty(e.prototype,"isEditingSurveyElement",{get:function(){var e=this.getSurvey();return!!e&&e.isEditingSurveyElement},enumerable:!1,configurable:!0}),e.prototype.iteratePropertiesHash=function(e){var t=this,n=[];for(var r in this.propertyHash)"value"===r&&this.isEditingSurveyElement&&Array.isArray(this.value)||n.push(r);n.forEach((function(n){return e(t.propertyHash,n)}))},e.prototype.setPropertyValue=function(e,t){var n=this.getPropertyValue(e);if(n&&Array.isArray(n)){if(this.isTwoValueEquals(n,t))return;var r=this.arraysInfo[e];this.setArray(e,n,t,!!r&&r.isItemValues,r?r.onPush:null)}else this.setPropertyValueCore(this.propertyHash,e,t),this.isDisposedValue||this.isTwoValueEquals(n,t)||this.propertyValueChanged(e,n,t)},e.prototype.clearPropertyValue=function(e){this.setPropertyValueCore(this.propertyHash,e,null),delete this.propertyHash[e]},e.prototype.onPropertyValueChangedCallback=function(e,t,n,r,i){},e.prototype.itemValuePropertyChanged=function(e,t,n,r){this.onItemValuePropertyChanged.fire(this,{obj:e,name:t,oldValue:n,newValue:r,propertyName:e.ownerPropertyName})},e.prototype.onPropertyValueChanged=function(e,t,n){},e.prototype.propertyValueChanged=function(e,t,n,r,i){if(!this.isLoadingFromJson&&(this.updateBindings(e,n),this.onPropertyValueChanged(e,t,n),this.onPropertyChanged.fire(this,{name:e,oldValue:t,newValue:n}),this.doPropertyValueChangedCallback(e,t,n,r,this),this.onPropChangeFunctions))for(var o=0;o<this.onPropChangeFunctions.length;o++)this.onPropChangeFunctions[o].name==e&&this.onPropChangeFunctions[o].func(n)},Object.defineProperty(e.prototype,"isInternal",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.doPropertyValueChangedCallback=function(e,t,n,r,i){if(!this.isInternal){i||(i=this);var o=this.getSurvey();o||(o=this),o.doPropertyValueChangedCallback&&o.onPropertyValueChangedCallback(e,t,n,i,r)}},e.prototype.registerFunctionOnPropertyValueChanged=function(e,t,n){if(void 0===n&&(n=null),this.onPropChangeFunctions||(this.onPropChangeFunctions=[]),n)for(var r=0;r<this.onPropChangeFunctions.length;r++){var i=this.onPropChangeFunctions[r];if(i.name==e&&i.key==n)return void(i.func=t)}this.onPropChangeFunctions.push({name:e,func:t,key:n})},e.prototype.registerFunctionOnPropertiesValueChanged=function(e,t,n){void 0===n&&(n=null);for(var r=0;r<e.length;r++)this.registerFunctionOnPropertyValueChanged(e[r],t,n)},e.prototype.unRegisterFunctionOnPropertyValueChanged=function(e,t){if(void 0===t&&(t=null),this.onPropChangeFunctions)for(var n=0;n<this.onPropChangeFunctions.length;n++){var r=this.onPropChangeFunctions[n];if(r.name==e&&r.key==t)return void this.onPropChangeFunctions.splice(n,1)}},e.prototype.unRegisterFunctionOnPropertiesValueChanged=function(e,t){void 0===t&&(t=null);for(var n=0;n<e.length;n++)this.unRegisterFunctionOnPropertyValueChanged(e[n],t)},e.prototype.createCustomLocalizableObj=function(e){!this.getLocalizableString(e)&&this.getLocale&&this.createLocalizableString(e,this)},e.prototype.createLocalizableString=function(e,t,n){var r=this;void 0===n&&(n=!1);var o=new i.LocalizableString(t,n,e);return o.onStrChanged=function(t,n){r.propertyValueChanged(e,t,n)},this.localizableStrings||(this.localizableStrings={}),this.localizableStrings[e]=o,o},e.prototype.getLocalizableString=function(e){return this.localizableStrings?this.localizableStrings[e]:null},e.prototype.getLocalizableStringText=function(e,t){void 0===t&&(t="");var n=this.getLocalizableString(e);if(!n)return"";var r=n.text;return r||t},e.prototype.setLocalizableStringText=function(e,t){var n=this.getLocalizableString(e);n&&(n.text=t)},e.prototype.addUsedLocales=function(e){if(this.localizableStrings)for(var t in this.localizableStrings)(i=this.getLocalizableString(t))&&this.AddLocStringToUsedLocales(i,e);if(this.arraysInfo)for(var t in this.arraysInfo){var n=this.getPropertyValue(t);if(n&&n.length)for(var r=0;r<n.length;r++){var i;(i=n[r])&&i.addUsedLocales&&i.addUsedLocales(e)}}},e.prototype.searchText=function(e,t){var n=[];this.getSearchableLocalizedStrings(n);for(var r=0;r<n.length;r++)n[r].setFindText(e)&&t.push({element:this,str:n[r]})},e.prototype.getSearchableLocalizedStrings=function(e){if(this.localizableStrings){var t=[];this.getSearchableLocKeys(t);for(var n=0;n<t.length;n++){var r=this.getLocalizableString(t[n]);r&&e.push(r)}}if(this.arraysInfo){var i=[];for(this.getSearchableItemValueKeys(i),n=0;n<i.length;n++){var o=this.getPropertyValue(i[n]);if(o)for(var a=0;a<o.length;a++)e.push(o[a].locText)}}},e.prototype.getSearchableLocKeys=function(e){},e.prototype.getSearchableItemValueKeys=function(e){},e.prototype.AddLocStringToUsedLocales=function(e,t){for(var n=e.getLocales(),r=0;r<n.length;r++)t.indexOf(n[r])<0&&t.push(n[r])},e.prototype.createItemValues=function(e){var t=this,n=this.createNewArray(e,(function(n){n.locOwner=t,n.ownerPropertyName=e}));return this.arraysInfo[e].isItemValues=!0,n},e.prototype.notifyArrayChanged=function(e,t){e.onArrayChanged&&e.onArrayChanged(t)},e.prototype.createNewArrayCore=function(e){var t=null;return this.createArrayCoreHandler&&(t=this.createArrayCoreHandler(this.propertyHash,e)),t||(t=new Array,this.setPropertyValueCore(this.propertyHash,e,t)),t},e.prototype.ensureArray=function(e,t,n){if(void 0===t&&(t=null),void 0===n&&(n=null),!this.arraysInfo||!this.arraysInfo[e])return this.createNewArray(e,t,n)},e.prototype.createNewArray=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null);var r=this.createNewArrayCore(e);this.arraysInfo||(this.arraysInfo={}),this.arraysInfo[e]={onPush:t,isItemValues:!1};var i=this;return r.push=function(n){var o=Object.getPrototypeOf(r).push.call(r,n);if(!i.isDisposedValue){t&&t(n,r.length-1);var a=new d(r.length-1,0,[n],[]);i.propertyValueChanged(e,r,r,a),i.notifyArrayChanged(r,a)}return o},r.unshift=function(n){var o=Object.getPrototypeOf(r).unshift.call(r,n);if(!i.isDisposedValue){t&&t(n,r.length-1);var a=new d(0,0,[n],[]);i.propertyValueChanged(e,r,r,a),i.notifyArrayChanged(r,a)}return o},r.pop=function(){var t=Object.getPrototypeOf(r).pop.call(r);if(!i.isDisposedValue){n&&n(t);var o=new d(r.length-1,1,[],[]);i.propertyValueChanged(e,r,r,o),i.notifyArrayChanged(r,o)}return t},r.splice=function(o,a){for(var s,l=[],c=2;c<arguments.length;c++)l[c-2]=arguments[c];o||(o=0),a||(a=0);var p=(s=Object.getPrototypeOf(r).splice).call.apply(s,u([r,o,a],l));if(l||(l=[]),!i.isDisposedValue){if(n&&p)for(var h=0;h<p.length;h++)n(p[h]);if(t)for(h=0;h<l.length;h++)t(l[h],o+h);var f=new d(o,a,l,p);i.propertyValueChanged(e,r,r,f),i.notifyArrayChanged(r,f)}return p},r},e.prototype.getItemValueType=function(){},e.prototype.setArray=function(t,n,r,i,o){var a=[].concat(n);if(Object.getPrototypeOf(n).splice.call(n,0,n.length),r)for(var s=0;s<r.length;s++){var l=r[s];i&&e.createItemValue&&(l=e.createItemValue(l,this.getItemValueType())),Object.getPrototypeOf(n).push.call(n,l),o&&o(n[s])}var u=new d(0,a.length,n,a);this.propertyValueChanged(t,a,n,u),this.notifyArrayChanged(n,u)},e.prototype.isTwoValueEquals=function(e,t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!1),n&&(e=this.getValueInLowCase(e),t=this.getValueInLowCase(t)),r&&(e=this.trimValue(e),t=this.trimValue(t)),o.Helpers.isTwoValueEquals(e,t)},e.copyObject=function(e,t){for(var n in t){var r=t[n];"object"==typeof r&&(r={},this.copyObject(r,t[n])),e[n]=r}},e.prototype.copyCssClasses=function(t,n){n&&("string"==typeof n||n instanceof String?t.root=n:e.copyObject(t,n))},e.prototype.getValueInLowCase=function(e){return e&&"string"==typeof e?e.toLowerCase():e},e}(),d=function(e,t,n,r){this.index=e,this.deleteCount=t,this.itemsToAdd=n,this.deletedItems=r},h=function(){function e(){}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return!this.callbacks||0==this.callbacks.length},enumerable:!1,configurable:!0}),e.prototype.fire=function(e,t){if(this.callbacks)for(var n=0;n<this.callbacks.length;n++)if(this.callbacks[n](e,t),!this.callbacks)return},e.prototype.clear=function(){this.callbacks=void 0},e.prototype.add=function(e){this.hasFunc(e)||(this.callbacks||(this.callbacks=new Array),this.callbacks.push(e),this.fireCallbackChanged())},e.prototype.remove=function(e){if(this.hasFunc(e)){var t=this.callbacks.indexOf(e,0);this.callbacks.splice(t,1),this.fireCallbackChanged()}},e.prototype.hasFunc=function(e){return null!=this.callbacks&&this.callbacks.indexOf(e,0)>-1},e.prototype.fireCallbackChanged=function(){this.onCallbacksChanged&&this.onCallbacksChanged()},e}(),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t}(h)},"./src/calculatedValue.ts":
/*!********************************!*\
  !*** ./src/calculatedValue.ts ***!
  \********************************/
/*! exports provided: CalculatedValue */function(e,t,n){"use strict";n.r(t),n.d(t,"CalculatedValue",(function(){return u}));var r,i=n(/*! ./helpers */"./src/helpers.ts"),o=n(/*! ./base */"./src/base.ts"),a=n(/*! ./conditions */"./src/conditions.ts"),s=n(/*! ./jsonobject */"./src/jsonobject.ts"),l=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var r=e.call(this)||this;return r.expressionIsRunning=!1,r.isCalculated=!1,t&&(r.name=t),n&&(r.expression=n),r}return l(t,e),t.prototype.setOwner=function(e){this.data=e,this.rerunExpression()},t.prototype.getType=function(){return"calculatedvalue"},t.prototype.getSurvey=function(e){return void 0===e&&(e=!1),this.data&&this.data.getSurvey?this.data.getSurvey():null},Object.defineProperty(t.prototype,"owner",{get:function(){return this.data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.getPropertyValue("name","")},set:function(e){this.setPropertyValue("name",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"includeIntoResult",{get:function(){return this.getPropertyValue("includeIntoResult",!1)},set:function(e){this.setPropertyValue("includeIntoResult",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"expression",{get:function(){return this.getPropertyValue("expression","")},set:function(e){this.setPropertyValue("expression",e),this.rerunExpression()},enumerable:!1,configurable:!0}),t.prototype.locCalculation=function(){this.expressionIsRunning=!0},t.prototype.unlocCalculation=function(){this.expressionIsRunning=!1},t.prototype.resetCalculation=function(){this.isCalculated=!1},t.prototype.doCalculation=function(e,t,n){this.isCalculated||(this.runExpressionCore(e,t,n),this.isCalculated=!0)},t.prototype.runExpression=function(e,t){this.runExpressionCore(null,e,t)},Object.defineProperty(t.prototype,"value",{get:function(){if(this.data)return this.data.getVariable(this.name)},enumerable:!1,configurable:!0}),t.prototype.setValue=function(e){this.data&&this.data.setVariable(this.name,e)},Object.defineProperty(t.prototype,"canRunExpression",{get:function(){return!(!this.data||this.isLoadingFromJson||!this.expression||this.expressionIsRunning||!this.name)},enumerable:!1,configurable:!0}),t.prototype.rerunExpression=function(){this.canRunExpression&&this.runExpression(this.data.getFilteredValues(),this.data.getFilteredProperties())},t.prototype.runExpressionCore=function(e,t,n){this.canRunExpression&&(this.ensureExpression(t),this.locCalculation(),e&&this.runDependentExpressions(e,t,n),this.expressionRunner.run(t,n))},t.prototype.runDependentExpressions=function(e,t,n){var r=this.expressionRunner.getVariables();if(r)for(var i=0;i<e.length;i++){var o=e[i];o===this||r.indexOf(o.name)<0||(o.doCalculation(e,t,n),t[o.name]=o.value)}},t.prototype.ensureExpression=function(e){var t=this;this.expressionRunner||(this.expressionRunner=new a.ExpressionRunner(this.expression),this.expressionRunner.onRunComplete=function(e){i.Helpers.isTwoValueEquals(e,t.value)||t.setValue(e),t.unlocCalculation()})},t}(o.Base);s.Serializer.addClass("calculatedvalue",[{name:"!name",isUnique:!0},"expression:expression","includeIntoResult:boolean"],(function(){return new u}),"base")},"./src/choicesRestful.ts":
/*!*******************************!*\
  !*** ./src/choicesRestful.ts ***!
  \*******************************/
/*! exports provided: ChoicesRestful, ChoicesRestfull */function(e,t,n){"use strict";n.r(t),n.d(t,"ChoicesRestful",(function(){return p})),n.d(t,"ChoicesRestfull",(function(){return d}));var r,i=n(/*! ./base */"./src/base.ts"),o=n(/*! ./itemvalue */"./src/itemvalue.ts"),a=n(/*! ./jsonobject */"./src/jsonobject.ts"),s=n(/*! ./error */"./src/error.ts"),l=n(/*! ./settings */"./src/settings.ts"),u=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(){function e(){this.parser=new DOMParser}return e.prototype.assignValue=function(e,t,n){Array.isArray(e[t])?e[t].push(n):void 0!==e[t]?e[t]=[e[t]].concat(n):"object"==typeof n&&1===Object.keys(n).length&&Object.keys(n)[0]===t?e[t]=n[t]:e[t]=n},e.prototype.xml2Json=function(e,t){if(e.children&&e.children.length>0)for(var n=0;n<e.children.length;n++){var r=e.children[n],i={};this.xml2Json(r,i),this.assignValue(t,r.nodeName,i)}else this.assignValue(t,e.nodeName,e.textContent)},e.prototype.parseXmlString=function(e){var t=this.parser.parseFromString(e,"text/xml"),n={};return this.xml2Json(t,n),n},e}(),p=function(e){function t(){var t=e.call(this)||this;return t.lastObjHash="",t.isRunningValue=!1,t.processedUrl="",t.processedPath="",t.isUsingCacheFromUrl=void 0,t.error=null,t.createItemValue=function(e){return new o.ItemValue(e)},t}return u(t,e),Object.defineProperty(t,"EncodeParameters",{get:function(){return l.settings.webserviceEncodeParameters},set:function(e){l.settings.webserviceEncodeParameters=e},enumerable:!1,configurable:!0}),t.clearCache=function(){t.itemsResult={},t.sendingSameRequests={}},t.addSameRequest=function(e){if(!e.isUsingCache)return!1;var n=e.objHash,r=t.sendingSameRequests[n];return r?(r.push(e),e.isRunningValue=!0,!0):(t.sendingSameRequests[e.objHash]=[],!1)},t.unregisterSameRequests=function(e,n){if(e.isUsingCache){var r=t.sendingSameRequests[e.objHash];if(delete t.sendingSameRequests[e.objHash],r)for(var i=0;i<r.length;i++)r[i].isRunningValue=!1,r[i].getResultCallback&&r[i].getResultCallback(n)}},t.getCachedItemsResult=function(e){var n=e.objHash,r=t.itemsResult[n];return!!r&&(e.getResultCallback&&e.getResultCallback(r),!0)},t.prototype.getSurvey=function(e){return void 0===e&&(e=!1),this.owner?this.owner.survey:null},t.prototype.run=function(e){if(void 0===e&&(e=null),this.url&&this.getResultCallback){if(this.processedText(e),!this.processedUrl)return this.doEmptyResultCallback({}),void(this.lastObjHash=this.objHash);this.lastObjHash!==this.objHash&&(this.lastObjHash=this.objHash,this.error=null,this.useChangedItemsResults()||t.addSameRequest(this)||this.sendRequest())}},Object.defineProperty(t.prototype,"isUsingCache",{get:function(){return!0===this.isUsingCacheFromUrl||!1!==this.isUsingCacheFromUrl&&l.settings.useCachingForChoicesRestful},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRunning",{get:function(){return this.getIsRunning()},enumerable:!1,configurable:!0}),t.prototype.getIsRunning=function(){return this.isRunningValue},Object.defineProperty(t.prototype,"isWaitingForParameters",{get:function(){return this.url&&!this.processedUrl},enumerable:!1,configurable:!0}),t.prototype.useChangedItemsResults=function(){return t.getCachedItemsResult(this)},t.prototype.doEmptyResultCallback=function(e){var t=[];this.updateResultCallback&&(t=this.updateResultCallback(t,e)),this.getResultCallback(t)},t.prototype.processedText=function(e){var n=this.url;if(n&&(n=n.replace(t.cacheText,"").replace(t.noCacheText,"")),e){var r=e.processTextEx(n,!1,l.settings.webserviceEncodeParameters),i=e.processTextEx(this.path,!1,l.settings.webserviceEncodeParameters);r.hasAllValuesOnLastRun&&i.hasAllValuesOnLastRun?(this.processedUrl=r.text,this.processedPath=i.text):(this.processedUrl="",this.processedPath="")}else this.processedUrl=n,this.processedPath=this.path;this.onProcessedUrlCallback&&this.onProcessedUrlCallback(this.processedUrl,this.processedPath)},t.prototype.parseResponse=function(e){var t;if(e&&"function"==typeof e.indexOf&&0===e.indexOf("<"))t=(new c).parseXmlString(e);else try{t=JSON.parse(e)}catch(n){t=(e||"").split("\n").map((function(e){return e.trim(" ")})).filter((function(e){return!!e}))}return t},t.prototype.sendRequest=function(){var e=new XMLHttpRequest;e.open("GET",this.processedUrl),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var n=this,r=this.objHash;e.onload=function(){n.beforeLoadRequest(),200===e.status?n.onLoad(n.parseResponse(e.response),r):n.onError(e.statusText,e.responseText)};var i={request:e};t.onBeforeSendRequest&&t.onBeforeSendRequest(this,i),this.beforeSendRequest(),i.request.send()},t.prototype.getType=function(){return"choicesByUrl"},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return!(this.url||this.path||this.valueName||this.titleName||this.imageLinkName)},enumerable:!1,configurable:!0}),t.prototype.getCustomPropertiesNames=function(){for(var e=this.getCustomProperties(),t=new Array,n=0;n<e.length;n++)t.push(this.getCustomPropertyName(e[n].name));return t},t.prototype.getCustomPropertyName=function(e){return e+"Name"},t.prototype.getCustomProperties=function(){for(var e=a.Serializer.getProperties(this.itemValueType),t=[],n=0;n<e.length;n++)"value"!==e[n].name&&"text"!==e[n].name&&"visibleIf"!==e[n].name&&"enableIf"!==e[n].name&&t.push(e[n]);return t},t.prototype.setData=function(e){this.clear(),e.url&&(this.url=e.url),e.path&&(this.path=e.path),e.valueName&&(this.valueName=e.valueName),e.titleName&&(this.titleName=e.titleName),e.imageLinkName&&(this.imageLinkName=e.imageLinkName),void 0!==e.allowEmptyResponse&&(this.allowEmptyResponse=e.allowEmptyResponse),void 0!==e.attachOriginalItems&&(this.attachOriginalItems=e.attachOriginalItems);for(var t=this.getCustomPropertiesNames(),n=0;n<t.length;n++)e[t[n]]&&(this[t[n]]=e[t[n]])},t.prototype.getData=function(){if(this.isEmpty)return null;var e={};this.url&&(e.url=this.url),this.path&&(e.path=this.path),this.valueName&&(e.valueName=this.valueName),this.titleName&&(e.titleName=this.titleName),this.imageLinkName&&(e.imageLinkName=this.imageLinkName),this.allowEmptyResponse&&(e.allowEmptyResponse=this.allowEmptyResponse),this.attachOriginalItems&&(e.attachOriginalItems=this.attachOriginalItems);for(var t=this.getCustomPropertiesNames(),n=0;n<t.length;n++)this[t[n]]&&(e[t[n]]=this[t[n]]);return e},Object.defineProperty(t.prototype,"url",{get:function(){return this.getPropertyValue("url","")},set:function(e){this.setPropertyValue("url",e),this.isUsingCacheFromUrl=void 0,e&&(e.indexOf(t.cacheText)>-1?this.isUsingCacheFromUrl=!0:e.indexOf(t.noCacheText)>-1&&(this.isUsingCacheFromUrl=!1))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.getPropertyValue("path","")},set:function(e){this.setPropertyValue("path",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"valueName",{get:function(){return this.getPropertyValue("valueName","")},set:function(e){this.setPropertyValue("valueName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleName",{get:function(){return this.getPropertyValue("titleName","")},set:function(e){this.setPropertyValue("titleName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageLinkName",{get:function(){return this.getPropertyValue("imageLinkName","")},set:function(e){this.setPropertyValue("imageLinkName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowEmptyResponse",{get:function(){return this.getPropertyValue("allowEmptyResponse",!1)},set:function(e){this.setPropertyValue("allowEmptyResponse",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attachOriginalItems",{get:function(){return this.getPropertyValue("attachOriginalItems",!1)},set:function(e){this.setPropertyValue("attachOriginalItems",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemValueType",{get:function(){if(!this.owner)return"itemvalue";var e=a.Serializer.findProperty(this.owner.getType(),"choices");return e?"itemvalue[]"==e.type?"itemvalue":e.type:"itemvalue"},enumerable:!1,configurable:!0}),t.prototype.clear=function(){this.url="",this.path="",this.valueName="",this.titleName="",this.imageLinkName="";for(var e=this.getCustomPropertiesNames(),t=0;t<e.length;t++)this[e[t]]&&(this[e[t]]="")},t.prototype.beforeSendRequest=function(){this.isRunningValue=!0,this.beforeSendRequestCallback&&this.beforeSendRequestCallback()},t.prototype.beforeLoadRequest=function(){this.isRunningValue=!1},t.prototype.onLoad=function(e,n){void 0===n&&(n=null),n||(n=this.objHash);var r=new Array,i=this.getResultAfterPath(e);if(i&&i.length)for(var o=0;o<i.length;o++){var a=i[o];if(a){var l=this.getItemValueCallback?this.getItemValueCallback(a):this.getValue(a),u=this.createItemValue(l);this.setTitle(u,a),this.setCustomProperties(u,a),this.attachOriginalItems&&(u.originalItem=a);var c=this.getImageLink(a);c&&(u.imageLink=c),r.push(u)}}else this.allowEmptyResponse||(this.error=new s.WebRequestEmptyError(null,this.owner));this.updateResultCallback&&(r=this.updateResultCallback(r,e)),this.isUsingCache&&(t.itemsResult[n]=r),this.callResultCallback(r,n),t.unregisterSameRequests(this,r)},t.prototype.callResultCallback=function(e,t){t==this.objHash&&this.getResultCallback(e)},t.prototype.setCustomProperties=function(e,t){for(var n=this.getCustomProperties(),r=0;r<n.length;r++){var i=n[r],o=this.getValueCore(t,this.getPropertyBinding(i.name));this.isValueEmpty(o)||(e[i.name]=o)}},t.prototype.getPropertyBinding=function(e){return this[this.getCustomPropertyName(e)]?this[this.getCustomPropertyName(e)]:this[e]?this[e]:e},t.prototype.onError=function(e,n){this.error=new s.WebRequestError(e,n,this.owner),this.doEmptyResultCallback(n),t.unregisterSameRequests(this,[])},t.prototype.getResultAfterPath=function(e){if(!e)return e;if(!this.processedPath)return e;for(var t=this.getPathes(),n=0;n<t.length;n++)if(!(e=e[t[n]]))return null;return e},t.prototype.getPathes=function(){var e=[];return 0==(e=this.processedPath.indexOf(";")>-1?this.path.split(";"):this.processedPath.split(",")).length&&e.push(this.processedPath),e},t.prototype.getValue=function(e){return e?this.valueName?this.getValueCore(e,this.valueName):e instanceof Object?Object.keys(e).length<1?null:e[Object.keys(e)[0]]:e:null},t.prototype.setTitle=function(e,t){var n=this.titleName?this.titleName:"title",r=this.getValueCore(t,n);r&&("string"==typeof r?e.text=r:e.locText.setJson(r))},t.prototype.getImageLink=function(e){var t=this.imageLinkName?this.imageLinkName:"imageLink";return this.getValueCore(e,t)},t.prototype.getValueCore=function(e,t){if(!e)return null;if(t.indexOf(".")<0)return e[t];for(var n=t.split("."),r=0;r<n.length;r++)if(!(e=e[n[r]]))return null;return e},Object.defineProperty(t.prototype,"objHash",{get:function(){return this.processedUrl+";"+this.processedPath+";"+this.valueName+";"+this.titleName+";"+this.imageLinkName},enumerable:!1,configurable:!0}),t.cacheText="{CACHE}",t.noCacheText="{NOCACHE}",t.itemsResult={},t.sendingSameRequests={},t}(i.Base),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),Object.defineProperty(t,"EncodeParameters",{get:function(){return p.EncodeParameters},set:function(e){p.EncodeParameters=e},enumerable:!1,configurable:!0}),t.clearCache=function(){p.clearCache()},Object.defineProperty(t,"onBeforeSendRequest",{get:function(){return p.onBeforeSendRequest},set:function(e){p.onBeforeSendRequest=e},enumerable:!1,configurable:!0}),t}(p);a.Serializer.addClass("choicesByUrl",["url","path","valueName","titleName",{name:"imageLinkName",visibleIf:function(e){return!!e&&!!e.owner&&"imagepicker"==e.owner.getType()}},{name:"allowEmptyResponse:boolean",default:!1},{name:"attachOriginalItems:boolean",default:!1,visible:!1}],(function(){return new p}))},"./src/conditionProcessValue.ts":
/*!**************************************!*\
  !*** ./src/conditionProcessValue.ts ***!
  \**************************************/
/*! exports provided: ProcessValue */function(e,t,n){"use strict";n.r(t),n.d(t,"ProcessValue",(function(){return i}));var r=n(/*! ./helpers */"./src/helpers.ts"),i=function(){function e(){this.values=null,this.properties=null}return e.prototype.getFirstName=function(e,t){if(void 0===t&&(t=null),!e)return e;var n="";if(t&&(n=this.getFirstPropertyName(e,t)))return n;for(var r=0;r<e.length;r++){var i=e[r];if("."==i||"["==i)break;n+=i}return n},e.prototype.hasValue=function(e,t){return void 0===t&&(t=null),t||(t=this.values),this.getValueCore(e,t).hasValue},e.prototype.getValue=function(e,t){return void 0===t&&(t=null),t||(t=this.values),this.getValueCore(e,t).value},e.prototype.setValue=function(e,t,n){if(t){var r=this.getNonNestedObject(e,t,!0);r&&(e=r.value,t=r.text,e&&t&&(e[t]=n))}},e.prototype.getValueInfo=function(e){if(e.path)return e.value=this.getValueFromPath(e.path,this.values),e.hasValue=null!==e.value&&!r.Helpers.isValueEmpty(e.value),void(!e.hasValue&&e.path.length>1&&"length"==e.path[e.path.length-1]&&(e.hasValue=!0,e.value=0));var t=this.getValueCore(e.name,this.values);e.value=t.value,e.hasValue=t.hasValue,e.path=t.hasValue?t.path:null},e.prototype.getValueFromPath=function(e,t){for(var n=0;t&&n<e.length;){var i=e[n];if(r.Helpers.isNumber(i)&&Array.isArray(t)&&i>=t.length)return null;t=t[i],n++}return t},e.prototype.getValueCore=function(e,t){var n={hasValue:!1,value:null,path:null},i=t;if(!i&&0!==i&&!1!==i)return n;e&&e.lastIndexOf(".length")>-1&&e.lastIndexOf(".length")===e.length-".length".length&&(n.value=0,n.hasValue=!0);var o=this.getNonNestedObject(i,e,!1);return o?(n.path=o.path,n.value=o.text?this.getObjectValue(o.value,o.text):o.value,n.hasValue=!r.Helpers.isValueEmpty(n.value),n):n},e.prototype.getNonNestedObject=function(e,t,n){for(var i=this.getFirstPropertyName(t,e,n),o=i?[i]:null;t!=i&&e;){if("["==t[0]){var a=this.getObjInArray(e,t);if(!a)return null;e=a.value,t=a.text,o.push(a.index)}else{if(!i&&t==this.getFirstName(t))return{value:e,text:t,path:o};if(e=this.getObjectValue(e,i),r.Helpers.isValueEmpty(e)&&!n)return null;t=t.substr(i.length)}t&&"."==t[0]&&(t=t.substr(1)),(i=this.getFirstPropertyName(t,e,n))&&o.push(i)}return{value:e,text:t,path:o}},e.prototype.getObjInArray=function(e,t){if(!Array.isArray(e))return null;for(var n=1,r="";n<t.length&&"]"!=t[n];)r+=t[n],n++;return t=n<t.length?t.substr(n+1):"",(n=this.getIntValue(r))<0||n>=e.length?null:{value:e[n],text:t,index:n}},e.prototype.getFirstPropertyName=function(e,t,n){if(void 0===n&&(n=!1),!e)return e;if(t||(t={}),t.hasOwnProperty(e))return e;var r=e.toLowerCase(),i=r[0],o=i.toUpperCase();for(var a in t){var s=a[0];if(s===o||s===i){var l=a.toLowerCase();if(l==r)return a;if(r.length<=l.length)continue;var u=r[l.length];if("."!=u&&"["!=u)continue;if(l==r.substr(0,l.length))return a}}if(n&&"["!==e[0]){var c=e.indexOf(".");return c>-1&&(t[e=e.substr(0,c)]={}),e}return""},e.prototype.getObjectValue=function(e,t){return t?e[t]:null},e.prototype.getIntValue=function(e){return"0"==e||(0|e)>0&&e%1==0?Number(e):-1},e}()},"./src/conditions.ts":
/*!***************************!*\
  !*** ./src/conditions.ts ***!
  \***************************/
/*! exports provided: ExpressionRunnerBase, ConditionRunner, ExpressionRunner */function(e,t,n){"use strict";n.r(t),n.d(t,"ExpressionRunnerBase",(function(){return s})),n.d(t,"ConditionRunner",(function(){return l})),n.d(t,"ExpressionRunner",(function(){return u}));var r,i=n(/*! ./conditionProcessValue */"./src/conditionProcessValue.ts"),o=n(/*! ./conditionsParser */"./src/conditionsParser.ts"),a=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(){function e(e){this.processValue=new i.ProcessValue,this.parser=new o.ConditionsParser,this.isAsyncValue=!1,this.hasFunctionValue=!1,this.expression=e}return Object.defineProperty(e.prototype,"expression",{get:function(){return this.expressionValue},set:function(e){this.expression!==e&&(this.expressionValue=e,this.operand=this.parser.parseExpression(e),this.hasFunctionValue=!!this.canRun()&&this.operand.hasFunction(),this.isAsyncValue=!!this.hasFunction()&&this.operand.hasAsyncFunction())},enumerable:!1,configurable:!0}),e.prototype.getVariables=function(){if(!this.operand)return[];var e=[];return this.operand.setVariables(e),e},e.prototype.hasFunction=function(){return this.hasFunctionValue},Object.defineProperty(e.prototype,"isAsync",{get:function(){return this.isAsyncValue},enumerable:!1,configurable:!0}),e.prototype.canRun=function(){return!!this.operand},e.prototype.runCore=function(e,t){var n=this;if(void 0===t&&(t=null),!this.operand)return null;if(this.processValue.values=e,this.processValue.properties=t,!this.isAsync)return this.runValues();this.asyncFuncList=[],this.operand.addToAsyncList(this.asyncFuncList);for(var r=0;r<this.asyncFuncList.length;r++)this.asyncFuncList[r].onAsyncReady=function(){n.doAsyncFunctionReady()};for(r=0;r<this.asyncFuncList.length;r++)this.asyncFuncList[r].evaluateAsync(this.processValue);return!1},e.prototype.doAsyncFunctionReady=function(){for(var e=0;e<this.asyncFuncList.length;e++)if(!this.asyncFuncList[e].isReady)return;this.runValues()},e.prototype.runValues=function(){var e=this.operand.evaluate(this.processValue);return this.doOnComplete(e),e},e.prototype.doOnComplete=function(e){},e}(),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.run=function(e,t){return void 0===t&&(t=null),1==this.runCore(e,t)},t.prototype.doOnComplete=function(e){this.onRunComplete&&this.onRunComplete(1==e)},t}(s),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.run=function(e,t){return void 0===t&&(t=null),this.runCore(e,t)},t.prototype.doOnComplete=function(e){this.onRunComplete&&this.onRunComplete(e)},t}(s)},"./src/conditionsParser.ts":
/*!*********************************!*\
  !*** ./src/conditionsParser.ts ***!
  \*********************************/
/*! exports provided: ConditionsParserError, ConditionsParser */function(e,t,n){"use strict";n.r(t),n.d(t,"ConditionsParserError",(function(){return i})),n.d(t,"ConditionsParser",(function(){return o}));var r=n(/*! ./expressions/expressionParser */"./src/expressions/expressionParser.ts"),i=function(e,t){this.at=e,this.code=t},o=function(){function e(){}return e.prototype.patchExpression=function(e){return e.replace(/=>/g,">=").replace(/=</g,"<=").replace(/<>/g,"!=").replace(/==/g,"= ").replace(/equals/g,"equal ").replace(/notequals/g,"notequal ")},e.prototype.createCondition=function(e){return this.parseExpression(e)},e.prototype.parseExpression=function(t){try{var n=e.parserCache[t];return void 0===n&&((n=Object(r.parse)(this.patchExpression(t))).hasAsyncFunction()||(e.parserCache[t]=n)),n}catch(e){e instanceof r.SyntaxError&&(this.conditionError=new i(e.location.start.offset,e.message))}},Object.defineProperty(e.prototype,"error",{get:function(){return this.conditionError},enumerable:!1,configurable:!0}),e.parserCache={},e}()},"./src/defaultCss/cssbootstrap.ts":
/*!****************************************!*\
  !*** ./src/defaultCss/cssbootstrap.ts ***!
  \****************************************/
/*! exports provided: defaultBootstrapCss */function(e,t,n){"use strict";n.r(t),n.d(t,"defaultBootstrapCss",(function(){return i}));var r=n(/*! ./cssstandard */"./src/defaultCss/cssstandard.ts"),i={root:"sv_main sv_bootstrap_css",container:"sv_container",header:"panel-heading card-header",body:"panel-body card-block mt-4",bodyEmpty:"panel-body card-block mt-4 sv_body_empty",footer:"panel-footer card-footer",title:"",description:"",logo:"sv_logo",logoImage:"sv_logo__image",headerText:"sv_header__text",navigationButton:"",completedPage:"",navigation:{complete:"btn sv_complete_btn",prev:"btn sv_prev_btn",next:"btn sv_next_btn",start:"btn sv_start_btn",preview:"btn sv_preview_btn",edit:"btn sv_edit_btn"},progress:"progress center-block mx-auto mb-4",progressBar:"progress-bar",progressTextUnderBar:"sv-hidden",progressButtonsContainerCenter:"sv_progress-buttons__container-center",progressButtonsContainer:"sv_progress-buttons__container",progressButtonsImageButtonLeft:"sv_progress-buttons__image-button-left",progressButtonsImageButtonRight:"sv_progress-buttons__image-button-right",progressButtonsImageButtonHidden:"sv_progress-buttons__image-button--hidden",progressButtonsListContainer:"sv_progress-buttons__list-container",progressButtonsList:"sv_progress-buttons__list",progressButtonsListElementPassed:"sv_progress-buttons__list-element--passed",progressButtonsListElementCurrent:"sv_progress-buttons__list-element--current",progressButtonsListElementNonClickable:"sv_progress-buttons__list-element--nonclickable",progressButtonsPageTitle:"sv_progress-buttons__page-title",progressButtonsPageDescription:"sv_progress-buttons__page-description",page:{root:"",title:"",description:"small"},pageTitle:"",pageDescription:"small",row:"sv_row",question:{mainRoot:"sv_qstn",flowRoot:"sv_q_flow sv_qstn",header:"",headerLeft:"title-left",content:"",contentLeft:"content-left",titleLeftRoot:"sv_qstn_left",title:"",titleExpandable:"sv_q_title_expandable",number:"sv_q_num",description:"small",descriptionUnderInput:"small",requiredText:"sv_q_required_text",comment:"form-control",required:"",titleRequired:"",hasError:"has-error",indent:20,formGroup:"form-group"},panel:{title:"sv_p_title",titleExpandable:"sv_p_title_expandable",titleOnError:"",icon:"sv_panel_icon",iconExpanded:"sv_expanded",description:"small sv_p_description",container:"sv_p_container",footer:"sv_p_footer",number:"sv_q_num",requiredText:"sv_q_required_text"},error:{root:"alert alert-danger",icon:"glyphicon glyphicon-exclamation-sign",item:"",locationTop:"sv_qstn_error_top",locationBottom:"sv_qstn_error_bottom"},boolean:{root:"sv_qbln form-inline checkbox",item:"sv-boolean",control:"sv-visuallyhidden",itemChecked:"sv-boolean--checked checked",itemIndeterminate:"sv-boolean--indeterminate",itemDisabled:"sv-boolean--disabled",switch:"sv-boolean__switch",slider:"sv-boolean__slider",sliderText:"sv-hidden",label:"sv-boolean__label ",disabledLabel:"sv-boolean__label--disabled",materialDecorator:"sv-item__decorator sv-boolean__decorator ",itemDecorator:"sv-item__svg  sv-boolean__svg",checkedPath:"sv-boolean__checked-path",uncheckedPath:"sv-boolean__unchecked-path",indeterminatePath:"sv-boolean__indeterminate-path"},checkbox:{root:"sv_qcbc sv_qcbx form-inline",item:"checkbox",itemChecked:"checked",itemSelectAll:"sv_q_checkbox_selectall",itemNone:"sv_q_checkbox_none",itemInline:"sv_q_checkbox_inline",itemControl:"",itemDecorator:"sv-hidden",label:"",labelChecked:"",controlLabel:"",materialDecorator:"checkbox-material",other:"sv_q_checkbox_other form-control",column:"sv_q_select_column"},ranking:{root:"sv-ranking",rootMobileMod:"sv-ranking--mobile",rootDragMod:"sv-ranking--drag",item:"sv-ranking-item",itemContent:"sv-ranking-item__content",itemIndex:"sv-ranking-item__index",controlLabel:"sv-ranking-item__text",itemGhostNode:"sv-ranking-item__ghost",itemIconContainer:"sv-ranking-item__icon-container",itemIcon:"sv-ranking-item__icon",itemIconHoverMod:"sv-ranking-item__icon--hover",itemIconFocusMod:"sv-ranking-item__icon--focus",itemGhostMod:"sv-ranking-item--ghost",itemDragMod:"sv-ranking-item--drag"},comment:"form-control",dropdown:{root:"",control:"form-control",other:"sv_q_dd_other form-control"},html:{root:""},image:{root:"sv_q_image",image:"sv_image_image"},matrix:{root:"table sv_q_matrix",label:"sv_q_m_label",itemChecked:"checked",itemDecorator:"sv-hidden",cellText:"sv_q_m_cell_text",cellTextSelected:"sv_q_m_cell_selected bg-primary",cellLabel:"sv_q_m_cell_label"},matrixdropdown:{root:"table",cell:"sv_matrix_cell",headerCell:"sv_matrix_cell_header",row:"sv_matrix_row",detailRow:"sv_matrix_detail_row",detailRowText:"sv_matrix_cell_detail_rowtext",detailCell:"sv_matrix_cell_detail",detailButton:"sv_matrix_cell_detail_button",detailButtonExpanded:"sv_matrix_cell_detail_button_expanded",detailIcon:"sv_detail_panel_icon",detailIconExpanded:"sv_detail_expanded",detailPanelCell:"sv_matrix_cell_detail_panel",actionsCell:"sv_matrix_cell sv_matrix_cell_actions"},matrixdynamic:{root:"table",button:"button",buttonAdd:"",buttonRemove:"",iconAdd:"",iconRemove:"",iconDrag:"sv-matrixdynamic__drag-icon",headerCell:"sv_matrix_cell_header",row:"sv_matrix_row",detailRow:"sv_matrix_detail_row",detailCell:"sv_matrix_cell_detail",detailButton:"sv_matrix_cell_detail_button",detailButtonExpanded:"sv_matrix_cell_detail_button_expanded",detailIcon:"sv_detail_panel_icon",detailIconExpanded:"sv_detail_expanded",detailPanelCell:"sv_matrix_cell_detail_panel",actionsCell:"sv_matrix_cell sv_matrix_cell_actions",emptyRowsSection:"sv_matrix_empty_rows_section",emptyRowsText:"sv_matrix_empty_rows_text",emptyRowsButton:""},paneldynamic:{root:"",navigation:"sv-paneldynamic__navigation",progressTop:"sv-paneldynamic__progress sv-paneldynamic__progress--top",progressBottom:"sv-paneldynamic__progress sv-paneldynamic__progress--bottom",title:"sv-title sv-question__title",button:"button",buttonAdd:"button sv-paneldynamic__add-btn",buttonRemove:"sv_p_remove_btn",buttonRemoveRight:"button sv-paneldynamic__remove-btn--right",buttonPrev:"sv-paneldynamic__prev-btn",buttonNext:"sv-paneldynamic__next-btn",progressContainer:"sv-paneldynamic__progress-container",progress:"sv-progress",progressBar:"sv-progress__bar",progressText:"sv-paneldynamic__progress-text",panelWrapper:"sv_p_wrapper",panelWrapperInRow:"sv_p_wrapper_in_row"},multipletext:{root:"table",itemTitle:"",itemValue:"sv_q_mt_item_value form-control"},radiogroup:{root:"sv_qcbc form-inline",item:"radio",itemChecked:"checked",itemInline:"sv_q_radiogroup_inline",label:"",labelChecked:"",itemControl:"",itemDecorator:"sv-hidden",controlLabel:"",materialDecorator:"circle",other:"sv_q_radiogroup_other form-control",clearButton:"sv_q_radiogroup_clear button",column:"sv_q_select_column"},buttongroup:{root:"sv-button-group",item:"sv-button-group__item",itemIcon:"sv-button-group__item-icon",itemDecorator:"sv-button-group__item-decorator",itemCaption:"sv-button-group__item-caption",itemHover:"sv-button-group__item--hover",itemSelected:"sv-button-group__item--selected",itemDisabled:"sv-button-group__item--disabled",itemControl:"sv-visuallyhidden"},imagepicker:{root:"sv_imgsel",item:"sv_q_imgsel",itemChecked:"checked",itemInline:"sv_q_imagepicker_inline",label:"sv_q_imgsel_label",itemControl:"sv_q_imgsel_control_item",image:"sv_q_imgsel_image",itemText:"sv_q_imgsel_text",clearButton:"sv_q_radiogroup_clear"},rating:{root:"btn-group",item:"btn btn-default btn-secondary",selected:"active",minText:"sv_q_rating_min_text",itemText:"sv_q_rating_item_text",maxText:"sv_q_rating_max_text",disabled:""},text:"form-control",expression:"form-control",file:{root:"sv_q_file",placeholderInput:"sv_q_file_placeholder",preview:"sv_q_file_preview",removeButton:"sv_q_file_remove_button",fileInput:"sv_q_file_input",removeFile:"sv_q_file_remove",removeFileSvg:"sv-hidden",fileDecorator:"sv-hidden",fileSignBottom:"sv-hidden",removeButtonBottom:"sv-hidden"},signaturepad:{root:"sv_q_signaturepad sjs_sp_container",controls:"sjs_sp_controls",placeholder:"sjs_sp_placeholder",clearButton:"sjs_sp_clear"},saveData:{root:"",saving:"alert alert-info",error:"alert alert-danger",success:"alert alert-success",saveAgainButton:""},window:{root:"modal-content",body:"modal-body",header:{root:"modal-header panel-title",title:"pull-left",button:"glyphicon pull-right",buttonExpanded:"glyphicon pull-right glyphicon-chevron-up",buttonCollapsed:"glyphicon pull-right glyphicon-chevron-down"}}};r.surveyCss.bootstrap=i},"./src/defaultCss/cssbootstrapmaterial.ts":
/*!************************************************!*\
  !*** ./src/defaultCss/cssbootstrapmaterial.ts ***!
  \************************************************/
/*! exports provided: defaultBootstrapMaterialCss */function(e,t,n){"use strict";n.r(t),n.d(t,"defaultBootstrapMaterialCss",(function(){return i}));var r=n(/*! ./cssstandard */"./src/defaultCss/cssstandard.ts"),i={root:"sv_main sv_bootstrapmaterial_css",container:"sv_container",header:"card-heading",body:"card-body",bodyEmpty:"card-body sv_body_empty",footer:"card-footer",title:"",description:"",logo:"sv_logo",logoImage:"sv_logo__image",headerText:"sv_header__text",navigationButton:"",completedPage:"",navigation:{complete:"btn sv_complete_btn btn-primary",prev:"btn sv_prev_btn btn-primary",next:"btn sv_next_btn btn-primary",start:"btn sv_start_btn btn-primary",preview:"btn sv_preview_btn btn-primary",edit:"btn sv_edit_btn btn-primary"},progress:"progress center-block mx-auto mb-4",progressBar:"progress-bar",progressTextUnderBar:"sv-hidden",progressButtonsContainerCenter:"sv_progress-buttons__container-center",progressButtonsContainer:"sv_progress-buttons__container",progressButtonsImageButtonLeft:"sv_progress-buttons__image-button-left",progressButtonsImageButtonRight:"sv_progress-buttons__image-button-right",progressButtonsImageButtonHidden:"sv_progress-buttons__image-button--hidden",progressButtonsListContainer:"sv_progress-buttons__list-container",progressButtonsList:"sv_progress-buttons__list",progressButtonsListElementPassed:"sv_progress-buttons__list-element--passed",progressButtonsListElementCurrent:"sv_progress-buttons__list-element--current",progressButtonsListElementNonClickable:"sv_progress-buttons__list-element--nonclickable",progressButtonsPageTitle:"sv_progress-buttons__page-title",progressButtonsPageDescription:"sv_progress-buttons__page-description",page:{root:"",title:"",description:"small"},pageTitle:"",pageDescription:"small",row:"sv_row",question:{mainRoot:"sv_qstn form-group bmd-form-group",flowRoot:"sv_q_flow form-group bmd-form-group",header:"",headerLeft:"title-left",content:"",contentLeft:"content-left",titleLeftRoot:"sv_qstn_left",requiredText:"sv_q_required_text",title:"",titleExpandable:"sv_q_title_expandable",number:"sv_q_num",description:"small",descriptionUnderInput:"small",comment:"form-control",required:"",titleRequired:"",hasError:"has-error",indent:20,formGroup:"form-group bmd-form-group"},panel:{title:"sv_p_title",titleExpandable:"sv_p_title_expandable",titleOnError:"",icon:"sv_panel_icon",iconExpanded:"sv_expanded",description:"small sv_p_description",container:"sv_p_container",footer:"sv_p_footer",number:"sv_q_num",requiredText:"sv_q_required_text"},error:{root:"alert alert-danger",icon:"glyphicon glyphicon-exclamation-sign",item:"",locationTop:"sv_qstn_error_top",locationBottom:"sv_qstn_error_bottom"},boolean:{root:"sv_qbln checkbox",item:"sv-boolean",control:"sv-visuallyhidden",itemChecked:"sv-boolean--checked checked",itemIndeterminate:"sv-boolean--indeterminate",itemDisabled:"sv-boolean--disabled",switch:"sv-boolean__switch",slider:"sv-boolean__slider",sliderText:"sv-hidden",label:"sv-boolean__label ",disabledLabel:"sv-boolean__label--disabled",materialDecorator:"sv-item__decorator sv-boolean__decorator ",itemDecorator:"sv-item__svg  sv-boolean__svg",checkedPath:"sv-boolean__checked-path",uncheckedPath:"sv-boolean__unchecked-path",indeterminatePath:"sv-boolean__indeterminate-path"},checkbox:{root:"sv_qcbx",item:"checkbox",itemChecked:"checked",itemSelectAll:"sv_q_checkbox_selectall",itemNone:"sv_q_checkbox_none",itemInline:"sv_q_checkbox_inline",itemDecorator:"sv-hidden",itemControl:"",label:"",labelChecked:"",controlLabel:"",materialDecorator:"checkbox-decorator",other:"sv_q_checkbox_other form-control",column:"sv_q_select_column"},ranking:{root:"sv-ranking",rootMobileMod:"sv-ranking--mobile",rootDragMod:"sv-ranking--drag",item:"sv-ranking-item",itemContent:"sv-ranking-item__content",itemIndex:"sv-ranking-item__index",controlLabel:"sv-ranking-item__text",itemGhostNode:"sv-ranking-item__ghost",itemIconContainer:"sv-ranking-item__icon-container",itemIcon:"sv-ranking-item__icon",itemIconHoverMod:"sv-ranking-item__icon--hover",itemIconFocusMod:"sv-ranking-item__icon--focus",itemGhostMod:"sv-ranking-item--ghost",itemDragMod:"sv-ranking-item--drag"},comment:"form-control",dropdown:{root:"",control:"form-control",other:"sv_q_dd_other form-control"},html:{root:""},image:{root:"sv_q_image",image:"sv_image_image"},matrix:{root:"table sv_q_matrix",row:"form-group bmd-form-group",label:"sv_q_m_label radio-inline",cellText:"sv_q_m_cell_text",cellTextSelected:"sv_q_m_cell_selected bg-primary",cellLabel:"sv_q_m_cell_label",itemValue:"form-control",itemChecked:"checked",itemDecorator:"sv-hidden",materialDecorator:"bmd-radio"},matrixdropdown:{root:"table",itemValue:"form-group bmd-form-group",headerCell:"sv_matrix_cell_header",row:"sv_matrix_row",detailRow:"sv_matrix_detail_row",detailRowText:"sv_matrix_cell_detail_rowtext",detailCell:"sv_matrix_cell_detail",detailButton:"sv_matrix_cell_detail_button",detailButtonExpanded:"sv_matrix_cell_detail_button_expanded",detailIcon:"sv_detail_panel_icon",detailIconExpanded:"sv_detail_expanded",detailPanelCell:"sv_matrix_cell_detail_panel",actionsCell:"sv_matrix_cell sv_matrix_cell_actions"},matrixdynamic:{mainRoot:"sv_qstn",flowRoot:"sv_q_flow",root:"table",button:"btn btn-primary",itemValue:"form-group bmd-form-group",buttonAdd:"",buttonRemove:"",iconAdd:"",iconRemove:"",iconDrag:"sv-matrixdynamic__drag-icon",headerCell:"sv_matrix_cell_header",row:"sv_matrix_row",detailRow:"sv_matrix_detail_row",detailCell:"sv_matrix_cell_detail",detailButton:"sv_matrix_cell_detail_button",detailButtonExpanded:"sv_matrix_cell_detail_button_expanded",detailIcon:"sv_detail_panel_icon",detailIconExpanded:"sv_detail_expanded",detailPanelCell:"sv_matrix_cell_detail_panel",actionsCell:"sv_matrix_cell sv_matrix_cell_actions",emptyRowsSection:"sv_matrix_empty_rows_section",emptyRowsText:"sv_matrix_empty_rows_text",emptyRowsButton:""},paneldynamic:{root:"",navigation:"sv-paneldynamic__navigation",progressTop:"sv-paneldynamic__progress sv-paneldynamic__progress--top",progressBottom:"sv-paneldynamic__progress sv-paneldynamic__progress--bottom",title:"sv-title sv-question__title",button:"button",buttonAdd:"button sv-paneldynamic__add-btn btn btn-primary",buttonRemove:"button sv-paneldynamic__remove-btn btn btn-primary",buttonRemoveRight:"sv-paneldynamic__remove-btn--right",buttonPrev:"sv-paneldynamic__prev-btn",buttonNext:"sv-paneldynamic__next-btn",progressContainer:"sv-paneldynamic__progress-container",progress:"sv-progress",progressBar:"sv-progress__bar",progressText:"sv-paneldynamic__progress-text",panelWrapper:"sv_p_wrapper",panelWrapperInRow:"sv_p_wrapper_in_row"},multipletext:{root:"table",itemTitle:"",row:"form-group bmd-form-group",itemValue:"sv_q_mt_item_value form-control"},radiogroup:{root:"",item:"radio",itemChecked:"checked",itemInline:"sv_q_radiogroup_inline",itemDecorator:"sv-hidden",label:"",labelChecked:"",itemControl:"",controlLabel:"sv_q_radiogroup_control_label",materialDecorator:"bmd-radio",other:"sv_q_radiogroup_other form-control",clearButton:"sv_q_radiogroup_clear button btn btn-primary",column:"sv_q_select_column"},buttongroup:{root:"sv-button-group",item:"sv-button-group__item",itemIcon:"sv-button-group__item-icon",itemDecorator:"sv-button-group__item-decorator",itemCaption:"sv-button-group__item-caption",itemSelected:"sv-button-group__item--selected",itemHover:"sv-button-group__item--hover",itemDisabled:"sv-button-group__item--disabled",itemControl:"sv-visuallyhidden"},imagepicker:{root:"sv_imgsel",item:"sv_q_imgsel",itemChecked:"checked",itemInline:"sv_q_imagepicker_inline",label:"sv_q_imgsel_label",itemControl:"sv_q_imgsel_control_item",image:"sv_q_imgsel_image",itemText:"sv_q_imgsel_text",clearButton:"sv_q_radiogroup_clear"},rating:{root:"btn-group",item:"btn btn-default btn-secondary",selected:"active",minText:"sv_q_rating_min_text",itemText:"sv_q_rating_item_text",maxText:"sv_q_rating_max_text",disabled:""},text:"form-control",expression:"form-control",file:{root:"form-group bmd-form-group is-fileinput sv_q_file",placeholderInput:"",preview:"sv_q_file_preview",removeButton:"sv_q_file_remove_button",fileInput:"sv_q_file_input",removeFile:"sv_q_file_remove",removeFileSvg:"sv-hidden",fileDecorator:"sv-hidden",fileSignBottom:"sv-hidden",removeButtonBottom:"sv-hidden"},signaturepad:{root:"sv_q_signaturepad sjs_sp_container",controls:"sjs_sp_controls",placeholder:"sjs_sp_placeholder",clearButton:"sjs_sp_clear"},saveData:{root:"",saving:"alert alert-info",error:"alert alert-danger",success:"alert alert-success",saveAgainButton:""},window:{root:"modal-content",body:"modal-body",header:{root:"modal-header card-title",title:"pull-left",button:"glyphicon pull-right",buttonExpanded:"glyphicon pull-right glyphicon-chevron-up",buttonCollapsed:"glyphicon pull-right glyphicon-chevron-down"}}};r.surveyCss.bootstrapmaterial=i},"./src/defaultCss/cssmodern.ts":
/*!*************************************!*\
  !*** ./src/defaultCss/cssmodern.ts ***!
  \*************************************/
/*! exports provided: modernCss */function(e,t,n){"use strict";n.r(t),n.d(t,"modernCss",(function(){return i}));var r=n(/*! ./cssstandard */"./src/defaultCss/cssstandard.ts"),i={root:"sv-root-modern",container:"sv-container-modern",header:"sv-title sv-container-modern__title",body:"sv-body",bodyEmpty:"sv-body sv-body--empty",footer:"sv-footer sv-body__footer sv-clearfix",title:"",description:"",logo:"sv-logo",logoImage:"sv-logo__image",headerText:"sv-header__text",navigationButton:"",completedPage:"sv-completedpage",navigation:{complete:"sv-btn sv-footer__complete-btn",prev:"sv-btn sv-footer__prev-btn",next:"sv-btn sv-footer__next-btn",start:"sv-btn sv-footer__start-btn",preview:"sv-btn sv-footer__preview-btn",edit:"sv-btn sv-footer__edit-btn"},panel:{title:"sv-title sv-panel__title",titleExpandable:"sv-panel__title--expandable",titleOnError:"sv-panel__title--error",description:"sv-description sv-panel__description",container:"sv-panel sv-row__panel",content:"sv-panel__content",icon:"sv-panel__icon",iconExpanded:"sv-panel__icon--expanded",footer:"sv-panel__footer",requiredText:"sv-panel__required-text",number:"sv-question__num"},paneldynamic:{root:"sv-paneldynamic",navigation:"sv-paneldynamic__navigation",title:"sv-title sv-question__title",button:"sv-btn",buttonRemove:"sv-paneldynamic__remove-btn",buttonRemoveRight:"sv-paneldynamic__remove-btn--right",buttonAdd:"sv-paneldynamic__add-btn",progressTop:"sv-paneldynamic__progress sv-paneldynamic__progress--top",progressBottom:"sv-paneldynamic__progress sv-paneldynamic__progress--bottom",buttonPrev:"sv-paneldynamic__prev-btn",buttonNext:"sv-paneldynamic__next-btn",progressContainer:"sv-paneldynamic__progress-container",progress:"sv-progress",progressBar:"sv-progress__bar",progressText:"sv-paneldynamic__progress-text",separator:"sv-paneldynamic__separator",panelWrapper:"sv-paneldynamic__panel-wrapper",panelWrapperInRow:"sv-paneldynamic__panel-wrapper--in-row"},progress:"sv-progress sv-body__progress",progressBar:"sv-progress__bar",progressText:"sv-progress__text",progressTextInBar:"sv-hidden",progressButtonsContainerCenter:"sv_progress-buttons__container-center",progressButtonsContainer:"sv_progress-buttons__container",progressButtonsImageButtonLeft:"sv_progress-buttons__image-button-left",progressButtonsImageButtonRight:"sv_progress-buttons__image-button-right",progressButtonsImageButtonHidden:"sv_progress-buttons__image-button--hidden",progressButtonsListContainer:"sv_progress-buttons__list-container",progressButtonsList:"sv_progress-buttons__list",progressButtonsListElementPassed:"sv_progress-buttons__list-element--passed",progressButtonsListElementCurrent:"sv_progress-buttons__list-element--current",progressButtonsListElementNonClickable:"sv_progress-buttons__list-element--nonclickable",progressButtonsPageTitle:"sv_progress-buttons__page-title",progressButtonsPageDescription:"sv_progress-buttons__page-description",page:{root:"sv-page sv-body__page",title:"sv-title sv-page__title",description:"sv-description sv-page__description"},pageTitle:"sv-title sv-page__title",pageDescription:"sv-description sv-page__description",row:"sv-row sv-clearfix",question:{mainRoot:"sv-question sv-row__question",flowRoot:"sv-question sv-row__question sv-row__question--flow",asCell:"sv-table__cell",header:"sv-question__header",headerLeft:"sv-question__header--location--left",headerTop:"sv-question__header--location--top",headerBottom:"sv-question__header--location--bottom",content:"sv-question__content",contentLeft:"sv-question__content--left",titleLeftRoot:"",titleOnAnswer:"sv-question__title--answer",titleOnError:"sv-question__title--error",title:"sv-title sv-question__title",titleExpandable:"sv-question__title--expandable",icon:"sv-question__icon",iconExpanded:"sv-question__icon--expanded",requiredText:"sv-question__required-text",number:"sv-question__num",description:"sv-description sv-question__description",descriptionUnderInput:"sv-description sv-question__description",comment:"sv-comment",required:"sv-question--required",titleRequired:"sv-question__title--required",indent:20,footer:"sv-question__footer",formGroup:"sv-question__form-group",hasError:"",disabled:"sv-question--disabled"},image:{root:"sv-image",image:"sv_image_image"},error:{root:"sv-question__erbox",icon:"",item:"",locationTop:"sv-question__erbox--location--top",locationBottom:"sv-question__erbox--location--bottom"},checkbox:{root:"sv-selectbase",item:"sv-item sv-checkbox sv-selectbase__item",itemSelectAll:"sv-checkbox--selectall",itemNone:"sv-checkbox--none",itemDisabled:"sv-item--disabled sv-checkbox--disabled",itemChecked:"sv-checkbox--checked",itemHover:"sv-checkbox--allowhover",itemInline:"sv-selectbase__item--inline",label:"sv-selectbase__label",labelChecked:"",itemControl:"sv-visuallyhidden sv-item__control",itemDecorator:"sv-item__svg sv-checkbox__svg",controlLabel:"sv-item__control-label",materialDecorator:"sv-item__decorator sv-checkbox__decorator",other:"sv-comment sv-question__other",column:"sv-selectbase__column"},ranking:{root:"sv-ranking",rootMobileMod:"sv-ranking--mobile",rootDragMod:"sv-ranking--drag",item:"sv-ranking-item",itemContent:"sv-ranking-item__content",itemIndex:"sv-ranking-item__index",controlLabel:"sv-ranking-item__text",itemGhostNode:"sv-ranking-item__ghost",itemIconContainer:"sv-ranking-item__icon-container",itemIcon:"sv-ranking-item__icon",itemIconHoverMod:"sv-ranking-item__icon--hover",itemIconFocusMod:"sv-ranking-item__icon--focus",itemGhostMod:"sv-ranking-item--ghost",itemDragMod:"sv-ranking-item--drag"},radiogroup:{root:"sv-selectbase",item:"sv-item sv-radio sv-selectbase__item",itemInline:"sv-selectbase__item--inline",label:"sv-selectbase__label",labelChecked:"",itemDisabled:"sv-item--disabled sv-radio--disabled",itemChecked:"sv-radio--checked",itemHover:"sv-radio--allowhover",itemControl:"sv-visuallyhidden sv-item__control",itemDecorator:"sv-item__svg sv-radio__svg",controlLabel:"sv-item__control-label",materialDecorator:"sv-item__decorator sv-radio__decorator",other:"sv-comment sv-question__other",clearButton:"sv-btn sv-selectbase__clear-btn",column:"sv-selectbase__column"},buttongroup:{root:"sv-button-group",item:"sv-button-group__item",itemIcon:"sv-button-group__item-icon",itemDecorator:"sv-button-group__item-decorator",itemCaption:"sv-button-group__item-caption",itemSelected:"sv-button-group__item--selected",itemHover:"sv-button-group__item--hover",itemDisabled:"sv-button-group__item--disabled",itemControl:"sv-visuallyhidden"},boolean:{root:"sv_qbln",small:"sv-row__question--small",item:"sv-boolean sv-item",control:"sv-visuallyhidden",itemChecked:"sv-boolean--checked",itemIndeterminate:"sv-boolean--indeterminate",itemDisabled:"sv-item--disabled sv-boolean--disabled",switch:"sv-boolean__switch",slider:"sv-boolean__slider",sliderText:"sv-hidden",label:"sv-boolean__label ",disabledLabel:"sv-boolean__label--disabled",materialDecorator:"sv-item__decorator sv-boolean__decorator ",itemDecorator:"sv-item__svg  sv-boolean__svg",checkedPath:"sv-boolean__checked-path",uncheckedPath:"sv-boolean__unchecked-path",indeterminatePath:"sv-boolean__indeterminate-path"},text:{root:"sv-text",small:"sv-row__question--small",onError:"sv-text--error"},multipletext:{root:"sv-multipletext",item:"sv-multipletext__item",itemTitle:"sv-multipletext__item-title",row:"sv-multipletext__row",cell:"sv-multipletext__cell"},dropdown:{root:"",small:"sv-row__question--small",control:"sv-dropdown",selectWrapper:"",other:"sv-comment sv-question__other",onError:"sv-dropdown--error"},imagepicker:{root:"sv-imagepicker",item:"sv-imagepicker__item",itemInline:"sv-imagepicker__item--inline",itemChecked:"sv-imagepicker__item--checked",itemDisabled:"sv-imagepicker__item--disabled",itemHover:"sv-imagepicker__item--allowhover",label:"sv-imagepicker__label",itemControl:"sv-imagepicker__control",image:"sv-imagepicker__image",itemText:"sv-imagepicker__text",clearButton:"sv-btn",other:"sv-comment sv-question__other"},matrix:{tableWrapper:"sv-matrix",root:"sv-table sv-matrix-root",rowError:"sv-matrix__row--error",cell:"sv-table__cell sv-matrix__cell",headerCell:"sv-table__cell sv-table__cell--header",label:"sv-item sv-radio sv-matrix__label",itemValue:"sv-visuallyhidden sv-item__control sv-radio__control",itemChecked:"sv-radio--checked",itemDisabled:"sv-item--disabled sv-radio--disabled",itemHover:"sv-radio--allowhover",materialDecorator:"sv-item__decorator sv-radio__decorator",itemDecorator:"sv-item__svg sv-radio__svg",cellText:"sv-matrix__text",cellTextSelected:"sv-matrix__text--checked",cellTextDisabled:"sv-matrix__text--disabled"},matrixdropdown:{root:"sv-table sv-matrixdropdown",cell:"sv-table__cell",headerCell:"sv-table__cell sv-table__cell--header",row:"sv-table__row",detailRow:"sv-table__row sv-table__row--detail",detailRowText:"sv-table__cell--detail-rowtext",detailCell:"sv-table__cell--detail",choiceCell:"sv-table__cell--choice",detailButton:"sv-table__cell--detail-button",detailButtonExpanded:"sv-table__cell--detail-button--expanded",detailIcon:"sv-detail-panel__icon",detailIconExpanded:"sv-detail-panel__icon--expanded",detailPanelCell:"sv-table__cell--detail-panel",actionsCell:"sv-table__cell sv-table__cell--actions"},matrixdynamic:{root:"sv-table sv-matrixdynamic",cell:"sv-table__cell",headerCell:"sv-table__cell sv-table__cell--header",button:"sv-btn",buttonAdd:"sv-matrixdynamic__add-btn",buttonRemove:"sv-matrixdynamic__remove-btn",iconAdd:"",iconRemove:"",iconDrag:"sv-matrixdynamic__drag-icon",row:"sv-table__row",detailRow:"sv-table__row sv-table__row--detail",detailCell:"sv-table__cell--detail",choiceCell:"sv-table__cell--choice",detailButton:"sv-table__cell--detail-button",detailButtonExpanded:"sv-table__cell--detail-button--expanded",detailIcon:"sv-detail-panel__icon",detailIconExpanded:"sv-detail-panel__icon--expanded",detailPanelCell:"sv-table__cell--detail-panel",actionsCell:"sv-table__cell sv-table__cell--actions",emptyRowsSection:"sv-table__empty--rows--section",emptyRowsText:"sv-table__empty--rows--text",emptyRowsButton:""},rating:{root:"sv-rating",item:"sv-rating__item",selected:"sv-rating__item--selected",minText:"sv-rating__min-text",itemText:"sv-rating__item-text",maxText:"sv-rating__max-text",itemDisabled:"sv-rating--disabled"},comment:{root:"sv-comment",small:"sv-row__question--small"},expression:"",file:{root:"sv-file",other:"sv-comment sv-question__other",placeholderInput:"sv-visuallyhidden",preview:"sv-file__preview",fileSign:"sv-hidden",fileSignBottom:"sv-file__sign",fileDecorator:"sv-file__decorator",fileInput:"sv-visuallyhidden",noFileChosen:"sv-description sv-file__no-file-chosen",chooseFile:"sv-btn sv-file__choose-btn",controlDisabled:"sv-file__choose-btn--disabled",removeButton:"sv-hidden",removeButtonBottom:"sv-btn sv-file__clean-btn",removeFile:"sv-hidden",removeFileSvg:"sv-file__remove-svg",wrapper:"sv-file__wrapper"},signaturepad:{root:"sv-signaturepad sjs_sp_container",small:"sv-row__question--small",controls:"sjs_sp_controls",placeholder:"sjs_sp_placeholder",clearButton:"sjs_sp_clear"},saveData:{root:"",saving:"",error:"",success:"",saveAgainButton:""},window:{root:"sv_window",body:"sv_window_content",header:{root:"sv_window_title",title:"",button:"",buttonExpanded:"",buttonCollapsed:""}}};r.surveyCss.modern=i},"./src/defaultCss/cssstandard.ts":
/*!***************************************!*\
  !*** ./src/defaultCss/cssstandard.ts ***!
  \***************************************/
/*! exports provided: surveyCss, defaultStandardCss */function(e,t,n){"use strict";n.r(t),n.d(t,"surveyCss",(function(){return r})),n.d(t,"defaultStandardCss",(function(){return i}));var r={currentType:"",getCss:function(){var e=this.currentType?this[this.currentType]:i;return e||(e=i),e}},i={root:"sv_main sv_default_css",container:"sv_container",header:"sv_header",body:"sv_body",bodyEmpty:"sv_body sv_body_empty",footer:"sv_nav",title:"",description:"",logo:"sv_logo",logoImage:"sv_logo__image",headerText:"sv_header__text",navigationButton:"",completedPage:"sv_completed_page",navigation:{complete:"sv_complete_btn",prev:"sv_prev_btn",next:"sv_next_btn",start:"sv_start_btn",preview:"sv_preview_btn",edit:"sv_edit_btn"},progress:"sv_progress",progressBar:"sv_progress_bar",progressTextInBar:"sv-hidden",progressButtonsContainerCenter:"sv_progress-buttons__container-center",progressButtonsContainer:"sv_progress-buttons__container",progressButtonsImageButtonLeft:"sv_progress-buttons__image-button-left",progressButtonsImageButtonRight:"sv_progress-buttons__image-button-right",progressButtonsImageButtonHidden:"sv_progress-buttons__image-button--hidden",progressButtonsListContainer:"sv_progress-buttons__list-container",progressButtonsList:"sv_progress-buttons__list",progressButtonsListElementPassed:"sv_progress-buttons__list-element--passed",progressButtonsListElementCurrent:"sv_progress-buttons__list-element--current",progressButtonsListElementNonClickable:"sv_progress-buttons__list-element--nonclickable",progressButtonsPageTitle:"sv_progress-buttons__page-title",progressButtonsPageDescription:"sv_progress-buttons__page-description",page:{root:"sv_p_root",title:"sv_page_title",description:""},pageTitle:"sv_page_title",pageDescription:"",row:"sv_row",question:{mainRoot:"sv_q sv_qstn",flowRoot:"sv_q_flow sv_qstn",header:"",headerLeft:"title-left",content:"",contentLeft:"content-left",titleLeftRoot:"sv_qstn_left",requiredText:"sv_q_required_text",title:"sv_q_title",titleExpandable:"sv_q_title_expandable",number:"sv_q_num",description:"sv_q_description",comment:"",required:"",titleRequired:"",hasError:"",indent:20,footer:"sv_q_footer",formGroup:"form-group",asCell:"sv_matrix_cell",icon:"sv_question_icon",iconExpanded:"sv_expanded",disabled:"sv_q--disabled"},panel:{title:"sv_p_title",titleExpandable:"sv_p_title_expandable",titleOnError:"",icon:"sv_panel_icon",iconExpanded:"sv_expanded",description:"sv_p_description",container:"sv_p_container",footer:"sv_p_footer",number:"sv_q_num",requiredText:"sv_q_required_text"},error:{root:"sv_q_erbox",icon:"",item:"",locationTop:"sv_qstn_error_top",locationBottom:"sv_qstn_error_bottom"},boolean:{root:"sv_qcbc sv_qbln",item:"sv-boolean",control:"sv-visuallyhidden",itemChecked:"sv-boolean--checked checked",itemIndeterminate:"sv-boolean--indeterminate",itemDisabled:"sv-boolean--disabled",switch:"sv-boolean__switch",slider:"sv-boolean__slider",sliderText:"sv-hidden",label:"sv-boolean__label ",disabledLabel:"sv-boolean__label--disabled",materialDecorator:"sv-item__decorator sv-boolean__decorator ",itemDecorator:"sv-item__svg  sv-boolean__svg",checkedPath:"sv-boolean__checked-path",uncheckedPath:"sv-boolean__unchecked-path",indeterminatePath:"sv-boolean__indeterminate-path"},checkbox:{root:"sv_qcbc sv_qcbx",item:"sv_q_checkbox",itemSelectAll:"sv_q_checkbox_selectall",itemNone:"sv_q_checkbox_none",itemChecked:"checked",itemInline:"sv_q_checkbox_inline",label:"sv_q_checkbox_label",labelChecked:"",itemControl:"sv_q_checkbox_control_item",itemDecorator:"sv-hidden",controlLabel:"sv_q_checkbox_control_label",materialDecorator:"checkbox-material",other:"sv_q_other sv_q_checkbox_other",column:"sv_q_select_column"},ranking:{root:"sv-ranking",rootMobileMod:"sv-ranking--mobile",rootDragMod:"sv-ranking--drag",item:"sv-ranking-item",itemContent:"sv-ranking-item__content",itemIndex:"sv-ranking-item__index",controlLabel:"sv-ranking-item__text",itemGhostNode:"sv-ranking-item__ghost",itemIconContainer:"sv-ranking-item__icon-container",itemIcon:"sv-ranking-item__icon",itemIconHoverMod:"sv-ranking-item__icon--hover",itemIconFocusMod:"sv-ranking-item__icon--focus",itemGhostMod:"sv-ranking-item--ghost",itemDragMod:"sv-ranking-item--drag"},comment:"",dropdown:{root:"",control:"sv_q_dropdown_control",selectWrapper:"sv_select_wrapper",other:"sv_q_dd_other"},html:{root:""},image:{root:"sv_q_image",image:"sv_image_image"},matrix:{root:"sv_q_matrix",label:"sv_q_m_label",itemChecked:"checked",itemDecorator:"sv-hidden",cell:"sv_q_m_cell",cellText:"sv_q_m_cell_text",cellTextSelected:"sv_q_m_cell_selected",cellLabel:"sv_q_m_cell_label"},matrixdropdown:{root:"sv_q_matrix_dropdown",cell:"sv_matrix_cell",headerCell:"sv_matrix_cell_header",row:"sv_matrix_row",detailRow:"sv_matrix_detail_row",detailRowText:"sv_matrix_cell_detail_rowtext",detailCell:"sv_matrix_cell_detail",choiceCell:"sv-table__cell--choice",detailButton:"sv_matrix_cell_detail_button",detailButtonExpanded:"sv_matrix_cell_detail_button_expanded",detailIcon:"sv_detail_panel_icon",detailIconExpanded:"sv_detail_expanded",detailPanelCell:"sv_matrix_cell_detail_panel",actionsCell:"sv_matrix_cell sv_matrix_cell_actions"},matrixdynamic:{root:"sv_q_matrix_dynamic",button:"sv_matrix_dynamic_button",buttonAdd:"",buttonRemove:"",iconAdd:"",iconRemove:"",iconDrag:"sv-matrixdynamic__drag-icon",cell:"sv_matrix_cell",headerCell:"sv_matrix_cell_header",row:"sv_matrix_row",detailRow:"sv_matrix_detail_row",detailCell:"sv_matrix_cell_detail",choiceCell:"sv-table__cell--choice",detailButton:"sv_matrix_cell_detail_button",detailButtonExpanded:"sv_matrix_cell_detail_button_expanded",detailIcon:"sv_detail_panel_icon",detailIconExpanded:"sv_detail_expanded",detailPanelCell:"sv_matrix_cell_detail_panel",actionsCell:"sv_matrix_cell sv_matrix_cell_actions",emptyRowsSection:"sv_matrix_empty_rows_section",emptyRowsText:"sv_matrix_empty_rows_text",emptyRowsButton:""},paneldynamic:{root:"sv_panel_dynamic",title:"sv_p_title",button:"",buttonAdd:"sv-paneldynamic__add-btn",buttonRemove:"sv_p_remove_btn",buttonRemoveRight:"sv_p_remove_btn_right",buttonPrev:"sv-paneldynamic__prev-btn",buttonNext:"sv-paneldynamic__next-btn",progressContainer:"sv-paneldynamic__progress-container",progress:"sv-progress",progressBar:"sv-progress__bar",progressText:"sv-paneldynamic__progress-text",panelWrapper:"sv_p_wrapper",panelWrapperInRow:"sv_p_wrapper_in_row"},multipletext:{root:"sv_q_mt",itemTitle:"sv_q_mt_title",row:"sv_q_mt_row",itemValue:"sv_q_mt_item_value sv_q_text_root"},radiogroup:{root:"sv_qcbc",item:"sv_q_radiogroup",itemChecked:"checked",itemInline:"sv_q_radiogroup_inline",itemDecorator:"sv-hidden",label:"sv_q_radiogroup_label",labelChecked:"",itemControl:"sv_q_radiogroup_control_item",controlLabel:"",materialDecorator:"circle",other:"sv_q_other sv_q_radiogroup_other",clearButton:"sv_q_radiogroup_clear",column:"sv_q_select_column"},buttongroup:{root:"sv-button-group",item:"sv-button-group__item",itemIcon:"sv-button-group__item-icon",itemDecorator:"sv-button-group__item-decorator",itemCaption:"sv-button-group__item-caption",itemHover:"sv-button-group__item--hover",itemSelected:"sv-button-group__item--selected",itemDisabled:"sv-button-group__item--disabled",itemControl:"sv-visuallyhidden"},imagepicker:{root:"sv_imgsel",item:"sv_q_imgsel",itemChecked:"checked",label:"sv_q_imgsel_label",itemControl:"sv_q_imgsel_control_item",image:"sv_q_imgsel_image",itemInline:"sv_q_imagepicker_inline",itemText:"sv_q_imgsel_text",clearButton:"sv_q_radiogroup_clear"},rating:{root:"sv_q_rating",item:"sv_q_rating_item",selected:"active",minText:"sv_q_rating_min_text",itemText:"sv_q_rating_item_text",maxText:"sv_q_rating_max_text"},text:"sv_q_text_root",expression:"",file:{root:"sv_q_file",placeholderInput:"sv-visuallyhidden",preview:"sv_q_file_preview",removeButton:"sv_q_file_remove_button",fileInput:"sv-visuallyhidden",removeFile:"sv_q_file_remove",removeFileSvg:"sv-hidden",fileDecorator:"sv-file__decorator",fileSignBottom:"sv-hidden",removeButtonBottom:"sv-hidden",chooseFile:"sv_q_file_choose_button",noFileChosen:"sv_q_file_placeholder"},signaturepad:{root:"sv_q_signaturepad sjs_sp_container",controls:"sjs_sp_controls",placeholder:"sjs_sp_placeholder",clearButton:"sjs_sp_clear"},saveData:{root:"",saving:"",error:"",success:"",saveAgainButton:""},window:{root:"sv_window",body:"sv_window_content",header:{root:"sv_window_title",title:"",button:"",buttonExpanded:"",buttonCollapsed:""}}};r.standard=i},"./src/dragdrophelper.ts":
/*!*******************************!*\
  !*** ./src/dragdrophelper.ts ***!
  \*******************************/
/*! exports provided: DragDropHelper */function(e,t,n){"use strict";n.r(t),n.d(t,"DragDropHelper",(function(){return l}));var r,i=n(/*! ./base */"./src/base.ts"),o=n(/*! ./jsonobject */"./src/jsonobject.ts"),a=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},l=function(e){function t(n,r){var o=e.call(this)||this;return o.surveyValue=n,o.creator=r,o.onBeforeDrop=new i.EventBase,o.onAfterDrop=new i.EventBase,o.draggedSurveyElement=null,o.dropTargetSurveyElement=null,o.draggedElementShortcut=null,o.scrollIntervalId=null,o.ghostSurveyElement=null,o.isBottom=null,o.isEdge=null,o.pageOrPanel=null,o.itemValueParentQuestion=null,o.moveDraggedElement=function(e){o.moveShortcutElement(e),o.isItemValueBeingDragged()?o.handleItemValueDragOver(e):o.handleSurveyElementDragOver(e)},o.handleEscapeButton=function(e){27==e.keyCode&&o.clear()},o.banDropHere=function(){o.dropTargetSurveyElement=null,o.isBottom=null,o.isEdge=null,o.draggedElementShortcut.style.cursor="not-allowed"},o.banDropSurveyElement=function(){o.removeGhostElementFromSurvey(),o.banDropHere()},o.drop=function(){o.isItemValueBeingDragged()?o.doDropItemValue():o.doDropSurveyElement(),o.clear()},o.doDropItemValue=function(){var e=!o.isBottom,t=o.itemValueParentQuestion.choices,n=t.indexOf(o.draggedSurveyElement),r=t.indexOf(o.dropTargetSurveyElement);n<r&&e?r--:n>r&&o.isBottom&&r++,o.onBeforeDrop.fire(o,null),t.splice(n,1),t.splice(r,0,o.draggedSurveyElement),o.onAfterDrop.fire(o,{draggedElement:o.itemValueParentQuestion})},o.clear=function(){clearInterval(o.scrollIntervalId),document.removeEventListener("pointermove",o.moveDraggedElement),document.removeEventListener("keydown",o.handleEscapeButton),o.draggedElementShortcut.removeEventListener("pointerup",o.drop),document.body.removeChild(o.draggedElementShortcut),o.removeGhostElementFromSurvey();var e=t.prevEvent;e.element=null,e.x=-1,e.y=-1,o.dropTargetSurveyElement=null,o.draggedElementShortcut=null,o.ghostSurveyElement=null,o.draggedSurveyElement=null,o.pageOrPanel=null,o.itemValueParentQuestion=null,o.isBottom=null,o.isEdge=null,o.scrollIntervalId=null},o}return a(t,e),t.prototype.isItemValueBeingDragged=function(){return o.Serializer.isDescendantOf(this.draggedSurveyElement.getType(),"itemvalue")},Object.defineProperty(t.prototype,"dropTargetDataAttributeName",{get:function(){return this.isItemValueBeingDragged()?"[data-svc-drop-target-item-value]":"[data-svc-drop-target-element-name]"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"survey",{get:function(){return this.surveyValue||this.creator.survey},enumerable:!1,configurable:!0}),t.prototype.startDragToolboxItem=function(e,t){var n=this.createElementFromJson(t);this.startDragSurveyElement(e,n)},t.prototype.startDragSurveyElement=function(e,t){this.startDrag(e,t)},t.prototype.startDragItemValue=function(e,t,n){var r=n;this.itemValueParentQuestion=t,this.startDrag(e,r)},t.prototype.startDrag=function(e,t){this.draggedSurveyElement=t,this.ghostSurveyElement=this.createGhostSurveyElement(),this.draggedElementShortcut=this.createDraggedElementShortcut(),document.body.append(this.draggedElementShortcut),this.moveShortcutElement(e),document.addEventListener("pointermove",this.moveDraggedElement),document.addEventListener("keydown",this.handleEscapeButton),this.draggedElementShortcut.addEventListener("pointerup",this.drop)},t.prototype.getItemValueGhostPosition=function(e){return this.dropTargetSurveyElement!==e?null:this.isBottom?"bottom":"top"},t.prototype.createGhostSurveyElement=function(){var e=this.draggedSurveyElement.startWithNewLine,n={type:"html",name:t.ghostSurveyElementName,html:'<div class="svc-drag-drop-ghost"></div>'},r=this.createElementFromJson(n);return r.startWithNewLine=e,r},t.prototype.createDraggedElementShortcut=function(){var e=document.createElement("div"),t=this.draggedSurveyElement;return e.innerText=t.title||t.text||t.name,e.className="svc-drag-shortcut",e},t.prototype.moveShortcutElement=function(e){this.doScroll(e.clientY,e.clientX);var t=this.draggedElementShortcut.offsetHeight,n=this.draggedElementShortcut.offsetWidth,r=n/2,i=t/2,o=document.documentElement.clientHeight,a=document.documentElement.clientWidth;return e.clientX+r>=a?(this.draggedElementShortcut.style.left=e.pageX-e.clientX+a-n+"px",void(this.draggedElementShortcut.style.top=e.pageY-i+"px")):e.clientX-r<=0?(this.draggedElementShortcut.style.left=e.pageX-e.clientX+"px",void(this.draggedElementShortcut.style.top=e.pageY-i+"px")):e.clientY+i>=o?(this.draggedElementShortcut.style.left=e.pageX-r+"px",void(this.draggedElementShortcut.style.top=e.pageY-e.clientY+o-t+"px")):e.clientY-i<=0?(this.draggedElementShortcut.style.left=e.pageX-r+"px",void(this.draggedElementShortcut.style.top=e.pageY-e.clientY+"px")):(this.draggedElementShortcut.style.left=e.pageX-r+"px",void(this.draggedElementShortcut.style.top=e.pageY-i+"px"))},t.prototype.doScroll=function(e,t){clearInterval(this.scrollIntervalId);var n=document.querySelector(".svc-tab-designer.sd-root-modern"),r=n.getBoundingClientRect().top,i=n.getBoundingClientRect().bottom,o=n.getBoundingClientRect().left,a=n.getBoundingClientRect().right;e-r<=50?this.scrollIntervalId=setInterval((function(){n.scrollTop-=5}),10):i-e<=50?this.scrollIntervalId=setInterval((function(){n.scrollTop+=5}),10):a-t<=50?this.scrollIntervalId=setInterval((function(){n.scrollLeft+=5}),10):t-o<=50&&(this.scrollIntervalId=setInterval((function(){n.scrollLeft-=5}),10))},t.prototype.handleItemValueDragOver=function(e){this.draggedElementShortcut.style.cursor="grabbing";var t=this.getDragInfo(e),n=t.dropTargetSurveyElement,r=t.isEdge,i=t.isBottom,o=this.itemValueParentQuestion.choices;if(-1!==o.indexOf(n)){if(o.indexOf(n)-o.indexOf(this.draggedSurveyElement)==1&&(i=!0),o.indexOf(this.draggedSurveyElement)-o.indexOf(n)==1&&(i=!1),n===this.draggedSurveyElement)return this.banDropHere(),!0;n===this.dropTargetSurveyElement&&r===this.isEdge&&i===this.isBottom||(this.dropTargetSurveyElement=n,this.isEdge=r,this.isBottom=i)}else this.banDropHere()},t.prototype.handleSurveyElementDragOver=function(e){this.draggedElementShortcut.style.cursor="grabbing";var n=this.getDragInfo(e),r=n.dropTargetSurveyElement,i=n.isEdge,o=n.isBottom;r?t.restrictDragQuestionBetweenPages&&r.page!==this.draggedSurveyElement.page?this.banDropSurveyElement():r!==this.ghostSurveyElement&&(r===this.dropTargetSurveyElement&&i===this.isEdge&&o===this.isBottom||(this.isEdge=i,this.isBottom=o,this.dropTargetSurveyElement=r,this.insertGhostElementIntoSurvey())):this.banDropSurveyElement()},t.prototype.getDragInfo=function(e){var t=this.findDropTargetHTMLElementFromPoint(e.clientX,e.clientY);if(!t)return{dropTargetSurveyElement:null,isEdge:!0,isBottom:!0};var n=this.getDropTargetSurveyElementFromHTMLElement(t),r=!0;if(!this.isItemValueBeingDragged()&&n.isPanel){var i=this.getPanelDragInfo(t,n,e);n=i.dropTargetSurveyElement,r=i.isEdge}n===this.draggedSurveyElement&&(n=null);var o=this.calculateIsBottom(t,e.clientY);if(n&&"page"===n.getType()&&0!==n.elements.length){var a=n.elements;n=o?a[a.length-1]:a[0]}return{dropTargetSurveyElement:n,isEdge:r,isBottom:o}},t.prototype.getPanelDragInfo=function(e,t,n){var r=this.calculateIsEdge(e,n.clientY),i=t;return r||(e=this.findDeepestDropTargetChild(e),i=this.getDropTargetSurveyElementFromHTMLElement(e)),{dropTargetSurveyElement:i,isEdge:r}},t.prototype.getDropTargetSurveyElementName=function(e){var t=e.dataset.svcDropTargetElementName;return t||(t=e.dataset.svcDropTargetItemValue),t},t.prototype.getDropTargetSurveyElementFromHTMLElement=function(e){var n,r=void 0,i=this.getDropTargetSurveyElementName(e),o=!1;if(!i){var a=e.parentElement.closest(this.dropTargetDataAttributeName);i=this.getDropTargetSurveyElementName(a),o=a!==e&&!!i}if(!i)throw new Error("Can't find drop target survey element name");if(i===t.ghostSurveyElementName)return this.ghostSurveyElement;if(!(r="newGhostPage"===i?t.newGhostPage:this.survey.getPageByName(i))&&(this.survey.pages.forEach((function(e){(n=e.getElementByName(i))&&(r=n)})),r&&"paneldynamic"===r.getType()&&o)){var s=r.page;(r=r.template).page=s}return r||(r=this.itemValueParentQuestion.choices.filter((function(e){return e.value===i}))[0]),r},t.prototype.calculateMiddleOfHTMLElement=function(e){var t=e.getBoundingClientRect();return t.y+t.height/2},t.prototype.calculateIsBottom=function(e,t){return t>=this.calculateMiddleOfHTMLElement(e)},t.prototype.calculateIsEdge=function(e,n){var r=this.calculateMiddleOfHTMLElement(e);return Math.abs(n-r)>=t.edgeHeight},t.prototype.findDropTargetHTMLElement=function(e){if(!e)return null;var t=this.dropTargetDataAttributeName;return e.querySelector(t)||e.closest(t)},t.prototype.findDropTargetHTMLElementFromPoint=function(e,t){this.draggedElementShortcut.hidden=!0;var n=document.elementFromPoint(e,t);return this.draggedElementShortcut.hidden=!1,this.findDropTargetHTMLElement(n)},t.prototype.findDeepestDropTargetChild=function(e){for(var t=e;e;)t=e,e=e.querySelector("[data-svc-drop-target-element-name]");return t},t.prototype.insertGhostElementIntoSurvey=function(){return this.removeGhostElementFromSurvey(),this.ghostSurveyElement.name=t.ghostSurveyElementName,this.pageOrPanel=this.dropTargetSurveyElement.isPage?this.dropTargetSurveyElement:this.dropTargetSurveyElement.page,this.pageOrPanel.dragDropStart(this.draggedSurveyElement,this.ghostSurveyElement,t.nestedPanelDepth),this.pageOrPanel.dragDropMoveTo(this.dropTargetSurveyElement,this.isBottom,this.isEdge)},t.prototype.insertRealElementIntoSurvey=function(){this.removeGhostElementFromSurvey(),this.dropTargetSurveyElement.isPage&&this.dropTargetSurveyElement._isGhost&&this.dropTargetSurveyElement._addGhostPageViewMobel();var e=(new o.JsonObject).toJsonObject(this.draggedSurveyElement);e.type=this.draggedSurveyElement.getType();var n=this.createFakeTargetElement(this.draggedSurveyElement.name,e);this.pageOrPanel.dragDropStart(this.draggedSurveyElement,n,t.nestedPanelDepth),this.pageOrPanel.dragDropMoveTo(this.dropTargetSurveyElement,this.isBottom,this.isEdge),this.onBeforeDrop.fire(this,null);var r=this.pageOrPanel.dragDropFinish();this.onAfterDrop.fire(this,{draggedElement:r})},t.prototype.removeGhostElementFromSurvey=function(){this.pageOrPanel&&this.pageOrPanel.dragDropFinish(!0)},t.prototype.createElementFromJson=function(e){var t=this.createNewElement(e);return t.setSurveyImpl?t.setSurveyImpl(this.survey):t.setData(this.survey),t.renderWidth="100%",t},t.prototype.createNewElement=function(e){var t=o.Serializer.createClass(e.type);return(new o.JsonObject).toObject(e,t),t},t.prototype.createFakeTargetElement=function(e,t){if(!e||!t)return null;var n=null;return n=o.Serializer.createClass(t.type),(new o.JsonObject).toObject(t,n),n.name=e,n.setSurveyImpl?n.setSurveyImpl(this.survey):n.setData(this.survey),n.renderWidth="100%",n},t.prototype.doDropSurveyElement=function(){this.dropTargetSurveyElement&&this.insertRealElementIntoSurvey()},t.restrictDragQuestionBetweenPages=!1,t.edgeHeight=30,t.nestedPanelDepth=-1,t.prevEvent={element:null,x:-1,y:-1},t.newGhostPage=null,t.ghostSurveyElementName="svc-drag-drop-ghost-survey-element-name",s([Object(o.property)()],t.prototype,"dropTargetSurveyElement",void 0),s([Object(o.property)()],t.prototype,"isBottom",void 0),t}(i.Base)},"./src/dxSurveyService.ts":
/*!********************************!*\
  !*** ./src/dxSurveyService.ts ***!
  \********************************/
/*! exports provided: dxSurveyService */function(e,t,n){"use strict";n.r(t),n.d(t,"dxSurveyService",(function(){return i}));var r=n(/*! ./settings */"./src/settings.ts"),i=function(){function e(){}return Object.defineProperty(e,"serviceUrl",{get:function(){return r.settings.surveyServiceUrl},set:function(e){r.settings.surveyServiceUrl=e},enumerable:!1,configurable:!0}),e.prototype.loadSurvey=function(t,n){var r=new XMLHttpRequest;r.open("GET",e.serviceUrl+"/getSurvey?surveyId="+t),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.onload=function(){var e=JSON.parse(r.response);n(200==r.status,e,r.response)},r.send()},e.prototype.getSurveyJsonAndIsCompleted=function(t,n,r){var i=new XMLHttpRequest;i.open("GET",e.serviceUrl+"/getSurveyAndIsCompleted?surveyId="+t+"&clientId="+n),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.onload=function(){var e=JSON.parse(i.response),t=e?e.survey:null,n=e?e.isCompleted:null;r(200==i.status,t,n,i.response)},i.send()},e.prototype.sendResult=function(t,n,r,i,o){void 0===i&&(i=null),void 0===o&&(o=!1);var a=new XMLHttpRequest;a.open("POST",e.serviceUrl+"/post/"),a.setRequestHeader("Content-Type","application/json; charset=utf-8");var s={postId:t,surveyResult:JSON.stringify(n)};i&&(s.clientId=i),o&&(s.isPartialCompleted=!0);var l=JSON.stringify(s);a.onload=a.onerror=function(){r&&r(200===a.status,a.response,a)},a.send(l)},e.prototype.sendFile=function(t,n,r){var i=new XMLHttpRequest;i.onload=i.onerror=function(){r&&r(200==i.status,JSON.parse(i.response))},i.open("POST",e.serviceUrl+"/upload/",!0);var o=new FormData;o.append("file",n),o.append("postId",t),i.send(o)},e.prototype.getResult=function(t,n,r){var i=new XMLHttpRequest,o="resultId="+t+"&name="+n;i.open("GET",e.serviceUrl+"/getResult?"+o),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.onload=function(){var e=null,t=null;if(200==i.status)for(var n in t=[],(e=JSON.parse(i.response)).QuestionResult){var o={name:n,value:e.QuestionResult[n]};t.push(o)}r(200==i.status,e,t,i.response)},i.send()},e.prototype.isCompleted=function(t,n,r){var i=new XMLHttpRequest,o="resultId="+t+"&clientId="+n;i.open("GET",e.serviceUrl+"/isCompleted?"+o),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.onload=function(){var e=null;200==i.status&&(e=JSON.parse(i.response)),r(200==i.status,e,i.response)},i.send()},e}()},"./src/entries/chunks/localization.ts":
/*!********************************************!*\
  !*** ./src/entries/chunks/localization.ts ***!
  \********************************************/
/*! no exports provided */function(e,t,n){"use strict";n.r(t),n(/*! ../../localization/arabic */"./src/localization/arabic.ts"),n(/*! ../../localization/basque */"./src/localization/basque.ts"),n(/*! ../../localization/bulgarian */"./src/localization/bulgarian.ts"),n(/*! ../../localization/catalan */"./src/localization/catalan.ts"),n(/*! ../../localization/croatian */"./src/localization/croatian.ts"),n(/*! ../../localization/czech */"./src/localization/czech.ts"),n(/*! ../../localization/danish */"./src/localization/danish.ts"),n(/*! ../../localization/dutch */"./src/localization/dutch.ts"),n(/*! ../../localization/estonian */"./src/localization/estonian.ts"),n(/*! ../../localization/finnish */"./src/localization/finnish.ts"),n(/*! ../../localization/french */"./src/localization/french.ts"),n(/*! ../../localization/georgian */"./src/localization/georgian.ts"),n(/*! ../../localization/german */"./src/localization/german.ts"),n(/*! ../../localization/greek */"./src/localization/greek.ts"),n(/*! ../../localization/hebrew */"./src/localization/hebrew.ts"),n(/*! ../../localization/hindi */"./src/localization/hindi.ts"),n(/*! ../../localization/hungarian */"./src/localization/hungarian.ts"),n(/*! ../../localization/icelandic */"./src/localization/icelandic.ts"),n(/*! ../../localization/indonesian */"./src/localization/indonesian.ts"),n(/*! ../../localization/italian */"./src/localization/italian.ts"),n(/*! ../../localization/japanese */"./src/localization/japanese.ts"),n(/*! ../../localization/kazakh */"./src/localization/kazakh.ts"),n(/*! ../../localization/korean */"./src/localization/korean.ts"),n(/*! ../../localization/latvian */"./src/localization/latvian.ts"),n(/*! ../../localization/lithuanian */"./src/localization/lithuanian.ts"),n(/*! ../../localization/macedonian */"./src/localization/macedonian.ts"),n(/*! ../../localization/norwegian */"./src/localization/norwegian.ts"),n(/*! ../../localization/persian */"./src/localization/persian.ts"),n(/*! ../../localization/polish */"./src/localization/polish.ts"),n(/*! ../../localization/portuguese */"./src/localization/portuguese.ts"),n(/*! ../../localization/portuguese-br */"./src/localization/portuguese-br.ts"),n(/*! ../../localization/romanian */"./src/localization/romanian.ts"),n(/*! ../../localization/russian */"./src/localization/russian.ts"),n(/*! ../../localization/serbian */"./src/localization/serbian.ts"),n(/*! ../../localization/simplified-chinese */"./src/localization/simplified-chinese.ts"),n(/*! ../../localization/spanish */"./src/localization/spanish.ts"),n(/*! ../../localization/swahili */"./src/localization/swahili.ts"),n(/*! ../../localization/swedish */"./src/localization/swedish.ts"),n(/*! ../../localization/tajik */"./src/localization/tajik.ts"),n(/*! ../../localization/thai */"./src/localization/thai.ts"),n(/*! ../../localization/traditional-chinese */"./src/localization/traditional-chinese.ts"),n(/*! ../../localization/turkish */"./src/localization/turkish.ts"),n(/*! ../../localization/ukrainian */"./src/localization/ukrainian.ts"),n(/*! ../../localization/vietnamese */"./src/localization/vietnamese.ts"),n(/*! ../../localization/welsh */"./src/localization/welsh.ts")},"./src/entries/chunks/model.ts":
/*!*************************************!*\
  !*** ./src/entries/chunks/model.ts ***!
  \*************************************/
/*! exports provided: Version, settings, Helpers, AnswerCountValidator, EmailValidator, NumericValidator, RegexValidator, SurveyValidator, TextValidator, ValidatorResult, ExpressionValidator, ValidatorRunner, ItemValue, Base, Event, ArrayChanges, SurveyError, SurveyElement, CalculatedValue, CustomError, AnswerRequiredError, OneAnswerRequiredError, RequreNumericError, ExceedSizeError, LocalizableString, LocalizableStrings, HtmlConditionItem, UrlConditionItem, ChoicesRestful, ChoicesRestfull, FunctionFactory, registerFunction, ConditionRunner, ExpressionRunner, Operand, Const, BinaryOperand, Variable, FunctionOperand, ArrayOperand, ConditionsParser, ProcessValue, JsonError, JsonIncorrectTypeError, JsonMetadata, JsonMetadataClass, JsonMissingTypeError, JsonMissingTypeErrorBase, JsonObject, JsonObjectProperty, JsonRequiredPropertyError, JsonUnknownPropertyError, Serializer, property, propertyArray, MatrixDropdownCell, MatrixDropdownColumn, matrixDropdownColumnTypes, MatrixDropdownRowModelBase, QuestionMatrixDropdownModelBase, QuestionMatrixDropdownRenderedCell, QuestionMatrixDropdownRenderedRow, QuestionMatrixDropdownRenderedTable, MatrixDropdownRowModel, QuestionMatrixDropdownModel, MatrixDynamicRowModel, QuestionMatrixDynamicModel, MatrixRowModel, MatrixCells, QuestionMatrixModel, MultipleTextItemModel, QuestionMultipleTextModel, PanelModel, PanelModelBase, QuestionRowModel, FlowPanelModel, PageModel, Question, QuestionNonValue, QuestionEmptyModel, QuestionCheckboxBase, QuestionSelectBase, QuestionCheckboxModel, QuestionRankingModel, QuestionCommentModel, QuestionDropdownModel, QuestionFactory, ElementFactory, QuestionFileModel, QuestionHtmlModel, QuestionRadiogroupModel, QuestionRatingModel, QuestionExpressionModel, QuestionTextModel, QuestionBooleanModel, QuestionImagePickerModel, ImageItemValue, QuestionImageModel, QuestionSignaturePadModel, QuestionPanelDynamicModel, QuestionPanelDynamicItem, SurveyTimer, SurveyProgressButtonsModel, SurveyModel, SurveyTrigger, SurveyTriggerComplete, SurveyTriggerSetValue, SurveyTriggerVisible, SurveyTriggerCopyValue, SurveyTriggerRunExpression, Trigger, SurveyWindowModel, TextPreProcessor, dxSurveyService, englishStrings, surveyLocalization, surveyStrings, QuestionCustomWidget, CustomWidgetCollection, QuestionCustomModel, QuestionCompositeModel, ComponentQuestionJSON, ComponentCollection, StylesManager, ListModel, PopupModel, PopupBaseViewModel, QuestionButtonGroupModel, ButtonGroupItemModel, ButtonGroupItemValue, IsMobile, confirmAction, detectIEOrEdge, doKey2Click, loadFileFromBase64, createSvg, surveyCss, DragDropHelper */function(e,t,n){"use strict";n.r(t),n.d(t,"Version",(function(){return he})),n(/*! ../../main.scss */"./src/main.scss");var r=n(/*! ../../settings */"./src/settings.ts");n.d(t,"settings",(function(){return r.settings}));var i=n(/*! ../../helpers */"./src/helpers.ts");n.d(t,"Helpers",(function(){return i.Helpers}));var o=n(/*! ../../validator */"./src/validator.ts");n.d(t,"AnswerCountValidator",(function(){return o.AnswerCountValidator})),n.d(t,"EmailValidator",(function(){return o.EmailValidator})),n.d(t,"NumericValidator",(function(){return o.NumericValidator})),n.d(t,"RegexValidator",(function(){return o.RegexValidator})),n.d(t,"SurveyValidator",(function(){return o.SurveyValidator})),n.d(t,"TextValidator",(function(){return o.TextValidator})),n.d(t,"ValidatorResult",(function(){return o.ValidatorResult})),n.d(t,"ExpressionValidator",(function(){return o.ExpressionValidator})),n.d(t,"ValidatorRunner",(function(){return o.ValidatorRunner}));var a=n(/*! ../../itemvalue */"./src/itemvalue.ts");n.d(t,"ItemValue",(function(){return a.ItemValue}));var s=n(/*! ../../base */"./src/base.ts");n.d(t,"Base",(function(){return s.Base})),n.d(t,"Event",(function(){return s.Event})),n.d(t,"ArrayChanges",(function(){return s.ArrayChanges}));var l=n(/*! ../../survey-error */"./src/survey-error.ts");n.d(t,"SurveyError",(function(){return l.SurveyError}));var u=n(/*! ../../survey-element */"./src/survey-element.ts");n.d(t,"SurveyElement",(function(){return u.SurveyElement}));var c=n(/*! ../../calculatedValue */"./src/calculatedValue.ts");n.d(t,"CalculatedValue",(function(){return c.CalculatedValue}));var p=n(/*! ../../error */"./src/error.ts");n.d(t,"CustomError",(function(){return p.CustomError})),n.d(t,"AnswerRequiredError",(function(){return p.AnswerRequiredError})),n.d(t,"OneAnswerRequiredError",(function(){return p.OneAnswerRequiredError})),n.d(t,"RequreNumericError",(function(){return p.RequreNumericError})),n.d(t,"ExceedSizeError",(function(){return p.ExceedSizeError}));var d=n(/*! ../../localizablestring */"./src/localizablestring.ts");n.d(t,"LocalizableString",(function(){return d.LocalizableString})),n.d(t,"LocalizableStrings",(function(){return d.LocalizableStrings}));var h=n(/*! ../../expressionItems */"./src/expressionItems.ts");n.d(t,"HtmlConditionItem",(function(){return h.HtmlConditionItem})),n.d(t,"UrlConditionItem",(function(){return h.UrlConditionItem}));var f=n(/*! ../../choicesRestful */"./src/choicesRestful.ts");n.d(t,"ChoicesRestful",(function(){return f.ChoicesRestful})),n.d(t,"ChoicesRestfull",(function(){return f.ChoicesRestfull}));var m=n(/*! ../../functionsfactory */"./src/functionsfactory.ts");n.d(t,"FunctionFactory",(function(){return m.FunctionFactory})),n.d(t,"registerFunction",(function(){return m.registerFunction}));var g=n(/*! ../../conditions */"./src/conditions.ts");n.d(t,"ConditionRunner",(function(){return g.ConditionRunner})),n.d(t,"ExpressionRunner",(function(){return g.ExpressionRunner}));var y=n(/*! ../../expressions/expressions */"./src/expressions/expressions.ts");n.d(t,"Operand",(function(){return y.Operand})),n.d(t,"Const",(function(){return y.Const})),n.d(t,"BinaryOperand",(function(){return y.BinaryOperand})),n.d(t,"Variable",(function(){return y.Variable})),n.d(t,"FunctionOperand",(function(){return y.FunctionOperand})),n.d(t,"ArrayOperand",(function(){return y.ArrayOperand}));var v=n(/*! ../../conditionsParser */"./src/conditionsParser.ts");n.d(t,"ConditionsParser",(function(){return v.ConditionsParser}));var b=n(/*! ../../conditionProcessValue */"./src/conditionProcessValue.ts");n.d(t,"ProcessValue",(function(){return b.ProcessValue}));var x=n(/*! ../../jsonobject */"./src/jsonobject.ts");n.d(t,"JsonError",(function(){return x.JsonError})),n.d(t,"JsonIncorrectTypeError",(function(){return x.JsonIncorrectTypeError})),n.d(t,"JsonMetadata",(function(){return x.JsonMetadata})),n.d(t,"JsonMetadataClass",(function(){return x.JsonMetadataClass})),n.d(t,"JsonMissingTypeError",(function(){return x.JsonMissingTypeError})),n.d(t,"JsonMissingTypeErrorBase",(function(){return x.JsonMissingTypeErrorBase})),n.d(t,"JsonObject",(function(){return x.JsonObject})),n.d(t,"JsonObjectProperty",(function(){return x.JsonObjectProperty})),n.d(t,"JsonRequiredPropertyError",(function(){return x.JsonRequiredPropertyError})),n.d(t,"JsonUnknownPropertyError",(function(){return x.JsonUnknownPropertyError})),n.d(t,"Serializer",(function(){return x.Serializer})),n.d(t,"property",(function(){return x.property})),n.d(t,"propertyArray",(function(){return x.propertyArray}));var w=n(/*! ../../question_matrixdropdownbase */"./src/question_matrixdropdownbase.ts");n.d(t,"MatrixDropdownCell",(function(){return w.MatrixDropdownCell})),n.d(t,"MatrixDropdownColumn",(function(){return w.MatrixDropdownColumn})),n.d(t,"matrixDropdownColumnTypes",(function(){return w.matrixDropdownColumnTypes})),n.d(t,"MatrixDropdownRowModelBase",(function(){return w.MatrixDropdownRowModelBase})),n.d(t,"QuestionMatrixDropdownModelBase",(function(){return w.QuestionMatrixDropdownModelBase})),n.d(t,"QuestionMatrixDropdownRenderedCell",(function(){return w.QuestionMatrixDropdownRenderedCell})),n.d(t,"QuestionMatrixDropdownRenderedRow",(function(){return w.QuestionMatrixDropdownRenderedRow})),n.d(t,"QuestionMatrixDropdownRenderedTable",(function(){return w.QuestionMatrixDropdownRenderedTable}));var _=n(/*! ../../question_matrixdropdown */"./src/question_matrixdropdown.ts");n.d(t,"MatrixDropdownRowModel",(function(){return _.MatrixDropdownRowModel})),n.d(t,"QuestionMatrixDropdownModel",(function(){return _.QuestionMatrixDropdownModel}));var C=n(/*! ../../question_matrixdynamic */"./src/question_matrixdynamic.ts");n.d(t,"MatrixDynamicRowModel",(function(){return C.MatrixDynamicRowModel})),n.d(t,"QuestionMatrixDynamicModel",(function(){return C.QuestionMatrixDynamicModel}));var S=n(/*! ../../question_matrix */"./src/question_matrix.ts");n.d(t,"MatrixRowModel",(function(){return S.MatrixRowModel})),n.d(t,"MatrixCells",(function(){return S.MatrixCells})),n.d(t,"QuestionMatrixModel",(function(){return S.QuestionMatrixModel}));var k=n(/*! ../../question_multipletext */"./src/question_multipletext.ts");n.d(t,"MultipleTextItemModel",(function(){return k.MultipleTextItemModel})),n.d(t,"QuestionMultipleTextModel",(function(){return k.QuestionMultipleTextModel}));var E=n(/*! ../../panel */"./src/panel.ts");n.d(t,"PanelModel",(function(){return E.PanelModel})),n.d(t,"PanelModelBase",(function(){return E.PanelModelBase})),n.d(t,"QuestionRowModel",(function(){return E.QuestionRowModel}));var T=n(/*! ../../flowpanel */"./src/flowpanel.ts");n.d(t,"FlowPanelModel",(function(){return T.FlowPanelModel}));var I=n(/*! ../../page */"./src/page.ts");n.d(t,"PageModel",(function(){return I.PageModel})),n(/*! ../../template-renderer */"./src/template-renderer.ts");var P=n(/*! ../../question */"./src/question.ts");n.d(t,"Question",(function(){return P.Question}));var O=n(/*! ../../questionnonvalue */"./src/questionnonvalue.ts");n.d(t,"QuestionNonValue",(function(){return O.QuestionNonValue}));var N=n(/*! ../../question_empty */"./src/question_empty.ts");n.d(t,"QuestionEmptyModel",(function(){return N.QuestionEmptyModel}));var R=n(/*! ../../question_baseselect */"./src/question_baseselect.ts");n.d(t,"QuestionCheckboxBase",(function(){return R.QuestionCheckboxBase})),n.d(t,"QuestionSelectBase",(function(){return R.QuestionSelectBase}));var A=n(/*! ../../question_checkbox */"./src/question_checkbox.ts");n.d(t,"QuestionCheckboxModel",(function(){return A.QuestionCheckboxModel}));var D=n(/*! ../../question_ranking */"./src/question_ranking.ts");n.d(t,"QuestionRankingModel",(function(){return D.QuestionRankingModel}));var V=n(/*! ../../question_comment */"./src/question_comment.ts");n.d(t,"QuestionCommentModel",(function(){return V.QuestionCommentModel}));var M=n(/*! ../../question_dropdown */"./src/question_dropdown.ts");n.d(t,"QuestionDropdownModel",(function(){return M.QuestionDropdownModel}));var F=n(/*! ../../questionfactory */"./src/questionfactory.ts");n.d(t,"QuestionFactory",(function(){return F.QuestionFactory})),n.d(t,"ElementFactory",(function(){return F.ElementFactory}));var L=n(/*! ../../question_file */"./src/question_file.ts");n.d(t,"QuestionFileModel",(function(){return L.QuestionFileModel}));var z=n(/*! ../../question_html */"./src/question_html.ts");n.d(t,"QuestionHtmlModel",(function(){return z.QuestionHtmlModel}));var j=n(/*! ../../question_radiogroup */"./src/question_radiogroup.ts");n.d(t,"QuestionRadiogroupModel",(function(){return j.QuestionRadiogroupModel}));var q=n(/*! ../../question_rating */"./src/question_rating.ts");n.d(t,"QuestionRatingModel",(function(){return q.QuestionRatingModel}));var $=n(/*! ../../question_expression */"./src/question_expression.ts");n.d(t,"QuestionExpressionModel",(function(){return $.QuestionExpressionModel}));var B=n(/*! ../../question_text */"./src/question_text.ts");n.d(t,"QuestionTextModel",(function(){return B.QuestionTextModel}));var U=n(/*! ../../question_boolean */"./src/question_boolean.ts");n.d(t,"QuestionBooleanModel",(function(){return U.QuestionBooleanModel}));var W=n(/*! ../../question_imagepicker */"./src/question_imagepicker.ts");n.d(t,"QuestionImagePickerModel",(function(){return W.QuestionImagePickerModel})),n.d(t,"ImageItemValue",(function(){return W.ImageItemValue}));var H=n(/*! ../../question_image */"./src/question_image.ts");n.d(t,"QuestionImageModel",(function(){return H.QuestionImageModel}));var Q=n(/*! ../../question_signaturepad */"./src/question_signaturepad.ts");n.d(t,"QuestionSignaturePadModel",(function(){return Q.QuestionSignaturePadModel}));var G=n(/*! ../../question_paneldynamic */"./src/question_paneldynamic.ts");n.d(t,"QuestionPanelDynamicModel",(function(){return G.QuestionPanelDynamicModel})),n.d(t,"QuestionPanelDynamicItem",(function(){return G.QuestionPanelDynamicItem}));var K=n(/*! ../../surveytimer */"./src/surveytimer.ts");n.d(t,"SurveyTimer",(function(){return K.SurveyTimer}));var J=n(/*! ../../surveyProgressButtons */"./src/surveyProgressButtons.ts");n.d(t,"SurveyProgressButtonsModel",(function(){return J.SurveyProgressButtonsModel}));var X=n(/*! ../../survey */"./src/survey.ts");n.d(t,"SurveyModel",(function(){return X.SurveyModel}));var Y=n(/*! ../../trigger */"./src/trigger.ts");n.d(t,"SurveyTrigger",(function(){return Y.SurveyTrigger})),n.d(t,"SurveyTriggerComplete",(function(){return Y.SurveyTriggerComplete})),n.d(t,"SurveyTriggerSetValue",(function(){return Y.SurveyTriggerSetValue})),n.d(t,"SurveyTriggerVisible",(function(){return Y.SurveyTriggerVisible})),n.d(t,"SurveyTriggerCopyValue",(function(){return Y.SurveyTriggerCopyValue})),n.d(t,"SurveyTriggerRunExpression",(function(){return Y.SurveyTriggerRunExpression})),n.d(t,"Trigger",(function(){return Y.Trigger}));var Z=n(/*! ../../surveyWindow */"./src/surveyWindow.ts");n.d(t,"SurveyWindowModel",(function(){return Z.SurveyWindowModel}));var ee=n(/*! ../../textPreProcessor */"./src/textPreProcessor.ts");n.d(t,"TextPreProcessor",(function(){return ee.TextPreProcessor}));var te=n(/*! ../../dxSurveyService */"./src/dxSurveyService.ts");n.d(t,"dxSurveyService",(function(){return te.dxSurveyService}));var ne=n(/*! ../../localization/english */"./src/localization/english.ts");n.d(t,"englishStrings",(function(){return ne.englishStrings}));var re=n(/*! ../../surveyStrings */"./src/surveyStrings.ts");n.d(t,"surveyLocalization",(function(){return re.surveyLocalization})),n.d(t,"surveyStrings",(function(){return re.surveyStrings}));var ie=n(/*! ../../questionCustomWidgets */"./src/questionCustomWidgets.ts");n.d(t,"QuestionCustomWidget",(function(){return ie.QuestionCustomWidget})),n.d(t,"CustomWidgetCollection",(function(){return ie.CustomWidgetCollection}));var oe=n(/*! ../../question_custom */"./src/question_custom.ts");n.d(t,"QuestionCustomModel",(function(){return oe.QuestionCustomModel})),n.d(t,"QuestionCompositeModel",(function(){return oe.QuestionCompositeModel})),n.d(t,"ComponentQuestionJSON",(function(){return oe.ComponentQuestionJSON})),n.d(t,"ComponentCollection",(function(){return oe.ComponentCollection}));var ae=n(/*! ../../stylesmanager */"./src/stylesmanager.ts");n.d(t,"StylesManager",(function(){return ae.StylesManager}));var se=n(/*! ../../list */"./src/list.ts");n.d(t,"ListModel",(function(){return se.ListModel}));var le=n(/*! ../../popup */"./src/popup.ts");n.d(t,"PopupModel",(function(){return le.PopupModel})),n.d(t,"PopupBaseViewModel",(function(){return le.PopupBaseViewModel}));var ue=n(/*! ../../question_buttongroup */"./src/question_buttongroup.ts");n.d(t,"QuestionButtonGroupModel",(function(){return ue.QuestionButtonGroupModel})),n.d(t,"ButtonGroupItemModel",(function(){return ue.ButtonGroupItemModel})),n.d(t,"ButtonGroupItemValue",(function(){return ue.ButtonGroupItemValue}));var ce=n(/*! ../../utils/is-mobile */"./src/utils/is-mobile.ts");n.d(t,"IsMobile",(function(){return ce.IsMobile}));var pe=n(/*! ../../utils/utils */"./src/utils/utils.ts");n.d(t,"confirmAction",(function(){return pe.confirmAction})),n.d(t,"detectIEOrEdge",(function(){return pe.detectIEOrEdge})),n.d(t,"doKey2Click",(function(){return pe.doKey2Click})),n.d(t,"loadFileFromBase64",(function(){return pe.loadFileFromBase64})),n.d(t,"createSvg",(function(){return pe.createSvg}));var de=n(/*! ../../defaultCss/cssstandard */"./src/defaultCss/cssstandard.ts");n.d(t,"surveyCss",(function(){return de.surveyCss}));var he,fe=n(/*! ../../dragdrophelper */"./src/dragdrophelper.ts");n.d(t,"DragDropHelper",(function(){return fe.DragDropHelper})),he="1.8.58"},"./src/entries/core.ts":
/*!*****************************!*\
  !*** ./src/entries/core.ts ***!
  \*****************************/
/*! exports provided: Version, settings, Helpers, AnswerCountValidator, EmailValidator, NumericValidator, RegexValidator, SurveyValidator, TextValidator, ValidatorResult, ExpressionValidator, ValidatorRunner, ItemValue, Base, Event, ArrayChanges, SurveyError, SurveyElement, CalculatedValue, CustomError, AnswerRequiredError, OneAnswerRequiredError, RequreNumericError, ExceedSizeError, LocalizableString, LocalizableStrings, HtmlConditionItem, UrlConditionItem, ChoicesRestful, ChoicesRestfull, FunctionFactory, registerFunction, ConditionRunner, ExpressionRunner, Operand, Const, BinaryOperand, Variable, FunctionOperand, ArrayOperand, ConditionsParser, ProcessValue, JsonError, JsonIncorrectTypeError, JsonMetadata, JsonMetadataClass, JsonMissingTypeError, JsonMissingTypeErrorBase, JsonObject, JsonObjectProperty, JsonRequiredPropertyError, JsonUnknownPropertyError, Serializer, property, propertyArray, MatrixDropdownCell, MatrixDropdownColumn, matrixDropdownColumnTypes, MatrixDropdownRowModelBase, QuestionMatrixDropdownModelBase, QuestionMatrixDropdownRenderedCell, QuestionMatrixDropdownRenderedRow, QuestionMatrixDropdownRenderedTable, MatrixDropdownRowModel, QuestionMatrixDropdownModel, MatrixDynamicRowModel, QuestionMatrixDynamicModel, MatrixRowModel, MatrixCells, QuestionMatrixModel, MultipleTextItemModel, QuestionMultipleTextModel, PanelModel, PanelModelBase, QuestionRowModel, FlowPanelModel, PageModel, Question, QuestionNonValue, QuestionEmptyModel, QuestionCheckboxBase, QuestionSelectBase, QuestionCheckboxModel, QuestionRankingModel, QuestionCommentModel, QuestionDropdownModel, QuestionFactory, ElementFactory, QuestionFileModel, QuestionHtmlModel, QuestionRadiogroupModel, QuestionRatingModel, QuestionExpressionModel, QuestionTextModel, QuestionBooleanModel, QuestionImagePickerModel, ImageItemValue, QuestionImageModel, QuestionSignaturePadModel, QuestionPanelDynamicModel, QuestionPanelDynamicItem, SurveyTimer, SurveyProgressButtonsModel, SurveyModel, SurveyTrigger, SurveyTriggerComplete, SurveyTriggerSetValue, SurveyTriggerVisible, SurveyTriggerCopyValue, SurveyTriggerRunExpression, Trigger, SurveyWindowModel, TextPreProcessor, dxSurveyService, englishStrings, surveyLocalization, surveyStrings, QuestionCustomWidget, CustomWidgetCollection, QuestionCustomModel, QuestionCompositeModel, ComponentQuestionJSON, ComponentCollection, StylesManager, ListModel, PopupModel, PopupBaseViewModel, QuestionButtonGroupModel, ButtonGroupItemModel, ButtonGroupItemValue, IsMobile, confirmAction, detectIEOrEdge, doKey2Click, loadFileFromBase64, createSvg, surveyCss, DragDropHelper, defaultStandardCss, defaultBootstrapCss, defaultBootstrapMaterialCss, modernCss, RendererFactory, ResponsivityManager, VerticalResponsivityManager, unwrap, Action, AdaptiveActionContainer, ActionContainer */function(e,t,n){"use strict";n.r(t);var r=n(/*! ./chunks/model */"./src/entries/chunks/model.ts");n.d(t,"Version",(function(){return r.Version})),n.d(t,"settings",(function(){return r.settings})),n.d(t,"Helpers",(function(){return r.Helpers})),n.d(t,"AnswerCountValidator",(function(){return r.AnswerCountValidator})),n.d(t,"EmailValidator",(function(){return r.EmailValidator})),n.d(t,"NumericValidator",(function(){return r.NumericValidator})),n.d(t,"RegexValidator",(function(){return r.RegexValidator})),n.d(t,"SurveyValidator",(function(){return r.SurveyValidator})),n.d(t,"TextValidator",(function(){return r.TextValidator})),n.d(t,"ValidatorResult",(function(){return r.ValidatorResult})),n.d(t,"ExpressionValidator",(function(){return r.ExpressionValidator})),n.d(t,"ValidatorRunner",(function(){return r.ValidatorRunner})),n.d(t,"ItemValue",(function(){return r.ItemValue})),n.d(t,"Base",(function(){return r.Base})),n.d(t,"Event",(function(){return r.Event})),n.d(t,"ArrayChanges",(function(){return r.ArrayChanges})),n.d(t,"SurveyError",(function(){return r.SurveyError})),n.d(t,"SurveyElement",(function(){return r.SurveyElement})),n.d(t,"CalculatedValue",(function(){return r.CalculatedValue})),n.d(t,"CustomError",(function(){return r.CustomError})),n.d(t,"AnswerRequiredError",(function(){return r.AnswerRequiredError})),n.d(t,"OneAnswerRequiredError",(function(){return r.OneAnswerRequiredError})),n.d(t,"RequreNumericError",(function(){return r.RequreNumericError})),n.d(t,"ExceedSizeError",(function(){return r.ExceedSizeError})),n.d(t,"LocalizableString",(function(){return r.LocalizableString})),n.d(t,"LocalizableStrings",(function(){return r.LocalizableStrings})),n.d(t,"HtmlConditionItem",(function(){return r.HtmlConditionItem})),n.d(t,"UrlConditionItem",(function(){return r.UrlConditionItem})),n.d(t,"ChoicesRestful",(function(){return r.ChoicesRestful})),n.d(t,"ChoicesRestfull",(function(){return r.ChoicesRestfull})),n.d(t,"FunctionFactory",(function(){return r.FunctionFactory})),n.d(t,"registerFunction",(function(){return r.registerFunction})),n.d(t,"ConditionRunner",(function(){return r.ConditionRunner})),n.d(t,"ExpressionRunner",(function(){return r.ExpressionRunner})),n.d(t,"Operand",(function(){return r.Operand})),n.d(t,"Const",(function(){return r.Const})),n.d(t,"BinaryOperand",(function(){return r.BinaryOperand})),n.d(t,"Variable",(function(){return r.Variable})),n.d(t,"FunctionOperand",(function(){return r.FunctionOperand})),n.d(t,"ArrayOperand",(function(){return r.ArrayOperand})),n.d(t,"ConditionsParser",(function(){return r.ConditionsParser})),n.d(t,"ProcessValue",(function(){return r.ProcessValue})),n.d(t,"JsonError",(function(){return r.JsonError})),n.d(t,"JsonIncorrectTypeError",(function(){return r.JsonIncorrectTypeError})),n.d(t,"JsonMetadata",(function(){return r.JsonMetadata})),n.d(t,"JsonMetadataClass",(function(){return r.JsonMetadataClass})),n.d(t,"JsonMissingTypeError",(function(){return r.JsonMissingTypeError})),n.d(t,"JsonMissingTypeErrorBase",(function(){return r.JsonMissingTypeErrorBase})),n.d(t,"JsonObject",(function(){return r.JsonObject})),n.d(t,"JsonObjectProperty",(function(){return r.JsonObjectProperty})),n.d(t,"JsonRequiredPropertyError",(function(){return r.JsonRequiredPropertyError})),n.d(t,"JsonUnknownPropertyError",(function(){return r.JsonUnknownPropertyError})),n.d(t,"Serializer",(function(){return r.Serializer})),n.d(t,"property",(function(){return r.property})),n.d(t,"propertyArray",(function(){return r.propertyArray})),n.d(t,"MatrixDropdownCell",(function(){return r.MatrixDropdownCell})),n.d(t,"MatrixDropdownColumn",(function(){return r.MatrixDropdownColumn})),n.d(t,"matrixDropdownColumnTypes",(function(){return r.matrixDropdownColumnTypes})),n.d(t,"MatrixDropdownRowModelBase",(function(){return r.MatrixDropdownRowModelBase})),n.d(t,"QuestionMatrixDropdownModelBase",(function(){return r.QuestionMatrixDropdownModelBase})),n.d(t,"QuestionMatrixDropdownRenderedCell",(function(){return r.QuestionMatrixDropdownRenderedCell})),n.d(t,"QuestionMatrixDropdownRenderedRow",(function(){return r.QuestionMatrixDropdownRenderedRow})),n.d(t,"QuestionMatrixDropdownRenderedTable",(function(){return r.QuestionMatrixDropdownRenderedTable})),n.d(t,"MatrixDropdownRowModel",(function(){return r.MatrixDropdownRowModel})),n.d(t,"QuestionMatrixDropdownModel",(function(){return r.QuestionMatrixDropdownModel})),n.d(t,"MatrixDynamicRowModel",(function(){return r.MatrixDynamicRowModel})),n.d(t,"QuestionMatrixDynamicModel",(function(){return r.QuestionMatrixDynamicModel})),n.d(t,"MatrixRowModel",(function(){return r.MatrixRowModel})),n.d(t,"MatrixCells",(function(){return r.MatrixCells})),n.d(t,"QuestionMatrixModel",(function(){return r.QuestionMatrixModel})),n.d(t,"MultipleTextItemModel",(function(){return r.MultipleTextItemModel})),n.d(t,"QuestionMultipleTextModel",(function(){return r.QuestionMultipleTextModel})),n.d(t,"PanelModel",(function(){return r.PanelModel})),n.d(t,"PanelModelBase",(function(){return r.PanelModelBase})),n.d(t,"QuestionRowModel",(function(){return r.QuestionRowModel})),n.d(t,"FlowPanelModel",(function(){return r.FlowPanelModel})),n.d(t,"PageModel",(function(){return r.PageModel})),n.d(t,"Question",(function(){return r.Question})),n.d(t,"QuestionNonValue",(function(){return r.QuestionNonValue})),n.d(t,"QuestionEmptyModel",(function(){return r.QuestionEmptyModel})),n.d(t,"QuestionCheckboxBase",(function(){return r.QuestionCheckboxBase})),n.d(t,"QuestionSelectBase",(function(){return r.QuestionSelectBase})),n.d(t,"QuestionCheckboxModel",(function(){return r.QuestionCheckboxModel})),n.d(t,"QuestionRankingModel",(function(){return r.QuestionRankingModel})),n.d(t,"QuestionCommentModel",(function(){return r.QuestionCommentModel})),n.d(t,"QuestionDropdownModel",(function(){return r.QuestionDropdownModel})),n.d(t,"QuestionFactory",(function(){return r.QuestionFactory})),n.d(t,"ElementFactory",(function(){return r.ElementFactory})),n.d(t,"QuestionFileModel",(function(){return r.QuestionFileModel})),n.d(t,"QuestionHtmlModel",(function(){return r.QuestionHtmlModel})),n.d(t,"QuestionRadiogroupModel",(function(){return r.QuestionRadiogroupModel})),n.d(t,"QuestionRatingModel",(function(){return r.QuestionRatingModel})),n.d(t,"QuestionExpressionModel",(function(){return r.QuestionExpressionModel})),n.d(t,"QuestionTextModel",(function(){return r.QuestionTextModel})),n.d(t,"QuestionBooleanModel",(function(){return r.QuestionBooleanModel})),n.d(t,"QuestionImagePickerModel",(function(){return r.QuestionImagePickerModel})),n.d(t,"ImageItemValue",(function(){return r.ImageItemValue})),n.d(t,"QuestionImageModel",(function(){return r.QuestionImageModel})),n.d(t,"QuestionSignaturePadModel",(function(){return r.QuestionSignaturePadModel})),n.d(t,"QuestionPanelDynamicModel",(function(){return r.QuestionPanelDynamicModel})),n.d(t,"QuestionPanelDynamicItem",(function(){return r.QuestionPanelDynamicItem})),n.d(t,"SurveyTimer",(function(){return r.SurveyTimer})),n.d(t,"SurveyProgressButtonsModel",(function(){return r.SurveyProgressButtonsModel})),n.d(t,"SurveyModel",(function(){return r.SurveyModel})),n.d(t,"SurveyTrigger",(function(){return r.SurveyTrigger})),n.d(t,"SurveyTriggerComplete",(function(){return r.SurveyTriggerComplete})),n.d(t,"SurveyTriggerSetValue",(function(){return r.SurveyTriggerSetValue})),n.d(t,"SurveyTriggerVisible",(function(){return r.SurveyTriggerVisible})),n.d(t,"SurveyTriggerCopyValue",(function(){return r.SurveyTriggerCopyValue})),n.d(t,"SurveyTriggerRunExpression",(function(){return r.SurveyTriggerRunExpression})),n.d(t,"Trigger",(function(){return r.Trigger})),n.d(t,"SurveyWindowModel",(function(){return r.SurveyWindowModel})),n.d(t,"TextPreProcessor",(function(){return r.TextPreProcessor})),n.d(t,"dxSurveyService",(function(){return r.dxSurveyService})),n.d(t,"englishStrings",(function(){return r.englishStrings})),n.d(t,"surveyLocalization",(function(){return r.surveyLocalization})),n.d(t,"surveyStrings",(function(){return r.surveyStrings})),n.d(t,"QuestionCustomWidget",(function(){return r.QuestionCustomWidget})),n.d(t,"CustomWidgetCollection",(function(){return r.CustomWidgetCollection})),n.d(t,"QuestionCustomModel",(function(){return r.QuestionCustomModel})),n.d(t,"QuestionCompositeModel",(function(){return r.QuestionCompositeModel})),n.d(t,"ComponentQuestionJSON",(function(){return r.ComponentQuestionJSON})),n.d(t,"ComponentCollection",(function(){return r.ComponentCollection})),n.d(t,"StylesManager",(function(){return r.StylesManager})),n.d(t,"ListModel",(function(){return r.ListModel})),n.d(t,"PopupModel",(function(){return r.PopupModel})),n.d(t,"PopupBaseViewModel",(function(){return r.PopupBaseViewModel})),n.d(t,"QuestionButtonGroupModel",(function(){return r.QuestionButtonGroupModel})),n.d(t,"ButtonGroupItemModel",(function(){return r.ButtonGroupItemModel})),n.d(t,"ButtonGroupItemValue",(function(){return r.ButtonGroupItemValue})),n.d(t,"IsMobile",(function(){return r.IsMobile})),n.d(t,"confirmAction",(function(){return r.confirmAction})),n.d(t,"detectIEOrEdge",(function(){return r.detectIEOrEdge})),n.d(t,"doKey2Click",(function(){return r.doKey2Click})),n.d(t,"loadFileFromBase64",(function(){return r.loadFileFromBase64})),n.d(t,"createSvg",(function(){return r.createSvg})),n.d(t,"surveyCss",(function(){return r.surveyCss})),n.d(t,"DragDropHelper",(function(){return r.DragDropHelper})),n(/*! ./chunks/localization */"./src/entries/chunks/localization.ts");var i=n(/*! ../defaultCss/cssstandard */"./src/defaultCss/cssstandard.ts");n.d(t,"defaultStandardCss",(function(){return i.defaultStandardCss}));var o=n(/*! ../defaultCss/cssbootstrap */"./src/defaultCss/cssbootstrap.ts");n.d(t,"defaultBootstrapCss",(function(){return o.defaultBootstrapCss}));var a=n(/*! ../defaultCss/cssbootstrapmaterial */"./src/defaultCss/cssbootstrapmaterial.ts");n.d(t,"defaultBootstrapMaterialCss",(function(){return a.defaultBootstrapMaterialCss}));var s=n(/*! ../defaultCss/cssmodern */"./src/defaultCss/cssmodern.ts");n.d(t,"modernCss",(function(){return s.modernCss}));var l=n(/*! ../rendererFactory */"./src/rendererFactory.ts");n.d(t,"RendererFactory",(function(){return l.RendererFactory}));var u=n(/*! ../utils/responsivity-manager */"./src/utils/responsivity-manager.ts");n.d(t,"ResponsivityManager",(function(){return u.ResponsivityManager})),n.d(t,"VerticalResponsivityManager",(function(){return u.VerticalResponsivityManager}));var c=n(/*! ../utils/utils */"./src/utils/utils.ts");n.d(t,"unwrap",(function(){return c.unwrap}));var p=n(/*! ../actions/action */"./src/actions/action.ts");n.d(t,"Action",(function(){return p.Action}));var d=n(/*! ../actions/adaptive-container */"./src/actions/adaptive-container.ts");n.d(t,"AdaptiveActionContainer",(function(){return d.AdaptiveActionContainer}));var h=n(/*! ../actions/container */"./src/actions/container.ts");n.d(t,"ActionContainer",(function(){return h.ActionContainer}))},"./src/entries/react-ui.ts":
/*!*********************************!*\
  !*** ./src/entries/react-ui.ts ***!
  \*********************************/
/*! exports provided: Survey, Model, WindowModel, SurveyNavigationBase, SurveyTimerPanel, SurveyNavigation, SurveyPage, SurveyRow, SurveyPanel, SurveyFlowPanel, SurveyQuestion, SurveyElementErrors, SurveyQuestionAndErrorsCell, SurveyElementBase, SurveyQuestionElementBase, SurveyQuestionCommentItem, SurveyQuestionComment, SurveyQuestionCheckbox, SurveyQuestionCheckboxItem, SurveyQuestionRanking, SurveyQuestionRankingItem, SurveyQuestionDropdown, SurveyQuestionMatrix, SurveyQuestionMatrixRow, SurveyQuestionHtml, SurveyQuestionFile, SurveyQuestionMultipleText, SurveyQuestionRadiogroup, SurveyQuestionText, SurveyQuestionBoolean, SurveyQuestionBooleanCheckbox, SurveyQuestionEmpty, SurveyQuestionMatrixDropdownCell, SurveyQuestionMatrixDropdown, SurveyQuestionMatrixDynamic, SurveyQuestionPanelDynamic, SurveyProgress, SurveyProgressButtons, SurveyQuestionRating, SurveyQuestionExpression, SurveyWindow, ReactQuestionFactory, ReactElementFactory, SurveyQuestionImagePicker, SurveyQuestionImage, SurveyQuestionSignaturePad, SurveyQuestionButtonGroup, SurveyQuestionCustom, SurveyQuestionComposite, DefaultTitle, Popup, List, TitleActions, SurveyActionBar, LogoImage, SurveyHeader, SvgIcon, SurveyQuestionMatrixDynamicRemoveButton, SurveyQuestionMatrixDetailButton, SurveyQuestionMatrixDynamicDragDropIcon, SurveyLocStringViewer, SurveyLocStringEditor, ResponsivityManager, VerticalResponsivityManager, unwrap */function(e,t,n){"use strict";n.r(t);var r=n(/*! ../react/reactSurvey */"./src/react/reactSurvey.tsx");n.d(t,"Survey",(function(){return r.Survey}));var i=n(/*! ../react/reactsurveymodel */"./src/react/reactsurveymodel.tsx");n.d(t,"Model",(function(){return i.ReactSurveyModel})),n.d(t,"WindowModel",(function(){return i.ReactWindowModel}));var o=n(/*! ../react/reactSurveyNavigationBase */"./src/react/reactSurveyNavigationBase.tsx");n.d(t,"SurveyNavigationBase",(function(){return o.SurveyNavigationBase}));var a=n(/*! ../react/reacttimerpanel */"./src/react/reacttimerpanel.tsx");n.d(t,"SurveyTimerPanel",(function(){return a.SurveyTimerPanel}));var s=n(/*! ../react/reactSurveyNavigation */"./src/react/reactSurveyNavigation.tsx");n.d(t,"SurveyNavigation",(function(){return s.SurveyNavigation}));var l=n(/*! ../react/page */"./src/react/page.tsx");n.d(t,"SurveyPage",(function(){return l.SurveyPage}));var u=n(/*! ../react/row */"./src/react/row.tsx");n.d(t,"SurveyRow",(function(){return u.SurveyRow}));var c=n(/*! ../react/panel */"./src/react/panel.tsx");n.d(t,"SurveyPanel",(function(){return c.SurveyPanel}));var p=n(/*! ../react/flow-panel */"./src/react/flow-panel.tsx");n.d(t,"SurveyFlowPanel",(function(){return p.SurveyFlowPanel}));var d=n(/*! ../react/reactquestion */"./src/react/reactquestion.tsx");n.d(t,"SurveyQuestion",(function(){return d.SurveyQuestion})),n.d(t,"SurveyElementErrors",(function(){return d.SurveyElementErrors})),n.d(t,"SurveyQuestionAndErrorsCell",(function(){return d.SurveyQuestionAndErrorsCell}));var h=n(/*! ../react/reactquestion_element */"./src/react/reactquestion_element.tsx");n.d(t,"SurveyElementBase",(function(){return h.SurveyElementBase})),n.d(t,"SurveyQuestionElementBase",(function(){return h.SurveyQuestionElementBase}));var f=n(/*! ../react/reactquestion_comment */"./src/react/reactquestion_comment.tsx");n.d(t,"SurveyQuestionCommentItem",(function(){return f.SurveyQuestionCommentItem})),n.d(t,"SurveyQuestionComment",(function(){return f.SurveyQuestionComment}));var m=n(/*! ../react/reactquestion_checkbox */"./src/react/reactquestion_checkbox.tsx");n.d(t,"SurveyQuestionCheckbox",(function(){return m.SurveyQuestionCheckbox})),n.d(t,"SurveyQuestionCheckboxItem",(function(){return m.SurveyQuestionCheckboxItem}));var g=n(/*! ../react/reactquestion_ranking */"./src/react/reactquestion_ranking.tsx");n.d(t,"SurveyQuestionRanking",(function(){return g.SurveyQuestionRanking})),n.d(t,"SurveyQuestionRankingItem",(function(){return g.SurveyQuestionRankingItem}));var y=n(/*! ../react/reactquestion_dropdown */"./src/react/reactquestion_dropdown.tsx");n.d(t,"SurveyQuestionDropdown",(function(){return y.SurveyQuestionDropdown}));var v=n(/*! ../react/reactquestion_matrix */"./src/react/reactquestion_matrix.tsx");n.d(t,"SurveyQuestionMatrix",(function(){return v.SurveyQuestionMatrix})),n.d(t,"SurveyQuestionMatrixRow",(function(){return v.SurveyQuestionMatrixRow}));var b=n(/*! ../react/reactquestion_html */"./src/react/reactquestion_html.tsx");n.d(t,"SurveyQuestionHtml",(function(){return b.SurveyQuestionHtml}));var x=n(/*! ../react/reactquestion_file */"./src/react/reactquestion_file.tsx");n.d(t,"SurveyQuestionFile",(function(){return x.SurveyQuestionFile}));var w=n(/*! ../react/reactquestion_multipletext */"./src/react/reactquestion_multipletext.tsx");n.d(t,"SurveyQuestionMultipleText",(function(){return w.SurveyQuestionMultipleText}));var _=n(/*! ../react/reactquestion_radiogroup */"./src/react/reactquestion_radiogroup.tsx");n.d(t,"SurveyQuestionRadiogroup",(function(){return _.SurveyQuestionRadiogroup}));var C=n(/*! ../react/reactquestion_text */"./src/react/reactquestion_text.tsx");n.d(t,"SurveyQuestionText",(function(){return C.SurveyQuestionText}));var S=n(/*! ../react/boolean */"./src/react/boolean.tsx");n.d(t,"SurveyQuestionBoolean",(function(){return S.SurveyQuestionBoolean}));var k=n(/*! ../react/boolean-checkbox */"./src/react/boolean-checkbox.tsx");n.d(t,"SurveyQuestionBooleanCheckbox",(function(){return k.SurveyQuestionBooleanCheckbox}));var E=n(/*! ../react/reactquestion_empty */"./src/react/reactquestion_empty.tsx");n.d(t,"SurveyQuestionEmpty",(function(){return E.SurveyQuestionEmpty}));var T=n(/*! ../react/reactquestion_matrixdropdownbase */"./src/react/reactquestion_matrixdropdownbase.tsx");n.d(t,"SurveyQuestionMatrixDropdownCell",(function(){return T.SurveyQuestionMatrixDropdownCell}));var I=n(/*! ../react/reactquestion_matrixdropdown */"./src/react/reactquestion_matrixdropdown.tsx");n.d(t,"SurveyQuestionMatrixDropdown",(function(){return I.SurveyQuestionMatrixDropdown}));var P=n(/*! ../react/reactquestion_matrixdynamic */"./src/react/reactquestion_matrixdynamic.tsx");n.d(t,"SurveyQuestionMatrixDynamic",(function(){return P.SurveyQuestionMatrixDynamic}));var O=n(/*! ../react/reactquestion_paneldynamic */"./src/react/reactquestion_paneldynamic.tsx");n.d(t,"SurveyQuestionPanelDynamic",(function(){return O.SurveyQuestionPanelDynamic}));var N=n(/*! ../react/reactSurveyProgress */"./src/react/reactSurveyProgress.tsx");n.d(t,"SurveyProgress",(function(){return N.SurveyProgress}));var R=n(/*! ../react/reactSurveyProgressButtons */"./src/react/reactSurveyProgressButtons.tsx");n.d(t,"SurveyProgressButtons",(function(){return R.SurveyProgressButtons}));var A=n(/*! ../react/reactquestion_rating */"./src/react/reactquestion_rating.tsx");n.d(t,"SurveyQuestionRating",(function(){return A.SurveyQuestionRating}));var D=n(/*! ../react/reactquestion_expression */"./src/react/reactquestion_expression.tsx");n.d(t,"SurveyQuestionExpression",(function(){return D.SurveyQuestionExpression}));var V=n(/*! ../react/reactSurveyWindow */"./src/react/reactSurveyWindow.tsx");n.d(t,"SurveyWindow",(function(){return V.SurveyWindow}));var M=n(/*! ../react/reactquestion_factory */"./src/react/reactquestion_factory.tsx");n.d(t,"ReactQuestionFactory",(function(){return M.ReactQuestionFactory}));var F=n(/*! ../react/element-factory */"./src/react/element-factory.tsx");n.d(t,"ReactElementFactory",(function(){return F.ReactElementFactory}));var L=n(/*! ../react/imagepicker */"./src/react/imagepicker.tsx");n.d(t,"SurveyQuestionImagePicker",(function(){return L.SurveyQuestionImagePicker}));var z=n(/*! ../react/image */"./src/react/image.tsx");n.d(t,"SurveyQuestionImage",(function(){return z.SurveyQuestionImage}));var j=n(/*! ../react/signaturepad */"./src/react/signaturepad.tsx");n.d(t,"SurveyQuestionSignaturePad",(function(){return j.SurveyQuestionSignaturePad}));var q=n(/*! ../react/reactquestion_buttongroup */"./src/react/reactquestion_buttongroup.tsx");n.d(t,"SurveyQuestionButtonGroup",(function(){return q.SurveyQuestionButtonGroup}));var $=n(/*! ../react/reactquestion_custom */"./src/react/reactquestion_custom.tsx");n.d(t,"SurveyQuestionCustom",(function(){return $.SurveyQuestionCustom})),n.d(t,"SurveyQuestionComposite",(function(){return $.SurveyQuestionComposite}));var B=n(/*! ../react/components/default-title/default-title */"./src/react/components/default-title/default-title.tsx");n.d(t,"DefaultTitle",(function(){return B.DefaultTitle}));var U=n(/*! ../react/components/popup/popup */"./src/react/components/popup/popup.tsx");n.d(t,"Popup",(function(){return U.Popup}));var W=n(/*! ../react/components/list/list */"./src/react/components/list/list.tsx");n.d(t,"List",(function(){return W.List}));var H=n(/*! ../react/components/title-actions/title-actions */"./src/react/components/title-actions/title-actions.tsx");n.d(t,"TitleActions",(function(){return H.TitleActions}));var Q=n(/*! ../react/components/action-bar/action-bar */"./src/react/components/action-bar/action-bar.tsx");n.d(t,"SurveyActionBar",(function(){return Q.SurveyActionBar}));var G=n(/*! ../react/components/survey-header/logo-image */"./src/react/components/survey-header/logo-image.tsx");n.d(t,"LogoImage",(function(){return G.LogoImage}));var K=n(/*! ../react/components/survey-header/survey-header */"./src/react/components/survey-header/survey-header.tsx");n.d(t,"SurveyHeader",(function(){return K.SurveyHeader}));var J=n(/*! ../react/components/svg-icon/svg-icon */"./src/react/components/svg-icon/svg-icon.tsx");n.d(t,"SvgIcon",(function(){return J.SvgIcon}));var X=n(/*! ../react/components/matrix-actions/remove-button/remove-button */"./src/react/components/matrix-actions/remove-button/remove-button.tsx");n.d(t,"SurveyQuestionMatrixDynamicRemoveButton",(function(){return X.SurveyQuestionMatrixDynamicRemoveButton}));var Y=n(/*! ../react/components/matrix-actions/detail-button/detail-button */"./src/react/components/matrix-actions/detail-button/detail-button.tsx");n.d(t,"SurveyQuestionMatrixDetailButton",(function(){return Y.SurveyQuestionMatrixDetailButton}));var Z=n(/*! ../react/components/matrix-actions/drag-drop-icon/drag-drop-icon */"./src/react/components/matrix-actions/drag-drop-icon/drag-drop-icon.tsx");n.d(t,"SurveyQuestionMatrixDynamicDragDropIcon",(function(){return Z.SurveyQuestionMatrixDynamicDragDropIcon}));var ee=n(/*! ../react/string-viewer */"./src/react/string-viewer.tsx");n.d(t,"SurveyLocStringViewer",(function(){return ee.SurveyLocStringViewer}));var te=n(/*! ../react/string-editor */"./src/react/string-editor.tsx");n.d(t,"SurveyLocStringEditor",(function(){return te.SurveyLocStringEditor}));var ne=n(/*! ../utils/responsivity-manager */"./src/utils/responsivity-manager.ts");n.d(t,"ResponsivityManager",(function(){return ne.ResponsivityManager})),n.d(t,"VerticalResponsivityManager",(function(){return ne.VerticalResponsivityManager}));var re=n(/*! ../utils/utils */"./src/utils/utils.ts");n.d(t,"unwrap",(function(){return re.unwrap}))},"./src/entries/react.ts":
/*!******************************!*\
  !*** ./src/entries/react.ts ***!
  \******************************/
/*! exports provided: Version, settings, Helpers, AnswerCountValidator, EmailValidator, NumericValidator, RegexValidator, SurveyValidator, TextValidator, ValidatorResult, ExpressionValidator, ValidatorRunner, ItemValue, Base, Event, ArrayChanges, SurveyError, SurveyElement, CalculatedValue, CustomError, AnswerRequiredError, OneAnswerRequiredError, RequreNumericError, ExceedSizeError, LocalizableString, LocalizableStrings, HtmlConditionItem, UrlConditionItem, ChoicesRestful, ChoicesRestfull, FunctionFactory, registerFunction, ConditionRunner, ExpressionRunner, Operand, Const, BinaryOperand, Variable, FunctionOperand, ArrayOperand, ConditionsParser, ProcessValue, JsonError, JsonIncorrectTypeError, JsonMetadata, JsonMetadataClass, JsonMissingTypeError, JsonMissingTypeErrorBase, JsonObject, JsonObjectProperty, JsonRequiredPropertyError, JsonUnknownPropertyError, Serializer, property, propertyArray, MatrixDropdownCell, MatrixDropdownColumn, matrixDropdownColumnTypes, MatrixDropdownRowModelBase, QuestionMatrixDropdownModelBase, QuestionMatrixDropdownRenderedCell, QuestionMatrixDropdownRenderedRow, QuestionMatrixDropdownRenderedTable, MatrixDropdownRowModel, QuestionMatrixDropdownModel, MatrixDynamicRowModel, QuestionMatrixDynamicModel, MatrixRowModel, MatrixCells, QuestionMatrixModel, MultipleTextItemModel, QuestionMultipleTextModel, PanelModel, PanelModelBase, QuestionRowModel, FlowPanelModel, PageModel, Question, QuestionNonValue, QuestionEmptyModel, QuestionCheckboxBase, QuestionSelectBase, QuestionCheckboxModel, QuestionRankingModel, QuestionCommentModel, QuestionDropdownModel, QuestionFactory, ElementFactory, QuestionFileModel, QuestionHtmlModel, QuestionRadiogroupModel, QuestionRatingModel, QuestionExpressionModel, QuestionTextModel, QuestionBooleanModel, QuestionImagePickerModel, ImageItemValue, QuestionImageModel, QuestionSignaturePadModel, QuestionPanelDynamicModel, QuestionPanelDynamicItem, SurveyTimer, SurveyProgressButtonsModel, SurveyModel, SurveyTrigger, SurveyTriggerComplete, SurveyTriggerSetValue, SurveyTriggerVisible, SurveyTriggerCopyValue, SurveyTriggerRunExpression, Trigger, SurveyWindowModel, TextPreProcessor, dxSurveyService, englishStrings, surveyLocalization, surveyStrings, QuestionCustomWidget, CustomWidgetCollection, QuestionCustomModel, QuestionCompositeModel, ComponentQuestionJSON, ComponentCollection, StylesManager, ListModel, PopupModel, PopupBaseViewModel, QuestionButtonGroupModel, ButtonGroupItemModel, ButtonGroupItemValue, IsMobile, confirmAction, detectIEOrEdge, doKey2Click, loadFileFromBase64, createSvg, surveyCss, DragDropHelper, defaultStandardCss, defaultBootstrapCss, defaultBootstrapMaterialCss, modernCss, RendererFactory, ResponsivityManager, VerticalResponsivityManager, unwrap, Action, AdaptiveActionContainer, ActionContainer, Survey, Model, WindowModel, SurveyNavigationBase, SurveyTimerPanel, SurveyNavigation, SurveyPage, SurveyRow, SurveyPanel, SurveyFlowPanel, SurveyQuestion, SurveyElementErrors, SurveyQuestionAndErrorsCell, SurveyElementBase, SurveyQuestionElementBase, SurveyQuestionCommentItem, SurveyQuestionComment, SurveyQuestionCheckbox, SurveyQuestionCheckboxItem, SurveyQuestionRanking, SurveyQuestionRankingItem, SurveyQuestionDropdown, SurveyQuestionMatrix, SurveyQuestionMatrixRow, SurveyQuestionHtml, SurveyQuestionFile, SurveyQuestionMultipleText, SurveyQuestionRadiogroup, SurveyQuestionText, SurveyQuestionBoolean, SurveyQuestionBooleanCheckbox, SurveyQuestionEmpty, SurveyQuestionMatrixDropdownCell, SurveyQuestionMatrixDropdown, SurveyQuestionMatrixDynamic, SurveyQuestionPanelDynamic, SurveyProgress, SurveyProgressButtons, SurveyQuestionRating, SurveyQuestionExpression, SurveyWindow, ReactQuestionFactory, ReactElementFactory, SurveyQuestionImagePicker, SurveyQuestionImage, SurveyQuestionSignaturePad, SurveyQuestionButtonGroup, SurveyQuestionCustom, SurveyQuestionComposite, DefaultTitle, Popup, List, TitleActions, SurveyActionBar, LogoImage, SurveyHeader, SvgIcon, SurveyQuestionMatrixDynamicRemoveButton, SurveyQuestionMatrixDetailButton, SurveyQuestionMatrixDynamicDragDropIcon, SurveyLocStringViewer, SurveyLocStringEditor */function(e,t,n){"use strict";n.r(t);var r=n(/*! ./core */"./src/entries/core.ts");n.d(t,"Version",(function(){return r.Version})),n.d(t,"settings",(function(){return r.settings})),n.d(t,"Helpers",(function(){return r.Helpers})),n.d(t,"AnswerCountValidator",(function(){return r.AnswerCountValidator})),n.d(t,"EmailValidator",(function(){return r.EmailValidator})),n.d(t,"NumericValidator",(function(){return r.NumericValidator})),n.d(t,"RegexValidator",(function(){return r.RegexValidator})),n.d(t,"SurveyValidator",(function(){return r.SurveyValidator})),n.d(t,"TextValidator",(function(){return r.TextValidator})),n.d(t,"ValidatorResult",(function(){return r.ValidatorResult})),n.d(t,"ExpressionValidator",(function(){return r.ExpressionValidator})),n.d(t,"ValidatorRunner",(function(){return r.ValidatorRunner})),n.d(t,"ItemValue",(function(){return r.ItemValue})),n.d(t,"Base",(function(){return r.Base})),n.d(t,"Event",(function(){return r.Event})),n.d(t,"ArrayChanges",(function(){return r.ArrayChanges})),n.d(t,"SurveyError",(function(){return r.SurveyError})),n.d(t,"SurveyElement",(function(){return r.SurveyElement})),n.d(t,"CalculatedValue",(function(){return r.CalculatedValue})),n.d(t,"CustomError",(function(){return r.CustomError})),n.d(t,"AnswerRequiredError",(function(){return r.AnswerRequiredError})),n.d(t,"OneAnswerRequiredError",(function(){return r.OneAnswerRequiredError})),n.d(t,"RequreNumericError",(function(){return r.RequreNumericError})),n.d(t,"ExceedSizeError",(function(){return r.ExceedSizeError})),n.d(t,"LocalizableString",(function(){return r.LocalizableString})),n.d(t,"LocalizableStrings",(function(){return r.LocalizableStrings})),n.d(t,"HtmlConditionItem",(function(){return r.HtmlConditionItem})),n.d(t,"UrlConditionItem",(function(){return r.UrlConditionItem})),n.d(t,"ChoicesRestful",(function(){return r.ChoicesRestful})),n.d(t,"ChoicesRestfull",(function(){return r.ChoicesRestfull})),n.d(t,"FunctionFactory",(function(){return r.FunctionFactory})),n.d(t,"registerFunction",(function(){return r.registerFunction})),n.d(t,"ConditionRunner",(function(){return r.ConditionRunner})),n.d(t,"ExpressionRunner",(function(){return r.ExpressionRunner})),n.d(t,"Operand",(function(){return r.Operand})),n.d(t,"Const",(function(){return r.Const})),n.d(t,"BinaryOperand",(function(){return r.BinaryOperand})),n.d(t,"Variable",(function(){return r.Variable})),n.d(t,"FunctionOperand",(function(){return r.FunctionOperand})),n.d(t,"ArrayOperand",(function(){return r.ArrayOperand})),n.d(t,"ConditionsParser",(function(){return r.ConditionsParser})),n.d(t,"ProcessValue",(function(){return r.ProcessValue})),n.d(t,"JsonError",(function(){return r.JsonError})),n.d(t,"JsonIncorrectTypeError",(function(){return r.JsonIncorrectTypeError})),n.d(t,"JsonMetadata",(function(){return r.JsonMetadata})),n.d(t,"JsonMetadataClass",(function(){return r.JsonMetadataClass})),n.d(t,"JsonMissingTypeError",(function(){return r.JsonMissingTypeError})),n.d(t,"JsonMissingTypeErrorBase",(function(){return r.JsonMissingTypeErrorBase})),n.d(t,"JsonObject",(function(){return r.JsonObject})),n.d(t,"JsonObjectProperty",(function(){return r.JsonObjectProperty})),n.d(t,"JsonRequiredPropertyError",(function(){return r.JsonRequiredPropertyError})),n.d(t,"JsonUnknownPropertyError",(function(){return r.JsonUnknownPropertyError})),n.d(t,"Serializer",(function(){return r.Serializer})),n.d(t,"property",(function(){return r.property})),n.d(t,"propertyArray",(function(){return r.propertyArray})),n.d(t,"MatrixDropdownCell",(function(){return r.MatrixDropdownCell})),n.d(t,"MatrixDropdownColumn",(function(){return r.MatrixDropdownColumn})),n.d(t,"matrixDropdownColumnTypes",(function(){return r.matrixDropdownColumnTypes})),n.d(t,"MatrixDropdownRowModelBase",(function(){return r.MatrixDropdownRowModelBase})),n.d(t,"QuestionMatrixDropdownModelBase",(function(){return r.QuestionMatrixDropdownModelBase})),n.d(t,"QuestionMatrixDropdownRenderedCell",(function(){return r.QuestionMatrixDropdownRenderedCell})),n.d(t,"QuestionMatrixDropdownRenderedRow",(function(){return r.QuestionMatrixDropdownRenderedRow})),n.d(t,"QuestionMatrixDropdownRenderedTable",(function(){return r.QuestionMatrixDropdownRenderedTable})),n.d(t,"MatrixDropdownRowModel",(function(){return r.MatrixDropdownRowModel})),n.d(t,"QuestionMatrixDropdownModel",(function(){return r.QuestionMatrixDropdownModel})),n.d(t,"MatrixDynamicRowModel",(function(){return r.MatrixDynamicRowModel})),n.d(t,"QuestionMatrixDynamicModel",(function(){return r.QuestionMatrixDynamicModel})),n.d(t,"MatrixRowModel",(function(){return r.MatrixRowModel})),n.d(t,"MatrixCells",(function(){return r.MatrixCells})),n.d(t,"QuestionMatrixModel",(function(){return r.QuestionMatrixModel})),n.d(t,"MultipleTextItemModel",(function(){return r.MultipleTextItemModel})),n.d(t,"QuestionMultipleTextModel",(function(){return r.QuestionMultipleTextModel})),n.d(t,"PanelModel",(function(){return r.PanelModel})),n.d(t,"PanelModelBase",(function(){return r.PanelModelBase})),n.d(t,"QuestionRowModel",(function(){return r.QuestionRowModel})),n.d(t,"FlowPanelModel",(function(){return r.FlowPanelModel})),n.d(t,"PageModel",(function(){return r.PageModel})),n.d(t,"Question",(function(){return r.Question})),n.d(t,"QuestionNonValue",(function(){return r.QuestionNonValue})),n.d(t,"QuestionEmptyModel",(function(){return r.QuestionEmptyModel})),n.d(t,"QuestionCheckboxBase",(function(){return r.QuestionCheckboxBase})),n.d(t,"QuestionSelectBase",(function(){return r.QuestionSelectBase})),n.d(t,"QuestionCheckboxModel",(function(){return r.QuestionCheckboxModel})),n.d(t,"QuestionRankingModel",(function(){return r.QuestionRankingModel})),n.d(t,"QuestionCommentModel",(function(){return r.QuestionCommentModel})),n.d(t,"QuestionDropdownModel",(function(){return r.QuestionDropdownModel})),n.d(t,"QuestionFactory",(function(){return r.QuestionFactory})),n.d(t,"ElementFactory",(function(){return r.ElementFactory})),n.d(t,"QuestionFileModel",(function(){return r.QuestionFileModel})),n.d(t,"QuestionHtmlModel",(function(){return r.QuestionHtmlModel})),n.d(t,"QuestionRadiogroupModel",(function(){return r.QuestionRadiogroupModel})),n.d(t,"QuestionRatingModel",(function(){return r.QuestionRatingModel})),n.d(t,"QuestionExpressionModel",(function(){return r.QuestionExpressionModel})),n.d(t,"QuestionTextModel",(function(){return r.QuestionTextModel})),n.d(t,"QuestionBooleanModel",(function(){return r.QuestionBooleanModel})),n.d(t,"QuestionImagePickerModel",(function(){return r.QuestionImagePickerModel})),n.d(t,"ImageItemValue",(function(){return r.ImageItemValue})),n.d(t,"QuestionImageModel",(function(){return r.QuestionImageModel})),n.d(t,"QuestionSignaturePadModel",(function(){return r.QuestionSignaturePadModel})),n.d(t,"QuestionPanelDynamicModel",(function(){return r.QuestionPanelDynamicModel})),n.d(t,"QuestionPanelDynamicItem",(function(){return r.QuestionPanelDynamicItem})),n.d(t,"SurveyTimer",(function(){return r.SurveyTimer})),n.d(t,"SurveyProgressButtonsModel",(function(){return r.SurveyProgressButtonsModel})),n.d(t,"SurveyModel",(function(){return r.SurveyModel})),n.d(t,"SurveyTrigger",(function(){return r.SurveyTrigger})),n.d(t,"SurveyTriggerComplete",(function(){return r.SurveyTriggerComplete})),n.d(t,"SurveyTriggerSetValue",(function(){return r.SurveyTriggerSetValue})),n.d(t,"SurveyTriggerVisible",(function(){return r.SurveyTriggerVisible})),n.d(t,"SurveyTriggerCopyValue",(function(){return r.SurveyTriggerCopyValue})),n.d(t,"SurveyTriggerRunExpression",(function(){return r.SurveyTriggerRunExpression})),n.d(t,"Trigger",(function(){return r.Trigger})),n.d(t,"SurveyWindowModel",(function(){return r.SurveyWindowModel})),n.d(t,"TextPreProcessor",(function(){return r.TextPreProcessor})),n.d(t,"dxSurveyService",(function(){return r.dxSurveyService})),n.d(t,"englishStrings",(function(){return r.englishStrings})),n.d(t,"surveyLocalization",(function(){return r.surveyLocalization})),n.d(t,"surveyStrings",(function(){return r.surveyStrings})),n.d(t,"QuestionCustomWidget",(function(){return r.QuestionCustomWidget})),n.d(t,"CustomWidgetCollection",(function(){return r.CustomWidgetCollection})),n.d(t,"QuestionCustomModel",(function(){return r.QuestionCustomModel})),n.d(t,"QuestionCompositeModel",(function(){return r.QuestionCompositeModel})),n.d(t,"ComponentQuestionJSON",(function(){return r.ComponentQuestionJSON})),n.d(t,"ComponentCollection",(function(){return r.ComponentCollection})),n.d(t,"StylesManager",(function(){return r.StylesManager})),n.d(t,"ListModel",(function(){return r.ListModel})),n.d(t,"PopupModel",(function(){return r.PopupModel})),n.d(t,"PopupBaseViewModel",(function(){return r.PopupBaseViewModel})),n.d(t,"QuestionButtonGroupModel",(function(){return r.QuestionButtonGroupModel})),n.d(t,"ButtonGroupItemModel",(function(){return r.ButtonGroupItemModel})),n.d(t,"ButtonGroupItemValue",(function(){return r.ButtonGroupItemValue})),n.d(t,"IsMobile",(function(){return r.IsMobile})),n.d(t,"confirmAction",(function(){return r.confirmAction})),n.d(t,"detectIEOrEdge",(function(){return r.detectIEOrEdge})),n.d(t,"doKey2Click",(function(){return r.doKey2Click})),n.d(t,"loadFileFromBase64",(function(){return r.loadFileFromBase64})),n.d(t,"createSvg",(function(){return r.createSvg})),n.d(t,"surveyCss",(function(){return r.surveyCss})),n.d(t,"DragDropHelper",(function(){return r.DragDropHelper})),n.d(t,"defaultStandardCss",(function(){return r.defaultStandardCss})),n.d(t,"defaultBootstrapCss",(function(){return r.defaultBootstrapCss})),n.d(t,"defaultBootstrapMaterialCss",(function(){return r.defaultBootstrapMaterialCss})),n.d(t,"modernCss",(function(){return r.modernCss})),n.d(t,"RendererFactory",(function(){return r.RendererFactory})),n.d(t,"ResponsivityManager",(function(){return r.ResponsivityManager})),n.d(t,"VerticalResponsivityManager",(function(){return r.VerticalResponsivityManager})),n.d(t,"unwrap",(function(){return r.unwrap})),n.d(t,"Action",(function(){return r.Action})),n.d(t,"AdaptiveActionContainer",(function(){return r.AdaptiveActionContainer})),n.d(t,"ActionContainer",(function(){return r.ActionContainer}));var i=n(/*! ./react-ui */"./src/entries/react-ui.ts");n.d(t,"Survey",(function(){return i.Survey})),n.d(t,"Model",(function(){return i.Model})),n.d(t,"WindowModel",(function(){return i.WindowModel})),n.d(t,"SurveyNavigationBase",(function(){return i.SurveyNavigationBase})),n.d(t,"SurveyTimerPanel",(function(){return i.SurveyTimerPanel})),n.d(t,"SurveyNavigation",(function(){return i.SurveyNavigation})),n.d(t,"SurveyPage",(function(){return i.SurveyPage})),n.d(t,"SurveyRow",(function(){return i.SurveyRow})),n.d(t,"SurveyPanel",(function(){return i.SurveyPanel})),n.d(t,"SurveyFlowPanel",(function(){return i.SurveyFlowPanel})),n.d(t,"SurveyQuestion",(function(){return i.SurveyQuestion})),n.d(t,"SurveyElementErrors",(function(){return i.SurveyElementErrors})),n.d(t,"SurveyQuestionAndErrorsCell",(function(){return i.SurveyQuestionAndErrorsCell})),n.d(t,"SurveyElementBase",(function(){return i.SurveyElementBase})),n.d(t,"SurveyQuestionElementBase",(function(){return i.SurveyQuestionElementBase})),n.d(t,"SurveyQuestionCommentItem",(function(){return i.SurveyQuestionCommentItem})),n.d(t,"SurveyQuestionComment",(function(){return i.SurveyQuestionComment})),n.d(t,"SurveyQuestionCheckbox",(function(){return i.SurveyQuestionCheckbox})),n.d(t,"SurveyQuestionCheckboxItem",(function(){return i.SurveyQuestionCheckboxItem})),n.d(t,"SurveyQuestionRanking",(function(){return i.SurveyQuestionRanking})),n.d(t,"SurveyQuestionRankingItem",(function(){return i.SurveyQuestionRankingItem})),n.d(t,"SurveyQuestionDropdown",(function(){return i.SurveyQuestionDropdown})),n.d(t,"SurveyQuestionMatrix",(function(){return i.SurveyQuestionMatrix})),n.d(t,"SurveyQuestionMatrixRow",(function(){return i.SurveyQuestionMatrixRow})),n.d(t,"SurveyQuestionHtml",(function(){return i.SurveyQuestionHtml})),n.d(t,"SurveyQuestionFile",(function(){return i.SurveyQuestionFile})),n.d(t,"SurveyQuestionMultipleText",(function(){return i.SurveyQuestionMultipleText})),n.d(t,"SurveyQuestionRadiogroup",(function(){return i.SurveyQuestionRadiogroup})),n.d(t,"SurveyQuestionText",(function(){return i.SurveyQuestionText})),n.d(t,"SurveyQuestionBoolean",(function(){return i.SurveyQuestionBoolean})),n.d(t,"SurveyQuestionBooleanCheckbox",(function(){return i.SurveyQuestionBooleanCheckbox})),n.d(t,"SurveyQuestionEmpty",(function(){return i.SurveyQuestionEmpty})),n.d(t,"SurveyQuestionMatrixDropdownCell",(function(){return i.SurveyQuestionMatrixDropdownCell})),n.d(t,"SurveyQuestionMatrixDropdown",(function(){return i.SurveyQuestionMatrixDropdown})),n.d(t,"SurveyQuestionMatrixDynamic",(function(){return i.SurveyQuestionMatrixDynamic})),n.d(t,"SurveyQuestionPanelDynamic",(function(){return i.SurveyQuestionPanelDynamic})),n.d(t,"SurveyProgress",(function(){return i.SurveyProgress})),n.d(t,"SurveyProgressButtons",(function(){return i.SurveyProgressButtons})),n.d(t,"SurveyQuestionRating",(function(){return i.SurveyQuestionRating})),n.d(t,"SurveyQuestionExpression",(function(){return i.SurveyQuestionExpression})),n.d(t,"SurveyWindow",(function(){return i.SurveyWindow})),n.d(t,"ReactQuestionFactory",(function(){return i.ReactQuestionFactory})),n.d(t,"ReactElementFactory",(function(){return i.ReactElementFactory})),n.d(t,"SurveyQuestionImagePicker",(function(){return i.SurveyQuestionImagePicker})),n.d(t,"SurveyQuestionImage",(function(){return i.SurveyQuestionImage})),n.d(t,"SurveyQuestionSignaturePad",(function(){return i.SurveyQuestionSignaturePad})),n.d(t,"SurveyQuestionButtonGroup",(function(){return i.SurveyQuestionButtonGroup})),n.d(t,"SurveyQuestionCustom",(function(){return i.SurveyQuestionCustom})),n.d(t,"SurveyQuestionComposite",(function(){return i.SurveyQuestionComposite})),n.d(t,"DefaultTitle",(function(){return i.DefaultTitle})),n.d(t,"Popup",(function(){return i.Popup})),n.d(t,"List",(function(){return i.List})),n.d(t,"TitleActions",(function(){return i.TitleActions})),n.d(t,"SurveyActionBar",(function(){return i.SurveyActionBar})),n.d(t,"LogoImage",(function(){return i.LogoImage})),n.d(t,"SurveyHeader",(function(){return i.SurveyHeader})),n.d(t,"SvgIcon",(function(){return i.SvgIcon})),n.d(t,"SurveyQuestionMatrixDynamicRemoveButton",(function(){return i.SurveyQuestionMatrixDynamicRemoveButton})),n.d(t,"SurveyQuestionMatrixDetailButton",(function(){return i.SurveyQuestionMatrixDetailButton})),n.d(t,"SurveyQuestionMatrixDynamicDragDropIcon",(function(){return i.SurveyQuestionMatrixDynamicDragDropIcon})),n.d(t,"SurveyLocStringViewer",(function(){return i.SurveyLocStringViewer})),n.d(t,"SurveyLocStringEditor",(function(){return i.SurveyLocStringEditor}))},"./src/error.ts":
/*!**********************!*\
  !*** ./src/error.ts ***!
  \**********************/
/*! exports provided: AnswerRequiredError, OneAnswerRequiredError, RequreNumericError, ExceedSizeError, WebRequestError, WebRequestEmptyError, OtherEmptyError, UploadingFileError, RequiredInAllRowsError, MinRowCountError, KeyDuplicationError, CustomError */function(e,t,n){"use strict";n.r(t),n.d(t,"AnswerRequiredError",(function(){return s})),n.d(t,"OneAnswerRequiredError",(function(){return l})),n.d(t,"RequreNumericError",(function(){return u})),n.d(t,"ExceedSizeError",(function(){return c})),n.d(t,"WebRequestError",(function(){return p})),n.d(t,"WebRequestEmptyError",(function(){return d})),n.d(t,"OtherEmptyError",(function(){return h})),n.d(t,"UploadingFileError",(function(){return f})),n.d(t,"RequiredInAllRowsError",(function(){return m})),n.d(t,"MinRowCountError",(function(){return g})),n.d(t,"KeyDuplicationError",(function(){return y})),n.d(t,"CustomError",(function(){return v}));var r,i=n(/*! ./surveyStrings */"./src/surveyStrings.ts"),o=n(/*! ./survey-error */"./src/survey-error.ts"),a=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var r=e.call(this,t,n)||this;return r.text=t,r}return a(t,e),t.prototype.getErrorType=function(){return"required"},t.prototype.getDefaultText=function(){return i.surveyLocalization.getString("requiredError")},t}(o.SurveyError),l=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var r=e.call(this,t,n)||this;return r.text=t,r}return a(t,e),t.prototype.getErrorType=function(){return"requireoneanswer"},t.prototype.getDefaultText=function(){return i.surveyLocalization.getString("requiredErrorInPanel")},t}(o.SurveyError),u=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var r=e.call(this,t,n)||this;return r.text=t,r}return a(t,e),t.prototype.getErrorType=function(){return"requirenumeric"},t.prototype.getDefaultText=function(){return i.surveyLocalization.getString("numericError")},t}(o.SurveyError),c=function(e){function t(t,n){void 0===n&&(n=null);var r=e.call(this,null,n)||this;return r.maxSize=t,r.locText.text=r.getText(),r}return a(t,e),t.prototype.getErrorType=function(){return"exceedsize"},t.prototype.getDefaultText=function(){return i.surveyLocalization.getString("exceedMaxSize").format(this.getTextSize())},t.prototype.getTextSize=function(){if(0===this.maxSize)return"0 Byte";var e=Math.floor(Math.log(this.maxSize)/Math.log(1024));return(this.maxSize/Math.pow(1024,e)).toFixed([0,0,2,3,3][e])+" "+["Bytes","KB","MB","GB","TB"][e]},t}(o.SurveyError),p=function(e){function t(t,n,r){void 0===r&&(r=null);var i=e.call(this,null,r)||this;return i.status=t,i.response=n,i}return a(t,e),t.prototype.getErrorType=function(){return"webrequest"},t.prototype.getDefaultText=function(){return i.surveyLocalization.getString("urlRequestError").format(this.status,this.response)},t}(o.SurveyError),d=function(e){function t(t,n){void 0===n&&(n=null);var r=e.call(this,t,n)||this;return r.text=t,r}return a(t,e),t.prototype.getErrorType=function(){return"webrequestempty"},t.prototype.getDefaultText=function(){return i.surveyLocalization.getString("urlGetChoicesError")},t}(o.SurveyError),h=function(e){function t(t,n){void 0===n&&(n=null);var r=e.call(this,t,n)||this;return r.text=t,r}return a(t,e),t.prototype.getErrorType=function(){return"otherempty"},t.prototype.getDefaultText=function(){return i.surveyLocalization.getString("otherRequiredError")},t}(o.SurveyError),f=function(e){function t(t,n){void 0===n&&(n=null);var r=e.call(this,t,n)||this;return r.text=t,r}return a(t,e),t.prototype.getErrorType=function(){return"uploadingfile"},t.prototype.getDefaultText=function(){return i.surveyLocalization.getString("uploadingFile")},t}(o.SurveyError),m=function(e){function t(t,n){void 0===n&&(n=null);var r=e.call(this,t,n)||this;return r.text=t,r}return a(t,e),t.prototype.getErrorType=function(){return"requiredinallrowserror"},t.prototype.getDefaultText=function(){return i.surveyLocalization.getString("requiredInAllRowsError")},t}(o.SurveyError),g=function(e){function t(t,n){void 0===n&&(n=null);var r=e.call(this,null,n)||this;return r.minRowCount=t,r}return a(t,e),t.prototype.getErrorType=function(){return"minrowcounterror"},t.prototype.getDefaultText=function(){return i.surveyLocalization.getString("minRowCountError").format(this.minRowCount)},t}(o.SurveyError),y=function(e){function t(t,n){void 0===n&&(n=null);var r=e.call(this,t,n)||this;return r.text=t,r}return a(t,e),t.prototype.getErrorType=function(){return"keyduplicationerror"},t.prototype.getDefaultText=function(){return i.surveyLocalization.getString("keyDuplicationError")},t}(o.SurveyError),v=function(e){function t(t,n){void 0===n&&(n=null);var r=e.call(this,t,n)||this;return r.text=t,r}return a(t,e),t.prototype.getErrorType=function(){return"custom"},t}(o.SurveyError)},"./src/expressionItems.ts":
/*!********************************!*\
  !*** ./src/expressionItems.ts ***!
  \********************************/
/*! exports provided: ExpressionItem, HtmlConditionItem, UrlConditionItem */function(e,t,n){"use strict";n.r(t),n.d(t,"ExpressionItem",(function(){return l})),n.d(t,"HtmlConditionItem",(function(){return u})),n.d(t,"UrlConditionItem",(function(){return c}));var r,i=n(/*! ./jsonobject */"./src/jsonobject.ts"),o=n(/*! ./base */"./src/base.ts"),a=n(/*! ./conditions */"./src/conditions.ts"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t){void 0===t&&(t=null);var n=e.call(this)||this;return n.createLocalizableString("html",n),n.expression=t,n}return s(t,e),t.prototype.getType=function(){return"expressionitem"},t.prototype.runCondition=function(e,t){return!!this.expression&&new a.ConditionRunner(this.expression).run(e,t)},Object.defineProperty(t.prototype,"expression",{get:function(){return this.getPropertyValue("expression","")},set:function(e){this.setPropertyValue("expression",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locHtml",{get:function(){return this.getLocalizableString("html")},enumerable:!1,configurable:!0}),t.prototype.getLocale=function(){return this.locOwner?this.locOwner.getLocale():""},t.prototype.getMarkdownHtml=function(e,t){return this.locOwner?this.locOwner.getMarkdownHtml(e,t):null},t.prototype.getRenderer=function(e){return this.locOwner?this.locOwner.getRenderer(e):null},t.prototype.getProcessedText=function(e){return this.locOwner?this.locOwner.getProcessedText(e):e},t}(o.Base),u=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var r=e.call(this,t)||this;return r.createLocalizableString("html",r),r.html=n,r}return s(t,e),t.prototype.getType=function(){return"htmlconditionitem"},Object.defineProperty(t.prototype,"html",{get:function(){return this.getLocalizableStringText("html")},set:function(e){this.setLocalizableStringText("html",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locHtml",{get:function(){return this.getLocalizableString("html")},enumerable:!1,configurable:!0}),t}(l),c=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var r=e.call(this,t)||this;return r.createLocalizableString("url",r),r.url=n,r}return s(t,e),t.prototype.getType=function(){return"urlconditionitem"},Object.defineProperty(t.prototype,"url",{get:function(){return this.getLocalizableStringText("url")},set:function(e){this.setLocalizableStringText("url",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locUrl",{get:function(){return this.getLocalizableString("url")},enumerable:!1,configurable:!0}),t}(l);i.Serializer.addClass("expressionitem",["expression:condition"],(function(){return new l}),"base"),i.Serializer.addClass("htmlconditionitem",[{name:"html:html",serializationProperty:"locHtml"}],(function(){return new u}),"expressionitem"),i.Serializer.addClass("urlconditionitem",[{name:"url:string",serializationProperty:"locUrl"}],(function(){return new c}),"expressionitem")},"./src/expressions/expressionParser.ts":
/*!*********************************************!*\
  !*** ./src/expressions/expressionParser.ts ***!
  \*********************************************/
/*! exports provided: SyntaxError, parse */function(e,t,n){"use strict";n.r(t),n.d(t,"SyntaxError",(function(){return a})),n.d(t,"parse",(function(){return s}));var r,i=n(/*! ./expressions */"./src/expressions/expressions.ts"),o=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(n,r,i,o){var a=e.call(this)||this;return a.message=n,a.expected=r,a.found=i,a.location=o,a.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(a,t),a}return o(t,e),t.buildMessage=function(e,t){function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function r(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}function o(e){switch(e.type){case"literal":return'"'+r(e.text)+'"';case"class":var t=e.parts.map((function(e){return Array.isArray(e)?i(e[0])+"-"+i(e[1]):i(e)}));return"["+(e.inverted?"^":"")+t+"]";case"any":return"any character";case"end":return"end of input";case"other":return e.description}}return"Expected "+function(e){var t,n,r=e.map(o);if(r.sort(),r.length>0){for(t=1,n=1;t<r.length;t++)r[t-1]!==r[t]&&(r[n]=r[t],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+((a=t)?'"'+r(a)+'"':"end of input")+" found.";var a},t}(Error),s=function(e,t){t=void 0!==t?t:{};var n,r={},o={Expression:Be},s=Be,l=function(e,t){return ht(e,t,!0)},u=Me("||",!1),c=Me("or",!0),p=Me("&&",!1),d=Me("and",!0),h=function(e,t){return ht(e,t)},f=Me("<=",!1),m=Me("lessorequal",!0),g=Me(">=",!1),y=Me("greaterorequal",!0),v=Me("=",!1),b=Me("equal",!0),x=Me("!=",!1),w=Me("notequal",!0),_=Me("<",!1),C=Me("less",!0),S=Me(">",!1),k=Me("greater",!0),E=Me("+",!1),T=Me("-",!1),I=Me("*",!1),P=Me("/",!1),O=Me("%",!1),N=Me("^",!1),R=Me("power",!0),A=Me("*=",!1),D=Me("contains",!0),V=Me("contain",!0),M=Me("notcontains",!0),F=Me("notcontain",!0),L=Me("anyof",!0),z=Me("allof",!0),j=Me("(",!1),q=Me(")",!1),$=Me("!",!1),B=Me("negate",!0),U=Me("empty",!0),W=Me("notempty",!0),H=Me("undefined",!1),Q=Me("null",!1),G=Me("{",!1),K=Me("}",!1),J=Me("''",!1),X=Me('""',!1),Y=Me("'",!1),Z=function(e){return"'"+e+"'"},ee=Me('"',!1),te=Me("[",!1),ne=Me("]",!1),re=Me(",",!1),ie=Me("true",!0),oe=Me("false",!0),ae=Me("0x",!1),se=/^[\-]/,le=Fe(["-"],!1,!1),ue=Me(".",!1),ce=Me("0",!1),pe=function(e){return e.join("")},de=Me("\\'",!1),he=Me('\\"',!1),fe=/^[^"']/,me=Fe(['"',"'"],!0,!1),ge=function(){return Ve()},ye=/^[^{}]/,ve=Fe(["{","}"],!0,!1),be=/^[0-9]/,xe=Fe([["0","9"]],!1,!1),we=/^[1-9]/,_e=Fe([["1","9"]],!1,!1),Ce=/^[a-zA-Z]/,Se=Fe([["a","z"],["A","Z"]],!1,!1),ke=Le("whitespace"),Ee=/^[ \t\n\r]/,Te=Fe([" ","\t","\n","\r"],!1,!1),Ie=0,Pe=0,Oe=[{line:1,column:1}],Ne=0,Re=[],Ae=0,De={};if(void 0!==t.startRule){if(!(t.startRule in o))throw new Error("Can't start parsing from rule \""+t.startRule+'".');s=o[t.startRule]}function Ve(){return e.substring(Pe,Ie)}function Me(e,t){return{type:"literal",text:e,ignoreCase:t}}function Fe(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function Le(e){return{type:"other",description:e}}function ze(t){var n,r=Oe[t];if(r)return r;for(n=t-1;!Oe[n];)n--;for(r={line:(r=Oe[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return Oe[t]=r,r}function je(e,t){var n=ze(e),r=ze(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function qe(e){Ie<Ne||(Ie>Ne&&(Ne=Ie,Re=[]),Re.push(e))}function $e(e,t,n){return new a(a.buildMessage(e,t),e,t,n)}function Be(){var e,t,n,i,o,a,s,u,c=34*Ie+0,p=De[c];if(p)return Ie=p.nextPos,p.result;if(e=Ie,dt()!==r)if((t=We())!==r){for(n=[],i=Ie,(o=dt())!==r&&(a=Ue())!==r&&(s=dt())!==r&&(u=We())!==r?i=o=[o,a,s,u]:(Ie=i,i=r);i!==r;)n.push(i),i=Ie,(o=dt())!==r&&(a=Ue())!==r&&(s=dt())!==r&&(u=We())!==r?i=o=[o,a,s,u]:(Ie=i,i=r);n!==r&&(i=dt())!==r?(Pe=e,e=l(t,n)):(Ie=e,e=r)}else Ie=e,e=r;else Ie=e,e=r;return De[c]={nextPos:Ie,result:e},e}function Ue(){var t,n,i=34*Ie+1,o=De[i];return o?(Ie=o.nextPos,o.result):(t=Ie,"||"===e.substr(Ie,2)?(n="||",Ie+=2):(n=r,0===Ae&&qe(u)),n===r&&("or"===e.substr(Ie,2).toLowerCase()?(n=e.substr(Ie,2),Ie+=2):(n=r,0===Ae&&qe(c))),n!==r&&(Pe=t,n="or"),t=n,De[i]={nextPos:Ie,result:t},t)}function We(){var e,t,n,i,o,a,s,u,c=34*Ie+2,p=De[c];if(p)return Ie=p.nextPos,p.result;if(e=Ie,(t=Qe())!==r){for(n=[],i=Ie,(o=dt())!==r&&(a=He())!==r&&(s=dt())!==r&&(u=Qe())!==r?i=o=[o,a,s,u]:(Ie=i,i=r);i!==r;)n.push(i),i=Ie,(o=dt())!==r&&(a=He())!==r&&(s=dt())!==r&&(u=Qe())!==r?i=o=[o,a,s,u]:(Ie=i,i=r);n!==r?(Pe=e,e=t=l(t,n)):(Ie=e,e=r)}else Ie=e,e=r;return De[c]={nextPos:Ie,result:e},e}function He(){var t,n,i=34*Ie+3,o=De[i];return o?(Ie=o.nextPos,o.result):(t=Ie,"&&"===e.substr(Ie,2)?(n="&&",Ie+=2):(n=r,0===Ae&&qe(p)),n===r&&("and"===e.substr(Ie,3).toLowerCase()?(n=e.substr(Ie,3),Ie+=3):(n=r,0===Ae&&qe(d))),n!==r&&(Pe=t,n="and"),t=n,De[i]={nextPos:Ie,result:t},t)}function Qe(){var e,t,n,i,o,a,s,l,u=34*Ie+4,c=De[u];if(c)return Ie=c.nextPos,c.result;if(e=Ie,(t=Ke())!==r){for(n=[],i=Ie,(o=dt())!==r&&(a=Ge())!==r&&(s=dt())!==r&&(l=Ke())!==r?i=o=[o,a,s,l]:(Ie=i,i=r);i!==r;)n.push(i),i=Ie,(o=dt())!==r&&(a=Ge())!==r&&(s=dt())!==r&&(l=Ke())!==r?i=o=[o,a,s,l]:(Ie=i,i=r);n!==r?(Pe=e,e=t=h(t,n)):(Ie=e,e=r)}else Ie=e,e=r;return De[u]={nextPos:Ie,result:e},e}function Ge(){var t,n,i=34*Ie+5,o=De[i];return o?(Ie=o.nextPos,o.result):(t=Ie,"<="===e.substr(Ie,2)?(n="<=",Ie+=2):(n=r,0===Ae&&qe(f)),n===r&&("lessorequal"===e.substr(Ie,11).toLowerCase()?(n=e.substr(Ie,11),Ie+=11):(n=r,0===Ae&&qe(m))),n!==r&&(Pe=t,n="lessorequal"),(t=n)===r&&(t=Ie,">="===e.substr(Ie,2)?(n=">=",Ie+=2):(n=r,0===Ae&&qe(g)),n===r&&("greaterorequal"===e.substr(Ie,14).toLowerCase()?(n=e.substr(Ie,14),Ie+=14):(n=r,0===Ae&&qe(y))),n!==r&&(Pe=t,n="greaterorequal"),(t=n)===r&&(t=Ie,61===e.charCodeAt(Ie)?(n="=",Ie++):(n=r,0===Ae&&qe(v)),n===r&&("equal"===e.substr(Ie,5).toLowerCase()?(n=e.substr(Ie,5),Ie+=5):(n=r,0===Ae&&qe(b))),n!==r&&(Pe=t,n="equal"),(t=n)===r&&(t=Ie,"!="===e.substr(Ie,2)?(n="!=",Ie+=2):(n=r,0===Ae&&qe(x)),n===r&&("notequal"===e.substr(Ie,8).toLowerCase()?(n=e.substr(Ie,8),Ie+=8):(n=r,0===Ae&&qe(w))),n!==r&&(Pe=t,n="notequal"),(t=n)===r&&(t=Ie,60===e.charCodeAt(Ie)?(n="<",Ie++):(n=r,0===Ae&&qe(_)),n===r&&("less"===e.substr(Ie,4).toLowerCase()?(n=e.substr(Ie,4),Ie+=4):(n=r,0===Ae&&qe(C))),n!==r&&(Pe=t,n="less"),(t=n)===r&&(t=Ie,62===e.charCodeAt(Ie)?(n=">",Ie++):(n=r,0===Ae&&qe(S)),n===r&&("greater"===e.substr(Ie,7).toLowerCase()?(n=e.substr(Ie,7),Ie+=7):(n=r,0===Ae&&qe(k))),n!==r&&(Pe=t,n="greater"),t=n))))),De[i]={nextPos:Ie,result:t},t)}function Ke(){var e,t,n,i,o,a,s,u,c=34*Ie+6,p=De[c];if(p)return Ie=p.nextPos,p.result;if(e=Ie,(t=Xe())!==r){for(n=[],i=Ie,(o=dt())!==r&&(a=Je())!==r&&(s=dt())!==r&&(u=Xe())!==r?i=o=[o,a,s,u]:(Ie=i,i=r);i!==r;)n.push(i),i=Ie,(o=dt())!==r&&(a=Je())!==r&&(s=dt())!==r&&(u=Xe())!==r?i=o=[o,a,s,u]:(Ie=i,i=r);n!==r?(Pe=e,e=t=l(t,n)):(Ie=e,e=r)}else Ie=e,e=r;return De[c]={nextPos:Ie,result:e},e}function Je(){var t,n,i=34*Ie+7,o=De[i];return o?(Ie=o.nextPos,o.result):(t=Ie,43===e.charCodeAt(Ie)?(n="+",Ie++):(n=r,0===Ae&&qe(E)),n!==r&&(Pe=t,n="plus"),(t=n)===r&&(t=Ie,45===e.charCodeAt(Ie)?(n="-",Ie++):(n=r,0===Ae&&qe(T)),n!==r&&(Pe=t,n="minus"),t=n),De[i]={nextPos:Ie,result:t},t)}function Xe(){var e,t,n,i,o,a,s,u,c=34*Ie+8,p=De[c];if(p)return Ie=p.nextPos,p.result;if(e=Ie,(t=Ze())!==r){for(n=[],i=Ie,(o=dt())!==r&&(a=Ye())!==r&&(s=dt())!==r&&(u=Ze())!==r?i=o=[o,a,s,u]:(Ie=i,i=r);i!==r;)n.push(i),i=Ie,(o=dt())!==r&&(a=Ye())!==r&&(s=dt())!==r&&(u=Ze())!==r?i=o=[o,a,s,u]:(Ie=i,i=r);n!==r?(Pe=e,e=t=l(t,n)):(Ie=e,e=r)}else Ie=e,e=r;return De[c]={nextPos:Ie,result:e},e}function Ye(){var t,n,i=34*Ie+9,o=De[i];return o?(Ie=o.nextPos,o.result):(t=Ie,42===e.charCodeAt(Ie)?(n="*",Ie++):(n=r,0===Ae&&qe(I)),n!==r&&(Pe=t,n="mul"),(t=n)===r&&(t=Ie,47===e.charCodeAt(Ie)?(n="/",Ie++):(n=r,0===Ae&&qe(P)),n!==r&&(Pe=t,n="div"),(t=n)===r&&(t=Ie,37===e.charCodeAt(Ie)?(n="%",Ie++):(n=r,0===Ae&&qe(O)),n!==r&&(Pe=t,n="mod"),t=n)),De[i]={nextPos:Ie,result:t},t)}function Ze(){var e,t,n,i,o,a,s,u,c=34*Ie+10,p=De[c];if(p)return Ie=p.nextPos,p.result;if(e=Ie,(t=tt())!==r){for(n=[],i=Ie,(o=dt())!==r&&(a=et())!==r&&(s=dt())!==r&&(u=tt())!==r?i=o=[o,a,s,u]:(Ie=i,i=r);i!==r;)n.push(i),i=Ie,(o=dt())!==r&&(a=et())!==r&&(s=dt())!==r&&(u=tt())!==r?i=o=[o,a,s,u]:(Ie=i,i=r);n!==r?(Pe=e,e=t=l(t,n)):(Ie=e,e=r)}else Ie=e,e=r;return De[c]={nextPos:Ie,result:e},e}function et(){var t,n,i=34*Ie+11,o=De[i];return o?(Ie=o.nextPos,o.result):(t=Ie,94===e.charCodeAt(Ie)?(n="^",Ie++):(n=r,0===Ae&&qe(N)),n===r&&("power"===e.substr(Ie,5).toLowerCase()?(n=e.substr(Ie,5),Ie+=5):(n=r,0===Ae&&qe(R))),n!==r&&(Pe=t,n="power"),t=n,De[i]={nextPos:Ie,result:t},t)}function tt(){var e,t,n,i,o,a,s,l,u=34*Ie+12,c=De[u];if(c)return Ie=c.nextPos,c.result;if(e=Ie,(t=rt())!==r){for(n=[],i=Ie,(o=dt())!==r&&(a=nt())!==r&&(s=dt())!==r?((l=rt())===r&&(l=null),l!==r?i=o=[o,a,s,l]:(Ie=i,i=r)):(Ie=i,i=r);i!==r;)n.push(i),i=Ie,(o=dt())!==r&&(a=nt())!==r&&(s=dt())!==r?((l=rt())===r&&(l=null),l!==r?i=o=[o,a,s,l]:(Ie=i,i=r)):(Ie=i,i=r);n!==r?(Pe=e,e=t=h(t,n)):(Ie=e,e=r)}else Ie=e,e=r;return De[u]={nextPos:Ie,result:e},e}function nt(){var t,n,i=34*Ie+13,o=De[i];return o?(Ie=o.nextPos,o.result):(t=Ie,"*="===e.substr(Ie,2)?(n="*=",Ie+=2):(n=r,0===Ae&&qe(A)),n===r&&("contains"===e.substr(Ie,8).toLowerCase()?(n=e.substr(Ie,8),Ie+=8):(n=r,0===Ae&&qe(D)),n===r&&("contain"===e.substr(Ie,7).toLowerCase()?(n=e.substr(Ie,7),Ie+=7):(n=r,0===Ae&&qe(V)))),n!==r&&(Pe=t,n="contains"),(t=n)===r&&(t=Ie,"notcontains"===e.substr(Ie,11).toLowerCase()?(n=e.substr(Ie,11),Ie+=11):(n=r,0===Ae&&qe(M)),n===r&&("notcontain"===e.substr(Ie,10).toLowerCase()?(n=e.substr(Ie,10),Ie+=10):(n=r,0===Ae&&qe(F))),n!==r&&(Pe=t,n="notcontains"),(t=n)===r&&(t=Ie,"anyof"===e.substr(Ie,5).toLowerCase()?(n=e.substr(Ie,5),Ie+=5):(n=r,0===Ae&&qe(L)),n!==r&&(Pe=t,n="anyof"),(t=n)===r&&(t=Ie,"allof"===e.substr(Ie,5).toLowerCase()?(n=e.substr(Ie,5),Ie+=5):(n=r,0===Ae&&qe(z)),n!==r&&(Pe=t,n="allof"),t=n))),De[i]={nextPos:Ie,result:t},t)}function rt(){var t,n,o,a,s=34*Ie+14,l=De[s];return l?(Ie=l.nextPos,l.result):(t=Ie,40===e.charCodeAt(Ie)?(n="(",Ie++):(n=r,0===Ae&&qe(j)),n!==r&&dt()!==r&&(o=Be())!==r&&dt()!==r?(41===e.charCodeAt(Ie)?(a=")",Ie++):(a=r,0===Ae&&qe(q)),a===r&&(a=null),a!==r?(Pe=t,t=n=o):(Ie=t,t=r)):(Ie=t,t=r),t===r&&(t=function(){var t,n,o,a,s,l,u,c=34*Ie+15,p=De[c];return p?(Ie=p.nextPos,p.result):(t=Ie,(n=ut())!==r?(40===e.charCodeAt(Ie)?(o="(",Ie++):(o=r,0===Ae&&qe(j)),o!==r&&(a=ot())!==r?(41===e.charCodeAt(Ie)?(s=")",Ie++):(s=r,0===Ae&&qe(q)),s===r&&(s=null),s!==r?(Pe=t,l=n,u=a,n=new i.FunctionOperand(l,u),t=n):(Ie=t,t=r)):(Ie=t,t=r)):(Ie=t,t=r),De[c]={nextPos:Ie,result:t},t)}())===r&&(t=function(){var t,n,o,a,s=34*Ie+16,l=De[s];return l?(Ie=l.nextPos,l.result):(t=Ie,33===e.charCodeAt(Ie)?(n="!",Ie++):(n=r,0===Ae&&qe($)),n===r&&("negate"===e.substr(Ie,6).toLowerCase()?(n=e.substr(Ie,6),Ie+=6):(n=r,0===Ae&&qe(B))),n!==r&&dt()!==r&&(o=Be())!==r?(Pe=t,a=o,n=new i.UnaryOperand(a,"negate"),t=n):(Ie=t,t=r),t===r&&(t=Ie,(n=it())!==r&&dt()!==r&&(o=function(){var t,n,i=34*Ie+17,o=De[i];return o?(Ie=o.nextPos,o.result):(t=Ie,"empty"===e.substr(Ie,5).toLowerCase()?(n=e.substr(Ie,5),Ie+=5):(n=r,0===Ae&&qe(U)),n!==r&&(Pe=t,n="empty"),(t=n)===r&&(t=Ie,"notempty"===e.substr(Ie,8).toLowerCase()?(n=e.substr(Ie,8),Ie+=8):(n=r,0===Ae&&qe(W)),n!==r&&(Pe=t,n="notempty"),t=n),De[i]={nextPos:Ie,result:t},t)}())!==r?(Pe=t,n=function(e,t){return new i.UnaryOperand(e,t)}(n,o),t=n):(Ie=t,t=r)),De[s]={nextPos:Ie,result:t},t)}())===r&&(t=it())===r&&(t=function(){var t,n,i,o,a=34*Ie+20,s=De[a];return s?(Ie=s.nextPos,s.result):(t=Ie,91===e.charCodeAt(Ie)?(n="[",Ie++):(n=r,0===Ae&&qe(te)),n!==r&&(i=ot())!==r?(93===e.charCodeAt(Ie)?(o="]",Ie++):(o=r,0===Ae&&qe(ne)),o!==r?(Pe=t,t=n=i):(Ie=t,t=r)):(Ie=t,t=r),De[a]={nextPos:Ie,result:t},t)}()),De[s]={nextPos:Ie,result:t},t)}function it(){var t,n,o,a,s,l=34*Ie+18,u=De[l];return u?(Ie=u.nextPos,u.result):(t=Ie,dt()!==r?("undefined"===e.substr(Ie,9)?(n="undefined",Ie+=9):(n=r,0===Ae&&qe(H)),n===r&&("null"===e.substr(Ie,4)?(n="null",Ie+=4):(n=r,0===Ae&&qe(Q))),n!==r?(Pe=t,t=null):(Ie=t,t=r)):(Ie=t,t=r),t===r&&(t=Ie,dt()!==r&&(n=function(){var t,n,i,o,a=34*Ie+19,s=De[a];return s?(Ie=s.nextPos,s.result):(t=Ie,(n=function(){var t,n,i=34*Ie+22,o=De[i];return o?(Ie=o.nextPos,o.result):(t=Ie,"true"===e.substr(Ie,4).toLowerCase()?(n=e.substr(Ie,4),Ie+=4):(n=r,0===Ae&&qe(ie)),n!==r&&(Pe=t,n=!0),(t=n)===r&&(t=Ie,"false"===e.substr(Ie,5).toLowerCase()?(n=e.substr(Ie,5),Ie+=5):(n=r,0===Ae&&qe(oe)),n!==r&&(Pe=t,n=!1),t=n),De[i]={nextPos:Ie,result:t},t)}())!==r&&(Pe=t,n=n),(t=n)===r&&(t=Ie,(n=function(){var t,n,i,o,a=34*Ie+23,s=De[a];return s?(Ie=s.nextPos,s.result):(t=Ie,"0x"===e.substr(Ie,2)?(n="0x",Ie+=2):(n=r,0===Ae&&qe(ae)),n!==r&&(i=ct())!==r?(Pe=t,n=parseInt(Ve(),16),t=n):(Ie=t,t=r),t===r&&(t=Ie,se.test(e.charAt(Ie))?(n=e.charAt(Ie),Ie++):(n=r,0===Ae&&qe(le)),n===r&&(n=null),n!==r&&(i=function(){var t,n,i,o=34*Ie+24,a=De[o];return a?(Ie=a.nextPos,a.result):(t=Ie,(n=ct())!==r?(46===e.charCodeAt(Ie)?(i=".",Ie++):(i=r,0===Ae&&qe(ue)),i!==r&&ct()!==r?(Pe=t,n=parseFloat(Ve()),t=n):(Ie=t,t=r)):(Ie=t,t=r),t===r&&(t=Ie,(n=function(){var t,n,i=34*Ie+31,o=De[i];if(o)return Ie=o.nextPos,o.result;if(t=[],we.test(e.charAt(Ie))?(n=e.charAt(Ie),Ie++):(n=r,0===Ae&&qe(_e)),n!==r)for(;n!==r;)t.push(n),we.test(e.charAt(Ie))?(n=e.charAt(Ie),Ie++):(n=r,0===Ae&&qe(_e));else t=r;return De[i]={nextPos:Ie,result:t},t}())!==r?((i=ct())===r&&(i=null),i!==r?(Pe=t,n=parseInt(Ve(),10),t=n):(Ie=t,t=r)):(Ie=t,t=r),t===r&&(t=Ie,48===e.charCodeAt(Ie)?(n="0",Ie++):(n=r,0===Ae&&qe(ce)),n!==r&&(Pe=t,n=0),t=n)),De[o]={nextPos:Ie,result:t},t)}())!==r?(Pe=t,o=i,t=n=null==n?o:-o):(Ie=t,t=r)),De[a]={nextPos:Ie,result:t},t)}())!==r&&(Pe=t,n=n),(t=n)===r&&(t=Ie,(n=ut())!==r&&(Pe=t,n=n),(t=n)===r&&(t=Ie,"''"===e.substr(Ie,2)?(n="''",Ie+=2):(n=r,0===Ae&&qe(J)),n!==r&&(Pe=t,n=""),(t=n)===r&&(t=Ie,'""'===e.substr(Ie,2)?(n='""',Ie+=2):(n=r,0===Ae&&qe(X)),n!==r&&(Pe=t,n=""),(t=n)===r&&(t=Ie,39===e.charCodeAt(Ie)?(n="'",Ie++):(n=r,0===Ae&&qe(Y)),n!==r&&(i=at())!==r?(39===e.charCodeAt(Ie)?(o="'",Ie++):(o=r,0===Ae&&qe(Y)),o!==r?(Pe=t,n=Z(i),t=n):(Ie=t,t=r)):(Ie=t,t=r),t===r&&(t=Ie,34===e.charCodeAt(Ie)?(n='"',Ie++):(n=r,0===Ae&&qe(ee)),n!==r&&(i=at())!==r?(34===e.charCodeAt(Ie)?(o='"',Ie++):(o=r,0===Ae&&qe(ee)),o!==r?(Pe=t,n=Z(i),t=n):(Ie=t,t=r)):(Ie=t,t=r))))))),De[a]={nextPos:Ie,result:t},t)}())!==r?(Pe=t,s=n,t=new i.Const(s)):(Ie=t,t=r),t===r&&(t=Ie,dt()!==r?(123===e.charCodeAt(Ie)?(n="{",Ie++):(n=r,0===Ae&&qe(G)),n!==r&&(o=function(){var e,t,n,i=34*Ie+25,o=De[i];if(o)return Ie=o.nextPos,o.result;if(e=Ie,t=[],(n=lt())!==r)for(;n!==r;)t.push(n),n=lt();else t=r;return t!==r&&(Pe=e,t=pe(t)),e=t,De[i]={nextPos:Ie,result:e},e}())!==r?(125===e.charCodeAt(Ie)?(a="}",Ie++):(a=r,0===Ae&&qe(K)),a!==r?(Pe=t,t=function(e){return new i.Variable(e)}(o)):(Ie=t,t=r)):(Ie=t,t=r)):(Ie=t,t=r))),De[l]={nextPos:Ie,result:t},t)}function ot(){var t,n,o,a,s,l,u,c,p=34*Ie+21,d=De[p];if(d)return Ie=d.nextPos,d.result;if(t=Ie,(n=Be())===r&&(n=null),n!==r){for(o=[],a=Ie,(s=dt())!==r?(44===e.charCodeAt(Ie)?(l=",",Ie++):(l=r,0===Ae&&qe(re)),l!==r&&(u=dt())!==r&&(c=Be())!==r?a=s=[s,l,u,c]:(Ie=a,a=r)):(Ie=a,a=r);a!==r;)o.push(a),a=Ie,(s=dt())!==r?(44===e.charCodeAt(Ie)?(l=",",Ie++):(l=r,0===Ae&&qe(re)),l!==r&&(u=dt())!==r&&(c=Be())!==r?a=s=[s,l,u,c]:(Ie=a,a=r)):(Ie=a,a=r);o!==r?(Pe=t,t=n=function(e,t){if(null==e)return new i.ArrayOperand([]);var n=[e];if(Array.isArray(t))for(var r=function(e){return[].concat.apply([],e)}(t),o=3;o<r.length;o+=4)n.push(r[o]);return new i.ArrayOperand(n)}(n,o)):(Ie=t,t=r)}else Ie=t,t=r;return De[p]={nextPos:Ie,result:t},t}function at(){var e,t,n,i=34*Ie+26,o=De[i];if(o)return Ie=o.nextPos,o.result;if(e=Ie,t=[],(n=st())!==r)for(;n!==r;)t.push(n),n=st();else t=r;return t!==r&&(Pe=e,t=pe(t)),e=t,De[i]={nextPos:Ie,result:e},e}function st(){var t,n,i=34*Ie+27,o=De[i];return o?(Ie=o.nextPos,o.result):(t=Ie,"\\'"===e.substr(Ie,2)?(n="\\'",Ie+=2):(n=r,0===Ae&&qe(de)),n!==r&&(Pe=t,n="'"),(t=n)===r&&(t=Ie,'\\"'===e.substr(Ie,2)?(n='\\"',Ie+=2):(n=r,0===Ae&&qe(he)),n!==r&&(Pe=t,n='"'),(t=n)===r&&(t=Ie,fe.test(e.charAt(Ie))?(n=e.charAt(Ie),Ie++):(n=r,0===Ae&&qe(me)),n!==r&&(Pe=t,n=ge()),t=n)),De[i]={nextPos:Ie,result:t},t)}function lt(){var t,n,i=34*Ie+28,o=De[i];return o?(Ie=o.nextPos,o.result):(t=Ie,ye.test(e.charAt(Ie))?(n=e.charAt(Ie),Ie++):(n=r,0===Ae&&qe(ve)),n!==r&&(Pe=t,n=ge()),t=n,De[i]={nextPos:Ie,result:t},t)}function ut(){var e,t,n,i,o,a,s=34*Ie+29,l=De[s];if(l)return Ie=l.nextPos,l.result;if(e=Ie,pt()!==r){if(t=[],n=Ie,(i=ct())!==r){for(o=[],a=pt();a!==r;)o.push(a),a=pt();o!==r?n=i=[i,o]:(Ie=n,n=r)}else Ie=n,n=r;for(;n!==r;)if(t.push(n),n=Ie,(i=ct())!==r){for(o=[],a=pt();a!==r;)o.push(a),a=pt();o!==r?n=i=[i,o]:(Ie=n,n=r)}else Ie=n,n=r;t!==r?(Pe=e,e=ge()):(Ie=e,e=r)}else Ie=e,e=r;return De[s]={nextPos:Ie,result:e},e}function ct(){var t,n,i=34*Ie+30,o=De[i];if(o)return Ie=o.nextPos,o.result;if(t=[],be.test(e.charAt(Ie))?(n=e.charAt(Ie),Ie++):(n=r,0===Ae&&qe(xe)),n!==r)for(;n!==r;)t.push(n),be.test(e.charAt(Ie))?(n=e.charAt(Ie),Ie++):(n=r,0===Ae&&qe(xe));else t=r;return De[i]={nextPos:Ie,result:t},t}function pt(){var t,n,i=34*Ie+32,o=De[i];if(o)return Ie=o.nextPos,o.result;if(t=[],Ce.test(e.charAt(Ie))?(n=e.charAt(Ie),Ie++):(n=r,0===Ae&&qe(Se)),n!==r)for(;n!==r;)t.push(n),Ce.test(e.charAt(Ie))?(n=e.charAt(Ie),Ie++):(n=r,0===Ae&&qe(Se));else t=r;return De[i]={nextPos:Ie,result:t},t}function dt(){var t,n,i=34*Ie+33,o=De[i];if(o)return Ie=o.nextPos,o.result;for(Ae++,t=[],Ee.test(e.charAt(Ie))?(n=e.charAt(Ie),Ie++):(n=r,0===Ae&&qe(Te));n!==r;)t.push(n),Ee.test(e.charAt(Ie))?(n=e.charAt(Ie),Ie++):(n=r,0===Ae&&qe(Te));return Ae--,t===r&&(n=r,0===Ae&&qe(ke)),De[i]={nextPos:Ie,result:t},t}function ht(e,t,n){return void 0===n&&(n=!1),t.reduce((function(e,t){return new i.BinaryOperand(t[1],e,t[3],n)}),e)}if((n=s())!==r&&Ie===e.length)return n;throw n!==r&&Ie<e.length&&qe({type:"end"}),$e(Re,Ne<e.length?e.charAt(Ne):null,Ne<e.length?je(Ne,Ne+1):je(Ne,Ne))}},"./src/expressions/expressions.ts":
/*!****************************************!*\
  !*** ./src/expressions/expressions.ts ***!
  \****************************************/
/*! exports provided: Operand, BinaryOperand, UnaryOperand, ArrayOperand, Const, Variable, FunctionOperand, OperandMaker */function(e,t,n){"use strict";n.r(t),n.d(t,"Operand",(function(){return l})),n.d(t,"BinaryOperand",(function(){return u})),n.d(t,"UnaryOperand",(function(){return c})),n.d(t,"ArrayOperand",(function(){return p})),n.d(t,"Const",(function(){return d})),n.d(t,"Variable",(function(){return h})),n.d(t,"FunctionOperand",(function(){return f})),n.d(t,"OperandMaker",(function(){return m}));var r,i=n(/*! ../helpers */"./src/helpers.ts"),o=n(/*! ../functionsfactory */"./src/functionsfactory.ts"),a=n(/*! ../conditionProcessValue */"./src/conditionProcessValue.ts"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(){function e(){}return e.prototype.toString=function(e){return void 0===e&&(e=void 0),""},e.prototype.hasFunction=function(){return!1},e.prototype.hasAsyncFunction=function(){return!1},e.prototype.addToAsyncList=function(e){},e}(),u=function(e){function t(t,n,r,i){void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=!1);var o=e.call(this)||this;return o.operatorName=t,o.left=n,o.right=r,o.isArithmeticValue=i,o.consumer=i?m.binaryFunctions.arithmeticOp(t):m.binaryFunctions[t],null==o.consumer&&m.throwInvalidOperatorError(t),o}return s(t,e),t.prototype.getType=function(){return"binary"},Object.defineProperty(t.prototype,"isArithmetic",{get:function(){return this.isArithmeticValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isConjunction",{get:function(){return"or"==this.operatorName||"and"==this.operatorName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"conjunction",{get:function(){return this.isConjunction?this.operatorName:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"operator",{get:function(){return this.operatorName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftOperand",{get:function(){return this.left},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightOperand",{get:function(){return this.right},enumerable:!1,configurable:!0}),t.prototype.evaluateParam=function(e,t){return null==e?null:e.evaluate(t)},t.prototype.evaluate=function(e){return this.consumer.call(this,this.evaluateParam(this.left,e),this.evaluateParam(this.right,e))},t.prototype.toString=function(e){if(void 0===e&&(e=void 0),e){var t=e(this);if(t)return t}return"("+m.safeToString(this.left,e)+" "+m.operatorToString(this.operatorName)+" "+m.safeToString(this.right,e)+")"},t.prototype.setVariables=function(e){null!=this.left&&this.left.setVariables(e),null!=this.right&&this.right.setVariables(e)},t.prototype.hasFunction=function(){return!!this.left&&this.left.hasFunction()||!!this.right&&this.right.hasFunction()},t.prototype.hasAsyncFunction=function(){return!!this.left&&this.left.hasAsyncFunction()||!!this.right&&this.right.hasAsyncFunction()},t.prototype.addToAsyncList=function(e){this.left&&this.left.addToAsyncList(e),this.right&&this.right.addToAsyncList(e)},t}(l),c=function(e){function t(t,n){var r=e.call(this)||this;return r.expressionValue=t,r.operatorName=n,r.consumer=m.unaryFunctions[n],null==r.consumer&&m.throwInvalidOperatorError(n),r}return s(t,e),Object.defineProperty(t.prototype,"operator",{get:function(){return this.operatorName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"expression",{get:function(){return this.expressionValue},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"unary"},t.prototype.toString=function(e){if(void 0===e&&(e=void 0),e){var t=e(this);if(t)return t}return m.operatorToString(this.operatorName)+" "+this.expression.toString(e)},t.prototype.evaluate=function(e){var t=this.expression.evaluate(e);return this.consumer.call(this,t)},t.prototype.setVariables=function(e){this.expression.setVariables(e)},t}(l),p=function(e){function t(t){var n=e.call(this)||this;return n.values=t,n}return s(t,e),t.prototype.getType=function(){return"array"},t.prototype.toString=function(e){if(void 0===e&&(e=void 0),e){var t=e(this);if(t)return t}return"["+this.values.map((function(t){return t.toString(e)})).join(", ")+"]"},t.prototype.evaluate=function(e){return this.values.map((function(t){return t.evaluate(e)}))},t.prototype.setVariables=function(e){this.values.forEach((function(t){t.setVariables(e)}))},t.prototype.hasFunction=function(){return this.values.some((function(e){return e.hasFunction()}))},t.prototype.hasAsyncFunction=function(){return this.values.some((function(e){return e.hasAsyncFunction()}))},t.prototype.addToAsyncList=function(e){this.values.forEach((function(t){return t.addToAsyncList(e)}))},t}(l),d=function(e){function t(t){var n=e.call(this)||this;return n.value=t,n}return s(t,e),t.prototype.getType=function(){return"const"},t.prototype.toString=function(e){if(void 0===e&&(e=void 0),e){var t=e(this);if(t)return t}return this.value.toString()},Object.defineProperty(t.prototype,"correctValue",{get:function(){return this.getCorrectValue(this.value)},enumerable:!1,configurable:!0}),t.prototype.evaluate=function(){return this.getCorrectValue(this.value)},t.prototype.setVariables=function(e){},t.prototype.getCorrectValue=function(e){return e&&"string"==typeof e?this.isBooleanValue(e)?"true"===e.toLowerCase():e.length>1&&this.isQuote(e[0])&&this.isQuote(e[e.length-1])?e.substr(1,e.length-2):m.isNumeric(e)?0==e.indexOf("0x")?parseInt(e):e.length>1&&"0"==e[0]?e:parseFloat(e):e:e},t.prototype.isQuote=function(e){return"'"==e||'"'==e},t.prototype.isBooleanValue=function(e){return e&&("true"===e.toLowerCase()||"false"===e.toLowerCase())},t}(l),h=function(e){function t(n){var r=e.call(this,n)||this;return r.variableName=n,r.valueInfo={},r.useValueAsItIs=!1,r.variableName&&r.variableName.length>1&&r.variableName[0]===t.DisableConversionChar&&(r.variableName=r.variableName.substr(1),r.useValueAsItIs=!0),r}return s(t,e),t.prototype.getType=function(){return"variable"},t.prototype.toString=function(e){if(void 0===e&&(e=void 0),e){var n=e(this);if(n)return n}return"{"+(this.useValueAsItIs?t.DisableConversionChar:"")+this.variableName+"}"},Object.defineProperty(t.prototype,"variable",{get:function(){return this.variableName},enumerable:!1,configurable:!0}),t.prototype.evaluate=function(e){return this.valueInfo.name=this.variableName,e.getValueInfo(this.valueInfo),this.valueInfo.hasValue?this.getCorrectValue(this.valueInfo.value):null},t.prototype.setVariables=function(e){e.push(this.variableName)},t.prototype.getCorrectValue=function(t){return this.useValueAsItIs?t:e.prototype.getCorrectValue.call(this,t)},t.DisableConversionChar="#",t}(d),f=function(e){function t(t,n){var r=e.call(this)||this;return r.originalValue=t,r.parameters=n,r.isReadyValue=!1,Array.isArray(n)&&0===n.length&&(r.parameters=new p([])),r}return s(t,e),t.prototype.getType=function(){return"function"},t.prototype.evaluateAsync=function(e){var t=this;this.isReadyValue=!1;var n=new a.ProcessValue;n.values=i.Helpers.createCopy(e.values),n.properties=i.Helpers.createCopy(e.properties),n.properties.returnResult=function(e){t.asynResult=e,t.isReadyValue=!0,t.onAsyncReady()},this.evaluateCore(n)},t.prototype.evaluate=function(e){return this.isReady?this.asynResult:this.evaluateCore(e)},t.prototype.evaluateCore=function(e){return o.FunctionFactory.Instance.run(this.originalValue,this.parameters.evaluate(e),e.properties)},t.prototype.toString=function(e){if(void 0===e&&(e=void 0),e){var t=e(this);if(t)return t}return this.originalValue+"("+this.parameters.toString(e)+")"},t.prototype.setVariables=function(e){this.parameters.setVariables(e)},Object.defineProperty(t.prototype,"isReady",{get:function(){return this.isReadyValue},enumerable:!1,configurable:!0}),t.prototype.hasFunction=function(){return!0},t.prototype.hasAsyncFunction=function(){return o.FunctionFactory.Instance.isAsyncFunction(this.originalValue)},t.prototype.addToAsyncList=function(e){this.hasAsyncFunction()&&e.push(this)},t}(l),m=function(){function e(){}return e.throwInvalidOperatorError=function(e){throw new Error("Invalid operator: '"+e+"'")},e.safeToString=function(e,t){return null==e?"":e.toString(t)},e.toOperandString=function(t){return!t||e.isNumeric(t)||e.isBooleanValue(t)||(t="'"+t+"'"),t},e.isSpaceString=function(e){return!!e&&!e.replace(" ","")},e.isNumeric=function(t){return(!t||!(t.indexOf("-")>-1||t.indexOf("+")>1||t.indexOf("*")>-1||t.indexOf("^")>-1||t.indexOf("/")>-1||t.indexOf("%")>-1))&&!e.isSpaceString(t)&&i.Helpers.isNumber(t)},e.isBooleanValue=function(e){return!!e&&("true"===e.toLowerCase()||"false"===e.toLowerCase())},e.isTwoValueEquals=function(e,t){return"undefined"===e&&(e=void 0),"undefined"===t&&(t=void 0),i.Helpers.isTwoValueEquals(e,t,!0)},e.operatorToString=function(t){var n=e.signs[t];return null==n?t:n},e.unaryFunctions={empty:function(e){return i.Helpers.isValueEmpty(e)},notempty:function(t){return!e.unaryFunctions.empty(t)},negate:function(e){return!e}},e.binaryFunctions={arithmeticOp:function(t){return function(n,r){i.Helpers.isValueEmpty(n)&&!e.isSpaceString(n)&&(n="string"==typeof r?"":0),i.Helpers.isValueEmpty(r)&&!e.isSpaceString(r)&&(r="string"==typeof n?"":0);var o=e.binaryFunctions[t];return null==o?null:o.call(this,n,r)}},and:function(e,t){return e&&t},or:function(e,t){return e||t},plus:function(e,t){return e+t},minus:function(e,t){return e-t},mul:function(e,t){return e*t},div:function(e,t){return t?e/t:null},mod:function(e,t){return t?e%t:null},power:function(e,t){return Math.pow(e,t)},greater:function(e,t){return null!=e&&null!=t&&e>t},less:function(e,t){return null!=e&&null!=t&&e<t},greaterorequal:function(t,n){return!!e.binaryFunctions.equal(t,n)||e.binaryFunctions.greater(t,n)},lessorequal:function(t,n){return!!e.binaryFunctions.equal(t,n)||e.binaryFunctions.less(t,n)},equal:function(t,n){return e.isTwoValueEquals(t,n)},notequal:function(t,n){return!e.binaryFunctions.equal(t,n)},contains:function(t,n){return e.binaryFunctions.containsCore(t,n,!0)},notcontains:function(t,n){return!t&&!i.Helpers.isValueEmpty(n)||e.binaryFunctions.containsCore(t,n,!1)},anyof:function(t,n){if(i.Helpers.isValueEmpty(t)&&i.Helpers.isValueEmpty(n))return!0;if(i.Helpers.isValueEmpty(t)||!Array.isArray(t)&&0===t.length)return!1;if(i.Helpers.isValueEmpty(n))return!0;if(!Array.isArray(t))return e.binaryFunctions.contains(n,t);if(!Array.isArray(n))return e.binaryFunctions.contains(t,n);for(var r=0;r<n.length;r++)if(e.binaryFunctions.contains(t,n[r]))return!0;return!1},allof:function(t,n){if(!t&&!i.Helpers.isValueEmpty(n))return!1;if(!Array.isArray(n))return e.binaryFunctions.contains(t,n);for(var r=0;r<n.length;r++)if(!e.binaryFunctions.contains(t,n[r]))return!1;return!0},containsCore:function(t,n,r){if(!t&&0!==t&&!1!==t)return!1;if(t.length||(t=t.toString(),("string"==typeof n||n instanceof String)&&(t=t.toUpperCase(),n=n.toUpperCase())),"string"==typeof t||t instanceof String){if(!n)return!1;n=n.toString();var i=t.indexOf(n)>-1;return r?i:!i}for(var o=Array.isArray(n)?n:[n],a=0;a<o.length;a++){var s=0;for(n=o[a];s<t.length&&!e.isTwoValueEquals(t[s],n);s++);if(s==t.length)return!r}return r}},e.signs={less:"<",lessorequal:"<=",greater:">",greaterorequal:">=",equal:"==",notequal:"!=",plus:"+",minus:"-",mul:"*",div:"/",and:"and",or:"or",power:"^",mod:"%",negate:"!"},e}()},"./src/flowpanel.ts":
/*!**************************!*\
  !*** ./src/flowpanel.ts ***!
  \**************************/
/*! exports provided: FlowPanelModel */function(e,t,n){"use strict";n.r(t),n.d(t,"FlowPanelModel",(function(){return s}));var r,i=n(/*! ./jsonobject */"./src/jsonobject.ts"),o=n(/*! ./panel */"./src/panel.ts"),a=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e){function t(t){void 0===t&&(t="");var n=e.call(this,t)||this;n.createLocalizableString("content",n,!0);var r=n;return n.registerFunctionOnPropertyValueChanged("content",(function(){r.onContentChanged()})),n}return a(t,e),t.prototype.getType=function(){return"flowpanel"},t.prototype.getChildrenLayoutType=function(){return"flow"},t.prototype.onSurveyLoad=function(){e.prototype.onSurveyLoad.call(this),this.onContentChanged()},Object.defineProperty(t.prototype,"content",{get:function(){return this.getLocalizableStringText("content")},set:function(e){this.setLocalizableStringText("content",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locContent",{get:function(){return this.getLocalizableString("content")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"html",{get:function(){return this.getPropertyValue("html","")},set:function(e){this.setPropertyValue("html",e)},enumerable:!1,configurable:!0}),t.prototype.onContentChanged=function(){var e="";e=this.onCustomHtmlProducing?this.onCustomHtmlProducing():this.produceHtml(),this.html=e,this.contentChangedCallback&&this.contentChangedCallback()},t.prototype.produceHtml=function(){for(var e=[],t=/{(.*?(element:)[^$].*?)}/g,n=this.content,r=0,i=null;null!==(i=t.exec(n));){i.index>r&&(e.push(n.substr(r,i.index-r)),r=i.index);var o=this.getQuestionFromText(i[0]);o?e.push(this.getHtmlForQuestion(o)):e.push(n.substr(r,i.index+i[0].length-r)),r=i.index+i[0].length}return r<n.length&&e.push(n.substr(r,n.length-r)),e.join("").replace(new RegExp("<br>","g"),"<br/>")},t.prototype.getQuestionFromText=function(e){return e=(e=e.substr(1,e.length-2)).replace(t.contentElementNamePrefix,"").trim(),this.getQuestionByName(e)},t.prototype.getHtmlForQuestion=function(e){return this.onGetHtmlForQuestion?this.onGetHtmlForQuestion(e):""},t.prototype.getQuestionHtmlId=function(e){return this.name+"_"+e.id},t.prototype.onAddElement=function(t,n){e.prototype.onAddElement.call(this,t,n),this.addElementToContent(t),t.renderWidth=""},t.prototype.onRemoveElement=function(t){var n=this.getElementContentText(t);this.content=this.content.replace(n,""),e.prototype.onRemoveElement.call(this,t)},t.prototype.dragDropMoveElement=function(e,t,n){},t.prototype.addElementToContent=function(e){if(!this.isLoadingFromJson){var t=this.getElementContentText(e);this.insertTextAtCursor(t)||(this.content=this.content+t)}},t.prototype.insertTextAtCursor=function(e,t){if(void 0===t&&(t=null),!this.isDesignMode||"undefined"==typeof document||!window.getSelection)return!1;var n=window.getSelection();if(n.getRangeAt&&n.rangeCount){var r=n.getRangeAt(0);if(r.deleteContents(),r.insertNode(document.createTextNode(e)),this.getContent){var i=this.getContent(t);this.content=i}return!0}return!1},t.prototype.getElementContentText=function(e){return"{"+t.contentElementNamePrefix+e.name+"}"},t.contentElementNamePrefix="element:",t}(o.PanelModel);i.Serializer.addClass("flowpanel",[{name:"content:html",serializationProperty:"locContent"}],(function(){return new s}),"panel")},"./src/functionsfactory.ts":
/*!*********************************!*\
  !*** ./src/functionsfactory.ts ***!
  \*********************************/
/*! exports provided: FunctionFactory, registerFunction */function(e,t,n){"use strict";n.r(t),n.d(t,"FunctionFactory",(function(){return i})),n.d(t,"registerFunction",(function(){return o}));var r=n(/*! ./helpers */"./src/helpers.ts"),i=function(){function e(){this.functionHash={},this.isAsyncHash={}}return e.prototype.register=function(e,t,n){void 0===n&&(n=!1),this.functionHash[e]=t,n&&(this.isAsyncHash[e]=!0)},e.prototype.unregister=function(e){delete this.functionHash[e],delete this.isAsyncHash[e]},e.prototype.hasFunction=function(e){return!!this.functionHash[e]},e.prototype.isAsyncFunction=function(e){return!!this.isAsyncHash[e]},e.prototype.clear=function(){this.functionHash={}},e.prototype.getAll=function(){var e=[];for(var t in this.functionHash)e.push(t);return e.sort()},e.prototype.run=function(e,t,n){void 0===n&&(n=null);var r=this.functionHash[e];if(!r)return null;var i={func:r};if(n)for(var o in n)i[o]=n[o];return i.func(t)},e.Instance=new e,e}(),o=i.Instance.register;function a(e,t){if(null!=e)if(Array.isArray(e))for(var n=0;n<e.length;n++)a(e[n],t);else r.Helpers.isNumber(e)&&(e=parseFloat(e)),t.push(e)}function s(e,t){var n=[];a(e,n);for(var r=void 0,i=0;i<n.length;i++)void 0===r&&(r=n[i]),t?r>n[i]&&(r=n[i]):r<n[i]&&(r=n[i]);return r}function l(e,t){var n=function(e){if(2!=e.length)return null;var t=e[0];if(!t)return null;if(!Array.isArray(t)&&!Array.isArray(Object.keys(t)))return null;var n=e[1];return"string"==typeof n||n instanceof String?{data:t,name:n}:null}(e);if(n){var r=void 0;if(Array.isArray(n.data))for(var i=0;i<n.data.length;i++)(a=n.data[i])&&a[n.name]&&(r=t(r,a[n.name]));else for(var o in n.data){var a;(a=n.data[o])&&a[n.name]&&(r=t(r,a[n.name]))}return r}}function u(e){var t=l(e,(function(e,t){return null==e&&(e=0),+e+ +t}));return void 0!==t?t:0}function c(e){var t=l(e,(function(e,t){return null==e&&(e=0),e+1}));return void 0!==t?t:0}i.Instance.register("sum",(function(e){var t=[];a(e,t);for(var n=0,r=0;r<t.length;r++)n+=t[r];return n})),i.Instance.register("min",(function(e){return s(e,!0)})),i.Instance.register("max",(function(e){return s(e,!1)})),i.Instance.register("count",(function(e){var t=[];return a(e,t),t.length})),i.Instance.register("avg",(function(e){var t=[];a(e,t);for(var n=0,r=0;r<t.length;r++)n+=t[r];return t.length>0?n/t.length:0})),i.Instance.register("sumInArray",u),i.Instance.register("minInArray",(function(e){return l(e,(function(e,t){return null==e?t:e<t?e:t}))})),i.Instance.register("maxInArray",(function(e){return l(e,(function(e,t){return null==e?t:e>t?e:t}))})),i.Instance.register("countInArray",c),i.Instance.register("avgInArray",(function(e){var t=c(e);return 0==t?0:u(e)/t})),i.Instance.register("iif",(function(e){return e||3===e.length?e[0]?e[1]:e[2]:""})),i.Instance.register("getDate",(function(e){return!e&&e.length<1?null:e[0]?new Date(e[0]):null})),i.Instance.register("age",(function(e){if(!e&&e.length<1)return null;if(!e[0])return null;var t=new Date(e[0]),n=new Date,r=n.getFullYear()-t.getFullYear(),i=n.getMonth()-t.getMonth();return(i<0||0===i&&n.getDate()<t.getDate())&&(r-=r>0?1:0),r})),i.Instance.register("isContainerReady",(function(e){if(!e&&e.length<1)return!1;if(!e[0]||!this.survey)return!1;var t=e[0],n=this.survey.getPageByName(t);if(n||(n=this.survey.getPanelByName(t)),!n)return!1;for(var r=n.questions,i=0;i<r.length;i++)if(r[i].hasErrors(!1))return!1;return!0})),i.Instance.register("isDisplayMode",(function(){return this.survey&&this.survey.isDisplayMode})),i.Instance.register("currentDate",(function(){return new Date})),i.Instance.register("today",(function(e){var t=new Date;return Array.isArray(e)&&1==e.length&&t.setDate(t.getDate()+e[0]),t})),i.Instance.register("diffDays",(function(e){if(!Array.isArray(e)||2!==e.length)return 0;if(!e[0]||!e[1])return 0;var t=new Date(e[0]),n=new Date(e[1]),r=Math.abs(n-t);return Math.ceil(r/864e5)}))},"./src/helpers.ts":
/*!************************!*\
  !*** ./src/helpers.ts ***!
  \************************/
/*! exports provided: Helpers */function(e,t,n){"use strict";n.r(t),n.d(t,"Helpers",(function(){return r}));var r=function(){function e(){}return e.isValueEmpty=function(t){if(Array.isArray(t)&&0===t.length)return!0;if(t&&"object"==typeof t&&t.constructor===Object){for(var n in t)if(!e.isValueEmpty(t[n]))return!1;return!0}return!t&&0!==t&&!1!==t},e.isArrayContainsEqual=function(t,n){if(!Array.isArray(t)||!Array.isArray(n))return!1;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++){for(var i=0;i<n.length&&!e.isTwoValueEquals(t[r],n[i]);i++);if(i===n.length)return!1}return!0},e.isArraysEqual=function(t,n,r){if(void 0===r&&(r=!1),!Array.isArray(t)||!Array.isArray(n))return!1;if(t.length!==n.length)return!1;if(r){for(var i=[],o=[],a=0;a<t.length;a++)i.push(t[a]),o.push(n[a]);i.sort(),o.sort(),t=i,n=o}for(a=0;a<t.length;a++)if(!e.isTwoValueEquals(t[a],n[a]))return!1;return!0},e.isTwoValueEquals=function(t,n,r){if(void 0===r&&(r=!1),t===n)return!0;if(Array.isArray(t)&&0===t.length&&void 0===n)return!0;if(Array.isArray(n)&&0===n.length&&void 0===t)return!0;if(null==t&&""===n)return!0;if(null==n&&""===t)return!0;if("string"==typeof t&&"string"==typeof n)return t==n;if(e.isConvertibleToNumber(t)&&e.isConvertibleToNumber(n)&&parseInt(t)===parseInt(n)&&parseFloat(t)===parseFloat(n))return!0;if(!e.isValueEmpty(t)&&e.isValueEmpty(n)||e.isValueEmpty(t)&&!e.isValueEmpty(n))return!1;if((!0===t||!1===t)&&"string"==typeof n)return t.toString()===n.toLocaleLowerCase();if((!0===n||!1===n)&&"string"==typeof t)return n.toString()===t.toLocaleLowerCase();if(!(t instanceof Object||n instanceof Object))return t==n;if(!(t instanceof Object&&n instanceof Object))return!1;if(t.equals)return t.equals(n);if(t.toJSON&&n.toJSON&&t.getType&&n.getType)return!t.isDiposed&&!n.isDiposed&&t.getType()===n.getType()&&(!t.name||t.name===n.name)&&this.isTwoValueEquals(t.toJSON(),n.toJSON());if(Array.isArray(t)&&Array.isArray(n))return e.isArraysEqual(t,n,r);for(var i in t)if(t.hasOwnProperty(i)){if(!n.hasOwnProperty(i))return!1;if(t[i]!==n[i]){if("object"!=typeof t[i])return!1;if(!this.isTwoValueEquals(t[i],n[i]))return!1}}for(i in n)if(n.hasOwnProperty(i)&&!t.hasOwnProperty(i))return!1;return!0},e.randomizeArray=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e},e.getUnbindValue=function(e){return e&&e instanceof Object?JSON.parse(JSON.stringify(e)):e},e.createCopy=function(e){var t={};if(!e)return t;for(var n in e)t[n]=e[n];return t},e.isConvertibleToNumber=function(e){return null!=e&&!Array.isArray(e)&&!isNaN(e)},e.isNumber=function(e){return!("string"==typeof e&&e&&0==e.indexOf("0x")&&e.length>32)&&!isNaN(parseFloat(e))&&isFinite(e)},e.getMaxLength=function(e,t){return e<0&&(e=t),e>0?e:null},e.getNumberByIndex=function(t,n){if(t<0)return"";var r=1,i="",o=".",a=!0,s="A",l="";if(n){for(var u=(l=n).length-1,c=!1,p=0;p<l.length;p++)if(e.isCharDigit(l[p])){c=!0;break}for(var d=function(){return c&&!e.isCharDigit(l[u])||e.isCharNotLetterAndDigit(l[u])};u>=0&&d();)u--;var h="";for(u<l.length-1&&(h=l.substr(u+1),l=l.substr(0,u+1)),u=l.length-1;u>=0&&!d()&&(u--,c););s=l.substr(u+1),i=l.substr(0,u+1),parseInt(s)?r=parseInt(s):1==s.length&&(a=!1),(h||i)&&(o=h)}return a?i+(t+r).toString()+o:i+String.fromCharCode(s.charCodeAt(0)+t)+o},e.isCharNotLetterAndDigit=function(t){return t.toUpperCase()==t.toLowerCase()&&!e.isCharDigit(t)},e.isCharDigit=function(e){return e>="0"&&e<="9"},e}();String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,(function(t,n){return void 0!==e[n]?e[n]:t}))})},"./src/itemvalue.ts":
/*!**************************!*\
  !*** ./src/itemvalue.ts ***!
  \**************************/
/*! exports provided: ItemValue */function(e,t,n){"use strict";n.r(t),n.d(t,"ItemValue",(function(){return d}));var r,i=n(/*! ./localizablestring */"./src/localizablestring.ts"),o=n(/*! ./jsonobject */"./src/jsonobject.ts"),a=n(/*! ./helpers */"./src/helpers.ts"),s=n(/*! ./conditions */"./src/conditions.ts"),l=n(/*! ./base */"./src/base.ts"),u=n(/*! ./settings */"./src/settings.ts"),c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),p=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},d=function(e){function t(t,n,r){void 0===n&&(n=null),void 0===r&&(r="itemvalue");var s=e.call(this)||this;return s.typeName=r,s.ownerPropertyName="",s.isVisibleValue=!0,s.locTextValue=new i.LocalizableString(null,!0),s.locTextValue.onStrChanged=function(e,t){t==s.value&&(t=void 0),s.propertyValueChanged("text",e,t)},s.locTextValue.onGetTextCallback=function(e){return e||(a.Helpers.isValueEmpty(s.value)?null:s.value.toString())},n&&(s.locText.text=n),t&&"object"==typeof t?s.setData(t):s.value=t,"itemvalue"!=s.getType()&&o.CustomPropertiesCollection.createProperties(s),s.onCreating(),s}return c(t,e),Object.defineProperty(t,"Separator",{get:function(){return u.settings.itemValueSeparator},set:function(e){u.settings.itemValueSeparator=e},enumerable:!1,configurable:!0}),t.createArray=function(e){var n=[];return t.setupArray(n,e),n},t.setupArray=function(e,t){e.push=function(e){var n=Array.prototype.push.call(this,e);return e.locOwner=t,n},e.unshift=function(e){var n=Array.prototype.unshift.call(this,e);return e.locOwner=t,n},e.splice=function(e,n){for(var r,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=(r=Array.prototype.splice).call.apply(r,p([this,e,n],i));i||(i=[]);for(var s=0;s<i.length;s++)i[s].locOwner=t;return a}},t.setData=function(e,n){e.length=0;for(var r=0;r<n.length;r++){var i,a=n[r];(i="function"==typeof a.getType?o.Serializer.createClass(a.getType()):new t(null)).setData(a),a.originalItem&&(i.originalItem=a.originalItem),e.push(i)}},t.getData=function(e){for(var t=new Array,n=0;n<e.length;n++)t.push(e[n].getData());return t},t.getItemByValue=function(e,t){if(!Array.isArray(e))return null;for(var n=a.Helpers.isValueEmpty(t),r=0;r<e.length;r++){if(n&&a.Helpers.isValueEmpty(e[r].value))return e[r];if(a.Helpers.isTwoValueEquals(e[r].value,t))return e[r]}return null},t.getTextOrHtmlByValue=function(e,n){var r=t.getItemByValue(e,n);return null!==r?r.locText.textOrHtml:""},t.locStrsChanged=function(e){for(var t=0;t<e.length;t++)e[t].locText.strChanged()},t.runConditionsForItems=function(e,n,r,i,o,a){return void 0===a&&(a=!0),t.runConditionsForItemsCore(e,n,r,i,o,!0,a)},t.runEnabledConditionsForItems=function(e,n,r,i,o){return t.runConditionsForItemsCore(e,null,n,r,i,!1,!0,o)},t.runConditionsForItemsCore=function(e,t,n,r,i,o,a,s){void 0===a&&(a=!0),r||(r={});for(var l=r.item,u=r.choice,c=!1,p=0;p<e.length;p++){var d=e[p];r.item=d.value,r.choice=d.value;var h=!(!a||!d.getConditionRunner)&&d.getConditionRunner(o);h||(h=n);var f=!0;h&&(f=h.run(r,i)),f&&s&&(f=s(d)),t&&f&&t.push(d),f!=(o?d.isVisible:d.isEnabled)&&(c=!0,o?d.setIsVisible&&d.setIsVisible(f):d.setIsEnabled&&d.setIsEnabled(f))}return l?r.item=l:delete r.item,u?r.choice=u:delete r.choice,c},t.prototype.onCreating=function(){},t.prototype.getType=function(){return this.typeName?this.typeName:"itemvalue"},t.prototype.getSurvey=function(e){return void 0===e&&(e=!1),this.locOwner&&this.locOwner.getSurvey?this.locOwner.getSurvey():null},t.prototype.getLocale=function(){return this.locText&&this.locText.locale||""},Object.defineProperty(t.prototype,"locText",{get:function(){return this.locTextValue},enumerable:!1,configurable:!0}),t.prototype.setLocText=function(e){this.locTextValue=e},Object.defineProperty(t.prototype,"locOwner",{get:function(){return this.locText.owner},set:function(e){this.locText.owner=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.getPropertyValue("value")},set:function(e){var t=void 0;if(!a.Helpers.isValueEmpty(e)){var n=e.toString(),r=n.indexOf(u.settings.itemValueSeparator);r>-1&&(e=n.slice(0,r),t=n.slice(r+1))}this.setPropertyValue("value",e),t&&(this.text=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasText",{get:function(){return!!this.locText.pureText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pureText",{get:function(){return this.locText.pureText},set:function(e){this.text=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.locText.calculatedText},set:function(e){this.locText.text=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"calculatedText",{get:function(){return this.locText.calculatedText},enumerable:!1,configurable:!0}),t.prototype.getData=function(){var e=this.toJSON();return e.value&&e.value.pos&&delete e.value.pos,1!=Object.keys(e).length||a.Helpers.isValueEmpty(e.value)?e:this.value},t.prototype.toJSON=function(){var e={},t=o.Serializer.getProperties(this.getType());t&&0!=t.length||(t=o.Serializer.getProperties("itemvalue"));for(var n=new o.JsonObject,r=0;r<t.length;r++)n.valueToJson(this,e,t[r]);return e},t.prototype.setData=function(e){if(!a.Helpers.isValueEmpty(e)){if(void 0!==e.value){var t=e;"function"==typeof e.toJSON&&(t=e.toJSON()),(new o.JsonObject).toObject(t,this)}else this.value=e;this.locText.strChanged()}},Object.defineProperty(t.prototype,"visibleIf",{get:function(){return this.getPropertyValue("visibleIf","")},set:function(e){this.setPropertyValue("visibleIf",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enableIf",{get:function(){return this.getPropertyValue("enableIf","")},set:function(e){this.setPropertyValue("enableIf",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return this.isVisibleValue},enumerable:!1,configurable:!0}),t.prototype.setIsVisible=function(e){this.isVisibleValue=e},Object.defineProperty(t.prototype,"isEnabled",{get:function(){return this.getPropertyValue("isEnabled",!0)},enumerable:!1,configurable:!0}),t.prototype.setIsEnabled=function(e){this.setPropertyValue("isEnabled",e)},t.prototype.addUsedLocales=function(e){this.AddLocStringToUsedLocales(this.locTextValue,e)},t.prototype.onPropertyValueChanged=function(e,t,n){"value"!==e||this.hasText||this.locText.onChanged(),this.locOwner&&this.locOwner.itemValuePropertyChanged&&this.locOwner.itemValuePropertyChanged(this,e,t,n)},t.prototype.getConditionRunner=function(e){return e?this.getVisibleConditionRunner():this.getEnableConditionRunner()},t.prototype.getVisibleConditionRunner=function(){return this.visibleIf?(this.visibleConditionRunner||(this.visibleConditionRunner=new s.ConditionRunner(this.visibleIf)),this.visibleConditionRunner.expression=this.visibleIf,this.visibleConditionRunner):null},t.prototype.getEnableConditionRunner=function(){return this.enableIf?(this.enableConditionRunner||(this.enableConditionRunner=new s.ConditionRunner(this.enableIf)),this.enableConditionRunner.expression=this.enableIf,this.enableConditionRunner):null},t}(l.Base);l.Base.createItemValue=function(e,t){var n=null;return(n=t?o.JsonObject.metaData.createClass(t,{}):"function"==typeof e.getType?new d(null,void 0,e.getType()):new d(null)).setData(e),n},l.Base.itemValueLocStrChanged=function(e){d.locStrsChanged(e)},o.JsonObjectProperty.getItemValuesDefaultValue=function(e){var t=new Array;return d.setData(t,e||[]),t},o.Serializer.addClass("itemvalue",["!value",{name:"text",serializationProperty:"locText"},{name:"visibleIf:condition",showMode:"form"},{name:"enableIf:condition",showMode:"form",visibleIf:function(e){return!e||"rateValues"!==e.ownerPropertyName}}],(function(e){return new d(e)}))},"./src/jsonobject.ts":
/*!***************************!*\
  !*** ./src/jsonobject.ts ***!
  \***************************/
/*! exports provided: property, propertyArray, JsonObjectProperty, CustomPropertiesCollection, JsonMetadataClass, JsonMetadata, JsonError, JsonUnknownPropertyError, JsonMissingTypeErrorBase, JsonMissingTypeError, JsonIncorrectTypeError, JsonRequiredPropertyError, JsonObject, Serializer */function(e,t,n){"use strict";n.r(t),n.d(t,"property",(function(){return l})),n.d(t,"propertyArray",(function(){return c})),n.d(t,"JsonObjectProperty",(function(){return p})),n.d(t,"CustomPropertiesCollection",(function(){return d})),n.d(t,"JsonMetadataClass",(function(){return h})),n.d(t,"JsonMetadata",(function(){return f})),n.d(t,"JsonError",(function(){return m})),n.d(t,"JsonUnknownPropertyError",(function(){return g})),n.d(t,"JsonMissingTypeErrorBase",(function(){return y})),n.d(t,"JsonMissingTypeError",(function(){return v})),n.d(t,"JsonIncorrectTypeError",(function(){return b})),n.d(t,"JsonRequiredPropertyError",(function(){return x})),n.d(t,"JsonObject",(function(){return w})),n.d(t,"Serializer",(function(){return _}));var r,i=n(/*! ./helpers */"./src/helpers.ts"),o=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e};function s(e,t,n){var r=e.getLocalizableString(n);r||(r=e.createLocalizableString(n,e,!0),"object"==typeof t.localizable&&"function"==typeof t.localizable.onGetTextCallback&&(r.onGetTextCallback=t.localizable.onGetTextCallback))}function l(e){return function(t,n){e&&e.localizable?(Object.defineProperty(t,n,{get:function(){return s(this,e,n),this.getLocalizableStringText(n)||e.defaultValue||this[e.defaultSource]},set:function(t){s(this,e,n),this.setLocalizableStringText(n,t),e&&e.onSet&&e.onSet(t,this)}}),Object.defineProperty(t,!0===e.localizable?"loc"+n.charAt(0).toUpperCase()+n.slice(1):e.localizable.name,{get:function(){return s(this,e,n),this.getLocalizableString(n)}})):Object.defineProperty(t,n,{get:function(){var t=this.getPropertyValue(n);if(void 0!==t)return t;if(e){if(void 0!==e.defaultValue)return e.defaultValue;if(void 0!==e.defaultSource)return this[e.defaultSource]}},set:function(t){this.setPropertyValue(n,t),e&&e.onSet&&e.onSet(t,this)}})}}function u(e,t,n){e.ensureArray(n,t?t.onPush:null,t?t.onRemove:null)}function c(e){return function(t,n){Object.defineProperty(t,n,{get:function(){return u(this,e,n),this.getPropertyValue(n)},set:function(t){u(this,e,n);var r=this.getPropertyValue(n);t!==r&&(r?r.splice.apply(r,a([0,r.length],t||[])):this.setPropertyValue(n,t),e&&e.onSet&&e.onSet(t,this))}})}}var p=function(){function e(t,n,r){void 0===r&&(r=!1),this.name=n,this.typeValue=null,this.choicesValue=null,this.baseValue=null,this.isRequiredValue=!1,this.isUniqueValue=!1,this.readOnlyValue=null,this.visibleValue=null,this.isLocalizableValue=null,this.choicesfunc=null,this.dependedProperties=null,this.isSerializable=!0,this.isLightSerializable=!0,this.isCustom=!1,this.isDynamicChoices=!1,this.isBindable=!1,this.className=null,this.alternativeName=null,this.classNamePart=null,this.baseClassName=null,this.defaultValueValue=null,this.serializationProperty=null,this.displayName=null,this.category="",this.categoryIndex=-1,this.visibleIndex=-1,this.nextToProperty=null,this.showMode=null,this.maxLength=-1,this.layout=null,this.onGetValue=null,this.onSetValue=null,this.visibleIf=null,this.isArray=!1,this.classInfoValue=t,this.isRequiredValue=r,this.idValue=e.Index++}return Object.defineProperty(e.prototype,"id",{get:function(){return this.idValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classInfo",{get:function(){return this.classInfoValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.typeValue?this.typeValue:"string"},set:function(e){"itemvalues"===e&&(e="itemvalue[]"),this.typeValue=e,this.typeValue.indexOf("[]")===this.typeValue.length-2&&(this.isArray=!0,this.className=this.typeValue.substr(0,this.typeValue.length-2))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRequired",{get:function(){return this.isRequiredValue},set:function(e){this.isRequiredValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isUnique",{get:function(){return this.isUniqueValue},set:function(e){this.isUniqueValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasToUseGetValue",{get:function(){return this.onGetValue||this.serializationProperty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultValue",{get:function(){var t=this.defaultValueValue;return e.getItemValuesDefaultValue&&w.metaData.isDescendantOf(this.className,"itemvalue")&&(t=e.getItemValuesDefaultValue(this.defaultValueValue||[])),t},set:function(e){this.defaultValueValue=e},enumerable:!1,configurable:!0}),e.prototype.isDefaultValue=function(e){return i.Helpers.isValueEmpty(this.defaultValue)?!1===e&&("boolean"==this.type||"switch"==this.type)||""===e||i.Helpers.isValueEmpty(e):this.defaultValue==e},e.prototype.getValue=function(e){return this.onGetValue?this.onGetValue(e):this.serializationProperty&&e[this.serializationProperty]?e[this.serializationProperty].getJson():e[this.name]},e.prototype.getPropertyValue=function(e){return this.isLocalizable?e[this.serializationProperty]?e[this.serializationProperty].text:null:this.getValue(e)},Object.defineProperty(e.prototype,"hasToUseSetValue",{get:function(){return this.onSetValue||this.serializationProperty},enumerable:!1,configurable:!0}),e.prototype.setValue=function(e,t,n){this.onSetValue?this.onSetValue(e,t,n):this.serializationProperty&&e[this.serializationProperty]?e[this.serializationProperty].setJson(t):(t&&"string"==typeof t&&("number"==this.type&&(t=parseInt(t)),"boolean"!=this.type&&"switch"!=this.type||(t="true"===t.toLowerCase())),e[this.name]=t)},e.prototype.getObjType=function(e){return this.classNamePart?e.replace(this.classNamePart,""):e},e.prototype.getClassName=function(e){return e&&(e=e.toLowerCase()),this.classNamePart&&e.indexOf(this.classNamePart)<0?e+this.classNamePart:e},Object.defineProperty(e.prototype,"choices",{get:function(){return this.getChoices(null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasChoices",{get:function(){return!!this.choicesValue||!!this.choicesfunc},enumerable:!1,configurable:!0}),e.prototype.getChoices=function(e,t){return void 0===t&&(t=null),null!=this.choicesValue?this.choicesValue:null!=this.choicesfunc?this.choicesfunc(e,t):null},e.prototype.setChoices=function(e,t){void 0===t&&(t=null),this.choicesValue=e,this.choicesfunc=t},e.prototype.getBaseValue=function(){return this.baseValue?"function"==typeof this.baseValue?this.baseValue():this.baseValue:""},e.prototype.setBaseValue=function(e){this.baseValue=e},Object.defineProperty(e.prototype,"readOnly",{get:function(){return null!=this.readOnlyValue&&this.readOnlyValue},set:function(e){this.readOnlyValue=e},enumerable:!1,configurable:!0}),e.prototype.isVisible=function(e,t){void 0===t&&(t=null);var n=!this.layout||this.layout==e;return!(!this.visible||!n)&&(!this.visibleIf||!t||this.visibleIf(t))},Object.defineProperty(e.prototype,"visible",{get:function(){return null==this.visibleValue||this.visibleValue},set:function(e){this.visibleValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLocalizable",{get:function(){return null!=this.isLocalizableValue&&this.isLocalizableValue},set:function(e){this.isLocalizableValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataList",{get:function(){return Array.isArray(this.dataListValue)?this.dataListValue:[]},set:function(e){this.dataListValue=e},enumerable:!1,configurable:!0}),e.prototype.mergeWith=function(t){for(var n=e.mergableValues,r=0;r<n.length;r++)this.mergeValue(t,n[r])},e.prototype.addDependedProperty=function(e){this.dependedProperties||(this.dependedProperties=[]),this.dependedProperties.indexOf(e)<0&&this.dependedProperties.push(e)},e.prototype.getDependedProperties=function(){return this.dependedProperties?this.dependedProperties:[]},e.prototype.schemaType=function(){return this.className||this.baseClassName?"array":"boolean"==this.type||"number"==this.type?this.type:"string"},e.prototype.mergeValue=function(e,t){null==this[t]&&null!=e[t]&&(this[t]=e[t])},e.Index=1,e.mergableValues=["typeValue","choicesValue","baseValue","readOnlyValue","visibleValue","isSerializable","isLightSerializable","isCustom","isBindable","isUnique","isDynamicChoices","isLocalizableValue","className","alternativeName","layout","classNamePart","baseClassName","defaultValue","serializationProperty","onGetValue","onSetValue","displayName","category","categoryIndex","visibleIndex","nextToProperty","showMode","dependedProperties","visibleIf","onPropertyEditorUpdate","maxLength","maxValue","minValue","dataListValue"],e}(),d=function(){function e(){}return e.addProperty=function(t,n){t=t.toLowerCase();var r=e.properties;r[t]||(r[t]=[]),r[t].push(n)},e.removeProperty=function(t,n){t=t.toLowerCase();var r=e.properties;if(r[t])for(var i=r[t],o=0;o<i.length;o++)if(i[o].name==n){r[t].splice(o,1);break}},e.addClass=function(t,n){t=t.toLowerCase(),n&&(n=n.toLowerCase()),e.parentClasses[t]=n},e.getProperties=function(t){t=t.toLowerCase();for(var n=[],r=e.properties;t;){var i=r[t];if(i)for(var o=0;o<i.length;o++)n.push(i[o]);t=e.parentClasses[t]}return n},e.createProperties=function(t){t&&t.getType&&e.createPropertiesCore(t,t.getType())},e.createPropertiesCore=function(t,n){var r=e.properties;r[n]&&e.createPropertiesInObj(t,r[n]);var i=e.parentClasses[n];i&&e.createPropertiesCore(t,i)},e.createPropertiesInObj=function(t,n){for(var r=0;r<n.length;r++)e.createPropertyInObj(t,n[r])},e.createPropertyInObj=function(e,t){if(!e[t.name]&&!e.hasOwnProperty(t.name))if(t.isLocalizable&&t.serializationProperty&&!e[t.serializationProperty]&&e.createCustomLocalizableObj){e.createCustomLocalizableObj(t.name);var n={get:function(){return e.getLocalizableString(t.name)}};Object.defineProperty(e,t.serializationProperty,n);var r={get:function(){return e.getLocalizableStringText(t.name,t.defaultValue)},set:function(n){e.setLocalizableStringText(t.name,n)}};Object.defineProperty(e,t.name,r)}else{var i=t.defaultValue,o=!1;"function"==typeof e.createNewArray&&(w.metaData.isDescendantOf(t.className,"itemvalue")&&(e.createNewArray(t.name,(function(n){n.locOwner=e,n.ownerPropertyName=t.name})),o=!0),"multiplevalues"===t.type&&(e.createNewArray(t.name),o=!0),o&&(Array.isArray(i)&&e.setPropertyValue(t.name,i),i=null)),e.getPropertyValue&&e.setPropertyValue&&(r={get:function(){return t.onGetValue?t.onGetValue(e):e.getPropertyValue(t.name,i)},set:function(n){t.onSetValue?t.onSetValue(e,n,null):e.setPropertyValue(t.name,n)}},Object.defineProperty(e,t.name,r))}},e.properties={},e.parentClasses={},e}(),h=function(){function e(e,t,n,r){void 0===n&&(n=null),void 0===r&&(r=null),this.name=e,this.creator=n,this.parentName=r,this.properties=null,e=e.toLowerCase(),this.parentName&&(this.parentName=this.parentName.toLowerCase(),d.addClass(e,this.parentName)),this.properties=new Array;for(var i=0;i<t.length;i++){var o=this.createProperty(t[i]);o&&this.properties.push(o)}}return e.prototype.find=function(e){for(var t=0;t<this.properties.length;t++)if(this.properties[t].name==e)return this.properties[t];return null},e.prototype.createProperty=function(t){var n="string"==typeof t?t:t.name;if(n){var r=null,o=n.indexOf(e.typeSymbol);o>-1&&(r=n.substring(o+1),n=n.substring(0,o));var a=this.getIsPropertyNameRequired(n)||!!t.isRequired;n=this.getPropertyName(n);var s=new p(this,n,a);if(r&&(s.type=r),"object"==typeof t){if(t.type&&(s.type=t.type),i.Helpers.isValueEmpty(t.default)||(s.defaultValue=t.default),i.Helpers.isValueEmpty(t.isSerializable)||(s.isSerializable=t.isSerializable),i.Helpers.isValueEmpty(t.isLightSerializable)||(s.isLightSerializable=t.isLightSerializable),i.Helpers.isValueEmpty(t.maxLength)||(s.maxLength=t.maxLength),i.Helpers.isValueEmpty(t.displayName)||(s.displayName=t.displayName),i.Helpers.isValueEmpty(t.category)||(s.category=t.category),i.Helpers.isValueEmpty(t.categoryIndex)||(s.categoryIndex=t.categoryIndex),i.Helpers.isValueEmpty(t.nextToProperty)||(s.nextToProperty=t.nextToProperty),i.Helpers.isValueEmpty(t.visibleIndex)||(s.visibleIndex=t.visibleIndex),i.Helpers.isValueEmpty(t.showMode)||(s.showMode=t.showMode),i.Helpers.isValueEmpty(t.maxValue)||(s.maxValue=t.maxValue),i.Helpers.isValueEmpty(t.minValue)||(s.minValue=t.minValue),i.Helpers.isValueEmpty(t.dataList)||(s.dataList=t.dataList),i.Helpers.isValueEmpty(t.isDynamicChoices)||(s.isDynamicChoices=t.isDynamicChoices),i.Helpers.isValueEmpty(t.isBindable)||(s.isBindable=t.isBindable),i.Helpers.isValueEmpty(t.isUnique)||(s.isUnique=t.isUnique),!0!==t.visible&&!1!==t.visible||(s.visible=t.visible),t.visibleIf&&(s.visibleIf=t.visibleIf),t.onPropertyEditorUpdate&&(s.onPropertyEditorUpdate=t.onPropertyEditorUpdate),!0===t.readOnly&&(s.readOnly=!0),t.choices){var l="function"==typeof t.choices?t.choices:null,u="function"!=typeof t.choices?t.choices:null;s.setChoices(u,l)}t.baseValue&&s.setBaseValue(t.baseValue),t.onGetValue&&(s.onGetValue=t.onGetValue),t.onSetValue&&(s.onSetValue=t.onSetValue),t.isLocalizable&&(t.serializationProperty="loc"+s.name),t.serializationProperty&&(s.serializationProperty=t.serializationProperty,s.serializationProperty&&0==s.serializationProperty.indexOf("loc")&&(s.isLocalizable=!0)),t.isLocalizable&&(s.isLocalizable=t.isLocalizable),t.className&&(s.className=t.className),t.baseClassName&&(s.baseClassName=t.baseClassName),t.classNamePart&&(s.classNamePart=t.classNamePart),t.alternativeName&&(s.alternativeName=t.alternativeName),t.layout&&(s.layout=t.layout),t.dependsOn&&this.addDependsOnProperties(s,t.dependsOn)}return s}},e.prototype.addDependsOnProperties=function(e,t){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.addDependsOnProperty(e,t[n]);else this.addDependsOnProperty(e,t)},e.prototype.addDependsOnProperty=function(e,t){var n=this.find(t);n||(n=_.findProperty(this.parentName,t)),n&&n.addDependedProperty(e.name)},e.prototype.getIsPropertyNameRequired=function(t){return t.length>0&&t[0]==e.requiredSymbol},e.prototype.getPropertyName=function(e){return this.getIsPropertyNameRequired(e)?e=e.slice(1):e},e.requiredSymbol="!",e.typeSymbol=":",e}(),f=function(){function e(){this.classes={},this.alternativeNames={},this.childrenClasses={},this.classProperties={},this.classHashProperties={}}return e.prototype.getObjPropertyValue=function(e,t){if(this.isObjWrapper(e)){var n=e.getOriginalObj();if(r=_.findProperty(n.getType(),t))return this.getObjPropertyValueCore(n,r)}var r;return(r=_.findProperty(e.getType(),t))?this.getObjPropertyValueCore(e,r):e[t]},e.prototype.setObjPropertyValue=function(e,t,n){e[t]!==n&&(e[t]&&e[t].setJson?e[t].setJson(n):e[t]=n)},e.prototype.getObjPropertyValueCore=function(e,t){if(!t.isSerializable)return e[t.name];if(t.isLocalizable){if(t.isArray)return e[t.name];if(t.serializationProperty)return e[t.serializationProperty].text}return e.getPropertyValue(t.name)},e.prototype.isObjWrapper=function(e){return!!e.getOriginalObj&&!!e.getOriginalObj()},e.prototype.addClass=function(e,t,n,r){void 0===n&&(n=null),void 0===r&&(r=null),e=e.toLowerCase();var i=new h(e,t,n,r);return this.classes[e]=i,r&&(r=r.toLowerCase(),this.childrenClasses[r]||(this.childrenClasses[r]=[]),this.childrenClasses[r].push(i)),i},e.prototype.removeClass=function(e){var t=this.findClass(e);if(t&&(delete this.classes[t.name],t.parentName)){var n=this.childrenClasses[t.parentName].indexOf(t);n>-1&&this.childrenClasses[t.parentName].splice(n,1)}},e.prototype.overrideClassCreatore=function(e,t){this.overrideClassCreator(e,t)},e.prototype.overrideClassCreator=function(e,t){e=e.toLowerCase();var n=this.findClass(e);n&&(n.creator=t)},e.prototype.getProperties=function(e){var t=this.findClass(e);if(!t)return[];var n=this.classProperties[t.name];return n||(this.fillPropertiesForClass(t.name),this.classProperties[t.name])},e.prototype.getHashProperties=function(e){var t=this.findClass(e);if(!t)return{};var n=this.classHashProperties[t.name];return n||(this.fillPropertiesForClass(t.name),this.classHashProperties[t.name])},e.prototype.fillPropertiesForClass=function(e){var t=new Array,n={};this.fillProperties(e,t,n),this.classProperties[e]=t,this.classHashProperties[e]=n},e.prototype.getPropertiesByObj=function(e){if(!e||!e.getType)return[];for(var t={},n=this.getProperties(e.getType()),r=0;r<n.length;r++)t[n[r].name]=n[r];var i=e.getDynamicType?this.getProperties(e.getDynamicType()):null;if(i&&i.length>0)for(r=0;r<i.length;r++){var o=i[r];t[o.name]||(t[o.name]=o)}return Object.keys(t).map((function(e){return t[e]}))},e.prototype.getDynamicPropertiesByObj=function(e,t){if(void 0===t&&(t=null),!e||!e.getType||!e.getDynamicType&&!t)return[];var n=t||e.getDynamicType();if(!n)return[];var r=this.getProperties(n);if(!r||0==r.length)return[];for(var i={},o=this.getProperties(e.getType()),a=0;a<o.length;a++)i[o[a].name]=o[a];var s=[];for(a=0;a<r.length;a++){var l=r[a];i[l.name]||s.push(l)}return s},e.prototype.hasOriginalProperty=function(e,t){return!!this.getOriginalProperty(e,t)},e.prototype.getOriginalProperty=function(e,t){var n=this.findProperty(e.getType(),t);return n||(this.isObjWrapper(e)?this.findProperty(e.getOriginalObj().getType(),t):null)},e.prototype.findProperty=function(e,t){var n=this.getHashProperties(e)[t];return n||null},e.prototype.findProperties=function(e,t){for(var n=[],r=this.getHashProperties(e),i=0;i<t.length;i++){var o=r[t[i]];o&&n.push(o)}return n},e.prototype.getAllPropertiesByName=function(e){for(var t=new Array,n=this.getAllClasses(),r=0;r<n.length;r++)for(var i=this.findClass(n[r]),o=0;o<i.properties.length;o++)if(i.properties[o].name==e){t.push(i.properties[o]);break}return t},e.prototype.getAllClasses=function(){var e=new Array;for(var t in this.classes)e.push(t);return e},e.prototype.createClass=function(e,t){void 0===t&&(t=void 0),e=e.toLowerCase();var n=this.findClass(e);if(!n)return null;if(n.creator)return n.creator(t);for(var r=n.parentName;r;){if(!(n=this.findClass(r)))return null;if(r=n.parentName,n.creator)return this.createCustomType(e,n.creator,t)}return null},e.prototype.createCustomType=function(e,t,n){void 0===n&&(n=void 0),e=e.toLowerCase();var r=t(n),i=e,o=r.getTemplate?r.getTemplate():r.getType();return r.getType=function(){return i},r.getTemplate=function(){return o},d.createProperties(r),r},e.prototype.getChildrenClasses=function(e,t){void 0===t&&(t=!1),e=e.toLowerCase();var n=[];return this.fillChildrenClasses(e,t,n),n},e.prototype.getRequiredProperties=function(e){for(var t=this.getProperties(e),n=[],r=0;r<t.length;r++)t[r].isRequired&&n.push(t[r].name);return n},e.prototype.addProperties=function(e,t){e=e.toLowerCase();for(var n=this.findClass(e),r=0;r<t.length;r++)this.addCustomPropertyCore(n,t[r])},e.prototype.addProperty=function(e,t){return this.addCustomPropertyCore(this.findClass(e),t)},e.prototype.addCustomPropertyCore=function(e,t){if(!e)return null;var n=e.createProperty(t);return n&&(n.isCustom=!0,this.addPropertyToClass(e,n),this.emptyClassPropertiesHash(e),d.addProperty(e.name,n)),n},e.prototype.removeProperty=function(e,t){var n=this.findClass(e);if(!n)return!1;var r=n.find(t);r&&(this.removePropertyFromClass(n,r),this.emptyClassPropertiesHash(n),d.removeProperty(n.name,t))},e.prototype.addPropertyToClass=function(e,t){null==e.find(t.name)&&e.properties.push(t)},e.prototype.removePropertyFromClass=function(e,t){var n=e.properties.indexOf(t);n<0||e.properties.splice(n,1)},e.prototype.emptyClassPropertiesHash=function(e){this.classProperties[e.name]=null,this.classHashProperties[e.name]=null;for(var t=this.getChildrenClasses(e.name),n=0;n<t.length;n++)this.classProperties[t[n].name]=null,this.classHashProperties[t[n].name]=null},e.prototype.fillChildrenClasses=function(e,t,n){var r=this.childrenClasses[e];if(r)for(var i=0;i<r.length;i++)t&&!r[i].creator||n.push(r[i]),this.fillChildrenClasses(r[i].name,t,n)},e.prototype.findClass=function(e){e=e.toLowerCase();var t=this.classes[e];if(!t){var n=this.alternativeNames[e];if(n&&n!=e)return this.findClass(n)}return t},e.prototype.isDescendantOf=function(e,t){if(!e||!t)return!1;e=e.toLowerCase(),t=t.toLowerCase();var n=this.findClass(e);if(!n)return!1;var r=n;do{if(r.name===t)return!0;r=this.classes[r.parentName]}while(r);return!1},e.prototype.addAlterNativeClassName=function(e,t){this.alternativeNames[t.toLowerCase()]=e.toLowerCase()},e.prototype.generateSchema=function(e){void 0===e&&(e=void 0),e||(e="survey");var t=this.findClass(e);if(!t)return null;var n={$schema:"http://json-schema.org/draft-07/schema#",title:"SurveyJS Library json schema",type:"object",properties:{},definitions:{}};return this.generateSchemaProperties(t,n.properties,n.definitions),n},e.prototype.generateSchemaProperties=function(e,t,n){if(e)for(var r=0;r<e.properties.length;r++){var i=e.properties[r];t[i.name]=this.generateSchemaProperty(i,n)}},e.prototype.generateSchemaProperty=function(e,t){var n={type:e.schemaType()};if(e.hasChoices&&(n.enum=e.getChoices(null)),e.className&&(n.items={$ref:"#"+e.className},this.generateChemaClass(e.className,t)),e.baseClassName){var r=this.getChildrenClasses(e.baseClassName,!0);"question"==e.baseClassName&&r.push(this.findClass("panel")),n.items=[];for(var i=0;i<r.length;i++){var o=r[i].name;n.items.push({$ref:"#"+o}),this.generateChemaClass(o,t)}}return n},e.prototype.generateChemaClass=function(e,t){if(!t[e]){var n=this.findClass(e);if(n){var r=!!n.parentName&&"base"!=n.parentName;r&&this.generateChemaClass(n.parentName,t);var i={type:"object",$id:"#"+e};t[e]=i;var o={};this.generateSchemaProperties(n,o,t),r?i.allOff=[{$ref:"#"+n.parentName},{properties:o}]:i.properties=o}}},e.prototype.fillProperties=function(e,t,n){var r=this.findClass(e);if(r){r.parentName&&this.fillProperties(r.parentName,t,n);for(var i=0;i<r.properties.length;i++){var o=r.properties[i];this.addPropertyCore(o,t,n),n[o.name]=o}}},e.prototype.addPropertyCore=function(e,t,n){if(n[e.name]){for(var r=-1,i=0;i<t.length;i++)if(t[i].name==e.name){r=i;break}e.mergeWith(t[r]),t[r]=e}else t.push(e)},e}(),m=function(){function e(e,t){this.type=e,this.message=t,this.description="",this.at=-1}return e.prototype.getFullDescription=function(){return this.message+(this.description?"\n"+this.description:"")},e}(),g=function(e){function t(t,n){var r=e.call(this,"unknownproperty","The property '"+t+"' in class '"+n+"' is unknown.")||this;r.propertyName=t,r.className=n;var i=w.metaData.getProperties(n);if(i){r.description="The list of available properties are: ";for(var o=0;o<i.length;o++)o>0&&(r.description+=", "),r.description+=i[o].name;r.description+="."}return r}return o(t,e),t}(m),y=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;i.baseClassName=t,i.type=n,i.message=r,i.description="The following types are available: ";for(var o=w.metaData.getChildrenClasses(t,!0),a=0;a<o.length;a++)a>0&&(i.description+=", "),i.description+="'"+o[a].name+"'";return i.description+=".",i}return o(t,e),t}(m),v=function(e){function t(t,n){var r=e.call(this,n,"missingtypeproperty","The property type is missing in the object. Please take a look at property: '"+t+"'.")||this;return r.propertyName=t,r.baseClassName=n,r}return o(t,e),t}(y),b=function(e){function t(t,n){var r=e.call(this,n,"incorrecttypeproperty","The property type is incorrect in the object. Please take a look at property: '"+t+"'.")||this;return r.propertyName=t,r.baseClassName=n,r}return o(t,e),t}(y),x=function(e){function t(t,n){var r=e.call(this,"requiredproperty","The property '"+t+"' is required in class '"+n+"'.")||this;return r.propertyName=t,r.className=n,r}return o(t,e),t}(m),w=function(){function e(){this.errors=new Array,this.lightSerializing=!1}return Object.defineProperty(e,"metaData",{get:function(){return e.metaDataValue},enumerable:!1,configurable:!0}),e.prototype.toJsonObject=function(e,t){return void 0===t&&(t=!1),this.toJsonObjectCore(e,null,t)},e.prototype.toObject=function(e,t){this.toObjectCore(e,t);var n=this.getRequiredError(t,e);n&&this.addNewError(n,e)},e.prototype.toObjectCore=function(t,n){if(t){var r=null,i=void 0,o=!0;if(n.getType&&(i=n.getType(),r=e.metaData.getProperties(i),o=!!i&&!e.metaData.isDescendantOf(i,"itemvalue")),r){for(var a in n.startLoadingFromJson&&n.startLoadingFromJson(),r=this.addDynamicProperties(n,t,r),t)if(a!==e.typePropertyName)if(a!==e.positionPropertyName){var s=this.findProperty(r,a);s?this.valueToObj(t[a],n,s):o&&this.addNewError(new g(a.toString(),i),t)}else n[a]=t[a];n.endLoadingFromJson&&n.endLoadingFromJson()}}},e.prototype.toJsonObjectCore=function(t,n,r){if(void 0===r&&(r=!1),!t||!t.getType)return t;if("function"==typeof t.getData)return t.getData();var i={};return null==n||n.className||(i[e.typePropertyName]=n.getObjType(t.getType())),this.propertiesToJson(t,e.metaData.getProperties(t.getType()),i,r),this.propertiesToJson(t,this.getDynamicProperties(t),i,r),i},e.prototype.getDynamicProperties=function(e){return _.getDynamicPropertiesByObj(e)},e.prototype.addDynamicProperties=function(e,t,n){if(!e.getDynamicPropertyName)return n;var r=e.getDynamicPropertyName();if(!r)return n;t[r]&&(e[r]=t[r]);for(var i=this.getDynamicProperties(e),o=[],a=0;a<n.length;a++)o.push(n[a]);for(a=0;a<i.length;a++)o.push(i[a]);return o},e.prototype.propertiesToJson=function(e,t,n,r){void 0===r&&(r=!1);for(var i=0;i<t.length;i++)this.valueToJson(e,n,t[i],r)},e.prototype.valueToJson=function(e,t,n,r){if(void 0===r&&(r=!1),!(!1===n.isSerializable||!1===n.isLightSerializable&&this.lightSerializing)){var i=n.getValue(e);if(r||!n.isDefaultValue(i)){if(this.isValueArray(i)){for(var o=[],a=0;a<i.length;a++)o.push(this.toJsonObjectCore(i[a],n,r));i=o.length>0?o:null}else i=this.toJsonObjectCore(i,n,r);var s="function"==typeof e.getPropertyValue&&null!==e.getPropertyValue(n.name,null);(r&&s||!n.isDefaultValue(i))&&(t[n.name]=i)}}},e.prototype.valueToObj=function(e,t,n){if(null!=e)if(this.removePos(n,e),null!=n&&n.hasToUseSetValue)n.setValue(t,e,this);else if(this.isValueArray(e))this.valueToArray(e,t,n.name,n);else{var r=this.createNewObj(e,n);r.newObj&&(this.toObjectCore(e,r.newObj),e=r.newObj),r.error||(null!=n?n.setValue(t,e,this):t[n.name]=e)}},e.prototype.removePos=function(e,t){!e||!e.type||e.type.indexOf("value")<0||this.removePosFromObj(t)},e.prototype.removePosFromObj=function(t){if(t){if(Array.isArray(t))for(var n=0;n<t.length;n++)this.removePosFromObj(t[n]);t[e.positionPropertyName]&&delete t[e.positionPropertyName]}},e.prototype.isValueArray=function(e){return e&&Array.isArray(e)},e.prototype.createNewObj=function(t,n){var r={newObj:null,error:null},i=t[e.typePropertyName];return!i&&null!=n&&n.className&&(i=n.className),i=n.getClassName(i),r.newObj=i?e.metaData.createClass(i,t):null,r.error=this.checkNewObjectOnErrors(r.newObj,t,n,i),r},e.prototype.checkNewObjectOnErrors=function(e,t,n,r){var i=null;return e?i=this.getRequiredError(e,t):n.baseClassName&&(i=r?new b(n.name,n.baseClassName):new v(n.name,n.baseClassName)),i&&this.addNewError(i,t),i},e.prototype.getRequiredError=function(t,n){if(!t.getType||"function"==typeof t.getData)return null;var r=t.getType(),i=e.metaData.getRequiredProperties(r);if(!i)return null;for(var o=0;o<i.length;o++)if(!n[i[o]])return new x(i[o],r);return null},e.prototype.addNewError=function(t,n){n&&n[e.positionPropertyName]&&(t.at=n[e.positionPropertyName].start),this.errors.push(t)},e.prototype.valueToArray=function(e,t,n,r){t[n]&&e.length>0&&t[n].splice(0,t[n].length);var i=t[n]?t[n]:[];this.addValuesIntoArray(e,i,r),t[n]||(t[n]=i)},e.prototype.addValuesIntoArray=function(e,t,n){for(var r=0;r<e.length;r++){var i=this.createNewObj(e[r],n);i.newObj?(e[r].name&&(i.newObj.name=e[r].name),t.push(i.newObj),this.toObjectCore(e[r],i.newObj)):i.error||t.push(e[r])}},e.prototype.findProperty=function(e,t){if(!e)return null;for(var n=0;n<e.length;n++){var r=e[n];if(r.name==t||r.alternativeName==t)return r}return null},e.typePropertyName="type",e.positionPropertyName="pos",e.metaDataValue=new f,e}(),_=w.metaData},"./src/list.ts":
/*!*********************!*\
  !*** ./src/list.ts ***!
  \*********************/
/*! exports provided: ListModel */function(e,t,n){"use strict";n.r(t),n.d(t,"ListModel",(function(){return u}));var r,i=n(/*! ./base */"./src/base.ts"),o=n(/*! ./jsonobject */"./src/jsonobject.ts"),a=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},l=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},u=function(e){function t(n,r,i,o){var a=e.call(this)||this;return a.onItemSelect=r,a.allowSelection=i,a.selectItem=function(e){a.isExpanded=!1,a.allowSelection&&(a.selectedItem=e),a.onItemSelect&&a.onItemSelect(e)},a.isItemDisabled=function(e){return void 0!==e.enabled&&!e.enabled},a.isItemSelected=function(e){return a.allowSelection&&a.selectedItem==e},a.getItemClass=function(e){var t="sv-list__item";return a.isItemDisabled(e)&&(t+=" sv-list__item--disabled"),a.isItemSelected(e)&&(t+=" sv-list__item--selected"),t},a.getItemIndent=function(e){return((e.level||0)+1)*t.INDENT+"px"},a.createNewArray("items"),a.items=n,a.selectedItem=o,a}return a(t,e),Object.defineProperty(t.prototype,"items",{get:function(){return this.getPropertyValue("items")},set:function(e){var t;(t=this.items).splice.apply(t,l([0,this.items.length],e||[]))},enumerable:!1,configurable:!0}),t.INDENT=16,s([Object(o.property)({defaultValue:!1})],t.prototype,"isExpanded",void 0),s([Object(o.property)()],t.prototype,"selectedItem",void 0),t}(i.Base)},"./src/localizablestring.ts":
/*!**********************************!*\
  !*** ./src/localizablestring.ts ***!
  \**********************************/
/*! exports provided: LocalizableString, LocalizableStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"LocalizableString",(function(){return a})),n.d(t,"LocalizableStrings",(function(){return s}));var r=n(/*! ./helpers */"./src/helpers.ts"),i=n(/*! ./surveyStrings */"./src/surveyStrings.ts"),o=n(/*! ./settings */"./src/settings.ts"),a=function(){function e(e,t,n){void 0===t&&(t=!1),this.owner=e,this.useMarkdown=t,this.name=n,this.values={},this.htmlValues={},this.onCreating()}return Object.defineProperty(e,"defaultLocale",{get:function(){return o.settings.defaultLocaleName},set:function(e){o.settings.defaultLocaleName=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"locale",{get:function(){return this.owner&&this.owner.getLocale?this.owner.getLocale():""},enumerable:!1,configurable:!0}),e.prototype.strChanged=function(){this.searchableText=void 0,void 0!==this.renderedText&&(this.calculatedTextValue=this.calText(),this.renderedText!==this.calculatedTextValue&&(this.renderedText=void 0,this.calculatedTextValue=void 0),this.onChanged())},Object.defineProperty(e.prototype,"text",{get:function(){return this.pureText},set:function(e){this.setLocaleText(this.locale,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"calculatedText",{get:function(){return this.renderedText=void 0!==this.calculatedTextValue?this.calculatedTextValue:this.calText(),this.calculatedTextValue=void 0,this.renderedText},enumerable:!1,configurable:!0}),e.prototype.calText=function(){var e=this.pureText;return e&&this.owner&&this.owner.getProcessedText&&e.indexOf("{")>-1&&(e=this.owner.getProcessedText(e)),this.onGetTextCallback&&(e=this.onGetTextCallback(e)),e},Object.defineProperty(e.prototype,"pureText",{get:function(){var e=this.locale;e||(e=o.settings.defaultLocaleName);var t=this.getValue(e);return t||e!=o.settings.defaultLocaleName||(t=this.getValue(i.surveyLocalization.defaultLocale)),t||e===o.settings.defaultLocaleName||(t=this.getValue(o.settings.defaultLocaleName)),t||(t=""),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasHtml",{get:function(){return this.hasHtmlValue()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"html",{get:function(){return this.hasHtml?this.getHtmlValue():""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0==this.getValuesKeys().length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textOrHtml",{get:function(){return this.hasHtml?this.getHtmlValue():this.calculatedText},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderedHtml",{get:function(){return this.textOrHtml},enumerable:!1,configurable:!0}),e.prototype.getLocaleText=function(e){e||(e=o.settings.defaultLocaleName);var t=this.getValue(e);return t||""},e.prototype.setLocaleText=function(e,t){if(t!=this.getLocaleText(e)&&(!t||!e||e==o.settings.defaultLocaleName||this.getValue(e)||t!=this.getLocaleText(o.settings.defaultLocaleName))){var n=this.locale;e||(e=o.settings.defaultLocaleName),n||(n=o.settings.defaultLocaleName);var r=this.onStrChanged&&e===n,i=r?this.pureText:void 0;delete this.htmlValues[e],t?"string"==typeof t&&(e!=o.settings.defaultLocaleName&&t==this.getLocaleText(o.settings.defaultLocaleName)?this.setLocaleText(e,null):(this.setValue(e,t),e==o.settings.defaultLocaleName&&this.deleteValuesEqualsToDefault(t))):this.getValue(e)&&this.deleteValue(e),this.strChanged(),r&&this.onStrChanged(i,t)}},e.prototype.hasNonDefaultText=function(){var e=this.getValuesKeys();return 0!=e.length&&(e.length>1||e[0]!=o.settings.defaultLocaleName)},e.prototype.getLocales=function(){var e=this.getValuesKeys();return 0==e.length?[]:e},e.prototype.getJson=function(){if(this.sharedData)return this.sharedData.getJson();var e=this.getValuesKeys();return 0==e.length?null:1!=e.length||e[0]!=o.settings.defaultLocaleName||o.settings.serializeLocalizableStringAsObject?this.values:this.values[e[0]]},e.prototype.setJson=function(e){if(this.sharedData)this.sharedData.setJson(e);else if(this.values={},this.htmlValues={},e){if("string"==typeof e)this.setLocaleText(null,e);else for(var t in e)this.setLocaleText(t,e[t]);this.strChanged()}},Object.defineProperty(e.prototype,"renderAs",{get:function(){return this.owner?"function"!=typeof this.owner.getRenderer?e.defaultRenderer:this.owner.getRenderer(this.name)||e.defaultRenderer:e.defaultRenderer},enumerable:!1,configurable:!0}),e.prototype.equals=function(e){return this.sharedData?this.sharedData.equals(e):!(!e||!e.values)&&r.Helpers.isTwoValueEquals(this.values,e.values)},e.prototype.setFindText=function(e){if(this.searchText!=e){if(this.searchText=e,!this.searchableText){var t=this.textOrHtml;this.searchableText=t?t.toLowerCase():""}var n=this.searchableText,r=n&&e?n.indexOf(e):void 0;return r<0&&(r=void 0),null==r&&this.searchIndex==r||(this.searchIndex=r,this.onSearchChanged&&this.onSearchChanged()),null!=this.searchIndex}},e.prototype.onChanged=function(){},e.prototype.onCreating=function(){},e.prototype.hasHtmlValue=function(){if(!this.owner||!this.useMarkdown)return!1;var e=this.calculatedText;if(!e)return!1;var t=this.locale;return t||(t=o.settings.defaultLocaleName),this.htmlValues[t]=this.owner.getMarkdownHtml(e,this.name),!!this.htmlValues[t]},e.prototype.getHtmlValue=function(){var e=this.locale;return e||(e=o.settings.defaultLocaleName),this.htmlValues[e]},e.prototype.deleteValuesEqualsToDefault=function(e){for(var t=this.getValuesKeys(),n=0;n<t.length;n++)t[n]!=o.settings.defaultLocaleName&&this.getValue(t[n])==e&&this.deleteValue(t[n])},e.prototype.getValue=function(e){return this.sharedData?this.sharedData.getValue(e):this.values[e]},e.prototype.setValue=function(e,t){this.sharedData?this.sharedData.setValue(e,t):this.values[e]=t},e.prototype.deleteValue=function(e){this.sharedData?this.sharedData.deleteValue(e):delete this.values[e]},e.prototype.getValuesKeys=function(){return this.sharedData?this.sharedData.getValuesKeys():Object.keys(this.values)},e.SerializeAsObject=!1,e.defaultRenderer="sv-string-viewer",e.editableRenderer="sv-string-editor",e}(),s=function(){function e(e){this.owner=e,this.values={}}return Object.defineProperty(e.prototype,"locale",{get:function(){return this.owner&&this.owner.getLocale?this.owner.getLocale():""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue("")},set:function(e){this.setValue("",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return Array.isArray(this.value)?this.value.join("\n"):""},set:function(e){this.value=e?e.split("\n"):[]},enumerable:!1,configurable:!0}),e.prototype.getLocaleText=function(e){var t=this.getValueCore(e,!e||e===this.locale);return t&&Array.isArray(t)&&0!=t.length?t.join("\n"):""},e.prototype.setLocaleText=function(e,t){var n=t?t.split("\n"):null;this.setValue(e,n)},e.prototype.getValue=function(e){return this.getValueCore(e)},e.prototype.getValueCore=function(e,t){if(void 0===t&&(t=!0),e=this.getLocale(e),this.values[e])return this.values[e];if(t){var n=o.settings.defaultLocaleName;if(e!==n)return this.values[n]}return[]},e.prototype.setValue=function(e,t){e=this.getLocale(e),t&&0!=t.length?this.values[e]=t:delete this.values[e]},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0==this.getValuesKeys().length},enumerable:!1,configurable:!0}),e.prototype.getLocale=function(e){return e||(e=this.locale)||o.settings.defaultLocaleName},e.prototype.getLocales=function(){var e=this.getValuesKeys();return 0==e.length?[]:e},e.prototype.getJson=function(){var e=this.getValuesKeys();return 0==e.length?null:1!=e.length||e[0]!=o.settings.defaultLocaleName||o.settings.serializeLocalizableStringAsObject?this.values:this.values[e[0]]},e.prototype.setJson=function(e){if(this.values={},e)if(Array.isArray(e))this.setValue(null,e);else for(var t in e)this.setValue(t,e[t])},e.prototype.getValuesKeys=function(){return Object.keys(this.values)},e}()},"./src/localization/arabic.ts":
/*!************************************!*\
  !*** ./src/localization/arabic.ts ***!
  \************************************/
/*! exports provided: arabicSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"arabicSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"",pageNextText:"",completeText:" ",previewText:"",editText:"",startSurveyText:"",otherItemText:" ",noneItemText:" ",selectAllItemText:" ",progressText:"{1}  {0} ",panelDynamicProgressText:" {0}  {1}",questionsProgressText:"    {0} / {1}",emptySurvey:"       ",completingSurvey:"   !",completingSurveyBefore:"       .",loadingSurvey:"...  ",optionsCaption:"...",value:"",requiredError:".   ",requiredErrorInPanel:"      .",requiredInAllRowsError:"      ",numericError:"    .",textMinLength:"      {0} ",textMaxLength:"    {0} ",textMinMaxLength:"    {0}   {1} ",minRowCountError:"      {0} ",minSelectError:"      {0} ",maxSelectError:"      {0} ",numericMinMax:"'{0}'        {1}     {2}",numericMin:"'{0}'        {1}",numericMax:"'{0}'        {1}",invalidEmail:"    ",invalidExpression:"   : {0} ''.",urlRequestError:"   '{0}'. {1}",urlGetChoicesError:"     ''   ",exceedMaxSize:"     {0}",otherRequiredError:"   ",uploadingFile:"   .      ",loadingFile:" ...",chooseFile:" ...",noFileChosen:"   ",confirmDelete:"   ",keyDuplicationError:"     .",addColumn:" ",addRow:" ",removeRow:" ",addPanel:" ",removePanel:"",choices_Item:"",matrix_column:"",matrix_row:"",savingData:"     ...",savingDataError:"      .",savingDataSuccess:"   !",saveAgainButton:" ",timerMin:"",timerSec:"",timerSpentAll:"  {0}     {1} .",timerSpentPage:"  {0}   .",timerSpentSurvey:"  {0} .",timerLimitAll:"  {0}  {1}     {2}   {3}.",timerLimitPage:"  {0}  {1}   .",timerLimitSurvey:"  {0}   {1}.",cleanCaption:"",clearCaption:"",chooseFileCaption:" ",removeFileCaption:"   ",booleanCheckedLabel:"",booleanUncheckedLabel:"",confirmRemoveFile:"       : {0}",confirmRemoveAllFiles:"       ",questionTitlePatternText:" "};r.surveyLocalization.locales.ar=i,r.surveyLocalization.localeNames.ar=""},"./src/localization/basque.ts":
/*!************************************!*\
  !*** ./src/localization/basque.ts ***!
  \************************************/
/*! exports provided: basqueSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"basqueSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"Aurrekoa",pageNextText:"Hurrengoa",completeText:"Bukatu",previewText:"Aurrebista",editText:"Editatu",startSurveyText:"Hasi",otherItemText:"Beste bat (zehaztu)",noneItemText:"Bat ere ez",selectAllItemText:"Guztia hautatu",progressText:"{1}-(e)tik {0} orrialde",panelDynamicProgressText:"{0} errigistro {1}-(e)tik",questionsProgressText:"Erantzundako galderak {0}/{1}",emptySurvey:"Ez dago orrialde bistaragarririk edo ez dago galderarik.",completingSurvey:"Eskerrik asko galdetegia erantzuteagatik!",completingSurveyBefore:"Gure datuek diote dagoeneko galdetegia erantzun duzula.",loadingSurvey:"Galdetegia kargatzen...",optionsCaption:"Hautatu...",value:"balioa",requiredError:"Mesedez, galdera erantzun.",requiredErrorInPanel:"Mesedez, gutxienez galdera bat erantzun.",requiredInAllRowsError:"Mesedez, errenkadako galdera guztiak erantzun.",numericError:"Estimazioa zenbakizkoa izan behar du.",minError:"Balioa ez da {0} baino txikiagoa izan behar",maxError:"Balioa ez da {0} baino handiagoa izan behar",textMinLength:"Mesedez, gutxienez {0} karaktere erabili behar dira.",textMaxLength:"Mesedez, gehienez {0} karaktere erabili behar dira.",textMinMaxLength:"Mesedez, gehienez {0} eta gutxienez {1} karaktere erabili behar dira.",minRowCountError:"Mesedez, gutxienez {0} errenkada bete.",minSelectError:"Mesedez, gutxienez {0} aukera hautatu.",maxSelectError:"Mesedez, {0} aukera baino gehiago ez hautatu.",numericMinMax:"El '{0}' debe de ser igual o ms de {1} y igual o menos de {2}",numericMin:"'{0}' {1} baino handiagoa edo berdin izan behar da",numericMax:"'{0}' {1} baino txikiago edo berdin izan behar da",invalidEmail:"Mesedez, baliozko emaila idatz ezazu.",invalidExpression:"{0} adierazpenak 'egiazkoa' itzuli beharko luke.",urlRequestError:"Eskaerak '{0}' errorea itzuli du. {1}",urlGetChoicesError:"La solicitud regres vaco de data o la propiedad 'trayectoria' no es correcta",exceedMaxSize:"Fitxategiaren tamaina ez da {0} baino handiagoa izan behar.",otherRequiredError:"Mesedez, beste estimazioa gehitu.",uploadingFile:"Zure fitxategia igotzen ari da. Mesedez, segundo batzuk itxaron eta saiatu berriro.",loadingFile:"Kargatzen...",chooseFile:"Fitxategia(k) hautatu...",noFileChosen:"Ez da inolako fitxategirik hautatu",confirmDelete:"Erregistroa borratu nahi al duzu?",keyDuplicationError:"Balio hau bakarra izan behar du.",addColumn:"Zutabe bat gehitu",addRow:"Errenkada bat gehitu",removeRow:"Errenkada bat kendu",emptyRowsText:"Ez dago errenkadarik.",addPanel:"Berria gehitu",removePanel:"Kendu",choices_Item:"artikulua",matrix_column:"Zutabea",matrix_row:"Errenkada",multipletext_itemname:"testua",savingData:"Erantzunak zerbitzarian gordetzen ari dira...",savingDataError:"Erroreren bat gertatu eta erantzunak ez dira zerbitzarian gorde ahal izan.",savingDataSuccess:"Erantzunak egoki gorde dira!",saveAgainButton:"Berriro saiatu.",timerMin:"min",timerSec:"seg",timerSpentAll:"{0} erabili duzu orrialde honetan eta orotara {1}.",timerSpentPage:"Zuk {0} erabili duzu.",timerSpentSurvey:"Orotara gastatu duzu.",timerLimitAll:"{0} gastatu duzu {1}-(e)tik orrialde honetan eta orotara {2} {3}-(e)tik.",timerLimitPage:"{0} gastatu duzu orrialde honetan {1}-(e)tik.",timerLimitSurvey:"Zuk orotara {0} gastatu duzu {1}-(e)tik.",cleanCaption:"Garbitu",clearCaption:"Hustu",signaturePlaceHolder:"Sinatu hemen",chooseFileCaption:"Fitxategia hautatu",removeFileCaption:"Fitxategi hau ezabatu",booleanCheckedLabel:"Bai",booleanUncheckedLabel:"Ez",confirmRemoveFile:"Ziur zaude hurrengo fitxategia ezabatu nahi duzula: {0}?",confirmRemoveAllFiles:"Ziur al zaude fitxategi guztiak ezabatu nahi dituzula?",questionTitlePatternText:"Galderaren izenburua",modalCancelButtonText:"Ezeztatu",modalApplyButtonText:"Ezarri"};r.surveyLocalization.locales.eu=i,r.surveyLocalization.localeNames.eu="Euskara"},"./src/localization/bulgarian.ts":
/*!***************************************!*\
  !*** ./src/localization/bulgarian.ts ***!
  \***************************************/
/*! exports provided: bulgarianStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"bulgarianStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"",pageNextText:"",completeText:"",previewText:"",editText:"",startSurveyText:"",otherItemText:" ()",noneItemText:" ",selectAllItemText:"",progressText:". {0},  . {1}",panelDynamicProgressText:" {0}  {1}",questionsProgressText:"  {0} / {1} ",emptySurvey:"      .",completingSurvey:"     !",completingSurveyBefore:",      .",loadingSurvey:"  ...",optionsCaption:"...",value:"value",requiredError:",    .",requiredErrorInPanel:",      .",requiredInAllRowsError:",      .",numericError:"    .",textMinLength:",   {0} .",textMaxLength:",     {0} .",textMinMaxLength:",    {0}  -  {1} .",minRowCountError:",   {0} .",minSelectError:",   {0} .",maxSelectError:",     {0} .",numericMinMax:" '{0}'      -  {1}    -  {2}",numericMin:" '{0}'      -  {1}",numericMax:" '{0}'      -  {1}",invalidEmail:",      .",invalidExpression:": {0}     'true' ().",urlRequestError:"    '{0}'. {1}",urlGetChoicesError:"      'path' (     )   ",exceedMaxSize:"       {0}.",otherRequiredError:",   .",uploadingFile:"     . ,       .",loadingFile:"...",chooseFile:" ()...",noFileChosen:"  ",confirmDelete:"    ?",keyDuplicationError:"    .",addColumn:"  ",addRow:"  ",removeRow:"  ",addPanel:"  ",removePanel:"  ",choices_Item:"",matrix_column:"",matrix_row:"",savingData:"    ...",savingDataError:"        .",savingDataSuccess:"   !",saveAgainButton:" ",timerMin:"",timerSec:"",timerSpentAll:"  {0}      {1}.",timerSpentPage:"  {0}   .",timerSpentSurvey:"   {0}.",timerLimitAll:"  {0}  {1}      {2}  {3}.",timerLimitPage:"  {0}  {1}   .",timerLimitSurvey:"   {0}  {1}.",cleanCaption:"",clearCaption:" ",chooseFileCaption:" ",removeFileCaption:"  ",booleanCheckedLabel:"",booleanUncheckedLabel:"",confirmRemoveFile:"      : {0}?",confirmRemoveAllFiles:"      ?",questionTitlePatternText:"  "};r.surveyLocalization.locales.bg=i,r.surveyLocalization.localeNames.bg=""},"./src/localization/catalan.ts":
/*!*************************************!*\
  !*** ./src/localization/catalan.ts ***!
  \*************************************/
/*! exports provided: catalanSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"catalanSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"Anterior",pageNextText:"Segent",completeText:"Complet",otherItemText:"Un altre (descrigui)",progressText:"Pgina {0} de {1}",emptySurvey:"No hi ha cap pgina visible o pregunta a l'enquesta.",completingSurvey:"Grcies per completar l'enquesta!",loadingSurvey:"L'enquesta s'est carregant ...",optionsCaption:"Selecciona ...",requiredError:"Si us plau contesti la pregunta.",requiredInAllRowsError:"Si us plau contesti les preguntes de cada filera.",numericError:"L'estimaci ha de ser numrica.",textMinLength:"Si us plau entre almenys {0} smbols.",textMaxLength:"Si us plau entre menys de {0} smbols.",textMinMaxLength:"Si us plau entre ms de {0} i menys de {1} smbols.",minRowCountError:"Si us plau ompli almenys {0} fileres.",minSelectError:"Si us plau seleccioni almenys {0} variants.",maxSelectError:"Si us plau seleccioni no ms de {0} variants.",numericMinMax:"El '{0}' deu ser igual o ms de {1} i igual o menys de {2}",numericMin:"El '{0}' ha de ser igual o ms de {1}",numericMax:"El '{0}' ha de ser igual o menys de {1}",invalidEmail:"Si us plau afegiu un correu electrnic vlid.",urlRequestError:"La sollicitud va tornar error '{0}'. {1}",urlGetChoicesError:"La sollicitud va tornar buida de dates o la propietat 'trajectria' no s correcta",exceedMaxSize:"La mida de l'arxiu no pot excedir {0}.",otherRequiredError:"Si us plau afegiu l'altra estimaci.",uploadingFile:"El seu arxiu s'est pujant. Si us plau esperi uns segons i intenteu-ho de nou.",addRow:"Afegiu una filera",removeRow:"Eliminar una filera",choices_firstItem:"primer article",choices_secondItem:"segon article",choices_thirdItem:"tercer article",matrix_column:"Columna",matrix_row:"Filera"};r.surveyLocalization.locales.ca=i,r.surveyLocalization.localeNames.ca="catal"},"./src/localization/croatian.ts":
/*!**************************************!*\
  !*** ./src/localization/croatian.ts ***!
  \**************************************/
/*! exports provided: croatianStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"croatianStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"Prethodni",pageNextText:"Sljedei",completeText:"Kompletan",previewText:"Pregled",editText:"Ureivanje",startSurveyText:"Poetak",otherItemText:"Ostali (opis)",noneItemText:"Nitko",selectAllItemText:"Select All",progressText:"Stranica {0} od {1}",panelDynamicProgressText:"Zapisa {0} od {1}",questionsProgressText:"Odgovorio na {0}/{1} pitanja",emptySurvey:"U anketi nema vidljive stranice ili pitanja.",completingSurvey:"Hvala vam to ste zavrili anketu!",completingSurveyBefore:"Nai zapisi pokazuju da ste ve zavrili ovu anketu.",loadingSurvey:"Anketa o uitavanje...",optionsCaption:"Odaberite...",value:"vrijednost",requiredError:"Molim vas odgovorite na pitanje.",requiredErrorInPanel:"Molim vas odgovorite na barem jedno pitanje.",requiredInAllRowsError:"Odgovorite na pitanja u svim redovima.",numericError:"Vrijednost bi trebala biti brojana.",textMinLength:"Unesite najmanje {0} znak(ova).",textMaxLength:"Unesite manje od {0} znak(ova).",textMinMaxLength:"Unesite vie od {0} i manje od {1} znakova.",minRowCountError:"Molimo ispunite najmanje {0} redaka.",minSelectError:"Odaberite barem {0} varijante.",maxSelectError:"Odaberite ne vie od {0} varijanti.",numericMinMax:"'{0}'bi trebao biti jednak ili vie od {1} i jednak ili manji od {2}.",numericMin:"'{0}' bi trebao biti jednak ili vie od {1}.",numericMax:"'{0}' bi trebao biti jednak ili manji od {1}",invalidEmail:"Unesite valjanu e-mail adresu.",invalidExpression:"Izraz: {0} treba vratiti 'true'.",urlRequestError:"Zahtjev vratio pogreku '{0}'. {1}",urlGetChoicesError:"Zahtjev je vratio prazne podatke ili je 'path' svojstvo netona.",exceedMaxSize:"Veliina datoteke ne smije prelaziti {0}.",otherRequiredError:"Unesite drugu vrijednost.",uploadingFile:"Vaa datoteka se prenosi. Priekajte nekoliko sekundi i pokuajte ponovno.",loadingFile:"Uitavanje...",chooseFile:"Odaberite datoteku...",noFileChosen:"Nije odabrana datoteka",confirmDelete:"elite li izbrisati zapis?",keyDuplicationError:"Ta bi vrijednost trebala biti jedinstvena.",addColumn:"Dodavanje stupca",addRow:"Dodavanje redaka",removeRow:"Ukloniti",addPanel:"Dodavanje novih",removePanel:"Ukloniti",choices_Item:"stavku",matrix_column:"Stupca",matrix_row:"Redak",savingData:"Rezultati se spremaju na posluitelju...",savingDataError:"Dolo je do pogreke i nismo mogli spremiti rezultate.",savingDataSuccess:"Rezultati su uspjeno spremljeni!",saveAgainButton:"Pokuaj ponovo",timerMin:"min",timerSec:"sec",timerSpentAll:"Vi ste proveli {0} na ovoj stranici i {1} ukupno.",timerSpentPage:"Potroili ste {0} na ovu stranicu.",timerSpentSurvey:"You have spent {0} in total. {0}.",timerLimitAll:"Vi ste proveli {0} od {1} na ovoj stranici i {2} od {3} ukupno.",timerLimitPage:"Potroio si {0} od {1} na ovoj stranici.",timerLimitSurvey:"Ukupno ste potroili {0} od {1}.",cleanCaption:"Oistiti",clearCaption:"Oistiti",chooseFileCaption:"Odaberite datoteku",removeFileCaption:"Uklonite ovu datoteku",booleanCheckedLabel:"Da",booleanUncheckedLabel:"Ne",confirmRemoveFile:"Jeste li sigurni da elite ukloniti ovu datoteku: {0}?",confirmRemoveAllFiles:"Jeste li sigurni da elite ukloniti sve datoteke?",questionTitlePatternText:"Naslov pitanja",modalCancelButtonText:"Otkazati",modalApplyButtonText:"Primijeniti"};r.surveyLocalization.locales.hr=i,r.surveyLocalization.localeNames.hr="hrvatski"},"./src/localization/czech.ts":
/*!***********************************!*\
  !*** ./src/localization/czech.ts ***!
  \***********************************/
/*! exports provided: czechSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"czechSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"Pedchoz",pageNextText:"Dal",completeText:"Hotovo",previewText:"Nhled",editText:"Upravit",startSurveyText:"Start",otherItemText:"Jin odpov (napite)",noneItemText:"dn",selectAllItemText:"Vybrat ve",progressText:"Strana {0} z {1}",panelDynamicProgressText:"Zznam {0} z {1}",questionsProgressText:"Zodpovzen otzky: {0} / {1}",emptySurvey:"Przkumu neobsahuje dn otzky.",completingSurvey:"Dkujeme za vyplnn przkumu!",completingSurveyBefore:"Nae zznamy ukazuj, e jste tento przkum ji dokonili.",loadingSurvey:"Probh natn przkumu...",optionsCaption:"Vyber...",value:"hodnota",requiredError:"Odpovzte prosm na otzku.",requiredErrorInPanel:"Please answer at least one question.",requiredInAllRowsError:"Odpovzte prosm na vechny otzky.",numericError:"V tomto poli lze zadat pouze sla.",textMinLength:"Zadejte prosm alespo {0} znak.",textMaxLength:"Zadejte prosm mn ne {0} znak.",textMinMaxLength:"Zadejte prosm vce ne {0} a mn ne {1} znak.",minRowCountError:"Vyplte prosm alespo {0} dk.",minSelectError:"Vyberte prosm alespo {0} varianty.",maxSelectError:"Nevybrejte prosm vce ne {0} variant.",numericMinMax:"Odpov '{0}' by mlo bt vt nebo rovno {1} a men nebo rovno {2}",numericMin:"Odpov '{0}' by mlo bt vt nebo rovno {1}",numericMax:"Odpov '{0}' by mlo bt men nebo rovno {1}",invalidEmail:"Zadejte prosm platnou e-mailovou adresu.",invalidExpression:"Vraz: {0} by ml vrtit hodnotu true.",urlRequestError:"Poadavek vrtil chybu '{0}'. {1}",urlGetChoicesError:"Poadavek nevrtil data nebo cesta je neplatn",exceedMaxSize:"Velikost souboru by nemla bt vt ne {0}.",otherRequiredError:"Zadejte prosm jinou hodnotu.",uploadingFile:"V soubor se nahrv. Zkuste to prosm za nkolik sekund.",loadingFile:"Natn...",chooseFile:"Vyberte soubory ...",noFileChosen:"Nen zvolen dn soubor",confirmDelete:"Chcete smazat zznam?",keyDuplicationError:"Tato hodnota by mla bt jedinen.",addColumn:"Pidat sloupec",addRow:"Pidat dek",removeRow:"Odstranit",addPanel:"Pidat nov",removePanel:"Odstranit",choices_Item:"poloka",matrix_column:"Sloupec",matrix_row:"dek",savingData:"Vsledky se ukldaj na server ...",savingDataError:"Dolo k chyb a vsledky jsme nemohli uloit.",savingDataSuccess:"Vsledky byly spn uloeny!",saveAgainButton:"Zkus to znovu",timerMin:"min",timerSec:"sek",timerSpentAll:"Na tto strnce jste utratili celkem {0} a celkem {1}.",timerSpentPage:"Na tto strnce jste utratili {0}.",timerSpentSurvey:"Celkem jste utratili {0}.",timerLimitAll:"Na tto strnce jste utratili {0} z {1} a celkem {2} z {3}.",timerLimitPage:"Na tto strnce jste strvili {0} z {1}.",timerLimitSurvey:"Celkov jste utratili {0} z {1}.",cleanCaption:"ist",clearCaption:"Prhledn",chooseFileCaption:"Vyberte soubor",removeFileCaption:"Odeberte tento soubor",booleanCheckedLabel:"Ano",booleanUncheckedLabel:"Ne",confirmRemoveFile:"Opravdu chcete odebrat tento soubor: {0}?",confirmRemoveAllFiles:"Opravdu chcete odstranit vechny soubory?",questionTitlePatternText:"Nzev otzky"};r.surveyLocalization.locales.cs=i,r.surveyLocalization.localeNames.cs="etina"},"./src/localization/danish.ts":
/*!************************************!*\
  !*** ./src/localization/danish.ts ***!
  \************************************/
/*! exports provided: danishSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"danishSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"Tilbage",pageNextText:"Videre",completeText:"Frdig",previewText:"Forpremiere",editText:"Redigr",startSurveyText:"Start",otherItemText:"Valgfrit svar...",noneItemText:"Ingen",selectAllItemText:"Vlg alle",progressText:"Side {0} af {1}",panelDynamicProgressText:"Optag {0} af {1}",questionsProgressText:"Besvarede {0} / {1} sprgsml",emptySurvey:"Der er ingen synlige sprgsml.",completingSurvey:"Mange tak for din besvarelse!",completingSurveyBefore:"Vores data viser at du allerede har gennemfrt dette sprgeskema.",loadingSurvey:"Sprgeskemaet hentes fra serveren...",optionsCaption:"Vlg...",value:"vrdi",requiredError:"Besvar venligst sprgsmlet.",requiredErrorInPanel:"Besvar venligst mindst t sprgsml.",requiredInAllRowsError:"Besvar venligst sprgsml i alle rkker.",numericError:"Angiv et tal.",textMinLength:"Angiv mindst {0} tegn.",textMaxLength:"Please enter less than {0} characters.",textMinMaxLength:"Angiv mere end {0} og mindre end {1} tegn.",minRowCountError:"Udfyld mindst {0} rkker.",minSelectError:"Vlg venligst mindst {0} svarmulighed(er).",maxSelectError:"Vlg venligst frre {0} svarmuligheder(er).",numericMinMax:"'{0}' skal vre lig med eller strre end {1} og lig med eller mindre end {2}",numericMin:"'{0}' skal vre lig med eller strre end {1}",numericMax:"'{0}' skal vre lig med eller mindre end {1}",invalidEmail:"Angiv venligst en gyldig e-mail adresse.",invalidExpression:"Udtrykket: {0} skal returnere 'true'.",urlRequestError:"Foresprgslen returnerede fejlen '{0}'. {1}",urlGetChoicesError:"Foresprgslen returnerede ingen data eller 'path' parameteren er forkert",exceedMaxSize:"Filstrrelsen m ikke overstige {0}.",otherRequiredError:"Angiv en vrdi for dit valgfrie svar.",uploadingFile:"Din fil bliver uploadet. Vent nogle sekunder og prv eventuelt igen.",loadingFile:"Indlser...",chooseFile:"Vlg fil(er)...",noFileChosen:"Ingen fil er valgt",confirmDelete:"Vil du fjerne den?",keyDuplicationError:"Denne vrdi skal vre unik.",addColumn:"Tilfj kolonne",addRow:"Tilfj rkke",removeRow:"Fjern",addPanel:"Tilfj ny",removePanel:"Fjern",choices_Item:"valg",matrix_column:"Kolonne",matrix_row:"Rkke",savingData:"Resultaterne bliver gemt p serveren...",savingDataError:"Der opstod en fejl og vi kunne ikke gemme resultatet.",savingDataSuccess:"Resultatet blev gemt!",saveAgainButton:"Prv igen",timerMin:"min",timerSec:"sek",timerSpentAll:"Du har brugt {0} p denne side og {1} i alt.",timerSpentPage:"Du har brugt {0} p denne side.",timerSpentSurvey:"Du har brugt {0} i alt.",timerLimitAll:"Du har brugt {0} af {1} p denne side og {2} af {3} i alt.",timerLimitPage:"Du har brugt {0} af {1} p denne side.",timerLimitSurvey:"Du har brugt {0} af {1} i alt.",cleanCaption:"Rens",clearCaption:"Fjern",chooseFileCaption:"Vlg fil",removeFileCaption:"Fjern denne fil",booleanCheckedLabel:"Ja",booleanUncheckedLabel:"Ingen",confirmRemoveFile:"Er du sikker p, at du vil fjerne denne fil: {0}?",confirmRemoveAllFiles:"Er du sikker p, at du vil fjerne alle filer?",questionTitlePatternText:"Sprgsmls titel"};r.surveyLocalization.locales.da=i,r.surveyLocalization.localeNames.da="dansk"},"./src/localization/dutch.ts":
/*!***********************************!*\
  !*** ./src/localization/dutch.ts ***!
  \***********************************/
/*! exports provided: dutchSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"dutchSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"Vorige",pageNextText:"Volgende",completeText:"Verzenden",previewText:"Voorbeeld",editText:"Bewerk",startSurveyText:"Begin met",otherItemText:"Anders, nl.",noneItemText:"Geen",selectAllItemText:"Selecteer Alles",progressText:"Pagina {0} van {1}",panelDynamicProgressText:"Record {0} of {1}",questionsProgressText:"Geantwoord {0}/{1} vragen",emptySurvey:"Er is geen zichtbare pagina of vraag in deze vragenlijst",completingSurvey:"Bedankt voor het invullen van de vragenlijst",completingSurveyBefore:"Onze gegevens tonen aan dat je deze vragenlijst reeds beantwoord hebt.",loadingSurvey:"De vragenlijst is aan het laden...",optionsCaption:"Kies...",value:"waarde",requiredError:"Dit is een vereiste vraag",requiredErrorInPanel:"Gelieve ten minste een vraag te beantwoorden.",requiredInAllRowsError:"Deze vraag vereist n antwoord per rij",numericError:"Het antwoord moet een getal zijn",textMinLength:"Vul minstens {0} karakters in",textMaxLength:"Gelieve minder dan {0} karakters in te vullen.",textMinMaxLength:"Gelieve meer dan {0} en minder dan {1} karakters in te vullen.",minRowCountError:"Gelieve ten minste {0} rijen in te vullen.",minSelectError:"Selecteer minimum {0} antwoorden",maxSelectError:"Selecteer niet meer dan {0} antwoorden",numericMinMax:"Uw antwoord '{0}' moet groter of gelijk zijn aan {1} en kleiner of gelijk aan {2}",numericMin:"Uw antwoord '{0}' moet groter of gelijk zijn aan {1}",numericMax:"Uw antwoord '{0}' moet groter of gelijk zijn aan {1}",invalidEmail:"Vul een geldig e-mailadres in",invalidExpression:"De uitdrukking: {0} moet 'waar' teruggeven.",urlRequestError:"De vraag keerde een fout terug '{0}'. {1}",urlGetChoicesError:"De vraag gaf een leeg antwoord terug of de 'pad' eigenschap is niet correct",exceedMaxSize:"De grootte van het bestand mag niet groter zijn dan {0}",otherRequiredError:"Vul het veld 'Anders, nl.' in",uploadingFile:"Uw bestand wordt opgeladen. Gelieve enkele seconden te wachten en opnieuw te proberen.",loadingFile:"Opladen...",chooseFile:"Kies uw bestand(en)...",noFileChosen:"Geen bestand gekozen",confirmDelete:"Wil je deze gegevens verwijderen?",keyDuplicationError:"Deze waarde moet uniek zijn.",addColumn:"Voeg kolom toe",addRow:"Voeg rij toe",removeRow:"Verwijder",addPanel:"Nieuwe toevoegen",removePanel:"Verwijder",choices_Item:"onderwerp",matrix_column:"Kolom",matrix_row:"Rij",savingData:"De resultaten worden bewaard op de server...",savingDataError:"Er was een probleem en we konden de resultaten niet bewaren.",savingDataSuccess:"De resultaten werden succesvol bewaard!",saveAgainButton:"Probeer opnieuw",timerMin:"minimum",timerSec:"sec",timerSpentAll:"U heeft {0} gespendeerd op deze pagina en {1} in totaal.",timerSpentPage:"U heeft {0} op deze pagina gespendeerd.",timerSpentSurvey:"U heeft in totaal {0} gespendeerd.",timerLimitAll:"U heeft {0} van {1} op deze pagina gespendeerd en {2} van {3} in totaal.",timerLimitPage:"U heeft {0} van {1} gespendeerd op deze pagina.",timerLimitSurvey:"U heeft {0} van {1} in het totaal.",cleanCaption:"Kuis op",clearCaption:"Kuis op",chooseFileCaption:"Gekozen bestand",removeFileCaption:"Verwijder deze file",booleanCheckedLabel:"Ja",booleanUncheckedLabel:"Neen",confirmRemoveFile:"Bent u zeker dat u deze file wilt verwijderen: {0}?",confirmRemoveAllFiles:"Bent u zeker dat u al deze files wilt verwijderen?",questionTitlePatternText:"Titel van de vraag"};r.surveyLocalization.locales.nl=i,r.surveyLocalization.localeNames.nl="nederlands"},"./src/localization/english.ts":
/*!*************************************!*\
  !*** ./src/localization/english.ts ***!
  \*************************************/
/*! exports provided: englishStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"englishStrings",(function(){return r}));var r={pagePrevText:"Previous",pageNextText:"Next",completeText:"Complete",previewText:"Preview",editText:"Edit",startSurveyText:"Start",otherItemText:"Other (describe)",noneItemText:"None",selectAllItemText:"Select All",progressText:"Page {0} of {1}",panelDynamicProgressText:"Record {0} of {1}",questionsProgressText:"Answered {0}/{1} questions",emptySurvey:"There is no visible page or question in the survey.",completingSurvey:"Thank you for completing the survey!",completingSurveyBefore:"Our records show that you have already completed this survey.",loadingSurvey:"Loading Survey...",optionsCaption:"Choose...",value:"value",requiredError:"Please answer the question.",requiredErrorInPanel:"Please answer at least one question.",requiredInAllRowsError:"Please answer questions in all rows.",numericError:"The value should be numeric.",minError:"The value should not be less than {0}",maxError:"The value should not be greater than {0}",textMinLength:"Please enter at least {0} character(s).",textMaxLength:"Please enter no more than {0} character(s).",textMinMaxLength:"Please enter at least {0} and no more than {1} characters.",minRowCountError:"Please fill in at least {0} row(s).",minSelectError:"Please select at least {0} variant(s).",maxSelectError:"Please select no more than {0} variant(s).",numericMinMax:"The '{0}' should be at least {1} and at most {2}",numericMin:"The '{0}' should be at least {1}",numericMax:"The '{0}' should be at most {1}",invalidEmail:"Please enter a valid e-mail address.",invalidExpression:"The expression: {0} should return 'true'.",urlRequestError:"The request returned error '{0}'. {1}",urlGetChoicesError:"The request returned empty data or the 'path' property is incorrect",exceedMaxSize:"The file size should not exceed {0}.",otherRequiredError:"Please enter the other value.",uploadingFile:"Your file is uploading. Please wait several seconds and try again.",loadingFile:"Loading...",chooseFile:"Choose file(s)...",noFileChosen:"No file chosen",confirmDelete:"Do you want to delete the record?",keyDuplicationError:"This value should be unique.",addColumn:"Add column",addRow:"Add row",removeRow:"Remove",emptyRowsText:"There are no rows.",addPanel:"Add new",removePanel:"Remove",choices_Item:"item",matrix_column:"Column",matrix_row:"Row",multipletext_itemname:"text",savingData:"The results are being saved on the server...",savingDataError:"An error occurred and we could not save the results.",savingDataSuccess:"The results were saved successfully!",saveAgainButton:"Try again",timerMin:"min",timerSec:"sec",timerSpentAll:"You have spent {0} on this page and {1} in total.",timerSpentPage:"You have spent {0} on this page.",timerSpentSurvey:"You have spent {0} in total.",timerLimitAll:"You have spent {0} of {1} on this page and {2} of {3} in total.",timerLimitPage:"You have spent {0} of {1} on this page.",timerLimitSurvey:"You have spent {0} of {1} in total.",cleanCaption:"Clean",clearCaption:"Clear",signaturePlaceHolder:"Sign here",chooseFileCaption:"Choose file",removeFileCaption:"Remove this file",booleanCheckedLabel:"Yes",booleanUncheckedLabel:"No",confirmRemoveFile:"Are you sure that you want to remove this file: {0}?",confirmRemoveAllFiles:"Are you sure that you want to remove all files?",questionTitlePatternText:"Question Title",modalCancelButtonText:"Cancel",modalApplyButtonText:"Apply"}},"./src/localization/estonian.ts":
/*!**************************************!*\
  !*** ./src/localization/estonian.ts ***!
  \**************************************/
/*! exports provided: estonianSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"estonianSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"Tagasi",pageNextText:"Edasi",completeText:"Lpeta",previewText:"Eelvaade",editText:"Muuda",startSurveyText:"Alusta",otherItemText:"Muu (tpsusta)",noneItemText:"Mitte midagi",selectAllItemText:"Vali kik",progressText:"Leheklg {0}/{1}",panelDynamicProgressText:"Kirje {0}/{1}",questionsProgressText:"Vastatud {0} ksimust {1}-st",emptySurvey:"Selles uuringus ei ole htki nhtavat leheklge vi ksimust.",completingSurvey:"Aith, et vastasid ankeedile!",completingSurveyBefore:"Meie andmetel oled sa sellele ankeedile juba vastanud.",loadingSurvey:"Laen ankeeti...",optionsCaption:"Vali...",value:"vrtus",requiredError:"Palun vasta ksimusele.",requiredErrorInPanel:"Palun vasta vhemalt hele ksimusele.",requiredInAllRowsError:"Palun anna vastus igal real.",numericError:"See peaks olema numbriline vrtus.",textMinLength:"Palun sisesta vhemalt {0} themrki.",textMaxLength:"Palun ra sisesta rohkem kui {0} themrki.",textMinMaxLength:"Sisesta palun {0} - {1} themrki.",minRowCountError:"Sisesta plaun vhemalt {0} rida.",minSelectError:"Palun vali vhemalt {0} varianti.",maxSelectError:"Palun vali kige rohkem {0} varianti.",numericMinMax:"'{0}' peaks olema vrdne vi suurem kui {1} ja vrdne vi viksem kui {2}",numericMin:"'{0}' peaks olema vrdne vi suurem kui {1}",numericMax:"'{0}' peaks olema vrnde vi viksem kui {1}",invalidEmail:"Sisesta palun korrektne e-posti aadress.",invalidExpression:"Avaldis: {0} peaks tagastama tese.",urlRequestError:"Taotlus tagastas vea {0}. {1}",urlGetChoicesError:"Taotlus tagastas thjad andmed vi atribuut 'path' on vale",exceedMaxSize:"Faili suurus ei tohi letada {0}.",otherRequiredError:"Sisesta palun muu vastus.",uploadingFile:"Sinu fail laeb les. Palun oota mned sekundid ning proovi seejrel uuesti.",loadingFile:"Laen...",chooseFile:"Vali fail(id)...",noFileChosen:"Faili pole valitud",confirmDelete:"Kas tahad kirje kustutada?",keyDuplicationError:"See vrtus peab olema unikaalne.",addColumn:"Lisa veerg",addRow:"Lisa rida",removeRow:"Eemalda",addPanel:"Lisa uus",removePanel:"Eemalda",choices_Item:"ksus",matrix_column:"Veerg",matrix_row:"Rida",savingData:"Salvestan andmed serveris...",savingDataError:"Tekkis viga ning me ei saanud vastuseid salvestada.",savingDataSuccess:"Vastuste salvestamine nnestus!",saveAgainButton:"Proovi uuesti",timerMin:"min",timerSec:"sek",timerSpentAll:"Oled veetnud {0} sellel lehel ning kokku {1}.",timerSpentPage:"Oled veetnud {0} sellel lehel.",timerSpentSurvey:"Oled veetnud {0} kokku.",timerLimitAll:"Oled kulutanud {0} vimalikust {1} sellel lehel ning {2} vimalikust {3} kokku.",timerLimitPage:"Oled kulutanud {0} vimalikust {1} sellel lehel.",timerLimitSurvey:"Oled kulutanud {0} vimalikust {1} koguajast.",cleanCaption:"Puhasta",clearCaption:"Puhasta",chooseFileCaption:"Vali fail",removeFileCaption:"Eemalda see fail",booleanCheckedLabel:"Jah",booleanUncheckedLabel:"Ei",confirmRemoveFile:"Oled sa kindel, et soovid selle faili eemaldada: {0}?",confirmRemoveAllFiles:"Oled sa kindel, et soovid eemaldada kik failid?",questionTitlePatternText:"Ksimuse pealkiri"};r.surveyLocalization.locales.et=i,r.surveyLocalization.localeNames.et="eesti keel"},"./src/localization/finnish.ts":
/*!*************************************!*\
  !*** ./src/localization/finnish.ts ***!
  \*************************************/
/*! exports provided: finnishSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"finnishSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"Edellinen",pageNextText:"Seuraava",completeText:"Valmis",previewText:"Esikatselu",editText:"Muokkaa",startSurveyText:"Aloita",otherItemText:"Muu (tarkenna)",noneItemText:"Ei mitn",selectAllItemText:"Valitse kaikki",progressText:"Sivu {0} / {1}",panelDynamicProgressText:"Osio {0} / {1}",questionsProgressText:"Olet vastannut {0} / {1} kysymykseen.",emptySurvey:"Tss kyselyss ei ole yhtn nkyvill olevaa sivua tai kysymyst.",completingSurvey:"Kiitos kyselyyn vastaamisesta!",completingSurveyBefore:"Tietojemme mukaan olet jo suorittanut tmn kyselyn.",loadingSurvey:"Kysely ladataan palvelimelta...",optionsCaption:"Valitse...",value:"arvo",requiredError:"Vastaa kysymykseen, kiitos.",requiredErrorInPanel:"Vastaa ainakin yhteen kysymykseen.",requiredInAllRowsError:"Vastaa kysymyksiin kaikilla riveill.",numericError:"Arvon tulee olla numeerinen.",textMinLength:"Syt vhintn {0} merkki.",textMaxLength:"l syt yli {0} merkki.",textMinMaxLength:"Syt vhintn {0} ja enintn {1} merkki.",minRowCountError:"Tyt vhintn {0} rivi.",minSelectError:"Valitse vhintn {0} vaihtoehtoa.",maxSelectError:"Valitse enintn {0} vaihtoehtoa.",numericMinMax:"Luvun '{0}' tulee olla vhintn {1} ja korkeintaan {2}.",numericMin:"Luvun '{0}' tulee olla vhintn {1}.",numericMax:"Luvun '{0}' tulee olla korkeintaan {1}.",invalidEmail:"Syt validi shkpostiosoite.",invalidExpression:"Lausekkeen: {0} pitisi palauttaa 'true'.",urlRequestError:"Pyynt palautti virheen {0}. {1}",urlGetChoicesError:"Pyynt palautti tyhjn tiedoston tai 'path'-asetus on vr",exceedMaxSize:"Tiedoston koko ei saa olla suurempi kuin {0}.",otherRequiredError:"Tarkenna vastaustasi tekstikenttn.",uploadingFile:"Tiedostoa lhetetn. Odota muutama sekunti ja yrit uudelleen.",loadingFile:"Ladataan...",chooseFile:"Valitse tiedosto(t)...",noFileChosen:"Ei tiedostoa valittuna",confirmDelete:"Haluatko poistaa osion?",keyDuplicationError:"Tm arvo on jo kytss. Syt toinen arvo.",addColumn:"Lis sarake",addRow:"Lis rivi",removeRow:"Poista",emptyRowsText:"Ei rivej",addPanel:"Lis uusi",removePanel:"Poista",choices_Item:"kohde",matrix_column:"Sarake",matrix_row:"Rivi",savingData:"Tietoja tallennetaan palvelimelle...",savingDataError:"Tapahtui virhe, emmek voineet tallentaa kyselyn tietoja.",savingDataSuccess:"Tiedot tallennettiin onnistuneesti!",saveAgainButton:"Yrit uudelleen",timerMin:"min",timerSec:"sek",timerSpentAll:"Olet kyttnyt {0} tll sivulla ja yhteens {1}.",timerSpentPage:"Olet kyttnyt {0} tll sivulla.",timerSpentSurvey:"Olet kyttnyt yhteens {0}.",timerLimitAll:"Olet kyttnyt tll sivulla {0} / {1} ja yhteens {2} / {3}.",timerLimitPage:"Olet kyttnyt {0} / {1} tll sivulla.",timerLimitSurvey:"Olet kyttnyt yhteens {0} / {1}.",cleanCaption:"Pyyhi",clearCaption:"Tyhjenn",chooseFileCaption:"Valitse tiedosto",removeFileCaption:"Poista tm tiedosto",booleanCheckedLabel:"Kyll",booleanUncheckedLabel:"Ei",confirmRemoveFile:"Haluatko varmasti poistaa tmn tiedoston: {0}?",confirmRemoveAllFiles:"Haluatko varmasti poistaa kaikki tiedostot?",questionTitlePatternText:"Kysymyksen otsikko",modalCancelButtonText:"Peruuta",modalApplyButtonText:"Kyt"};r.surveyLocalization.locales.fi=i,r.surveyLocalization.localeNames.fi="suomi"},"./src/localization/french.ts":
/*!************************************!*\
  !*** ./src/localization/french.ts ***!
  \************************************/
/*! exports provided: frenchSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"frenchSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"Prcdent",pageNextText:"Suivant",completeText:"Terminer",previewText:"Aperu",editText:"Modifier",startSurveyText:"Commencer",otherItemText:"Autre (prciser)",noneItemText:"Aucun",selectAllItemText:"Tout slectionner",progressText:"Page {0} sur {1}",panelDynamicProgressText:"Enregistrement {0} sur {1}",questionsProgressText:"{0}/{1} question(s) rpondue(s)",emptySurvey:"Il n'y a ni page visible ni question visible dans ce questionnaire",completingSurvey:"Merci d'avoir rpondu au questionnaire !",completingSurveyBefore:"Nos donnes indiquent que vous avez dj rempli ce questionnaire.",loadingSurvey:"Le questionnaire est en cours de chargement...",optionsCaption:"Choisissez...",value:"valeur",requiredError:"La rponse  cette question est obligatoire.",requiredErrorInPanel:"Merci de rpondre au moins  une question.",requiredInAllRowsError:"Toutes les lignes sont obligatoires",numericError:"La rponse doit tre un nombre.",textMinLength:"Merci de saisir au moins {0} caractres.",textMaxLength:"Merci de saisir moins de {0} caractres.",textMinMaxLength:"Merci de saisir entre {0} et {1} caractres.",minRowCountError:"Merci de complter au moins {0} lignes.",minSelectError:"Merci de slectionner au minimum {0} rponses.",maxSelectError:"Merci de slectionner au maximum {0} rponses.",numericMinMax:"Votre rponse '{0}' doit tre suprieure ou gale  {1} et infrieure ou gale  {2}",numericMin:"Votre rponse '{0}' doit tre suprieure ou gale  {1}",numericMax:"Votre rponse '{0}' doit tre infrieure ou gale  {1}",invalidEmail:"Merci d'entrer une adresse mail valide.",invalidExpression:"L'expression: {0} doit retourner 'true'.",urlRequestError:"La requte a renvoy une erreur '{0}'. {1}",urlGetChoicesError:"La requte a renvoy des donnes vides ou la proprit 'path' est incorrecte",exceedMaxSize:"La taille du fichier ne doit pas excder {0}.",otherRequiredError:"Merci de prciser le champ 'Autre'.",uploadingFile:"Votre fichier est en cours de chargement. Merci d'attendre quelques secondes et de ressayer.",loadingFile:"Chargement...",chooseFile:"Ajouter des fichiers...",noFileChosen:"Aucun fichier ajout",confirmDelete:"Voulez-vous supprimer cet enregistrement ?",keyDuplicationError:"Cette valeur doit tre unique.",addColumn:"Ajouter une colonne",addRow:"Ajouter une ligne",removeRow:"Supprimer",addPanel:"Ajouter",removePanel:"Supprimer",choices_Item:"item",matrix_column:"Colonne",matrix_row:"Ligne",savingData:"Les rsultats sont en cours de sauvegarde sur le serveur...",savingDataError:"Une erreur est survenue et a empch la sauvegarde des rsultats.",savingDataSuccess:"Les rsultats ont bien t enregistrs !",saveAgainButton:"Ressayer",timerMin:"min",timerSec:"sec",timerSpentAll:"Vous avez pass {0} sur cette page et {1} au total.",timerSpentPage:"Vous avez pass {0} sur cette page.",timerSpentSurvey:"Vous avez pass {0} au total.",timerLimitAll:"Vous avez pass {0} sur {1} sur cette page et {2} sur {3} au total.",timerLimitPage:"Vous avez pass {0} sur {1} sur cette page.",timerLimitSurvey:"Vous avez pass {0} sur {1} au total.",cleanCaption:"Nettoyer",clearCaption:"Vider",chooseFileCaption:"Ajouter un fichier",removeFileCaption:"Enlever ce fichier",booleanCheckedLabel:"Oui",booleanUncheckedLabel:"Non",confirmRemoveFile:"tes-vous certains de vouloir supprimer ce fichier : {0}?",confirmRemoveAllFiles:"tes-vous certains de vouloir supprimer tous les fichiers?",questionTitlePatternText:"Titre de la question"};r.surveyLocalization.locales.fr=i,r.surveyLocalization.localeNames.fr="franais"},"./src/localization/georgian.ts":
/*!**************************************!*\
  !*** ./src/localization/georgian.ts ***!
  \**************************************/
/*! exports provided: georgianSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"georgianSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"",pageNextText:"",completeText:"",progressText:" {0} / {1}",emptySurvey:"   .",completingSurvey:"  !",loadingSurvey:" ...",otherItemText:" ( )",optionsCaption:"...",requiredError:"  .",numericError:"   .",textMinLength:"   {0} .",minSelectError:"   {0} .",maxSelectError:"   {0} .",numericMinMax:"'{0}'     ,  {1},      {2}",numericMin:"'{0}'       {1}",numericMax:"'{0}'       {1}",invalidEmail:"  .   .",otherRequiredEror:"   ''"};r.surveyLocalization.locales.ka=i,r.surveyLocalization.localeNames.ka=""},"./src/localization/german.ts":
/*!************************************!*\
  !*** ./src/localization/german.ts ***!
  \************************************/
/*! exports provided: germanSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"germanSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"Zurck",pageNextText:"Weiter",completeText:"Abschlieen",previewText:"Vorschau",editText:"Bearbeiten",startSurveyText:"Start",otherItemText:"Sonstiges (Bitte angeben)",noneItemText:"Nichts trifft zu",selectAllItemText:"Alles auswhlen",progressText:"Seite {0} von {1}",panelDynamicProgressText:"Eintrag {0} von {1}",questionsProgressText:"{0}/{1} Fragen beantwortet",emptySurvey:"Es sind keine Fragen vorhanden.",completingSurvey:"Vielen Dank, dass Sie die Umfrage abgeschlossen haben!",completingSurveyBefore:"Wir haben festgestellt, dass Sie diese Umfrage bereits abgeschlossen haben.",loadingSurvey:"Umfrage wird geladen...",optionsCaption:"Bitte auswhlen...",value:"Wert",requiredError:"Bitte beantworten Sie diese Frage.",requiredErrorInPanel:"Bitte beantworten Sie mindestens eine Frage.",requiredInAllRowsError:"Bitte beantworten Sie alle Fragen.",numericError:"Der Wert muss eine Zahl sein.",textMinLength:"Bitte geben Sie mindestens {0} Zeichen ein.",textMaxLength:"Bitte geben Sie nicht mehr als {0} Zeichen ein.",textMinMaxLength:"Bitte geben Sie mindestens {0} und maximal {1} Zeichen ein.",minRowCountError:"Bitte machen Sie in mindestens {0} Zeilen eine Eingabe.",minSelectError:"Bitte whlen Sie mindestens {0} Antwort(en) aus.",maxSelectError:"Bitte whlen Sie nicht mehr als {0} Antwort(en) aus.",numericMinMax:"'{0}' muss grer oder gleich {1} und kleiner oder gleich {2} sein",numericMin:"'{0}' muss grer oder gleich {1} sein",numericMax:"'{0}' muss kleiner oder gleich {1} sein",invalidEmail:"Bitte geben Sie eine gltige E-Mail-Adresse ein.",invalidExpression:"Der Ausdruck: {0} muss den Wert 'wahr' zurckgeben.",urlRequestError:"Ein Netzwerkdienst hat folgenden Fehler zurckgegeben '{0}'. {1}",urlGetChoicesError:"Eine Netzwerkdienst hat ungltige Daten zurckgegeben",exceedMaxSize:"Die Datei darf nicht grer als {0} sein.",otherRequiredError:"Bitte geben Sie einen Wert an.",uploadingFile:"Bitte warten Sie bis der Upload Ihrer Dateien abgeschlossen ist.",loadingFile:"Wird hochgeladen...",chooseFile:"Datei(en) auswhlen...",noFileChosen:"Keine Datei ausgewhlt",confirmDelete:"Wollen Sie den Eintrag lschen?",keyDuplicationError:"Dieser Wert muss einmalig sein.",addColumn:"Spalte hinzufgen",addRow:"Zeile hinzufgen",removeRow:"Entfernen",addPanel:"Neu hinzufgen",removePanel:"Entfernen",choices_Item:"Element",matrix_column:"Spalte",matrix_row:"Zeile",savingData:"Die Ergebnisse werden auf dem Server gespeichert...",savingDataError:"Es ist ein Fehler aufgetreten. Die Ergebnisse konnten nicht gespeichert werden.",savingDataSuccess:"Die Ergebnisse wurden gespeichert!",saveAgainButton:"Erneut absenden",timerMin:"Min.",timerSec:"Sek.",timerSpentAll:"Sie waren {0} auf dieser Seite und brauchten insgesamt {1}.",timerSpentPage:"Sie waren {0} auf dieser Seite.",timerSpentSurvey:"Sie haben insgesamt {0} gebraucht.",timerLimitAll:"Sie waren {0} von {1} auf dieser Seite und brauchten insgesamt {2} von {3}.",timerLimitPage:"Sie waren {0} von {1} auf dieser Seite.",timerLimitSurvey:"Sie haben insgesamt {0} von {1} gebraucht.",cleanCaption:"Alles lschen",clearCaption:"Auswahl entfernen",chooseFileCaption:"Datei auswhlen",removeFileCaption:"Datei lschen",booleanCheckedLabel:"Ja",booleanUncheckedLabel:"Nein",confirmRemoveFile:"Sind Sie sicher, dass Sie diese Datei lschen mchten: {0}?",confirmRemoveAllFiles:"Sind Sie sicher, dass Sie alle Dateien lschen mchten?",questionTitlePatternText:"Fragentitel"};r.surveyLocalization.locales.de=i,r.surveyLocalization.localeNames.de="deutsch"},"./src/localization/greek.ts":
/*!***********************************!*\
  !*** ./src/localization/greek.ts ***!
  \***********************************/
/*! exports provided: greekSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"greekSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"",pageNextText:"",completeText:"",previewText:"",editText:"",startSurveyText:"",otherItemText:" ( )",noneItemText:"",selectAllItemText:" ",progressText:" {0}  {1}",panelDynamicProgressText:" {0}  {1}",questionsProgressText:" {0} / {1} ",emptySurvey:"           .",completingSurvey:"      !",completingSurveyBefore:"          .",loadingSurvey:"     ...",optionsCaption:"...",value:"",requiredError:"   .",requiredErrorInPanel:"    .",requiredInAllRowsError:"       .",numericError:"     .",textMinLength:"   {0} .",textMaxLength:"   {0} .",textMinMaxLength:"   {0}    {1} .",minRowCountError:"   {0} .",minSelectError:"   {0} .",maxSelectError:"     {0} .",numericMinMax:" '{0}'          {1}       {2}",numericMin:" '{0}'         {1}",numericMax:" '{0}'         {1}",invalidEmail:"     e-mail.",invalidExpression:" : {0}     'true'.",urlRequestError:"    '{0}'. {1}",urlGetChoicesError:"        '/path'  ",exceedMaxSize:"       {0}.",otherRequiredError:"       ''.",uploadingFile:"   .       .",loadingFile:"...",chooseFile:"  ...",noFileChosen:"   ",confirmDelete:"    ;",keyDuplicationError:"      .",addColumn:" ",addRow:" ",removeRow:"",addPanel:" ",removePanel:"",choices_Item:"",matrix_column:"",matrix_row:"",savingData:"     ...",savingDataError:"         .",savingDataSuccess:"    !",saveAgainButton:" ",timerMin:"",timerSec:"",timerSpentAll:"  {0}      {1} .",timerSpentPage:"  {0}    .",timerSpentSurvey:"   {0}.",timerLimitAll:"  {0}  {1}      {2}  {3} .",timerLimitPage:"  {0}  {1}    .",timerLimitSurvey:"  {0}  {1} .",cleanCaption:"",clearCaption:"",chooseFileCaption:"  ",removeFileCaption:"   ",booleanCheckedLabel:"",booleanUncheckedLabel:"",confirmRemoveFile:"        : {0};",confirmRemoveAllFiles:"        ;",questionTitlePatternText:" "};r.surveyLocalization.locales.gr=i,r.surveyLocalization.localeNames.gr=""},"./src/localization/hebrew.ts":
/*!************************************!*\
  !*** ./src/localization/hebrew.ts ***!
  \************************************/
/*! exports provided: hebrewSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"hebrewSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"",pageNextText:"",completeText:"",previewText:" ",editText:"",startSurveyText:"",otherItemText:" ( )",noneItemText:" ",selectAllItemText:" ",progressText:" {1}  {0}",panelDynamicProgressText:" {0}  {1}",questionsProgressText:"  ",emptySurvey:" ",completingSurvey:"   !",completingSurveyBefore:"       .",loadingSurvey:" ...",optionsCaption:"...",value:"",requiredError:"   ",requiredErrorInPanel:"     .",requiredInAllRowsError:"     .",numericError:"   .",textMinLength:"  {0} .",textMaxLength:"  - {0} .",textMinMaxLength:"  - {0}  - {1} .",minRowCountError:"   {0} .",minSelectError:"  {0} .",maxSelectError:"  {0} .",numericMinMax:"'{0}'       {1},  - {2}   - {}}",numericMin:"'{0}'       {1}",numericMax:"'{0}'       {1}",invalidEmail:'  " .',invalidExpression:": {0}   ''.",urlRequestError:"    '{0}'. {1}",urlGetChoicesError:"      '' ",exceedMaxSize:"     {0}.",otherRequiredError:'    ""',uploadingFile:"  .     .",loadingFile:"...",chooseFile:" ...",noFileChosen:"  ",confirmDelete:"     ?",keyDuplicationError:"    .",addColumn:" ",addRow:" ",removeRow:"",addPanel:" ",removePanel:"",choices_Item:"",matrix_column:"",matrix_row:"",savingData:"   ...",savingDataError:"      .",savingDataSuccess:"  !",saveAgainButton:" ",timerMin:"",timerSec:"",timerSpentAll:" {0}     {1}.",timerSpentPage:" {0}  .",timerSpentSurvey:"    {0}.",timerLimitAll:" {0}  {1}   - {2}  {3}  .",timerLimitPage:" {0}  {1}  .",timerLimitSurvey:"    {0}  {1}.",cleanCaption:"",clearCaption:"",chooseFileCaption:" ",removeFileCaption:"  ",booleanCheckedLabel:"",booleanUncheckedLabel:"",confirmRemoveFile:"      : {0}?",confirmRemoveAllFiles:"       ?",questionTitlePatternText:" "};r.surveyLocalization.locales.he=i,r.surveyLocalization.localeNames.he=""},"./src/localization/hindi.ts":
/*!***********************************!*\
  !*** ./src/localization/hindi.ts ***!
  \***********************************/
/*! exports provided: hindiStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"hindiStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"",pageNextText:"",completeText:"",previewText:"",editText:"",startSurveyText:"",otherItemText:" ( )",noneItemTex:" ",selectAllItemText:"   ",progressText:" 1   0",panelDynamicProgressText:"  {1}  {0}",questionsProgressText:"{1}    {0}   ",emptySurvey:"        ",completingSurvey:"      ",completingSurveyBefore:"               ",loadingSurvey:"   .",optionsCaption:"",value:"",requiredError:"    ",requiredErrorInPanel:"        ",requiredInAllRowsError:"       ",numericError:"   ",textMinLength:"    {0}   ",textMaxLength:" {0}     ",textMinMaxLength:" {0}    {1}      ",minRowCountError:"    {0}   ",minSelectError:"    {0}    ",maxSelectError:" {0}     ",numericMinMax:"'{0}' {1}      {2}      ",numericMin:"'{0}' {1}      ",numericMax:"'{0}' {1}      ",invalidEmail:"      ",invalidExpression:": {0}  '  '  ",urlRequestError:"   '{0}' . {1}",urlGetChoicesError:"        ",exceedMaxSize:"   {0}         ''   ",otherRequiredError:"    ",uploadingFile:"               ",loadingFile:"",chooseFile:" ",noFileChosen:"    ",confirmDelete:"     ",keyDuplicationError:"    ",addColumn:" ",addRow:" ",removeRow:"",addPanel:" ",removePanel:"",choices_Item:"",matrix_column:"",matrix_row:"",savingData:"      ",savingDataError:"          ",savingDataSuccess:"    ",saveAgainButton:"  ",timerMin:"",timerSec:"",timerSpentAll:"    {0}      {1}",timerSpentPage:"    {0}   ",timerSpentSurvey:"  {0}   ",timerLimitAll:"    {1}  {0}   {3}  {2}   ",timerLimitPage:"    {1}  {0}   ",timerLimitSurvey:"  {1}  {0}   ",cleanCaption:"",clearCaption:"",chooseFileCaption:" ",removeFileCaption:"   ",booleanCheckedLabel:"",booleanUncheckedLabel:"",confirmRemoveFile:"           : {0}",confirmRemoveAllFiles:"           ",questionTitlePatternText:"  "};r.surveyLocalization.locales.hi=i,r.surveyLocalization.localeNames.hi="hindi"},"./src/localization/hungarian.ts":
/*!***************************************!*\
  !*** ./src/localization/hungarian.ts ***!
  \***************************************/
/*! exports provided: hungarianSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"hungarianSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"Vissza",pageNextText:"Tovbb",completeText:"Ksz",previewText:"Elnzet",editText:"Szerkeszts",startSurveyText:"Rajt",otherItemText:"Egyb (adja meg)",noneItemText:"Egyik sem",selectAllItemText:"Mindet kivlaszt",progressText:"{0}./{1} oldal",panelDynamicProgressText:"{0} / {1} rekord",questionsProgressText:"Vlaszolt krdsek: {0} / {1}",emptySurvey:"There is no visible page or question in the survey.",completingSurvey:"Ksznjk, hogy kitlttte felmrsnket!",completingSurveyBefore:"Mr kitlttte a felmrst.",loadingSurvey:"Felmrs betltse...",optionsCaption:"Vlasszon...",value:"rtk",requiredError:"Krjk, vlaszolja meg ezt a krdst!",requiredErrorInPanel:"Krjk, vlaszoljon legalbb egy krdsre.",requiredInAllRowsError:"Krjk adjon vlaszt minden sorban!",numericError:"Az rtk szm kell, hogy legyen!",textMinLength:"Adjon meg legalbb {0} karaktert!",textMaxLength:"Legfeljebb {0} karaktert adjon meg!",textMinMaxLength:"Adjon meg legalbb {0}, de legfeljebb {1} karaktert!",minRowCountError:"Tltsn ki minimum {0} sort!",minSelectError:"Vlasszon ki legalbb {0} lehetsget!",maxSelectError:"Ne vlasszon tbbet, mint {0} lehetsg!",numericMinMax:"'{0}' legyen nagyobb, vagy egyenl, mint {1} s kisebb, vagy egyenl, mint {2}!",numericMin:"'{0}' legyen legalbb {1}!",numericMax:"The '{0}' ne legyen nagyobb, mint {1}!",invalidEmail:"Adjon meg egy vals email cmet!",invalidExpression:"A kvetkez kifejezs: {0} vissza kell adnia az igaz rtket.",urlRequestError:"A lekrdezs hibval trt vissza: '{0}'. {1}",urlGetChoicesError:"A lekrdezs res adattal trt vissza, vagy a 'path' paramter helytelen.",exceedMaxSize:"A mret nem lehet nagyobb, mint {0}.",otherRequiredError:"Adja meg az egyb rtket!",uploadingFile:"Feltlts folyamatban. Vrjon pr msodpercet, majd prblja jra.",loadingFile:"Betlts...",chooseFile:"Fjlok kivlasztsa ...",noFileChosen:"Nincs kivlasztva fjl",confirmDelete:"Trli ezt a rekordot?",keyDuplicationError:"Az rtknek egyedinek kell lennie.",addColumn:"Oszlop hozzadsa",addRow:"Sor hozzadsa",removeRow:"Eltvolts",addPanel:"j hozzadsa",removePanel:"Eltvolts",choices_Item:"elem",matrix_column:"Oszlop",matrix_row:"Sor",savingData:"Eredmny mentse a szerverre...",savingDataError:"Egy hiba folytn nem tudtuk elmenteni az eredmnyt.",savingDataSuccess:"Eredmny sikeresen mentve!",saveAgainButton:"Prblja jra",timerMin:"min",timerSec:"sec",timerSpentAll:"n {0} sszeget klttt ezen az oldalon, s sszesen {1}.",timerSpentPage:"{0} sszeget klttt ezen az oldalon.",timerSpentSurvey:"sszesen {0} klttt.",timerLimitAll:"n {0} / {1} sszeget klttt ezen az oldalon, s sszesen {2} / {3}.",timerLimitPage:"n {0} / {1} sszeget klttt ezen az oldalon.",timerLimitSurvey:"sszesen {0} / {1} sszeget klttt el.",cleanCaption:"Tiszta",clearCaption:"Egyrtelm",chooseFileCaption:"Vlassz fjlt",removeFileCaption:"Tvoltsa el ezt a fjlt",booleanCheckedLabel:"Igen",booleanUncheckedLabel:"Nem",confirmRemoveFile:"Biztosan eltvoltja ezt a fjlt: {0}?",confirmRemoveAllFiles:"Biztosan el akarja tvoltani az sszes fjlt?",questionTitlePatternText:"Krds cme"};r.surveyLocalization.locales.hu=i,r.surveyLocalization.localeNames.hu="magyar"},"./src/localization/icelandic.ts":
/*!***************************************!*\
  !*** ./src/localization/icelandic.ts ***!
  \***************************************/
/*! exports provided: icelandicSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"icelandicSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"Tilbaka",pageNextText:"fram",completeText:"Loki",previewText:"Forskoa",editText:"Breyta",startSurveyText:"Byrjau",otherItemText:"Hinn (skring)",noneItemText:"Enginn",selectAllItemText:"Velja allt",progressText:"Sa {0} of {1}",panelDynamicProgressText:"Taka upp {0} af {1}",questionsProgressText:"Svara {0} / {1} spurningum",emptySurvey:"a er enginn sa ea spurningar  essari knnun.",completingSurvey:"Takk fyrir a fyllja t essa knnun!",completingSurveyBefore:"Skrr okkar sna a  hefur egar loki essari knnun.",loadingSurvey:"Knnunin er a hlaa...",optionsCaption:"Veldu...",value:"gildi",requiredError:"Vinsamlegast svari spurningunni.",requiredErrorInPanel:"Vinsamlegast svarau a minnsta kosti einni spurningu.",requiredInAllRowsError:"Vinsamlegast svari spurningum  llum rum.",numericError:"etta gildi verur a vera tala.",textMinLength:"a tti a vera minnst {0} tkn.",textMaxLength:"a tti a vera mest {0} tkn.",textMinMaxLength:"a tti a vera fleiri en {0} og frri en {1} tkn.",minRowCountError:"Vinsamlegast fylli r a minnsta kosti {0} rair.",minSelectError:"Vinsamlegast velji a minnsta kosti {0} mguleika.",maxSelectError:"Vinsamlegast velji ekki fleiri en {0} mguleika.",numericMinMax:"'{0}' tti a vera meira en ea jafnt og {1} minna en ea jafnt og {2}",numericMin:"{0}' tti a vera meira en ea jafnt og {1}",numericMax:"'{0}' tti a vera minna en ea jafnt og {1}",invalidEmail:"Vinsamlegast sli inn gilt netfang.",invalidExpression:"Tjningin: {0} tti a skila 'satt'.",urlRequestError:"Beininn skilai eftirfaranadi villu '{0}'. {1}",urlGetChoicesError:"Beininng skilai engum ggnum ea slinn var rng",exceedMaxSize:"Skrinn skal ekki vera strri en {0}.",otherRequiredError:"Vinamlegast fylli t hitt gildi.",uploadingFile:"Skrinn n var send. Vinsamlegast bi  nokkrar sekndur og reyni aftur.",loadingFile:"Hleur ...",chooseFile:"Veldu skrr ...",noFileChosen:"Engin skr valin",confirmDelete:"Viltu eya skrnni?",keyDuplicationError:"etta gildi tti a vera einstakt.",addColumn:"Bta vi dlki",addRow:"Bta vi r",removeRow:"Fjarlgja",addPanel:"Bta vi nju",removePanel:"Fjarlgu",choices_Item:"hlutur",matrix_column:"Dlkur",matrix_row:"R",savingData:"Niursturnar eru a spara  netjninum ... ",savingDataError:"Villa kom upp og vi gtum ekki vista niursturnar.",savingDataSuccess:"rangurinn var vistaur me gum rangri!",saveAgainButton:"Reyndu aftur",timerMin:"mn",timerSec:"sek",timerSpentAll:" hefur eytt {0}  essari su og {1} samtals.",timerSpentPage:" hefur eytt {0}  essari su.",timerSpentSurvey:" hefur eytt {0} samtals.",timerLimitAll:" hefur eytt {0} af {1}  essari su og {2} af {3} samtals.",timerLimitPage:" hefur eytt {0} af {1}  essari su.",timerLimitSurvey:" hefur eytt {0} af {1} samtals.",cleanCaption:"Hreint",clearCaption:"Hreinsa",chooseFileCaption:"Veldu skr",removeFileCaption:"Fjarlgu essa skr",booleanCheckedLabel:"J",booleanUncheckedLabel:"Nei",confirmRemoveFile:"Ertu viss um a  viljir fjarlgja essa skr: {0}?",confirmRemoveAllFiles:"Ertu viss um a  viljir fjarlgja allar skrr?",questionTitlePatternText:"Spurningartitill"};r.surveyLocalization.locales.is=i,r.surveyLocalization.localeNames.is="slenska"},"./src/localization/indonesian.ts":
/*!****************************************!*\
  !*** ./src/localization/indonesian.ts ***!
  \****************************************/
/*! exports provided: indonesianStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"indonesianStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"Sebelumnya",pageNextText:"Selanjutnya",completeText:"Selesai",previewText:"Pratinjau",editText:"Sunting",startSurveyText:"Mulai",otherItemText:"Lainnya (jelaskan)",noneItemText:"Tidak Ada",selectAllItemText:"Pilih Semua",progressText:"Halaman {0} dari {1}",panelDynamicProgressText:"Rekam {0} dari {1}",questionsProgressText:"Menjawab pertanyaan {0} / {1}",emptySurvey:"Tidak ada halaman atau pertanyaan dalam survei.",completingSurvey:"Terima kasih telah menyelesaikan survei!",completingSurveyBefore:"Catatan kami menunjukkan bahwa Anda telah menyelesaikan survei ini.",loadingSurvey:"Memuat survei...",optionsCaption:"Pilih...",value:"nilai",requiredError:"Silahkan jawab pertanyaan berikut.",requiredErrorInPanel:"Silahkan jawab setidaknya satu petanyaan.",requiredInAllRowsError:"Silahkan jawab pertanyaan pada semua baris.",numericError:"Nilai harus berupa angka.",textMinLength:"Silahkan masukkan setidaknya {0} karakter.",textMaxLength:"Silahkan masukkan kurang {0} karakter.",textMinMaxLength:"PSilahkan masukkan lebih dari {0} dan kurang dari {1} karakter.",minRowCountError:"Silahkan isi setidaknya {0} baris.",minSelectError:"Silahkan pilih setidaknya {0} varian.",maxSelectError:"Silahkan pilih tidak lebih dari {0} varian.",numericMinMax:"'{0}' harus sama dengan atau lebih dari {1} dan harus sama dengan atau kurang dari {2}",numericMin:"'{0}' harus sama dengan atau lebih dari {1}",numericMax:"'{0}' harus sama dengan atau kurang dari {1}",invalidEmail:"Silahkan masukkan e-mail yang benar.",invalidExpression:"Ekspresi: {0} harus mengembalikan 'benar'.",urlRequestError:"Permintaan mengembalikan kesalahan '{0}'. {1}",urlGetChoicesError:"Permintaan mengembalikan data kosong atau properti 'path' salah.",exceedMaxSize:"Ukuran berkas tidak boleh melebihi {0}.",otherRequiredError:"Silahkan masukkan nilai lainnnya.",uploadingFile:"Berkas Anda sedang diunggah. Silahkan tunggu beberapa saat atau coba lagi.",loadingFile:"Memuat...",chooseFile:"Pilih berkas...",noFileChosen:"Tidak ada file yang dipilih",confirmDelete:"Apakah Anda ingin menghapus catatan?",keyDuplicationError:"Nilai harus unik.",addColumn:"Tambah kolom",addRow:"Tambah baris",removeRow:"Hapus",addPanel:"Tambah baru",removePanel:"Hapus",choices_Item:"item",matrix_column:"Kolom",matrix_row:"Baris",savingData:"Hasil sedang disimpan pada server...",savingDataError:"Kesalahan terjadi dan kami tidak dapat menyimpan hasil.",savingDataSuccess:"Hasil telah sukses disimpan!",saveAgainButton:"Coba lagi",timerMin:"menit",timerSec:"detik",timerSpentAll:"Anda telah menghabiskan {0} pada halaman ini dan {1} secara keseluruhan.",timerSpentPage:"YAnda telah menghabiskan {0} pada halaman ini.",timerSpentSurvey:"Anda telah menghabiskan {0} secara keseluruhan.",timerLimitAll:"Anda telah menghabiskan {0} dari {1} pada halaman ini dan {2} dari {3} secara keseluruhan.",timerLimitPage:"Anda telah menghabiskan {0} dari {1} pada halaman ini.",timerLimitSurvey:"Anda telah menghabiskan {0} dari {1} secara keseluruhan.",cleanCaption:"Bersihkan",clearCaption:"Bersihkan",chooseFileCaption:"Pilih File",removeFileCaption:"Hapus berkas ini",booleanCheckedLabel:"Iya",booleanUncheckedLabel:"Tidak",confirmRemoveFile:"Anda yakin ingin menghapus file ini: {0}?",confirmRemoveAllFiles:"Anda yakin ingin menghapus semua file?",questionTitlePatternText:"Judul pertanyaan"};r.surveyLocalization.locales.id=i,r.surveyLocalization.localeNames.id="bahasa Indonesia"},"./src/localization/italian.ts":
/*!*************************************!*\
  !*** ./src/localization/italian.ts ***!
  \*************************************/
/*! exports provided: italianSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"italianSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"Precedente",pageNextText:"Successivo",completeText:"Salva",previewText:"Anteprima",editText:"Modifica",startSurveyText:"Inizio",otherItemText:"Altro (descrivi)",noneItemText:"Nessuno",selectAllItemText:"Seleziona tutti",progressText:"Pagina {0} di {1}",panelDynamicProgressText:"Record di {0} di {1}",questionsProgressText:"Risposte a {0}/{1} domande",emptySurvey:"Non ci sono pagine o domande visibili nel questionario.",completingSurvey:"Grazie per aver completato il questionario!",completingSurveyBefore:"I nostri records mostrano che hai gi completato questo questionario.",loadingSurvey:"Caricamento del questionario in corso...",optionsCaption:"Scegli...",value:"valore",requiredError:"Campo obbligatorio",requiredErrorInPanel:"Per Favore, rispondi ad almeno una domanda.",requiredInAllRowsError:"Completare tutte le righe",numericError:"Il valore deve essere numerico",textMinLength:"Inserire almeno {0} caratteri",textMaxLength:"Lunghezza massima consentita {0} caratteri",textMinMaxLength:"Inserire una stringa con minimo {0} e massimo {1} caratteri",minRowCountError:"Completare almeno {0} righe.",minSelectError:"Selezionare almeno {0} varianti.",maxSelectError:"Selezionare massimo {0} varianti.",numericMinMax:"'{0}' deve essere uguale o superiore a {1} e uguale o inferiore a {2}",numericMin:"'{0}' deve essere uguale o superiore a {1}",numericMax:"'{0}' deve essere uguale o inferiore a {1}",invalidEmail:"Inserire indirizzo mail valido",invalidExpression:"L'espressione: {0} dovrebbe tornare 'vero'.",urlRequestError:"La richiesta ha risposto con un errore '{0}'. {1}",urlGetChoicesError:"La richiesta ha risposto null oppure il percorso non  corretto",exceedMaxSize:"Il file non pu eccedere {0}",otherRequiredError:"Inserire il valore 'altro'",uploadingFile:"File in caricamento. Attendi alcuni secondi e riprova",loadingFile:"Caricamento...",chooseFile:"Selezionare file(s)...",noFileChosen:"Nessun file selezionato",confirmDelete:"Sei sicuro di voler elminare il record?",keyDuplicationError:"Questo valore deve essere univoco.",addColumn:"Aggiungi colonna",addRow:"Aggiungi riga",removeRow:"Rimuovi riga",addPanel:"Aggiungi riga",removePanel:"Elimina",choices_Item:"Elemento",matrix_column:"Colonna",matrix_row:"Riga",savingData:"Salvataggio dati sul server...",savingDataError:"Si  verificato un errore e non  stato possibile salvare i risultati.",savingDataSuccess:"I risultati sono stati salvati con successo!",saveAgainButton:"Riprova",timerMin:"min",timerSec:"sec",timerSpentAll:"Hai impiegato {0} su questa pagina e {1} in totale.",timerSpentPage:"Hai impiegato {0} su questa pagina.",timerSpentSurvey:"Hai impiegato {0} in totale.",timerLimitAll:"Hai impiegato {0} di {1} su questa pagina e {2} di {3} in totale.",timerLimitPage:"Hai impiegato {0} di {1} su questa pagina.",timerLimitSurvey:"Hai impiegato {0} di {1} in totale.",cleanCaption:"Pulisci",clearCaption:"Cancella",chooseFileCaption:"Scegliere il file",removeFileCaption:"Rimuovere questo file",booleanCheckedLabel:"S",booleanUncheckedLabel:"No",confirmRemoveFile:"Sei sicuro di voler elminare questo file: {0}?",confirmRemoveAllFiles:"Sei sicuro di voler elminare tutti i files?",questionTitlePatternText:"Titolo della domanda"};r.surveyLocalization.locales.it=i,r.surveyLocalization.localeNames.it="italiano"},"./src/localization/japanese.ts":
/*!**************************************!*\
  !*** ./src/localization/japanese.ts ***!
  \**************************************/
/*! exports provided: japaneseSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"japaneseSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"",pageNextText:"",completeText:"",previewText:"",editText:"",startSurveyText:"",otherItemText:"",noneItemText:"",selectAllItemText:"",progressText:"{0}/{1}",panelDynamicProgressText:"{1}{0}",questionsProgressText:"{0}/{1}",emptySurvey:"",completingSurvey:"",completingSurveyBefore:"",loadingSurvey:"",optionsCaption:"",value:"",requiredError:"",requiredErrorInPanel:"1",requiredInAllRowsError:"",numericError:"",textMinLength:"{0} ",textMaxLength:"{0}",textMinMaxLength:"{0}{1}",minRowCountError:"{0}",minSelectError:"{0}",maxSelectError:"{0}",numericMinMax:"{0}{1}{2}",numericMin:"'{0}' {1}",numericMax:"'{0}' {1}",invalidEmail:"",invalidExpression:" {0}'true'",urlRequestError:" '{0}' {1}",urlGetChoicesError:"'path' ",exceedMaxSize:"{0}",otherRequiredError:"",uploadingFile:"",loadingFile:"",chooseFile:"",noFileChosen:"",confirmDelete:"",keyDuplicationError:"",addColumn:"",addRow:"",removeRow:"",addPanel:"",removePanel:"",choices_Item:"",matrix_column:"",matrix_row:"",savingData:"...",savingDataError:"",savingDataSuccess:"",saveAgainButton:"",timerMin:"",timerSec:"",timerSpentAll:"{0}{1}",timerSpentPage:"{0}",timerSpentSurvey:"{0}",timerLimitAll:"{1}{0}{3}{2}",timerLimitPage:"{1}{0}",timerLimitSurvey:"{1}{0}",cleanCaption:"",clearCaption:"",chooseFileCaption:"",removeFileCaption:"",booleanCheckedLabel:"",booleanUncheckedLabel:"",confirmRemoveFile:"{0}?",confirmRemoveAllFiles:"",questionTitlePatternText:""};r.surveyLocalization.locales.ja=i,r.surveyLocalization.localeNames.ja=""},"./src/localization/kazakh.ts":
/*!************************************!*\
  !*** ./src/localization/kazakh.ts ***!
  \************************************/
/*! exports provided: kazakhStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"kazakhStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"",pageNextText:"",completeText:"",previewText:"  ",editText:"",startSurveyText:"",otherItemText:" (, )",noneItemText:"",selectAllItemText:" ",progressText:"{0}  {1}  ",panelDynamicProgressText:"{0}  {1} ",questionsProgressText:"{0}/{1}  ",emptySurvey:"    .",completingSurvey:"   !",completingSurveyBefore:"    .",loadingSurvey:" ...",optionsCaption:"...",value:"",requiredError:",   .",requiredErrorInPanel:",      .",requiredInAllRowsError:",     .",numericError:"    .",textMinLength:", {0}    .",textMaxLength:", {0}    .",textMinMaxLength:", {0}   {1}   .",minRowCountError:", {0}     .",minSelectError:",   {0}  .",maxSelectError:", {0}   .",numericMinMax:"'{0}' {1}     {2}     ",numericMin:"'{0}' {1}     ",numericMax:"'{0}' {1}     ",invalidEmail:",    .",invalidExpression:"{0}   'true'  .",urlRequestError:"  '{0}'. {1}",urlGetChoicesError:"     'path'    ",exceedMaxSize:"  {0}  .",otherRequiredError:",    ",uploadingFile:"   .   ,   .",loadingFile:"...",chooseFile:" ...",noFileChosen:" ",confirmDelete:"    ?",keyDuplicationError:"    .",addColumn:" ",addRow:" ",removeRow:"",addPanel:" ",removePanel:"",choices_Item:"",matrix_column:"",matrix_row:"",savingData:"  ...",savingDataError:" ,  .",savingDataSuccess:"  !",saveAgainButton:"  ",timerMin:"",timerSec:"",timerSpentAll:"   {0}    {1}.",timerSpentPage:"   {0} .",timerSpentSurvey:"   {0} .",timerLimitAll:"   {0}  {1}   {2}  {3}   .",timerLimitPage:"   {0}  {1} .",timerLimitSurvey:"    {0}  {1}  ",cleanCaption:"",clearCaption:"",chooseFileCaption:" ",removeFileCaption:" ",booleanCheckedLabel:"",booleanUncheckedLabel:"",confirmRemoveFile:"     : {0}?",confirmRemoveAllFiles:"     ?",questionTitlePatternText:" "};r.surveyLocalization.locales.kk=i,r.surveyLocalization.localeNames.kk="Kazakh"},"./src/localization/korean.ts":
/*!************************************!*\
  !*** ./src/localization/korean.ts ***!
  \************************************/
/*! exports provided: koreanStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"koreanStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"",pageNextText:"",completeText:"",previewText:"",editText:"",startSurveyText:"",otherItemText:"()",noneItemText:"",selectAllItemText:" ",progressText:" {1}  {0}",panelDynamicProgressText:"{0} / {1} ",questionsProgressText:"{0} / {1}    ",emptySurvey:"    ",completingSurvey:"    !",completingSurveyBefore:"     .",loadingSurvey:" ...",optionsCaption:"...",value:"",requiredError:" .",requiredErrorInPanel:"   .",requiredInAllRowsError:"    .",numericError:"  .",textMinLength:"   {0} .",textMaxLength:"  {0}    .",textMinMaxLength:"  {0} - {1}  .",minRowCountError:" {0}  ",minSelectError:" {0}  .",maxSelectError:" {0}  .",numericMinMax:"'{0}' {1}   {2}  .",numericMin:"'{0}' {1}  .",numericMax:"'{0}' {1}  .",invalidEmail:"   .",invalidExpression:": {0} '' .",urlRequestError:"'{0}'  . {1}",urlGetChoicesError:"     .",exceedMaxSize:"  {0}    .",otherRequiredError:"  .",uploadingFile:"  .    .",loadingFile:" ...",chooseFile:" ...",noFileChosen:"  ",confirmDelete:" ?",keyDuplicationError:"   .",addColumn:" ",addRow:" ",removeRow:"",addPanel:" ",removePanel:"",choices_Item:"",matrix_column:"",matrix_row:"",savingData:"   ...",savingDataError:"     .",savingDataSuccess:"  !",saveAgainButton:" ",timerMin:"",timerSec:"",timerSpentAll:"  {0}   {1} .",timerSpentPage:"  {0] ",timerSpentSurvey:" {0} .",timerLimitAll:"  {0}/{1}   {2}/{3} .",timerLimitPage:"  {0}/{1} .",timerLimitSurvey:" {0}/{1} .",cleanCaption:"",clearCaption:"",chooseFileCaption:" ",removeFileCaption:"  ",booleanCheckedLabel:"",booleanUncheckedLabel:"",confirmRemoveFile:"{0}   ?",confirmRemoveAllFiles:"   ?",questionTitlePatternText:" "};r.surveyLocalization.locales.ko=i,r.surveyLocalization.localeNames.ko=""},"./src/localization/latvian.ts":
/*!*************************************!*\
  !*** ./src/localization/latvian.ts ***!
  \*************************************/
/*! exports provided: latvianSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"latvianSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"Atpaka",pageNextText:"Tlk",completeText:"Pabeigt",previewText:"Priekskatjums",editText:"Redit",startSurveyText:"Skt",otherItemText:"Cits (ldzu, aprakstiet!)",noneItemText:"Nav",selectAllItemText:"Izvlties visus",progressText:"Lappuse {0} no {1}",panelDynamicProgressText:"Ierakstt {0} no {1}",questionsProgressText:"Atbildja uz jautjumiem {0} / {1}",emptySurvey:"Nav neviena jautjuma.",completingSurvey:"Pateicamies Jums par anketas aizpildanu!",completingSurveyBefore:"Msu ieraksti liecina, ka js jau esat aizpildjis o aptauju.",loadingSurvey:"Ielde no servera...",optionsCaption:"Izvlties...",value:"value",requiredError:"Ldzu, atbildiet uz jautjumu!",requiredErrorInPanel:"Ldzu, atbildiet uz vismaz vienu jautjumu.",requiredInAllRowsError:"Ldzu, atbildiet uz jautjumiem viss rinds.",numericError:"Atbildei ir jbt skaitlim.",textMinLength:"Ldzu, ievadiet vismaz {0} simbolus.",textMaxLength:"Ldzu, ievadiet mazk nek {0} rakstzmes.",textMinMaxLength:"Ldzu, ievadiet vairk nek {0} rakstzmes un mazk nek {1} rakstzmes.",minRowCountError:"Ldzu, aizpildiet vismaz {0} rindas.",minSelectError:"Ldzu, izvlieties vismaz {0} variantu.",maxSelectError:"Ldzu, izvlieties ne vairak par {0} variantiem.",numericMinMax:"'{0}' jbt viendam vai lielkam nek {1}, un viendam vai mazkam, nek {2}",numericMin:"'{0}' jbt viendam vai lielkam {1}",numericMax:"'{0}' jbt viendam vai lielkam {1}",invalidEmail:"Ldzu, ievadiet patiesu e-pasta adresi!",invalidExpression:"Izteicienam: {0} jatgrie true.",urlRequestError:"Pieprasjum tika atgriezta kda {0}. {1}",urlGetChoicesError:"Pieprasjums atgrieza tukus datus vai rekvizts path ir nepareizs",exceedMaxSize:"Faila lielums nedrkst prsniegt {0}.",otherRequiredError:"Ldzu, ievadiet datus lauk 'Cits'",uploadingFile:"Jsu fails tiek augupieldts. Ldzu, uzgaidiet vairkas sekundes un miniet vlreiz.",loadingFile:"Notiek ielde ...",chooseFile:"Izvlieties failus ...",noFileChosen:"Nav izvlts neviens fails",confirmDelete:"Vai vlaties izdzst ierakstu?",keyDuplicationError:"ai vrtbai jbt uniklai.",addColumn:"Pievienot kolonnu",addRow:"Pievienot rindu",removeRow:"Noemt",addPanel:"Pievieno jaunu",removePanel:"Noemt",choices_Item:"lieta",matrix_column:"Sleja",matrix_row:"Rinda",savingData:"Rezultti tiek saglabti server ...",savingDataError:"Rads kda, un ms nevarjm saglabt rezulttus.",savingDataSuccess:"Rezultti tika veiksmgi saglabti!",saveAgainButton:"Mini vlreiz",timerMin:"min",timerSec:"sek",timerSpentAll:"aj lap esat iztrjis {0} un kop {1}.",timerSpentPage:"aj lap esat iztrjis {0}.",timerSpentSurvey:"Kop esat iztrjis {0}.",timerLimitAll:"aj lap esat iztrjis {0} no {1} un kop {2} no {3}.",timerLimitPage:"aj lap esat iztrjis {0} no {1}.",timerLimitSurvey:"Kop esat iztrjis {0} no {1}.",cleanCaption:"Trs",clearCaption:"Skaidrs",chooseFileCaption:"Izvlties failu",removeFileCaption:"Noemiet o failu",booleanCheckedLabel:"J",booleanUncheckedLabel:"N",confirmRemoveFile:"Vai tiem vlaties noemt o failu: {0}?",confirmRemoveAllFiles:"Vai tiem vlaties noemt visus failus?",questionTitlePatternText:"Jautjuma nosaukums"};r.surveyLocalization.locales.lv=i,r.surveyLocalization.localeNames.lv="latvieu"},"./src/localization/lithuanian.ts":
/*!****************************************!*\
  !*** ./src/localization/lithuanian.ts ***!
  \****************************************/
/*! exports provided: lithuaniaSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"lithuaniaSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"Atgal",pageNextText:"Toliau",completeText:"Baigti",previewText:"Perira",editText:"Redaguoti",startSurveyText:"Pradti",otherItemText:"Kita (vesti)",noneItemText:"Nra",selectAllItemText:"Pasirinkti visus",progressText:"Puslapis {0} i {1}",panelDynamicProgressText:"rayti {0} i {1}",questionsProgressText:"Atsak  {0} / {1} klausimus",emptySurvey:"Apklausoje nra matomo puslapio ar klausimo.",completingSurvey:"Dkojame u dalyvavim apklausoje!",completingSurveyBefore:"Ms raai rodo, kad jau atlikote i apklaus.",loadingSurvey:"Praome palaukti...",optionsCaption:"Pasirinkti...",value:"reikm",requiredError:"Btina atsakyti   klausim.",requiredErrorInPanel:"Btina atsakyti bent  vien klausim.",requiredInAllRowsError:"Praome atsakyti  klausimus visose eilutse.",numericError:"Turi bti skaiiai.",textMinLength:"Praome suvesti bent {0} simbolius.",textMaxLength:"Praome suvesti maiau nei {0} simboli.",textMinMaxLength:"Praome suvesti daugiau nei {0} ir maiau nei {1} simboli.",minRowCountError:"Praome suvesti ne maiau nei {0} eilui.",minSelectError:"Praome pasirinkti bent {0} variant.",maxSelectError:"Pasirinkite ne daugiau kaip {0} variantus.",numericMinMax:"'{0}' turi bti lygus arba didesnis nei {1} ir lygus arba maesnis nei {2}",numericMin:"'{0}' turt bti lygus arba didesnis nei {1}",numericMax:"'{0}' turt bti lygus ar maesnis u {1}",invalidEmail:"Praome vesti galiojant elektroninio pato adres.",invalidExpression:"Reikm: {0} turi grinti 'true'.",urlRequestError:"Uklausa grino klaid'{0}'. {1}",urlGetChoicesError:"Uklausa grino tuius duomenis arba 'path' savyb yra neteisinga",exceedMaxSize:"Failo dydis neturi viryti {0}.",otherRequiredError:"veskite kit reikm.",uploadingFile:"Js failas yra keliamas. Palaukite kelet sekundi ir bandykite dar kart.",loadingFile:"Praome palaukti...",chooseFile:"Pasirinkti fail(us)...",noFileChosen:"Nepasirinktas joks failas",confirmDelete:"Ar norite itrinti ra?",keyDuplicationError:"i reikm turt bti unikali.",addColumn:"Pridti stulpel",addRow:"Pridti eilut",removeRow:"Itrinti",addPanel:"Pridti nauj",removePanel:"Itrinti",choices_Item:"elementas",matrix_column:"Stulpelis",matrix_row:"Eilut",savingData:"Rezultatai saugomi serveryje...",savingDataError:"vyko klaida ir mes negaljome isaugoti rezultat.",savingDataSuccess:"Rezultatai buvo isaugoti skmingai!",saveAgainButton:"Bandyti dar kart",timerMin:"min",timerSec:"sek",timerSpentAll:"Praleidote {0} iame puslapyje ir {1} i viso.",timerSpentPage:"Praleidote {0} iame puslapyje.",timerSpentSurvey:"Praleidote {0} i viso.",timerLimitAll:"Praleidote {0} i {1} iame puslapyje ir {2} i {3} i viso.",timerLimitPage:"Praleidote {0} i {1} iame puslapyje.",timerLimitSurvey:"Praleidote {0} i {1} i viso.",cleanCaption:"Ivalyti",clearCaption:"Valyti",chooseFileCaption:"Pasirinkti fail",removeFileCaption:"Itrinti  fail",booleanCheckedLabel:"Taip",booleanUncheckedLabel:"Ne",confirmRemoveFile:"Ar tikrai norite paalinti  fail: {0}?",confirmRemoveAllFiles:"Ar tikrai norite paalinti visus failus?",questionTitlePatternText:"Klausimo pavadinimas"};r.surveyLocalization.locales.lt=i,r.surveyLocalization.localeNames.lt="lietuvi"},"./src/localization/macedonian.ts":
/*!****************************************!*\
  !*** ./src/localization/macedonian.ts ***!
  \****************************************/
/*! exports provided: macedonianSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"macedonianSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"",pageNextText:"",completeText:"",previewText:"",editText:"",startSurveyText:"",otherItemText:" ()",noneItemText:"",selectAllItemText:" ",progressText:" {0}  {1}",panelDynamicProgressText:" {0}  {1}",questionsProgressText:"  {0} / {1} ",emptySurvey:"      .",completingSurvey:"     !",completingSurveyBefore:"         .",loadingSurvey:"   ...",optionsCaption:" ...",value:"",requiredError:" ,   .",requiredErrorInPanel:" ,     .",requiredInAllRowsError:" ,      .",numericError:"    .",minError:"       {0}",maxError:"       {0}",textMinLength:"  {0} /.",textMaxLength:"    {0} /.",textMinMaxLength:"  {0}     {1} .",minRowCountError:"  {0} ().",minSelectError:"    {0} ().",maxSelectError:"    {0} ().",numericMinMax:"'{0}'     {1}   {2}",numericMin:"'{0}'     {1}",numericMax:"'{0}'     {1}",invalidEmail:"    - .",invalidExpression:": {0}     'true'.",urlRequestError:"   '{0}'. {1} ",urlGetChoicesError:"      'path'  ",exceedMaxSize:"       {0}.",otherRequiredError:"   .",uploadingFile:"   .         .",loadingFile:"  ...",chooseFile:"  () ...",noFileChosen:"   ",confirmDelete:"     ?",keyDuplicationError:"     .",addColumn:" ",addRow:" ",removeRow:"",emptyRowsText:" .",addPanel:" ",removePanel:"",choices_Item:"",matrix_column:"",matrix_row:"",savingData:"     ...",savingDataError:"        .",savingDataSuccess:"   !",saveAgainButton:"  ",timerMin:"",timerSec:"",timerSpentAll:" {0}      {1}.",timerSpentPage:" {0}   .",timerSpentSurvey:"   {0}.",timerLimitAll:" {0}  {1}     {2}  {3} .",timerLimitPage:" {0}  {1}   .",timerLimitSurvey:"   {0}  {1}.",cleanCaption:"",clearCaption:" ",chooseFileCaption:" ",removeFileCaption:"   ",booleanCheckedLabel:"",booleanUncheckedLabel:"",confirmRemoveFile:"         : {0}?",confirmRemoveAllFiles:"         ?",questionTitlePatternText:"  ",modalCancelButtonText:"",modalApplyButtonText:""};r.surveyLocalization.locales.mk=i,r.surveyLocalization.localeNames.mk=""},"./src/localization/norwegian.ts":
/*!***************************************!*\
  !*** ./src/localization/norwegian.ts ***!
  \***************************************/
/*! exports provided: norwegianSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"norwegianSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"Forrige",pageNextText:"Neste",completeText:"Fullfr",previewText:"Forhndsvisning",editText:"Redigere",startSurveyText:"Start",otherItemText:"Annet (beskriv)",noneItemText:"Ingen",selectAllItemText:"Velg alle",progressText:"Side {0} av {1}",panelDynamicProgressText:"Ta opp {0} av {1}",questionsProgressText:"Besvarte {0} / {1} sprsml",emptySurvey:"Det er ingen synlig side eller sprsml i underskelsen.",completingSurvey:"Takk for at du fullfrte underskelsen!",completingSurveyBefore:"Vre data viser at du allerede har gjennomfrt denne underskelsen.",loadingSurvey:"Underskelsen laster...",optionsCaption:"Velg...",value:"verdi",requiredError:"Vennligst svar p sprsmlet.",requiredErrorInPanel:"Vennligst svar p minst ett sprsml.",requiredInAllRowsError:"Vennligst svar p sprsml i alle rader.",numericError:"Verdien skal vre numerisk.",textMinLength:"Vennligst skriv inn minst {0} tegn.",textMaxLength:"Vennligst skriv inn mindre enn {0} tegn.",textMinMaxLength:"Vennligst skriv inn mer enn {0} og mindre enn {1} tegn.",minRowCountError:"Vennligst fyll inn minst {0} rader.",minSelectError:"Vennligst velg minst {0} varianter.",maxSelectError:"Vennligst ikke velg mer enn {0} varianter.",numericMinMax:"'{0}' br vre lik eller mer enn {1} og lik eller mindre enn {2}",numericMin:"'{0}' br vre lik eller mer enn {1}",numericMax:"'{0}' br vre lik eller mindre enn {1}",invalidEmail:"Vennligst skriv inn en gyldig e-post adresse.",invalidExpression:"Uttrykket: {0} skal returnere 'sant'.",urlRequestError:"Foresprselen returnerte feilen '{0}'. {1}",urlGetChoicesError:"Foresprselen returnerte tomme data, eller 'sti' -egenskapen er feil",exceedMaxSize:"Filstrrelsen br ikke overstige {0}.",otherRequiredError:"Vennligst skriv inn den andre verdien.",uploadingFile:"Filen din lastes opp. Vennligst vent noen sekunder og prv igjen.",loadingFile:"Laster inn ...",chooseFile:"Velg fil (er) ...",noFileChosen:"Ingen fil valgt",confirmDelete:"nsker du  slette posten?",keyDuplicationError:"Denne verdien skal vre unik.",addColumn:"Legg til kolonne",addRow:"Legg til rad",removeRow:"Fjern",addPanel:"Legg til ny",removePanel:"Fjerne",choices_Item:"element",matrix_column:"Kolonne",matrix_row:"Rad",savingData:"Resultatene lagres p serveren ...",savingDataError:"Det oppsto en feil, og vi kunne ikke lagre resultatene.",savingDataSuccess:"Resultatene ble lagret!",saveAgainButton:"Prv igjen",timerMin:"min",timerSec:"sek",timerSpentAll:"Du har tilbrakt {0} p denne siden og {1} totalt.",timerSpentPage:"Du har tilbrakt {0} p denne siden.",timerSpentSurvey:"Du har tilbrakt {0} totalt.",timerLimitAll:"Du har tilbrakt {0} av {1} p denne siden og totalt {2} av {3}.",timerLimitPage:"Du har tilbrakt {0} av {1} p denne siden.",timerLimitSurvey:"Du har tilbrakt {0} av {1} totalt.",cleanCaption:"Rens",clearCaption:"Klar",chooseFileCaption:"Velg Fil",removeFileCaption:"Fjern denne filen",booleanCheckedLabel:"Ja",booleanUncheckedLabel:"Nei",confirmRemoveFile:"Er du sikker p at du vil fjerne denne filen: {0}?",confirmRemoveAllFiles:"Er du sikker p at du vil fjerne alle filene?",questionTitlePatternText:"Sprsmlstittel"};r.surveyLocalization.locales.no=i,r.surveyLocalization.localeNames.no="norsk"},"./src/localization/persian.ts":
/*!*************************************!*\
  !*** ./src/localization/persian.ts ***!
  \*************************************/
/*! exports provided: persianSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"persianSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"",pageNextText:"",completeText:"",previewText:" ",editText:"",startSurveyText:"",otherItemText:"()",noneItemText:"",selectAllItemText:" ",progressText:" {0}  {1}",panelDynamicProgressText:" {0}  {1}",questionsProgressText:"  {0}/{1} ",emptySurvey:"         .",completingSurvey:"      ",completingSurveyBefore:"           .",loadingSurvey:"  ",optionsCaption:" ...",value:"",requiredError:"    ",requiredErrorInPanel:"      .",requiredInAllRowsError:"      .",numericError:"   ",textMinLength:"   {0}   ",textMaxLength:"    {0}   .",textMinMaxLength:"    {0}     {1}   .",minRowCountError:"  {0}   .",minSelectError:" {0}  .",maxSelectError:"    {0}  .",numericMinMax:"'{0}'   {1}  {2} ",numericMin:"'{0}'   {1} ",numericMax:"'{0}'     {1} ",invalidEmail:"    ",invalidExpression:": {0}   'true' .",urlRequestError:"    : '{0}'. {1}",urlGetChoicesError:"         ",exceedMaxSize:"   : {0}",otherRequiredError:" ''   ",uploadingFile:"    .   .",loadingFile:"...",chooseFile:" ()...",noFileChosen:"   ",confirmDelete:"      ",keyDuplicationError:"     ",addColumn:" ",addRow:" ",removeRow:"",addPanel:"",removePanel:"",choices_Item:"",matrix_column:"",matrix_row:"",savingData:"       ",savingDataError:"       ",savingDataSuccess:"    ",saveAgainButton:"  ",timerMin:"",timerSec:"",timerSpentAll:"  {0}      {1}      .",timerSpentPage:"  {0}       .",timerSpentSurvey:"  {0}      .",timerLimitAll:"  {0}  {1}      {2}  {3}      .",timerLimitPage:"  {0}  {1}       .",timerLimitSurvey:"  {0}  {1}      .",cleanCaption:"",clearCaption:" ",chooseFileCaption:" ",removeFileCaption:"  ",booleanCheckedLabel:"",booleanUncheckedLabel:"",confirmRemoveFile:"      : {0}?",confirmRemoveAllFiles:"       ?",questionTitlePatternText:" "};r.surveyLocalization.locales.fa=i,r.surveyLocalization.localeNames.fa=""},"./src/localization/polish.ts":
/*!************************************!*\
  !*** ./src/localization/polish.ts ***!
  \************************************/
/*! exports provided: polishSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"polishSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"Wstecz",pageNextText:"Dalej",completeText:"Gotowe",previewText:"Premiera",editText:"Edycja",startSurveyText:"Start",otherItemText:"Inna odpowied (wpisz)",noneItemText:"Brak",selectAllItemText:"Wybierz wszystkie",progressText:"Strona {0} z {1}",panelDynamicProgressText:"Zapis {0} z {1}",questionsProgressText:"Odpowiedzi na {0}/{1} pytania",emptySurvey:"Nie ma widocznych pyta.",completingSurvey:"Dzikujemy za wypenienie ankiety!",completingSurveyBefore:"Z naszych zapisw wynika, e wypenie ju t ankiet.",loadingSurvey:"Trwa wczytywanie ankiety...",optionsCaption:"Wybierz...",value:"Warto",requiredError:"Prosz odpowiedzie na to pytanie.",requiredErrorInPanel:"Prosz odpowiedzie na co najmniej jedno pytanie.",requiredInAllRowsError:"Prosz odpowiedzie na wszystkie pytania.",numericError:"W tym polu mona wpisa tylko liczby.",textMinLength:"Prosz wpisa co najmniej {0} znakw.",textMaxLength:"Prosz wpisa mniej ni {0} znakw.",textMinMaxLength:"Prosz wpisa wicej ni {0} i mniej ni {1} znakw.",minRowCountError:"Prosz uzupeni przynajmniej {0} wierszy.",minSelectError:"Prosz wybra co najmniej {0} pozycji.",maxSelectError:"Prosz wybra nie wicej ni {0} pozycji.",numericMinMax:"Odpowied '{0}' powinna by wiksza lub rwna {1} oraz mniejsza lub rwna {2}",numericMin:"Odpowied '{0}' powinna by wiksza lub rwna {1}",numericMax:"Odpowied '{0}' powinna by mniejsza lub rwna {1}",invalidEmail:"Prosz poda prawidowy adres email.",invalidExpression:"Wyraenie: {0} powinno wraca 'prawdziwe'.",urlRequestError:"danie zwrcio bd '{0}'. {1}",urlGetChoicesError:"danie nie zwrcio danych albo cieka jest nieprawidowa",exceedMaxSize:"Rozmiar przesanego pliku nie moe przekracza {0}.",otherRequiredError:"Prosz poda inn odpowied.",uploadingFile:"Trwa przenoszenie Twojego pliku, prosz sprbowa ponownie za kilka sekund.",loadingFile:"adowanie...",chooseFile:"Wybierz plik(i)...",noFileChosen:"Nie wybrano adnego pliku",confirmDelete:"Chcesz skasowa nagranie?",keyDuplicationError:"Ta warto powinna by wyjtkowa.",addColumn:"Dodaj kolumn",addRow:"Dodaj wiersz",removeRow:"Usu",addPanel:"Dodaj panel",removePanel:"Usu",choices_Item:"element",matrix_column:"Kolumna",matrix_row:"Wiersz",savingData:"Zapisuj wyniki ankiety na serwerze...",savingDataError:"Wystpi bd i wyniki nie mogy zosta zapisane.",savingDataSuccess:"Wyniki zostay poprawnie zapisane!",saveAgainButton:"Sprbuj ponownie",timerMin:"min",timerSec:"sek",timerSpentAll:"Spdzie {0} na tej stronie a w sumie {1}.",timerSpentPage:"Spdzie {0} na tej stronie.",timerSpentSurvey:"Spdzie w sumie {0}.",timerLimitAll:"Spdzie {0} z {1} na tej stronie a w sumie {2} z {3}.",timerLimitPage:"Spdzie {0} z {1} na tej stronie",timerLimitSurvey:"Spdzie {0} z {1}.",cleanCaption:"Wyczy",clearCaption:"Jasne",chooseFileCaption:"Wybierz plik",removeFileCaption:"Usu ten plik",booleanCheckedLabel:"Tak",booleanUncheckedLabel:"Nie",confirmRemoveFile:"Jeste pewien, e chcesz usun ten plik: {0}?",confirmRemoveAllFiles:"Jeste pewien, e chcesz usun wszystkie pliki?",questionTitlePatternText:"Tytu pytania"};r.surveyLocalization.locales.pl=i,r.surveyLocalization.localeNames.pl="polski"},"./src/localization/portuguese-br.ts":
/*!*******************************************!*\
  !*** ./src/localization/portuguese-br.ts ***!
  \*******************************************/
/*! exports provided: portugueseBrSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"portugueseBrSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"Anterior",pageNextText:"Prximo",completeText:"Finalizar",previewText:"Pr-visualizao",editText:"Editar",startSurveyText:"Comear",otherItemText:"Outros (descrever)",noneItemText:"Nenhum",selectAllItemText:"Selecionar Todos",progressText:"Pgina {0} de {1}",panelDynamicProgressText:"Registro {0} de {1}",questionsProgressText:"Respostas {0}/{1} perguntas",emptySurvey:"No h pgina visvel ou pergunta na pesquisa.",completingSurvey:"Obrigado por finalizar a pesquisa!",completingSurveyBefore:"Nossos registros mostram que voc j finalizou a pesquisa.",loadingSurvey:"A pesquisa est carregando...",optionsCaption:"Selecione...",value:"valor",requiredError:"Por favor, responda a pergunta.",requiredErrorInPanel:"Por favor, responda pelo menos uma pergunta.",requiredInAllRowsError:"Por favor, responda as perguntas em todas as linhas.",numericError:"O valor deve ser numrico.",textMinLength:"Por favor, insira pelo menos {0} caracteres.",textMaxLength:"Por favor, insira menos de {0} caracteres.",textMinMaxLength:"Por favor, insira mais de {0} e menos de {1} caracteres.",minRowCountError:"Preencha pelo menos {0} linhas.",minSelectError:"Selecione pelo menos {0} opes.",maxSelectError:"Por favor, selecione no mais do que {0} opes.",numericMinMax:"O '{0}' deve ser igual ou superior a {1} e igual ou menor que {2}",numericMin:"O '{0}' deve ser igual ou superior a {1}",numericMax:"O '{0}' deve ser igual ou inferior a {1}",invalidEmail:"Por favor, informe um e-mail vlido.",invalidExpression:"A expresso: {0} deve retornar 'verdadeiro'.",urlRequestError:"A requisio retornou o erro '{0}'. {1}",urlGetChoicesError:"A requisio no retornou dados ou o 'caminho' da requisio no est correto",exceedMaxSize:"O tamanho do arquivo no deve exceder {0}.",otherRequiredError:"Por favor, informe o outro valor.",uploadingFile:"Seu arquivo est sendo carregado. Por favor, aguarde alguns segundos e tente novamente.",loadingFile:"Carregando...",chooseFile:"Selecione o(s) arquivo(s)...",noFileChosen:"Nenhum arquivo escolhido",confirmDelete:"Tem certeza que deseja deletar?",keyDuplicationError:"Esse valor deve ser nico.",addColumn:"Adicionar coluna",addRow:"Adicionar linha",removeRow:"Remover linha",addPanel:"Adicionar novo",removePanel:"Remover",choices_Item:"item",matrix_column:"Coluna",matrix_row:"Linha",savingData:"Os resultados esto sendo salvos no servidor...",savingDataError:"Ocorreu um erro e no foi possvel salvar os resultados.",savingDataSuccess:"Os resultados foram salvos com sucesso!",saveAgainButton:"Tente novamente",timerMin:"min",timerSec:"seg",timerSpentAll:"Voc gastou {0} nesta pgina e {1} no total.",timerSpentPage:"Voc gastou {0} nesta pgina.",timerSpentSurvey:"Voc gastou {0} no total.",timerLimitAll:"Voc gastou {0} de {1} nesta pgina e {2} de {3} no total.",timerLimitPage:"Voc gastou {0} de {1} nesta pgina.",timerLimitSurvey:"Voc gastou {0} de {1} no total.",cleanCaption:"Limpar",clearCaption:"Limpar",chooseFileCaption:"Escolher arquivo",removeFileCaption:"Remover este arquivo",booleanCheckedLabel:"Sim",booleanUncheckedLabel:"No",confirmRemoveFile:"Tem certeza que deseja remover este arquivo: {0}?",confirmRemoveAllFiles:"Tem certeza que deseja remover todos os arquivos?",questionTitlePatternText:"Ttulo da questo"};r.surveyLocalization.locales["pt-br"]=i,r.surveyLocalization.localeNames["pt-br"]="portugus brasileiro"},"./src/localization/portuguese.ts":
/*!****************************************!*\
  !*** ./src/localization/portuguese.ts ***!
  \****************************************/
/*! exports provided: portugueseSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"portugueseSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"Anterior",pageNextText:"Prximo",completeText:"Finalizar",previewText:"Pr-visualizao",editText:"Editar",startSurveyText:"Comear",otherItemText:"Outros (descrever)",noneItemText:"Nenhum",selectAllItemText:"Selecionar Todos",progressText:"Pgina {0} de {1}",panelDynamicProgressText:"Registo {0} de {1}",questionsProgressText:"Respostas {0}/{1} perguntas",emptySurvey:"No h pgina visvel ou pergunta no questionrio.",completingSurvey:"Obrigado por finalizar o questionrio!",completingSurveyBefore:"Os nossos registos mostram que j finalizou o questionrio.",loadingSurvey:"O questionrio est a carregar...",optionsCaption:"Selecione...",value:"valor",requiredError:"Por favor, responda  pergunta.",requiredErrorInPanel:"Por favor, responda pelo menos a uma pergunta.",requiredInAllRowsError:"Por favor, responda s perguntas em todas as linhas.",numericError:"O valor deve ser numrico.",textMinLength:"Por favor, insira pelo menos {0} caracteres.",textMaxLength:"Por favor, insira menos de {0} caracteres.",textMinMaxLength:"Por favor, insira mais de {0} e menos de {1} caracteres.",minRowCountError:"Preencha pelo menos {0} linhas.",minSelectError:"Selecione pelo menos {0} opes.",maxSelectError:"Por favor, selecione no mximo {0} opes.",numericMinMax:"O '{0}' deve ser igual ou superior a {1} e igual ou menor que {2}",numericMin:"O '{0}' deve ser igual ou superior a {1}",numericMax:"O '{0}' deve ser igual ou inferior a {1}",invalidEmail:"Por favor, insira um e-mail vlido.",invalidExpression:"A expresso: {0} deve retornar 'verdadeiro'.",urlRequestError:"O pedido retornou o erro '{0}'. {1}",urlGetChoicesError:"O pedido no retornou dados ou o 'caminho' do pedido no est correto",exceedMaxSize:"O tamanho do arquivo no deve exceder {0}.",otherRequiredError:"Por favor, insira o outro valor.",uploadingFile:"O seu ficheiro est a carregar. Por favor, aguarde alguns segundos e tente novamente.",loadingFile:"A carregar...",chooseFile:"Selecione o(s) arquivo(s)...",noFileChosen:"Nenhum ficheiro escolhido",confirmDelete:"Tem a certeza que deseja apagar?",keyDuplicationError:"Este valor deve ser nico.",addColumn:"Adicionar coluna",addRow:"Adicionar linha",removeRow:"Remover linha",addPanel:"Adicionar novo",removePanel:"Remover",choices_Item:"item",matrix_column:"Coluna",matrix_row:"Linha",savingData:"Os resultados esto a ser guardados no servidor...",savingDataError:"Ocorreu um erro e no foi possvel guardar os resultados.",savingDataSuccess:"Os resultados foram guardados com sucesso!",saveAgainButton:"Tente novamente",timerMin:"min",timerSec:"seg",timerSpentAll:"Voc gastou {0} nesta pgina e {1} no total.",timerSpentPage:"Voc gastou {0} nesta pgina.",timerSpentSurvey:"Voc gastou {0} no total.",timerLimitAll:"Voc gastou {0} de {1} nesta pgina e {2} de {3} no total.",timerLimitPage:"Voc gastou {0} de {1} nesta pgina.",timerLimitSurvey:"Voc gastou {0} de {1} no total.",cleanCaption:"Limpar",clearCaption:"Limpar",chooseFileCaption:"Escolher ficheiro",removeFileCaption:"Remover este ficheiro",booleanCheckedLabel:"Sim",booleanUncheckedLabel:"No",confirmRemoveFile:"Tem a certeza que deseja remover este ficheiro: {0}?",confirmRemoveAllFiles:"Tem a certeza que deseja remover todos os ficheiros?",questionTitlePatternText:"Ttulo da questo"};r.surveyLocalization.locales.pt=i,r.surveyLocalization.localeNames.pt="portugus"},"./src/localization/romanian.ts":
/*!**************************************!*\
  !*** ./src/localization/romanian.ts ***!
  \**************************************/
/*! exports provided: romanianSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"romanianSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"Precedent",pageNextText:"Urmtor",completeText:"Finalizare",previewText:"previzualizare",editText:"Editai",startSurveyText:"start",otherItemText:"Altul(precizai)",noneItemText:"Nici unul",selectAllItemText:"Selecteaz tot",progressText:"Pagina {0} din {1}",panelDynamicProgressText:"nregistrare {0} din {1}",questionsProgressText:"Rspunsuri la {0} / {1} ntrebri",emptySurvey:"Nu sunt ntrebri pentru acest chestionar",completingSurvey:"V mulumim pentru timpul acordat!",completingSurveyBefore:"Din nregistrrile noastre reiese c ai completat deja acest chestionar.",loadingSurvey:"Chestionarul se ncarc...",optionsCaption:"Alegei...",value:"valoare",requiredError:"Rspunsul la aceast ntrebare este obligatoriu.",requiredErrorInPanel:"V rugm s rspundei la cel puin o ntrebare.",requiredInAllRowsError:"Toate rspunsurile sunt obligatorii",numericError:"Rspunsul trebuie s fie numeric.",textMinLength:"Trebuie s introducei minim {0} caractere.",textMaxLength:"Trebuie s introducei maxim {0} caractere.",textMinMaxLength:"Trebuie s introducei mai mult de {0} i mai puin de {1} caractere.",minRowCountError:"Trebuie s completai minim {0} rnduri.",minSelectError:"Trebuie s selectai minim {0} opiuni.",maxSelectError:"Trebuie s selectai maxim {0} opiuni.",numericMinMax:"Rspunsul '{0}' trebuie s fie mai mare sau egal ca {1}  mai mic sau egal cu {2}",numericMin:"Rspunsul '{0}' trebuie s fie mai mare sau egal ca {1}",numericMax:"Rspunsul '{0}' trebuie s fie mai mic sau egal ca {1}",invalidEmail:"Trebuie s introducei o adresa de email valid.",invalidExpression:"Expresia: {0} ar trebui s returneze adevrat.",urlRequestError:"Request-ul a returnat eroarea '{0}'. {1}",urlGetChoicesError:"Request-ul nu a returnat date sau proprietatea 'path' este incorect",exceedMaxSize:"Dimensiunea fiierului nu trebuie s depeasc {0}.",otherRequiredError:"Trebuie s completai cmpul 'Altul'.",uploadingFile:"Fiierul dumneavoastr este n curs de ncrcare. V rugm ateptai cteva secunde i revenii apoi.",loadingFile:"Se ncarc...",chooseFile:"Alege fisierele...",noFileChosen:"Niciun fiier ales",confirmDelete:"Suntei sigur c dorii s tergei nregistrarea?",keyDuplicationError:"Valoarea trebuie s fie unic.",addColumn:"Adugai coloan",addRow:"Adugare rnd",removeRow:"tergere",addPanel:"Adugare",removePanel:"tergere",choices_Item:"opiune",matrix_column:"Coloan",matrix_row:"Rnd",savingData:"Rezultatele sunt n curs de salvare...",savingDataError:"A intervenit o eroare, rezultatele nu au putut fi salvate.",savingDataSuccess:"Rezultatele au fost salvate cu succes!",saveAgainButton:"ncercai din nou",timerMin:"min",timerSec:"sec",timerSpentAll:"Ai petrecut {0} pe aceast pagin i {1} n total.",timerSpentPage:"Ai petrecut {0} pe aceast pagin.",timerSpentSurvey:"Ai petrecut {0} n total.",timerLimitAll:"Ai petrecut {0} din {1} pe aceast pagin i {2} din {3} n total.",timerLimitPage:"Ai petrecut {0} din {1} pe aceast pagin.",timerLimitSurvey:"Ai petrecut {0} din {1} n total.",cleanCaption:"Curat",clearCaption:"clar",chooseFileCaption:"Alege fiierul",removeFileCaption:"Eliminai acest fiier",booleanCheckedLabel:"da",booleanUncheckedLabel:"Nu",confirmRemoveFile:"Sigur dorii s eliminai acest fiier: {0}?",confirmRemoveAllFiles:"Sigur dorii s eliminai toate fiierele?",questionTitlePatternText:"Titlul intrebarii"};r.surveyLocalization.locales.ro=i,r.surveyLocalization.localeNames.ro="romn"},"./src/localization/russian.ts":
/*!*************************************!*\
  !*** ./src/localization/russian.ts ***!
  \*************************************/
/*! exports provided: russianSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"russianSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"",pageNextText:"",completeText:"",previewText:" ",editText:"",startSurveyText:"",otherItemText:" (, )",noneItemText:"",selectAllItemText:" ",progressText:" {0}  {1}",panelDynamicProgressText:" {0}  {1}",questionsProgressText:"  {0}/{1}",emptySurvey:"   .",completingSurvey:"    !",completingSurveyBefore:"    .",loadingSurvey:"  ...",optionsCaption:"...",value:"",requiredError:",   .",requiredErrorInPanel:",       .",requiredInAllRowsError:",      .",numericError:"   .",textMinLength:"   {0} .",textMaxLength:"   {0} .",textMinMaxLength:"   {0}   {1} .",minRowCountError:",    {0} .",minSelectError:",    {0} .",maxSelectError:",    {0} .",numericMinMax:"'{0}'      {1},     {2}",numericMin:"'{0}'      {1}",numericMax:"'{0}'      {1}",invalidEmail:",     .",invalidExpression:" {0}   'true'.",urlRequestError:"   '{0}'. {1}",urlGetChoicesError:"       'path'  ",exceedMaxSize:"     {0}.",otherRequiredError:",     ''",uploadingFile:"  .      .",loadingFile:"...",chooseFile:" ()...",noFileChosen:"  ",confirmDelete:"    ?",keyDuplicationError:"    .",addColumn:" ",addRow:" ",removeRow:"",addPanel:" ",removePanel:"",choices_Item:"",matrix_column:"",matrix_row:"",savingData:"   ...",savingDataError:" ,    .",savingDataSuccess:"  !",saveAgainButton:" ",timerMin:"",timerSec:"",timerSpentAll:"  {0}     {1} .",timerSpentPage:"  {0}   .",timerSpentSurvey:"  {0}   .",timerLimitAll:"  {0}  {1}     {2}  {3}   .",timerLimitPage:"  {0}  {1}   .",timerLimitSurvey:"  {0}  {1}   .",cleanCaption:"",clearCaption:"",chooseFileCaption:" ",removeFileCaption:" ",booleanCheckedLabel:"",booleanUncheckedLabel:"",confirmRemoveFile:" ,     : {0}?",confirmRemoveAllFiles:" ,     ?",questionTitlePatternText:" "};r.surveyLocalization.locales.ru=i,r.surveyLocalization.localeNames.ru=""},"./src/localization/serbian.ts":
/*!*************************************!*\
  !*** ./src/localization/serbian.ts ***!
  \*************************************/
/*! exports provided: serbianStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"serbianStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"Nazad",pageNextText:"Dalje",completeText:"Zavri",previewText:"Pregledaj",editText:"Izmeni",startSurveyText:"Zaponi",otherItemText:"Drugo (upii)",noneItemText:"Nita",selectAllItemText:"Izaberi sve",progressText:"Stranica {0} od {1}",panelDynamicProgressText:"Upis {0} od {1}",questionsProgressText:"Odgovoreno na {0}/{1} pitanja",emptySurvey:"Nema vidljivih stranica ili pitanja u anketi.",completingSurvey:"Hvala na popunjavanju ankete!",completingSurveyBefore:"Prema naim podacima, ve ste popunili ovu anketu.",loadingSurvey:"Uitavam anketu...",optionsCaption:"Izaberi...",value:"vrednost",requiredError:"Molimo odgovorite na ovo pitanje.",requiredErrorInPanel:"Molimo odgovorite na bar jedno pitanje.",requiredInAllRowsError:"Molimo odgovorite na pitanja u svim redovima.",numericError:"Vrednost bi trebalo da bude numerika.",minError:"Vrednost ne bi trebalo da bude manja od {0}",maxError:"Vrednost ne bi trebalo da bude vea od {0}",textMinLength:"Molimo unesite bar {0} znak(ov)a.",textMaxLength:"Molimo unesite najvie {0} znak(ov)a.",textMinMaxLength:"Molimo unesite najmanje {0} i ne vie od {1} znak(ov)a.",minRowCountError:"Molimo popunite najmanje {0} red(ova).",minSelectError:"Molimo izaberite najmanje {0} opcija/e.",maxSelectError:"Molimo izaberite najvie {0} opcija/e.",numericMinMax:"'{0}' bi trebalo da bude najmanje {1} i najvie {2}",numericMin:"'{0}' bi trebalo da bude najmanje {1}",numericMax:"'{0}' bi trebalo da bude najvie {1}",invalidEmail:"Molimo unesite ispravnu e-mail adresu.",invalidExpression:"Izraz: {0} bi trebalo da bude taan.",urlRequestError:"Zahtev je naiao na greku '{0}'. {1}",urlGetChoicesError:"Zahtev nije pronaao podatke, ili je putanja netana",exceedMaxSize:"Veliina fajla ne bi trebalo da prelazi {0}.",otherRequiredError:"Molimo unesite drugu vrednost.",uploadingFile:"Fajl se alje. Molimo saekajte neko vreme i pokuajte ponovo.",loadingFile:"Uitavanje...",chooseFile:"Izaberite fajlove...",noFileChosen:"Nije izabran nijedan fajl",confirmDelete:"Da li elite da izbriete unos?",keyDuplicationError:"Ova vrednost treba da bude jedinstvena.",addColumn:"Dodaj kolonu",addRow:"Dodaj red",removeRow:"Ukloni",emptyRowsText:"Nema redova.",addPanel:"Dodaj novo",removePanel:"Ukloni",choices_Item:"stavka",matrix_column:"Kolona",matrix_row:"Red",multipletext_itemname:"tekst",savingData:"U toku je uvanje podataka na serveru...",savingDataError:"Dolo je do greke i rezultati nisu sauvani.",savingDataSuccess:"Rezultati su uspeno sauvani!",saveAgainButton:"Pokuajte ponovo",timerMin:"min",timerSec:"sek",timerSpentAll:"Proveli ste {0} na ovoj stranici i {1} ukupno.",timerSpentPage:"Proveli ste {0} na ovoj stranici.",timerSpentSurvey:"Proveli ste {0} ukupno.",timerLimitAll:"Proveli ste {0} od {1} na ovoj stranici i {2} od {3} ukupno.",timerLimitPage:"Proveli ste {0} od {1} na ovoj stranici.",timerLimitSurvey:"Proveli ste {0} od {1} ukupno.",cleanCaption:"Oisti",clearCaption:"Poniti",chooseFileCaption:"Izaberi fajl",removeFileCaption:"Ukloni ovaj fajl",booleanCheckedLabel:"Da",booleanUncheckedLabel:"Ne",confirmRemoveFile:"Da li ste sigurni da elite da uklonite ovaj fajl: {0}?",confirmRemoveAllFiles:"Da li ste sigurni da elite da uklonite sve fajlove?",questionTitlePatternText:"Naslov pitanja",modalCancelButtonText:"Otkai",modalApplyButtonText:"Primeni"};r.surveyLocalization.locales.rs=i,r.surveyLocalization.localeNames.rs="Srpski"},"./src/localization/simplified-chinese.ts":
/*!************************************************!*\
  !*** ./src/localization/simplified-chinese.ts ***!
  \************************************************/
/*! exports provided: simplifiedChineseSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"simplifiedChineseSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"",pageNextText:"",completeText:"",previewText:"",editText:"",startSurveyText:"",otherItemText:"",noneItemText:"",selectAllItemText:"",progressText:" {0} ,  {1} ",panelDynamicProgressText:"{0} of {1}",questionsProgressText:" {0}/{1} ",emptySurvey:"",completingSurvey:"!",completingSurveyBefore:".",loadingSurvey:"...",optionsCaption:"...",value:"",requiredError:"",requiredErrorInPanel:".",requiredInAllRowsError:"",numericError:"",minError:" {0}",maxError:" {0}",textMinLength:" {0} ",textMaxLength:" {0} ",textMinMaxLength:" {0} - {1} ",minRowCountError:" {0} ",minSelectError:" {0} ",maxSelectError:" {0} ",numericMinMax:" '{0}'  {1}  {2}",numericMin:" '{0}'  {1}",numericMax:" '{0}'  {1}",invalidEmail:" Email ",invalidExpression:": {0} .",urlRequestError:" '{0}': {1}",urlGetChoicesError:"",exceedMaxSize:" {0}",otherRequiredError:"",uploadingFile:"... ",loadingFile:"...",chooseFile:"...",noFileChosen:"",confirmDelete:"?",keyDuplicationError:"",addColumn:"",addRow:"",removeRow:"",emptyRowsText:"",addPanel:"",removePanel:"",choices_Item:"",matrix_column:"",matrix_row:"",multipletext_itemname:"",savingData:"...",savingDataError:"",savingDataSuccess:"!",saveAgainButton:"",timerMin:"",timerSec:"",timerSpentAll:" {0} {1} .",timerSpentPage:"{0} .",timerSpentSurvey:" {0} .",timerLimitAll:" {0}  {1}  {2}  {3} .",timerLimitPage:" {0}  {1} .",timerLimitSurvey:" {0}  {1}.",cleanCaption:"",clearCaption:"",chooseFileCaption:"",removeFileCaption:"",booleanCheckedLabel:"",booleanUncheckedLabel:"",confirmRemoveFile:": {0}?",confirmRemoveAllFiles:"?",questionTitlePatternText:"",modalCancelButtonText:"",modalApplyButtonText:""};r.surveyLocalization.locales["zh-cn"]=i,r.surveyLocalization.localeNames["zh-cn"]=""},"./src/localization/spanish.ts":
/*!*************************************!*\
  !*** ./src/localization/spanish.ts ***!
  \*************************************/
/*! exports provided: spanishSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"spanishSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"Anterior",pageNextText:"Siguiente",completeText:"Completar",previewText:"Vista previa",editText:"Edita",startSurveyText:"Comienza",otherItemText:"Otro (describa)",noneItemText:"Ninguno",selectAllItemText:"Seleccionar todo",progressText:"Pgina {0} de {1}",panelDynamicProgressText:"Registro {0} de {1}",questionsProgressText:"Respondi a {0}/{1} preguntas",emptySurvey:"No hay pgina visible o pregunta en la encuesta.",completingSurvey:"Gracias por completar la encuesta!",completingSurveyBefore:"Nuestros registros muestran que ya ha completado esta encuesta.",loadingSurvey:"La encuesta est cargando...",optionsCaption:"Seleccione...",value:"valor",requiredError:"Por favor conteste la pregunta.",requiredErrorInPanel:"Por favor, responda al menos una pregunta.",requiredInAllRowsError:"Por favor conteste las preguntas en cada hilera.",numericError:"La estimacin debe ser numrica.",textMinLength:"Por favor entre por lo menos {0} smbolos.",textMaxLength:"Por favor entre menos de {0} smbolos.",textMinMaxLength:"Por favor entre ms de {0} y menos de {1} smbolos.",minRowCountError:"Por favor llene por lo menos {0} hileras.",minSelectError:"Por favor seleccione por lo menos {0} variantes.",maxSelectError:"Por favor seleccione no ms de {0} variantes.",numericMinMax:"El '{0}' debe de ser igual o ms de {1} y igual o menos de {2}",numericMin:"El '{0}' debe ser igual o ms de {1}",numericMax:"El '{0}' debe ser igual o menos de {1}",invalidEmail:"Por favor agregue un correo electrnico vlido.",invalidExpression:"La expresin: {0} debera devolver 'verdadero'.",urlRequestError:"La solicitud regres error '{0}'. {1}",urlGetChoicesError:"La solicitud regres vaco de data o la propiedad 'trayectoria' no es correcta",exceedMaxSize:"El tamao del archivo no debe de exceder {0}.",otherRequiredError:"Por favor agregue la otra estimacin.",uploadingFile:"Su archivo se est subiendo. Por favor espere unos segundos e intente de nuevo.",loadingFile:"Cargando...",chooseFile:"Elija archivo(s)...",noFileChosen:"No se ha elegido ningn archivo",confirmDelete:"Quieres borrar el registro?",keyDuplicationError:"Este valor debe ser nico.",addColumn:"Aadir columna",addRow:"Agregue una hilera",removeRow:"Eliminar una hilera",addPanel:"Aadir nuevo",removePanel:"Retire",choices_Item:"artculo",matrix_column:"Columna",matrix_row:"Hilera",savingData:"Los resultados se estn guardando en el servidor...",savingDataError:"Los resultados se estn guardando en el servidor...",savingDataSuccess:"Los resultados se guardaron con xito!",saveAgainButton:"Intntalo de nuevo.",timerMin:"min",timerSec:"sec",timerSpentAll:"Has gastado {0} en esta pgina y {1} en total.",timerSpentPage:"Usted ha pasado {0} en esta pgina.",timerSpentSurvey:"Has gastado en total.",timerLimitAll:"Has gastado {0} de {1} en esta pgina y {2} de {3} en total.",timerLimitPage:"Has gastado {0} de {1} en esta pgina.",timerLimitSurvey:"Usted ha gastado {0} de {1} en total.",cleanCaption:"Limpia",clearCaption:"Despejen",chooseFileCaption:"Elija el archivo",removeFileCaption:"Elimina este archivo",booleanCheckedLabel:"S",booleanUncheckedLabel:"No",confirmRemoveFile:"Ests seguro de que quieres eliminar este archivo: {0}?",confirmRemoveAllFiles:"Ests seguro de que quieres eliminar todos los archivos?",questionTitlePatternText:"Ttulo de la pregunta"};r.surveyLocalization.locales.es=i,r.surveyLocalization.localeNames.es="espaol"},"./src/localization/swahili.ts":
/*!*************************************!*\
  !*** ./src/localization/swahili.ts ***!
  \*************************************/
/*! exports provided: swahiliStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"swahiliStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"Iliyotangulia",pageNextText:"Ifuatayo",completeText:"Kamili",previewText:"Hakiki",editText:"Hariri",startSurveyText:"Anza",otherItemText:"Nyingine (eleza)",noneItemText:"Hakuna",selectAllItemText:"Chagua Zote",progressText:"Ukurasa {0} wa {1}",panelDynamicProgressText:"Rekodi {0} ya {1}",questionsProgressText:"Yaliyojibiwa {0}/{1} maswali",emptySurvey:"Hakuna ukurasa unaoonekana au swali katika utafiti.",completingSurvey:"Asanti kwa kukamilisha utafiti!",completingSurveyBefore:"Recodi zetu zinatuonyesha tayari umekamilisha utafiti.",loadingSurvey:"Tunaandaa utafiti...",optionsCaption:"Chagua...",value:"thamani",requiredError:"Tafadhali jibu hili swali.",requiredErrorInPanel:"Tafadhali jibu swali angalau moja.",requiredInAllRowsError:"Tafadhali jibu maswali katika safu zote.",numericError:"Thamani inapaswa kuwa ya nambari.",textMinLength:"Tafadhali ingiza angalau{0} husika.",textMaxLength:"Tafadhali ingiza isiozidi {0} husika.",textMinMaxLength:"Tafadhali ingiza kiwango zaidi ya {0} na kisichopungua {1} husika.",minRowCountError:"Tafadhali jaza isiopungua {0} safu.",minSelectError:"Tafadhali chagua angalau {0} lahaja.",maxSelectError:"Tafadhali changua isiozidi {0} lahaja.",numericMinMax:" '{0}' inapaswa kuwa sawa au zaidi ya {1} na sawa au chini ya {2}",numericMin:" '{0}'inapaswa kuwa sawa au zaidi ya {1}",numericMax:" '{0}'inapaswa kuwa sawa au chini ya {1}",invalidEmail:"Tafadhali ingiza anwani halali ya barua-pepe.",invalidExpression:"Usemi:{0} inapaswa kurudi 'kweli'.",urlRequestError:"Ombi lina kosa '{0}'. {1}",urlGetChoicesError:"Ombi lilirudisha data tupu au the 'path' mali ya njia sio sahihi",exceedMaxSize:"Saizi ya faili haipaswi kuzidi {0}.",otherRequiredError:"Tafadhali ingiza thamani nyingine.",uploadingFile:"Faili yako inapakia.Tafadhali subiri sekunde kadhaa na ujaribu tena.",loadingFile:"Inapakia...",chooseFile:"Chagua faili...",noFileChosen:"Hujachagua faili",confirmDelete:"Je! Unataka kufuta rekodi?",keyDuplicationError:"Thamani hii inapaswa kuwa ya kipekee.",addColumn:"Ongeza Kolamu",addRow:"Ongeza safu",removeRow:"Toa",addPanel:"Ongeza mpya",removePanel:"Toa",choices_Item:"kitu",matrix_column:"Kolamu",matrix_row:"Safu",savingData:"Matokeo yamehifadhiwa kwa seva...",savingDataError:"Kosa limetokea na hatukuweza kuhifadhi matokeo.",savingDataSuccess:"Matokeo yamehifadhiwa!",saveAgainButton:"Jaribu tena",timerMin:"dakika",timerSec:"sekunde",timerSpentAll:"Umetumia {0} kwenye ukurasa huu na {1} kwa jumla.",timerSpentPage:"Umetumia {0} kwenye ukurasa huu.",timerSpentSurvey:"Umetumia {0} kwa jumla.",timerLimitAll:"Umetumia {0} ya {1} kwenye ukurasa huu {2} wa {3} kwa jumla.",timerLimitPage:"Umetumia {0} ya {1} kwenye ukurasa huu.",timerLimitSurvey:"Umetumia {0} ya {1} kwa jumla.",cleanCaption:"Safisha",clearCaption:"Ondoa",chooseFileCaption:"Chagua faili",removeFileCaption:"Ondoa faili",booleanCheckedLabel:"Ndio",booleanUncheckedLabel:"Hapana",confirmRemoveFile:"Je! Una uhakika kuwa unataka kuondoa faili hii: {0}?",confirmRemoveAllFiles:"Je! Una uhakika kuwa unataka kuondoa faili zote?",questionTitlePatternText:"Kichwa cha Swali"};r.surveyLocalization.locales.sw=i,r.surveyLocalization.localeNames.sw="swahili"},"./src/localization/swedish.ts":
/*!*************************************!*\
  !*** ./src/localization/swedish.ts ***!
  \*************************************/
/*! exports provided: swedishSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"swedishSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"Fregende",pageNextText:"Nsta",completeText:"Frdig",previewText:"Frhandsvisning",editText:"Redigera",startSurveyText:"Start",otherItemText:"Annat (beskriv)",noneItemText:"Ingen",selectAllItemText:"Vlj alla",progressText:"Sida {0} av {1}",panelDynamicProgressText:"Spela in {0} av {1}",questionsProgressText:"Besvarade {0} / {1} frgor",emptySurvey:"Det finns ingen synlig sida eller frga i enkten.",completingSurvey:"Tack fr att du genomfrt enkten!!",completingSurveyBefore:"Vra register visar att du redan har slutfrt denna underskning.",loadingSurvey:"Enkten laddas...",optionsCaption:"Vlj...",value:"vrde",requiredError:"Var vnlig besvara frgan.",requiredErrorInPanel:"Vnligen svara p minst en frga.",requiredInAllRowsError:"Var vnlig besvara frgorna p alla rader.",numericError:"Vrdet ska vara numeriskt.",textMinLength:"Var vnlig ange minst {0} tecken.",textMaxLength:"Ange frre n {0} tecken.",textMinMaxLength:"Ange mer n {0} och frre n {1} tecken.",minRowCountError:"Var vnlig fyll i minst {0} rader.",minSelectError:"Var vnlig vlj tminstone {0} varianter.",maxSelectError:"Var vnlig vlj inte fler n {0} varianter.",numericMinMax:"'{0}' ska vara lika med eller mer n {1} samt lika med eller mindre n {2}",numericMin:"'{0}' ska vara lika med eller mer n {1}",numericMax:"'{0}' ska vara lika med eller mindre n {1}",invalidEmail:"Var vnlig ange en korrekt e-postadress.",invalidExpression:"Uttrycket: {0} ska returnera 'true'.",urlRequestError:"Frfrgan returnerade felet '{0}'. {1}",urlGetChoicesError:"Antingen returnerade frfrgan ingen data eller s r egenskapen 'path' inte korrekt",exceedMaxSize:"Filstorleken fr ej verstiga {0}.",otherRequiredError:"Var vnlig ange det andra vrdet.",uploadingFile:"Din fil laddas upp. Var vnlig vnta ngra sekunder och frsk sedan igen.",loadingFile:"Lser in...",chooseFile:"Vlj fil (er) ...",noFileChosen:"Ingen fil vald",confirmDelete:"Vill du radera posten?",keyDuplicationError:"Detta vrde ska vara unikt.",addColumn:"Lgg till kolumn",addRow:"Lgg till rad",removeRow:"Ta bort",addPanel:"Lgg till ny",removePanel:"Ta bort",choices_Item:"Artikel",matrix_column:"Kolumn",matrix_row:"Rad",savingData:"Resultaten sparas p servern ...",savingDataError:"Ett fel intrffade och vi kunde inte spara resultaten.",savingDataSuccess:"Resultaten sparades framgngsrikt!",saveAgainButton:"Frsk igen",timerMin:"min",timerSec:"sek",timerSpentAll:"Du har spenderat {0} p den hr sidan och {1} totalt.",timerSpentPage:"Du har spenderat {0} p den hr sidan.",timerSpentSurvey:"Du har spenderat {0} totalt.",timerLimitAll:"Du har spenderat {0} av {1} p den hr sidan och {2} av {3} totalt.",timerLimitPage:"Du har spenderat {0} av {1} p den hr sidan.",timerLimitSurvey:"Du har spenderat {0} av {1} totalt.",cleanCaption:"Rena",clearCaption:"Klar",chooseFileCaption:"Vlj FIL",removeFileCaption:"Ta bort den hr filen",booleanCheckedLabel:"Ja",booleanUncheckedLabel:"Nej",confirmRemoveFile:"r du sker p att du vill ta bort den hr filen: {0}?",confirmRemoveAllFiles:"r du sker p att du vill ta bort alla filer?",questionTitlePatternText:"Frgetitel"};r.surveyLocalization.locales.sv=i,r.surveyLocalization.localeNames.sv="svenska"},"./src/localization/tajik.ts":
/*!***********************************!*\
  !*** ./src/localization/tajik.ts ***!
  \***********************************/
/*! exports provided: tajikSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"tajikSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"",pageNextText:"",completeText:" ",startSurveyText:"",otherItemText:" (  )",noneItemText:"",selectAllItemText:"  ",progressText:" {0}  {1}",emptySurvey:"   .",completingSurvey:"    !",completingSurveyBefore:"     .",loadingSurvey:"  ...",optionsCaption:" ...",value:"",requiredError:",    .",requiredErrorInPanel:",      .",requiredInAllRowsError:",        .",numericError:"   .",textMinLength:",  {0}    .",textMaxLength:",  {0}    .",textMinMaxLength:",  {0}    {1}    .",minRowCountError:",    {0}   .",minSelectError:",  {0}   .",maxSelectError:",    {0}   .",numericMinMax:"'{0}'     {1}     {2} ",numericMin:"'{0}'     {1} ",numericMax:"'{0}'     {1} ",invalidEmail:",     .",invalidExpression:" {0}  'true' .",urlRequestError:"   '{0}'. {1}",urlGetChoicesError:"       'path'    ",exceedMaxSize:"      {0} .",otherRequiredError:",   ''   ",uploadingFile:"    .         .",loadingFile:"...",chooseFile:"()-  ...",confirmDelete:"  ,     ?",keyDuplicationError:"    .",addColumn:" ",addRow:" ",removeRow:" ",addPanel:" ",removePanel:" ",choices_Item:"",matrix_column:"",matrix_row:"",savingData:"     ...",savingDataError:"   ,   .",savingDataSuccess:"   !",saveAgainButton:"   ",timerMin:"",timerSec:"",timerSpentAll:" {0}     {1}    .",timerSpentPage:" {0}     .",timerSpentSurvey:" {0}     .",timerLimitAll:" {0}  {1}     {2}  {3}        .",timerLimitPage:" {0}  {1}     .",timerLimitSurvey:" {0}  {1}     .",cleanCaption:" ",clearCaption:" ",removeFileCaption:"  "};r.surveyLocalization.locales.tg=i,r.surveyLocalization.localeNames.tg=""},"./src/localization/thai.ts":
/*!**********************************!*\
  !*** ./src/localization/thai.ts ***!
  \**********************************/
/*! exports provided: thaiStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"thaiStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"",pageNextText:"",completeText:"",previewText:"",editText:"",startSurveyText:"",otherItemText:" ()",noneItemText:"",selectAllItemText:"",progressText:" {0}  {1}",panelDynamicProgressText:" {0}  {1}",questionsProgressText:" {0}/{1} ",emptySurvey:"   survey ",completingSurvey:" survey ",completingSurveyBefore:" survey ",loadingSurvey:" Survey...",optionsCaption:"...",value:"",requiredError:"",requiredErrorInPanel:"",requiredInAllRowsError:"",numericError:"",textMinLength:" {0} ",textMaxLength:" {0} ",textMinMaxLength:" {0}  {1} ",minRowCountError:" {0} ",minSelectError:" {0} ",maxSelectError:" {0} ",numericMinMax:"'{0}'  {1}  {2}",numericMin:"'{0}'  {1}",numericMax:"'{0}'  {1}",invalidEmail:"",invalidExpression:"The expression: {0}  'true'.",urlRequestError:" error '{0}'. {1}",urlGetChoicesError:"  'path' property ",exceedMaxSize:" {0}.",otherRequiredError:"",uploadingFile:". ",loadingFile:"...",chooseFile:"...",noFileChosen:"",confirmDelete:"?",keyDuplicationError:" unique.",addColumn:"",addRow:"",removeRow:"",addPanel:"",removePanel:"",choices_Item:"",matrix_column:"",matrix_row:"",savingData:"...",savingDataError:"",savingDataSuccess:"",saveAgainButton:"",timerMin:"",timerSec:"",timerSpentAll:" {0}  {1} ",timerSpentPage:" {0} ",timerSpentSurvey:" {0} ",timerLimitAll:" {0}  {1}  {2}  {3} ",timerLimitPage:" {0}  {1} ",timerLimitSurvey:" {0}  {1} ",cleanCaption:"",clearCaption:"",chooseFileCaption:"",removeFileCaption:"",booleanCheckedLabel:"",booleanUncheckedLabel:"",confirmRemoveFile:": {0}?",confirmRemoveAllFiles:"",questionTitlePatternText:""};r.surveyLocalization.locales.th=i,r.surveyLocalization.localeNames.th=""},"./src/localization/traditional-chinese.ts":
/*!*************************************************!*\
  !*** ./src/localization/traditional-chinese.ts ***!
  \*************************************************/
/*! exports provided: traditionalChineseSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"traditionalChineseSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"",pageNextText:"",completeText:"",otherItemText:"",progressText:" {0} ,  {1} ",emptySurvey:"",completingSurvey:"!",loadingSurvey:"...",optionsCaption:"...",requiredError:"",requiredInAllRowsError:"",numericError:"",textMinLength:" {0} ",textMaxLength:" {0} ",textMinMaxLength:" {0} - {1} ",minRowCountError:" {0} ",minSelectError:" {0} ",maxSelectError:" {0} ",numericMinMax:" '{0}'  {1}  {2}",numericMin:" '{0}'  {1}",numericMax:" '{0}'  {1}",invalidEmail:" Email ",urlRequestError:" '{0}': {1}",urlGetChoicesError:"",exceedMaxSize:" {0}",otherRequiredError:"",uploadingFile:"... ",addRow:"",removeRow:"",choices_Item:"",matrix_column:"",matrix_row:"",savingData:"...",savingDataError:"",savingDataSuccess:"!",saveAgainButton:""};r.surveyLocalization.locales["zh-tw"]=i,r.surveyLocalization.localeNames["zh-tw"]=""},"./src/localization/turkish.ts":
/*!*************************************!*\
  !*** ./src/localization/turkish.ts ***!
  \*************************************/
/*! exports provided: turkishSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"turkishSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"Geri",pageNextText:"leri",completeText:"Anketi Tamamla",previewText:"n izleme",editText:"Dzenle",startSurveyText:"Balat",otherItemText:"Dier (aklaynz)",noneItemText:"Yok",selectAllItemText:"Hepsini se",progressText:"Sayfa {0} / {1}",panelDynamicProgressText:"Kayt {0} / {1}",questionsProgressText:"Sorular cevaplad {0} / {1}",emptySurvey:"Ankette grntlenecek sayfa ya da soru mevcut deil.",completingSurvey:"Anketimizi tamamladnz iin teekkr ederiz.",completingSurveyBefore:"Kaytlarmz, bu anketi zaten tamamladnz gsteriyor.",loadingSurvey:"Anket sunucudan ykleniyor ...",optionsCaption:"Seiniz ...",value:"deer",requiredError:"Ltfen soruya cevap veriniz",requiredErrorInPanel:"Ltfen en az bir soruyu yantlayn.",requiredInAllRowsError:"Ltfen tm satrlardaki sorular cevaplaynz.",numericError:"Girilen deer numerik olmaldr",textMinLength:"En az {0} sembol giriniz.",textMaxLength:"Ltfen {0} karakterden az girin.",textMinMaxLength:"Ltfen {0} den fazla ve {1} den az karakter girin.",minRowCountError:"Ltfen en az {0} satr doldurun.",minSelectError:"Ltfen en az {0} seenei seiniz.",maxSelectError:"Ltfen {0} adetten fazla semeyiniz.",numericMinMax:"The '{0}' should be equal or more than {1} and equal or less than {2}",numericMin:"'{0}' deeri {1} deerine eit veya byk olmaldr",numericMax:"'{0}' deeri {1} deerine eit ya da kk olmaldr.",invalidEmail:"Ltfen geerli bir eposta adresi giriniz.",invalidExpression:"fade: {0} 'true' dndrmelidir.",urlRequestError:"Talebi u hatay dnd '{0}'. {1}",urlGetChoicesError:"Talep herhangi bir veri dnmedi ya da 'path' zellii hatal.",exceedMaxSize:"Dosya boyutu {0} deerini geemez.",otherRequiredError:"Ltfen dier deerleri giriniz.",uploadingFile:"Dosyanz ykleniyor. Ltfen birka saniye bekleyin ve tekrar deneyin.",loadingFile:"Ykleniyor...",chooseFile:"Dosyalar sein ...",noFileChosen:"Dosya seili deil",confirmDelete:"Kayd silmek istiyor musunuz?",keyDuplicationError:"Bu deer benzersiz olmaldr.",addColumn:"Stun ekleyin",addRow:"Satr Ekle",removeRow:"Kaldr",addPanel:"Yeni ekle",removePanel:"Kaldrmak",choices_Item:"eya",matrix_column:"Stun",matrix_row:"Krek ekmek",savingData:"Sonular sunucuya kaydediliyor ...",savingDataError:"Bir hata olutu ve sonular kaydedemedik.",savingDataSuccess:"Sonular baaryla kaydedildi!",saveAgainButton:"Tekrar deneyin",timerMin:"min",timerSec:"saniye",timerSpentAll:"Bu sayfada {0} ve toplamda {1} harcadnz.",timerSpentPage:"Bu sayfaya {0} harcadnz.",timerSpentSurvey:"Toplamda {0} harcadnz.",timerLimitAll:"Bu sayfaya {0} / {1} ve toplamda {2} / {3} harcadnz.",timerLimitPage:"Bu sayfaya {0} / {1} harcadnz.",timerLimitSurvey:"Toplamda {0} / {1} harcadnz.",cleanCaption:"Temiz",clearCaption:"Ak",chooseFileCaption:"Dosya sein",removeFileCaption:"Bu dosyay kaldr",booleanCheckedLabel:"Evet",booleanUncheckedLabel:"Hayr",confirmRemoveFile:"Bu dosyay kaldrmak istediinizden emin misiniz: {0}?",confirmRemoveAllFiles:"Tm dosyalar kaldrmak istediinizden emin misiniz?",questionTitlePatternText:"Soru bal"};r.surveyLocalization.locales.tr=i,r.surveyLocalization.localeNames.tr="trke"},"./src/localization/ukrainian.ts":
/*!***************************************!*\
  !*** ./src/localization/ukrainian.ts ***!
  \***************************************/
/*! exports provided: ukrainianSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"ukrainianSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"",pageNextText:"",completeText:"",previewText:" ",editText:"",startSurveyText:"",otherItemText:" ( , )",noneItemText:"",selectAllItemText:" ",progressText:" {0}  {1}",panelDynamicProgressText:" {0}  {1}",questionsProgressText:"  {0}/{1} ",emptySurvey:"  .",completingSurvey:"    !",completingSurveyBefore:"    .",loadingSurvey:" ...",optionsCaption:"...",value:"",requiredError:" ,  .",requiredErrorInPanel:" ,       .",requiredInAllRowsError:" ,       .",numericError:"   .",textMinLength:"    {0} .",textMaxLength:"    {0} .",textMinMaxLength:"    {0}   {1} .",minRowCountError:" ,    {0} .",minSelectError:" ,    {0} .",maxSelectError:" ,    {0} .",numericMinMax:"'{0}'      {1},     {2}",numericMin:"'{0}'      {1}",numericMax:"'{0}'      {1}",invalidEmail:" ,     .",invalidExpression:" {0}   'true'.",urlRequestError:"   '{0}'. {1}",urlGetChoicesError:"       'path'  ",exceedMaxSize:"     {0}.",otherRequiredError:" ,     ''",uploadingFile:"  .      .",loadingFile:"...",chooseFile:" ()...",noFileChosen:"  ",confirmDelete:"   ?",keyDuplicationError:"    .",addColumn:" ",addRow:" ",removeRow:"",addPanel:" ",removePanel:"",choices_Item:"",matrix_column:"",matrix_row:"",savingData:"   ...",savingDataError:" ,    .",savingDataSuccess:"  !",saveAgainButton:" ",timerMin:"",timerSec:"",timerSpentAll:"  {0}     {1} .",timerSpentPage:"  {0}   .",timerSpentSurvey:"  {0}  .",timerLimitAll:"  {0}  {1}     {2}  {3}   .",timerLimitPage:"  {0}  {1}   .",timerLimitSurvey:"  {0}  {1}   .",cleanCaption:"",clearCaption:"",chooseFileCaption:" ",removeFileCaption:" ",booleanCheckedLabel:"",booleanUncheckedLabel:"",confirmRemoveFile:" ,     : {0}?",confirmRemoveAllFiles:" ,     ?",questionTitlePatternText:" "};r.surveyLocalization.locales.ua=i,r.surveyLocalization.localeNames.ua=""},"./src/localization/vietnamese.ts":
/*!****************************************!*\
  !*** ./src/localization/vietnamese.ts ***!
  \****************************************/
/*! exports provided: vietnameseSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"vietnameseSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"Previous",pageNextText:"Next",completeText:"Complete",previewText:"Preview",editText:"Edit",startSurveyText:"Start",otherItemText:"Other (describe)",noneItemText:"None",selectAllItemText:"Select All",progressText:"Page {0} of {1}",panelDynamicProgressText:"Record {0} of {1}",questionsProgressText:"Answered {0}/{1} questions",emptySurvey:"There is no visible page or question in the survey.",completingSurvey:"Thank you for completing the survey!",completingSurveyBefore:"Our records show that you have already completed this survey.",loadingSurvey:"Loading Survey...",optionsCaption:"Chn...",value:"value",requiredError:"Please answer the question.",requiredErrorInPanel:"Please answer at least one question.",requiredInAllRowsError:"Please answer questions in all rows.",numericError:"The value should be numeric.",textMinLength:"Please enter at least {0} characters.",textMaxLength:"Please enter less than {0} characters.",textMinMaxLength:"Please enter more than {0} and less than {1} characters.",minRowCountError:"Please fill in at least {0} rows.",minSelectError:"Please select at least {0} variants.",maxSelectError:"Please select no more than {0} variants.",numericMinMax:"The '{0}' should be equal or more than {1} and equal or less than {2}",numericMin:"The '{0}' should be equal or more than {1}",numericMax:"The '{0}' should be equal or less than {1}",invalidEmail:"Please enter a valid e-mail address.",invalidExpression:"The expression: {0} should return 'true'.",urlRequestError:"The request returned error '{0}'. {1}",urlGetChoicesError:"The request returned empty data or the 'path' property is incorrect",exceedMaxSize:"The file size should not exceed {0}.",otherRequiredError:"Please enter the other value.",uploadingFile:"Your file is uploading. Please wait several seconds and try again.",loadingFile:"Loading...",chooseFile:"Choose file(s)...",noFileChosen:"No file chosen",confirmDelete:"Do you want to delete the record?",keyDuplicationError:"This value should be unique.",addColumn:"Add column",addRow:"Add row",removeRow:"Remove",addPanel:"Add new",removePanel:"Remove",choices_Item:"item",matrix_column:"Column",matrix_row:"Row",savingData:"The results are saving on the server...",savingDataError:"An error occurred and we could not save the results.",savingDataSuccess:"The results were saved successfully!",saveAgainButton:"Try again",timerMin:"min",timerSec:"sec",timerSpentAll:"You have spent {0} on this page and {1} in total.",timerSpentPage:"You have spent {0} on this page.",timerSpentSurvey:"You have spent {0} in total.",timerLimitAll:"You have spent {0} of {1} on this page and {2} of {3} in total.",timerLimitPage:"You have spent {0} of {1} on this page.",timerLimitSurvey:"You have spent {0} of {1} in total.",cleanCaption:"Clean",clearCaption:"Clear",chooseFileCaption:"Choose file",removeFileCaption:"Remove this file",booleanCheckedLabel:"Yes",booleanUncheckedLabel:"No",confirmRemoveFile:"Are you sure that you want to remove this file: {0}?",confirmRemoveAllFiles:"Are you sure that you want to remove all files?",questionTitlePatternText:"Question Title"};r.surveyLocalization.locales.vi=i,r.surveyLocalization.localeNames.vi="vietnamese"},"./src/localization/welsh.ts":
/*!***********************************!*\
  !*** ./src/localization/welsh.ts ***!
  \***********************************/
/*! exports provided: welshSurveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"welshSurveyStrings",(function(){return i}));var r=n(/*! ../surveyStrings */"./src/surveyStrings.ts"),i={pagePrevText:"Blaenorol",pageNextText:"Nesaf",completeText:"Cwblhau",previewText:"Rhagolwg",editText:"Golygu",startSurveyText:"Dechrau",otherItemText:"Arall (disgrifiwch)",noneItemText:"Dim",selectAllItemText:"Dewis y Cyfan ",progressText:"Tudalen {0} o {1}",panelDynamicProgressText:"Cofnod {0} o {1}",questionsProgressText:"Wedi ateb {0}/{1} cwestiwn",emptySurvey:"Does dim modd gweld tudalen na chwestiwn yn yr arolwg.",completingSurvey:"Diolch am lenwir holiadur!",completingSurveyBefore:"Rydych chi wedi llenwir arolwg hwn yn barod yn l ein cofnodion.",loadingSurvey:"Wrthin Llwythor Arolwg...",optionsCaption:"Dewiswch...",value:"gwerth",requiredError:"Atebwch y cwestiwn.",requiredErrorInPanel:"Atebwch o leiaf un cwestiwn.",requiredInAllRowsError:"Atebwch y cwestiynau ym mhob rhes.",numericError:"Dylair gwerth fod yn rhif.",textMinLength:"Rhowch o leiaf {0} nod.",textMaxLength:"Rhowch lai na {0} nod.",textMinMaxLength:"Rhowch o leiaf {0} nod ond dim mwy na {1}.",minRowCountError:"Llenwch o leiaf {0} rhes.",minSelectError:"Dewiswch o leiaf {0} amrywiolyn.",maxSelectError:"Peidiwch  dewis mwy na {0} amrywiolyn.",numericMinMax:"Dylair '{0}' fod yr un fath  {1} neun fwy, ar fath  {2} neun llai",numericMin:"Dylair '{0}' fod yr un fath  {1} neun fwy",numericMax:"Dylair '{0}' fod yr un fath  {1} neun llai",invalidEmail:"Rhowch gyfeiriad e-bost dilys.",invalidExpression:"Dylair mynegiad {0} arwain at 'true'.",urlRequestError:"Roedd y cais wedi arwain at y gwall '{0}'. {1}",urlGetChoicesError:"Roedd y cais wedi arwain at ddata gwag neu mae priodwedd y path yn anghywir ",exceedMaxSize:"Ddylair ffeil ddim bod yn fwy na {0}.",otherRequiredError:"Rhowch y gwerth arall.",uploadingFile:"Mae eich ffeil wrthin llwytho i fyny. Arhoswch ychydig o eiliadau a rhoi cynnig arall arni.",loadingFile:"Wrthin llwytho...",chooseFile:"Dewiswch ffeil(iau)...",noFileChosen:"Heb ddewis ffeil ",confirmDelete:"Ydych chi am ddileur cofnod?",keyDuplicationError:"Dylair gwerth hwn fod yn unigryw.",addColumn:"Ychwanegu colofn ",addRow:"Ychwanegu rhes",removeRow:"Tynnu",addPanel:"Ychwanegu or newydd",removePanel:"Tynnu",choices_Item:"eitem",matrix_column:"Colofn",matrix_row:"Rhes",savingData:"Maer canlyniadaun cael eu cadw ar y gweinydd...",savingDataError:"Roedd gwall a doedd dim modd cadwr canlyniadau.",savingDataSuccess:"Wedi llwyddo i gadwr canlyniadau!",saveAgainButton:"Rhowch gynnig arall arni",timerMin:"mun",timerSec:"eil",timerSpentAll:"Rydych chi wedi treulio {0} ar y dudalen hon a {1} gydai gilydd.",timerSpentPage:"Rydych chi wedi treulio {0} ar y dudalen hon.",timerSpentSurvey:"Rydych chi wedi treulio {0} gydai gilydd.",timerLimitAll:"Rydych chi wedi treulio {0} o {1} ar y dudalen hon a {2} o {3} gydai gilydd.",timerLimitPage:"Rydych chi wedi treulio {0} o {1} ar y dudalen hon.",timerLimitSurvey:"Rydych chi wedi treulio {0} o {1} gydai gilydd.",cleanCaption:"Glanhau",clearCaption:"Clirio",chooseFileCaption:"Dewiswch ffeil ",removeFileCaption:"Tynnur ffeil hon ",booleanCheckedLabel:"Iawn",booleanUncheckedLabel:"Na",confirmRemoveFile:"Ydych chin sir eich bod am dynnur ffeil hon: {0}?",confirmRemoveAllFiles:"Ydych chin sir eich bod am dynnu pob ffeil?",questionTitlePatternText:"Teitl y Cwestiwn "};r.surveyLocalization.locales.cy=i,r.surveyLocalization.localeNames.cy="cymraeg"},"./src/main.scss":
/*!***********************!*\
  !*** ./src/main.scss ***!
  \***********************/
/*! no static exports found */function(e,t,n){},"./src/martixBase.ts":
/*!***************************!*\
  !*** ./src/martixBase.ts ***!
  \***************************/
/*! exports provided: QuestionMatrixBaseModel */function(e,t,n){"use strict";n.r(t),n.d(t,"QuestionMatrixBaseModel",(function(){return c}));var r,i=n(/*! ./itemvalue */"./src/itemvalue.ts"),o=n(/*! ./question */"./src/question.ts"),a=n(/*! ./jsonobject */"./src/jsonobject.ts"),s=n(/*! ./conditions */"./src/conditions.ts"),l=n(/*! ./helpers */"./src/helpers.ts"),u=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e){function t(t){var n=e.call(this,t)||this;return n.generatedVisibleRows=null,n.generatedTotalRow=null,n.filteredRows=null,n.filteredColumns=null,n.columns=n.createColumnValues(),n.rows=n.createItemValues("rows"),n}return u(t,e),t.prototype.createColumnValues=function(){return this.createItemValues("columns")},t.prototype.getType=function(){return"matrixbase"},Object.defineProperty(t.prototype,"isCompositeQuestion",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showHeader",{get:function(){return this.getPropertyValue("showHeader")},set:function(e){this.setPropertyValue("showHeader",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columns",{get:function(){return this.getPropertyValue("columns")},set:function(e){this.setPropertyValue("columns",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibleColumns",{get:function(){return this.filteredColumns?this.filteredColumns:this.columns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this.getPropertyValue("rows")},set:function(e){var t=this.processRowsOnSet(e);this.setPropertyValue("rows",t),this.filterItems()},enumerable:!1,configurable:!0}),t.prototype.processRowsOnSet=function(e){return e},t.prototype.getVisibleRows=function(){return[]},Object.defineProperty(t.prototype,"visibleRows",{get:function(){return this.getVisibleRows()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rowsVisibleIf",{get:function(){return this.getPropertyValue("rowsVisibleIf","")},set:function(e){this.setPropertyValue("rowsVisibleIf",e),this.filterItems()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnsVisibleIf",{get:function(){return this.getPropertyValue("columnsVisibleIf","")},set:function(e){this.setPropertyValue("columnsVisibleIf",e),this.filterItems()},enumerable:!1,configurable:!0}),t.prototype.runCondition=function(t,n){e.prototype.runCondition.call(this,t,n),this.runItemsCondition(t,n)},t.prototype.filterItems=function(){return this.areInvisibleElementsShowing?(this.onRowsChanged(),!1):!(this.isLoadingFromJson||!this.data)&&this.runItemsCondition(this.getDataFilteredValues(),this.getDataFilteredProperties())},t.prototype.onColumnsChanged=function(){},t.prototype.onRowsChanged=function(){this.fireCallback(this.visibleRowsChangedCallback)},t.prototype.shouldRunColumnExpression=function(){return!this.survey||!this.survey.areInvisibleElementsShowing},t.prototype.hasRowsAsItems=function(){return!0},t.prototype.runItemsCondition=function(e,t){var n=null;if(this.filteredRows&&!l.Helpers.isValueEmpty(this.defaultValue)){n=[];for(var r=0;r<this.filteredRows.length;r++)n.push(this.filteredRows[r])}var i=this.hasRowsAsItems()&&this.runConditionsForRows(e,t),o=this.runConditionsForColumns(e,t);return(i=o||i)&&(this.survey&&this.survey.isClearValueOnHidden&&(this.filteredColumns||this.filteredRows)&&this.clearIncorrectValues(),n&&this.restoreNewVisibleRowsValues(n),this.clearGeneratedRows(),o&&this.onColumnsChanged(),this.onRowsChanged()),i},t.prototype.clearGeneratedRows=function(){this.generatedVisibleRows=null},t.prototype.runConditionsForRows=function(e,t){var n=!!this.survey&&this.survey.areInvisibleElementsShowing,r=!n&&this.rowsVisibleIf?new s.ConditionRunner(this.rowsVisibleIf):null;this.filteredRows=[];var o=i.ItemValue.runConditionsForItems(this.rows,this.filteredRows,r,e,t,!n);return this.filteredRows.length===this.rows.length&&(this.filteredRows=null),o},t.prototype.runConditionsForColumns=function(e,t){var n=this.survey&&!this.survey.areInvisibleElementsShowing&&this.columnsVisibleIf?new s.ConditionRunner(this.columnsVisibleIf):null;this.filteredColumns=[];var r=i.ItemValue.runConditionsForItems(this.columns,this.filteredColumns,n,e,t,this.shouldRunColumnExpression());return this.filteredColumns.length===this.columns.length&&(this.filteredColumns=null),r},t.prototype.clearIncorrectValues=function(){var t=this.value;if(t){var n=null,r=!1,o=this.filteredRows?this.filteredRows:this.rows,a=this.filteredColumns?this.filteredColumns:this.columns;for(var s in t)i.ItemValue.getItemByValue(o,s)&&i.ItemValue.getItemByValue(a,t[s])?(null==n&&(n={}),n[s]=t[s]):r=!0;r&&(this.value=n),e.prototype.clearIncorrectValues.call(this)}},t.prototype.clearInvisibleValuesInRows=function(){if(!this.isEmpty()){for(var e=this.getUnbindValue(this.value),t=this.rows,n=0;n<t.length;n++){var r=t[n].value;e[r]&&!t[n].isVisible&&delete e[r]}l.Helpers.isTwoValueEquals(e,this.value)||(this.value=e)}},t.prototype.restoreNewVisibleRowsValues=function(e){var t=this.filteredRows?this.filteredRows:this.rows,n=this.defaultValue,r=this.getUnbindValue(this.value),o=!1;for(var a in n)i.ItemValue.getItemByValue(t,a)&&!i.ItemValue.getItemByValue(e,a)&&(null==r&&(r={}),r[a]=n[a],o=!0);o&&(this.value=r)},t}(o.Question);a.Serializer.addClass("matrixbase",["columnsVisibleIf:condition","rowsVisibleIf:condition",{name:"showHeader:boolean",default:!0}],void 0,"question")},"./src/page.ts":
/*!*********************!*\
  !*** ./src/page.ts ***!
  \*********************/
/*! exports provided: PageModel */function(e,t,n){"use strict";n.r(t),n.d(t,"PageModel",(function(){return l}));var r,i=n(/*! ./jsonobject */"./src/jsonobject.ts"),o=n(/*! ./helpers */"./src/helpers.ts"),a=n(/*! ./panel */"./src/panel.ts"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t){void 0===t&&(t="");var n=e.call(this,t)||this;n.hasShownValue=!1,n.isRandomizing=!1,n.timeSpent=0;var r=n;return n.locTitle.onGetTextCallback=function(e){return r.num>0?r.num+". "+e:e},n.createLocalizableString("navigationTitle",n,!0),n.createLocalizableString("navigationDescription",n,!0),n}return s(t,e),t.prototype.getType=function(){return"page"},t.prototype.toString=function(){return this.name},Object.defineProperty(t.prototype,"isPage",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"navigationTitle",{get:function(){return this.getLocalizableStringText("navigationTitle")},set:function(e){this.setLocalizableStringText("navigationTitle",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locNavigationTitle",{get:function(){return this.getLocalizableString("navigationTitle")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"navigationDescription",{get:function(){return this.getLocalizableStringText("navigationDescription")},set:function(e){this.setLocalizableStringText("navigationDescription",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locNavigationDescription",{get:function(){return this.getLocalizableString("navigationDescription")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"passed",{get:function(){return this.getPropertyValue("passed",!1)},set:function(e){this.setPropertyValue("passed",e)},enumerable:!1,configurable:!0}),t.prototype.delete=function(){this.survey&&this.removeSelfFromList(this.survey.pages)},t.prototype.onFirstRendering=function(){this.wasShown||e.prototype.onFirstRendering.call(this)},Object.defineProperty(t.prototype,"visibleIndex",{get:function(){return this.getPropertyValue("visibleIndex",-1)},set:function(e){this.setPropertyValue("visibleIndex",e)},enumerable:!1,configurable:!0}),t.prototype.canRenderFirstRows=function(){return!this.isDesignMode||0==this.visibleIndex},Object.defineProperty(t.prototype,"isStarted",{get:function(){return this.survey&&this.survey.isPageStarted(this)},enumerable:!1,configurable:!0}),t.prototype.calcCssClasses=function(){var e=this.css,t={page:{},pageTitle:"",pageDescription:"",row:""};return this.copyCssClasses(t.page,e.page),e.pageTitle&&(t.pageTitle=e.pageTitle),e.pageDescription&&(t.pageDescription=e.pageDescription),e.row&&(t.row=e.row),this.survey&&this.survey.updatePageCssClasses(this,t),t},t.prototype.getIsPageVisible=function(t){return!this.isStarted&&e.prototype.getIsPageVisible.call(this,t)},Object.defineProperty(t.prototype,"num",{get:function(){return this.getPropertyValue("num",-1)},set:function(e){this.num!=e&&(this.setPropertyValue("num",e),this.onNumChanged(e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"navigationButtonsVisibility",{get:function(){return this.getPropertyValue("navigationButtonsVisibility")},set:function(e){this.setPropertyValue("navigationButtonsVisibility",e.toLowerCase())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wasShown",{get:function(){return this.hasShownValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasShown",{get:function(){return this.wasShown},enumerable:!1,configurable:!0}),t.prototype.setWasShown=function(e){e!=this.hasShownValue&&(this.hasShownValue=e,this.isDesignMode||1==e&&this.areQuestionsRandomized&&this.randomizeElements())},t.prototype.randomizeElements=function(){if(!this.isRandomizing){this.isRandomizing=!0;for(var e=[],t=this.elements,n=0;n<t.length;n++)e.push(t[n]);var r=o.Helpers.randomizeArray(e);for(this.elements.splice(0,this.elements.length),n=0;n<r.length;n++)this.elements.push(r[n]);this.isRandomizing=!1}},Object.defineProperty(t.prototype,"areQuestionsRandomized",{get:function(){return"random"==("default"==this.questionsOrder&&this.survey?this.survey.questionsOrder:this.questionsOrder)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionsOrder",{get:function(){return this.getPropertyValue("questionsOrder")},set:function(e){this.setPropertyValue("questionsOrder",e)},enumerable:!1,configurable:!0}),t.prototype.scrollToTop=function(){this.survey&&this.survey.scrollElementToTop(this,null,this,this.id)},t.prototype.getPanels=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var n=new Array;return this.addPanelsIntoList(n,e,t),n},Object.defineProperty(t.prototype,"maxTimeToFinish",{get:function(){return this.getPropertyValue("maxTimeToFinish",0)},set:function(e){this.setPropertyValue("maxTimeToFinish",e)},enumerable:!1,configurable:!0}),t.prototype.onNumChanged=function(e){},t.prototype.onVisibleChanged=function(){this.isRandomizing||(e.prototype.onVisibleChanged.call(this),null!=this.survey&&this.survey.pageVisibilityChanged(this,this.isVisible))},t.prototype.dragDropStart=function(e,t,n){void 0===n&&(n=-1),this.dragDropInfo=new a.DragDropInfo(e,t,n)},t.prototype.dragDropMoveTo=function(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!1),!this.dragDropInfo)return!1;if(this.dragDropInfo.destination=e,this.dragDropInfo.isBottom=t,this.dragDropInfo.isEdge=n,this.correctDragDropInfo(this.dragDropInfo),!this.dragDropCanDropTagert())return!1;if(!this.dragDropCanDropSource()||!this.dragDropAllowFromSurvey()){if(this.dragDropInfo.source){var r=this.dragDropFindRow(this.dragDropInfo.target);this.updateRowsRemoveElementFromRow(this.dragDropInfo.target,r)}return!1}return this.dragDropAddTarget(this.dragDropInfo),!0},t.prototype.correctDragDropInfo=function(e){if(e.destination){var t=e.destination.isPanel?e.destination:null;t&&(e.target.isLayoutTypeSupported(t.getChildrenLayoutType())||(e.isEdge=!0))}},t.prototype.dragDropAllowFromSurvey=function(){var e=this.dragDropInfo.destination;if(!e||!this.survey)return!0;var t=null,n=null,r=e.isPage||!this.dragDropInfo.isEdge&&e.isPanel?e:e.parent;if(!e.isPage){var i=e.parent;if(i){var o=i.elements,a=o.indexOf(e);a>-1&&(t=e,n=e,this.dragDropInfo.isBottom?t=a<o.length-1?o[a+1]:null:n=a>0?o[a-1]:null)}}var s={target:this.dragDropInfo.target,source:this.dragDropInfo.source,parent:r,insertAfter:n,insertBefore:t};return this.survey.dragAndDropAllow(s)},t.prototype.dragDropFinish=function(e){if(void 0===e&&(e=!1),this.dragDropInfo){var t=this.dragDropInfo.target,n=this.dragDropFindRow(t),r=this.dragDropGetElementIndex(t,n);if(this.updateRowsRemoveElementFromRow(t,n),!e&&n){var i=this.dragDropInfo.source;i&&i.parent&&(n.panel==i.parent?(n.panel.dragDropMoveElement(i,t,r),r=-1):i.parent.removeElement(i)),r>-1&&n.panel.addElement(t,r)}return this.dragDropInfo=null,e?null:t}},t.prototype.dragDropGetElementIndex=function(e,t){if(!t)return-1;var n=t.elements.indexOf(e);if(0==t.index)return n;var r=t.panel.rows[t.index-1],i=r.elements[r.elements.length-1];return n+t.panel.elements.indexOf(i)+1},t.prototype.dragDropCanDropTagert=function(){var e=this.dragDropInfo.destination;return!(e&&!e.isPage)||this.dragDropCanDropCore(this.dragDropInfo.target,e)},t.prototype.dragDropCanDropSource=function(){var e=this.dragDropInfo.source;if(!e)return!0;var t=this.dragDropInfo.destination;return!!this.dragDropCanDropCore(e,t)&&this.dragDropCanDropNotNext(e,t,this.dragDropInfo.isEdge,this.dragDropInfo.isBottom)},t.prototype.dragDropCanDropCore=function(e,t){if(!t)return!0;if(this.dragDropIsSameElement(t,e))return!1;if(e.isPanel){var n=e;if(n.containsElement(t)||n.getElementByName(t.name))return!1}return!0},t.prototype.dragDropCanDropNotNext=function(e,t,n,r){if(!t||t.isPanel&&!n)return!0;if(void 0===e.parent||e.parent!==t.parent)return!0;var i=e.parent,o=i.elements.indexOf(e),a=i.elements.indexOf(t);return a<o&&!r&&a--,r&&a++,o<a?a-o>1:o-a>0},t.prototype.dragDropIsSameElement=function(e,t){return e==t||e.name==t.name},t.prototype.ensureRowsVisibility=function(){e.prototype.ensureRowsVisibility.call(this),this.getPanels().forEach((function(e){return e.ensureRowsVisibility()}))},t}(a.PanelModelBase);i.Serializer.addClass("page",[{name:"navigationButtonsVisibility",default:"inherit",choices:["inherit","show","hide"]},{name:"questionsOrder",default:"default",choices:["default","initial","random"]},{name:"maxTimeToFinish:number",default:0,minValue:0},{name:"navigationTitle",visibleIf:function(e){return!!e.survey&&"buttons"===e.survey.progressBarType},serializationProperty:"locNavigationTitle"},{name:"navigationDescription",visibleIf:function(e){return!!e.survey&&"buttons"===e.survey.progressBarType},serializationProperty:"locNavigationDescription"},{name:"title:text",serializationProperty:"locTitle"},{name:"description:text",serializationProperty:"locDescription"}],(function(){return new l}),"panelbase")},"./src/panel.ts":
/*!**********************!*\
  !*** ./src/panel.ts ***!
  \**********************/
/*! exports provided: DragDropInfo, QuestionRowModel, PanelModelBase, PanelModel */function(e,t,n){"use strict";n.r(t),n.d(t,"DragDropInfo",(function(){return m})),n.d(t,"QuestionRowModel",(function(){return g})),n.d(t,"PanelModelBase",(function(){return y})),n.d(t,"PanelModel",(function(){return v}));var r,i=n(/*! ./jsonobject */"./src/jsonobject.ts"),o=n(/*! ./helpers */"./src/helpers.ts"),a=n(/*! ./base */"./src/base.ts"),s=n(/*! ./survey-element */"./src/survey-element.ts"),l=n(/*! ./question */"./src/question.ts"),u=n(/*! ./conditions */"./src/conditions.ts"),c=n(/*! ./questionfactory */"./src/questionfactory.ts"),p=n(/*! ./error */"./src/error.ts"),d=n(/*! ./settings */"./src/settings.ts"),h=n(/*! ./utils/utils */"./src/utils/utils.ts"),f=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),m=function(e,t,n){void 0===n&&(n=-1),this.source=e,this.target=t,this.nestedPanelDepth=n},g=function(e){function t(n){var r=e.call(this)||this;return r.panel=n,r._scrollableParent=void 0,r._updateVisibility=void 0,r.idValue=t.getRowId(),r.visible=n.areInvisibleElementsShowing,r.createNewArray("elements"),r.createNewArray("visibleElements"),r}return f(t,e),t.getRowId=function(){return"pr_"+t.rowCounter++},t.prototype.startLazyRendering=function(e,t){var n=this;void 0===t&&(t=h.findScrollableParent),this._scrollableParent=t(e),this.isNeedRender=!(this._scrollableParent.scrollHeight>this._scrollableParent.clientHeight),this._scrollableParent===document.documentElement&&(this._scrollableParent=window),this.isNeedRender||(this._updateVisibility=function(){var t=Object(h.isElementVisible)(e,50);!n.isNeedRender&&t&&(n.isNeedRender=!0,n.stopLazyRendering())},setTimeout((function(){n._scrollableParent&&n._scrollableParent.addEventListener&&n._scrollableParent.addEventListener("scroll",n._updateVisibility),n.ensureVisibility()}),10))},t.prototype.ensureVisibility=function(){this._updateVisibility&&this._updateVisibility()},t.prototype.stopLazyRendering=function(){this._scrollableParent&&this._updateVisibility&&this._scrollableParent.removeEventListener&&this._scrollableParent.removeEventListener("scroll",this._updateVisibility),this._scrollableParent=void 0,this._updateVisibility=void 0},t.prototype.setIsLazyRendering=function(e){this.isLazyRenderingValue=e,this.isNeedRender=!e},t.prototype.isLazyRendering=function(){return!0===this.isLazyRenderingValue},Object.defineProperty(t.prototype,"id",{get:function(){return this.idValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"elements",{get:function(){return this.getPropertyValue("elements")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibleElements",{get:function(){return this.getPropertyValue("visibleElements")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this.getPropertyValue("visible",!0)},set:function(e){this.setPropertyValue("visible",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNeedRender",{get:function(){return this.getPropertyValue("isneedrender",!0)},set:function(e){this.setPropertyValue("isneedrender",e)},enumerable:!1,configurable:!0}),t.prototype.updateVisible=function(){this.visible=this.calcVisible(),this.setWidth()},t.prototype.addElement=function(e){this.elements.push(e),this.updateVisible()},Object.defineProperty(t.prototype,"index",{get:function(){return this.panel.rows.indexOf(this)},enumerable:!1,configurable:!0}),t.prototype.setWidth=function(){var e=this.visibleElements.length;if(0!=e){for(var t=0,n=[],r=0;r<this.elements.length;r++){var i=this.elements[r];if(this.setElementMaxMinWidth(i),i.isVisible){var o=this.getElementWidth(i);o&&(i.renderWidth=this.getRenderedWidthFromWidth(o),n.push(i)),i.rightIndent=t<e-1?1:0,t++}else i.renderWidth=""}for(r=0;r<this.elements.length;r++)!(i=this.elements[r]).isVisible||n.indexOf(i)>-1||(0==n.length?i.renderWidth=(100/e).toFixed(6)+"%":i.renderWidth=this.getRenderedCalcWidth(i,n,e))}},t.prototype.setElementMaxMinWidth=function(e){e.width&&"string"==typeof e.width&&-1===e.width.indexOf("%")&&(e.minWidth=e.width,e.maxWidth=e.width)},t.prototype.getRenderedCalcWidth=function(e,t,n){for(var r="100%",i=0;i<t.length;i++)r+=" - "+t[i].renderWidth;var o=n-t.length;return o>1&&(r="("+r+")/"+o.toString()),"calc("+r+")"},t.prototype.getElementWidth=function(e){var t=e.width;return t&&"string"==typeof t?t.trim():""},t.prototype.getRenderedWidthFromWidth=function(e){return o.Helpers.isNumber(e)?e+"px":e},t.prototype.calcVisible=function(){for(var e=[],t=0;t<this.elements.length;t++)this.elements[t].isVisible&&e.push(this.elements[t]);return this.needToUpdateVisibleElements(e)&&this.setPropertyValue("visibleElements",e),e.length>0},t.prototype.needToUpdateVisibleElements=function(e){if(e.length!==this.visibleElements.length)return!0;for(var t=0;t<e.length;t++)if(e[t]!==this.visibleElements[t])return!0;return!1},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.stopLazyRendering()},t.rowCounter=100,t}(a.Base),y=function(e){function t(n){void 0===n&&(n="");var r=e.call(this,n)||this;return r.isQuestionsReady=!1,r.questionsValue=new Array,r.createNewArray("rows"),r.elementsValue=r.createNewArray("elements",r.onAddElement.bind(r),r.onRemoveElement.bind(r)),r.id=t.getPanelId(),r.createLocalizableString("title",r,!0),r.createLocalizableString("description",r,!0),r.createLocalizableString("requiredErrorText",r),r.registerFunctionOnPropertyValueChanged("questionTitleLocation",(function(){r.onVisibleChanged.bind(r),r.updateElementCss(!0)})),r.registerFunctionOnPropertiesValueChanged(["questionStartIndex","showQuestionNumbers"],(function(){r.updateVisibleIndexes()})),r}return f(t,e),t.getPanelId=function(){return"sp_"+t.panelCounter++},t.prototype.getType=function(){return"panelbase"},t.prototype.setSurveyImpl=function(t){e.prototype.setSurveyImpl.call(this,t),this.isDesignMode&&this.onVisibleChanged();for(var n=0;n<this.elements.length;n++)this.elements[n].setSurveyImpl(t)},t.prototype.endLoadingFromJson=function(){e.prototype.endLoadingFromJson.call(this),this.markQuestionListDirty(),this.onRowsChanged()},Object.defineProperty(t.prototype,"title",{get:function(){return this.getLocalizableStringText("title")},set:function(e){this.setLocalizableStringText("title",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTitle",{get:function(){return this.getLocalizableString("title")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_showTitle",{get:function(){return this.survey.showPageTitles&&this.title.length>0||this.isDesignMode&&d.settings.allowShowEmptyTitleInDesignMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_showDescription",{get:function(){return this.survey.showPageTitles&&this.description.length>0||this.isDesignMode&&d.settings.allowShowEmptyTitleInDesignMode&&d.settings.allowShowEmptyDescriptionInDesignMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"description",{get:function(){return this.getLocalizableStringText("description")},set:function(e){this.setLocalizableStringText("description",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locDescription",{get:function(){return this.getLocalizableString("description")},enumerable:!1,configurable:!0}),t.prototype.localeChanged=function(){e.prototype.localeChanged.call(this);for(var t=0;t<this.elements.length;t++)this.elements[t].localeChanged()},t.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this);for(var t=0;t<this.elements.length;t++)this.elements[t].locStrsChanged()},Object.defineProperty(t.prototype,"requiredText",{get:function(){return null!=this.survey&&this.isRequired?this.survey.requiredText:""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titlePattern",{get:function(){return this.survey?this.survey.questionTitlePattern:"numTitleRequire"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRequireTextOnStart",{get:function(){return this.isRequired&&"requireNumTitle"==this.titlePattern},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRequireTextBeforeTitle",{get:function(){return this.isRequired&&"numRequireTitle"==this.titlePattern},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRequireTextAfterTitle",{get:function(){return this.isRequired&&"numTitleRequire"==this.titlePattern},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredErrorText",{get:function(){return this.getLocalizableStringText("requiredErrorText")},set:function(e){this.setLocalizableStringText("requiredErrorText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locRequiredErrorText",{get:function(){return this.getLocalizableString("requiredErrorText")},enumerable:!1,configurable:!0}),t.prototype.getLocale=function(){return this.survey?this.survey.getLocale():""},t.prototype.getMarkdownHtml=function(e,t){return this.survey?this.survey.getSurveyMarkdownHtml(this,e,t):null},t.prototype.getRenderer=function(e){return this.survey?this.survey.getRendererForString(this,e):null},t.prototype.getProcessedText=function(e){return this.textProcessor?this.textProcessor.processText(e,!0):e},Object.defineProperty(t.prototype,"parent",{get:function(){return this.getPropertyValue("parent",null)},set:function(e){this.setPropertyValue("parent",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depth",{get:function(){return null==this.parent?0:this.parent.depth+1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibleIf",{get:function(){return this.getPropertyValue("visibleIf","")},set:function(e){this.setPropertyValue("visibleIf",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssClasses",{get:function(){return this.cssClassesValue||(this.cssClassesValue=this.calcCssClasses()),this.cssClassesValue},enumerable:!1,configurable:!0}),t.prototype.calcCssClasses=function(){var e={panel:{},error:{},row:""};return this.copyCssClasses(e.panel,this.css.panel),this.copyCssClasses(e.error,this.css.error),this.css.row&&(e.row=this.css.row),this.survey&&this.survey.updatePanelCssClasses(this,e),e},Object.defineProperty(t.prototype,"css",{get:function(){return this.survey?this.survey.getCss():{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.getPropertyValue("id")},set:function(e){this.setPropertyValue("id",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPanel",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.getPanel=function(){return this},t.prototype.getLayoutType=function(){return"row"},t.prototype.isLayoutTypeSupported=function(e){return"flow"!==e},Object.defineProperty(t.prototype,"questions",{get:function(){if(!this.isQuestionsReady){this.questionsValue=[];for(var e=0;e<this.elements.length;e++){var t=this.elements[e];if(t.isPanel)for(var n=t.questions,r=0;r<n.length;r++)this.questionsValue.push(n[r]);else this.questionsValue.push(t)}this.isQuestionsReady=!0}return this.questionsValue},enumerable:!1,configurable:!0}),t.prototype.getValidName=function(e){return e?e.trim():e},t.prototype.getQuestionByName=function(e){for(var t=this.questions,n=0;n<t.length;n++)if(t[n].name==e)return t[n];return null},t.prototype.getElementByName=function(e){for(var t=this.elements,n=0;n<t.length;n++){var r=t[n];if(r.name==e)return r;var i=r.getPanel();if(i){var o=i.getElementByName(e);if(o)return o}}return null},t.prototype.getQuestionByValueName=function(e){for(var t=this.questions,n=0;n<t.length;n++)if(t[n].getValueName()==e)return t[n];return null},t.prototype.getValue=function(){for(var e={},t=this.questions,n=0;n<t.length;n++){var r=t[n];if(!r.isEmpty()){var i=r.getValueName();if(e[i]=r.value,this.data){var o=this.data.getComment(i);o&&(e[i+d.settings.commentPrefix]=o)}}}return e},t.prototype.getDisplayValue=function(e){for(var t={},n=this.questions,r=0;r<n.length;r++){var i=n[r];i.isEmpty()||(t[e?i.title:i.getValueName()]=i.getDisplayValue(e))}return t},t.prototype.getComments=function(){var e={};if(!this.data)return e;for(var t=this.questions,n=0;n<t.length;n++){var r=t[n],i=this.data.getComment(r.getValueName());i&&(e[r.getValueName()]=i)}return e},t.prototype.clearIncorrectValues=function(){for(var e=0;e<this.elements.length;e++)this.elements[e].clearIncorrectValues()},t.prototype.clearErrors=function(){for(var e=0;e<this.elements.length;e++)this.elements[e].clearErrors();this.errors=[]},t.prototype.markQuestionListDirty=function(){this.isQuestionsReady=!1,this.parent&&this.parent.markQuestionListDirty()},Object.defineProperty(t.prototype,"elements",{get:function(){return this.elementsValue},enumerable:!1,configurable:!0}),t.prototype.getElementsInDesign=function(e){return void 0===e&&(e=!1),this.elements},t.prototype.containsElement=function(e){for(var t=0;t<this.elements.length;t++){var n=this.elements[t];if(n==e)return!0;var r=n.getPanel();if(r&&r.containsElement(e))return!0}return!1},Object.defineProperty(t.prototype,"isRequired",{get:function(){return this.getPropertyValue("isRequired",!1)},set:function(e){this.setPropertyValue("isRequired",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredIf",{get:function(){return this.getPropertyValue("requiredIf","")},set:function(e){this.setPropertyValue("requiredIf",e)},enumerable:!1,configurable:!0}),t.prototype.searchText=function(t,n){e.prototype.searchText.call(this,t,n);for(var r=0;r<this.elements.length;r++)this.elements[r].searchText(t,n)},t.prototype.hasErrors=function(e,t,n){return void 0===e&&(e=!0),void 0===t&&(t=!1),void 0===n&&(n=null),n=n||{fireCallback:e,focuseOnFirstError:t,firstErrorQuestion:null,result:!1},this.hasErrorsCore(n),n.firstErrorQuestion&&n.firstErrorQuestion.focus(!0),n.result},t.prototype.hasErrorsInPanels=function(e){var t=[];if(this.hasRequiredError(e,t),this.survey){var n=this.survey.validatePanel(this);n&&(t.push(n),e.result=!0)}e.fireCallback&&(this.survey&&this.survey.beforeSettingPanelErrors(this,t),this.errors=t)},t.prototype.getErrorCustomText=function(e,t){return this.survey?this.survey.getErrorCustomText(e,t):e},t.prototype.hasRequiredError=function(e,t){if(this.isRequired){var n=[];if(this.addQuestionsToList(n,!0),0!=n.length){for(var r=0;r<n.length;r++)if(!n[r].isEmpty())return;e.result=!0,t.push(new p.OneAnswerRequiredError(this.requiredErrorText,this)),e.focuseOnFirstError&&!e.firstErrorQuestion&&(e.firstErrorQuestion=n[0])}}},t.prototype.hasErrorsCore=function(e){for(var t=this.elements,n=null,r=0;r<t.length;r++)if((n=t[r]).isVisible)if(n.isPanel)n.hasErrorsCore(e);else{var i=n;if(i.isReadOnly)continue;i.hasErrors(e.fireCallback,e)&&(e.focuseOnFirstError&&null==e.firstErrorQuestion&&(e.firstErrorQuestion=i),e.result=!0)}this.hasErrorsInPanels(e),this.updateContainsErrors()},t.prototype.getContainsErrors=function(){var t=e.prototype.getContainsErrors.call(this);if(t)return t;for(var n=this.elements,r=0;r<n.length;r++)if(n[r].containsErrors)return!0;return!1},t.prototype.updateElementVisibility=function(){for(var e=0;e<this.elements.length;e++){var t=this.elements[e];t.setPropertyValue("isVisible",t.isVisible),t.isPanel&&t.updateElementVisibility()}},t.prototype.getFirstQuestionToFocus=function(e){void 0===e&&(e=!1);for(var t=this.elements,n=0;n<t.length;n++){var r=t[n];if(r.isVisible)if(r.isPanel){var i=r.getFirstQuestionToFocus(e);if(i)return i}else{var o=r;if(o.hasInput&&(!e||o.currentErrorCount>0))return o}}return null},t.prototype.focusFirstQuestion=function(){var e=this.getFirstQuestionToFocus();e&&e.focus()},t.prototype.focusFirstErrorQuestion=function(){var e=this.getFirstQuestionToFocus(!0);e&&e.focus()},t.prototype.addQuestionsToList=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1),this.addElementsToList(e,t,n,!1)},t.prototype.addPanelsIntoList=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1),this.addElementsToList(e,t,n,!0)},t.prototype.addElementsToList=function(e,t,n,r){t&&!this.visible||this.addElementsToListCore(e,this.elements,t,n,r)},t.prototype.addElementsToListCore=function(e,t,n,r,i){for(var o=0;o<t.length;o++){var a=t[o];n&&!a.visible||((i&&a.isPanel||!i&&!a.isPanel)&&e.push(a),a.isPanel?a.addElementsToListCore(e,a.elements,n,r,i):r&&this.addElementsToListCore(e,a.getElementsInDesign(!1),n,r,i))}},Object.defineProperty(t.prototype,"isActive",{get:function(){return!this.survey||this.survey.currentPage==this.root},enumerable:!1,configurable:!0}),t.prototype.updateCustomWidgets=function(){for(var e=0;e<this.elements.length;e++)this.elements[e].updateCustomWidgets()},Object.defineProperty(t.prototype,"questionTitleLocation",{get:function(){return this.getPropertyValue("questionTitleLocation")},set:function(e){this.setPropertyValue("questionTitleLocation",e.toLowerCase())},enumerable:!1,configurable:!0}),t.prototype.getQuestionTitleLocation=function(){return this.onGetQuestionTitleLocation?this.onGetQuestionTitleLocation():"default"!=this.questionTitleLocation?this.questionTitleLocation:this.parent?this.parent.getQuestionTitleLocation():this.survey?this.survey.questionTitleLocation:"top"},t.prototype.getStartIndex=function(){return this.parent?this.parent.getQuestionStartIndex():this.survey?this.survey.questionStartIndex:""},t.prototype.getQuestionStartIndex=function(){return this.getStartIndex()},t.prototype.getChildrenLayoutType=function(){return"row"},t.prototype.getProgressInfo=function(){return s.SurveyElement.getProgressInfoByElements(this.elements,this.isRequired)},Object.defineProperty(t.prototype,"root",{get:function(){for(var e=this;e.parent;)e=e.parent;return e},enumerable:!1,configurable:!0}),t.prototype.childVisibilityChanged=function(){this.getIsPageVisible(null)!==this.getPropertyValue("isVisible",!0)&&this.onVisibleChanged()},t.prototype.createRowAndSetLazy=function(e){var t=this.createRow();return t.setIsLazyRendering(this.isLazyRenderInRow(e)),t},t.prototype.createRow=function(){return new g(this)},t.prototype.onSurveyLoad=function(){for(var e=0;e<this.elements.length;e++)this.elements[e].onSurveyLoad();this.onElementVisibilityChanged(this)},t.prototype.onFirstRendering=function(){for(var e=0;e<this.elements.length;e++)this.elements[e].onFirstRendering();this.onRowsChanged()},Object.defineProperty(t.prototype,"rows",{get:function(){return this.getPropertyValue("rows")},enumerable:!1,configurable:!0}),t.prototype.ensureRowsVisibility=function(){this.rows.forEach((function(e){e.ensureVisibility()}))},t.prototype.onRowsChanged=function(){this.isLoadingFromJson||this.setPropertyValue("rows",this.buildRows())},t.prototype.onAddElement=function(e,t){if(e.setSurveyImpl(this.surveyImpl),e.parent=this,this.markQuestionListDirty(),this.updateRowsOnElementAdded(e,t),e.isPanel){var n=e;this.survey&&this.survey.panelAdded(n,t,this,this.root)}else if(this.survey){var r=e;this.survey.questionAdded(r,t,this,this.root)}this.addElementCallback&&this.addElementCallback(e);var i=this;e.registerFunctionOnPropertiesValueChanged(["visible","isVisible"],(function(){i.onElementVisibilityChanged(e)}),this.id),e.registerFunctionOnPropertyValueChanged("startWithNewLine",(function(){i.onElementStartWithNewLineChanged(e)}),this.id),this.onElementVisibilityChanged(this)},t.prototype.onRemoveElement=function(e){e.parent=null,this.markQuestionListDirty(),e.unRegisterFunctionOnPropertiesValueChanged(["visible","isVisible","startWithNewLine"],this.id),this.updateRowsOnElementRemoved(e),e.isPanel?this.survey&&this.survey.panelRemoved(e):this.survey&&this.survey.questionRemoved(e),this.removeElementCallback&&this.removeElementCallback(e),this.onElementVisibilityChanged(this)},t.prototype.onElementVisibilityChanged=function(e){this.isLoadingFromJson||(this.updateRowsVisibility(e),this.childVisibilityChanged(),this.parent&&this.parent.onElementVisibilityChanged(this))},t.prototype.onElementStartWithNewLineChanged=function(e){this.onRowsChanged()},t.prototype.updateRowsVisibility=function(e){for(var t=this.rows,n=0;n<t.length;n++){var r=t[n];if(r.elements.indexOf(e)>-1){r.updateVisible();break}}},t.prototype.canBuildRows=function(){return!this.isLoadingFromJson&&"row"==this.getChildrenLayoutType()},t.prototype.buildRows=function(){if(!this.canBuildRows())return[];for(var e=new Array,t=0;t<this.elements.length;t++){var n=this.elements[t],r=0==t||n.startWithNewLine,i=r?this.createRowAndSetLazy(e.length):e[e.length-1];r&&e.push(i),i.addElement(n)}for(t=0;t<e.length;t++)e[t].updateVisible();return e},t.prototype.isLazyRenderInRow=function(e){return!(!this.survey||!this.survey.isLazyRendering)&&(e>=d.settings.lazyRowsRenderingStartRow||!this.canRenderFirstRows())},t.prototype.canRenderFirstRows=function(){return this.isPage},t.prototype.updateRowsOnElementAdded=function(e,t){if(this.canBuildRows()){var n=new m(null,e);n.target=e,n.isEdge=this.elements.length>1,this.elements.length<2?n.destination=this:(n.isBottom=t>0,n.destination=0==t?this.elements[1]:this.elements[t-1]),this.dragDropAddTargetToRow(n,null)}},t.prototype.updateRowsOnElementRemoved=function(e){this.canBuildRows()&&this.updateRowsRemoveElementFromRow(e,this.findRowByElement(e))},t.prototype.updateRowsRemoveElementFromRow=function(e,t){if(t&&t.panel){var n=t.elements.indexOf(e);n<0||(t.elements.splice(n,1),t.elements.length>0?t.updateVisible():t.index>=0&&t.panel.rows.splice(t.index,1))}},t.prototype.findRowByElement=function(e){for(var t=this.rows,n=0;n<t.length;n++)if(t[n].elements.indexOf(e)>-1)return t[n];return null},t.prototype.elementWidthChanged=function(e){if(!this.isLoadingFromJson){var t=this.findRowByElement(e);t&&t.updateVisible()}},Object.defineProperty(t.prototype,"processedTitle",{get:function(){return this.getRenderedTitle(this.locTitle.textOrHtml)},enumerable:!1,configurable:!0}),t.prototype.getRenderedTitle=function(e){return null!=this.textProcessor?this.textProcessor.processText(e,!0):e},Object.defineProperty(t.prototype,"visible",{get:function(){return this.getPropertyValue("visible",!0)},set:function(e){e!==this.visible&&(this.setPropertyValue("visible",e),this.setPropertyValue("isVisible",this.isVisible),this.isLoadingFromJson||this.onVisibleChanged())},enumerable:!1,configurable:!0}),t.prototype.onVisibleChanged=function(){if(this.setPropertyValue("isVisible",this.isVisible),this.survey&&this.survey.isClearValueOnHiddenContainer&&!this.isLoadingFromJson)for(var e=this.questions,t=0;t<e.length;t++)this.isVisible?e[t].updateValueWithDefaults():e[t].clearValue()},Object.defineProperty(t.prototype,"isVisible",{get:function(){return this.areInvisibleElementsShowing||this.getIsPageVisible(null)},enumerable:!1,configurable:!0}),t.prototype.getIsPageVisible=function(e){if(!this.visible)return!1;for(var t=0;t<this.elements.length;t++)if(this.elements[t]!=e&&this.elements[t].isVisible)return!0;return!1},t.prototype.setVisibleIndex=function(e){if(!this.isVisible||e<0)return this.resetVisibleIndexes(),0;this.lastVisibleIndex=e;var t=e;e+=this.beforeSetVisibleIndex(e);for(var n=this.getPanelStartIndex(e),r=n,i=0;i<this.elements.length;i++)r+=this.elements[i].setVisibleIndex(r);return this.isContinueNumbering()&&(e+=r-n),e-t},t.prototype.updateVisibleIndexes=function(){void 0!==this.lastVisibleIndex&&(this.resetVisibleIndexes(),this.setVisibleIndex(this.lastVisibleIndex))},t.prototype.resetVisibleIndexes=function(){for(var e=0;e<this.elements.length;e++)this.elements[e].setVisibleIndex(-1)},t.prototype.beforeSetVisibleIndex=function(e){return 0},t.prototype.getPanelStartIndex=function(e){return e},t.prototype.isContinueNumbering=function(){return!0},Object.defineProperty(t.prototype,"isReadOnly",{get:function(){var e=!!this.parent&&this.parent.isReadOnly,t=!!this.survey&&this.survey.isDisplayMode;return this.readOnly||e||t},enumerable:!1,configurable:!0}),t.prototype.onReadOnlyChanged=function(){for(var t=0;t<this.elements.length;t++){var n=this.elements[t];n.setPropertyValue("isReadOnly",n.isReadOnly)}e.prototype.onReadOnlyChanged.call(this)},t.prototype.updateElementCss=function(t){this.cssClassesValue=void 0;for(var n=0;n<this.elements.length;n++)this.elements[n].updateElementCss(t);e.prototype.updateElementCss.call(this,t)},Object.defineProperty(t.prototype,"enableIf",{get:function(){return this.getPropertyValue("enableIf","")},set:function(e){this.setPropertyValue("enableIf",e)},enumerable:!1,configurable:!0}),t.prototype.addElement=function(e,t){return void 0===t&&(t=-1),!!this.canAddElement(e)&&(t<0||t>=this.elements.length?this.elements.push(e):this.elements.splice(t,0,e),!0)},t.prototype.insertElementAfter=function(e,t){var n=this.elements.indexOf(t);n>=0&&this.addElement(e,n+1)},t.prototype.insertElementBefore=function(e,t){var n=this.elements.indexOf(t);n>=0&&this.addElement(e,n)},t.prototype.canAddElement=function(e){return!!e&&e.isLayoutTypeSupported(this.getChildrenLayoutType())},t.prototype.addQuestion=function(e,t){return void 0===t&&(t=-1),this.addElement(e,t)},t.prototype.addPanel=function(e,t){return void 0===t&&(t=-1),this.addElement(e,t)},t.prototype.addNewQuestion=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=-1);var r=c.QuestionFactory.Instance.createQuestion(e,t);return this.addQuestion(r,n)?r:null},t.prototype.addNewPanel=function(e){void 0===e&&(e=null);var t=this.createNewPanel(e);return this.addPanel(t)?t:null},t.prototype.indexOf=function(e){return this.elements.indexOf(e)},t.prototype.createNewPanel=function(e){var t=i.Serializer.createClass("panel");return t.name=e,t},t.prototype.removeElement=function(e){var t=this.elements.indexOf(e);if(t<0){for(var n=0;n<this.elements.length;n++)if(this.elements[n].removeElement(e))return!0;return!1}return this.elements.splice(t,1),!0},t.prototype.removeQuestion=function(e){this.removeElement(e)},t.prototype.runCondition=function(e,t){if(!this.isDesignMode&&!this.isLoadingFromJson){for(var n=this.elements.slice(),r=0;r<n.length;r++)n[r].runCondition(e,t);this.areInvisibleElementsShowing||this.runVisibleCondition(e,t),this.runEnableCondition(e,t),this.runRequiredCondition(e,t)}},t.prototype.runVisibleCondition=function(e,t){var n=this;if(this.visibleIf){var r=new u.ConditionRunner(this.visibleIf);r.onRunComplete=function(e){n.visible=e},r.run(e,t)}},t.prototype.runEnableCondition=function(e,t){var n=this;if(this.enableIf){var r=new u.ConditionRunner(this.enableIf);r.onRunComplete=function(e){n.readOnly=!e},r.run(e,t)}},t.prototype.runRequiredCondition=function(e,t){var n=this;if(this.requiredIf){var r=new u.ConditionRunner(this.requiredIf);r.onRunComplete=function(e){n.isRequired=e},r.run(e,t)}},t.prototype.onAnyValueChanged=function(e){for(var t=this.elements,n=0;n<t.length;n++)t[n].onAnyValueChanged(e)},t.prototype.checkBindings=function(e,t){for(var n=this.elements,r=0;r<n.length;r++)n[r].checkBindings(e,t)},t.prototype.dragDropAddTarget=function(e){var t=this.dragDropFindRow(e.target);this.dragDropAddTargetToRow(e,t)&&this.updateRowsRemoveElementFromRow(e.target,t)},t.prototype.dragDropFindRow=function(e){if(!e||e.isPage)return null;for(var t=e,n=this.rows,r=0;r<n.length;r++)if(n[r].elements.indexOf(t)>-1)return n[r];for(r=0;r<this.elements.length;r++){var i=this.elements[r].getPanel();if(i){var o=i.dragDropFindRow(t);if(o)return o}}return null},t.prototype.dragDropAddTargetToRow=function(e,t){if(!e.destination)return!0;if(this.dragDropAddTargetToEmptyPanel(e))return!0;var n=e.destination,r=this.dragDropFindRow(n);return!r||(e.target.startWithNewLine?this.dragDropAddTargetToNewRow(e,r,t):this.dragDropAddTargetToExistingRow(e,r,t))},t.prototype.dragDropAddTargetToEmptyPanel=function(e){if(e.destination.isPage)return this.dragDropAddTargetToEmptyPanelCore(this.root,e.target,e.isBottom),!0;var t=e.destination;if(t.isPanel&&!e.isEdge){var n=t;if(e.target.template===t)return!1;if(e.nestedPanelDepth<0||e.nestedPanelDepth>=n.depth)return this.dragDropAddTargetToEmptyPanelCore(t,e.target,e.isBottom),!0}return!1},t.prototype.dragDropAddTargetToExistingRow=function(e,t,n){var r=t.elements.indexOf(e.destination);if(0==r&&!e.isBottom&&t.elements[0].startWithNewLine)return t.index>0?(e.isBottom=!0,t=t.panel.rows[t.index-1],e.destination=t.elements[t.elements.length-1],this.dragDropAddTargetToExistingRow(e,t,n)):this.dragDropAddTargetToNewRow(e,t,n);var i=-1;n==t&&(i=t.elements.indexOf(e.target)),e.isBottom&&r++;var o=this.findRowByElement(e.source);return(o!=t||o.elements.indexOf(e.source)!=r)&&r!=i&&(i>-1&&(t.elements.splice(i,1),i<r&&r--),t.elements.splice(r,0,e.target),t.updateVisible(),i<0)},t.prototype.dragDropAddTargetToNewRow=function(e,t,n){var r=t.panel.createRowAndSetLazy(t.panel.rows.length);r.addElement(e.target);var i=t.index;if(e.isBottom&&i++,n&&n.panel==r.panel&&n.index==i)return!1;var o=this.findRowByElement(e.source);return!(o&&o.panel==r.panel&&1==o.elements.length&&o.index==i||(t.panel.rows.splice(i,0,r),0))},t.prototype.dragDropAddTargetToEmptyPanelCore=function(e,t,n){var r=e.createRow();r.addElement(t),0==e.elements.length||n?e.rows.push(r):e.rows.splice(0,0,r)},t.prototype.dragDropMoveElement=function(e,t,n){n>e.parent.elements.indexOf(e)&&n--,this.removeElement(e),this.addElement(t,n)},t.prototype.dispose=function(){if(e.prototype.dispose.call(this),this.rows){for(var t=0;t<this.rows.length;t++)this.rows[t].dispose();this.rows.splice(0,this.rows.length)}for(t=0;t<this.elements.length;t++)this.elements[t].dispose();this.elements.splice(0,this.elements.length)},t.panelCounter=100,t}(s.SurveyElement),v=function(e){function t(t){void 0===t&&(t="");var n=e.call(this,t)||this,r=n;return n.registerFunctionOnPropertyValueChanged("width",(function(){r.parent&&r.parent.elementWidthChanged(r)})),n.registerFunctionOnPropertiesValueChanged(["indent","innerIndent","rightIndent"],(function(){r.onIndentChanged()})),n}return f(t,e),t.prototype.getType=function(){return"panel"},Object.defineProperty(t.prototype,"contentId",{get:function(){return this.id+"_content"},enumerable:!1,configurable:!0}),t.prototype.getSurvey=function(t){return void 0===t&&(t=!1),t?this.parent?this.parent.getSurvey(t):null:e.prototype.getSurvey.call(this,t)},t.prototype.onSurveyLoad=function(){e.prototype.onSurveyLoad.call(this),this.onIndentChanged()},t.prototype.onSetData=function(){e.prototype.onSetData.call(this),this.onIndentChanged()},Object.defineProperty(t.prototype,"isPanel",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"page",{get:function(){return this.getPage(this.parent)},set:function(e){this.setPage(this.parent,e)},enumerable:!1,configurable:!0}),t.prototype.delete=function(){this.parent&&this.removeSelfFromList(this.parent.elements)},t.prototype.moveTo=function(e,t){return void 0===t&&(t=null),this.moveToBase(this.parent,e,t)},Object.defineProperty(t.prototype,"visibleIndex",{get:function(){return this.getPropertyValue("visibleIndex",-1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showNumber",{get:function(){return this.getPropertyValue("showNumber",!1)},set:function(e){this.setPropertyValue("showNumber",e),this.notifySurveyOnVisibilityChanged()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showQuestionNumbers",{get:function(){return this.getPropertyValue("showQuestionNumbers","default")},set:function(e){this.setPropertyValue("showQuestionNumbers",e),this.notifySurveyOnVisibilityChanged()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionStartIndex",{get:function(){return this.getPropertyValue("questionStartIndex","")},set:function(e){this.setPropertyValue("questionStartIndex",e)},enumerable:!1,configurable:!0}),t.prototype.getQuestionStartIndex=function(){return this.questionStartIndex?this.questionStartIndex:e.prototype.getQuestionStartIndex.call(this)},Object.defineProperty(t.prototype,"no",{get:function(){return this.getPropertyValue("no","")},enumerable:!1,configurable:!0}),t.prototype.setNo=function(e){this.setPropertyValue("no",o.Helpers.getNumberByIndex(this.visibleIndex,this.getStartIndex()))},t.prototype.beforeSetVisibleIndex=function(e){var t=-1;return!this.showNumber||!this.isDesignMode&&this.locTitle.isEmpty||(t=e),this.setPropertyValue("visibleIndex",t),this.setNo(t),t<0?0:1},t.prototype.getPanelStartIndex=function(e){return"off"==this.showQuestionNumbers?-1:"onpanel"==this.showQuestionNumbers?0:e},t.prototype.isContinueNumbering=function(){return"off"!=this.showQuestionNumbers&&"onpanel"!=this.showQuestionNumbers},t.prototype.notifySurveyOnVisibilityChanged=function(){null==this.survey||this.isLoadingFromJson||this.survey.panelVisibilityChanged(this,this.isVisible)},t.prototype.hasErrorsCore=function(t){e.prototype.hasErrorsCore.call(this,t),this.isCollapsed&&t.result&&t.fireCallback&&this.expand()},t.prototype.getRenderedTitle=function(t){if(!t){if(this.isCollapsed||this.isExpanded)return this.name;if(this.isDesignMode)return"["+this.name+"]"}return e.prototype.getRenderedTitle.call(this,t)},Object.defineProperty(t.prototype,"width",{get:function(){return this.getPropertyValue("width")},set:function(e){this.setPropertyValue("width",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"indent",{get:function(){return this.getPropertyValue("indent",0)},set:function(e){this.setPropertyValue("indent",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"innerIndent",{get:function(){return this.getPropertyValue("innerIndent",0)},set:function(e){this.setPropertyValue("innerIndent",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderWidth",{get:function(){return this.getPropertyValue("renderWidth")},set:function(e){this.setPropertyValue("renderWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"startWithNewLine",{get:function(){return this.getPropertyValue("startWithNewLine",!0)},set:function(e){this.setPropertyValue("startWithNewLine",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightIndent",{get:function(){return this.getPropertyValue("rightIndent",0)},set:function(e){this.setPropertyValue("rightIndent",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"paddingLeft",{get:function(){return this.getPropertyValue("paddingLeft","")},set:function(e){this.setPropertyValue("paddingLeft",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"innerPaddingLeft",{get:function(){return this.getPropertyValue("innerPaddingLeft","")},set:function(e){this.setPropertyValue("innerPaddingLeft",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"paddingRight",{get:function(){return this.getPropertyValue("paddingRight","")},set:function(e){this.setPropertyValue("paddingRight",e)},enumerable:!1,configurable:!0}),t.prototype.onIndentChanged=function(){this.getSurvey()&&(this.innerPaddingLeft=this.getIndentSize(this.innerIndent),this.paddingLeft=this.getIndentSize(this.indent),this.paddingRight=this.getIndentSize(this.rightIndent))},t.prototype.getIndentSize=function(e){if(e<1)return"";var t=this.survey.css;return t?e*t.question.indent+"px":""},t.prototype.clearOnDeletingContainer=function(){this.elements.forEach((function(e){(e instanceof l.Question||e instanceof t)&&e.clearOnDeletingContainer()}))},Object.defineProperty(t.prototype,"hasEditButton",{get:function(){return!(!this.survey||"preview"!=this.survey.state)&&1==this.depth},enumerable:!1,configurable:!0}),t.prototype.cancelPreview=function(){this.hasEditButton&&this.survey.cancelPreviewByPage(this)},Object.defineProperty(t.prototype,"cssTitle",{get:function(){var e=this.cssClasses.panel.title;return"default"!==this.state&&(e+=" "+this.cssClasses.panel.titleExpandable),this.containsErrors&&(e+=" "+this.cssClasses.panel.titleOnError),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssError",{get:function(){var e=this.cssClasses.error.root;return e||"panel-error-root"},enumerable:!1,configurable:!0}),t.prototype.onVisibleChanged=function(){e.prototype.onVisibleChanged.call(this),this.notifySurveyOnVisibilityChanged()},t}(y);i.Serializer.addClass("panelbase",["name",{name:"elements",alternativeName:"questions",baseClassName:"question",visible:!1,isLightSerializable:!1},{name:"visible:boolean",default:!0},"visibleIf:condition","enableIf:condition","requiredIf:condition","readOnly:boolean",{name:"questionTitleLocation",default:"default",choices:["default","top","bottom","left","hidden"]},{name:"title:text",serializationProperty:"locTitle"},{name:"description:text",serializationProperty:"locDescription"}],(function(){return new y})),i.Serializer.addClass("panel",[{name:"state",default:"default",choices:["default","collapsed","expanded"]},"isRequired:boolean",{name:"requiredErrorText:text",serializationProperty:"locRequiredErrorText"},{name:"startWithNewLine:boolean",default:!0},"width",{name:"innerIndent:number",default:0,choices:[0,1,2,3]},{name:"indent:number",default:0,choices:[0,1,2,3]},{name:"page",isSerializable:!1,visibleIf:function(e){var t=e?e.survey:null;return!t||t.pages.length>1},choices:function(e){var t=e?e.survey:null;return t?t.pages.map((function(e){return{value:e.name,text:e.title}})):[]}},"showNumber:boolean",{name:"showQuestionNumbers",default:"default",choices:["default","onpanel","off"]},"questionStartIndex"],(function(){return new v}),"panelbase"),c.ElementFactory.Instance.registerElement("panel",(function(e){return new v(e)}))},"./src/popup.ts":
/*!**********************!*\
  !*** ./src/popup.ts ***!
  \**********************/
/*! exports provided: PopupModel, PopupBaseViewModel */function(e,t,n){"use strict";n.r(t),n.d(t,"PopupModel",(function(){return c})),n.d(t,"PopupBaseViewModel",(function(){return d}));var r,i=n(/*! ./base */"./src/base.ts"),o=n(/*! ./jsonobject */"./src/jsonobject.ts"),a=n(/*! ./surveyStrings */"./src/surveyStrings.ts"),s=n(/*! ./utils/popup */"./src/utils/popup.ts"),l=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},c=function(e){function t(t,n,r,i,o,a,s,l,u,c,p){void 0===r&&(r="bottom"),void 0===i&&(i="left"),void 0===o&&(o=!0),void 0===a&&(a=!1),void 0===s&&(s=function(){}),void 0===l&&(l=function(){return!0}),void 0===u&&(u=function(){}),void 0===c&&(c=function(){}),void 0===p&&(p="");var d=e.call(this)||this;return d.contentComponentName=t,d.contentComponentData=n,d.verticalPosition=r,d.horizontalPosition=i,d.showPointer=o,d.isModal=a,d.onCancel=s,d.onApply=l,d.onHide=u,d.onShow=c,d.cssClass=p,d}return l(t,e),Object.defineProperty(t.prototype,"isVisible",{get:function(){return this.getPropertyValue("isVisible",!1)},set:function(e){this.isVisible!==e&&(this.setPropertyValue("isVisible",e),this.onVisibilityChanged&&this.onVisibilityChanged(e),this.isVisible?this.onShow():this.onHide())},enumerable:!1,configurable:!0}),t.prototype.toggleVisibility=function(){this.isVisible=!this.isVisible},u([Object(o.property)()],t.prototype,"contentComponentName",void 0),u([Object(o.property)()],t.prototype,"contentComponentData",void 0),u([Object(o.property)({defaultValue:"bottom"})],t.prototype,"verticalPosition",void 0),u([Object(o.property)({defaultValue:"left"})],t.prototype,"horizontalPosition",void 0),u([Object(o.property)({defaultValue:!1})],t.prototype,"showPointer",void 0),u([Object(o.property)({defaultValue:!1})],t.prototype,"isModal",void 0),u([Object(o.property)({defaultValue:function(){}})],t.prototype,"onCancel",void 0),u([Object(o.property)({defaultValue:function(){return!0}})],t.prototype,"onApply",void 0),u([Object(o.property)({defaultValue:function(){}})],t.prototype,"onHide",void 0),u([Object(o.property)({defaultValue:function(){}})],t.prototype,"onShow",void 0),u([Object(o.property)({defaultValue:""})],t.prototype,"cssClass",void 0),t}(i.Base),p="input:not(:disabled):not([readonly]):not([type=hidden]),select:not(:disabled):not([readonly]),textarea:not(:disabled):not([readonly]), button:not(:disabled):not([readonly])",d=function(e){function t(t,n){var r=e.call(this)||this;return r.model=t,r.targetElement=n,r.model.registerFunctionOnPropertyValueChanged("isVisible",(function(){r.isVisible=r.model.isVisible})),r}return l(t,e),Object.defineProperty(t.prototype,"contentComponentName",{get:function(){return this.model.contentComponentName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contentComponentData",{get:function(){return this.model.contentComponentData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showPointer",{get:function(){return this.model.showPointer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isModal",{get:function(){return this.model.isModal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"styleClass",{get:function(){var e=this.model.cssClass;return this.isModal?e+=" sv-popup--modal":this.showPointer&&(e+=" sv-popup--show-pointer",e+=" sv-popup--"+this.popupDirection),e},enumerable:!1,configurable:!0}),t.prototype.onKeyDown=function(e){"Tab"===e.key||9===e.keyCode?this.trapFocus(e):"Escape"!==e.key&&27!==e.keyCode||(this.isModal&&this.model.onCancel(),this.model.isVisible=!1)},t.prototype.trapFocus=function(e){var t=this.container.querySelectorAll(p),n=t[0],r=t[t.length-1];e.shiftKey?document.activeElement===n&&(r.focus(),e.preventDefault()):document.activeElement===r&&(n.focus(),e.preventDefault())},t.prototype.updateOnShowing=function(){this.isModal||this.updatePosition(),this.focusFirstInput()},t.prototype.updatePosition=function(){var e=this.targetElement.getBoundingClientRect(),t=this.container.children[0],n=t.children[0],r=t.children[0].children[1],i=n.offsetHeight-r.offsetHeight+r.scrollHeight,o=n.offsetWidth;this.height="auto";var a=this.model.verticalPosition;window&&(a=s.PopupUtils.updateVerticalPosition(e,i,this.model.verticalPosition,this.model.showPointer,window.innerHeight)),this.popupDirection=s.PopupUtils.calculatePopupDirection(a,this.model.horizontalPosition);var l=s.PopupUtils.calculatePosition(e,i,o,a,this.model.horizontalPosition,this.showPointer);if(window){var u=s.PopupUtils.updateVerticalDimensions(l.top,i,window.innerHeight);u&&(this.height=u.height+"px",l.top=u.top)}this.left=l.left+"px",this.top=l.top+"px",this.showPointer&&(this.pointerTarget=s.PopupUtils.calculatePointerTarget(e,l.top,l.left,a,this.model.horizontalPosition)),this.pointerTarget.top+="px",this.pointerTarget.left+="px"},t.prototype.focusFirstInput=function(){var e=this;setTimeout((function(){var t=e.container.querySelector(p);t?t.focus():e.container.children[0].focus()}),100)},t.prototype.clickOutside=function(){this.isModal||(this.model.isVisible=!1)},t.prototype.cancel=function(){this.model.onCancel(),this.model.isVisible=!1},t.prototype.apply=function(){this.model.onApply&&!this.model.onApply()||(this.model.isVisible=!1)},Object.defineProperty(t.prototype,"cancelButtonText",{get:function(){return a.surveyLocalization.getString("modalCancelButtonText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"applyButtonText",{get:function(){return a.surveyLocalization.getString("modalApplyButtonText")},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){e.prototype.dispose.call(this),this.model.onVisibilityChanged=void 0},t.prototype.createPopupContainer=function(){var e=document.createElement("div");this.container=e},t.prototype.mountPopupContainer=function(){document.body.appendChild(this.container)},t.prototype.initializePopupContainer=function(){this.createPopupContainer(),this.mountPopupContainer()},t.prototype.destroyPopupContainer=function(){this.container.remove(),this.container=void 0},u([Object(o.property)({defaultValue:"0px"})],t.prototype,"top",void 0),u([Object(o.property)({defaultValue:"0px"})],t.prototype,"left",void 0),u([Object(o.property)({defaultValue:"auto"})],t.prototype,"height",void 0),u([Object(o.property)({defaultValue:!1})],t.prototype,"isVisible",void 0),u([Object(o.property)({defaultValue:"left"})],t.prototype,"popupDirection",void 0),u([Object(o.property)({defaultValue:{left:"0px",top:"0px"}})],t.prototype,"pointerTarget",void 0),t}(i.Base)},"./src/question.ts":
/*!*************************!*\
  !*** ./src/question.ts ***!
  \*************************/
/*! exports provided: Question */function(e,t,n){"use strict";n.r(t),n.d(t,"Question",(function(){return y}));var r,i=n(/*! ./helpers */"./src/helpers.ts"),o=n(/*! ./jsonobject */"./src/jsonobject.ts"),a=n(/*! ./survey-element */"./src/survey-element.ts"),s=n(/*! ./surveyStrings */"./src/surveyStrings.ts"),l=n(/*! ./error */"./src/error.ts"),u=n(/*! ./validator */"./src/validator.ts"),c=n(/*! ./localizablestring */"./src/localizablestring.ts"),p=n(/*! ./conditions */"./src/conditions.ts"),d=n(/*! ./questionCustomWidgets */"./src/questionCustomWidgets.ts"),h=n(/*! ./settings */"./src/settings.ts"),f=n(/*! ./rendererFactory */"./src/rendererFactory.ts"),m=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),g=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},y=function(e){function t(n){var r=e.call(this,n)||this;r.conditionRunner=null,r.customWidgetData={isNeedRender:!0},r.isReadyValue=!0,r.onReadyChanged=r.addEvent(),r.parentQuestionValue=null,r.isRunningValidatorsValue=!1,r.isValueChangedInSurvey=!1,r.allowNotifyValueChanged=!0,r.locOwner=null,r.id=t.getQuestionId(),r.onCreating(),r.createNewArray("validators",(function(e){e.errorOwner=r}));var i=r.createLocalizableString("title",r,!0);return i.onGetTextCallback=function(e){return e||(e=r.name),r.survey?r.survey.getUpdatedQuestionTitle(r,e):e},r.locProcessedTitle=new c.LocalizableString(r,!0),r.locProcessedTitle.sharedData=i,r.createLocalizableString("commentText",r,!0).onGetTextCallback=function(e){return e||s.surveyLocalization.getString("otherItemText")},r.createLocalizableString("requiredErrorText",r),r.registerFunctionOnPropertyValueChanged("width",(function(){r.updateQuestionCss(),r.parent&&r.parent.elementWidthChanged(r)})),r.registerFunctionOnPropertyValueChanged("isRequired",(function(){r.locTitle.onChanged(),r.cssClassesValue=void 0})),r.registerFunctionOnPropertiesValueChanged(["indent","rightIndent"],(function(){r.onIndentChanged()})),r.registerFunctionOnPropertiesValueChanged(["hasComment","hasOther"],(function(){r.initCommentFromSurvey()})),r}return m(t,e),t.getQuestionId=function(){return"sq_"+t.questionCounter++},t.prototype.isReadOnlyRenderDiv=function(){return this.isReadOnly&&"div"===h.settings.readOnlyCommentRenderMode},t.prototype.getSurvey=function(t){return void 0===t&&(t=!1),t?this.parent?this.parent.getSurvey(t):null:this.onGetSurvey?this.onGetSurvey():e.prototype.getSurvey.call(this)},t.prototype.getValueName=function(){return this.valueName?this.valueName.toString():this.name},Object.defineProperty(t.prototype,"valueName",{get:function(){return this.getPropertyValue("valueName","")},set:function(e){var t=this.getValueName();this.setPropertyValue("valueName",e),this.onValueNameChanged(t)},enumerable:!1,configurable:!0}),t.prototype.onValueNameChanged=function(e){this.survey&&(this.survey.questionRenamed(this,this.name,e||this.name),this.initDataFromSurvey())},t.prototype.onNameChanged=function(e){this.locTitle.onChanged(),this.survey&&this.survey.questionRenamed(this,e,this.valueName?this.valueName:e)},Object.defineProperty(t.prototype,"isReady",{get:function(){return this.isReadyValue},enumerable:!1,configurable:!0}),t.prototype.choicesLoaded=function(){},Object.defineProperty(t.prototype,"page",{get:function(){return this.getPage(this.parent)},set:function(e){this.setPage(this.parent,e)},enumerable:!1,configurable:!0}),t.prototype.getPanel=function(){return null},t.prototype.delete=function(){this.parent&&this.removeSelfFromList(this.parent.elements)},Object.defineProperty(t.prototype,"isFlowLayout",{get:function(){return"flow"===this.getLayoutType()},enumerable:!1,configurable:!0}),t.prototype.getLayoutType=function(){return this.parent?this.parent.getChildrenLayoutType():"row"},t.prototype.isLayoutTypeSupported=function(e){return"flow"!==e},Object.defineProperty(t.prototype,"visible",{get:function(){return this.getPropertyValue("visible",!0)},set:function(e){e!=this.visible&&(this.setPropertyValue("visible",e),this.onVisibleChanged(),this.notifySurveyVisibilityChanged())},enumerable:!1,configurable:!0}),t.prototype.onVisibleChanged=function(){this.setPropertyValue("isVisible",this.isVisible),this.isVisible&&this.survey&&this.survey.isClearValueOnHidden&&this.updateValueWithDefaults(),!this.isVisible&&this.errors&&this.errors.length>0&&(this.errors=[])},Object.defineProperty(t.prototype,"useDisplayValuesInTitle",{get:function(){return this.getPropertyValue("useDisplayValuesInTitle",!0)},set:function(e){this.setPropertyValue("useDisplayValuesInTitle",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibleIf",{get:function(){return this.getPropertyValue("visibleIf","")},set:function(e){this.setPropertyValue("visibleIf",e),this.runConditions()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return!(this.survey&&this.survey.areEmptyElementsHidden&&this.isEmpty())&&(this.visible||this.areInvisibleElementsShowing)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibleIndex",{get:function(){return this.getPropertyValue("visibleIndex",-1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hideNumber",{get:function(){return this.getPropertyValue("hideNumber")},set:function(e){this.setPropertyValue("hideNumber",e),this.notifySurveyVisibilityChanged()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAllowTitleLeft",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"question"},Object.defineProperty(t.prototype,"isQuestion",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.moveTo=function(e,t){return void 0===t&&(t=null),this.moveToBase(this.parent,e,t)},t.prototype.getProgressInfo=function(){return this.hasInput?{questionCount:1,answeredQuestionCount:this.isEmpty()?0:1,requiredQuestionCount:this.isRequired?1:0,requiredAnsweredQuestionCount:!this.isEmpty()&&this.isRequired?1:0}:e.prototype.getProgressInfo.call(this)},t.prototype.runConditions=function(){this.data&&!this.isLoadingFromJson&&(this.isDesignMode||this.runCondition(this.getDataFilteredValues(),this.getDataFilteredProperties()),this.locStrsChanged())},t.prototype.setSurveyImpl=function(t){e.prototype.setSurveyImpl.call(this,t),this.survey&&this.survey.questionCreated(this),this.survey&&this.survey.isDesignMode&&!this.isDesignMode&&this.onVisibleChanged(),this.runConditions()},t.prototype.getDataFilteredValues=function(){return this.data?this.data.getFilteredValues():null},t.prototype.getDataFilteredProperties=function(){var e=this.data?this.data.getFilteredProperties():{};return e.question=this,e},Object.defineProperty(t.prototype,"parent",{get:function(){return this.getPropertyValue("parent",null)},set:function(e){this.parent!==e&&(this.delete(),this.setPropertyValue("parent",e),this.updateQuestionCss(),this.onParentChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parentQuestion",{get:function(){return this.parentQuestionValue},enumerable:!1,configurable:!0}),t.prototype.setParentQuestion=function(e){this.parentQuestionValue=e,this.onParentQuestionChanged()},t.prototype.onParentQuestionChanged=function(){},t.prototype.onParentChanged=function(){},Object.defineProperty(t.prototype,"hasTitle",{get:function(){return"hidden"!==this.getTitleLocation()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleLocation",{get:function(){return this.getPropertyValue("titleLocation")},set:function(e){var t="hidden"==this.titleLocation||"hidden"==e;this.setPropertyValue("titleLocation",e.toLowerCase()),this.updateQuestionCss(),t&&this.notifySurveyVisibilityChanged()},enumerable:!1,configurable:!0}),t.prototype.notifySurveyVisibilityChanged=function(){this.survey&&!this.isLoadingFromJson&&(this.survey.questionVisibilityChanged(this,this.isVisible),this.survey.isClearValueOnHidden&&!this.visible&&this.clearValue())},t.prototype.getTitleLocation=function(){if(this.isFlowLayout)return"hidden";var e=this.getTitleLocationCore();return"left"!==e||this.isAllowTitleLeft||(e="top"),e},t.prototype.getTitleLocationCore=function(){return"default"!==this.titleLocation?this.titleLocation:this.parent?this.parent.getQuestionTitleLocation():this.survey?this.survey.questionTitleLocation:"top"},Object.defineProperty(t.prototype,"hasTitleOnLeft",{get:function(){return this.hasTitle&&"left"===this.getTitleLocation()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitleOnTop",{get:function(){return this.hasTitle&&"top"===this.getTitleLocation()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitleOnBottom",{get:function(){return this.hasTitle&&"bottom"===this.getTitleLocation()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitleOnLeftTop",{get:function(){if(!this.hasTitle)return!1;var e=this.getTitleLocation();return"left"===e||"top"===e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"errorLocation",{get:function(){return this.survey?this.survey.questionErrorLocation:"top"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasInput",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSingleInput",{get:function(){return this.hasInput},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputId",{get:function(){return this.id+"i"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.getLocalizableStringText("title",this.name)},set:function(e){this.setLocalizableStringText("title",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTitle",{get:function(){return this.getLocalizableString("title")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"descriptionLocation",{get:function(){return this.getPropertyValue("descriptionLocation")},set:function(e){this.setPropertyValue("descriptionLocation",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasDescriptionUnderTitle",{get:function(){return"underTitle"==this.getDescriptionLocation()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasDescriptionUnderInput",{get:function(){return"underInput"==this.getDescriptionLocation()},enumerable:!1,configurable:!0}),t.prototype.getDescriptionLocation=function(){return"default"!==this.descriptionLocation?this.descriptionLocation:this.survey?this.survey.questionDescriptionLocation:"underTitle"},Object.defineProperty(t.prototype,"clickTitleFunction",{get:function(){if(this.hasInput){var e=this;return function(){if(!e.isCollapsed)return setTimeout((function(){e.focus()}),1),!0}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredErrorText",{get:function(){return this.getLocalizableStringText("requiredErrorText")},set:function(e){this.setLocalizableStringText("requiredErrorText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locRequiredErrorText",{get:function(){return this.getLocalizableString("requiredErrorText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"commentText",{get:function(){return this.getLocalizableStringText("commentText",s.surveyLocalization.getString("otherItemText"))},set:function(e){this.setLocalizableStringText("commentText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locCommentText",{get:function(){return this.getLocalizableString("commentText")},enumerable:!1,configurable:!0}),t.prototype.getAllErrors=function(){return this.errors.slice()},t.prototype.getErrorByType=function(e){for(var t=0;t<this.errors.length;t++)if(this.errors[t].getErrorType()===e)return this.errors[t];return null},Object.defineProperty(t.prototype,"customWidget",{get:function(){return this.isCustomWidgetRequested||this.customWidgetValue||(this.isCustomWidgetRequested=!0,this.updateCustomWidget()),this.customWidgetValue},enumerable:!1,configurable:!0}),t.prototype.updateCustomWidget=function(){this.customWidgetValue=d.CustomWidgetCollection.Instance.getCustomWidget(this)},Object.defineProperty(t.prototype,"isCompositeQuestion",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.afterRenderQuestionElement=function(e){this.survey&&this.hasSingleInput&&this.survey.afterRenderQuestionInput(this,e)},t.prototype.afterRender=function(e){this.survey&&(this.survey.afterRenderQuestion(this,e),this.afterRenderQuestionCallback&&this.afterRenderQuestionCallback(this,e))},t.prototype.beforeDestroyQuestionElement=function(e){},Object.defineProperty(t.prototype,"processedTitle",{get:function(){var e=this.locProcessedTitle.textOrHtml;return e||this.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullTitle",{get:function(){return this.locTitle.renderedHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titlePattern",{get:function(){return this.survey?this.survey.questionTitlePattern:"numTitleRequire"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRequireTextOnStart",{get:function(){return this.isRequired&&"requireNumTitle"==this.titlePattern},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRequireTextBeforeTitle",{get:function(){return this.isRequired&&"numRequireTitle"==this.titlePattern},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRequireTextAfterTitle",{get:function(){return this.isRequired&&"numTitleRequire"==this.titlePattern},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"startWithNewLine",{get:function(){return this.getPropertyValue("startWithNewLine",!0)},set:function(e){this.startWithNewLine!=e&&this.setPropertyValue("startWithNewLine",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssClasses",{get:function(){return this.survey?(this.cssClassesValue||(this.cssClassesValue=this.calcCssClasses(),this.updateElementCssCore(this.cssClassesValue)),this.cssClassesValue):this.calcCssClasses()},enumerable:!1,configurable:!0}),t.prototype.calcCssClasses=function(){var e=this.css,t={error:{}};return this.copyCssClasses(t,e.question),this.copyCssClasses(t.error,e.error),this.updateCssClasses(t,e),this.survey&&this.survey.updateQuestionCssClasses(this,t),t},Object.defineProperty(t.prototype,"cssRoot",{get:function(){return this.ensureElementCss(),this.getPropertyValue("cssRoot","")},enumerable:!1,configurable:!0}),t.prototype.setCssRoot=function(e){this.setPropertyValue("cssRoot",e)},t.prototype.getCssRoot=function(e){var t=this.isFlowLayout&&!this.isDesignMode?e.flowRoot:e.mainRoot;return t||(t=""),!this.isFlowLayout&&this.hasTitleOnLeft&&e.titleLeftRoot&&(t+=" "+e.titleLeftRoot),this.errors.length>0&&e.hasError&&(t+=" "+e.hasError),e.small&&!this.width&&(t+=" "+e.small),t},Object.defineProperty(t.prototype,"cssHeader",{get:function(){return this.ensureElementCss(),this.getPropertyValue("cssHeader","")},enumerable:!1,configurable:!0}),t.prototype.setCssHeader=function(e){this.setPropertyValue("cssHeader",e)},t.prototype.getCssHeader=function(e){var t=e.header||"";return this.hasTitleOnTop&&e.headerTop&&(t+=" "+e.headerTop),this.hasTitleOnLeft&&e.headerLeft&&(t+=" "+e.headerLeft),this.hasTitleOnBottom&&e.headerBottom&&(t+=" "+e.headerBottom),t},Object.defineProperty(t.prototype,"cssContent",{get:function(){return this.ensureElementCss(),this.getPropertyValue("cssContent","")},enumerable:!1,configurable:!0}),t.prototype.setCssContent=function(e){this.setPropertyValue("cssContent",e)},t.prototype.getCssContent=function(e){var t=e.content||"";return this.hasTitleOnLeft&&e.contentLeft&&(t+=" "+e.contentLeft),t},Object.defineProperty(t.prototype,"cssTitle",{get:function(){return this.ensureElementCss(),this.getPropertyValue("cssTitle","")},enumerable:!1,configurable:!0}),t.prototype.setCssTitle=function(e){this.setPropertyValue("cssTitle",e)},t.prototype.getCssTitle=function(e){var t=e.title;return(this.isCollapsed||this.isExpanded)&&(t+=" "+e.titleExpandable),this.containsErrors?e.titleOnError&&(t+=" "+e.titleOnError):this.isAnswered&&e.titleOnAnswer&&(t+=" "+e.titleOnAnswer),t},Object.defineProperty(t.prototype,"cssError",{get:function(){return this.ensureElementCss(),this.getPropertyValue("cssError","")},enumerable:!1,configurable:!0}),t.prototype.setCssError=function(e){this.setPropertyValue("cssError",e)},t.prototype.getCssError=function(e){var t=e.error.root||"";return"top"==this.errorLocation?e.error.locationTop&&(t+=" "+e.error.locationTop):"bottom"===this.errorLocation&&e.error.locationBottom&&(t+=" "+e.error.locationBottom),t},t.prototype.updateElementCss=function(e){this.cssClassesValue=void 0,e&&this.updateQuestionCss(!0)},t.prototype.updateQuestionCss=function(e){this.isLoadingFromJson||!this.survey||!0!==e&&!this.cssClassesValue||(this.cssClassesValue||(this.cssClassesValue=this.calcCssClasses()),this.updateElementCssCore(this.cssClasses))},t.prototype.ensureElementCss=function(){this.cssClassesValue||this.updateQuestionCss(!0)},t.prototype.updateElementCssCore=function(e){this.setCssRoot(this.getCssRoot(e)),this.setCssHeader(this.getCssHeader(e)),this.setCssContent(this.getCssContent(e)),this.setCssTitle(this.getCssTitle(e)),this.setCssError(this.getCssError(e))},t.prototype.updateCssClasses=function(e,t){if(t.question){this.isRequired&&(t.question.required&&(e.root=(e.root?e.root+" ":"")+n),t.question.titleRequired&&(e.title+=" "+t.question.titleRequired));var n=t[this.getCssType()];if(null!=n)if("string"==typeof n||n instanceof String)e.root=(e.root?e.root+" ":"")+n;else for(var r in n)e[r]=n[r]}},t.prototype.getCssType=function(){return this.getType()},Object.defineProperty(t.prototype,"css",{get:function(){return this.survey?this.survey.getCss():{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.getPropertyValue("width","")},set:function(e){this.setPropertyValue("width",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minWidth",{get:function(){return this.getPropertyValue("minWidth",h.settings.minWidth)},set:function(e){this.setPropertyValue("minWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this.getPropertyValue("maxWidth",h.settings.maxWidth)},set:function(e){this.setPropertyValue("maxWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderWidth",{get:function(){return this.getPropertyValue("renderWidth","")},set:function(e){this.setPropertyValue("renderWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"indent",{get:function(){return this.getPropertyValue("indent",0)},set:function(e){this.setPropertyValue("indent",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightIndent",{get:function(){return this.getPropertyValue("rightIndent",0)},set:function(e){this.setPropertyValue("rightIndent",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"paddingLeft",{get:function(){return this.getPropertyValue("paddintLeft","")},set:function(e){this.setPropertyValue("paddintLeft",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"paddingRight",{get:function(){return this.getPropertyValue("paddingRight","")},set:function(e){this.setPropertyValue("paddingRight",e)},enumerable:!1,configurable:!0}),t.prototype.onIndentChanged=function(){this.paddingLeft=this.getIndentSize(this.indent),this.paddingRight=this.getIndentSize(this.rightIndent)},t.prototype.getIndentSize=function(e){return e<1||!this.getSurvey()||!this.cssClasses?"":e*this.cssClasses.indent+"px"},t.prototype.focus=function(e){if(void 0===e&&(e=!1),!this.isDesignMode){this.survey&&this.survey.scrollElementToTop(this,this,null,this.id);var t=e?this.getFirstErrorInputElementId():this.getFirstInputElementId();a.SurveyElement.FocusElement(t)&&this.fireCallback(this.focusCallback)}},t.prototype.fireCallback=function(e){e&&e()},t.prototype.getOthersMaxLength=function(){return this.survey&&this.survey.maxOthersLength>0?this.survey.maxOthersLength:null},t.prototype.onCreating=function(){},t.prototype.getFirstInputElementId=function(){return this.inputId},t.prototype.getFirstErrorInputElementId=function(){return this.getFirstInputElementId()},t.prototype.getProcessedTextValue=function(e){var n=e.name.toLocaleLowerCase();e.isExists=-1!==Object.keys(t.TextPreprocessorValuesMap).indexOf(n)||void 0!==this[e.name],e.value=this[t.TextPreprocessorValuesMap[n]||e.name]},t.prototype.supportComment=function(){return!1},t.prototype.supportOther=function(){return!1},Object.defineProperty(t.prototype,"isRequired",{get:function(){return this.getPropertyValue("isRequired",!1)},set:function(e){this.setPropertyValue("isRequired",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredIf",{get:function(){return this.getPropertyValue("requiredIf","")},set:function(e){this.setPropertyValue("requiredIf",e),this.runConditions()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasComment",{get:function(){return this.getPropertyValue("hasComment",!1)},set:function(e){this.supportComment()&&(this.setPropertyValue("hasComment",e),this.hasComment&&(this.hasOther=!1))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.getPropertyValue("id")},set:function(e){this.setPropertyValue("id",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaTitleId",{get:function(){return this.id+"_ariaTitle"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ariaRole",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasOther",{get:function(){return this.getPropertyValue("hasOther",!1)},set:function(e){this.supportOther()&&this.hasOther!=e&&(this.setPropertyValue("hasOther",e),this.hasOther&&(this.hasComment=!1),this.hasOtherChanged())},enumerable:!1,configurable:!0}),t.prototype.hasOtherChanged=function(){},Object.defineProperty(t.prototype,"requireUpdateCommentValue",{get:function(){return this.hasComment||this.hasOther},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnly",{get:function(){var e=!!this.parent&&this.parent.isReadOnly,t=!!this.survey&&this.survey.isDisplayMode;return this.readOnly||e||t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isInputReadOnly",{get:function(){var e=h.settings.supportCreatorV2&&this.isDesignMode;return this.isReadOnly||e},enumerable:!1,configurable:!0}),t.prototype.onReadOnlyChanged=function(){this.setPropertyValue("isInputReadOnly",this.isInputReadOnly),e.prototype.onReadOnlyChanged.call(this)},Object.defineProperty(t.prototype,"enableIf",{get:function(){return this.getPropertyValue("enableIf","")},set:function(e){this.setPropertyValue("enableIf",e),this.runConditions()},enumerable:!1,configurable:!0}),t.prototype.runCondition=function(e,t){this.isDesignMode||(t||(t={}),t.question=this,this.areInvisibleElementsShowing||this.runVisibleIfCondition(e,t),this.runEnableIfCondition(e,t),this.runRequiredIfCondition(e,t))},t.prototype.runVisibleIfCondition=function(e,t){var n=this;this.visibleIf&&(this.conditionRunner||(this.conditionRunner=new p.ConditionRunner(this.visibleIf)),this.conditionRunner.expression=this.visibleIf,this.conditionRunner.onRunComplete=function(e){n.visible=e},this.conditionRunner.run(e,t))},t.prototype.runEnableIfCondition=function(e,t){var n=this;this.enableIf&&(this.conditionEnabelRunner||(this.conditionEnabelRunner=new p.ConditionRunner(this.enableIf)),this.conditionEnabelRunner.expression=this.enableIf,this.conditionEnabelRunner.onRunComplete=function(e){n.readOnly=!e},this.conditionEnabelRunner.run(e,t))},t.prototype.runRequiredIfCondition=function(e,t){var n=this;this.requiredIf&&(this.conditionRequiredRunner||(this.conditionRequiredRunner=new p.ConditionRunner(this.requiredIf)),this.conditionRequiredRunner.expression=this.requiredIf,this.conditionRequiredRunner.onRunComplete=function(e){n.isRequired=e},this.conditionRequiredRunner.run(e,t))},Object.defineProperty(t.prototype,"no",{get:function(){return this.getPropertyValue("no")},enumerable:!1,configurable:!0}),t.prototype.calcNo=function(){if(!this.hasTitle||this.hideNumber)return"";var e=i.Helpers.getNumberByIndex(this.visibleIndex,this.getStartIndex());return this.survey&&(e=this.survey.getUpdatedQuestionNo(this,e)),e},t.prototype.getStartIndex=function(){return this.parent?this.parent.getQuestionStartIndex():this.survey?this.survey.questionStartIndex:""},t.prototype.onSurveyLoad=function(){this.fireCallback(this.surveyLoadCallback),this.updateValueWithDefaults()},t.prototype.onSetData=function(){e.prototype.onSetData.call(this),this.survey&&(this.initDataFromSurvey(),this.onSurveyValueChanged(this.value),this.updateValueWithDefaults(),this.onIndentChanged(),this.updateQuestionCss())},t.prototype.initDataFromSurvey=function(){this.data&&(this.updateValueFromSurvey(this.data.getValue(this.getValueName())),this.initCommentFromSurvey())},t.prototype.initCommentFromSurvey=function(){this.data&&this.requireUpdateCommentValue?this.updateCommentFromSurvey(this.data.getComment(this.getValueName())):this.updateCommentFromSurvey("")},t.prototype.runExpression=function(e){if(this.survey&&e)return this.survey.runExpression(e)},Object.defineProperty(t.prototype,"questionValue",{get:function(){return this.getPropertyValue("value")},set:function(e){this.setPropertyValue("value",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionComment",{get:function(){return this.getPropertyValue("comment")},set:function(e){this.setPropertyValue("comment",e),this.fireCallback(this.commentChangedCallback)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValueCore()},set:function(e){this.setNewValue(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"valueForSurvey",{get:function(){return this.valueToDataCallback?this.valueToDataCallback(this.value):this.value},enumerable:!1,configurable:!0}),t.prototype.clearValue=function(){void 0!==this.value&&(this.value=void 0),this.comment=void 0},t.prototype.unbindValue=function(){this.clearValue()},t.prototype.createValueCopy=function(){return this.getUnbindValue(this.value)},t.prototype.getUnbindValue=function(e){return this.isValueSurveyElement(e)?e:i.Helpers.getUnbindValue(e)},t.prototype.isValueSurveyElement=function(e){return!!e&&(Array.isArray(e)?e.length>0&&this.isValueSurveyElement(e[0]):!!e.getType&&!!e.onPropertyChanged)},t.prototype.canClearValueAsInvisible=function(){return!(this.isVisible&&this.isParentVisible||this.page&&this.page.isStarted||this.survey&&this.valueName&&this.survey.hasVisibleQuestionByValueName(this.valueName))},Object.defineProperty(t.prototype,"isParentVisible",{get:function(){for(var e=this.parent;e;){if(!e.isVisible)return!1;e=e.parent}return!0},enumerable:!1,configurable:!0}),t.prototype.clearValueIfInvisible=function(){this.canClearValueAsInvisible()&&this.clearValue()},Object.defineProperty(t.prototype,"displayValue",{get:function(){return this.isLoadingFromJson?"":this.getDisplayValue(!0)},enumerable:!1,configurable:!0}),t.prototype.getDisplayValue=function(e,t){void 0===t&&(t=void 0);var n=this.calcDisplayValue(e,t);return this.displayValueCallback?this.displayValueCallback(n):n},t.prototype.calcDisplayValue=function(e,t){if(void 0===t&&(t=void 0),this.customWidget){var n=this.customWidget.getDisplayValue(this,t);if(n)return n}return t=null==t?this.createValueCopy():t,this.isValueEmpty(t)?this.getDisplayValueEmpty():this.getDisplayValueCore(e,t)},t.prototype.getDisplayValueCore=function(e,t){return t},t.prototype.getDisplayValueEmpty=function(){return""},Object.defineProperty(t.prototype,"defaultValue",{get:function(){return this.getPropertyValue("defaultValue")},set:function(e){this.isValueExpression(e)?this.defaultValueExpression=e.substr(1):(this.setPropertyValue("defaultValue",this.convertDefaultValue(e)),this.updateValueWithDefaults())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultValueExpression",{get:function(){return this.getPropertyValue("defaultValueExpression")},set:function(e){this.setPropertyValue("defaultValueExpression",e),this.updateValueWithDefaults()},enumerable:!1,configurable:!0}),t.prototype.getPlainData=function(e){var t=this;if(void 0===e&&(e={includeEmpty:!0,includeQuestionTypes:!1}),e.includeEmpty||!this.isEmpty()){var n={name:this.name,title:this.locTitle.renderedHtml,value:this.value,displayValue:this.displayValue,isNode:!1,getString:function(e){return"object"==typeof e?JSON.stringify(e):e}};return!0===e.includeQuestionTypes&&(n.questionType=this.getType()),(e.calculations||[]).forEach((function(e){n[e.propertyName]=t[e.propertyName]})),this.hasComment&&(n.isNode=!0,n.data=[{name:0,isComment:!0,title:"Comment",value:h.settings.commentPrefix,displayValue:this.comment,getString:function(e){return"object"==typeof e?JSON.stringify(e):e},isNode:!1}]),n}},Object.defineProperty(t.prototype,"correctAnswer",{get:function(){return this.getPropertyValue("correctAnswer")},set:function(e){this.setPropertyValue("correctAnswer",this.convertDefaultValue(e))},enumerable:!1,configurable:!0}),t.prototype.convertDefaultValue=function(e){return e},Object.defineProperty(t.prototype,"quizQuestionCount",{get:function(){return this.isVisible&&this.hasInput&&!this.isValueEmpty(this.correctAnswer)?this.getQuizQuestionCount():0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"correctAnswerCount",{get:function(){return this.isEmpty()||this.isValueEmpty(this.correctAnswer)?0:this.getCorrectAnswerCount()},enumerable:!1,configurable:!0}),t.prototype.getQuizQuestionCount=function(){return 1},t.prototype.getCorrectAnswerCount=function(){return this.isTwoValueEquals(this.value,this.correctAnswer,!0,!0)?1:0},t.prototype.isAnswerCorrect=function(){return this.correctAnswerCount==this.quizQuestionCount},t.prototype.updateValueWithDefaults=function(){this.isLoadingFromJson||!this.isDesignMode&&this.isDefaultValueEmpty()||(this.isDesignMode||this.isEmpty())&&(this.isEmpty()&&this.isDefaultValueEmpty()||this.survey&&this.survey.isClearValueOnHidden&&!this.isVisible||this.setDefaultValue())},t.prototype.getQuestionFromArray=function(e,t){return null},t.prototype.getDefaultValue=function(){return this.defaultValue},t.prototype.isDefaultValueEmpty=function(){return!this.defaultValueExpression&&this.isValueEmpty(this.defaultValue)},t.prototype.setDefaultValue=function(){var e=this;this.setValueAndRunExpression(this.defaultValueExpression,this.getUnbindValue(this.defaultValue),(function(t){e.value=t}))},t.prototype.isValueExpression=function(e){return!!e&&"string"==typeof e&&e.length>0&&"="==e[0]},t.prototype.setValueAndRunExpression=function(e,t,n,r,i){var o=this;void 0===r&&(r=null),void 0===i&&(i=null);var a=function(e){e instanceof Date&&(e=e.toISOString().slice(0,10)),n(e)};if(e&&this.data){r||(r=this.data.getFilteredValues()),i||(i=this.data.getFilteredProperties());var s=new p.ExpressionRunner(e);s.canRun&&(s.onRunComplete=function(e){null==e&&(e=o.defaultValue),a(e)},s.run(r,i))}else a(t)},Object.defineProperty(t.prototype,"comment",{get:function(){return this.getQuestionComment()},set:function(e){e&&(e=e.toString().trim()),this.comment!=e&&this.setQuestionComment(e)},enumerable:!1,configurable:!0}),t.prototype.getQuestionComment=function(){return this.questionComment},t.prototype.setQuestionComment=function(e){this.setNewComment(e)},t.prototype.isEmpty=function(){return this.isValueEmpty(this.value)},Object.defineProperty(t.prototype,"isAnswered",{get:function(){return this.getPropertyValue("isAnswered")},set:function(e){this.setPropertyValue("isAnswered",e)},enumerable:!1,configurable:!0}),t.prototype.updateIsAnswered=function(){this.setPropertyValue("isAnswered",this.getIsAnswered())},t.prototype.getIsAnswered=function(){return!this.isEmpty()},Object.defineProperty(t.prototype,"validators",{get:function(){return this.getPropertyValue("validators")},set:function(e){this.setPropertyValue("validators",e)},enumerable:!1,configurable:!0}),t.prototype.getValidators=function(){return this.validators},t.prototype.getSupportedValidators=function(){for(var e=[],t=this.getType();t;){var n=h.settings.supportedValidators[t];if(n)for(var r=n.length-1;r>=0;r--)e.splice(0,0,n[r]);t=o.Serializer.findClass(t).parentName}return e},t.prototype.addSupportedValidators=function(e,t){},t.prototype.addConditionObjectsByContext=function(e,t){e.push({name:this.getValueName(),text:this.processedTitle,question:this})},t.prototype.getConditionJson=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null);var n=(new o.JsonObject).toJsonObject(this);return n.type=this.getType(),n},t.prototype.hasErrors=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=null);var n=this.errors.length>0,r=this.checkForErrors(!!t&&!0===t.isOnValueChanged);return e&&(this.survey&&this.survey.beforeSettingQuestionErrors(this,r),this.errors=r),this.updateContainsErrors(),n!=r.length>0&&this.updateQuestionCss(),this.isCollapsed&&t&&e&&r.length>0&&this.expand(),r.length>0},Object.defineProperty(t.prototype,"currentErrorCount",{get:function(){return this.errors.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredText",{get:function(){return null!=this.survey&&this.isRequired?this.survey.requiredText:""},enumerable:!1,configurable:!0}),t.prototype.addError=function(e){if(e){var t=null;t="string"==typeof e||e instanceof String?new l.CustomError(e,this.survey):e,this.errors.push(t)}},t.prototype.removeError=function(e){var t=this.errors,n=t.indexOf(e);-1!==n&&t.splice(n,1)},t.prototype.checkForErrors=function(e){var t=new Array;return this.isVisible&&!this.isReadOnly&&this.collectErrors(t,e),t},t.prototype.collectErrors=function(e,t){if(this.onCheckForErrors(e,t),!(e.length>0)&&this.canRunValidators(t)){var n=this.runValidators();if(n.length>0){e.length=0;for(var r=0;r<n.length;r++)e.push(n[r])}if(this.survey&&0==e.length){var i=this.fireSurveyValidation();i&&e.push(i)}}},t.prototype.canRunValidators=function(e){return!0},t.prototype.fireSurveyValidation=function(){return this.validateValueCallback?this.validateValueCallback():this.survey?this.survey.validateQuestion(this):null},t.prototype.onCheckForErrors=function(e,t){!t&&this.hasRequiredError()&&e.push(new l.AnswerRequiredError(this.requiredErrorText,this))},t.prototype.hasRequiredError=function(){return this.isRequired&&this.isEmpty()},Object.defineProperty(t.prototype,"isRunningValidators",{get:function(){return this.getIsRunningValidators()},enumerable:!1,configurable:!0}),t.prototype.getIsRunningValidators=function(){return this.isRunningValidatorsValue},t.prototype.runValidators=function(){var e=this;return this.validatorRunner&&(this.validatorRunner.onAsyncCompleted=null),this.validatorRunner=new u.ValidatorRunner,this.isRunningValidatorsValue=!0,this.validatorRunner.onAsyncCompleted=function(t){e.doOnAsyncCompleted(t)},this.validatorRunner.run(this)},t.prototype.doOnAsyncCompleted=function(e){for(var t=0;t<e.length;t++)this.errors.push(e[t]);this.isRunningValidatorsValue=!1,this.raiseOnCompletedAsyncValidators()},t.prototype.raiseOnCompletedAsyncValidators=function(){this.onCompletedAsyncValidators&&!this.isRunningValidators&&(this.onCompletedAsyncValidators(this.getAllErrors().length>0),this.onCompletedAsyncValidators=null)},t.prototype.setNewValue=function(e){var t=this.isAnswered;this.setNewValueInData(e),this.allowNotifyValueChanged&&this.onValueChanged(),this.isAnswered!=t&&this.updateQuestionCss()},t.prototype.isTextValue=function(){return!1},Object.defineProperty(t.prototype,"isSurveyInputTextUpdate",{get:function(){return!!this.survey&&this.survey.isUpdateValueTextOnTyping},enumerable:!1,configurable:!0}),t.prototype.getDataLocNotification=function(){return!!this.isInputTextUpdate&&"text"},Object.defineProperty(t.prototype,"isInputTextUpdate",{get:function(){return this.isSurveyInputTextUpdate&&this.isTextValue()},enumerable:!1,configurable:!0}),t.prototype.setNewValueInData=function(e){e=this.valueToData(e),this.isValueChangedInSurvey||this.setValueCore(e)},t.prototype.getValueCore=function(){return this.questionValue},t.prototype.setValueCore=function(e){this.setQuestionValue(e),null!=this.data&&this.canSetValueToSurvey()&&(e=this.valueForSurvey,this.data.setValue(this.getValueName(),e,this.getDataLocNotification(),this.allowNotifyValueChanged))},t.prototype.canSetValueToSurvey=function(){return!0},t.prototype.valueFromData=function(e){return e},t.prototype.valueToData=function(e){return e},t.prototype.onValueChanged=function(){},t.prototype.setNewComment=function(e){this.questionComment=e,null!=this.data&&this.data.setComment(this.getValueName(),e,!!this.isSurveyInputTextUpdate&&"text")},t.prototype.getValidName=function(e){return e?e.trim().replace(/[\{\}]+/g,""):e},t.prototype.updateValueFromSurvey=function(e){e=this.getUnbindValue(e),this.valueFromDataCallback&&(e=this.valueFromDataCallback(e)),this.setQuestionValue(this.valueFromData(e))},t.prototype.updateCommentFromSurvey=function(e){this.questionComment=e},t.prototype.setQuestionValue=function(e,t){void 0===t&&(t=!0),this.questionValue=e,this.allowNotifyValueChanged&&this.fireCallback(this.valueChangedCallback),t&&this.updateIsAnswered()},t.prototype.onSurveyValueChanged=function(e){},t.prototype.setVisibleIndex=function(e){return(!this.isVisible||!this.hasTitle&&!h.settings.setQuestionVisibleIndexForHiddenTitle||this.hideNumber&&!h.settings.setQuestionVisibleIndexForHiddenNumber)&&(e=-1),this.setPropertyValue("visibleIndex",e),this.setPropertyValue("no",this.calcNo()),e<0?0:1},t.prototype.removeElement=function(e){return!1},t.prototype.supportGoNextPageAutomatic=function(){return!1},t.prototype.supportGoNextPageError=function(){return!0},t.prototype.clearIncorrectValues=function(){},t.prototype.clearOnDeletingContainer=function(){},t.prototype.clearErrors=function(){this.errors=[]},t.prototype.clearUnusedValues=function(){},t.prototype.onAnyValueChanged=function(e){},t.prototype.checkBindings=function(e,t){if(!this.bindings.isEmpty()&&this.data)for(var n=this.bindings.getPropertiesByValueName(e),r=0;r<n.length;r++)this[n[r]]=t},t.prototype.getLocale=function(){return this.survey?this.survey.getLocale():this.locOwner?this.locOwner.getLocale():""},t.prototype.getMarkdownHtml=function(e,t){return this.survey?this.survey.getSurveyMarkdownHtml(this,e,t):this.locOwner?this.locOwner.getMarkdownHtml(e,t):null},t.prototype.getRenderer=function(e){return this.survey&&"function"==typeof this.survey.getRendererForString?this.survey.getRendererForString(this,e):this.locOwner&&"function"==typeof this.locOwner.getRenderer?this.locOwner.getRenderer(e):null},t.prototype.getProcessedText=function(e){return this.isLoadingFromJson?e:this.textProcessor?this.textProcessor.processText(e,this.useDisplayValuesInTitle):this.locOwner?this.locOwner.getProcessedText(e):e},t.prototype.getComponentName=function(){return f.RendererFactory.Instance.getRendererByQuestion(this)},t.prototype.isDefaultRendering=function(){return!!this.customWidget||"default"===this.renderAs||"default"===this.getComponentName()},t.prototype.getErrorCustomText=function(e,t){return this.survey?this.survey.getErrorCustomText(e,t):e},t.prototype.getValidatorTitle=function(){return null},Object.defineProperty(t.prototype,"validatedValue",{get:function(){return this.value},set:function(e){this.value=e},enumerable:!1,configurable:!0}),t.prototype.getAllValues=function(){return this.data?this.data.getAllValues():null},t.TextPreprocessorValuesMap={title:"processedTitle",require:"requiredText"},t.questionCounter=100,g([Object(o.property)({localizable:!0})],t.prototype,"description",void 0),g([Object(o.property)()],t.prototype,"cssClassesValue",void 0),g([Object(o.property)({defaultValue:"default"})],t.prototype,"renderAs",void 0),t}(a.SurveyElement);o.Serializer.addClass("question",["!name",{name:"state",default:"default",choices:["default","collapsed","expanded"]},{name:"visible:switch",default:!0},{name:"useDisplayValuesInTitle:boolean",default:!0,layout:"row"},"visibleIf:condition",{name:"width"},{name:"minWidth",default:h.settings.minWidth},{name:"maxWidth",default:h.settings.maxWidth},{name:"startWithNewLine:boolean",default:!0,layout:"row"},{name:"indent:number",default:0,choices:[0,1,2,3],layout:"row"},{name:"page",isSerializable:!1,visibleIf:function(e){var t=e?e.survey:null;return!t||t.pages.length>1},choices:function(e){var t=e?e.survey:null;return t?t.pages.map((function(e){return{value:e.name,text:e.title}})):[]}},{name:"title:text",serializationProperty:"locTitle",layout:"row"},{name:"titleLocation",default:"default",choices:["default","top","bottom","left","hidden"],layout:"row"},{name:"description:text",serializationProperty:"locDescription",layout:"row"},{name:"descriptionLocation",default:"default",choices:["default","underInput","underTitle"]},{name:"hideNumber:boolean",dependsOn:"titleLocation",visibleIf:function(e){if(!e)return!0;if("hidden"===e.titleLocation)return!1;var t=e?e.parent:null;if(t&&"off"===t.showQuestionNumbers)return!1;var n=e?e.survey:null;return!n||"off"!==n.showQuestionNumbers||!!t&&"onpanel"===t.showQuestionNumbers}},"valueName","enableIf:condition","defaultValue:value",{name:"defaultValueExpression:expression",category:"logic"},"correctAnswer:value","isRequired:switch","requiredIf:condition",{name:"requiredErrorText:text",serializationProperty:"locRequiredErrorText"},"readOnly:switch",{name:"validators:validators",baseClassName:"surveyvalidator",classNamePart:"validator"},{name:"bindings:bindings",serializationProperty:"bindings",visibleIf:function(e){return e.bindings.getNames().length>0}},{name:"renderAs",default:"default",visible:!1}]),o.Serializer.addAlterNativeClassName("question","questionbase")},"./src/questionCustomWidgets.ts":
/*!**************************************!*\
  !*** ./src/questionCustomWidgets.ts ***!
  \**************************************/
/*! exports provided: QuestionCustomWidget, CustomWidgetCollection */function(e,t,n){"use strict";n.r(t),n.d(t,"QuestionCustomWidget",(function(){return i})),n.d(t,"CustomWidgetCollection",(function(){return o}));var r=n(/*! ./base */"./src/base.ts"),i=function(){function e(e,t){this.name=e,this.widgetJson=t,this.isFirstRender=!0,this.htmlTemplate=t.htmlTemplate?t.htmlTemplate:""}return e.prototype.afterRender=function(e,t){var n=this;this.isFirstRender&&(this.isFirstRender=!1,e.survey.onLocaleChangedEvent.add((function(){n.widgetJson.willUnmount(e,t),n.widgetJson.afterRender(e,t)}))),this.widgetJson.afterRender&&this.widgetJson.afterRender(e,t)},e.prototype.willUnmount=function(e,t){this.widgetJson.willUnmount&&this.widgetJson.willUnmount(e,t)},e.prototype.getDisplayValue=function(e,t){return void 0===t&&(t=void 0),this.widgetJson.getDisplayValue?this.widgetJson.getDisplayValue(e,t):null},e.prototype.isFit=function(e){return!(!this.isLibraryLoaded()||!this.widgetJson.isFit)&&this.widgetJson.isFit(e)},Object.defineProperty(e.prototype,"canShowInToolbox",{get:function(){return!1!==this.widgetJson.showInToolbox&&"customtype"==o.Instance.getActivatedBy(this.name)&&(!this.widgetJson.widgetIsLoaded||this.widgetJson.widgetIsLoaded())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showInToolbox",{get:function(){return!1!==this.widgetJson.showInToolbox},set:function(e){this.widgetJson.showInToolbox=e},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.widgetJson.init&&this.widgetJson.init()},e.prototype.activatedByChanged=function(e){this.isLibraryLoaded()&&this.widgetJson.activatedByChanged&&this.widgetJson.activatedByChanged(e)},e.prototype.isLibraryLoaded=function(){return!this.widgetJson.widgetIsLoaded||1==this.widgetJson.widgetIsLoaded()},Object.defineProperty(e.prototype,"isDefaultRender",{get:function(){return this.widgetJson.isDefaultRender},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pdfQuestionType",{get:function(){return this.widgetJson.pdfQuestionType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pdfRender",{get:function(){return this.widgetJson.pdfRender},enumerable:!1,configurable:!0}),e}(),o=function(){function e(){this.widgetsValues=[],this.widgetsActivatedBy={},this.onCustomWidgetAdded=new r.Event}return Object.defineProperty(e.prototype,"widgets",{get:function(){return this.widgetsValues},enumerable:!1,configurable:!0}),e.prototype.add=function(e,t){void 0===t&&(t="property"),this.addCustomWidget(e,t)},e.prototype.addCustomWidget=function(e,t){void 0===t&&(t="property");var n=e.name;n||(n="widget_"+this.widgets.length+1);var r=new i(n,e);return this.widgetsValues.push(r),r.init(),this.widgetsActivatedBy[n]=t,r.activatedByChanged(t),this.onCustomWidgetAdded.fire(r,null),r},e.prototype.getActivatedBy=function(e){var t=this.widgetsActivatedBy[e];return t||"property"},e.prototype.setActivatedBy=function(e,t){if(e&&t){var n=this.getCustomWidgetByName(e);n&&(this.widgetsActivatedBy[e]=t,n.activatedByChanged(t))}},e.prototype.clear=function(){this.widgetsValues=[]},e.prototype.getCustomWidgetByName=function(e){for(var t=0;t<this.widgets.length;t++)if(this.widgets[t].name==e)return this.widgets[t];return null},e.prototype.getCustomWidget=function(e){for(var t=0;t<this.widgetsValues.length;t++)if(this.widgetsValues[t].isFit(e))return this.widgetsValues[t];return null},e.Instance=new e,e}()},"./src/question_baseselect.ts":
/*!************************************!*\
  !*** ./src/question_baseselect.ts ***!
  \************************************/
/*! exports provided: QuestionSelectBase, QuestionCheckboxBase */function(e,t,n){"use strict";n.r(t),n.d(t,"QuestionSelectBase",(function(){return m})),n.d(t,"QuestionCheckboxBase",(function(){return g}));var r,i=n(/*! ./jsonobject */"./src/jsonobject.ts"),o=n(/*! ./survey */"./src/survey.ts"),a=n(/*! ./question */"./src/question.ts"),s=n(/*! ./itemvalue */"./src/itemvalue.ts"),l=n(/*! ./surveyStrings */"./src/surveyStrings.ts"),u=n(/*! ./error */"./src/error.ts"),c=n(/*! ./choicesRestful */"./src/choicesRestful.ts"),p=n(/*! ./conditions */"./src/conditions.ts"),d=n(/*! ./helpers */"./src/helpers.ts"),h=n(/*! ./settings */"./src/settings.ts"),f=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),m=function(e){function t(t){var n=e.call(this,t)||this;n.otherItemValue=new s.ItemValue("other"),n.dependedQuestions=[],n.noneItemValue=new s.ItemValue("none"),n.isSettingDefaultValue=!1,n.isSettingComment=!1,n.isRunningChoices=!1,n.isFirstLoadChoicesFromUrl=!0,n.isUpdatingChoicesDependedQuestions=!1;var r=n.createLocalizableString("noneText",n,!0);r.onGetTextCallback=function(e){return e||l.surveyLocalization.getString("noneItemText")},n.noneItemValue.locOwner=n,n.noneItemValue.setLocText(r),n.createItemValues("choices"),n.registerFunctionOnPropertyValueChanged("choices",(function(){n.filterItems()||n.onVisibleChoicesChanged()})),n.registerFunctionOnPropertiesValueChanged(["choicesFromQuestion","choicesFromQuestionMode","hasNone"],(function(){n.onVisibleChoicesChanged()})),n.registerFunctionOnPropertyValueChanged("hideIfChoicesEmpty",(function(){n.updateVisibilityBasedOnChoices()})),n.createNewArray("visibleChoices"),n.setNewRestfulProperty();var i=n.createLocalizableString("otherText",n,!0);return n.createLocalizableString("otherErrorText",n,!0),n.otherItemValue.locOwner=n,n.otherItemValue.setLocText(i),i.onGetTextCallback=function(e){return e||l.surveyLocalization.getString("otherItemText")},n.choicesByUrl.beforeSendRequestCallback=function(){n.onBeforeSendRequest()},n.choicesByUrl.getResultCallback=function(e){n.onLoadChoicesFromUrl(e)},n.choicesByUrl.updateResultCallback=function(e,t){return n.survey?n.survey.updateChoicesFromServer(n,e,t):e},n.createLocalizableString("otherPlaceHolder",n),n}return f(t,e),t.prototype.getType=function(){return"selectbase"},t.prototype.dispose=function(){e.prototype.dispose.call(this);for(var t=0;t<this.dependedQuestions.length;t++)this.dependedQuestions[t].choicesFromQuestion="";this.removeFromDependedQuestion(this.getQuestionWithChoices())},t.prototype.supportGoNextPageError=function(){return!this.isOtherSelected||!!this.comment},t.prototype.isLayoutTypeSupported=function(e){return!0},t.prototype.localeChanged=function(){e.prototype.localeChanged.call(this),"none"!==this.choicesOrder&&this.updateVisibleChoices()},t.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this),this.choicesFromUrl&&(s.ItemValue.locStrsChanged(this.choicesFromUrl),s.ItemValue.locStrsChanged(this.visibleChoices))},Object.defineProperty(t.prototype,"otherItem",{get:function(){return this.otherItemValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOtherSelected",{get:function(){return this.hasOther&&this.getHasOther(this.renderedValue)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasNone",{get:function(){return this.getPropertyValue("hasNone",!1)},set:function(e){this.setPropertyValue("hasNone",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noneItem",{get:function(){return this.noneItemValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noneText",{get:function(){return this.getLocalizableStringText("noneText",l.surveyLocalization.getString("noneItemText"))},set:function(e){this.setLocalizableStringText("noneText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locNoneText",{get:function(){return this.getLocalizableString("noneText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choicesVisibleIf",{get:function(){return this.getPropertyValue("choicesVisibleIf","")},set:function(e){this.setPropertyValue("choicesVisibleIf",e),this.filterItems()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choicesEnableIf",{get:function(){return this.getPropertyValue("choicesEnableIf","")},set:function(e){this.setPropertyValue("choicesEnableIf",e),this.filterItems()},enumerable:!1,configurable:!0}),t.prototype.runCondition=function(t,n){e.prototype.runCondition.call(this,t,n),this.runItemsEnableCondition(t,n),this.runItemsCondition(t,n)},t.prototype.isTextValue=function(){return!0},t.prototype.setDefaultValue=function(){this.isSettingDefaultValue=!this.isValueEmpty(this.defaultValue)&&this.hasUnknownValue(this.defaultValue),this.prevCommentValue=void 0,e.prototype.setDefaultValue.call(this),this.isSettingDefaultValue=!1},t.prototype.getIsMultipleValue=function(){return!1},t.prototype.convertDefaultValue=function(e){if(null==e||null==e)return e;if(this.getIsMultipleValue()){if(!Array.isArray(e))return[e]}else if(Array.isArray(e)&&e.length>0)return e[0];return e},t.prototype.filterItems=function(){if(this.isLoadingFromJson||!this.data||this.areInvisibleElementsShowing)return!1;var e=this.getDataFilteredValues(),t=this.getDataFilteredProperties();return this.runItemsEnableCondition(e,t),this.runItemsCondition(e,t)},t.prototype.runItemsCondition=function(e,t){this.setConditionalChoicesRunner();var n=this.runConditionsForItems(e,t);return this.filteredChoicesValue&&this.filteredChoicesValue.length===this.activeChoices.length&&(this.filteredChoicesValue=void 0),n&&(this.onVisibleChoicesChanged(),this.clearIncorrectValues()),n},t.prototype.runItemsEnableCondition=function(e,t){var n=this;this.setConditionalEnableChoicesRunner(),s.ItemValue.runEnabledConditionsForItems(this.activeChoices,this.conditionChoicesEnableIfRunner,e,t,(function(e){return n.onEnableItemCallBack(e)}))&&this.clearDisabledValues(),this.onAfterRunItemsEnableCondition()},t.prototype.onAfterRunItemsEnableCondition=function(){},t.prototype.onEnableItemCallBack=function(e){return!0},t.prototype.setConditionalChoicesRunner=function(){this.choicesVisibleIf?(this.conditionChoicesVisibleIfRunner||(this.conditionChoicesVisibleIfRunner=new p.ConditionRunner(this.choicesVisibleIf)),this.conditionChoicesVisibleIfRunner.expression=this.choicesVisibleIf):this.conditionChoicesVisibleIfRunner=null},t.prototype.setConditionalEnableChoicesRunner=function(){this.choicesEnableIf?(this.conditionChoicesEnableIfRunner||(this.conditionChoicesEnableIfRunner=new p.ConditionRunner(this.choicesEnableIf)),this.conditionChoicesEnableIfRunner.expression=this.choicesEnableIf):this.conditionChoicesEnableIfRunner=null},t.prototype.runConditionsForItems=function(e,t){return this.filteredChoicesValue=[],s.ItemValue.runConditionsForItems(this.activeChoices,this.getFilteredChoices(),this.areInvisibleElementsShowing?null:this.conditionChoicesVisibleIfRunner,e,t,!this.survey||!this.survey.areInvisibleElementsShowing)},t.prototype.getHasOther=function(e){return e===this.otherItem.value},Object.defineProperty(t.prototype,"validatedValue",{get:function(){return this.rendredValueToDataCore(this.value)},enumerable:!1,configurable:!0}),t.prototype.createRestful=function(){return new c.ChoicesRestful},t.prototype.setNewRestfulProperty=function(){this.setPropertyValue("choicesByUrl",this.createRestful()),this.choicesByUrl.owner=this,this.choicesByUrl.loadingOwner=this},t.prototype.getQuestionComment=function(){return this.commentValue?this.commentValue:this.hasComment||this.getStoreOthersAsComment()?e.prototype.getQuestionComment.call(this):this.commentValue},t.prototype.setQuestionComment=function(t){this.hasComment||this.getStoreOthersAsComment()?e.prototype.setQuestionComment.call(this,t):this.isSettingComment||t==this.commentValue||(this.isSettingComment=!0,this.commentValue=t,this.isOtherSelected&&!this.isRenderedValueSetting&&(this.value=this.rendredValueToData(this.renderedValue)),this.isSettingComment=!1)},t.prototype.clearValue=function(){e.prototype.clearValue.call(this),this.prevCommentValue=void 0},Object.defineProperty(t.prototype,"renderedValue",{get:function(){return this.getPropertyValue("renderedValue",null)},set:function(e){this.setPropertyValue("renderedValue",e),this.value=this.rendredValueToData(e)},enumerable:!1,configurable:!0}),t.prototype.setQuestionValue=function(t,n,r){if(void 0===n&&(n=!0),void 0===r&&(r=!0),!this.isLoadingFromJson&&!d.Helpers.isTwoValueEquals(this.value,t)&&(e.prototype.setQuestionValue.call(this,t,n),this.setPropertyValue("renderedValue",this.rendredValueFromData(t)),!this.hasComment&&r)){var i=this.isOtherSelected;if(i&&this.prevCommentValue){var o=this.prevCommentValue;this.prevCommentValue=void 0,this.comment=o}!i&&this.comment&&(this.getStoreOthersAsComment()&&(this.prevCommentValue=this.comment),this.comment="")}},t.prototype.setNewValue=function(t){t=this.valueFromData(t),(this.choicesByUrl.isRunning||this.choicesByUrl.isWaitingForParameters)&&this.isValueEmpty(t)||(this.cachedValueForUrlRequests=t),e.prototype.setNewValue.call(this,t)},t.prototype.valueFromData=function(t){var n=s.ItemValue.getItemByValue(this.activeChoices,t);return n?n.value:e.prototype.valueFromData.call(this,t)},t.prototype.rendredValueFromData=function(e){return this.getStoreOthersAsComment()?e:this.renderedValueFromDataCore(e)},t.prototype.rendredValueToData=function(e){return this.getStoreOthersAsComment()?e:this.rendredValueToDataCore(e)},t.prototype.renderedValueFromDataCore=function(e){return this.hasUnknownValue(e,!0,!1)?(this.comment=e,this.otherItem.value):this.valueFromData(e)},t.prototype.rendredValueToDataCore=function(e){return e==this.otherItem.value&&this.getQuestionComment()&&(e=this.getQuestionComment()),e},t.prototype.hasUnknownValue=function(e,t,n,r){if(void 0===t&&(t=!1),void 0===n&&(n=!0),void 0===r&&(r=!1),!r&&this.isValueEmpty(e))return!1;if(t&&e==this.otherItem.value)return!1;if(this.hasNone&&e==this.noneItem.value)return!1;var i=n?this.getFilteredChoices():this.activeChoices;return null==s.ItemValue.getItemByValue(i,e)},t.prototype.isValueDisabled=function(e){var t=s.ItemValue.getItemByValue(this.getFilteredChoices(),e);return!!t&&!t.isEnabled},Object.defineProperty(t.prototype,"choicesByUrl",{get:function(){return this.getPropertyValue("choicesByUrl")},set:function(e){e&&(this.setNewRestfulProperty(),this.choicesByUrl.fromJSON(e.toJSON()))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choices",{get:function(){return this.getPropertyValue("choices")},set:function(e){this.setPropertyValue("choices",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choicesFromQuestion",{get:function(){return this.getPropertyValue("choicesFromQuestion")},set:function(e){var t=this.getQuestionWithChoices();t&&t.removeFromDependedQuestion(this),this.setPropertyValue("choicesFromQuestion",e)},enumerable:!1,configurable:!0}),t.prototype.addIntoDependedQuestion=function(e){!e||e.dependedQuestions.indexOf(this)>-1||e.dependedQuestions.push(this)},t.prototype.removeFromDependedQuestion=function(e){if(e){var t=e.dependedQuestions.indexOf(this);t>-1&&e.dependedQuestions.splice(t,1)}},Object.defineProperty(t.prototype,"choicesFromQuestionMode",{get:function(){return this.getPropertyValue("choicesFromQuestionMode")},set:function(e){this.setPropertyValue("choicesFromQuestionMode",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hideIfChoicesEmpty",{get:function(){return this.getPropertyValue("hideIfChoicesEmpty",!1)},set:function(e){this.setPropertyValue("hideIfChoicesEmpty",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keepIncorrectValues",{get:function(){return this.getPropertyValue("keepIncorrectValues",!1)},set:function(e){this.setPropertyValue("keepIncorrectValues",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storeOthersAsComment",{get:function(){return this.getPropertyValue("storeOthersAsComment","default")},set:function(e){this.setPropertyValue("storeOthersAsComment",e)},enumerable:!1,configurable:!0}),t.prototype.hasOtherChanged=function(){this.onVisibleChoicesChanged()},Object.defineProperty(t.prototype,"choicesOrder",{get:function(){return this.getPropertyValue("choicesOrder")},set:function(e){(e=e.toLowerCase())!=this.choicesOrder&&(this.setPropertyValue("choicesOrder",e),this.onVisibleChoicesChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"otherText",{get:function(){return this.getLocalizableStringText("otherText",l.surveyLocalization.getString("otherItemText"))},set:function(e){this.setLocalizableStringText("otherText",e),this.onVisibleChoicesChanged()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locOtherText",{get:function(){return this.getLocalizableString("otherText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"otherPlaceHolder",{get:function(){return this.getLocalizableStringText("otherPlaceHolder")},set:function(e){this.setLocalizableStringText("otherPlaceHolder",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locOtherPlaceHolder",{get:function(){return this.getLocalizableString("otherPlaceHolder")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"otherErrorText",{get:function(){return this.getLocalizableStringText("otherErrorText",l.surveyLocalization.getString("otherRequiredError"))},set:function(e){this.setLocalizableStringText("otherErrorText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locOtherErrorText",{get:function(){return this.getLocalizableString("otherErrorText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibleChoices",{get:function(){return this.getPropertyValue("visibleChoices",[])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enabledChoices",{get:function(){for(var e=[],t=this.visibleChoices,n=0;n<t.length;n++)t[n].isEnabled&&e.push(t[n]);return e},enumerable:!1,configurable:!0}),t.prototype.updateVisibleChoices=function(){if(!this.isLoadingFromJson){var e=new Array,t=this.calcVisibleChoices();t||(t=[]);for(var n=0;n<t.length;n++)e.push(t[n]);this.setPropertyValue("visibleChoices",e)}},t.prototype.calcVisibleChoices=function(){if(this.canUseFilteredChoices())return this.getFilteredChoices();var e=this.sortVisibleChoices(this.getFilteredChoices().slice());return this.addToVisibleChoices(e,this.isAddDefaultItems),e},t.prototype.canUseFilteredChoices=function(){return!this.isAddDefaultItems&&!this.hasNone&&!this.hasOther&&"none"==this.choicesOrder},t.prototype.addToVisibleChoices=function(e,t){t&&(this.newItemValue||(this.newItemValue=new s.ItemValue("newitem")),e.push(this.newItemValue)),this.supportOther()&&(t||this.hasOther)&&e.push(this.otherItem),this.supportNone()&&(t||this.hasNone)&&e.push(this.noneItem)},t.prototype.isItemInList=function(e){return e===this.otherItem?this.hasOther:e===this.noneItem?this.hasNone:e!==this.newItemValue},Object.defineProperty(t.prototype,"isAddDefaultItems",{get:function(){return h.settings.supportCreatorV2&&this.isDesignMode&&!this.parentQuestion},enumerable:!1,configurable:!0}),t.prototype.getPlainData=function(t){var n=this;void 0===t&&(t={includeEmpty:!0,includeQuestionTypes:!1});var r=e.prototype.getPlainData.call(this,t);if(r){var i=Array.isArray(this.value)?this.value:[this.value];r.isNode=!0,r.data=(r.data||[]).concat(i.map((function(e,r){var i=s.ItemValue.getItemByValue(n.visibleChoices,e),o={name:r,title:"Choice",value:e,displayValue:n.getChoicesDisplayValue(n.visibleChoices,e),getString:function(e){return"object"==typeof e?JSON.stringify(e):e},isNode:!1};return i&&(t.calculations||[]).forEach((function(e){o[e.propertyName]=i[e.propertyName]})),n.isOtherSelected&&n.otherItemValue===i&&(o.isOther=!0,o.displayValue=n.comment),o})))}return r},t.prototype.getDisplayValueCore=function(e,t){return this.getChoicesDisplayValue(this.visibleChoices,t)},t.prototype.getDisplayValueEmpty=function(){return s.ItemValue.getTextOrHtmlByValue(this.visibleChoices,void 0)},t.prototype.getChoicesDisplayValue=function(e,t){if(t==this.otherItemValue.value)return this.comment?this.comment:this.locOtherText.textOrHtml;var n=s.ItemValue.getTextOrHtmlByValue(e,t);return""==n&&t?t:n},t.prototype.getFilteredChoices=function(){return this.filteredChoicesValue?this.filteredChoicesValue:this.activeChoices},Object.defineProperty(t.prototype,"activeChoices",{get:function(){var e=this.getQuestionWithChoices();return e?(this.addIntoDependedQuestion(e),this.getChoicesFromQuestion(e)):this.choicesFromUrl?this.choicesFromUrl:this.getChoices()},enumerable:!1,configurable:!0}),t.prototype.getQuestionWithChoices=function(){if(!this.choicesFromQuestion||!this.survey)return null;var e=this.survey.getQuestionByName(this.choicesFromQuestion);return e&&e.visibleChoices&&e!==this?e:null},t.prototype.getChoicesFromQuestion=function(e){for(var t=[],n="selected"==this.choicesFromQuestionMode||"unselected"!=this.choicesFromQuestionMode&&void 0,r=e.visibleChoices,i=0;i<r.length;i++)if(!this.isBuiltInChoice(r[i],e))if(void 0!==n){var o=e.isItemSelected(r[i]);(o&&n||!o&&!n)&&t.push(r[i])}else t.push(r[i]);return t},Object.defineProperty(t.prototype,"hasActiveChoices",{get:function(){var e=this.visibleChoices;e&&0!=e.length||(this.onVisibleChoicesChanged(),e=this.visibleChoices);for(var t=0;t<e.length;t++)if(!this.isBuiltInChoice(e[t],this))return!0;return!1},enumerable:!1,configurable:!0}),t.prototype.isBuiltInChoice=function(e,t){return e===t.noneItem||e===t.otherItem||e===t.newItemValue},t.prototype.getChoices=function(){return this.choices},t.prototype.supportComment=function(){return!0},t.prototype.supportOther=function(){return this.isSupportProperty("hasOther")},t.prototype.supportNone=function(){return this.isSupportProperty("hasNone")},t.prototype.isSupportProperty=function(e){return!this.isDesignMode||i.Serializer.findProperty(this.getType(),e).visible},t.prototype.onCheckForErrors=function(t,n){e.prototype.onCheckForErrors.call(this,t,n),this.hasOther&&this.isOtherSelected&&!this.comment&&t.push(new u.OtherEmptyError(this.otherErrorText,this))},t.prototype.setSurveyImpl=function(t){e.prototype.setSurveyImpl.call(this,t),this.runChoicesByUrl(),this.isAddDefaultItems&&this.updateVisibleChoices()},t.prototype.setSurveyCore=function(t){e.prototype.setSurveyCore.call(this,t),t&&this.choicesFromQuestion&&this.onVisibleChoicesChanged()},t.prototype.getStoreOthersAsComment=function(){return!this.isSettingDefaultValue&&(!0===this.storeOthersAsComment||"default"==this.storeOthersAsComment&&(null==this.survey||this.survey.storeOthersAsComment)||!this.choicesByUrl.isEmpty&&!this.choicesFromUrl)},t.prototype.onSurveyLoad=function(){this.runChoicesByUrl(),this.onVisibleChoicesChanged(),e.prototype.onSurveyLoad.call(this)},t.prototype.onAnyValueChanged=function(t){e.prototype.onAnyValueChanged.call(this,t),t!=this.getValueName()&&this.runChoicesByUrl(),t&&t==this.choicesFromQuestion&&this.onVisibleChoicesChanged()},t.prototype.updateValueFromSurvey=function(t){var n="";this.hasOther&&!this.isRunningChoices&&!this.choicesByUrl.isRunning&&this.getStoreOthersAsComment()&&(this.hasUnknownValue(t)&&!this.getHasOther(t)?(n=this.getCommentFromValue(t),t=this.setOtherValueIntoValue(t)):n=this.data.getComment(this.getValueName())),e.prototype.updateValueFromSurvey.call(this,t),n&&this.setNewComment(n)},t.prototype.getCommentFromValue=function(e){return e},t.prototype.setOtherValueIntoValue=function(e){return this.otherItem.value},t.prototype.runChoicesByUrl=function(){if(this.choicesByUrl&&!this.isLoadingFromJson&&!this.isRunningChoices){var e=this.surveyImpl?this.surveyImpl.getTextProcessor():this.textProcessor;e||(e=this.survey),e&&(this.isReadyValue=this.isChoicesLoaded||this.choicesByUrl.isEmpty,this.isRunningChoices=!0,this.choicesByUrl.run(e),this.isRunningChoices=!1)}},t.prototype.onBeforeSendRequest=function(){!0!==h.settings.disableOnGettingChoicesFromWeb||this.isReadOnly||(this.enableOnLoadingChoices=!0,this.readOnly=!0)},t.prototype.onLoadChoicesFromUrl=function(e){if(this.enableOnLoadingChoices&&(this.readOnly=!1),!this.isReadOnly){var t=[];this.choicesByUrl&&this.choicesByUrl.error&&t.push(this.choicesByUrl.error),this.errors=t}var n=null,r=!0;this.isFirstLoadChoicesFromUrl&&!this.cachedValueForUrlRequests&&this.defaultValue&&(this.cachedValueForUrlRequests=this.defaultValue,r=!1),this.isValueEmpty(this.cachedValueForUrlRequests)&&(this.cachedValueForUrlRequests=this.value),this.isFirstLoadChoicesFromUrl=!1;var i=this.createCachedValueForUrlRequests(this.cachedValueForUrlRequests,r);if(e&&(e.length>0||this.choicesByUrl.allowEmptyResponse)&&(n=new Array,s.ItemValue.setData(n,e)),n)for(var o=0;o<n.length;o++)n[o].locOwner=this;if(this.choicesFromUrl=n,this.filterItems(),this.onVisibleChoicesChanged(),n){var a=this.updateCachedValueForUrlRequests(i,n);if(a&&!this.isReadOnly){var l=!d.Helpers.isTwoValueEquals(this.value,a.value);try{this.isValueEmpty(a.value)||(this.allowNotifyValueChanged=!1,this.setQuestionValue(void 0,!0,!1)),this.allowNotifyValueChanged=l,l?this.value=a.value:this.setQuestionValue(a.value)}finally{this.allowNotifyValueChanged=!0}}}this.choicesLoaded()},t.prototype.createCachedValueForUrlRequests=function(e,t){if(this.isValueEmpty(e))return null;if(Array.isArray(e)){for(var n=[],r=0;r<e.length;r++)n.push(this.createCachedValueForUrlRequests(e[r],!0));return n}return{value:e,isExists:!t||!this.hasUnknownValue(e)}},t.prototype.updateCachedValueForUrlRequests=function(e,t){if(this.isValueEmpty(e))return null;if(Array.isArray(e)){for(var n=[],r=0;r<e.length;r++){var i=this.updateCachedValueForUrlRequests(e[r],t);if(i&&!this.isValueEmpty(i.value)){var o=i.value;(a=s.ItemValue.getItemByValue(t,i.value))&&(o=a.value),n.push(o)}}return{value:n}}var a,l=e.isExists&&this.hasUnknownValue(e.value)?null:e.value;return(a=s.ItemValue.getItemByValue(t,l))&&(l=a.value),{value:l}},t.prototype.updateChoicesDependedQuestions=function(){if(!this.isUpdatingChoicesDependedQuestions){this.isUpdatingChoicesDependedQuestions=!0;for(var e=0;e<this.dependedQuestions.length;e++)this.dependedQuestions[e].onVisibleChoicesChanged(),this.dependedQuestions[e].updateChoicesDependedQuestions();this.isUpdatingChoicesDependedQuestions=!1}},t.prototype.onSurveyValueChanged=function(t){e.prototype.onSurveyValueChanged.call(this,t),this.isLoadingFromJson||this.updateChoicesDependedQuestions()},t.prototype.onVisibleChoicesChanged=function(){this.isLoadingFromJson||(this.updateVisibleChoices(),this.updateVisibilityBasedOnChoices(),this.visibleChoicesChangedCallback&&this.visibleChoicesChangedCallback(),this.updateChoicesDependedQuestions())},t.prototype.updateVisibilityBasedOnChoices=function(){if(this.hideIfChoicesEmpty){var e=this.getFilteredChoices();this.visible=!e||e.length>0}},t.prototype.sortVisibleChoices=function(e){var t=this.choicesOrder.toLowerCase();return"asc"==t?this.sortArray(e,1):"desc"==t?this.sortArray(e,-1):"random"==t?this.randomizeArray(e):e},t.prototype.sortArray=function(e,t){return e.sort((function(e,n){return e.calculatedText<n.calculatedText?-1*t:e.calculatedText>n.calculatedText?1*t:0}))},t.prototype.randomizeArray=function(e){return d.Helpers.randomizeArray(e)},t.prototype.clearIncorrectValues=function(){this.keepIncorrectValues||this.isEmpty()||this.survey&&this.survey.questionCountByValueName(this.getValueName())>1||(!this.choicesByUrl||this.choicesByUrl.isEmpty||this.choicesFromUrl&&0!=this.choicesFromUrl.length)&&(this.clearIncorrectValuesCallback?this.clearIncorrectValuesCallback():this.clearIncorrectValuesCore())},t.prototype.clearValueIfInvisible=function(){e.prototype.clearValueIfInvisible.call(this),this.clearIncorrectValues()},t.prototype.isItemSelected=function(e){return e.value===this.value},t.prototype.clearDisabledValues=function(){this.survey&&this.survey.clearValueOnDisableItems&&this.clearDisabledValuesCore()},t.prototype.clearIncorrectValuesCore=function(){var e=this.value;this.canClearValueAnUnknow(e)&&this.clearValue()},t.prototype.canClearValueAnUnknow=function(e){return!(!this.getStoreOthersAsComment()&&this.isOtherSelected)&&this.hasUnknownValue(e,!0,!0,!0)},t.prototype.clearDisabledValuesCore=function(){this.isValueDisabled(this.value)&&this.clearValue()},t.prototype.clearUnusedValues=function(){e.prototype.clearUnusedValues.call(this),this.isOtherSelected||this.hasComment||(this.comment="")},t.prototype.getColumnClass=function(){var e=this.cssClasses.column;return this.hasColumns&&(e+=" sv-q-column-"+this.colCount),e},t.prototype.getItemIndex=function(e){return this.visibleChoices.indexOf(e)},t.prototype.getItemClass=function(e){var t=this.cssClasses.item,n=this.isReadOnly||!e.isEnabled,r=this.isItemSelected(e)||this.isOtherSelected&&this.otherItem.value===e.value,i=!(n||r||this.survey&&this.survey.isDesignMode),o=e===this.noneItem;return this.hasColumns||(t+=0===this.colCount?" "+this.cssClasses.itemInline:" sv-q-col-"+this.colCount),n&&this.cssClasses.itemDisabled&&(t+=" "+this.cssClasses.itemDisabled),r&&this.cssClasses.itemChecked&&(t+=" "+this.cssClasses.itemChecked),i&&this.cssClasses.itemHover&&(t+=" "+this.cssClasses.itemHover),o&&this.cssClasses.itemNone&&(t+=" "+this.cssClasses.itemNone),t},t.prototype.getLabelClass=function(e){var t=this.cssClasses.label;return this.isItemSelected(e)&&(t+=" "+this.cssClasses.labelChecked),t},t.prototype.getControlLabelClass=function(e){var t=this.cssClasses.controlLabel;return this.isItemSelected(e)&&(t+=" "+this.cssClasses.controlLabelChecked),t},Object.defineProperty(t.prototype,"columns",{get:function(){var e=[],t=this.colCount;if(this.hasColumns&&this.visibleChoices.length>0)if("column"==h.settings.showItemsInOrder)for(var n=0,r=this.visibleChoices.length%t,i=0;i<t;i++){for(var o=[],a=n;a<n+Math.floor(this.visibleChoices.length/t);a++)o.push(this.visibleChoices[a]);r>0&&(r--,o.push(this.visibleChoices[a]),a++),n=a,e.push(o)}else for(i=0;i<t;i++){for(o=[],a=i;a<this.visibleChoices.length;a+=t)o.push(this.visibleChoices[a]);e.push(o)}return e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasColumns",{get:function(){return this.colCount>1},enumerable:!1,configurable:!0}),t.prototype.choicesLoaded=function(){this.isChoicesLoaded=!0;var e=this.isReadyValue;this.isReadyValue=!0,this.onReadyChanged&&this.onReadyChanged.fire(this,{question:this,isReady:!0,oldIsReady:e})},t.prototype.getItemValueWrapperComponentName=function(e){var t=this.survey;return t?t.getItemValueWrapperComponentName(e,this):o.SurveyModel.TemplateRendererComponentName},t.prototype.getItemValueWrapperComponentData=function(e){var t=this.survey;return t?t.getItemValueWrapperComponentData(e,this):e},t}(a.Question),g=function(e){function t(t){return e.call(this,t)||this}return f(t,e),Object.defineProperty(t.prototype,"colCount",{get:function(){return this.getPropertyValue("colCount",this.isFlowLayout?0:1)},set:function(e){e<0||e>5||this.isFlowLayout||(this.setPropertyValue("colCount",e),this.fireCallback(this.colCountChangedCallback))},enumerable:!1,configurable:!0}),t.prototype.onParentChanged=function(){e.prototype.onParentChanged.call(this),this.isFlowLayout&&this.setPropertyValue("colCount",null)},t.prototype.onParentQuestionChanged=function(){this.onVisibleChoicesChanged()},t.prototype.getSearchableItemValueKeys=function(e){e.push("choices")},t}(m);i.Serializer.addClass("selectbase",[{name:"hasComment:switch",layout:"row"},{name:"commentText",dependsOn:"hasComment",visibleIf:function(e){return e.hasComment},serializationProperty:"locCommentText",layout:"row"},"choicesFromQuestion:question_selectbase",{name:"choices:itemvalue[]",baseValue:function(){return l.surveyLocalization.getString("choices_Item")},dependsOn:"choicesFromQuestion",visibleIf:function(e){return!e.choicesFromQuestion}},{name:"choicesFromQuestionMode",default:"all",choices:["all","selected","unselected"],dependsOn:"choicesFromQuestion",visibleIf:function(e){return!!e.choicesFromQuestion}},{name:"choicesOrder",default:"none",choices:["none","asc","desc","random"],dependsOn:"choicesFromQuestion",visibleIf:function(e){return!e.choicesFromQuestion}},{name:"choicesByUrl:restfull",className:"ChoicesRestful",onGetValue:function(e){return e.choicesByUrl.getData()},onSetValue:function(e,t){e.choicesByUrl.setData(t)}},"hideIfChoicesEmpty:boolean",{name:"choicesVisibleIf:condition",dependsOn:"choicesFromQuestion",visibleIf:function(e){return!e.choicesFromQuestion}},{name:"choicesEnableIf:condition",dependsOn:"choicesFromQuestion",visibleIf:function(e){return!e.choicesFromQuestion}},"hasOther:boolean","hasNone:boolean",{name:"otherPlaceHolder",serializationProperty:"locOtherPlaceHolder",dependsOn:"hasOther",visibleIf:function(e){return e.hasOther}},{name:"noneText",serializationProperty:"locNoneText",dependsOn:"hasNone",visibleIf:function(e){return e.hasNone}},{name:"otherText",serializationProperty:"locOtherText",dependsOn:"hasOther",visibleIf:function(e){return e.hasOther}},{name:"otherErrorText",serializationProperty:"locOtherErrorText",dependsOn:"hasOther",visibleIf:function(e){return e.hasOther}},{name:"storeOthersAsComment",default:"default",choices:["default",!0,!1],visible:!1}],null,"question"),i.Serializer.addClass("checkboxbase",[{name:"colCount:number",default:1,choices:[0,1,2,3,4,5],layout:"row"}],null,"selectbase")},"./src/question_boolean.ts":
/*!*********************************!*\
  !*** ./src/question_boolean.ts ***!
  \*********************************/
/*! exports provided: QuestionBooleanModel */function(e,t,n){"use strict";n.r(t),n.d(t,"QuestionBooleanModel",(function(){return c}));var r,i=n(/*! ./questionfactory */"./src/questionfactory.ts"),o=n(/*! ./jsonobject */"./src/jsonobject.ts"),a=n(/*! ./question */"./src/question.ts"),s=n(/*! ./surveyStrings */"./src/surveyStrings.ts"),l=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},c=function(e){function t(t){var n=e.call(this,t)||this;return n.createLocalizableString("labelFalse",n,!0),n.createLocalizableString("labelTrue",n,!0),n.locLabelFalse.onGetTextCallback=function(e){return e||s.surveyLocalization.getString("booleanUncheckedLabel")},n.locLabelTrue.onGetTextCallback=function(e){return e||s.surveyLocalization.getString("booleanCheckedLabel")},n}return l(t,e),t.prototype.getType=function(){return"boolean"},t.prototype.isLayoutTypeSupported=function(e){return!0},t.prototype.supportGoNextPageAutomatic=function(){return"checkbox"!==this.renderAs},Object.defineProperty(t.prototype,"isIndeterminate",{get:function(){return this.isEmpty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitle",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"checkedValue",{get:function(){return this.isEmpty()?null:this.value==this.getValueTrue()},set:function(e){this.isReadOnly||this.setCheckedValue(e)},enumerable:!1,configurable:!0}),t.prototype.setCheckedValue=function(e){this.isValueEmpty(e)?this.value=null:this.value=1==e?this.getValueTrue():this.getValueFalse()},Object.defineProperty(t.prototype,"defaultValue",{get:function(){return this.getPropertyValue("defaultValue")},set:function(e){!0===e&&(e="true"),!1===e&&(e="false"),this.setPropertyValue("defaultValue",e),this.updateValueWithDefaults()},enumerable:!1,configurable:!0}),t.prototype.getDefaultValue=function(){return"indeterminate"==this.defaultValue||void 0===this.defaultValue?null:"true"==this.defaultValue?this.getValueTrue():this.getValueFalse()},Object.defineProperty(t.prototype,"locTitle",{get:function(){return this.showTitle||this.isValueEmpty(this.locLabel.text)?this.getLocalizableString("title"):this.locLabel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locDisplayLabel",{get:function(){return this.locLabel.text||this.showTitle?this.locLabel:this.locTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelTrue",{get:function(){return this.getLocalizableStringText("labelTrue")},set:function(e){this.setLocalizableStringText("labelTrue",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locLabelTrue",{get:function(){return this.getLocalizableString("labelTrue")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"labelFalse",{get:function(){return this.getLocalizableStringText("labelFalse")},set:function(e){this.setLocalizableStringText("labelFalse",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locLabelFalse",{get:function(){return this.getLocalizableString("labelFalse")},enumerable:!1,configurable:!0}),t.prototype.getValueTrue=function(){return!this.valueTrue||this.valueTrue},t.prototype.getValueFalse=function(){return!!this.valueFalse&&this.valueFalse},t.prototype.setDefaultValue=function(){"true"==this.defaultValue&&this.setCheckedValue(!0),"false"==this.defaultValue&&this.setCheckedValue(!1),"indeterminate"==this.defaultValue&&this.setCheckedValue(null)},t.prototype.getDisplayValueCore=function(e,t){return t==this.getValueTrue()?this.locLabelTrue.textOrHtml:this.locLabelFalse.textOrHtml},u([Object(o.property)({localizable:!0})],t.prototype,"label",void 0),u([Object(o.property)()],t.prototype,"showTitle",void 0),u([Object(o.property)()],t.prototype,"valueTrue",void 0),u([Object(o.property)()],t.prototype,"valueFalse",void 0),t}(a.Question);o.Serializer.addClass("boolean",[{name:"label:text",serializationProperty:"locLabel"},{name:"labelTrue:text",serializationProperty:"locLabelTrue"},{name:"labelFalse:text",serializationProperty:"locLabelFalse"},"showTitle:boolean","valueTrue","valueFalse",{name:"renderAs",default:"default",visible:!1}],(function(){return new c("")}),"question"),i.QuestionFactory.Instance.registerQuestion("boolean",(function(e){return new c(e)}))},"./src/question_buttongroup.ts":
/*!*************************************!*\
  !*** ./src/question_buttongroup.ts ***!
  \*************************************/
/*! exports provided: ButtonGroupItemValue, QuestionButtonGroupModel, ButtonGroupItemModel */function(e,t,n){"use strict";n.r(t),n.d(t,"ButtonGroupItemValue",(function(){return u})),n.d(t,"QuestionButtonGroupModel",(function(){return c})),n.d(t,"ButtonGroupItemModel",(function(){return p}));var r,i=n(/*! ./jsonobject */"./src/jsonobject.ts"),o=n(/*! ./itemvalue */"./src/itemvalue.ts"),a=n(/*! ./question_baseselect */"./src/question_baseselect.ts"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},u=function(e){function t(t,n,r){void 0===n&&(n=null),void 0===r&&(r="buttongroupitemvalue");var i=e.call(this,t,n,r)||this;return i.typeName=r,i}return s(t,e),t.prototype.getType=function(){return this.typeName?this.typeName:"buttongroupitemvalue"},l([Object(i.property)()],t.prototype,"iconName",void 0),l([Object(i.property)()],t.prototype,"iconSize",void 0),l([Object(i.property)()],t.prototype,"showCaption",void 0),t}(o.ItemValue),c=function(e){function t(t){return e.call(this,t)||this}return s(t,e),t.prototype.getType=function(){return"buttongroup"},t.prototype.getItemValueType=function(){return"buttongroupitemvalue"},t.prototype.supportOther=function(){return!1},t}(a.QuestionCheckboxBase);i.Serializer.addClass("buttongroup",[{name:"choices:buttongroupitemvalue[]"}],(function(){return new c("")}),"checkboxbase"),i.Serializer.addClass("buttongroupitemvalue",[{name:"showCaption:boolean",default:!0},{name:"iconName:text"},{name:"iconSize:number"}],(function(e){return new u(e)}),"itemvalue");var p=function(){function e(e,t,n){this.question=e,this.item=t,this.index=n}return Object.defineProperty(e.prototype,"value",{get:function(){return this.item.value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iconName",{get:function(){return this.item.iconName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iconSize",{get:function(){return this.item.iconSize||24},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"caption",{get:function(){return this.item.locText},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showCaption",{get:function(){return this.item.showCaption||void 0===this.item.showCaption},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRequired",{get:function(){return this.question.isRequired},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this.question.isItemSelected(this.item)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"readOnly",{get:function(){return this.question.isInputReadOnly||!this.item.isEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.question.name+"_"+this.question.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.question.inputId+"_"+this.index},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasErrors",{get:function(){return this.question.errors.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"describedBy",{get:function(){return this.question.errors.length>0?this.question.id+"_errors":null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelClass",{get:function(){var e=this.question.cssClasses.item;return this.selected&&(e+=" "+this.question.cssClasses.itemSelected),this.readOnly||this.selected||(e+=" "+this.question.cssClasses.itemHover),!this.question.isReadOnly&&this.item.isEnabled||(e+=" "+this.question.cssClasses.itemDisabled),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"css",{get:function(){return{label:this.labelClass,icon:this.question.cssClasses.itemIcon,control:this.question.cssClasses.itemControl,caption:this.question.cssClasses.itemCaption,decorator:this.question.cssClasses.itemDecorator}},enumerable:!1,configurable:!0}),e.prototype.onChange=function(){this.question.renderedValue=this.item.value},e}()},"./src/question_checkbox.ts":
/*!**********************************!*\
  !*** ./src/question_checkbox.ts ***!
  \**********************************/
/*! exports provided: QuestionCheckboxModel */function(e,t,n){"use strict";n.r(t),n.d(t,"QuestionCheckboxModel",(function(){return p}));var r,i=n(/*! ./jsonobject */"./src/jsonobject.ts"),o=n(/*! ./questionfactory */"./src/questionfactory.ts"),a=n(/*! ./question_baseselect */"./src/question_baseselect.ts"),s=n(/*! ./helpers */"./src/helpers.ts"),l=n(/*! ./itemvalue */"./src/itemvalue.ts"),u=n(/*! ./surveyStrings */"./src/surveyStrings.ts"),c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),p=function(e){function t(t){var n=e.call(this,t)||this;n.selectAllItemValue=new l.ItemValue("selectall"),n.invisibleOldValues={},n.isChangingValueOnClearIncorrect=!1;var r=n.createLocalizableString("selectAllText",n,!0);return r.onGetTextCallback=function(e){return e||u.surveyLocalization.getString("selectAllItemText")},n.selectAllItem.locOwner=n,n.selectAllItem.setLocText(r),n.registerFunctionOnPropertiesValueChanged(["hasSelectAll","selectAllText"],(function(){n.onVisibleChoicesChanged()})),n}return c(t,e),Object.defineProperty(t.prototype,"ariaRole",{get:function(){return"group"},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"checkbox"},t.prototype.onCreating=function(){e.prototype.onCreating.call(this),this.createNewArray("renderedValue"),this.createNewArray("value")},t.prototype.getFirstInputElementId=function(){return this.inputId+"_0"},Object.defineProperty(t.prototype,"selectAllItem",{get:function(){return this.selectAllItemValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectAllText",{get:function(){return this.getLocalizableStringText("selectAllText",u.surveyLocalization.getString("selectAllItemText"))},set:function(e){this.setLocalizableStringText("selectAllText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locSelectAllText",{get:function(){return this.getLocalizableString("selectAllText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSelectAll",{get:function(){return this.getPropertyValue("hasSelectAll",!1)},set:function(e){this.setPropertyValue("hasSelectAll",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAllSelected",{get:function(){var e=this.value;if(!e||!Array.isArray(e))return!1;if(this.isItemSelected(this.noneItem))return!1;var t=this.visibleChoices.length;this.hasOther&&t--,this.hasNone&&t--,this.hasSelectAll&&t--;var n=e.length;return this.isItemSelected(this.otherItem)&&n--,n===t},set:function(e){e?this.selectAll():this.clearValue()},enumerable:!1,configurable:!0}),t.prototype.toggleSelectAll=function(){this.isAllSelected=!this.isAllSelected},t.prototype.selectAll=function(){for(var e=[],t=0;t<this.visibleChoices.length;t++){var n=this.visibleChoices[t];n!==this.noneItem&&n!==this.otherItem&&n!==this.selectAllItem&&e.push(n.value)}this.value=e},t.prototype.isItemSelected=function(e){if(e===this.selectAllItem)return this.isAllSelected;var t=this.renderedValue;if(!t||!Array.isArray(t))return!1;for(var n=0;n<t.length;n++)if(s.Helpers.isTwoValueEquals(t[n],e.value))return!0;return!1},Object.defineProperty(t.prototype,"maxSelectedChoices",{get:function(){return this.getPropertyValue("maxSelectedChoices",0)},set:function(e){e<0&&(e=0),this.setPropertyValue("maxSelectedChoices",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedItems",{get:function(){if(this.isEmpty())return[];for(var e=this.value,t=[],n=0;n<e.length;n++)t.push(l.ItemValue.getItemByValue(this.visibleChoices,e[n]));return t},enumerable:!1,configurable:!0}),t.prototype.onEnableItemCallBack=function(e){return!this.shouldCheckMaxSelectedChoices()||this.isItemSelected(e)},t.prototype.onAfterRunItemsEnableCondition=function(){this.maxSelectedChoices<1||(this.hasSelectAll&&this.selectAllItem.setIsEnabled(this.maxSelectedChoices>=this.activeChoices.length),this.hasOther&&this.otherItem.setIsEnabled(!this.shouldCheckMaxSelectedChoices()||this.isOtherSelected))},t.prototype.shouldCheckMaxSelectedChoices=function(){if(this.maxSelectedChoices<1)return!1;var e=this.value;return(Array.isArray(e)?e.length:0)>=this.maxSelectedChoices},t.prototype.getItemClass=function(t){this.value;var n=e.prototype.getItemClass.call(this,t);return t===this.selectAllItem&&this.cssClasses.itemSelectAll&&(n+=" "+this.cssClasses.itemSelectAll),n},t.prototype.setNewValue=function(t){this.isChangingValueOnClearIncorrect||(this.invisibleOldValues=[]),t=this.valueFromData(t);var n=this.value;if(t||(t=[]),n||(n=[]),!s.Helpers.isTwoValueEquals(n,t)){if(this.hasNone){var r=this.noneIndexInArray(n),i=this.noneIndexInArray(t);r>-1?i>-1&&t.length>1&&t.splice(i,1):i>-1&&(t.splice(0,t.length),t.push(this.noneItem.value))}e.prototype.setNewValue.call(this,this.rendredValueToData(t))}},t.prototype.getIsMultipleValue=function(){return!0},t.prototype.getCommentFromValue=function(e){var t=this.getFirstUnknownIndex(e);return t<0?"":e[t]},t.prototype.setOtherValueIntoValue=function(e){var t=this.getFirstUnknownIndex(e);return t<0||e.splice(t,1,this.otherItem.value),e},t.prototype.getFirstUnknownIndex=function(e){if(!Array.isArray(e))return-1;for(var t=0;t<e.length;t++)if(this.hasUnknownValue(e[t]))return t;return-1},t.prototype.noneIndexInArray=function(e){if(!e||!Array.isArray(e))return-1;for(var t=this.noneItem.value,n=0;n<e.length;n++)if(e[n]==t)return n;return-1},t.prototype.canUseFilteredChoices=function(){return!this.hasSelectAll&&e.prototype.canUseFilteredChoices.call(this)},t.prototype.supportSelectAll=function(){return this.isSupportProperty("hasSelectAll")},t.prototype.addToVisibleChoices=function(t,n){this.supportSelectAll()&&(n||this.hasSelectAll)&&t.unshift(this.selectAllItem),e.prototype.addToVisibleChoices.call(this,t,n)},t.prototype.isBuiltInChoice=function(t,n){return t===n.selectAllItem||e.prototype.isBuiltInChoice.call(this,t,n)},t.prototype.isItemInList=function(t){return t==this.selectAllItem?this.hasSelectAll:e.prototype.isItemInList.call(this,t)},t.prototype.getDisplayValueCore=function(t,n){if(!Array.isArray(n))return e.prototype.getDisplayValueCore.call(this,t,n);for(var r=this.visibleChoices,i="",o=0;o<n.length;o++){var a=this.getChoicesDisplayValue(r,n[o]);a&&(i&&(i+=", "),i+=a)}return i},t.prototype.clearIncorrectValuesCore=function(){this.clearIncorrectAndDisabledValues(!1)},t.prototype.clearDisabledValuesCore=function(){this.clearIncorrectAndDisabledValues(!0)},t.prototype.clearIncorrectAndDisabledValues=function(e){var t=this.value,n=!1,r=this.restoreValuesFromInvisible();if(t||0!=r.length){if(!Array.isArray(t)||0==t.length){if(this.isChangingValueOnClearIncorrect=!0,e||(this.hasComment?this.value=null:this.clearValue()),this.isChangingValueOnClearIncorrect=!1,0==r.length)return;t=[]}for(var i=[],o=0;o<t.length;o++){var a=this.canClearValueAnUnknow(t[o]);!e&&!a||e&&!this.isValueDisabled(t[o])?i.push(t[o]):(n=!0,a&&(this.invisibleOldValues[t[o]]=!0))}for(o=0;o<r.length;o++)i.push(r[o]),n=!0;n&&(this.isChangingValueOnClearIncorrect=!0,0==i.length?this.clearValue():this.value=i,this.isChangingValueOnClearIncorrect=!1)}},t.prototype.restoreValuesFromInvisible=function(){for(var e=[],t=this.visibleChoices,n=0;n<t.length;n++){var r=t[n].value;this.invisibleOldValues[r]&&(e.push(r),delete this.invisibleOldValues[r])}return e},t.prototype.getConditionJson=function(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var r=e.prototype.getConditionJson.call(this);return"contains"!=t&&"notcontains"!=t||(r.type="radiogroup"),r},t.prototype.isAnswerCorrect=function(){return s.Helpers.isArrayContainsEqual(this.value,this.correctAnswer)},t.prototype.setDefaultValueWithOthers=function(){this.value=this.renderedValueFromDataCore(this.defaultValue)},t.prototype.getHasOther=function(e){return!(!e||!Array.isArray(e))&&e.indexOf(this.otherItem.value)>=0},t.prototype.valueFromData=function(t){if(!t)return t;if(!Array.isArray(t))return[e.prototype.valueFromData.call(this,t)];for(var n=[],r=0;r<t.length;r++){var i=l.ItemValue.getItemByValue(this.activeChoices,t[r]);i?n.push(i.value):n.push(t[r])}return n},t.prototype.renderedValueFromDataCore=function(e){if(e&&Array.isArray(e)||(e=[]),!this.hasActiveChoices)return e;for(var t=0;t<e.length;t++){if(e[t]==this.otherItem.value)return e;if(this.hasUnknownValue(e[t],!0,!1)){this.comment=e[t];var n=e.slice();return n[t]=this.otherItem.value,n}}return e},t.prototype.rendredValueToDataCore=function(e){if(!e||!e.length)return e;for(var t=0;t<e.length;t++)if(e[t]==this.otherItem.value&&this.getQuestionComment()){var n=e.slice();return n[t]=this.getQuestionComment(),n}return e},t}(a.QuestionCheckboxBase);i.Serializer.addClass("checkbox",["hasSelectAll:boolean",{name:"maxSelectedChoices:number",default:0},{name:"selectAllText",serializationProperty:"locSelectAllText"}],(function(){return new p("")}),"checkboxbase"),o.QuestionFactory.Instance.registerQuestion("checkbox",(function(e){var t=new p(e);return t.choices=o.QuestionFactory.DefaultChoices,t}))},"./src/question_comment.ts":
/*!*********************************!*\
  !*** ./src/question_comment.ts ***!
  \*********************************/
/*! exports provided: QuestionCommentModel */function(e,t,n){"use strict";n.r(t),n.d(t,"QuestionCommentModel",(function(){return l}));var r,i=n(/*! ./jsonobject */"./src/jsonobject.ts"),o=n(/*! ./questionfactory */"./src/questionfactory.ts"),a=n(/*! ./question_textbase */"./src/question_textbase.ts"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),Object.defineProperty(t.prototype,"rows",{get:function(){return this.getPropertyValue("rows")},set:function(e){this.setPropertyValue("rows",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cols",{get:function(){return this.getPropertyValue("cols")},set:function(e){this.setPropertyValue("cols",e)},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"comment"},t}(a.QuestionTextBase);i.Serializer.addClass("comment",[{name:"maxLength:number",default:-1},{name:"cols:number",default:50},{name:"rows:number",default:4},{name:"placeHolder",serializationProperty:"locPlaceHolder"},{name:"textUpdateMode",default:"default",choices:["default","onBlur","onTyping"]}],(function(){return new l("")}),"textbase"),o.QuestionFactory.Instance.registerQuestion("comment",(function(e){return new l(e)}))},"./src/question_custom.ts":
/*!********************************!*\
  !*** ./src/question_custom.ts ***!
  \********************************/
/*! exports provided: ComponentQuestionJSON, ComponentCollection, QuestionCustomModelBase, QuestionCustomModel, QuestionCompositeModel */function(e,t,n){"use strict";n.r(t),n.d(t,"ComponentQuestionJSON",(function(){return c})),n.d(t,"ComponentCollection",(function(){return p})),n.d(t,"QuestionCustomModelBase",(function(){return d})),n.d(t,"QuestionCustomModel",(function(){return h})),n.d(t,"QuestionCompositeModel",(function(){return m}));var r,i=n(/*! ./question */"./src/question.ts"),o=n(/*! ./jsonobject */"./src/jsonobject.ts"),a=n(/*! ./survey-element */"./src/survey-element.ts"),s=n(/*! ./helpers */"./src/helpers.ts"),l=n(/*! ./textPreProcessor */"./src/textPreProcessor.ts"),u=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(){function e(e,t){this.name=e,this.json=t;var n=this;o.Serializer.addClass(e,[],(function(e){return p.Instance.createQuestion(e?e.name:"",n)}),"question"),this.onInit()}return e.prototype.onInit=function(){this.json.onInit&&this.json.onInit()},e.prototype.onCreated=function(e){this.json.onCreated&&this.json.onCreated(e)},e.prototype.onLoaded=function(e){this.json.onLoaded&&this.json.onLoaded(e)},e.prototype.onAfterRender=function(e,t){this.json.onAfterRender&&this.json.onAfterRender(e,t)},e.prototype.onAfterRenderContentElement=function(e,t,n){this.json.onAfterRenderContentElement&&this.json.onAfterRenderContentElement(e,t,n)},e.prototype.onPropertyChanged=function(e,t,n){this.json.onPropertyChanged&&this.json.onPropertyChanged(e,t,n)},e.prototype.onValueChanged=function(e,t,n){this.json.onValueChanged&&this.json.onValueChanged(e,t,n)},e.prototype.onItemValuePropertyChanged=function(e,t,n,r,i){this.json.onItemValuePropertyChanged&&this.json.onItemValuePropertyChanged(e,{obj:t,propertyName:n,name:r,newValue:i})},Object.defineProperty(e.prototype,"isComposite",{get:function(){return!!this.json.elementsJSON||!!this.json.createElements},enumerable:!1,configurable:!0}),e}(),p=function(){function e(){this.customQuestionValues=[]}return e.prototype.add=function(e){if(e){var t=e.name;if(!t)throw"Attribute name is missed";if(t=t.toLowerCase(),this.getCustomQuestionByName(t))throw"There is already registered custom question with name '"+t+"'";if(o.Serializer.findClass(t))throw"There is already class with name '"+t+"'";var n=new c(t,e);this.onAddingJson&&this.onAddingJson(t,n.isComposite),this.customQuestionValues.push(n)}},Object.defineProperty(e.prototype,"items",{get:function(){return this.customQuestionValues},enumerable:!1,configurable:!0}),e.prototype.getCustomQuestionByName=function(e){for(var t=0;t<this.customQuestionValues.length;t++)if(this.customQuestionValues[t].name==e)return this.customQuestionValues[t];return null},e.prototype.clear=function(){for(var e=0;e<this.customQuestionValues.length;e++)o.Serializer.removeClass(this.customQuestionValues[e].name);this.customQuestionValues=[]},e.prototype.createQuestion=function(e,t){return t.isComposite?this.createCompositeModel(e,t):this.createCustomModel(e,t)},e.prototype.createCompositeModel=function(e,t){return this.onCreateComposite?this.onCreateComposite(e,t):new m(e,t)},e.prototype.createCustomModel=function(e,t){return this.onCreateCustom?this.onCreateCustom(e,t):new h(e,t)},e.Instance=new e,e}(),d=function(e){function t(t,n){var r=e.call(this,t)||this;return r.customQuestion=n,o.CustomPropertiesCollection.createProperties(r),a.SurveyElement.CreateDisabledDesignElements=!0,r.createWrapper(),a.SurveyElement.CreateDisabledDesignElements=!1,r.customQuestion&&r.customQuestion.onCreated(r),r}return u(t,e),t.prototype.getType=function(){return this.customQuestion?this.customQuestion.name:"custom"},t.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this),this.getElement()&&this.getElement().locStrsChanged()},t.prototype.createWrapper=function(){},t.prototype.onPropertyValueChanged=function(t,n,r){e.prototype.onPropertyValueChanged.call(this,t,n,r),this.customQuestion&&!this.isLoadingFromJson&&this.customQuestion.onPropertyChanged(this,t,r)},t.prototype.itemValuePropertyChanged=function(t,n,r,i){e.prototype.itemValuePropertyChanged.call(this,t,n,r,i),this.customQuestion&&!this.isLoadingFromJson&&this.customQuestion.onItemValuePropertyChanged(this,t,t.ownerPropertyName,n,i)},t.prototype.onFirstRendering=function(){var t=this.getElement();t&&t.onFirstRendering(),e.prototype.onFirstRendering.call(this)},t.prototype.initElement=function(e){e&&(e.setSurveyImpl(this),e.disableDesignActions=!0)},t.prototype.setSurveyImpl=function(t){e.prototype.setSurveyImpl.call(this,t),this.initElement(this.getElement())},t.prototype.onSurveyLoad=function(){e.prototype.onSurveyLoad.call(this),this.getElement()&&(this.getElement().onSurveyLoad(),this.customQuestion.onLoaded(this))},t.prototype.afterRenderQuestionElement=function(e){},t.prototype.afterRender=function(t){e.prototype.afterRender.call(this,t),this.customQuestion&&this.customQuestion.onAfterRender(this,t)},t.prototype.setQuestionValue=function(t,n){void 0===n&&(n=!0),e.prototype.setQuestionValue.call(this,t,n),this.updateElementCss()},t.prototype.setNewValue=function(t){e.prototype.setNewValue.call(this,t),this.updateElementCss()},t.prototype.getSurveyData=function(){return this},t.prototype.getTextProcessor=function(){return this.textProcessor},t.prototype.getValue=function(e){return this.value},t.prototype.setValue=function(e,t,n,r){if(this.data){var i=this.convertDataName(e);this.data.setValue(i,this.convertDataValue(e,t),n,r),this.updateIsAnswered(),this.updateElementCss(),this.customQuestion&&this.customQuestion.onValueChanged(this,e,t)}},t.prototype.convertDataName=function(e){return this.getValueName()},t.prototype.convertDataValue=function(e,t){return t},t.prototype.getVariable=function(e){return this.data?this.data.getVariable(e):null},t.prototype.setVariable=function(e,t){this.data&&this.data.setVariable(e,t)},t.prototype.getComment=function(e){return this.data?this.data.getComment(this.getValueName()):""},t.prototype.setComment=function(e,t,n){this.data&&this.data.setComment(this.getValueName(),t,n)},t.prototype.getAllValues=function(){return this.data?this.data.getAllValues():{}},t.prototype.getFilteredValues=function(){return this.data?this.data.getFilteredValues():{}},t.prototype.getFilteredProperties=function(){return this.data?this.data.getFilteredProperties():{}},t.prototype.addElement=function(e,t){},t.prototype.removeElement=function(e){return!1},t.prototype.getQuestionTitleLocation=function(){return"left"},t.prototype.getQuestionStartIndex=function(){return this.getStartIndex()},t.prototype.getChildrenLayoutType=function(){return"row"},t.prototype.elementWidthChanged=function(e){},Object.defineProperty(t.prototype,"elements",{get:function(){return[]},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(e){return-1},t.prototype.ensureRowsVisibility=function(){},t}(i.Question),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.getTemplate=function(){return"custom"},t.prototype.createWrapper=function(){this.questionWrapper=this.createQuestion()},t.prototype.getElement=function(){return this.contentQuestion},t.prototype.onAnyValueChanged=function(t){e.prototype.onAnyValueChanged.call(this,t),this.contentQuestion&&this.contentQuestion.onAnyValueChanged(t)},t.prototype.hasErrors=function(t,n){if(void 0===t&&(t=!0),void 0===n&&(n=null),!this.contentQuestion)return!1;var r=this.contentQuestion.hasErrors(t,n);this.errors=[];for(var i=0;i<this.contentQuestion.errors.length;i++)this.errors.push(this.contentQuestion.errors[i]);return r||(r=e.prototype.hasErrors.call(this,t,n)),this.updateElementCss(),r},t.prototype.focus=function(t){void 0===t&&(t=!1),this.contentQuestion?this.contentQuestion.focus(t):e.prototype.focus.call(this,t)},Object.defineProperty(t.prototype,"contentQuestion",{get:function(){return this.questionWrapper},enumerable:!1,configurable:!0}),t.prototype.createQuestion=function(){var e=this.customQuestion.json,t=null;if(e.questionJSON){var n=e.questionJSON.type;if(!n||!o.Serializer.findClass(n))throw"type attribute in questionJSON is empty or incorrect";t=o.Serializer.createClass(n),this.initElement(t),t.fromJSON(e.questionJSON)}else e.createQuestion&&(t=e.createQuestion(),this.initElement(t));return t&&!t.name&&(t.name="question"),t},t.prototype.onSurveyLoad=function(){e.prototype.onSurveyLoad.call(this),this.contentQuestion&&this.isEmpty()&&!this.contentQuestion.isEmpty()&&(this.value=this.contentQuestion.value)},t.prototype.runCondition=function(t,n){e.prototype.runCondition.call(this,t,n),this.contentQuestion&&this.contentQuestion.runCondition(t,n)},t.prototype.convertDataName=function(t){if(!this.contentQuestion)return e.prototype.convertDataName.call(this,t);var n=t.replace(this.contentQuestion.getValueName(),this.getValueName());return 0==n.indexOf(this.getValueName())?n:e.prototype.convertDataName.call(this,t)},t.prototype.convertDataValue=function(t,n){return this.convertDataName(t)==e.prototype.convertDataName.call(this,t)?this.contentQuestion.value:n},t.prototype.setQuestionValue=function(t,n){void 0===n&&(n=!0),e.prototype.setQuestionValue.call(this,t,n),this.contentQuestion&&!s.Helpers.isTwoValueEquals(this.contentQuestion.value,t)&&(this.contentQuestion.value=this.getUnbindValue(t))},t.prototype.onSurveyValueChanged=function(t){e.prototype.onSurveyValueChanged.call(this,t),this.contentQuestion&&this.contentQuestion.onSurveyValueChanged(t)},t.prototype.getValueCore=function(){return this.contentQuestion?this.contentQuestion.value:e.prototype.getValueCore.call(this)},t.prototype.initElement=function(t){var n=this;e.prototype.initElement.call(this,t),t&&(t.parent=this,t.afterRenderQuestionCallback=function(e,t){n.customQuestion&&n.customQuestion.onAfterRenderContentElement(n,e,t)})},t.prototype.updateElementCssCore=function(t){this.contentQuestion&&(t=this.contentQuestion.cssClasses),e.prototype.updateElementCssCore.call(this,t)},t.prototype.getDisplayValueCore=function(t,n){return this.contentQuestion?this.contentQuestion.getDisplayValue(t,n):e.prototype.getDisplayValueCore.call(this,t,n)},t}(d),f=function(e){function t(t,n){var r=e.call(this,n)||this;return r.composite=t,r.variableName=n,r}return u(t,e),Object.defineProperty(t.prototype,"survey",{get:function(){return this.composite.survey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panel",{get:function(){return this.composite.contentPanel},enumerable:!1,configurable:!0}),t}(l.QuestionTextProcessor),m=function(e){function t(n,r){var i=e.call(this,n,r)||this;return i.customQuestion=r,i.settingNewValue=!1,i.textProcessing=new f(i,t.ItemVariableName),i}return u(t,e),t.prototype.createWrapper=function(){this.panelWrapper=this.createPanel()},t.prototype.getTemplate=function(){return"composite"},t.prototype.getCssType=function(){return"composite"},t.prototype.getElement=function(){return this.contentPanel},Object.defineProperty(t.prototype,"contentPanel",{get:function(){return this.panelWrapper},enumerable:!1,configurable:!0}),t.prototype.hasErrors=function(t,n){void 0===t&&(t=!0),void 0===n&&(n=null);var r=e.prototype.hasErrors.call(this,t,n);return this.contentPanel&&this.contentPanel.hasErrors(t,!1,n)||r},t.prototype.updateElementCss=function(t){e.prototype.updateElementCss.call(this,t),this.contentPanel&&this.contentPanel.updateElementCss(t)},t.prototype.getTextProcessor=function(){return this.textProcessing},t.prototype.clearValueIfInvisible=function(){e.prototype.clearValueIfInvisible.call(this);for(var t=this.contentPanel.questions,n=0;n<t.length;n++)t[n].clearValueIfInvisible()},t.prototype.onAnyValueChanged=function(t){e.prototype.onAnyValueChanged.call(this,t);for(var n=this.contentPanel.questions,r=0;r<n.length;r++)n[r].onAnyValueChanged(t)},t.prototype.createPanel=function(){var e=o.Serializer.createClass("panel");e.showQuestionNumbers="off",e.renderWidth="100%";var t=this.customQuestion.json;return t.elementsJSON&&e.fromJSON({elements:t.elementsJSON}),t.createElements&&t.createElements(e,this),this.initElement(e),e.readOnly=this.isReadOnly,this.setAfterRenderCallbacks(e),e},t.prototype.onReadOnlyChanged=function(){this.contentPanel&&(this.contentPanel.readOnly=this.isReadOnly),e.prototype.onReadOnlyChanged.call(this)},t.prototype.onSurveyLoad=function(){this.contentPanel&&(this.contentPanel.readOnly=this.isReadOnly,this.setIsContentElement(this.contentPanel)),e.prototype.onSurveyLoad.call(this)},t.prototype.setIsContentElement=function(e){e.isContentElement=!0;for(var t=e.elements,n=0;n<t.length;n++){var r=t[n];r.isPanel?this.setIsContentElement(r):r.isContentElement=!0}},t.prototype.setVisibleIndex=function(t){var n=e.prototype.setVisibleIndex.call(this,t);return this.isVisible&&this.contentPanel&&(n+=this.contentPanel.setVisibleIndex(t)),n},t.prototype.runCondition=function(n,r){if(e.prototype.runCondition.call(this,n,r),this.contentPanel){var i=n[t.ItemVariableName];n[t.ItemVariableName]=this.contentPanel.getValue(),this.contentPanel.runCondition(n,r),delete n[t.ItemVariableName],i&&(n[t.ItemVariableName]=i)}},t.prototype.getValue=function(e){var t=this.value;return t?t[e]:null},t.prototype.setValue=function(t,n,r,i){if(!this.settingNewValue&&(e.prototype.setValue.call(this,t,n,r,i),this.contentPanel)){var o=this.contentPanel.getQuestionByName(t);o&&!s.Helpers.isTwoValueEquals(n,o.value)&&(this.settingNewValue=!0,o.value=n,this.settingNewValue=!1)}},t.prototype.addConditionObjectsByContext=function(e,t){if(this.contentPanel)for(var n=this.contentPanel.questions,r=this.name,i=this.title,o=0;o<n.length;o++)e.push({name:r+"."+n[o].name,text:i+"."+n[o].title,question:n[o]})},t.prototype.convertDataValue=function(e,t){var n=this.value;return n||(n={}),this.isValueEmpty(t)&&!this.isEditingSurveyElement?delete n[e]:n[e]=t,n},t.prototype.setQuestionValue=function(t,n){void 0===n&&(n=!0),e.prototype.setQuestionValue.call(this,t,n),this.settingNewValue=!0;for(var r=this.contentPanel.questions,i=0;i<r.length;i++){var o=r[i].getValueName();r[i].value=t?t[o]:void 0}this.settingNewValue=!1},t.prototype.getDisplayValueCore=function(t,n){return this.contentPanel?this.contentPanel.getDisplayValue(t):e.prototype.getDisplayValueCore.call(this,t,n)},t.prototype.setAfterRenderCallbacks=function(e){var t=this;if(e&&this.customQuestion)for(var n=e.questions,r=0;r<n.length;r++)n[r].afterRenderQuestionCallback=function(e,n){t.customQuestion.onAfterRenderContentElement(t,e,n)}},t.ItemVariableName="composite",t}(d)},"./src/question_dropdown.ts":
/*!**********************************!*\
  !*** ./src/question_dropdown.ts ***!
  \**********************************/
/*! exports provided: QuestionDropdownModel */function(e,t,n){"use strict";n.r(t),n.d(t,"QuestionDropdownModel",(function(){return c}));var r,i=n(/*! ./jsonobject */"./src/jsonobject.ts"),o=n(/*! ./questionfactory */"./src/questionfactory.ts"),a=n(/*! ./question_baseselect */"./src/question_baseselect.ts"),s=n(/*! ./surveyStrings */"./src/surveyStrings.ts"),l=n(/*! ./itemvalue */"./src/itemvalue.ts"),u=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e){function t(t){var n=e.call(this,t)||this;n.minMaxChoices=[],n.createLocalizableString("optionsCaption",n);var r=n;return n.registerFunctionOnPropertiesValueChanged(["choicesMin","choicesMax","choicesStep"],(function(){r.onVisibleChoicesChanged()})),n}return u(t,e),Object.defineProperty(t.prototype,"showOptionsCaption",{get:function(){return this.getPropertyValue("showOptionsCaption",!0)},set:function(e){this.setPropertyValue("showOptionsCaption",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"optionsCaption",{get:function(){return this.getLocalizableStringText("optionsCaption",s.surveyLocalization.getString("optionsCaption"))},set:function(e){this.setLocalizableStringText("optionsCaption",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locOptionsCaption",{get:function(){return this.getLocalizableString("optionsCaption")},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"dropdown"},Object.defineProperty(t.prototype,"selectedItem",{get:function(){return this.isEmpty()?null:l.ItemValue.getItemByValue(this.visibleChoices,this.value)},enumerable:!1,configurable:!0}),t.prototype.supportGoNextPageAutomatic=function(){return!0},t.prototype.getChoices=function(){var t=e.prototype.getChoices.call(this);if(this.choicesMax<=this.choicesMin)return t;for(var n=[],r=0;r<t.length;r++)n.push(t[r]);if(0===this.minMaxChoices.length||this.minMaxChoices.length!==(this.choicesMax-this.choicesMin)/this.choicesStep+1)for(this.minMaxChoices=[],r=this.choicesMin;r<=this.choicesMax;r+=this.choicesStep)this.minMaxChoices.push(new l.ItemValue(r));return n=n.concat(this.minMaxChoices)},Object.defineProperty(t.prototype,"choicesMin",{get:function(){return this.getPropertyValue("choicesMin",0)},set:function(e){this.setPropertyValue("choicesMin",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choicesMax",{get:function(){return this.getPropertyValue("choicesMax",0)},set:function(e){this.setPropertyValue("choicesMax",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"choicesStep",{get:function(){return this.getPropertyValue("choicesStep",1)},set:function(e){e<1&&(e=1),this.setPropertyValue("choicesStep",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoComplete",{get:function(){return this.getPropertyValue("autoComplete","")},set:function(e){this.setPropertyValue("autoComplete",e)},enumerable:!1,configurable:!0}),t.prototype.getControlClass=function(){var e=this.cssClasses,t=e.control+(this.errors.length>0?" "+e.onError:"");return this.isReadOnly&&(t+=" "+e.controlDisabled),t},t}(a.QuestionSelectBase);i.Serializer.addClass("dropdown",[{name:"optionsCaption",serializationProperty:"locOptionsCaption"},{name:"showOptionsCaption:boolean",default:!0},{name:"choicesMin:number",default:0},{name:"choicesMax:number",default:0},{name:"choicesStep:number",default:1,minValue:1},{name:"autoComplete",dataList:["name","honorific-prefix","given-name","additional-name","family-name","honorific-suffix","nickname","organization-title","username","new-password","current-password","organization","street-address","address-line1","address-line2","address-line3","address-level4","address-level3","address-level2","address-level1","country","country-name","postal-code","cc-name","cc-given-name","cc-additional-name","cc-family-name","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc","cc-type","transaction-currency","transaction-amount","language","bday","bday-day","bday-month","bday-year","sex","url","photo","tel","tel-country-code","tel-national","tel-area-code","tel-local","tel-local-prefix","tel-local-suffix","tel-extension","email","impp"]}],(function(){return new c("")}),"selectbase"),o.QuestionFactory.Instance.registerQuestion("dropdown",(function(e){var t=new c(e);return t.choices=o.QuestionFactory.DefaultChoices,t}))},"./src/question_empty.ts":
/*!*******************************!*\
  !*** ./src/question_empty.ts ***!
  \*******************************/
/*! exports provided: QuestionEmptyModel */function(e,t,n){"use strict";n.r(t),n.d(t,"QuestionEmptyModel",(function(){return s}));var r,i=n(/*! ./jsonobject */"./src/jsonobject.ts"),o=n(/*! ./question */"./src/question.ts"),a=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.getType=function(){return"empty"},t}(o.Question);i.Serializer.addClass("empty",[],(function(){return new s("")}),"question")},"./src/question_expression.ts":
/*!************************************!*\
  !*** ./src/question_expression.ts ***!
  \************************************/
/*! exports provided: QuestionExpressionModel, getCurrecyCodes */function(e,t,n){"use strict";n.r(t),n.d(t,"QuestionExpressionModel",(function(){return c})),n.d(t,"getCurrecyCodes",(function(){return p}));var r,i=n(/*! ./helpers */"./src/helpers.ts"),o=n(/*! ./question */"./src/question.ts"),a=n(/*! ./jsonobject */"./src/jsonobject.ts"),s=n(/*! ./questionfactory */"./src/questionfactory.ts"),l=n(/*! ./conditions */"./src/conditions.ts"),u=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e){function t(t){var n=e.call(this,t)||this;n.createLocalizableString("format",n);var r=n;return n.registerFunctionOnPropertyValueChanged("expression",(function(){r.expressionRunner&&(r.expressionRunner=new l.ExpressionRunner(r.expression))})),n}return u(t,e),t.prototype.getType=function(){return"expression"},Object.defineProperty(t.prototype,"hasInput",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this.getLocalizableStringText("format","")},set:function(e){this.setLocalizableStringText("format",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locFormat",{get:function(){return this.getLocalizableString("format")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"expression",{get:function(){return this.getPropertyValue("expression","")},set:function(e){this.setPropertyValue("expression",e)},enumerable:!1,configurable:!0}),t.prototype.locCalculation=function(){this.expressionIsRunning=!0},t.prototype.unlocCalculation=function(){this.expressionIsRunning=!1},t.prototype.runCondition=function(t,n){var r=this;e.prototype.runCondition.call(this,t,n),!this.expression||this.expressionIsRunning||!this.runIfReadOnly&&this.isReadOnly||(this.locCalculation(),this.expressionRunner||(this.expressionRunner=new l.ExpressionRunner(this.expression)),this.expressionRunner.onRunComplete=function(e){i.Helpers.isTwoValueEquals(e,r.value)||(r.value=e),r.unlocCalculation()},this.expressionRunner.run(t,n))},t.prototype.hasErrors=function(e,t){return void 0===e&&(e=!0),void 0===t&&(t=null),!1},t.prototype.getAllErrors=function(){return[]},Object.defineProperty(t.prototype,"maximumFractionDigits",{get:function(){return this.getPropertyValue("maximumFractionDigits",-1)},set:function(e){e<-1||e>20||this.setPropertyValue("maximumFractionDigits",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minimumFractionDigits",{get:function(){return this.getPropertyValue("minimumFractionDigits",-1)},set:function(e){e<-1||e>20||this.setPropertyValue("minimumFractionDigits",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"runIfReadOnly",{get:function(){return!0===this.runIfReadOnlyValue},set:function(e){this.runIfReadOnlyValue=e},enumerable:!1,configurable:!0}),t.prototype.getDisplayValueCore=function(e,t){var n=this.isValueEmpty(t)?this.defaultValue:t,r="";if(!this.isValueEmpty(n)){var i=this.getValueAsStr(n);r=this.format?this.format.format(i):i}return this.survey&&(r=this.survey.getExpressionDisplayValue(this,n,r)),r},Object.defineProperty(t.prototype,"displayStyle",{get:function(){return this.getPropertyValue("displayStyle")},set:function(e){this.setPropertyValue("displayStyle",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currency",{get:function(){return this.getPropertyValue("currency")},set:function(e){["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYN","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","SSP","STD","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","UYI","UYU","UZS","VEF","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XOF","XPD","XPF","XPT","XSU","XTS","XUA","XXX","YER","ZAR","ZMW","ZWL"].indexOf(e)<0||this.setPropertyValue("currency",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useGrouping",{get:function(){return this.getPropertyValue("useGrouping",!0)},set:function(e){this.setPropertyValue("useGrouping",e)},enumerable:!1,configurable:!0}),t.prototype.getValueAsStr=function(e){if("date"==this.displayStyle){var t=new Date(e);if(t&&t.toLocaleDateString)return t.toLocaleDateString()}if("none"!=this.displayStyle&&i.Helpers.isNumber(e)){var n=this.getLocale();n||(n="en");var r={style:this.displayStyle,currency:this.currency,useGrouping:this.useGrouping};return this.maximumFractionDigits>-1&&(r.maximumFractionDigits=this.maximumFractionDigits),this.minimumFractionDigits>-1&&(r.minimumFractionDigits=this.minimumFractionDigits),e.toLocaleString(n,r)}return e.toString()},t}(o.Question);function p(){return["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYN","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","SSP","STD","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","UYI","UYU","UZS","VEF","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XOF","XPD","XPF","XPT","XSU","XTS","XUA","XXX","YER","ZAR","ZMW","ZWL"]}a.Serializer.addClass("expression",["expression:expression",{name:"format",serializationProperty:"locFormat"},{name:"displayStyle",default:"none",choices:["none","decimal","currency","percent","date"]},{name:"currency",choices:function(){return["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BOV","BRL","BSD","BTN","BWP","BYN","BZD","CAD","CDF","CHE","CHF","CHW","CLF","CLP","CNY","COP","COU","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","IQD","IRR","ISK","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MUR","MVR","MWK","MXN","MXV","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","SSP","STD","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","USN","UYI","UYU","UZS","VEF","VND","VUV","WST","XAF","XAG","XAU","XBA","XBB","XBC","XBD","XCD","XDR","XOF","XPD","XPF","XPT","XSU","XTS","XUA","XXX","YER","ZAR","ZMW","ZWL"]},default:"USD"},{name:"maximumFractionDigits:number",default:-1},{name:"minimumFractionDigits:number",default:-1},{name:"useGrouping:boolean",default:!0},{name:"enableIf",visible:!1},{name:"isRequired",visible:!1},{name:"readOnly",visible:!1},{name:"requiredErrorText",visible:!1},{name:"validators",visible:!1},{name:"defaultValue",visible:!1},{name:"correctAnswer",visible:!1},{name:"requiredIf",visible:!1}],(function(){return new c("")}),"question"),s.QuestionFactory.Instance.registerQuestion("expression",(function(e){return new c(e)}))},"./src/question_file.ts":
/*!******************************!*\
  !*** ./src/question_file.ts ***!
  \******************************/
/*! exports provided: QuestionFileModel */function(e,t,n){"use strict";n.r(t),n.d(t,"QuestionFileModel",(function(){return c}));var r,i=n(/*! ./question */"./src/question.ts"),o=n(/*! ./jsonobject */"./src/jsonobject.ts"),a=n(/*! ./questionfactory */"./src/questionfactory.ts"),s=n(/*! ./error */"./src/error.ts"),l=n(/*! ./surveyStrings */"./src/surveyStrings.ts"),u=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e){function t(t){var n=e.call(this,t)||this;return n.isUploading=!1,n.onStateChanged=n.addEvent(),n.previewValue=[],n.currentState="empty",n}return u(t,e),t.prototype.getType=function(){return"file"},t.prototype.clearOnDeletingContainer=function(){this.survey&&this.survey.clearFiles(this,this.name,this.value,null,(function(){}))},Object.defineProperty(t.prototype,"showPreview",{get:function(){return this.getPropertyValue("showPreview")},set:function(e){this.setPropertyValue("showPreview",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowMultiple",{get:function(){return this.getPropertyValue("allowMultiple",!1)},set:function(e){this.setPropertyValue("allowMultiple",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this.getPropertyValue("imageHeight")},set:function(e){this.setPropertyValue("imageHeight",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this.getPropertyValue("imageWidth")},set:function(e){this.setPropertyValue("imageWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"acceptedTypes",{get:function(){return this.getPropertyValue("acceptedTypes")},set:function(e){this.setPropertyValue("acceptedTypes",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storeDataAsText",{get:function(){return this.getPropertyValue("storeDataAsText")},set:function(e){this.setPropertyValue("storeDataAsText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"waitForUpload",{get:function(){return this.getPropertyValue("waitForUpload",!1)},set:function(e){this.setPropertyValue("waitForUpload",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowImagesPreview",{get:function(){return this.getPropertyValue("allowImagesPreview")},set:function(e){this.setPropertyValue("allowImagesPreview",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxSize",{get:function(){return this.getPropertyValue("maxSize",0)},set:function(e){this.setPropertyValue("maxSize",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"needConfirmRemoveFile",{get:function(){return this.getPropertyValue("needConfirmRemoveFile")},set:function(e){this.setPropertyValue("needConfirmRemoveFile",e)},enumerable:!1,configurable:!0}),t.prototype.getConfirmRemoveMessage=function(e){return l.surveyLocalization.getString("confirmRemoveFile").format(e)},Object.defineProperty(t.prototype,"confirmRemoveAllMessage",{get:function(){return l.surveyLocalization.getString("confirmRemoveAllFiles")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"noFileChosenCaption",{get:function(){return l.surveyLocalization.getString("noFileChosen")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"chooseButtonCaption",{get:function(){return l.surveyLocalization.getString("chooseFileCaption")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cleanButtonCaption",{get:function(){return l.surveyLocalization.getString("cleanCaption")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"removeFileCaption",{get:function(){return l.surveyLocalization.getString("removeFileCaption")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputTitle",{get:function(){return this.isUploading?l.surveyLocalization.getString("loadingFile"):this.isEmpty()?l.surveyLocalization.getString("chooseFile"):" "},enumerable:!1,configurable:!0}),t.prototype.clear=function(e){var t=this;this.survey&&this.survey.clearFiles(this,this.name,this.value,null,(function(n,r){"success"===n&&(t.value=void 0,t.errors=[],e&&e())}))},t.prototype.removeFile=function(e){var t=this;this.survey&&this.survey.clearFiles(this,this.name,this.value,e.name,(function(n,r){if("success"===n){var i=t.value;Array.isArray(i)?t.value=i.filter((function(t){return t.name!==e.name})):t.value=void 0}}))},t.prototype.loadFiles=function(e){var t=this;if(this.survey&&(this.errors=[],this.allFilesOk(e))){this.stateChanged("loading");var n=function(){var n=[];t.storeDataAsText?e.forEach((function(r){var i=new FileReader;i.onload=function(o){(n=n.concat([{name:r.name,type:r.type,content:i.result}])).length===e.length&&(t.value=(t.value||[]).concat(n))},i.readAsDataURL(r)})):t.survey&&t.survey.uploadFiles(t,t.name,e,(function(e,n){"error"===e&&t.stateChanged("error"),"success"===e&&(t.value=(t.value||[]).concat(n.map((function(e){return{name:e.file.name,type:e.file.type,content:e.content}}))))}))};this.allowMultiple?n():this.clear(n)}},t.prototype.canPreviewImage=function(e){return this.allowImagesPreview&&!!e&&this.isFileImage(e)},t.prototype.setQuestionValue=function(t,n){var r=this;void 0===n&&(n=!0),e.prototype.setQuestionValue.call(this,t,n),this.previewValue=[];var i=!Array.isArray(t)&&t||Array.isArray(t)&&t.length>0?this.showPreview?"loading":"loaded":"empty";if(this.stateChanged(i),this.showPreview&&t){var o=Array.isArray(t)?t:t?[t]:[];this.storeDataAsText?(o.forEach((function(e){var t=e.content||e;r.previewValue=r.previewValue.concat([{name:e.name,type:e.type,content:t}])})),"loading"===i&&this.stateChanged("loaded")):o.forEach((function(e){e.content,r.survey&&r.survey.downloadFile(r.name,e,(function(t,n){"success"===t?(r.previewValue=r.previewValue.concat([{content:n,name:e.name,type:e.type}]),r.previewValue.length===o.length&&r.stateChanged("loaded")):r.stateChanged("error")}))}))}},t.prototype.onCheckForErrors=function(t,n){e.prototype.onCheckForErrors.call(this,t,n),this.isUploading&&this.waitForUpload&&t.push(new s.UploadingFileError(l.surveyLocalization.getString("uploadingFile"),this))},t.prototype.stateChanged=function(e){"loading"===e&&(this.isUploading=!0),"loaded"===e&&(this.isUploading=!1),"error"===e&&(this.isUploading=!1),this.currentState=e,this.onStateChanged.fire(this,{state:e})},t.prototype.allFilesOk=function(e){var t=this,n=this.errors?this.errors.length:0;return(e||[]).forEach((function(e){t.maxSize>0&&e.size>t.maxSize&&t.errors.push(new s.ExceedSizeError(t.maxSize,t))})),n===this.errors.length},t.prototype.isFileImage=function(e){if(!e)return!1;var t=e.content&&e.content.substr(0,"data:image".length);return"data:image"===(t=t&&t.toLowerCase())||!!e.type&&0===e.type.toLowerCase().indexOf("image/")},t.prototype.getPlainData=function(t){void 0===t&&(t={includeEmpty:!0});var n=e.prototype.getPlainData.call(this,t);if(n&&!this.isEmpty()){n.isNode=!1;var r=Array.isArray(this.value)?this.value:[this.value];n.data=r.map((function(e,t){return{name:t,title:"File",value:e.content&&e.content||e,displayValue:e.name&&e.name||e,getString:function(e){return"object"==typeof e?JSON.stringify(e):e},isNode:!1}}))}return n},t.prototype.supportComment=function(){return!0},t}(i.Question);o.Serializer.addClass("file",[{name:"hasComment:switch",layout:"row"},{name:"commentText",dependsOn:"hasComment",visibleIf:function(e){return e.hasComment},serializationProperty:"locCommentText",layout:"row"},{name:"showPreview:boolean",default:!0},"allowMultiple:boolean",{name:"allowImagesPreview:boolean",default:!0},"imageHeight","imageWidth","acceptedTypes",{name:"storeDataAsText:boolean",default:!0},{name:"waitForUpload:boolean",default:!1},"maxSize:number",{name:"defaultValue",visible:!1},{name:"correctAnswer",visible:!1},{name:"validators",visible:!1},{name:"needConfirmRemoveFile:boolean",visible:!0,default:!1}],(function(){return new c("")}),"question"),a.QuestionFactory.Instance.registerQuestion("file",(function(e){return new c(e)}))},"./src/question_html.ts":
/*!******************************!*\
  !*** ./src/question_html.ts ***!
  \******************************/
/*! exports provided: QuestionHtmlModel */function(e,t,n){"use strict";n.r(t),n.d(t,"QuestionHtmlModel",(function(){return l}));var r,i=n(/*! ./questionnonvalue */"./src/questionnonvalue.ts"),o=n(/*! ./jsonobject */"./src/jsonobject.ts"),a=n(/*! ./questionfactory */"./src/questionfactory.ts"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t){var n=e.call(this,t)||this;return n.createLocalizableString("html",n).onGetTextCallback=function(e){return n.survey&&!n.ignoreHtmlProgressing?n.survey.processHtml(e):e},n}return s(t,e),t.prototype.getType=function(){return"html"},Object.defineProperty(t.prototype,"isCompositeQuestion",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getProcessedText=function(t){return this.ignoreHtmlProgressing?t:e.prototype.getProcessedText.call(this,t)},Object.defineProperty(t.prototype,"html",{get:function(){return this.getLocalizableStringText("html","")},set:function(e){this.setLocalizableStringText("html",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locHtml",{get:function(){return this.getLocalizableString("html")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processedHtml",{get:function(){return this.survey?this.survey.processHtml(this.html):this.html},enumerable:!1,configurable:!0}),t}(i.QuestionNonValue);o.Serializer.addClass("html",[{name:"html:html",serializationProperty:"locHtml"}],(function(){return new l("")}),"nonvalue"),a.QuestionFactory.Instance.registerQuestion("html",(function(e){return new l(e)}))},"./src/question_image.ts":
/*!*******************************!*\
  !*** ./src/question_image.ts ***!
  \*******************************/
/*! exports provided: QuestionImageModel */function(e,t,n){"use strict";n.r(t),n.d(t,"QuestionImageModel",(function(){return l}));var r,i=n(/*! ./questionnonvalue */"./src/questionnonvalue.ts"),o=n(/*! ./jsonobject */"./src/jsonobject.ts"),a=n(/*! ./questionfactory */"./src/questionfactory.ts"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t){var n=e.call(this,t)||this;return n.createLocalizableString("imageLink",n,!1),n.createLocalizableString("text",n,!1),n}return s(t,e),t.prototype.getType=function(){return"image"},Object.defineProperty(t.prototype,"isCompositeQuestion",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageLink",{get:function(){return this.getLocalizableStringText("imageLink")},set:function(e){this.setLocalizableStringText("imageLink",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locImageLink",{get:function(){return this.getLocalizableString("imageLink")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.getLocalizableStringText("text")},set:function(e){this.setLocalizableStringText("text",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locText",{get:function(){return this.getLocalizableString("text")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this.getPropertyValue("imageHeight")},set:function(e){this.setPropertyValue("imageHeight",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this.getPropertyValue("imageWidth")},set:function(e){this.setPropertyValue("imageWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageFit",{get:function(){return this.getPropertyValue("imageFit")},set:function(e){this.setPropertyValue("imageFit",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contentMode",{get:function(){return this.getPropertyValue("contentMode")},set:function(e){this.setPropertyValue("contentMode",e),"video"===e&&(this.showLabel=!0)},enumerable:!1,configurable:!0}),t}(i.QuestionNonValue);o.Serializer.addClass("image",[{name:"imageLink",serializationProperty:"locImageLink"},{name:"text",serializationProperty:"locText"},{name:"contentMode",default:"image",choices:["image","video"]},{name:"imageFit",default:"contain",choices:["none","contain","cover","fill"]},{name:"imageHeight:number",default:150,minValue:0},{name:"imageWidth:number",default:200,minValue:0}],(function(){return new l("")}),"nonvalue"),a.QuestionFactory.Instance.registerQuestion("image",(function(e){return new l(e)}))},"./src/question_imagepicker.ts":
/*!*************************************!*\
  !*** ./src/question_imagepicker.ts ***!
  \*************************************/
/*! exports provided: ImageItemValue, QuestionImagePickerModel */function(e,t,n){"use strict";n.r(t),n.d(t,"ImageItemValue",(function(){return c})),n.d(t,"QuestionImagePickerModel",(function(){return p}));var r,i=n(/*! ./jsonobject */"./src/jsonobject.ts"),o=n(/*! ./questionfactory */"./src/questionfactory.ts"),a=n(/*! ./question_baseselect */"./src/question_baseselect.ts"),s=n(/*! ./itemvalue */"./src/itemvalue.ts"),l=n(/*! ./helpers */"./src/helpers.ts"),u=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e){function t(t,n,r){void 0===n&&(n=null),void 0===r&&(r="imageitemvalue");var i=e.call(this,t,n,r)||this;return i.typeName=r,i.createLocalizableString("imageLink",i,!1),i}return u(t,e),t.prototype.getType=function(){return this.typeName?this.typeName:"itemvalue"},Object.defineProperty(t.prototype,"imageLink",{get:function(){return this.getLocalizableStringText("imageLink")},set:function(e){this.setLocalizableStringText("imageLink",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locImageLink",{get:function(){return this.getLocalizableString("imageLink")},enumerable:!1,configurable:!0}),t.prototype.getLocale=function(){return this.locOwner?this.locOwner.getLocale():""},t.prototype.getMarkdownHtml=function(e,t){return this.locOwner?this.locOwner.getMarkdownHtml(e,t):e},t.prototype.getRenderer=function(e){return this.locOwner?this.locOwner.getRenderer(e):null},t.prototype.getProcessedText=function(e){return this.locOwner?this.locOwner.getProcessedText(e):e},t}(s.ItemValue),p=function(e){function t(t){var n=e.call(this,t)||this;return n.colCount=0,n.choicesByUrl.createItemValue=function(e){return new c(e)},n}return u(t,e),t.prototype.getType=function(){return"imagepicker"},t.prototype.supportGoNextPageAutomatic=function(){return!0},Object.defineProperty(t.prototype,"hasSingleInput",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.getItemValueType=function(){return"imageitemvalue"},Object.defineProperty(t.prototype,"isCompositeQuestion",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.supportOther=function(){return!1},t.prototype.supportNone=function(){return!1},Object.defineProperty(t.prototype,"multiSelect",{get:function(){return this.getPropertyValue("multiSelect",!1)},set:function(e){this.setPropertyValue("multiSelect",e)},enumerable:!1,configurable:!0}),t.prototype.isItemSelected=function(e){var t=this.value;if(this.isValueEmpty(t))return!1;if(!this.multiSelect)return l.Helpers.isTwoValueEquals(t,e.value);if(!Array.isArray(t))return!1;for(var n=0;n<t.length;n++)if(l.Helpers.isTwoValueEquals(t[n],e.value))return!0;return!1},t.prototype.clearIncorrectValues=function(){if(this.multiSelect){var t=this.value;if(!t)return;if(!Array.isArray(t)||0==t.length)return void this.clearValue();for(var n=[],r=0;r<t.length;r++)this.hasUnknownValue(t[r],!0)||n.push(t[r]);if(n.length==t.length)return;0==n.length?this.clearValue():this.value=n}else e.prototype.clearIncorrectValues.call(this)},Object.defineProperty(t.prototype,"showLabel",{get:function(){return this.getPropertyValue("showLabel",!1)},set:function(e){this.setPropertyValue("showLabel",e)},enumerable:!1,configurable:!0}),t.prototype.endLoadingFromJson=function(){e.prototype.endLoadingFromJson.call(this),!this.isDesignMode&&this.multiSelect&&(this.createNewArray("renderedValue"),this.createNewArray("value"))},t.prototype.getValueCore=function(){var t=e.prototype.getValueCore.call(this);return void 0!==t?t:this.multiSelect?[]:t},t.prototype.convertValToArrayForMultSelect=function(e){return this.multiSelect?this.isValueEmpty(e)||Array.isArray(e)?e:[e]:e},t.prototype.renderedValueFromDataCore=function(e){return this.convertValToArrayForMultSelect(e)},t.prototype.rendredValueToDataCore=function(e){return this.convertValToArrayForMultSelect(e)},Object.defineProperty(t.prototype,"imageHeight",{get:function(){return this.getPropertyValue("imageHeight")},set:function(e){this.setPropertyValue("imageHeight",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{get:function(){return this.getPropertyValue("imageWidth")},set:function(e){this.setPropertyValue("imageWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"imageFit",{get:function(){return this.getPropertyValue("imageFit")},set:function(e){this.setPropertyValue("imageFit",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contentMode",{get:function(){return this.getPropertyValue("contentMode")},set:function(e){this.setPropertyValue("contentMode",e),"video"===e&&(this.showLabel=!0)},enumerable:!1,configurable:!0}),t.prototype.convertDefaultValue=function(e){return e},Object.defineProperty(t.prototype,"hasColumns",{get:function(){return!1},enumerable:!1,configurable:!0}),t}(a.QuestionCheckboxBase);i.Serializer.addClass("imageitemvalue",[],(function(e){return new c(e)}),"itemvalue"),i.Serializer.addProperty("imageitemvalue",{name:"imageLink",serializationProperty:"locImageLink"}),i.Serializer.addClass("imagepicker",[{name:"hasOther",visible:!1},{name:"otherText",visible:!1},{name:"hasNone",visible:!1},{name:"noneText",visible:!1},{name:"optionsCaption",visible:!1},{name:"otherErrorText",visible:!1},{name:"storeOthersAsComment",visible:!1},{name:"contentMode",default:"image",choices:["image","video"]},{name:"imageFit",default:"contain",choices:["none","contain","cover","fill"]},{name:"imageHeight:number",default:150,minValue:0},{name:"imageWidth:number",default:200,minValue:0}],(function(){return new p("")}),"checkboxbase"),i.Serializer.addProperty("imagepicker",{name:"showLabel:boolean",default:!1}),i.Serializer.addProperty("imagepicker",{name:"colCount:number",default:0,choices:[0,1,2,3,4,5]}),i.Serializer.addProperty("imagepicker",{name:"multiSelect:boolean",default:!1}),i.Serializer.addProperty("imagepicker",{name:"choices:imageitemvalue[]"}),o.QuestionFactory.Instance.registerQuestion("imagepicker",(function(e){return new p(e)}))},"./src/question_matrix.ts":
/*!********************************!*\
  !*** ./src/question_matrix.ts ***!
  \********************************/
/*! exports provided: MatrixRowModel, MatrixCells, QuestionMatrixModel */function(e,t,n){"use strict";n.r(t),n.d(t,"MatrixRowModel",(function(){return g})),n.d(t,"MatrixCells",(function(){return y})),n.d(t,"QuestionMatrixModel",(function(){return v}));var r,i=n(/*! ./helpers */"./src/helpers.ts"),o=n(/*! ./itemvalue */"./src/itemvalue.ts"),a=n(/*! ./martixBase */"./src/martixBase.ts"),s=n(/*! ./jsonobject */"./src/jsonobject.ts"),l=n(/*! ./base */"./src/base.ts"),u=n(/*! ./surveyStrings */"./src/surveyStrings.ts"),c=n(/*! ./error */"./src/error.ts"),p=n(/*! ./questionfactory */"./src/questionfactory.ts"),d=n(/*! ./localizablestring */"./src/localizablestring.ts"),h=n(/*! ./question_dropdown */"./src/question_dropdown.ts"),f=n(/*! ./settings */"./src/settings.ts"),m=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),g=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.fullName=n,o.item=t,o.data=r,o.value=i,o.cellClick=function(e){o.value=e.value},o.registerFunctionOnPropertyValueChanged("value",(function(){o.data&&o.data.onMatrixRowChanged(o)})),o}return m(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return this.item.value},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.item.text},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locText",{get:function(){return this.item.locText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.getPropertyValue("value")},set:function(e){e=this.data.getCorrectedRowValue(e),this.setPropertyValue("value",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rowClasses",{get:function(){var e=this.data.cssClasses,t=e.row?e.row:"",n=e.rowError?e.rowError:"",r=!!this.data.getErrorByType("requiredinallrowserror"),i=t;return n&&r&&this.isValueEmpty(this.value)&&(i&&(i+=" "),i+=n),i},enumerable:!1,configurable:!0}),t}(l.Base),y=function(){function e(e){this.cellsOwner=e,this.values={}}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0==Object.keys(this.values).length},enumerable:!1,configurable:!0}),e.prototype.setCellText=function(e,t,n){if(e=this.getCellRowColumnValue(e,this.rows),t=this.getCellRowColumnValue(t,this.columns),e&&t)if(n)this.values[e]||(this.values[e]={}),this.values[e][t]||(this.values[e][t]=this.createString()),this.values[e][t].text=n;else if(this.values[e]&&this.values[e][t]){var r=this.values[e][t];r.text="",r.isEmpty&&(delete this.values[e][t],0==Object.keys(this.values[e]).length&&delete this.values[e])}},e.prototype.setDefaultCellText=function(e,t){this.setCellText(f.settings.matrixDefaultRowName,e,t)},e.prototype.getCellLocText=function(e,t){return e=this.getCellRowColumnValue(e,this.rows),t=this.getCellRowColumnValue(t,this.columns),e&&t&&this.values[e]&&this.values[e][t]?this.values[e][t]:null},e.prototype.getDefaultCellLocText=function(e,t){return this.getCellLocText(f.settings.matrixDefaultRowName,e)},e.prototype.getCellDisplayLocText=function(e,t){var n=this.getCellLocText(e,t);return n&&!n.isEmpty||(n=this.getCellLocText(f.settings.matrixDefaultRowName,t))&&!n.isEmpty?n:("number"==typeof t&&(t=t>=0&&t<this.columns.length?this.columns[t]:null),t&&t.locText?t.locText:null)},e.prototype.getCellText=function(e,t){var n=this.getCellLocText(e,t);return n?n.calculatedText:null},e.prototype.getDefaultCellText=function(e){var t=this.getCellLocText(f.settings.matrixDefaultRowName,e);return t?t.calculatedText:null},e.prototype.getCellDisplayText=function(e,t){var n=this.getCellDisplayLocText(e,t);return n?n.calculatedText:null},Object.defineProperty(e.prototype,"rows",{get:function(){return this.cellsOwner?this.cellsOwner.getRows():[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columns",{get:function(){return this.cellsOwner?this.cellsOwner.getColumns():[]},enumerable:!1,configurable:!0}),e.prototype.getCellRowColumnValue=function(e,t){if(null==e)return null;if("number"==typeof e){if(e<0||e>=t.length)return null;e=t[e].value}return e.value?e.value:e},e.prototype.getJson=function(){if(this.isEmpty)return null;var e={};for(var t in this.values){var n={},r=this.values[t];for(var i in r)n[i]=r[i].getJson();e[t]=n}return e},e.prototype.setJson=function(e){if(this.values={},e)for(var t in e)if("pos"!=t){var n=e[t];for(var r in this.values[t]={},n)if("pos"!=r){var i=this.createString();i.setJson(n[r]),this.values[t][r]=i}}},e.prototype.createString=function(){return new d.LocalizableString(this.cellsOwner,!0)},e}(),v=function(e){function t(t){var n=e.call(this,t)||this;n.isRowChanging=!1,n.emptyLocalizableString=new d.LocalizableString(n),n.cellsValue=new y(n);var r=n;return n.registerFunctionOnPropertyValueChanged("columns",(function(){r.onColumnsChanged()})),n.registerFunctionOnPropertyValueChanged("rows",(function(){r.filterItems()||r.onRowsChanged()})),n.registerFunctionOnPropertyValueChanged("hideIfRowsEmpty",(function(){r.updateVisibilityBasedOnRows()})),n}return m(t,e),t.prototype.getType=function(){return"matrix"},Object.defineProperty(t.prototype,"hasSingleInput",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAllRowRequired",{get:function(){return this.getPropertyValue("isAllRowRequired",!1)},set:function(e){this.setPropertyValue("isAllRowRequired",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasRows",{get:function(){return this.rows.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rowsOrder",{get:function(){return this.getPropertyValue("rowsOrder")},set:function(e){(e=e.toLowerCase())!=this.rowsOrder&&(this.setPropertyValue("rowsOrder",e),this.onRowsChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hideIfRowsEmpty",{get:function(){return this.getPropertyValue("hideIfRowsEmpty",!1)},set:function(e){this.setPropertyValue("hideIfRowsEmpty",e)},enumerable:!1,configurable:!0}),t.prototype.getRows=function(){return this.rows},t.prototype.getColumns=function(){return this.visibleColumns},t.prototype.addColumn=function(e,t){var n=new o.ItemValue(e,t);return this.columns.push(n),n},t.prototype.getItemClass=function(e,t){var n=e.value==t.value,r=this.isReadOnly,i=!n&&!r,o=this.hasCellText?this.cssClasses.cellTextDisabled:this.cssClasses.itemDisabled,a=this.hasCellText?this.cssClasses.cellTextSelected:this.cssClasses.itemChecked,s=this.hasCellText?"":this.cssClasses.itemHover,l=this.hasCellText?this.cssClasses.cellText:this.cssClasses.label,u=this.hasCellText&&this.cssClasses.cell?this.cssClasses.cell+" ":"";return u+=l+(n?" "+a:"")+(r?" "+o:"")+(i?" "+s:"")},t.prototype.getQuizQuestionCount=function(){for(var e=0,t=0;t<this.rows.length;t++)this.isValueEmpty(this.correctAnswer[this.rows[t].value])||e++;return e},t.prototype.getCorrectAnswerCount=function(){for(var e=0,t=this.value,n=0;n<this.rows.length;n++){var r=this.rows[n].value;!this.isValueEmpty(t[r])&&i.Helpers.isTwoValueEquals(this.correctAnswer[r],t[r])&&e++}return e},t.prototype.getVisibleRows=function(){var e=new Array,t=this.value;t||(t={});for(var n=this.filteredRows?this.filteredRows:this.rows,r=0;r<n.length;r++){var i=n[r];this.isValueEmpty(i.value)||e.push(this.createMatrixRow(i,this.id+"_"+i.value.toString().replace(/\s/g,"_"),t[i.value]))}return 0!=e.length||this.filteredRows||e.push(this.createMatrixRow(new o.ItemValue(null),this.name.replace(/\s/g,"_"),t)),this.generatedVisibleRows=e,e},t.prototype.sortVisibleRows=function(e){return"random"===this.rowsOrder.toLowerCase()?i.Helpers.randomizeArray(e):e},t.prototype.endLoadingFromJson=function(){e.prototype.endLoadingFromJson.call(this),this.rows=this.sortVisibleRows(this.rows),this.updateVisibilityBasedOnRows()},t.prototype.processRowsOnSet=function(e){return this.sortVisibleRows(e)},Object.defineProperty(t.prototype,"visibleRows",{get:function(){return this.getVisibleRows()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cells",{get:function(){return this.cellsValue},set:function(e){this.cells.setJson(e&&e.getJson?e.getJson():null)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCellText",{get:function(){return!this.cells.isEmpty},enumerable:!1,configurable:!0}),t.prototype.setCellText=function(e,t,n){this.cells.setCellText(e,t,n)},t.prototype.getCellText=function(e,t){return this.cells.getCellText(e,t)},t.prototype.setDefaultCellText=function(e,t){this.cells.setDefaultCellText(e,t)},t.prototype.getDefaultCellText=function(e){return this.cells.getDefaultCellText(e)},t.prototype.getCellDisplayText=function(e,t){return this.cells.getCellDisplayText(e,t)},t.prototype.getCellDisplayLocText=function(e,t){var n=this.cells.getCellDisplayLocText(e,t);return n||this.emptyLocalizableString},t.prototype.supportGoNextPageAutomatic=function(){return this.hasValuesInAllRows()},t.prototype.onCheckForErrors=function(t,n){e.prototype.onCheckForErrors.call(this,t,n),(!n||this.errors.length>0)&&this.hasErrorInRows()&&t.push(new c.RequiredInAllRowsError(null,this))},t.prototype.hasErrorInRows=function(){return!!this.isAllRowRequired&&!this.hasValuesInAllRows()},t.prototype.hasValuesInAllRows=function(){var e=this.generatedVisibleRows;if(e||(e=this.visibleRows),!e)return!0;for(var t=0;t<e.length;t++)if(this.isValueEmpty(e[t].value))return!1;return!0},t.prototype.getIsAnswered=function(){return e.prototype.getIsAnswered.call(this)&&this.hasValuesInAllRows()},t.prototype.createMatrixRow=function(e,t,n){var r=new g(e,t,this,n);return this.onMatrixRowCreated(r),r},t.prototype.onMatrixRowCreated=function(e){},t.prototype.setQuestionValue=function(t,n){if(void 0===n&&(n=!0),e.prototype.setQuestionValue.call(this,t,this.isRowChanging||n),this.generatedVisibleRows&&0!=this.generatedVisibleRows.length){this.isRowChanging=!0;var r=this.value;if(r||(r={}),0==this.rows.length)this.generatedVisibleRows[0].value=r;else for(var i=0;i<this.generatedVisibleRows.length;i++){var o=r[this.generatedVisibleRows[i].name];this.isValueEmpty(o)&&(o=null),this.generatedVisibleRows[i].value=o}this.updateIsAnswered(),this.isRowChanging=!1}},t.prototype.getDisplayValueCore=function(e,t){var n={};for(var r in t){var i=e?o.ItemValue.getTextOrHtmlByValue(this.rows,r):r;i||(i=r);var a=o.ItemValue.getTextOrHtmlByValue(this.columns,t[r]);a||(a=t[r]),n[i]=a}return n},t.prototype.getPlainData=function(t){var n=this;void 0===t&&(t={includeEmpty:!0});var r=e.prototype.getPlainData.call(this,t);if(r){var i=this.createValueCopy();r.isNode=!0,r.data=Object.keys(i||{}).map((function(e){var r=n.rows.filter((function(t){return t.value===e}))[0],a={name:e,title:r?r.text:"row",value:i[e],displayValue:o.ItemValue.getTextOrHtmlByValue(n.visibleColumns,i[e]),getString:function(e){return"object"==typeof e?JSON.stringify(e):e},isNode:!1},s=o.ItemValue.getItemByValue(n.visibleColumns,i[e]);return s&&(t.calculations||[]).forEach((function(e){a[e.propertyName]=s[e.propertyName]})),a}))}return r},t.prototype.addConditionObjectsByContext=function(e,t){for(var n=0;n<this.rows.length;n++){var r=this.rows[n];r.value&&e.push({name:this.getValueName()+"."+r.value,text:this.processedTitle+"."+r.calculatedText,question:this})}},t.prototype.getConditionJson=function(t,n){if(void 0===t&&(t=null),void 0===n&&(n=null),!n)return e.prototype.getConditionJson.call(this);var r=new h.QuestionDropdownModel(n);r.choices=this.columns;var i=(new s.JsonObject).toJsonObject(r);return i.type=r.getType(),i},t.prototype.clearValueIfInvisible=function(){e.prototype.clearValueIfInvisible.call(this),this.hasRows&&this.clearInvisibleValuesInRows()},t.prototype.getFirstInputElementId=function(){var t=this.generatedVisibleRows;return t||(t=this.visibleRows),t.length>0&&this.visibleColumns.length>0?this.inputId+"_"+t[0].name+"_0":e.prototype.getFirstInputElementId.call(this)},t.prototype.onRowsChanged=function(){this.updateVisibilityBasedOnRows(),e.prototype.onRowsChanged.call(this)},t.prototype.updateVisibilityBasedOnRows=function(){this.hideIfRowsEmpty&&(this.visible=this.rows.length>0&&(!this.filteredRows||this.filteredRows.length>0))},t.prototype.onMatrixRowChanged=function(e){if(!this.isRowChanging){if(this.isRowChanging=!0,this.hasRows){var t=this.value;t||(t={}),t[e.name]=e.value,this.setNewValue(t)}else this.setNewValue(e.value);this.isRowChanging=!1}},t.prototype.getCorrectedRowValue=function(e){for(var t=0;t<this.columns.length;t++)if(e===this.columns[t].value)return e;for(t=0;t<this.columns.length;t++)if(i.Helpers.isTwoValueEquals(e,this.columns[t].value))return this.columns[t].value;return e},t.prototype.getSearchableItemValueKeys=function(e){e.push("columns"),e.push("rows")},Object.defineProperty(t.prototype,"SurveyModel",{get:function(){return this.survey},enumerable:!1,configurable:!0}),t.prototype.getColumnHeaderWrapperComponentName=function(e){return this.SurveyModel.getElementWrapperComponentName({column:e},"column-header")},t.prototype.getColumnHeaderWrapperComponentData=function(e){return this.SurveyModel.getElementWrapperComponentData({column:e},"column-header")},t.prototype.getRowHeaderWrapperComponentName=function(e){return this.SurveyModel.getElementWrapperComponentName({row:e},"row-header")},t.prototype.getRowHeaderWrapperComponentData=function(e){return this.SurveyModel.getElementWrapperComponentData({row:e},"row-header")},t}(a.QuestionMatrixBaseModel);s.Serializer.addClass("matrix",[{name:"columns:itemvalue[]",baseValue:function(){return u.surveyLocalization.getString("matrix_column")}},{name:"rows:itemvalue[]",baseValue:function(){return u.surveyLocalization.getString("matrix_row")}},{name:"cells:cells",serializationProperty:"cells"},{name:"rowsOrder",default:"initial",choices:["initial","random"]},"isAllRowRequired:boolean","hideIfRowsEmpty:boolean"],(function(){return new v("")}),"matrixbase"),p.QuestionFactory.Instance.registerQuestion("matrix",(function(e){var t=new v(e);return t.rows=p.QuestionFactory.DefaultRows,t.columns=p.QuestionFactory.DefaultColums,t}))},"./src/question_matrixdropdown.ts":
/*!****************************************!*\
  !*** ./src/question_matrixdropdown.ts ***!
  \****************************************/
/*! exports provided: MatrixDropdownRowModel, QuestionMatrixDropdownModel */function(e,t,n){"use strict";n.r(t),n.d(t,"MatrixDropdownRowModel",(function(){return u})),n.d(t,"QuestionMatrixDropdownModel",(function(){return c}));var r,i=n(/*! ./question_matrixdropdownbase */"./src/question_matrixdropdownbase.ts"),o=n(/*! ./jsonobject */"./src/jsonobject.ts"),a=n(/*! ./itemvalue */"./src/itemvalue.ts"),s=n(/*! ./questionfactory */"./src/questionfactory.ts"),l=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(t,n,r,i){var o=e.call(this,r,i)||this;return o.name=t,o.item=n,o.buildCells(i),o}return l(t,e),Object.defineProperty(t.prototype,"rowName",{get:function(){return this.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this.item.text},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locText",{get:function(){return this.item.locText},enumerable:!1,configurable:!0}),t}(i.MatrixDropdownRowModelBase),c=function(e){function t(t){var n=e.call(this,t)||this;n.createLocalizableString("totalText",n,!0);var r=n;return n.registerFunctionOnPropertyValueChanged("rows",(function(){r.clearGeneratedRows(),r.resetRenderedTable(),r.filterItems()})),n}return l(t,e),t.prototype.getType=function(){return"matrixdropdown"},Object.defineProperty(t.prototype,"totalText",{get:function(){return this.getLocalizableStringText("totalText","")},set:function(e){this.setLocalizableStringText("totalText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTotalText",{get:function(){return this.getLocalizableString("totalText")},enumerable:!1,configurable:!0}),t.prototype.getFooterText=function(){return this.locTotalText},Object.defineProperty(t.prototype,"rowTitleWidth",{get:function(){return this.getPropertyValue("rowTitleWidth","")},set:function(e){this.setPropertyValue("rowTitleWidth",e)},enumerable:!1,configurable:!0}),t.prototype.getRowTitleWidth=function(){return this.rowTitleWidth},t.prototype.getDisplayValueCore=function(e,t){if(!t)return t;for(var n=this.visibleRows,r={},i=0;i<n.length;i++){var o=this.rows[i].value,s=t[o];if(s){if(e){var l=a.ItemValue.getTextOrHtmlByValue(this.rows,o);l&&(o=l)}r[o]=this.getRowDisplayValue(e,n[i],s)}}return r},t.prototype.addConditionObjectsByContext=function(e,t){for(var n=!!t&&this.columns.indexOf(t)>-1,r=0;r<this.rows.length;r++){var i=this.rows[r];if(i.value)for(var o=this.getValueName()+"."+i.value+".",a=this.processedTitle+"."+i.calculatedText+".",s=0;s<this.columns.length;s++){var l=this.columns[s];e.push({name:o+l.name,text:a+l.fullTitle,question:this})}}if(n)for(r=0;r<this.columns.length;r++)(l=this.columns[r])!=t&&e.push({name:"row."+l.name,text:"row."+l.fullTitle,question:this})},t.prototype.clearIncorrectValues=function(){var t=this.value;if(t){var n=null,r=!1,i=this.filteredRows?this.filteredRows:this.rows;for(var o in t)a.ItemValue.getItemByValue(i,o)?(null==n&&(n={}),n[o]=t[o]):r=!0;r&&(this.value=n),e.prototype.clearIncorrectValues.call(this)}},t.prototype.clearValueIfInvisible=function(){e.prototype.clearValueIfInvisible.call(this),this.clearInvisibleValuesInRows()},t.prototype.generateRows=function(){var e=new Array,t=this.filteredRows?this.filteredRows:this.rows;if(!t||0===t.length)return e;var n=this.value;n||(n={});for(var r=0;r<t.length;r++)t[r].value&&e.push(this.createMatrixRow(t[r],n[t[r].value]));return e},t.prototype.createMatrixRow=function(e,t){return new u(e.value,e,this,t)},t.prototype.getSearchableItemValueKeys=function(e){e.push("rows")},t}(i.QuestionMatrixDropdownModelBase);o.Serializer.addClass("matrixdropdown",[{name:"rows:itemvalue[]"},"rowsVisibleIf:condition","rowTitleWidth",{name:"totalText",serializationProperty:"locTotalText"}],(function(){return new c("")}),"matrixdropdownbase"),s.QuestionFactory.Instance.registerQuestion("matrixdropdown",(function(e){var t=new c(e);return t.choices=[1,2,3,4,5],t.rows=s.QuestionFactory.DefaultRows,i.QuestionMatrixDropdownModelBase.addDefaultColumns(t),t}))},"./src/question_matrixdropdownbase.ts":
/*!********************************************!*\
  !*** ./src/question_matrixdropdownbase.ts ***!
  \********************************************/
/*! exports provided: matrixDropdownColumnTypes, MatrixDropdownColumn, MatrixDropdownCell, MatrixDropdownTotalCell, MatrixDropdownRowModelBase, MatrixDropdownTotalRowModel, QuestionMatrixDropdownRenderedCell, QuestionMatrixDropdownRenderedRow, QuestionMatrixDropdownRenderedTable, QuestionMatrixDropdownModelBase */function(e,t,n){"use strict";n.r(t),n.d(t,"matrixDropdownColumnTypes",(function(){return w})),n.d(t,"MatrixDropdownColumn",(function(){return _})),n.d(t,"MatrixDropdownCell",(function(){return C})),n.d(t,"MatrixDropdownTotalCell",(function(){return S})),n.d(t,"MatrixDropdownRowModelBase",(function(){return E})),n.d(t,"MatrixDropdownTotalRowModel",(function(){return T})),n.d(t,"QuestionMatrixDropdownRenderedCell",(function(){return I})),n.d(t,"QuestionMatrixDropdownRenderedRow",(function(){return P})),n.d(t,"QuestionMatrixDropdownRenderedTable",(function(){return O})),n.d(t,"QuestionMatrixDropdownModelBase",(function(){return N}));var r,i=n(/*! ./jsonobject */"./src/jsonobject.ts"),o=n(/*! ./martixBase */"./src/martixBase.ts"),a=n(/*! ./helpers */"./src/helpers.ts"),s=n(/*! ./base */"./src/base.ts"),l=n(/*! ./survey-element */"./src/survey-element.ts"),u=n(/*! ./textPreProcessor */"./src/textPreProcessor.ts"),c=n(/*! ./itemvalue */"./src/itemvalue.ts"),p=n(/*! ./surveyStrings */"./src/surveyStrings.ts"),d=n(/*! ./questionfactory */"./src/questionfactory.ts"),h=n(/*! ./question_expression */"./src/question_expression.ts"),f=n(/*! ./functionsfactory */"./src/functionsfactory.ts"),m=n(/*! ./settings */"./src/settings.ts"),g=n(/*! ./error */"./src/error.ts"),y=n(/*! ./actions/action */"./src/actions/action.ts"),v=n(/*! ./actions/adaptive-container */"./src/actions/adaptive-container.ts"),b=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});function x(e,t,n,r){e.storeOthersAsComment=!!n&&n.storeOthersAsComment,e.choices&&0!=e.choices.length||!e.choicesByUrl.isEmpty||(e.choices=n.choices),e.choicesByUrl.isEmpty||e.choicesByUrl.run(r.getTextProcessor())}var w={dropdown:{properties:["choices","choicesOrder","choicesByUrl","optionsCaption","otherText","choicesVisibleIf"],onCellQuestionUpdate:function(e,t,n,r){x(e,0,n,r),e.locOptionsCaption&&e.locOptionsCaption.isEmpty&&!n.locOptionsCaption.isEmpty&&(e.optionsCaption=n.optionsCaption)}},checkbox:{properties:["choices","choicesOrder","choicesByUrl","otherText","choicesVisibleIf","hasSelectAll","hasNone"],onCellQuestionUpdate:function(e,t,n,r){x(e,0,n,r),e.colCount=t.colCount>-1?t.colCount:n.columnColCount}},radiogroup:{properties:["choices","choicesOrder","choicesByUrl","otherText","choicesVisibleIf"],onCellQuestionUpdate:function(e,t,n,r){x(e,0,n,r),e.colCount=t.colCount>-1?t.colCount:n.columnColCount}},text:{properties:["placeHolder","inputType","maxLength","min","max","step"],onCellQuestionUpdate:function(e,t,n,r){}},comment:{properties:["placeHolder","rows","maxLength"],onCellQuestionUpdate:function(e,t,n,r){}},boolean:{properties:["renderAs","defaultValue"],onCellQuestionUpdate:function(e,t,n,r){e.showTitle=!0,e.renderAs=t.renderAs}},expression:{properties:["expression","displayStyle","currency"],onCellQuestionUpdate:function(e,t,n,r){}},rating:{properties:["rateValues"]}},_=function(e){function t(t,n){void 0===n&&(n=null);var r=e.call(this)||this;r.colOwnerValue=null,r.indexValue=-1,r._isVisible=!0,r._hasVisibleCell=!0;var i=r;return r.createLocalizableString("totalFormat",r),r.registerFunctionOnPropertyValueChanged("showInMultipleColumns",(function(){i.doShowInMultipleColumnsChanged()})),r.updateTemplateQuestion(),r.name=t,n?r.title=n:r.templateQuestion.locTitle.strChanged(),r}return b(t,e),t.getColumnTypes=function(){var e=[];for(var t in w)e.push(t);return e},t.prototype.getOriginalObj=function(){return this.templateQuestion},t.prototype.getClassNameProperty=function(){return"cellType"},t.prototype.getSurvey=function(e){return void 0===e&&(e=!1),this.colOwner?this.colOwner.survey:null},t.prototype.endLoadingFromJson=function(){var t=this;e.prototype.endLoadingFromJson.call(this),this.templateQuestion.endLoadingFromJson(),this.templateQuestion.onGetSurvey=function(){return t.getSurvey()}},t.prototype.getDynamicPropertyName=function(){return"cellType"},t.prototype.getDynamicType=function(){return this.calcCellQuestionType()},Object.defineProperty(t.prototype,"colOwner",{get:function(){return this.colOwnerValue},set:function(e){this.colOwnerValue=e,e&&this.updateTemplateQuestion()},enumerable:!1,configurable:!0}),t.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this),this.locTitle.strChanged()},t.prototype.addUsedLocales=function(t){e.prototype.addUsedLocales.call(this,t),this.templateQuestion.addUsedLocales(t)},Object.defineProperty(t.prototype,"index",{get:function(){return this.indexValue},enumerable:!1,configurable:!0}),t.prototype.setIndex=function(e){this.indexValue=e},t.prototype.getType=function(){return"matrixdropdowncolumn"},Object.defineProperty(t.prototype,"cellType",{get:function(){return this.getPropertyValue("cellType")},set:function(e){e=e.toLocaleLowerCase(),this.setPropertyValue("cellType",e),this.updateTemplateQuestion(),this.colOwner&&this.colOwner.onColumnCellTypeChanged(this)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templateQuestion",{get:function(){return this.templateQuestionValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.templateQuestion.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return this._isVisible},enumerable:!1,configurable:!0}),t.prototype.setIsVisible=function(e){this._isVisible=e},Object.defineProperty(t.prototype,"hasVisibleCell",{get:function(){return this._hasVisibleCell},set:function(e){this._hasVisibleCell=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.templateQuestion.name},set:function(e){this.templateQuestion.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.templateQuestion.title},set:function(e){this.templateQuestion.title=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTitle",{get:function(){return this.templateQuestion.locTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullTitle",{get:function(){return this.locTitle.textOrHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRequired",{get:function(){return this.templateQuestion.isRequired},set:function(e){this.templateQuestion.isRequired=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredText",{get:function(){return this.templateQuestion.requiredText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredErrorText",{get:function(){return this.templateQuestion.requiredErrorText},set:function(e){this.templateQuestion.requiredErrorText=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locRequiredErrorText",{get:function(){return this.templateQuestion.locRequiredErrorText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"readOnly",{get:function(){return this.templateQuestion.readOnly},set:function(e){this.templateQuestion.readOnly=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasOther",{get:function(){return this.templateQuestion.hasOther},set:function(e){this.templateQuestion.hasOther=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visibleIf",{get:function(){return this.templateQuestion.visibleIf},set:function(e){this.templateQuestion.visibleIf=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"enableIf",{get:function(){return this.templateQuestion.enableIf},set:function(e){this.templateQuestion.enableIf=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredIf",{get:function(){return this.templateQuestion.requiredIf},set:function(e){this.templateQuestion.requiredIf=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUnique",{get:function(){return this.getPropertyValue("isUnique")},set:function(e){this.setPropertyValue("isUnique",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showInMultipleColumns",{get:function(){return this.getPropertyValue("showInMultipleColumns",!1)},set:function(e){this.setPropertyValue("showInMultipleColumns",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSupportMultipleColumns",{get:function(){return["checkbox","radiogroup"].indexOf(this.cellType)>-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowInMultipleColumns",{get:function(){return this.showInMultipleColumns&&this.isSupportMultipleColumns},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"validators",{get:function(){return this.templateQuestion.validators},set:function(e){this.templateQuestion.validators=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalType",{get:function(){return this.getPropertyValue("totalType","none")},set:function(e){this.setPropertyValue("totalType",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalExpression",{get:function(){return this.getPropertyValue("totalExpression")},set:function(e){this.setPropertyValue("totalExpression",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTotal",{get:function(){return"none"!=this.totalType||!!this.totalExpression},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalFormat",{get:function(){return this.getLocalizableStringText("totalFormat","")},set:function(e){this.setLocalizableStringText("totalFormat",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTotalFormat",{get:function(){return this.getLocalizableString("totalFormat")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderAs",{get:function(){return this.getPropertyValue("renderAs")},set:function(e){this.setPropertyValue("renderAs",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalMaximumFractionDigits",{get:function(){return this.getPropertyValue("totalMaximumFractionDigits",-1)},set:function(e){e<-1||e>20||this.setPropertyValue("totalMaximumFractionDigits",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalMinimumFractionDigits",{get:function(){return this.getPropertyValue("totalMinimumFractionDigits",-1)},set:function(e){e<-1||e>20||this.setPropertyValue("totalMinimumFractionDigits",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalDisplayStyle",{get:function(){return this.getPropertyValue("totalDisplayStyle")},set:function(e){this.setPropertyValue("totalDisplayStyle",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalCurrency",{get:function(){return this.getPropertyValue("totalCurrency")},set:function(e){Object(h.getCurrecyCodes)().indexOf(e)<0||this.setPropertyValue("totalCurrency",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minWidth",{get:function(){return this.getPropertyValue("minWidth","")},set:function(e){this.setPropertyValue("minWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.getPropertyValue("width","")},set:function(e){this.setPropertyValue("width",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"colCount",{get:function(){return this.getPropertyValue("colCount",-1)},set:function(e){e<-1||e>4||this.setPropertyValue("colCount",e)},enumerable:!1,configurable:!0}),t.prototype.getLocale=function(){return this.colOwner?this.colOwner.getLocale():""},t.prototype.getMarkdownHtml=function(e,t){return this.colOwner?this.colOwner.getMarkdownHtml(e,t):null},t.prototype.getRenderer=function(e){return this.colOwner?this.colOwner.getRenderer(e):null},t.prototype.getProcessedText=function(e){return this.colOwner?this.colOwner.getProcessedText(e):e},t.prototype.createCellQuestion=function(e){var t=this.calcCellQuestionType(),n=this.createNewQuestion(t);return this.callOnCellQuestionUpdate(n,e),n},t.prototype.updateCellQuestion=function(e,t,n){void 0===n&&(n=null),this.setQuestionProperties(e,n),this.callOnCellQuestionUpdate(e,t)},t.prototype.callOnCellQuestionUpdate=function(e,t){var n=e.getType(),r=w[n];r&&r.onCellQuestionUpdate&&r.onCellQuestionUpdate(e,this,this.colOwner,t)},t.prototype.defaultCellTypeChanged=function(){this.updateTemplateQuestion()},t.prototype.calcCellQuestionType=function(){return"default"!==this.cellType?this.cellType:this.colOwner?this.colOwner.getCellType():m.settings.matrixDefaultCellType},t.prototype.updateTemplateQuestion=function(){var e=this,t=this.templateQuestion?this.templateQuestion.getType():"",n=this.calcCellQuestionType();n!==t&&(this.templateQuestion&&this.removeProperties(t),this.templateQuestionValue=this.createNewQuestion(n),this.templateQuestion.locOwner=this,this.addProperties(n),this.templateQuestion.onPropertyChanged.add((function(t,n){e.propertyValueChanged(n.name,n.oldValue,n.newValue)})),this.templateQuestion.onItemValuePropertyChanged.add((function(t,n){e.doItemValuePropertyChanged(n.propertyName,n.obj,n.name,n.newValue,n.oldValue)})),this.templateQuestion.isContentElement=!0,this.isLoadingFromJson||(this.templateQuestion.onGetSurvey=function(){return e.getSurvey()}),this.templateQuestion.locTitle.strChanged())},t.prototype.createNewQuestion=function(e){var t=i.Serializer.createClass(e);return t||(t=i.Serializer.createClass("text")),t.loadingOwner=this,t.isEditableTemplateElement=!0,this.setQuestionProperties(t),t},t.prototype.setQuestionProperties=function(e,t){if(void 0===t&&(t=null),this.templateQuestion){var n=(new i.JsonObject).toJsonObject(this.templateQuestion,!0);t&&t(n),n.type=e.getType(),(new i.JsonObject).toObject(n,e)}},t.prototype.propertyValueChanged=function(t,n,r){e.prototype.propertyValueChanged.call(this,t,n,r),i.Serializer.hasOriginalProperty(this,t)&&(null==this.colOwner||this.isLoadingFromJson||this.colOwner.onColumnPropertyChanged(this,t,r))},t.prototype.doItemValuePropertyChanged=function(e,t,n,r,o){i.Serializer.hasOriginalProperty(t,n)&&(null==this.colOwner||this.isLoadingFromJson||this.colOwner.onColumnItemValuePropertyChanged(this,e,t,n,r,o))},t.prototype.doShowInMultipleColumnsChanged=function(){null==this.colOwner||this.isLoadingFromJson||this.colOwner.onShowInMultipleColumnsChanged(this)},t.prototype.getProperties=function(e){return i.Serializer.getDynamicPropertiesByObj(this,e)},t.prototype.removeProperties=function(e){for(var t=this.getProperties(e),n=0;n<t.length;n++){var r=t[n];delete this[r.name],r.serializationProperty&&delete this[r.serializationProperty]}},t.prototype.addProperties=function(e){for(var t=this.templateQuestion,n=this.getProperties(e),r=0;r<n.length;r++){var i=n[r];this.addProperty(t,i.name,!1),i.serializationProperty&&this.addProperty(t,i.serializationProperty,!0)}},t.prototype.addProperty=function(e,t,n){var r={configurable:!0,get:function(){return e[t]}};n||(r.set=function(n){e[t]=n}),Object.defineProperty(this,t,r)},t}(s.Base),C=function(){function e(e,t,n){this.column=e,this.row=t,this.data=n,this.questionValue=this.createQuestion(e,t,n),this.questionValue.updateCustomWidget()}return e.prototype.locStrsChanged=function(){this.question.locStrsChanged()},e.prototype.createQuestion=function(e,t,n){var r=n.createQuestion(this.row,this.column);return r.validateValueCallback=function(){return n.validateCell(t,e.name,t.value)},i.CustomPropertiesCollection.getProperties(e.getType()).forEach((function(t){var n=t.name;void 0!==e[n]&&(r[n]=e[n])})),r},Object.defineProperty(e.prototype,"question",{get:function(){return this.questionValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.question.value},set:function(e){this.question.value=e},enumerable:!1,configurable:!0}),e.prototype.runCondition=function(e,t){this.question.runCondition(e,t)},e}(),S=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.column=t,i.row=n,i.data=r,i.updateCellQuestion(),i}return b(t,e),t.prototype.createQuestion=function(e,t,n){var r=i.Serializer.createClass("expression");return r.setSurveyImpl(t),r},t.prototype.locStrsChanged=function(){this.updateCellQuestion(),e.prototype.locStrsChanged.call(this)},t.prototype.updateCellQuestion=function(){this.question.locCalculation(),this.column.updateCellQuestion(this.question,null,(function(e){delete e.defaultValue})),this.question.expression=this.getTotalExpression(),this.question.format=this.column.totalFormat,this.question.currency=this.column.totalCurrency,this.question.displayStyle=this.column.totalDisplayStyle,this.question.maximumFractionDigits=this.column.totalMaximumFractionDigits,this.question.minimumFractionDigits=this.column.totalMinimumFractionDigits,this.question.unlocCalculation(),this.question.runIfReadOnly=!0},t.prototype.getTotalExpression=function(){if(this.column.totalExpression)return this.column.totalExpression;if("none"==this.column.totalType)return"";var e=this.column.totalType+"InArray";return f.FunctionFactory.Instance.hasFunction(e)?e+"({self}, '"+this.column.name+"')":""},t}(C),k=function(e){function t(t,n){var r=e.call(this,n)||this;return r.row=t,r.variableName=n,r}return b(t,e),Object.defineProperty(t.prototype,"survey",{get:function(){return this.row.getSurvey()},enumerable:!1,configurable:!0}),t.prototype.getValues=function(){return this.row.value},t.prototype.getQuestionByName=function(e){return this.row.getQuestionByName(e)},t.prototype.onCustomProcessText=function(e){return e.name==E.IndexVariableName?(e.isExists=!0,e.value=this.row.rowIndex,!0):e.name==E.RowValueVariableName&&(e.isExists=!0,e.value=this.row.rowName,!0)},t}(u.QuestionTextProcessor),E=function(){function e(t,n){var r=this;this.isSettingValue=!1,this.detailPanelValue=null,this.cells=[],this.isCreatingDetailPanel=!1,this.data=t,this.subscribeToChanges(n),this.textPreProcessor=new k(this,e.RowVariableName),this.showHideDetailPanelClick=function(){r.showHideDetailPanel()},this.idValue=e.getId()}return e.getId=function(){return"srow_"+e.idCounter++},Object.defineProperty(e.prototype,"id",{get:function(){return this.idValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rowName",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.rowName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){for(var e={},t=this.questions,n=0;n<t.length;n++){var r=t[n];r.isEmpty()||(e[r.getValueName()]=r.value),r.comment&&this.getSurvey()&&this.getSurvey().storeOthersAsComment&&(e[r.getValueName()+m.settings.commentPrefix]=r.comment)}return e},set:function(e){this.isSettingValue=!0,this.subscribeToChanges(e);for(var t=this.questions,n=0;n<t.length;n++){var r=t[n],i=this.getCellValue(e,r.getValueName()),o=r.comment,s=e?e[r.getValueName()+m.settings.commentPrefix]:"";null==s&&(s=""),r.updateValueFromSurvey(i),(s||a.Helpers.isTwoValueEquals(o,r.comment))&&r.updateCommentFromSurvey(s),r.onSurveyValueChanged(i)}this.isSettingValue=!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"locText",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPanel",{get:function(){return!!this.data&&this.data.hasDetailPanel(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"detailPanel",{get:function(){return this.detailPanelValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"detailPanelId",{get:function(){return this.detailPanel?this.detailPanel.id:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDetailPanelShowing",{get:function(){return!!this.data&&this.data.getIsDetailPanelShowing(this)},enumerable:!1,configurable:!0}),e.prototype.setIsDetailPanelShowing=function(e){this.data&&this.data.setIsDetailPanelShowing(this,e),this.onDetailPanelShowingChanged&&this.onDetailPanelShowingChanged()},e.prototype.showHideDetailPanel=function(){this.isDetailPanelShowing?this.hideDetailPanel():this.showDetailPanel()},e.prototype.showDetailPanel=function(){this.ensureDetailPanel(),this.detailPanelValue&&this.setIsDetailPanelShowing(!0)},e.prototype.hideDetailPanel=function(e){void 0===e&&(e=!1),this.setIsDetailPanelShowing(!1),e&&(this.detailPanelValue=null)},e.prototype.ensureDetailPanel=function(){if(!this.isCreatingDetailPanel&&!this.detailPanelValue&&this.hasPanel&&this.data){this.isCreatingDetailPanel=!0,this.detailPanelValue=this.data.createRowDetailPanel(this);var e=this.detailPanelValue.questions,t=this.data.getRowValue(this.data.getRowIndex(this));if(!a.Helpers.isValueEmpty(t))for(var n=0;n<e.length;n++){var r=e[n].getValueName();a.Helpers.isValueEmpty(t[r])||(e[n].value=t[r])}this.detailPanelValue.setSurveyImpl(this),this.isCreatingDetailPanel=!1}},e.prototype.getAllValues=function(){return this.value},e.prototype.getFilteredValues=function(){var e=this.getAllValues(),t={row:e};for(var n in e)t[n]=e[n];return t},e.prototype.getFilteredProperties=function(){return{survey:this.getSurvey(),row:this}},e.prototype.runCondition=function(t,n){this.data&&(t[e.OwnerVariableName]=this.data.value),t[e.IndexVariableName]=this.rowIndex,t[e.RowValueVariableName]=this.rowName,n||(n={}),n[e.RowVariableName]=this;for(var r=0;r<this.cells.length;r++)t[e.RowVariableName]=this.value,this.cells[r].runCondition(t,n);this.detailPanel&&this.detailPanel.runCondition(t,n)},e.prototype.clearValue=function(){for(var e=this.questions,t=0;t<e.length;t++)e[t].clearValue()},e.prototype.onAnyValueChanged=function(e){for(var t=this.questions,n=0;n<t.length;n++)t[n].onAnyValueChanged(e)},e.prototype.getDataValueCore=function(e,t){var n=this.getSurvey();return n?n.getDataValueCore(e,t):e[t]},e.prototype.getValue=function(e){var t=this.getQuestionByName(e);return t?t.value:null},e.prototype.setValue=function(e,t){this.setValueCore(e,t,!1)},e.prototype.getVariable=function(e){},e.prototype.setVariable=function(e,t){},e.prototype.getComment=function(e){var t=this.getQuestionByName(e);return t?t.comment:""},e.prototype.setComment=function(e,t,n){this.setValueCore(e,t,!0)},e.prototype.setValueCore=function(t,n,r){if(!this.isSettingValue){this.updateQuestionsValue(t,n,r);var i=this.value,o=r?t+m.settings.commentPrefix:t,s=r?this.getComment(t):this.getValue(t),l=this.getQuestionByName(t),u=this.data.onRowChanging(this,o,i);if(l&&!a.Helpers.isTwoValueEquals(u,s))r?l.comment=u:l.value=u;else{if(this.data.isValidateOnValueChanging&&this.hasQuestonError(l))return;this.data.onRowChanged(this,o,i,null==n&&!l),this.onAnyValueChanged(e.RowVariableName)}}},e.prototype.updateQuestionsValue=function(e,t,n){if(this.detailPanel){var r=this.getQuestionByColumnName(e),i=this.detailPanel.getQuestionByName(e);if(r&&i){var o=a.Helpers.isTwoValueEquals(t,n?r.comment:r.value)?i:r;this.isSettingValue=!0,n?o.comment=t:o.value=t,this.isSettingValue=!1}}},e.prototype.hasQuestonError=function(e){if(!e)return!1;if(e.hasErrors(!0,{isOnValueChanged:!this.data.isValidateOnValueChanging}))return!0;if(e.isEmpty())return!1;var t=this.getCellByColumnName(e.name);return!!(t&&t.column&&t.column.isUnique)&&this.data.checkIfValueInRowDuplicated(this,e)},Object.defineProperty(e.prototype,"isEmpty",{get:function(){var e=this.value;if(a.Helpers.isValueEmpty(e))return!0;for(var t in e)if(void 0!==e[t]&&null!==e[t])return!1;return!0},enumerable:!1,configurable:!0}),e.prototype.getQuestionByColumn=function(e){var t=this.getCellByColumn(e);return t?t.question:null},e.prototype.getCellByColumn=function(e){for(var t=0;t<this.cells.length;t++)if(this.cells[t].column==e)return this.cells[t];return null},e.prototype.getCellByColumnName=function(e){for(var t=0;t<this.cells.length;t++)if(this.cells[t].column.name==e)return this.cells[t];return null},e.prototype.getQuestionByColumnName=function(e){var t=this.getCellByColumnName(e);return t?t.question:null},Object.defineProperty(e.prototype,"questions",{get:function(){for(var e=[],t=0;t<this.cells.length;t++)e.push(this.cells[t].question);var n=this.detailPanel?this.detailPanel.questions:[];for(t=0;t<n.length;t++)e.push(n[t]);return e},enumerable:!1,configurable:!0}),e.prototype.getQuestionByName=function(e){var t=this.getQuestionByColumnName(e);return t||(this.detailPanel?this.detailPanel.getQuestionByName(e):null)},e.prototype.getQuestionsByName=function(e){var t=[],n=this.getQuestionByColumnName(e);return n&&t.push(n),this.detailPanel&&(n=this.detailPanel.getQuestionByName(e))&&t.push(n),t},e.prototype.getSharedQuestionByName=function(e){return this.data?this.data.getSharedQuestionByName(e,this):null},e.prototype.clearIncorrectValues=function(e){for(var t in e){var n=this.getQuestionByName(t);if(n){var r=n.value;n.clearIncorrectValues(),a.Helpers.isTwoValueEquals(r,n.value)||this.setValue(t,n.value)}else!this.getSharedQuestionByName(t)&&t.indexOf(m.settings.matrixTotalValuePostFix)<0&&this.setValue(t,null)}},e.prototype.getLocale=function(){return this.data?this.data.getLocale():""},e.prototype.getMarkdownHtml=function(e,t){return this.data?this.data.getMarkdownHtml(e,t):null},e.prototype.getRenderer=function(e){return this.data?this.data.getRenderer(e):null},e.prototype.getProcessedText=function(e){return this.data?this.data.getProcessedText(e):e},e.prototype.locStrsChanged=function(){for(var e=0;e<this.cells.length;e++)this.cells[e].locStrsChanged();this.detailPanel&&this.detailPanel.locStrsChanged()},e.prototype.updateCellQuestionOnColumnChanged=function(e,t,n){var r=this.getCellByColumn(e);r&&this.updateCellOnColumnChanged(r,t,n)},e.prototype.updateCellQuestionOnColumnItemValueChanged=function(e,t,n,r,i,o){var a=this.getCellByColumn(e);a&&this.updateCellOnColumnItemValueChanged(a,t,n,r,i,o)},e.prototype.onQuestionReadOnlyChanged=function(e){for(var t=this.questions,n=0;n<t.length;n++)t[n].readOnly=e},e.prototype.hasErrors=function(e,t,n){var r=!1,i=this.cells;if(!i)return r;for(var o=0;o<i.length;o++)if(i[o]){var a=i[o].question;a&&a.visible&&(a.onCompletedAsyncValidators=function(e){n()},t&&!0===t.isOnValueChanged&&a.isEmpty()||(r=a.hasErrors(e,t)||r))}if(this.hasPanel){this.ensureDetailPanel();var s=this.detailPanel.hasErrors(e,!1,t);!t.hideErroredPanel&&s&&e&&(t.isSingleDetailPanel&&(t.hideErroredPanel=!0),this.showDetailPanel()),r=s||r}return r},e.prototype.updateCellOnColumnChanged=function(e,t,n){e.question[t]=n},e.prototype.updateCellOnColumnItemValueChanged=function(e,t,n,r,i,o){var a=e.question[t];if(Array.isArray(a)){var s="value"===r?o:n.value,l=c.ItemValue.getItemByValue(a,s);l&&(l[r]=i)}},e.prototype.buildCells=function(e){this.isSettingValue=!0;for(var t=this.data.columns,n=0;n<t.length;n++){var r=t[n];if(r.isVisible){var i=this.createCell(r);this.cells.push(i);var o=this.getCellValue(e,r.name);if(!a.Helpers.isValueEmpty(o)){i.question.value=o;var s=r.name+m.settings.commentPrefix;e&&!a.Helpers.isValueEmpty(e[s])&&(i.question.comment=e[s])}}}this.isSettingValue=!1},e.prototype.getCellValue=function(e,t){return this.editingObj?i.Serializer.getObjPropertyValue(this.editingObj,t):e?e[t]:void 0},e.prototype.createCell=function(e){return new C(e,this,this.data)},e.prototype.getSurveyData=function(){return this},e.prototype.getSurvey=function(){return this.data?this.data.getSurvey():null},e.prototype.getTextProcessor=function(){return this.textPreProcessor},Object.defineProperty(e.prototype,"rowIndex",{get:function(){return this.data?this.data.getRowIndex(this)+1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"editingObj",{get:function(){return this.editingObjValue},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this.editingObj&&(this.editingObj.onPropertyChanged.remove(this.onEditingObjPropertyChanged),this.editingObjValue=null)},e.prototype.subscribeToChanges=function(e){var t=this;e&&e.getType&&e.onPropertyChanged&&e!==this.editingObj&&(this.editingObjValue=e,this.onEditingObjPropertyChanged=function(e,n){t.updateOnSetValue(n.name,n.newValue)},this.editingObj.onPropertyChanged.add(this.onEditingObjPropertyChanged))},e.prototype.updateOnSetValue=function(e,t){this.isSettingValue=!0;for(var n=this.getQuestionsByName(e),r=0;r<n.length;r++)n[r].value=t;this.isSettingValue=!1},e.RowVariableName="row",e.OwnerVariableName="self",e.IndexVariableName="rowIndex",e.RowValueVariableName="rowValue",e.idCounter=1,e}(),T=function(e){function t(t){var n=e.call(this,t,null)||this;return n.buildCells(null),n}return b(t,e),t.prototype.createCell=function(e){return new S(e,this,this.data)},t.prototype.setValue=function(e,t){this.data&&!this.isSettingValue&&this.data.onTotalValueChanged()},t.prototype.runCondition=function(t,n){var r,i=0;do{r=a.Helpers.getUnbindValue(this.value),e.prototype.runCondition.call(this,t,n),i++}while(!a.Helpers.isTwoValueEquals(r,this.value)&&i<3)},t.prototype.updateCellOnColumnChanged=function(e,t,n){e.updateCellQuestion()},t}(E),I=function(){function e(){this.minWidth="",this.width="",this.colSpans=1,this.isActionsCell=!1,this.className="",this.idValue=e.counter++}return Object.defineProperty(e.prototype,"hasQuestion",{get:function(){return!!this.question},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasTitle",{get:function(){return!!this.locTitle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPanel",{get:function(){return!!this.panel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.idValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showErrorOnTop",{get:function(){return this.showErrorOnCore("top")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showErrorOnBottom",{get:function(){return this.showErrorOnCore("bottom")},enumerable:!1,configurable:!0}),e.prototype.showErrorOnCore=function(e){return this.getShowErrorLocation()==e&&(!this.isChoice||this.isFirstChoice)},e.prototype.getShowErrorLocation=function(){return this.hasQuestion?this.question.survey.questionErrorLocation:""},Object.defineProperty(e.prototype,"item",{get:function(){return this.itemValue},set:function(e){this.itemValue=e,e&&(e.hideCaption=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isChoice",{get:function(){return!!this.item},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"choiceValue",{get:function(){return this.isChoice?this.item.value:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCheckbox",{get:function(){return this.isChoice&&"checkbox"==this.question.getType()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFirstChoice",{get:function(){return 0===this.choiceIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"css",{get:function(){return this.className+(this.question.errors.length>0?" "+this.question.cssError:"")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headers",{get:function(){return this.cell&&this.cell.column&&this.cell.column.isShowInMultipleColumns?this.item.locText.renderedHtml:this.question&&this.question.isVisible?this.question.locTitle.renderedHtml:this.hasTitle&&this.locTitle.renderedHtml||""},enumerable:!1,configurable:!0}),e.prototype.calculateFinalClassName=function(e){var t=this.cell.question.cssClasses,n="";return t&&(n="",t.itemValue&&(n+=" "+t.itemValue),t.asCell&&(n&&(n+=""),n+=t.asCell)),!n&&e&&(n=e.cell),n+=this.question.errors.length>0?" "+t.hasError:"",this.isChoice&&(n+=" "+e.choiceCell),n},e.counter=1,e}(),P=function(){function e(){this.isDetailRow=!1,this.cells=[],this.className="",this.idValue=e.counter++}return Object.defineProperty(e.prototype,"id",{get:function(){return this.idValue},enumerable:!1,configurable:!0}),e.counter=1,e}(),O=function(e){function t(t){var n=e.call(this)||this;return n.matrix=t,n.hasActionCellInRowsValues={},n.createNewArray("rows"),n.build(),n}return b(t,e),Object.defineProperty(t.prototype,"showTable",{get:function(){return this.getPropertyValue("showTable",!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showHeader",{get:function(){return this.getPropertyValue("showHeader")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showAddRowOnTop",{get:function(){return this.getPropertyValue("showAddRowOnTop",!1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showAddRowOnBottom",{get:function(){return this.getPropertyValue("showAddRowOnBottom",!1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showFooter",{get:function(){return this.matrix.hasFooter&&this.matrix.isColumnLayoutHorizontal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasFooter",{get:function(){return!!this.footerRow},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasRemoveRows",{get:function(){return this.hasRemoveRowsValue},enumerable:!1,configurable:!0}),t.prototype.isRequireReset=function(){return this.hasRemoveRows!=this.matrix.canRemoveRows||!this.matrix.isColumnLayoutHorizontal},Object.defineProperty(t.prototype,"headerRow",{get:function(){return this.headerRowValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"footerRow",{get:function(){return this.footerRowValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this.getPropertyValue("rows")},enumerable:!1,configurable:!0}),t.prototype.build=function(){this.hasRemoveRowsValue=this.matrix.canRemoveRows,this.matrix.visibleRows,this.cssClasses=this.matrix.cssClasses,this.buildRowsActions(),this.buildHeader(),this.buildRows(),this.buildFooter(),this.updateShowTableAndAddRow()},t.prototype.updateShowTableAndAddRow=function(){var e=this.rows.length>0||this.matrix.isDesignMode||!this.matrix.getShowColumnsIfEmpty();this.setPropertyValue("showTable",e);var t=this.matrix.canAddRow&&e,n=t,r=t;n&&(n="default"===this.matrix.getAddRowLocation()?"vertical"===this.matrix.columnLayout:"bottom"!==this.matrix.getAddRowLocation()),r&&"topBottom"!==this.matrix.getAddRowLocation()&&(r=!n),this.setPropertyValue("showAddRowOnTop",n),this.setPropertyValue("showAddRowOnBottom",r)},t.prototype.onAddedRow=function(){if(!(this.getRenderedDataRowCount()>=this.matrix.visibleRows.length)){var e=this.matrix.visibleRows[this.matrix.visibleRows.length-1];this.rowsActions.push(this.buildRowActions(e)),this.addHorizontalRow(this.rows,e,1==this.matrix.visibleRows.length&&!this.matrix.showHeader),this.updateShowTableAndAddRow()}},t.prototype.getRenderedDataRowCount=function(){for(var e=0,t=0;t<this.rows.length;t++)this.rows[t].isDetailRow||e++;return e},t.prototype.onRemovedRow=function(e){var t=this.getRenderedRowIndex(e);if(!(t<0)){this.rowsActions.splice(t,1);var n=1;t<this.rows.length-1&&this.rows[t+1].isDetailRow&&n++,this.rows.splice(t,n),this.updateShowTableAndAddRow()}},t.prototype.onDetailPanelChangeVisibility=function(e,t){var n=this.getRenderedRowIndex(e);if(!(n<0)){var r=n<this.rows.length-1&&this.rows[n+1].isDetailRow?n+1:-1;if(!(t&&r>-1||!t&&r<0))if(t){var i=this.createDetailPanelRow(e,this.rows[n]);this.rows.splice(n+1,0,i)}else this.rows.splice(r,1)}},t.prototype.getRenderedRowIndex=function(e){for(var t=0;t<this.rows.length;t++)if(this.rows[t].row==e)return t;return-1},t.prototype.buildRowsActions=function(){this.rowsActions=[];for(var e=this.matrix.visibleRows,t=0;t<e.length;t++)this.rowsActions.push(this.buildRowActions(e[t]))},t.prototype.buildHeader=function(){var e=this.matrix.isColumnLayoutHorizontal&&this.matrix.showHeader||this.matrix.hasRowText&&!this.matrix.isColumnLayoutHorizontal;if(this.setPropertyValue("showHeader",e),e){if(this.headerRowValue=new P,this.hasActionCellInRows("start")&&this.headerRow.cells.push(this.createHeaderCell(null)),this.matrix.hasRowText&&this.matrix.showHeader&&this.headerRow.cells.push(this.createHeaderCell(null)),this.matrix.isColumnLayoutHorizontal)for(var t=0;t<this.matrix.visibleColumns.length;t++){var n=this.matrix.visibleColumns[t];n.hasVisibleCell&&(n.isShowInMultipleColumns?this.createMutlipleColumnsHeader(n):this.headerRow.cells.push(this.createHeaderCell(n)))}else{var r=this.matrix.visibleRows;for(t=0;t<r.length;t++)this.headerRow.cells.push(this.createTextCell(r[t].locText));this.matrix.hasFooter&&this.headerRow.cells.push(this.createTextCell(this.matrix.getFooterText()))}this.hasActionCellInRows("end")&&this.headerRow.cells.push(this.createHeaderCell(null))}},t.prototype.buildFooter=function(){if(this.showFooter){this.footerRowValue=new P,this.hasActionCellInRows("start")&&this.footerRow.cells.push(this.createHeaderCell(null)),this.matrix.hasRowText&&this.footerRow.cells.push(this.createTextCell(this.matrix.getFooterText()));for(var e=this.matrix.visibleTotalRow.cells,t=0;t<e.length;t++){var n=e[t];n.column.hasVisibleCell&&(n.column.isShowInMultipleColumns?this.createMutlipleColumnsFooter(this.footerRow,n):this.footerRow.cells.push(this.createEditCell(n)))}this.hasActionCellInRows("end")&&this.footerRow.cells.push(this.createHeaderCell(null))}},t.prototype.buildRows=function(){var e=this.matrix.isColumnLayoutHorizontal?this.buildHorizontalRows():this.buildVerticalRows();this.setPropertyValue("rows",e)},t.prototype.hasActionCellInRows=function(e){if(void 0===this.hasActionCellInRowsValues[e]){var t=this.matrix.visibleRows;this.hasActionCellInRowsValues[e]=!1;for(var n=0;n<t.length;n++)if(!this.isValueEmpty(this.getRowActions(n,e))){this.hasActionCellInRowsValues[e]=!0;break}}return this.hasActionCellInRowsValues[e]},t.prototype.canRemoveRow=function(e){return this.matrix.canRemoveRow(e)},t.prototype.buildHorizontalRows=function(){for(var e=this.matrix.visibleRows,t=[],n=0;n<e.length;n++)this.addHorizontalRow(t,e[n],0==n&&!this.matrix.showHeader);return t},t.prototype.addHorizontalRow=function(e,t,n){var r=this.createHorizontalRow(t,n);r.row=t,e.push(r),t.isDetailPanelShowing&&e.push(this.createDetailPanelRow(t,r))},t.prototype.getRowActionsCell=function(e,t){var n=this.getRowActions(e,t);if(!this.isValueEmpty(n)){var r=new I,i=new v.AdaptiveActionContainer;i.setItems(n);var o=new c.ItemValue(i);return r.item=o,r.isActionsCell=!0,r.className=this.cssClasses.actionsCell,r.row=this.matrix.visibleRows[e],r}return null},t.prototype.getRowActions=function(e,t){var n=this.rowsActions[e];return Array.isArray(n)?n.filter((function(e){return e.location||(e.location="start"),e.location===t})):[]},t.prototype.buildRowActions=function(e){var t=[];return this.setDefaultRowActions(e,t),this.matrix.survey&&(t=this.matrix.survey.getUpdatedMatrixRowActions(this.matrix,e,t)),t},t.prototype.setDefaultRowActions=function(e,t){this.hasRemoveRows&&this.canRemoveRow(e)&&t.push(new y.Action({id:"remove-row",location:"end",enabled:!this.matrix.isInputReadOnly,component:"sv-matrix-remove-button",data:{row:e,question:this.matrix}})),e.hasPanel&&t.push(new y.Action({id:"show-detail",location:"start",component:"sv-matrix-detail-button",data:{row:e,question:this.matrix}}))},t.prototype.createHorizontalRow=function(e,t){var n=new P;this.addRowActionsCell(e,n,"start"),this.matrix.hasRowText&&((o=this.createTextCell(e.locText)).row=e,n.cells.push(o),t&&this.setHeaderCellWidth(null,o),e.hasPanel&&this.cssClasses.detailRowText&&(o.className&&(o.className+=" "),o.className+=this.cssClasses.detailRowText));for(var r=0;r<e.cells.length;r++){var i=e.cells[r];if(i.column.hasVisibleCell)if(i.column.isShowInMultipleColumns)this.createMutlipleEditCells(n,i);else{var o=this.createEditCell(i);n.cells.push(o),t&&this.setHeaderCellWidth(i.column,o)}}return this.addRowActionsCell(e,n,"end"),n},t.prototype.addRowActionsCell=function(e,t,n){var r=this.matrix.visibleRows.indexOf(e);if(this.hasActionCellInRows(n)){var i=this.getRowActionsCell(r,n);if(i)t.cells.push(i);else{var o=new I;o.isEmpty=!0,t.cells.push(o)}}},t.prototype.createDetailPanelRow=function(e,t){var n=new P;n.row=e,n.className+=this.cssClasses.detailRow,n.isDetailRow=!0;var r=new I;this.matrix.hasRowText&&(r.colSpans=2),r.isEmpty=!0,n.cells.push(r);var i=null;this.hasActionCellInRows("end")&&((i=new I).isEmpty=!0);var o=new I;return o.panel=e.detailPanel,o.colSpans=t.cells.length-r.colSpans-(i?i.colSpans:0),o.className=this.cssClasses.detailPanelCell,n.cells.push(o),i&&n.cells.push(i),"function"==typeof this.matrix.onCreateDetailPanelRenderedRowCallback&&this.matrix.onCreateDetailPanelRenderedRowCallback(n),n},t.prototype.buildVerticalRows=function(){for(var e=this.matrix.columns,t=[],n=0;n<e.length;n++){var r=e[n];r.isVisible&&r.hasVisibleCell&&(r.isShowInMultipleColumns?this.createMutlipleVerticalRows(t,r,n):t.push(this.createVerticalRow(r,n)))}return this.hasActionCellInRows("end")&&t.push(this.createEndVerticalActionRow()),t},t.prototype.createMutlipleVerticalRows=function(e,t,n){var r=this.getMultipleColumnChoices(t);if(r)for(var i=0;i<r.length;i++)e.push(this.createVerticalRow(t,n,r[i],i))},t.prototype.createVerticalRow=function(e,t,n,r){void 0===n&&(n=null),void 0===r&&(r=-1);var i=new P;if(this.matrix.showHeader){var o=n?n.locText:e.locTitle,a=this.createTextCell(o);a.column=e,n||this.setRequriedToHeaderCell(e,a),i.cells.push(a)}for(var s=this.matrix.visibleRows,l=0;l<s.length;l++){var u=n,c=r>=0?r:l,p=s[l].cells[t],d=n?p.question.visibleChoices:void 0;d&&c<d.length&&(u=d[c]);var h=this.createEditCell(p,u);h.item=u,h.choiceIndex=c,i.cells.push(h)}return this.matrix.hasTotal&&i.cells.push(this.createEditCell(this.matrix.visibleTotalRow.cells[t])),i},t.prototype.createEndVerticalActionRow=function(){var e=new P;this.matrix.showHeader&&e.cells.push(this.createTextCell(null));for(var t=this.matrix.visibleRows,n=0;n<t.length;n++)e.cells.push(this.getRowActionsCell(n,"end"));return this.matrix.hasTotal&&e.cells.push(this.createTextCell(null)),e},t.prototype.createMutlipleEditCells=function(e,t,n){void 0===n&&(n=!1);var r=n?this.getMultipleColumnChoices(t.column):t.question.visibleChoices;if(r)for(var i=0;i<r.length;i++){var o=this.createEditCell(t,n?void 0:r[i]);n||(o.choiceIndex=i),e.cells.push(o)}},t.prototype.createEditCell=function(e,t){void 0===t&&(t=void 0);var n=new I;return n.cell=e,n.row=e.row,n.question=e.question,n.matrix=this.matrix,n.item=t,n.className=n.calculateFinalClassName(this.cssClasses),n},t.prototype.createMutlipleColumnsFooter=function(e,t){this.createMutlipleEditCells(e,t,!0)},t.prototype.createMutlipleColumnsHeader=function(e){var t=this.getMultipleColumnChoices(e);if(t)for(var n=0;n<t.length;n++){var r=this.createTextCell(t[n].locText);this.setHeaderCell(e,r),this.headerRow.cells.push(r)}},t.prototype.getMultipleColumnChoices=function(e){var t=e.templateQuestion.choices;return t&&Array.isArray(t)&&0==t.length?this.matrix.choices:(t=e.templateQuestion.visibleChoices)&&Array.isArray(t)?t:null},t.prototype.createHeaderCell=function(e){var t=this.createTextCell(e?e.locTitle:null);return t.column=e,this.setHeaderCell(e,t),this.cssClasses.headerCell&&(t.className=this.cssClasses.headerCell),t},t.prototype.setHeaderCell=function(e,t){this.setHeaderCellWidth(e,t),this.setRequriedToHeaderCell(e,t)},t.prototype.setHeaderCellWidth=function(e,t){t.minWidth=null!=e?this.matrix.getColumnWidth(e):"",t.width=null!=e?e.width:this.matrix.getRowTitleWidth()},t.prototype.setRequriedToHeaderCell=function(e,t){e&&e.isRequired&&this.matrix.survey&&(t.requiredText=this.matrix.survey.requiredText)},t.prototype.createRemoveRowCell=function(e){var t=new I;return t.row=e,t.isRemoveRow=this.canRemoveRow(e),this.cssClasses.cell&&(t.className=this.cssClasses.cell),t},t.prototype.createTextCell=function(e){var t=new I;return t.locTitle=e,this.cssClasses.cell&&(t.className=this.cssClasses.cell),t},t}(s.Base),N=function(e){function t(t){var n=e.call(this,t)||this;return n.isRowChanging=!1,n.lockResetRenderedTable=!1,n.isDoingonAnyValueChanged=!1,n.createItemValues("choices"),n.createLocalizableString("optionsCaption",n),n.createLocalizableString("keyDuplicationError",n),n.detailPanelValue=n.createNewDetailPanel(),n.detailPanel.selectedElementInDesign=n,n.detailPanel.renderWidth="100%",n.registerFunctionOnPropertyValueChanged("columns",(function(e){n.updateColumnsIndexes(e),n.generatedTotalRow=null,n.clearRowsAndResetRenderedTable()})),n.registerFunctionOnPropertyValueChanged("cellType",(function(){n.updateColumnsCellType(),n.clearRowsAndResetRenderedTable()})),n.registerFunctionOnPropertiesValueChanged(["optionsCaption","columnColCount","rowTitleWidth","choices"],(function(){n.clearRowsAndResetRenderedTable()})),n.registerFunctionOnPropertiesValueChanged(["columnLayout","addRowLocation","hideColumnsIfEmpty","showHeader","minRowCount","isReadOnly","rowCount","hasFooter","detailPanelMode"],(function(){n.resetRenderedTable()})),n}return b(t,e),Object.defineProperty(t,"defaultCellType",{get:function(){return m.settings.matrixDefaultCellType},set:function(e){m.settings.matrixDefaultCellType=e},enumerable:!1,configurable:!0}),t.addDefaultColumns=function(e){for(var t=d.QuestionFactory.DefaultColums,n=0;n<t.length;n++)e.addColumn(t[n])},t.prototype.createColumnValues=function(){var e=this;return this.createNewArray("columns",(function(t){t.colOwner=e}),(function(e){e.colOwner=null}))},t.prototype.getType=function(){return"matrixdropdownbase"},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.clearGeneratedRows()},Object.defineProperty(t.prototype,"hasSingleInput",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRowsDynamic",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.itemValuePropertyChanged=function(t,n,r,i){e.prototype.itemValuePropertyChanged.call(this,t,n,r,i),"choices"===t.ownerPropertyName&&this.clearRowsAndResetRenderedTable()},Object.defineProperty(t.prototype,"columnLayout",{get:function(){return this.getPropertyValue("columnLayout")},set:function(e){this.setPropertyValue("columnLayout",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnsLocation",{get:function(){return this.columnLayout},set:function(e){this.columnLayout=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isColumnLayoutHorizontal",{get:function(){return"vertical"!=this.columnLayout},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"detailPanelMode",{get:function(){return this.getPropertyValue("detailPanelMode","none")},set:function(e){this.setPropertyValue("detailPanelMode",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"detailPanel",{get:function(){return this.detailPanelValue},enumerable:!1,configurable:!0}),t.prototype.getPanel=function(){return this.detailPanel},Object.defineProperty(t.prototype,"detailElements",{get:function(){return this.detailPanel.elements},enumerable:!1,configurable:!0}),t.prototype.createNewDetailPanel=function(){return i.Serializer.createClass("panel")},Object.defineProperty(t.prototype,"hasRowText",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getFooterText=function(){return null},Object.defineProperty(t.prototype,"canAddRow",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canRemoveRows",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.canRemoveRow=function(e){return!0},t.prototype.onRowsChanged=function(){this.resetRenderedTable(),e.prototype.onRowsChanged.call(this)},t.prototype.onStartRowAddingRemoving=function(){this.lockResetRenderedTable=!0},t.prototype.onEndRowAdding=function(){this.lockResetRenderedTable=!1,this.renderedTable&&(this.renderedTable.isRequireReset()?this.resetRenderedTable():this.renderedTable.onAddedRow())},t.prototype.onEndRowRemoving=function(e){this.lockResetRenderedTable=!1,this.renderedTable.isRequireReset()?this.resetRenderedTable():e&&this.renderedTable.onRemovedRow(e)},Object.defineProperty(t.prototype,"renderedTableValue",{get:function(){return this.getPropertyValue("renderedTable",null)},set:function(e){this.setPropertyValue("renderedTable",e)},enumerable:!1,configurable:!0}),t.prototype.clearRowsAndResetRenderedTable=function(){this.clearGeneratedRows(),this.resetRenderedTable(),this.fireCallback(this.columnsChangedCallback)},t.prototype.resetRenderedTable=function(){this.lockResetRenderedTable||this.isLoadingFromJson||(this.renderedTableValue=null,this.fireCallback(this.onRenderedTableResetCallback))},t.prototype.clearGeneratedRows=function(){if(this.generatedVisibleRows){for(var t=0;t<this.generatedVisibleRows.length;t++)this.generatedVisibleRows[t].dispose();e.prototype.clearGeneratedRows.call(this)}},Object.defineProperty(t.prototype,"renderedTable",{get:function(){return this.renderedTableValue||(this.renderedTableValue=this.createRenderedTable(),this.onRenderedTableCreatedCallback&&this.onRenderedTableCreatedCallback(this.renderedTableValue)),this.renderedTableValue},enumerable:!1,configurable:!0}),t.prototype.createRenderedTable=function(){return new O(this)},t.prototype.onMatrixRowCreated=function(e){if(this.survey)for(var t={rowValue:e.value,row:e,column:null,columnName:null,cell:null,cellQuestion:null,value:null},n=0;n<this.visibleColumns.length;n++){t.column=this.visibleColumns[n],t.columnName=t.column.name;var r=e.cells[n];t.cell=r,t.cellQuestion=r.question,t.value=r.value,this.onCellCreatedCallback&&this.onCellCreatedCallback(t),this.survey.matrixCellCreated(this,t)}},Object.defineProperty(t.prototype,"cellType",{get:function(){return this.getPropertyValue("cellType",m.settings.matrixDefaultCellType)},set:function(e){e=e.toLowerCase(),this.setPropertyValue("cellType",e)},enumerable:!1,configurable:!0}),t.prototype.updateColumnsCellType=function(){for(var e=0;e<this.columns.length;e++)this.columns[e].defaultCellTypeChanged()},t.prototype.updateColumnsIndexes=function(e){for(var t=0;t<e.length;t++)e[t].setIndex(t)},Object.defineProperty(t.prototype,"columnColCount",{get:function(){return this.getPropertyValue("columnColCount",0)},set:function(e){e<0||e>4||this.setPropertyValue("columnColCount",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"columnMinWidth",{get:function(){return this.getPropertyValue("columnMinWidth","")},set:function(e){this.setPropertyValue("columnMinWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"horizontalScroll",{get:function(){return this.getPropertyValue("horizontalScroll",!1)},set:function(e){this.setPropertyValue("horizontalScroll",e)},enumerable:!1,configurable:!0}),t.prototype.getRequiredText=function(){return this.survey?this.survey.requiredText:""},t.prototype.onColumnPropertyChanged=function(e,t,n){if(this.updateHasFooter(),this.generatedVisibleRows){for(var r=0;r<this.generatedVisibleRows.length;r++)this.generatedVisibleRows[r].updateCellQuestionOnColumnChanged(e,t,n);this.generatedTotalRow&&this.generatedTotalRow.updateCellQuestionOnColumnChanged(e,t,n),this.onColumnsChanged(),"isRequired"==t&&this.resetRenderedTable(),e.isShowInMultipleColumns&&this.onShowInMultipleColumnsChanged(e)}},t.prototype.onColumnItemValuePropertyChanged=function(e,t,n,r,i,o){if(this.generatedVisibleRows)for(var a=0;a<this.generatedVisibleRows.length;a++)this.generatedVisibleRows[a].updateCellQuestionOnColumnItemValueChanged(e,t,n,r,i,o)},t.prototype.onShowInMultipleColumnsChanged=function(e){this.clearGeneratedRows(),this.resetRenderedTable()},t.prototype.onColumnCellTypeChanged=function(e){this.clearGeneratedRows(),this.resetRenderedTable()},t.prototype.getRowTitleWidth=function(){return""},Object.defineProperty(t.prototype,"hasFooter",{get:function(){return this.getPropertyValue("hasFooter",!1)},enumerable:!1,configurable:!0}),t.prototype.getAddRowLocation=function(){return"default"},t.prototype.getShowColumnsIfEmpty=function(){return!1},t.prototype.updateShowTableAndAddRow=function(){this.renderedTable&&this.renderedTable.updateShowTableAndAddRow()},t.prototype.updateHasFooter=function(){this.setPropertyValue("hasFooter",this.hasTotal)},Object.defineProperty(t.prototype,"hasTotal",{get:function(){for(var e=0;e<this.columns.length;e++)if(this.columns[e].hasTotal)return!0;return!1},enumerable:!1,configurable:!0}),t.prototype.getCellType=function(){return this.cellType},t.prototype.getConditionJson=function(t,n){if(void 0===t&&(t=null),void 0===n&&(n=null),!n)return e.prototype.getConditionJson.call(this);for(var r="",i=n.length-1;i>=0&&"."!=n[i];i--)r=n[i]+r;var o=this.getColumnByName(r);if(!o)return null;var a=o.createCellQuestion(null);return a?a.getConditionJson(t):null},t.prototype.clearIncorrectValues=function(){var e=this.visibleRows;if(e)for(var t=0;t<e.length;t++)e[t].clearIncorrectValues(this.getRowValue(t))},t.prototype.clearErrors=function(){if(e.prototype.clearErrors.call(this),this.generatedVisibleRows)for(var t=0;t<this.generatedVisibleRows.length;t++)for(var n=this.generatedVisibleRows[t],r=0;r<n.cells.length;r++)n.cells[r].question.clearErrors()},t.prototype.runCondition=function(t,n){e.prototype.runCondition.call(this,t,n);var r,i=0;do{r=a.Helpers.getUnbindValue(this.totalValue),this.runCellsCondition(t,n),this.runTotalsCondition(t,n),i++}while(!a.Helpers.isTwoValueEquals(r,this.totalValue)&&i<3)},t.prototype.shouldRunColumnExpression=function(){return!1},t.prototype.runCellsCondition=function(e,t){if(this.generatedVisibleRows){for(var n=this.getRowConditionValues(e),r=this.generatedVisibleRows,i=0;i<r.length;i++)r[i].runCondition(n,t);this.checkColumnsVisibility()}},t.prototype.checkColumnsVisibility=function(){for(var e=!1,t=0;t<this.visibleColumns.length;t++)this.visibleColumns[t].visibleIf&&(e=this.isColumnVisibilityChanged(this.visibleColumns[t])||e);e&&this.resetRenderedTable()},t.prototype.isColumnVisibilityChanged=function(e){for(var t=e.hasVisibleCell,n=!1,r=this.generatedVisibleRows,i=0;i<r.length;i++){var o=r[i].cells[e.index];if(o&&o.question&&o.question.isVisible){n=!0;break}}return t!=n&&(e.hasVisibleCell=n),t!=n},t.prototype.runTotalsCondition=function(e,t){this.generatedTotalRow&&this.generatedTotalRow.runCondition(this.getRowConditionValues(e),t)},t.prototype.getRowConditionValues=function(e){var t=e;t||(t={});var n={};return this.isValueEmpty(this.totalValue)||(n=JSON.parse(JSON.stringify(this.totalValue))),t.row={},t.totalRow=n,t},t.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this);for(var t=this.columns,n=0;n<t.length;n++)t[n].locStrsChanged();var r=this.generatedVisibleRows;if(r){for(n=0;n<r.length;n++)r[n].locStrsChanged();this.generatedTotalRow&&this.generatedTotalRow.locStrsChanged()}},t.prototype.getColumnByName=function(e){for(var t=0;t<this.columns.length;t++)if(this.columns[t].name==e)return this.columns[t];return null},t.prototype.getColumnName=function(e){return this.getColumnByName(e)},t.prototype.getColumnWidth=function(e){return e.minWidth?e.minWidth:this.columnMinWidth},Object.defineProperty(t.prototype,"choices",{get:function(){return this.getPropertyValue("choices")},set:function(e){this.setPropertyValue("choices",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"optionsCaption",{get:function(){return this.getLocalizableStringText("optionsCaption",p.surveyLocalization.getString("optionsCaption"))},set:function(e){this.setLocalizableStringText("optionsCaption",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locOptionsCaption",{get:function(){return this.getLocalizableString("optionsCaption")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keyDuplicationError",{get:function(){return this.getLocalizableStringText("keyDuplicationError",p.surveyLocalization.getString("keyDuplicationError"))},set:function(e){this.setLocalizableStringText("keyDuplicationError",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locKeyDuplicationError",{get:function(){return this.getLocalizableString("keyDuplicationError")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storeOthersAsComment",{get:function(){return!!this.survey&&this.survey.storeOthersAsComment},enumerable:!1,configurable:!0}),t.prototype.addColumn=function(e,t){void 0===t&&(t=null);var n=new _(e,t);return this.columns.push(n),n},t.prototype.getVisibleRows=function(){var e=this;return this.isLoadingFromJson?null:(this.generatedVisibleRows||(this.generatedVisibleRows=this.generateRows(),this.generatedVisibleRows.forEach((function(t){return e.onMatrixRowCreated(t)})),this.data&&this.runCellsCondition(this.data.getFilteredValues(),this.data.getFilteredProperties()),this.updateValueOnRowsGeneration(this.generatedVisibleRows),this.updateIsAnswered()),this.generatedVisibleRows)},t.prototype.updateValueOnRowsGeneration=function(e){for(var t=this.createNewValue(!0),n=this.createNewValue(),r=0;r<e.length;r++){var i=e[r];if(!i.editingObj){var o=this.getRowValue(r),a=i.value;this.isTwoValueEquals(o,a)||(n=this.getNewValueOnRowChanged(i,"",a,!1,n).value)}}this.isTwoValueEquals(t,n)||(this.isRowChanging=!0,this.setNewValue(n),this.isRowChanging=!1)},Object.defineProperty(t.prototype,"totalValue",{get:function(){return this.hasTotal&&this.visibleTotalRow?this.visibleTotalRow.value:{}},enumerable:!1,configurable:!0}),t.prototype.getVisibleTotalRow=function(){if(this.isLoadingFromJson)return null;if(this.hasTotal){if(!this.generatedTotalRow&&(this.generatedTotalRow=this.generateTotalRow(),this.data)){var e={survey:this.survey};this.runTotalsCondition(this.data.getAllValues(),e)}}else this.generatedTotalRow=null;return this.generatedTotalRow},Object.defineProperty(t.prototype,"visibleTotalRow",{get:function(){return this.getVisibleTotalRow()},enumerable:!1,configurable:!0}),t.prototype.onSurveyLoad=function(){e.prototype.onSurveyLoad.call(this),this.updateColumnsIndexes(this.columns),this.clearGeneratedRows(),this.generatedTotalRow=null,this.updateHasFooter()},t.prototype.getRowValue=function(e){if(e<0)return null;var t=this.visibleRows;if(e>=t.length)return null;var n=this.createNewValue();return this.getRowValueCore(t[e],n)},t.prototype.checkIfValueInRowDuplicated=function(e,t){if(!this.generatedVisibleRows)return!1;for(var n=!1,r=0;r<this.generatedVisibleRows.length;r++){var i=this.generatedVisibleRows[r];if(e!==i&&i.getValue(t.name)==t.value){n=!0;break}}return n?this.addDuplicationError(t):t.clearErrors(),n},t.prototype.setRowValue=function(e,t){if(e<0)return null;var n=this.visibleRows;if(e>=n.length)return null;n[e].value=t,this.onRowChanged(n[e],"",t,!1)},t.prototype.generateRows=function(){return null},t.prototype.generateTotalRow=function(){return new T(this)},t.prototype.createNewValue=function(e){void 0===e&&(e=!1);var t=this.value?this.createValueCopy():{};return e&&this.isMatrixValueEmpty(t)?null:t},t.prototype.getRowValueCore=function(e,t,n){void 0===n&&(n=!1);var r=t&&t[e.rowName]?t[e.rowName]:null;return!r&&n&&(r={},t&&(t[e.rowName]=r)),r},t.prototype.getRowObj=function(e){var t=this.getRowValueCore(e,this.value);return t&&t.getType?t:null},t.prototype.getRowDisplayValue=function(e,t,n){if(!n)return n;if(t.editingObj)return n;for(var r=Object.keys(n),i=0;i<r.length;i++){var o=r[i],a=t.getQuestionByName(o);if(a||(a=this.getSharedQuestionByName(o,t)),a){var s=a.getDisplayValue(e,n[o]);e&&a.title&&a.title!==o?(n[a.title]=s,delete n[o]):n[o]=s}}return n},t.prototype.getPlainData=function(t){var n=this;void 0===t&&(t={includeEmpty:!0});var r=e.prototype.getPlainData.call(this,t);return r&&(r.isNode=!0,r.data=this.visibleRows.map((function(e){var r={name:e.rowName,title:e.text,value:e.value,displayValue:n.getRowDisplayValue(!1,e,e.value),getString:function(e){return"object"==typeof e?JSON.stringify(e):e},isNode:!0,data:e.cells.map((function(e){return e.question.getPlainData(t)})).filter((function(e){return!!e}))};return(t.calculations||[]).forEach((function(t){r[t.propertyName]=e[t.propertyName]})),r}))),r},t.prototype.getProgressInfo=function(){return l.SurveyElement.getProgressInfoByElements(this.getCellQuestions(),this.isRequired)},t.prototype.getCellQuestions=function(){var e=this.visibleRows;if(!e)return[];for(var t=[],n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.cells.length;i++)t.push(r.cells[i].question);return t},t.prototype.onBeforeValueChanged=function(e){},t.prototype.onSetQuestionValue=function(){if(!this.isRowChanging&&(this.onBeforeValueChanged(this.value),this.generatedVisibleRows&&0!=this.generatedVisibleRows.length)){this.isRowChanging=!0;for(var e=this.createNewValue(),t=0;t<this.generatedVisibleRows.length;t++){var n=this.generatedVisibleRows[t];this.generatedVisibleRows[t].value=this.getRowValueCore(n,e)}this.isRowChanging=!1}},t.prototype.setQuestionValue=function(t){e.prototype.setQuestionValue.call(this,t,!1),this.onSetQuestionValue(),this.updateIsAnswered()},t.prototype.supportGoNextPageAutomatic=function(){var e=this.generatedVisibleRows;if(e||(e=this.visibleRows),!e)return!0;for(var t=0;t<e.length;t++){var n=this.generatedVisibleRows[t].cells;if(n)for(var r=0;r<n.length;r++){var i=n[r].question;if(i&&(!i.supportGoNextPageAutomatic()||!i.value))return!1}}return!0},t.prototype.getContainsErrors=function(){return e.prototype.getContainsErrors.call(this)||this.checkForAnswersOrErrors((function(e){return e.containsErrors}),!1)},t.prototype.getIsAnswered=function(){return e.prototype.getIsAnswered.call(this)&&this.checkForAnswersOrErrors((function(e){return e.isAnswered}),!0)},t.prototype.checkForAnswersOrErrors=function(e,t){void 0===t&&(t=!1);var n=this.generatedVisibleRows;if(!n)return!1;for(var r=0;r<n.length;r++){var i=n[r].cells;if(i)for(var o=0;o<i.length;o++)if(i[o]){var a=i[o].question;if(a&&a.isVisible)if(e(a)){if(!t)return!0}else if(t)return!1}}return!!t},t.prototype.hasErrors=function(t,n){void 0===t&&(t=!0),void 0===n&&(n=null);var r=this.hasErrorInRows(t,n),i=this.isValueDuplicated();return e.prototype.hasErrors.call(this,t,n)||r||i},t.prototype.getIsRunningValidators=function(){if(e.prototype.getIsRunningValidators.call(this))return!0;if(!this.generatedVisibleRows)return!1;for(var t=0;t<this.generatedVisibleRows.length;t++){var n=this.generatedVisibleRows[t].cells;if(n)for(var r=0;r<n.length;r++)if(n[r]){var i=n[r].question;if(i&&i.isRunningValidators)return!0}}return!1},t.prototype.getAllErrors=function(){var t=e.prototype.getAllErrors.call(this),n=this.generatedVisibleRows;if(null===n)return t;for(var r=0;r<n.length;r++)for(var i=n[r],o=0;o<i.cells.length;o++){var a=i.cells[o].question.getAllErrors();a&&a.length>0&&(t=t.concat(a))}return t},t.prototype.hasErrorInRows=function(e,t){var n=this;if(!this.generatedVisibleRows)return!1;var r=!1;t||(t={}),t.isSingleDetailPanel="underRowSingle"===this.detailPanelMode;for(var i=0;i<this.generatedVisibleRows.length;i++)r=this.generatedVisibleRows[i].hasErrors(e,t,(function(){n.raiseOnCompletedAsyncValidators()}))||r;return r},t.prototype.isValueDuplicated=function(){if(!this.generatedVisibleRows)return!1;for(var e=this.getUniqueColumns(),t=!1,n=0;n<e.length;n++)t=this.isValueInColumnDuplicated(e[n])||t;return t},t.prototype.isValueInColumnDuplicated=function(e){for(var t=[],n=!1,r=0;r<this.generatedVisibleRows.length;r++)n=this.isValueDuplicatedInRow(this.generatedVisibleRows[r],e,t)||n;return n},t.prototype.getUniqueColumns=function(){for(var e=new Array,t=0;t<this.columns.length;t++)this.columns[t].isUnique&&e.push(this.columns[t]);return e},t.prototype.isValueDuplicatedInRow=function(e,t,n){var r=e.getQuestionByColumn(t);if(!r||r.isEmpty())return!1;for(var i=r.value,o=0;o<n.length;o++)if(i==n[o])return this.addDuplicationError(r),!0;return n.push(i),!1},t.prototype.addDuplicationError=function(e){e.addError(new g.KeyDuplicationError(this.keyDuplicationError,this))},t.prototype.getFirstInputElementId=function(){var t=this.getFirstCellQuestion(!1);return t?t.inputId:e.prototype.getFirstInputElementId.call(this)},t.prototype.getFirstErrorInputElementId=function(){var t=this.getFirstCellQuestion(!0);return t?t.inputId:e.prototype.getFirstErrorInputElementId.call(this)},t.prototype.getFirstCellQuestion=function(e){if(!this.generatedVisibleRows)return null;for(var t=0;t<this.generatedVisibleRows.length;t++)for(var n=this.generatedVisibleRows[t].cells,r=0;r<n.length;r++){if(!e)return n[r].question;if(n[r].question.currentErrorCount>0)return n[r].question}return null},t.prototype.onReadOnlyChanged=function(){if(e.prototype.onReadOnlyChanged.call(this),this.generateRows)for(var t=0;t<this.visibleRows.length;t++)this.visibleRows[t].onQuestionReadOnlyChanged(this.isReadOnly)},t.prototype.createQuestion=function(e,t){return this.createQuestionCore(e,t)},t.prototype.createQuestionCore=function(e,t){var n=t.createCellQuestion(e);return this.isReadOnly&&(n.readOnly=!0),n.setSurveyImpl(e),n.setParentQuestion(this),n},t.prototype.deleteRowValue=function(e,t){return e?(delete e[t.rowName],this.isObject(e)&&0==Object.keys(e).length?null:e):e},t.prototype.onAnyValueChanged=function(e){if(!this.isLoadingFromJson&&!this.isDoingonAnyValueChanged&&this.generatedVisibleRows){this.isDoingonAnyValueChanged=!0;for(var t=this.visibleRows,n=0;n<t.length;n++)t[n].onAnyValueChanged(e);var r=this.visibleTotalRow;r&&r.onAnyValueChanged(e),this.isDoingonAnyValueChanged=!1}},t.prototype.isObject=function(e){return null!==e&&"object"==typeof e},t.prototype.getOnCellValueChangedOptions=function(e,t,n){return{row:e,columnName:t,rowValue:n,value:n?n[t]:null,getCellQuestion:function(t){for(var n=0;n<e.cells.length;n++){var r=e.cells[n].column;if(r&&r.name===t)return e.cells[n].question}return null}}},t.prototype.onCellValueChanged=function(e,t,n){if(this.survey){var r=this.getOnCellValueChangedOptions(e,t,n);this.onCellValueChangedCallback&&this.onCellValueChangedCallback(r),this.survey.matrixCellValueChanged(this,r)}},t.prototype.validateCell=function(e,t,n){if(this.survey){var r=this.getOnCellValueChangedOptions(e,t,n);return this.survey.matrixCellValidate(this,r)}},Object.defineProperty(t.prototype,"isValidateOnValueChanging",{get:function(){return!!this.survey&&this.survey.isValidateOnValueChanging},enumerable:!1,configurable:!0}),t.prototype.onRowChanging=function(e,t,n){if(!this.survey)return n?n[t]:null;var r=this.getOnCellValueChangedOptions(e,t,n),i=this.getRowValueCore(e,this.createNewValue(),!0);return r.oldValue=i?i[t]:null,this.survey.matrixCellValueChanging(this,r),r.value},t.prototype.onRowChanged=function(e,t,n,r){var i=t?this.getRowObj(e):null;if(i){var o=null;n&&!r&&(o=n[t]),this.isRowChanging=!0,i[t]=o,this.isRowChanging=!1,this.onCellValueChanged(e,t,i)}else{var a=this.createNewValue(!0),s=this.getNewValueOnRowChanged(e,t,n,r,this.createNewValue());if(this.isTwoValueEquals(a,s.value))return;this.isRowChanging=!0,this.setNewValue(s.value),this.isRowChanging=!1,t&&this.onCellValueChanged(e,t,s.rowValue)}},t.prototype.getNewValueOnRowChanged=function(e,t,n,r,i){var o=this.getRowValueCore(e,i,!0);r&&delete o[t];for(var a=0;a<e.cells.length;a++)delete o[s=e.cells[a].question.getValueName()];if(n)for(var s in n=JSON.parse(JSON.stringify(n)))this.isValueEmpty(n[s])||(o[s]=n[s]);return this.isObject(o)&&0===Object.keys(o).length&&(i=this.deleteRowValue(i,e)),{value:i,rowValue:o}},t.prototype.getRowIndex=function(e){return this.generatedVisibleRows?this.visibleRows.indexOf(e):-1},t.prototype.getElementsInDesign=function(t){return void 0===t&&(t=!1),"none"==this.detailPanelMode?e.prototype.getElementsInDesign.call(this,t):t?[this.detailPanel]:this.detailElements},t.prototype.hasDetailPanel=function(e){return"none"!=this.detailPanelMode&&(!!this.isDesignMode||(this.onHasDetailPanelCallback?this.onHasDetailPanelCallback(e):this.detailElements.length>0))},t.prototype.getIsDetailPanelShowing=function(e){if("none"==this.detailPanelMode)return!1;if(this.isDesignMode){var t=0==this.visibleRows.indexOf(e);return t&&(e.detailPanel||e.showDetailPanel()),t}return this.getPropertyValue("isRowShowing"+e.id,!1)},t.prototype.setIsDetailPanelShowing=function(e,t){if(t!=this.getIsDetailPanelShowing(e)&&(this.setPropertyValue("isRowShowing"+e.id,t),this.updateDetailPanelButtonCss(e),this.renderedTable&&this.renderedTable.onDetailPanelChangeVisibility(e,t),t&&"underRowSingle"===this.detailPanelMode))for(var n=this.visibleRows,r=0;r<n.length;r++)n[r].id!==e.id&&n[r].isDetailPanelShowing&&n[r].hideDetailPanel()},t.prototype.getDetailPanelButtonCss=function(e){var t;return(t=this.getPropertyValue("detailButtonCss"+e.id))?t:(t=this.cssClasses.detailButton)||""},t.prototype.getDetailPanelIconCss=function(e){var t;return(t=this.getPropertyValue("detailIconCss"+e.id))?t:(t=this.cssClasses.detailIcon)||""},t.prototype.updateDetailPanelButtonCss=function(e){var t=this.cssClasses,n=t.detailIcon;n||(n="");var r=t.detailButton;r||(r=""),this.getIsDetailPanelShowing(e)&&(t.detailIconExpanded&&(n+=" "+t.detailIconExpanded),t.detailButtonExpanded&&(r+=" "+t.detailButtonExpanded)),this.setPropertyValue("detailIconCss"+e.id,n),this.setPropertyValue("detailButtonCss"+e.id,r)},t.prototype.createRowDetailPanel=function(e){if(this.isDesignMode)return this.detailPanel;var t=this.createNewDetailPanel(),n=this.detailPanel.toJSON();return(new i.JsonObject).toObject(n,t),t.renderWidth="100%",t.updateCustomWidgets(),this.onCreateDetailPanelCallback&&this.onCreateDetailPanelCallback(e,t),t},t.prototype.getSharedQuestionByName=function(e,t){if(!this.survey||!this.valueName)return null;var n=this.getRowIndex(t);return n<0?null:this.survey.getQuestionByValueNameFromArray(this.valueName,e,n)},t.prototype.onTotalValueChanged=function(){!this.data||!this.visibleTotalRow||this.isLoadingFromJson||this.isSett||this.isReadOnly||this.data.setValue(this.getValueName()+m.settings.matrixTotalValuePostFix,this.totalValue,!1)},t.prototype.getQuestionFromArray=function(e,t){return t>=this.visibleRows.length?null:this.visibleRows[t].getQuestionByName(e)},t.prototype.isMatrixValueEmpty=function(e){if(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)if(this.isObject(e[t])&&Object.keys(e[t]).length>0)return!1;return!0}return 0==Object.keys(e).length}},Object.defineProperty(t.prototype,"SurveyModel",{get:function(){return this.survey},enumerable:!1,configurable:!0}),t.prototype.getCellTemplateData=function(e){return this.SurveyModel.getMatrixCellTemplateData(e)},t.prototype.getCellWrapperComponentName=function(e){return this.SurveyModel.getElementWrapperComponentName(e,"cell")},t.prototype.getCellWrapperComponentData=function(e){return this.SurveyModel.getElementWrapperComponentData(e,"cell")},t.prototype.getColumnHeaderWrapperComponentName=function(e){return this.SurveyModel.getElementWrapperComponentName(e,"column-header")},t.prototype.getColumnHeaderWrapperComponentData=function(e){return this.SurveyModel.getElementWrapperComponentData(e,"column-header")},t.prototype.getRowHeaderWrapperComponentName=function(e){return this.SurveyModel.getElementWrapperComponentName(e,"row-header")},t.prototype.getRowHeaderWrapperComponentData=function(e){return this.SurveyModel.getElementWrapperComponentData(e,"row-header")},t}(o.QuestionMatrixBaseModel);i.Serializer.addClass("matrixdropdowncolumn",[{name:"!name",isUnique:!0},{name:"title",serializationProperty:"locTitle"},{name:"cellType",default:"default",choices:function(){var e=_.getColumnTypes();return e.splice(0,0,"default"),e}},{name:"colCount",default:-1,choices:[-1,0,1,2,3,4]},"isRequired:boolean","isUnique:boolean",{name:"requiredErrorText:text",serializationProperty:"locRequiredErrorText"},"readOnly:boolean","minWidth","width","visibleIf:condition","enableIf:condition","requiredIf:condition",{name:"showInMultipleColumns:boolean",dependsOn:"cellType",visibleIf:function(e){return!!e&&e.isSupportMultipleColumns}},{name:"validators:validators",baseClassName:"surveyvalidator",classNamePart:"validator"},{name:"totalType",default:"none",choices:["none","sum","count","min","max","avg"]},"totalExpression:expression",{name:"totalFormat",serializationProperty:"locTotalFormat"},{name:"totalDisplayStyle",default:"none",choices:["none","decimal","currency","percent"]},{name:"totalCurrency",choices:function(){return Object(h.getCurrecyCodes)()},default:"USD"},{name:"totalMaximumFractionDigits:number",default:-1},{name:"totalMinimumFractionDigits:number",default:-1},{name:"renderAs",default:"default",visible:!1}],(function(){return new _("")})),i.Serializer.addClass("matrixdropdownbase",[{name:"columns:matrixdropdowncolumns",className:"matrixdropdowncolumn"},{name:"columnLayout",alternativeName:"columnsLocation",default:"horizontal",choices:["horizontal","vertical"]},{name:"detailElements",visible:!1,isLightSerializable:!1},{name:"detailPanelMode",choices:["none","underRow","underRowSingle"],default:"none"},"horizontalScroll:boolean",{name:"choices:itemvalue[]"},{name:"optionsCaption",serializationProperty:"locOptionsCaption"},{name:"keyDuplicationError",serializationProperty:"locKeyDuplicationError"},{name:"cellType",default:"dropdown",choices:function(){return _.getColumnTypes()}},{name:"columnColCount",default:0,choices:[0,1,2,3,4]},"columnMinWidth"],(function(){return new N("")}),"matrixbase")},"./src/question_matrixdynamic.ts":
/*!***************************************!*\
  !*** ./src/question_matrixdynamic.ts ***!
  \***************************************/
/*! exports provided: MatrixDynamicRowModel, QuestionMatrixDynamicModel */function(e,t,n){"use strict";n.r(t),n.d(t,"MatrixDynamicRowModel",(function(){return g})),n.d(t,"QuestionMatrixDynamicModel",(function(){return y}));var r,i=n(/*! ./question_matrixdropdownbase */"./src/question_matrixdropdownbase.ts"),o=n(/*! ./jsonobject */"./src/jsonobject.ts"),a=n(/*! ./questionfactory */"./src/questionfactory.ts"),s=n(/*! ./surveyStrings */"./src/surveyStrings.ts"),l=n(/*! ./error */"./src/error.ts"),u=n(/*! ./helpers */"./src/helpers.ts"),c=n(/*! ./settings */"./src/settings.ts"),p=n(/*! ./utils/utils */"./src/utils/utils.ts"),d=n(/*! sortablejs */"./node_modules/sortablejs/modular/sortable.esm.js"),h=n(/*! ./actions/action */"./src/actions/action.ts"),f=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),m=d.default,g=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.index=t,i.buildCells(r),i}return f(t,e),Object.defineProperty(t.prototype,"rowName",{get:function(){return this.id},enumerable:!1,configurable:!0}),t}(i.MatrixDropdownRowModelBase),y=function(e){function t(t){var n=e.call(this,t)||this;return n.rowCounter=0,n.initialRowCount=2,n.setRowCountValueFromData=!1,n.moveRowByIndex=function(e,t){var r=n.createNewValue();if(r){var i=r[e];i&&(r.splice(e,1),r.splice(t,0,i),n.value=r)}},n.createLocalizableString("confirmDeleteText",n),n.createLocalizableString("addRowText",n).onGetTextCallback=function(e){return e||n.defaultAddRowText},n.createLocalizableString("removeRowText",n).onGetTextCallback=function(e){return e||s.surveyLocalization.getString("removeRow")},n.createLocalizableString("emptyRowsText",n).onGetTextCallback=function(e){return e||s.surveyLocalization.getString("emptyRowsText")},n.registerFunctionOnPropertiesValueChanged(["hideColumnsIfEmpty","allowAddRows"],(function(){n.updateShowTableAndAddRow()})),n.registerFunctionOnPropertyValueChanged("allowRowsDragAndDrop",(function(){n.clearRowsAndResetRenderedTable()})),n}return f(t,e),t.prototype.getType=function(){return"matrixdynamic"},t.prototype.afterRenderQuestionElement=function(t){t&&this.allowRowsDragAndDrop&&this.initSortable(t.querySelector("tbody")),e.prototype.afterRenderQuestionElement.call(this,t)},t.prototype.beforeDestroyQuestionElement=function(t){this.sortableInst&&this.sortableInst.destroy(),e.prototype.beforeDestroyQuestionElement.call(this,t)},Object.defineProperty(t.prototype,"isRowsDynamic",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"confirmDelete",{get:function(){return this.getPropertyValue("confirmDelete",!1)},set:function(e){this.setPropertyValue("confirmDelete",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keyName",{get:function(){return this.getPropertyValue("keyName","")},set:function(e){this.setPropertyValue("keyName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultRowValue",{get:function(){return this.getPropertyValue("defaultRowValue")},set:function(e){this.setPropertyValue("defaultRowValue",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultValueFromLastRow",{get:function(){return this.getPropertyValue("defaultValueFromLastRow",!1)},set:function(e){this.setPropertyValue("defaultValueFromLastRow",e)},enumerable:!1,configurable:!0}),t.prototype.isDefaultValueEmpty=function(){return e.prototype.isDefaultValueEmpty.call(this)&&this.isValueEmpty(this.defaultRowValue)},t.prototype.valueFromData=function(t){if(this.minRowCount<1)return e.prototype.valueFromData.call(this,t);Array.isArray(t)||(t=[]);for(var n=t.length;n<this.minRowCount;n++)t.push({});return t},t.prototype.setDefaultValue=function(){if(!this.isValueEmpty(this.defaultRowValue)&&this.isValueEmpty(this.defaultValue)){if(this.isEmpty()&&0!=this.rowCount){for(var t=[],n=0;n<this.rowCount;n++)t.push(this.defaultRowValue);this.value=t}}else e.prototype.setDefaultValue.call(this)},Object.defineProperty(t.prototype,"rowCount",{get:function(){return this.rowCountValue},set:function(e){if(!(e<0||e>c.settings.matrixMaximumRowCount)){this.setRowCountValueFromData=!1;var t=this.rowCountValue;if(this.rowCountValue=e,this.value&&this.value.length>e){var n=this.value;n.splice(e),this.value=n}if(this.isLoadingFromJson)this.initialRowCount=e;else{if(this.generatedVisibleRows||0==t){this.generatedVisibleRows||(this.generatedVisibleRows=[]),this.generatedVisibleRows.splice(e);for(var r=t;r<e;r++){var i=this.createMatrixRow(this.getValueForNewRow());this.generatedVisibleRows.push(i),this.onMatrixRowCreated(i)}}this.onRowsChanged()}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowRowsDragAndDrop",{get:function(){return this.getPropertyValue("allowRowsDragAndDrop")},set:function(e){this.setPropertyValue("allowRowsDragAndDrop",e)},enumerable:!1,configurable:!0}),t.prototype.initSortable=function(e){if(e&&!this.isReadOnly){var t=this;t.domNode=e,t.sortableInst=new m(e,{animation:100,forceFallback:!0,delay:200,delayOnTouchOnly:!0,handle:"tr",onEnd:function(e){t.moveRowByIndex(e.oldDraggableIndex,e.newDraggableIndex)}})}},t.prototype.createRenderedTable=function(){return new v(this)},Object.defineProperty(t.prototype,"rowCountValue",{get:function(){return this.getPropertyValue("rowCount",2)},set:function(e){this.setPropertyValue("rowCount",e)},enumerable:!1,configurable:!0}),t.prototype.getValueForNewRow=function(){var e=null;return this.onGetValueForNewRowCallBack&&(e=this.onGetValueForNewRowCallBack(this)),e},Object.defineProperty(t.prototype,"minRowCount",{get:function(){return this.getPropertyValue("minRowCount",0)},set:function(e){e<0&&(e=0),this.setPropertyValue("minRowCount",e),e>this.maxRowCount&&(this.maxRowCount=e),this.rowCount<e&&(this.rowCount=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxRowCount",{get:function(){return this.getPropertyValue("maxRowCount",c.settings.matrixMaximumRowCount)},set:function(e){e<=0||(e>c.settings.matrixMaximumRowCount&&(e=c.settings.matrixMaximumRowCount),e!=this.maxRowCount&&(this.setPropertyValue("maxRowCount",e),e<this.minRowCount&&(this.minRowCount=e),this.rowCount>e&&(this.rowCount=e)))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowAddRows",{get:function(){return this.getPropertyValue("allowAddRows",!0)},set:function(e){this.setPropertyValue("allowAddRows",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowRemoveRows",{get:function(){return this.getPropertyValue("allowRemoveRows",!0)},set:function(e){this.setPropertyValue("allowRemoveRows",e),this.isLoadingFromJson||this.resetRenderedTable()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canAddRow",{get:function(){return this.allowAddRows&&!this.isReadOnly&&this.rowCount<this.maxRowCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canRemoveRows",{get:function(){var e=this.allowRemoveRows&&!this.isReadOnly&&this.rowCount>this.minRowCount;return this.canRemoveRowsCallback?this.canRemoveRowsCallback(e):e},enumerable:!1,configurable:!0}),t.prototype.canRemoveRow=function(e){return!this.survey||this.survey.matrixAllowRemoveRow(this,e.index,e)},t.prototype.addRowUI=function(){var e=this.rowCount;if(this.addRow(),e!==this.rowCount){var t=this.getQuestionToFocusOnAddingRow();t&&t.focus()}},t.prototype.getQuestionToFocusOnAddingRow=function(){for(var e=this.visibleRows[this.visibleRows.length-1],t=0;t<e.cells.length;t++){var n=e.cells[t].question;if(n&&n.isVisible&&!n.isReadOnly)return n}return null},t.prototype.addRow=function(){var e={question:this,canAddRow:this.canAddRow};this.survey&&this.survey.matrixBeforeRowAdded(e),e.canAddRow&&(this.onStartRowAddingRemoving(),this.addRowCore(),this.onEndRowAdding(),this.detailPanelShowOnAdding&&this.visibleRows.length>0&&this.visibleRows[this.visibleRows.length-1].showDetailPanel())},Object.defineProperty(t.prototype,"detailPanelShowOnAdding",{get:function(){return this.getPropertyValue("detailPanelShowOnAdding")},set:function(e){this.setPropertyValue("detailPanelShowOnAdding",e)},enumerable:!1,configurable:!0}),t.prototype.hasRowsAsItems=function(){return!1},t.prototype.unbindValue=function(){this.clearGeneratedRows(),this.clearPropertyValue("value"),this.rowCountValue=0,e.prototype.unbindValue.call(this)},t.prototype.isValueSurveyElement=function(t){return this.isEditingSurveyElement||e.prototype.isValueSurveyElement.call(this,t)},t.prototype.addRowCore=function(){var e=this.rowCount;this.rowCount=this.rowCount+1;var t=this.getDefaultRowValue(!0),n=null;if(this.isValueEmpty(t)||(n=this.createNewValue()).length==this.rowCount&&(n[n.length-1]=t,this.value=n),this.data){this.runCellsCondition(this.getDataFilteredValues(),this.getDataFilteredProperties());var r=this.visibleRows[this.rowCount-1];this.isValueEmpty(r.value)||(n||(n=this.createNewValue()),this.isValueSurveyElement(n)||u.Helpers.isTwoValueEquals(n[n.length-1],r.value)||(n[n.length-1]=r.value,this.value=n))}this.survey&&e+1==this.rowCount&&(this.survey.matrixRowAdded(this,this.visibleRows[this.visibleRows.length-1]),this.onRowsChanged())},t.prototype.getDefaultRowValue=function(e){for(var t=null,n=0;n<this.columns.length;n++){var r=this.columns[n].templateQuestion;r&&!this.isValueEmpty(r.getDefaultValue())&&((t=t||{})[this.columns[n].name]=r.getDefaultValue())}if(!this.isValueEmpty(this.defaultRowValue))for(var i in this.defaultRowValue)(t=t||{})[i]=this.defaultRowValue[i];if(e&&this.defaultValueFromLastRow){var o=this.value;if(o&&Array.isArray(o)&&o.length>=this.rowCount-1){var a=o[this.rowCount-2];for(var i in a)(t=t||{})[i]=a[i]}}return t},t.prototype.removeRowUI=function(e){if(e&&e.rowName){var t=this.visibleRows.indexOf(e);if(t<0)return;e=t}this.isRequireConfirmOnRowDelete(e)&&!Object(p.confirmAction)(this.confirmDeleteText)||this.removeRow(e)},t.prototype.isRequireConfirmOnRowDelete=function(e){if(!this.confirmDelete)return!1;if(e<0||e>=this.rowCount)return!1;var t=this.createNewValue();return!(this.isValueEmpty(t)||!Array.isArray(t)||e>=t.length||this.isValueEmpty(t[e]))},t.prototype.removeRow=function(e){if(this.canRemoveRows&&!(e<0||e>=this.rowCount)){var t=this.visibleRows&&e<this.visibleRows.length?this.visibleRows[e]:null;t&&this.survey&&!this.survey.matrixRowRemoving(this,e,t)||(this.onStartRowAddingRemoving(),this.removeRowCore(e),this.onEndRowRemoving(t))}},t.prototype.removeRowCore=function(e){var t=this.generatedVisibleRows?this.generatedVisibleRows[e]:null;if(this.generatedVisibleRows&&e<this.generatedVisibleRows.length&&this.generatedVisibleRows.splice(e,1),this.rowCountValue--,this.value){var n=[];(n=Array.isArray(this.value)&&e<this.value.length?this.createValueCopy():this.createNewValue()).splice(e,1),n=this.deleteRowValue(n,null),this.isRowChanging=!0,this.value=n,this.isRowChanging=!1}this.onRowsChanged(),this.survey&&this.survey.matrixRowRemoved(this,e,t)},Object.defineProperty(t.prototype,"confirmDeleteText",{get:function(){return this.getLocalizableStringText("confirmDeleteText",s.surveyLocalization.getString("confirmDelete"))},set:function(e){this.setLocalizableStringText("confirmDeleteText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locConfirmDeleteText",{get:function(){return this.getLocalizableString("confirmDeleteText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"addRowText",{get:function(){return this.getLocalizableStringText("addRowText",this.defaultAddRowText)},set:function(e){this.setLocalizableStringText("addRowText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locAddRowText",{get:function(){return this.getLocalizableString("addRowText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultAddRowText",{get:function(){return s.surveyLocalization.getString(this.isColumnLayoutHorizontal?"addRow":"addColumn")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"addRowLocation",{get:function(){return this.getPropertyValue("addRowLocation")},set:function(e){this.setPropertyValue("addRowLocation",e)},enumerable:!1,configurable:!0}),t.prototype.getAddRowLocation=function(){return this.addRowLocation},Object.defineProperty(t.prototype,"hideColumnsIfEmpty",{get:function(){return this.getPropertyValue("hideColumnsIfEmpty")},set:function(e){this.setPropertyValue("hideColumnsIfEmpty",e)},enumerable:!1,configurable:!0}),t.prototype.getShowColumnsIfEmpty=function(){return this.hideColumnsIfEmpty},Object.defineProperty(t.prototype,"removeRowText",{get:function(){return this.getLocalizableStringText("removeRowText",s.surveyLocalization.getString("removeRow"))},set:function(e){this.setLocalizableStringText("removeRowText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locRemoveRowText",{get:function(){return this.getLocalizableString("removeRowText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"emptyRowsText",{get:function(){return this.getLocalizableStringText("emptyRowsText",s.surveyLocalization.getString("emptyRowsText"))},set:function(e){this.setLocalizableStringText("emptyRowsText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locEmptyRowsText",{get:function(){return this.getLocalizableString("emptyRowsText")},enumerable:!1,configurable:!0}),t.prototype.getDisplayValueCore=function(e,t){if(!t||!Array.isArray(t))return t;for(var n=this.getUnbindValue(t),r=this.visibleRows,i=0;i<r.length&&i<n.length;i++){var o=n[i];o&&(n[i]=this.getRowDisplayValue(e,r[i],o))}return n},t.prototype.addConditionObjectsByContext=function(e,t){for(var n=!!t&&this.columns.indexOf(t)>-1,r=0;r<this.columns.length;r++){var i=this.columns[r];this.addColumnIntoaddConditionObjectsByContext(e,0,i),n&&i!=t&&this.addColumnIntoaddConditionObjectsByContext(e,-1,i);for(var o=1;o<Math.min(c.settings.matrixMaxRowCountInCondition,this.rowCount);o++)this.addColumnIntoaddConditionObjectsByContext(e,o,i)}},t.prototype.addColumnIntoaddConditionObjectsByContext=function(e,t,n){var r=t>-1?"["+t.toString()+"].":"row.";e.push({name:(t>-1?this.getValueName()+r:r)+n.name,text:(t>-1?this.processedTitle+r:r)+n.fullTitle,question:this})},t.prototype.supportGoNextPageAutomatic=function(){return!1},Object.defineProperty(t.prototype,"hasRowText",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.onCheckForErrors=function(t,n){e.prototype.onCheckForErrors.call(this,t,n),!n&&this.hasErrorInMinRows()&&t.push(new l.MinRowCountError(this.minRowCount,this))},t.prototype.hasErrorInMinRows=function(){if(this.minRowCount<=0||!this.isRequired||!this.generatedVisibleRows)return!1;for(var e=0,t=0;t<this.generatedVisibleRows.length;t++)this.generatedVisibleRows[t].isEmpty||e++;return e<this.minRowCount},t.prototype.getUniqueColumns=function(){var t=e.prototype.getUniqueColumns.call(this);if(this.keyName){var n=this.getColumnByName(this.keyName);n&&t.indexOf(n)<0&&t.push(n)}return t},t.prototype.generateRows=function(){var e=new Array;if(0===this.rowCount)return e;for(var t=this.createNewValue(),n=0;n<this.rowCount;n++)e.push(this.createMatrixRow(this.getRowValueByIndex(t,n)));return this.isValueEmpty(this.getDefaultRowValue(!1))||(this.value=t),e},t.prototype.createMatrixRow=function(e){return new g(this.rowCounter++,this,e)},t.prototype.onBeforeValueChanged=function(e){if(e&&Array.isArray(e)){var t=e.length;t!=this.rowCount&&(!this.setRowCountValueFromData&&t<this.initialRowCount||(this.setRowCountValueFromData=!0,this.rowCountValue=t,this.generatedVisibleRows&&(this.clearGeneratedRows(),this.generatedVisibleRows=this.visibleRows,this.onRowsChanged())))}},t.prototype.createNewValue=function(){var e=this.createValueCopy();e&&Array.isArray(e)||(e=[]),e.length>this.rowCount&&e.splice(this.rowCount);var t=this.getDefaultRowValue(!1);t=t||{};for(var n=e.length;n<this.rowCount;n++)e.push(this.getUnbindValue(t));return e},t.prototype.deleteRowValue=function(e,t){for(var n=!0,r=0;r<e.length;r++)if(this.isObject(e[r])&&Object.keys(e[r]).length>0){n=!1;break}return n?null:e},t.prototype.getRowValueByIndex=function(e,t){return Array.isArray(e)&&t>=0&&t<e.length?e[t]:null},t.prototype.getRowValueCore=function(e,t,n){if(void 0===n&&(n=!1),!this.generatedVisibleRows)return{};var r=this.getRowValueByIndex(t,this.generatedVisibleRows.indexOf(e));return!r&&n&&(r={}),r},t}(i.QuestionMatrixDropdownModelBase),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.setDefaultRowActions=function(t,n){e.prototype.setDefaultRowActions.call(this,t,n),this.matrix.allowRowsDragAndDrop&&n.push(new h.Action({id:"drag-row",location:"start",component:"sv-matrix-drag-drop-icon",data:{row:t,question:this.matrix}}))},t}(i.QuestionMatrixDropdownRenderedTable);o.Serializer.addClass("matrixdynamic",[{name:"rowsVisibleIf:condition",visible:!1},{name:"allowAddRows:boolean",default:!0},{name:"allowRemoveRows:boolean",default:!0},{name:"rowCount:number",default:2,minValue:0,isBindable:!0},{name:"minRowCount:number",default:0,minValue:0},{name:"maxRowCount:number",default:c.settings.matrixMaximumRowCount},{name:"keyName"},"defaultRowValue:rowvalue","defaultValueFromLastRow:boolean",{name:"confirmDelete:boolean"},{name:"confirmDeleteText",dependsOn:"confirmDelete",visibleIf:function(e){return!e||e.confirmDelete},serializationProperty:"locConfirmDeleteText"},{name:"addRowLocation",default:"default",choices:["default","top","bottom","topBottom"]},{name:"addRowText",serializationProperty:"locAddRowText"},{name:"removeRowText",serializationProperty:"locRemoveRowText"},"hideColumnsIfEmpty:boolean",{name:"emptyRowsText:text",serializationProperty:"locEmptyRowsText",dependsOn:"hideColumnsIfEmpty",visibleIf:function(e){return!e||e.hideColumnsIfEmpty}},{name:"detailPanelShowOnAdding:boolean",dependsOn:"detailPanelMode",visibleIf:function(e){return"none"!==e.detailPanelMode}},{name:"allowRowsDragAndDrop",default:!1,visible:!0,isSerializable:!1}],(function(){return new y("")}),"matrixdropdownbase"),a.QuestionFactory.Instance.registerQuestion("matrixdynamic",(function(e){var t=new y(e);return t.choices=[1,2,3,4,5],i.QuestionMatrixDropdownModelBase.addDefaultColumns(t),t}))},"./src/question_multipletext.ts":
/*!**************************************!*\
  !*** ./src/question_multipletext.ts ***!
  \**************************************/
/*! exports provided: MultipleTextItemModel, QuestionMultipleTextModel */function(e,t,n){"use strict";n.r(t),n.d(t,"MultipleTextItemModel",(function(){return d})),n.d(t,"QuestionMultipleTextModel",(function(){return h}));var r,i=n(/*! ./base */"./src/base.ts"),o=n(/*! ./survey-element */"./src/survey-element.ts"),a=n(/*! ./question */"./src/question.ts"),s=n(/*! ./question_text */"./src/question_text.ts"),l=n(/*! ./jsonobject */"./src/jsonobject.ts"),u=n(/*! ./questionfactory */"./src/questionfactory.ts"),c=n(/*! ./helpers */"./src/helpers.ts"),p=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),d=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var r=e.call(this)||this;return r.editorValue=r.createEditor(t),r.editor.questionTitleTemplateCallback=function(){return""},r.editor.titleLocation="left",n&&(r.title=n),r}return p(t,e),t.prototype.getType=function(){return"multipletextitem"},Object.defineProperty(t.prototype,"id",{get:function(){return this.editor.id},enumerable:!1,configurable:!0}),t.prototype.getOriginalObj=function(){return this.editor},Object.defineProperty(t.prototype,"name",{get:function(){return this.editor.name},set:function(e){this.editor.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"question",{get:function(){return this.data},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"editor",{get:function(){return this.editorValue},enumerable:!1,configurable:!0}),t.prototype.createEditor=function(e){return new s.QuestionTextModel(e)},t.prototype.addUsedLocales=function(t){e.prototype.addUsedLocales.call(this,t),this.editor.addUsedLocales(t)},t.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this),this.editor.locStrsChanged()},t.prototype.setData=function(e){this.data=e,e&&(this.editor.defaultValue=e.getItemDefaultValue(this.name),this.editor.setSurveyImpl(this),this.editor.parent=e)},Object.defineProperty(t.prototype,"isRequired",{get:function(){return this.editor.isRequired},set:function(e){this.editor.isRequired=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputType",{get:function(){return this.editor.inputType},set:function(e){this.editor.inputType=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.editor.title},set:function(e){this.editor.title=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTitle",{get:function(){return this.editor.locTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullTitle",{get:function(){return this.editor.fullTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLength",{get:function(){return this.editor.maxLength},set:function(e){this.editor.maxLength=e},enumerable:!1,configurable:!0}),t.prototype.getMaxLength=function(){var e=this.getSurvey();return c.Helpers.getMaxLength(this.maxLength,e?e.maxTextLength:-1)},Object.defineProperty(t.prototype,"placeHolder",{get:function(){return this.editor.placeHolder},set:function(e){this.editor.placeHolder=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPlaceHolder",{get:function(){return this.editor.locPlaceHolder},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiredErrorText",{get:function(){return this.editor.requiredErrorText},set:function(e){this.editor.requiredErrorText=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locRequiredErrorText",{get:function(){return this.editor.locRequiredErrorText},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.editor.size},set:function(e){this.editor.size=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"validators",{get:function(){return this.editor.validators},set:function(e){this.editor.validators=e},enumerable:!1,configurable:!0}),t.prototype.getValidators=function(){return this.validators},Object.defineProperty(t.prototype,"value",{get:function(){return this.data?this.data.getMultipleTextValue(this.name):null},set:function(e){null!=this.data&&this.data.setMultipleTextValue(this.name,e)},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return this.editor.isEmpty()},t.prototype.onValueChanged=function(e){this.valueChangedCallback&&this.valueChangedCallback(e)},t.prototype.getSurveyData=function(){return this},t.prototype.getSurvey=function(){return this.data?this.data.getSurvey():null},t.prototype.getTextProcessor=function(){return this.data?this.data.getTextProcessor():null},t.prototype.getValue=function(e){return this.data?this.data.getMultipleTextValue(e):null},t.prototype.setValue=function(e,t){this.data&&this.data.setMultipleTextValue(e,t)},t.prototype.getVariable=function(e){},t.prototype.setVariable=function(e,t){},t.prototype.getComment=function(e){return null},t.prototype.setComment=function(e,t){},t.prototype.getAllValues=function(){return this.data?this.data.getAllValues():this.value},t.prototype.getFilteredValues=function(){return this.getAllValues()},t.prototype.getFilteredProperties=function(){return{survey:this.getSurvey()}},t.prototype.getValidatorTitle=function(){return this.title},Object.defineProperty(t.prototype,"validatedValue",{get:function(){return this.value},set:function(e){this.value=e},enumerable:!1,configurable:!0}),t.prototype.getDataFilteredValues=function(){return this.getFilteredValues()},t.prototype.getDataFilteredProperties=function(){return this.getFilteredProperties()},t}(i.Base),h=function(e){function t(t){var n=e.call(this,t)||this;return n.isMultipleItemValueChanging=!1,n.createNewArray("items",(function(e){e.setData(n)})),n.registerFunctionOnPropertyValueChanged("items",(function(){n.fireCallback(n.colCountChangedCallback)})),n.registerFunctionOnPropertyValueChanged("colCount",(function(){n.fireCallback(n.colCountChangedCallback)})),n.registerFunctionOnPropertyValueChanged("itemSize",(function(){n.updateItemsSize()})),n}return p(t,e),t.addDefaultItems=function(e){for(var t=u.QuestionFactory.DefaultMutlipleTextItems,n=0;n<t.length;n++)e.addItem(t[n])},t.prototype.getType=function(){return"multipletext"},t.prototype.setSurveyImpl=function(t){e.prototype.setSurveyImpl.call(this,t);for(var n=0;n<this.items.length;n++)this.items[n].setData(this)},Object.defineProperty(t.prototype,"isAllowTitleLeft",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSingleInput",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.onSurveyLoad=function(){this.editorsOnSurveyLoad(),e.prototype.onSurveyLoad.call(this),this.fireCallback(this.colCountChangedCallback)},t.prototype.setQuestionValue=function(t,n){void 0===n&&(n=!0),e.prototype.setQuestionValue.call(this,t,n),this.performForEveryEditor((function(e){e.editor.updateValueFromSurvey(e.value)})),this.updateIsAnswered()},t.prototype.onSurveyValueChanged=function(t){e.prototype.onSurveyValueChanged.call(this,t),this.performForEveryEditor((function(e){e.editor.onSurveyValueChanged(e.value)}))},t.prototype.updateItemsSize=function(){this.performForEveryEditor((function(e){e.editor.updateInputSize()}))},t.prototype.editorsOnSurveyLoad=function(){this.performForEveryEditor((function(e){e.editor.onSurveyLoad()}))},t.prototype.performForEveryEditor=function(e){for(var t=0;t<this.items.length;t++){var n=this.items[t];n.editor&&e(n)}},Object.defineProperty(t.prototype,"items",{get:function(){return this.getPropertyValue("items")},set:function(e){this.setPropertyValue("items",e)},enumerable:!1,configurable:!0}),t.prototype.addItem=function(e,t){void 0===t&&(t=null);var n=this.createTextItem(e,t);return this.items.push(n),n},t.prototype.getItemByName=function(e){for(var t=0;t<this.items.length;t++)if(this.items[t].name==e)return this.items[t];return null},t.prototype.addConditionObjectsByContext=function(e,t){for(var n=0;n<this.items.length;n++){var r=this.items[n];e.push({name:this.getValueName()+"."+r.name,text:this.processedTitle+"."+r.fullTitle,question:this})}},t.prototype.getConditionJson=function(t,n){if(void 0===t&&(t=null),void 0===n&&(n=null),!n)return e.prototype.getConditionJson.call(this);var r=this.getItemByName(n);if(!r)return null;var i=(new l.JsonObject).toJsonObject(r);return i.type="text",i},t.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this);for(var t=0;t<this.items.length;t++)this.items[t].locStrsChanged()},t.prototype.supportGoNextPageAutomatic=function(){for(var e=0;e<this.items.length;e++)if(this.items[e].isEmpty())return!1;return!0},Object.defineProperty(t.prototype,"colCount",{get:function(){return this.getPropertyValue("colCount")},set:function(e){e<1||e>5||this.setPropertyValue("colCount",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemSize",{get:function(){return this.getPropertyValue("itemSize")},set:function(e){this.setPropertyValue("itemSize",e)},enumerable:!1,configurable:!0}),t.prototype.getRows=function(){for(var e=this.colCount,t=this.items,n=[],r=0,i=0;i<t.length;i++)0==r&&n.push([]),n[n.length-1].push(t[i]),++r>=e&&(r=0);return n},t.prototype.onValueChanged=function(){e.prototype.onValueChanged.call(this),this.onItemValueChanged()},t.prototype.createTextItem=function(e,t){return new d(e,t)},t.prototype.onItemValueChanged=function(){if(!this.isMultipleItemValueChanging)for(var e=0;e<this.items.length;e++){var t=null;this.value&&this.items[e].name in this.value&&(t=this.value[this.items[e].name]),this.items[e].onValueChanged(t)}},t.prototype.getIsRunningValidators=function(){if(e.prototype.getIsRunningValidators.call(this))return!0;for(var t=0;t<this.items.length;t++)if(this.items[t].editor.isRunningValidators)return!0;return!1},t.prototype.hasErrors=function(t,n){var r=this;void 0===t&&(t=!0),void 0===n&&(n=null);for(var i=!1,o=0;o<this.items.length;o++)this.items[o].editor.onCompletedAsyncValidators=function(e){r.raiseOnCompletedAsyncValidators()},n&&!0===n.isOnValueChanged&&this.items[o].editor.isEmpty()||(i=this.items[o].editor.hasErrors(t,n)||i);return e.prototype.hasErrors.call(this,t)||i},t.prototype.getAllErrors=function(){for(var t=e.prototype.getAllErrors.call(this),n=0;n<this.items.length;n++){var r=this.items[n].editor.getAllErrors();r&&r.length>0&&(t=t.concat(r))}return t},t.prototype.clearErrors=function(){e.prototype.clearErrors.call(this);for(var t=0;t<this.items.length;t++)this.items[t].editor.clearErrors()},t.prototype.getContainsErrors=function(){var t=e.prototype.getContainsErrors.call(this);if(t)return t;for(var n=this.items,r=0;r<n.length;r++)if(n[r].editor.containsErrors)return!0;return!1},t.prototype.getIsAnswered=function(){if(!e.prototype.getIsAnswered.call(this))return!1;for(var t=0;t<this.items.length;t++){var n=this.items[t].editor;if(n.isVisible&&!n.isAnswered)return!1}return!0},t.prototype.getProgressInfo=function(){for(var e=[],t=0;t<this.items.length;t++)e.push(this.items[t].editor);return o.SurveyElement.getProgressInfoByElements(e,this.isRequired)},t.prototype.getDisplayValueCore=function(e,t){if(!t)return t;for(var n={},r=0;r<this.items.length;r++){var i=this.items[r],o=t[i.name];if(!c.Helpers.isValueEmpty(o)){var a=i.name;e&&i.title&&(a=i.title),n[a]=i.editor.getDisplayValue(e,o)}}return n},t.prototype.getMultipleTextValue=function(e){return this.value?this.value[e]:null},t.prototype.setMultipleTextValue=function(e,t){this.isMultipleItemValueChanging=!0,this.isValueEmpty(t)&&(t=void 0);var n=this.value;n||(n={}),n[e]=t,this.setNewValue(n),this.isMultipleItemValueChanging=!1},t.prototype.getItemDefaultValue=function(e){return this.defaultValue?this.defaultValue[e]:null},t.prototype.getTextProcessor=function(){return this.textProcessor},t.prototype.getAllValues=function(){return this.data?this.data.getAllValues():null},t.prototype.getIsRequiredText=function(){return this.survey?this.survey.requiredText:""},t.prototype.addElement=function(e,t){},t.prototype.removeElement=function(e){return!1},t.prototype.getQuestionTitleLocation=function(){return"left"},t.prototype.getQuestionStartIndex=function(){return this.getStartIndex()},t.prototype.getChildrenLayoutType=function(){return"row"},t.prototype.elementWidthChanged=function(e){},Object.defineProperty(t.prototype,"elements",{get:function(){return[]},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(e){return-1},t.prototype.ensureRowsVisibility=function(){},t}(a.Question);l.Serializer.addClass("multipletextitem",["name","isRequired:boolean",{name:"placeHolder",serializationProperty:"locPlaceHolder"},{name:"inputType",default:"text",choices:["color","date","datetime","datetime-local","email","month","number","password","range","tel","text","time","url","week"]},{name:"title",serializationProperty:"locTitle"},{name:"maxLength:number",default:-1},{name:"size:number",minValue:0},{name:"requiredErrorText:text",serializationProperty:"locRequiredErrorText"},{name:"validators:validators",baseClassName:"surveyvalidator",classNamePart:"validator"}],(function(){return new d("")})),l.Serializer.addClass("multipletext",[{name:"!items:textitems",className:"multipletextitem"},{name:"itemSize:number",minValue:0},{name:"colCount:number",default:1,choices:[1,2,3,4,5]}],(function(){return new h("")}),"question"),u.QuestionFactory.Instance.registerQuestion("multipletext",(function(e){var t=new h(e);return h.addDefaultItems(t),t}))},"./src/question_paneldynamic.ts":
/*!**************************************!*\
  !*** ./src/question_paneldynamic.ts ***!
  \**************************************/
/*! exports provided: QuestionPanelDynamicItem, QuestionPanelDynamicTemplateSurveyImpl, QuestionPanelDynamicModel */function(e,t,n){"use strict";n.r(t),n.d(t,"QuestionPanelDynamicItem",(function(){return y})),n.d(t,"QuestionPanelDynamicTemplateSurveyImpl",(function(){return v})),n.d(t,"QuestionPanelDynamicModel",(function(){return b}));var r,i=n(/*! ./helpers */"./src/helpers.ts"),o=n(/*! ./survey-element */"./src/survey-element.ts"),a=n(/*! ./surveyStrings */"./src/surveyStrings.ts"),s=n(/*! ./textPreProcessor */"./src/textPreProcessor.ts"),l=n(/*! ./question */"./src/question.ts"),u=n(/*! ./jsonobject */"./src/jsonobject.ts"),c=n(/*! ./questionfactory */"./src/questionfactory.ts"),p=n(/*! ./error */"./src/error.ts"),d=n(/*! ./settings */"./src/settings.ts"),h=n(/*! ./utils/utils */"./src/utils/utils.ts"),f=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),m=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},g=function(e){function t(t,n,r){var i=e.call(this,r)||this;return i.data=t,i.panelItem=n,i.variableName=r,i}return f(t,e),Object.defineProperty(t.prototype,"survey",{get:function(){return this.panelItem.getSurvey()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panel",{get:function(){return this.panelItem.panel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panelIndex",{get:function(){return this.data?this.data.getItemIndex(this.panelItem):-1},enumerable:!1,configurable:!0}),t.prototype.getValues=function(){return this.panelItem.getAllValues()},t.prototype.getQuestionByName=function(t){var n=e.prototype.getQuestionByName.call(this,t);if(n)return n;var r=this.panelIndex;return r>-1?this.data.getSharedQuestionFromArray(t,r):null},t.prototype.onCustomProcessText=function(e){if(e.name==y.IndexVariableName){var n=this.panelIndex;if(n>-1)return e.isExists=!0,e.value=n+1,!0}if(0==e.name.indexOf(y.ParentItemVariableName+".")){var r=this.data;if(r&&r.parentQuestion&&r.parent){var i=r.parent.data,o=new t(r.parentQuestion,i,y.ItemVariableName),a=e.name.replace(y.ParentItemVariableName,y.ItemVariableName),s=o.processValue(a,e.returnDisplayValue);e.isExists=s.isExists,e.value=s.value}return!0}return!1},t}(s.QuestionTextProcessor),y=function(){function e(t,n){this.data=t,this.panelValue=n,this.textPreProcessor=new g(t,this,e.ItemVariableName),this.setSurveyImpl()}return Object.defineProperty(e.prototype,"panel",{get:function(){return this.panelValue},enumerable:!1,configurable:!0}),e.prototype.setSurveyImpl=function(){this.panel.setSurveyImpl(this)},e.prototype.getValue=function(e){return this.getAllValues()[e]},e.prototype.setValue=function(e,t){this.data.setPanelItemData(this,e,t)},e.prototype.getVariable=function(e){},e.prototype.setVariable=function(e,t){},e.prototype.getComment=function(e){var t=this.getValue(e+d.settings.commentPrefix);return t||""},e.prototype.setComment=function(e,t,n){this.setValue(e+d.settings.commentPrefix,t)},e.prototype.getAllValues=function(){return this.data.getPanelItemData(this)},e.prototype.getFilteredValues=function(){var t={},n=this.data&&this.data.getRootData()?this.data.getRootData().getFilteredValues():{};for(var r in n)t[r]=n[r];return t[e.ItemVariableName]=this.getAllValues(),this.data&&(t[e.IndexVariableName.toLowerCase()]=this.data.getItemIndex(this)),t},e.prototype.getFilteredProperties=function(){return this.data&&this.data.getRootData()?this.data.getRootData().getFilteredProperties():{survey:this.getSurvey()}},e.prototype.getSurveyData=function(){return this},e.prototype.getSurvey=function(){return this.data?this.data.getSurvey():null},e.prototype.getTextProcessor=function(){return this.textPreProcessor},e.ItemVariableName="panel",e.ParentItemVariableName="parentPanel",e.IndexVariableName="panelIndex",e}(),v=function(){function e(e){this.data=e}return e.prototype.getSurveyData=function(){return null},e.prototype.getSurvey=function(){return this.data.getSurvey()},e.prototype.getTextProcessor=function(){return null},e}(),b=function(e){function t(t){var n=e.call(this,t)||this;n.loadingPanelCount=0,n.currentIndexValue=-1,n.isAddingNewPanels=!1,n.createNewArray("panels"),n.templateValue=n.createAndSetupNewPanelObject(),n.template.renderWidth="100%",n.template.selectedElementInDesign=n;var r=n;return n.template.addElementCallback=function(e){r.addOnPropertyChangedCallback(e),r.rebuildPanels()},n.template.removeElementCallback=function(e){r.rebuildPanels()},n.createLocalizableString("confirmDeleteText",n),n.createLocalizableString("keyDuplicationError",n),n.createLocalizableString("panelAddText",n),n.createLocalizableString("panelRemoveText",n),n.createLocalizableString("panelPrevText",n),n.createLocalizableString("panelNextText",n),n.registerFunctionOnPropertyValueChanged("panelsState",(function(){r.setPanelsState()})),n}return f(t,e),Object.defineProperty(t.prototype,"hasSingleInput",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.setSurveyImpl=function(t){e.prototype.setSurveyImpl.call(this,t),this.setTemplatePanelSurveyImpl(),this.setPanelsSurveyImpl()},t.prototype.assignOnPropertyChangedToTemplate=function(){for(var e=this.template.elements,t=0;t<e.length;t++)this.addOnPropertyChangedCallback(e[t])},t.prototype.addOnPropertyChangedCallback=function(e){var t=this;e.onPropertyChanged.add((function(e,n){t.onTemplateElementPropertyChanged(e,n)})),e.isPanel&&(e.addElementCallback=function(e){t.addOnPropertyChangedCallback(e)})},t.prototype.onTemplateElementPropertyChanged=function(e,t){if(!this.isLoadingFromJson&&!this.isDesignMode&&0!=this.panels.length&&u.Serializer.findProperty(e.getType(),t.name))for(var n=this.panels,r=0;r<n.length;r++){var i=n[r].getQuestionByName(e.name);i&&i[t.name]!==t.newValue&&(i[t.name]=t.newValue)}},t.prototype.getType=function(){return"paneldynamic"},Object.defineProperty(t.prototype,"isCompositeQuestion",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.clearOnDeletingContainer=function(){this.panels.forEach((function(e){e.clearOnDeletingContainer()}))},Object.defineProperty(t.prototype,"isAllowTitleLeft",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.removeElement=function(e){return this.template.removeElement(e)},Object.defineProperty(t.prototype,"template",{get:function(){return this.templateValue},enumerable:!1,configurable:!0}),t.prototype.getPanel=function(){return this.template},Object.defineProperty(t.prototype,"templateElements",{get:function(){return this.template.elements},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templateTitle",{get:function(){return this.template.title},set:function(e){this.template.title=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTemplateTitle",{get:function(){return this.template.locTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templateDescription",{get:function(){return this.template.description},set:function(e){this.template.description=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTemplateDescription",{get:function(){return this.template.locDescription},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){for(var e=[],t=0;t<this.panels.length;t++)e.push(this.panels[t].data);return e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panels",{get:function(){return this.getPropertyValue("panels")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentIndex",{get:function(){return this.isRenderModeList?-1:this.isDesignMode?0:(this.currentIndexValue<0&&this.panelCount>0&&(this.currentIndexValue=0),this.currentIndexValue>=this.panelCount&&(this.currentIndexValue=this.panelCount-1),this.currentIndexValue)},set:function(e){this.currentIndexValue!==e&&(e>=this.panelCount&&(e=this.panelCount-1),this.currentIndexValue=e,this.fireCallback(this.currentIndexChangedCallback))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentPanel",{get:function(){var e=this.currentIndex;return e<0||e>=this.panels.length?null:this.panels[e]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"confirmDelete",{get:function(){return this.getPropertyValue("confirmDelete",!1)},set:function(e){this.setPropertyValue("confirmDelete",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keyName",{get:function(){return this.getPropertyValue("keyName","")},set:function(e){this.setPropertyValue("keyName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"confirmDeleteText",{get:function(){return this.getLocalizableStringText("confirmDeleteText",a.surveyLocalization.getString("confirmDelete"))},set:function(e){this.setLocalizableStringText("confirmDeleteText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locConfirmDeleteText",{get:function(){return this.getLocalizableString("confirmDeleteText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keyDuplicationError",{get:function(){return this.getLocalizableStringText("keyDuplicationError",a.surveyLocalization.getString("keyDuplicationError"))},set:function(e){this.setLocalizableStringText("keyDuplicationError",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locKeyDuplicationError",{get:function(){return this.getLocalizableString("keyDuplicationError")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panelPrevText",{get:function(){return this.getLocalizableStringText("panelPrevText",a.surveyLocalization.getString("pagePrevText"))},set:function(e){this.setLocalizableStringText("panelPrevText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPanelPrevText",{get:function(){return this.getLocalizableString("panelPrevText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panelNextText",{get:function(){return this.getLocalizableStringText("panelNextText",a.surveyLocalization.getString("pageNextText"))},set:function(e){this.setLocalizableStringText("panelNextText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPanelNextText",{get:function(){return this.getLocalizableString("panelNextText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panelAddText",{get:function(){return this.getLocalizableStringText("panelAddText",a.surveyLocalization.getString("addPanel"))},set:function(e){this.setLocalizableStringText("panelAddText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPanelAddText",{get:function(){return this.getLocalizableString("panelAddText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panelRemoveText",{get:function(){return this.getLocalizableStringText("panelRemoveText",a.surveyLocalization.getString("removePanel"))},set:function(e){this.setLocalizableStringText("panelRemoveText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPanelRemoveText",{get:function(){return this.getLocalizableString("panelRemoveText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isProgressTopShowing",{get:function(){return"progressTop"==this.renderMode||"progressTopBottom"==this.renderMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isProgressBottomShowing",{get:function(){return"progressBottom"==this.renderMode||"progressTopBottom"==this.renderMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPrevButtonShowing",{get:function(){return this.currentIndex>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNextButtonShowing",{get:function(){return this.currentIndex>=0&&this.currentIndex<this.panelCount-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRangeShowing",{get:function(){return this.showRangeInProgress&&this.currentIndex>=0&&this.panelCount>1},enumerable:!1,configurable:!0}),t.prototype.getElementsInDesign=function(e){return void 0===e&&(e=!1),e?[this.template]:this.templateElements},t.prototype.prepareValueForPanelCreating=function(){this.addingNewPanelsValue=this.value,this.isAddingNewPanels=!0,this.isNewPanelsValueChanged=!1},t.prototype.setValueAfterPanelsCreating=function(){this.isAddingNewPanels=!1,this.isNewPanelsValueChanged&&(this.isValueChangingInternally=!0,this.value=this.addingNewPanelsValue,this.isValueChangingInternally=!1)},t.prototype.getValueCore=function(){return this.isAddingNewPanels?this.addingNewPanelsValue:e.prototype.getValueCore.call(this)},t.prototype.setValueCore=function(t){this.isAddingNewPanels?(this.isNewPanelsValueChanged=!0,this.addingNewPanelsValue=t):e.prototype.setValueCore.call(this,t)},Object.defineProperty(t.prototype,"panelCount",{get:function(){return this.isLoadingFromJson||this.isDesignMode?this.loadingPanelCount:this.panels.length},set:function(e){if(!(e<0))if(this.isLoadingFromJson||this.isDesignMode)this.loadingPanelCount=e;else if(e!=this.panels.length&&!this.isDesignMode){this.updateBindings("panelCount",e),this.prepareValueForPanelCreating();for(var t=this.panelCount;t<e;t++){var n=this.createNewPanel();this.panels.push(n),"list"==this.renderMode&&"default"!=this.panelsState&&("expand"===this.panelsState?n.expand():n.title&&n.collapse())}e<this.panelCount&&this.panels.splice(e,this.panelCount-e),this.setValueAfterPanelsCreating(),this.setValueBasedOnPanelCount(),this.reRunCondition(),this.fireCallback(this.panelCountChangedCallback)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panelsState",{get:function(){return this.getPropertyValue("panelsState")},set:function(e){this.setPropertyValue("panelsState",e)},enumerable:!1,configurable:!0}),t.prototype.setTemplatePanelSurveyImpl=function(){this.template.setSurveyImpl(this.isDesignMode?this.surveyImpl:new v(this))},t.prototype.setPanelsSurveyImpl=function(){for(var e=0;e<this.panels.length;e++){var t=this.panels[e];t!=this.template&&t.setSurveyImpl(t.data)}},t.prototype.setPanelsState=function(){if(!this.isDesignMode&&"list"==this.renderMode&&this.templateTitle)for(var e=0;e<this.panels.length;e++){var t=this.panelsState;"firstExpanded"===t&&(t=0===e?"expanded":"collapsed"),this.panels[e].state=t}},t.prototype.setValueBasedOnPanelCount=function(){var e=this.value;if(e&&Array.isArray(e)||(e=[]),e.length!=this.panelCount){for(var t=e.length;t<this.panelCount;t++)e.push({});e.length>this.panelCount&&e.splice(this.panelCount,e.length-this.panelCount),this.isValueChangingInternally=!0,this.value=e,this.isValueChangingInternally=!1}},Object.defineProperty(t.prototype,"minPanelCount",{get:function(){return this.getPropertyValue("minPanelCount",0)},set:function(e){e<0&&(e=0),e!=this.minPanelCount&&(this.setPropertyValue("minPanelCount",e),e>this.maxPanelCount&&(this.maxPanelCount=e),this.panelCount<e&&(this.panelCount=e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxPanelCount",{get:function(){return this.getPropertyValue("maxPanelCount",d.settings.panelMaximumPanelCount)},set:function(e){e<=0||(e>d.settings.panelMaximumPanelCount&&(e=d.settings.panelMaximumPanelCount),e!=this.maxPanelCount&&(this.setPropertyValue("maxPanelCount",e),e<this.minPanelCount&&(this.minPanelCount=e),this.panelCount>e&&(this.panelCount=e)))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowAddPanel",{get:function(){return this.getPropertyValue("allowAddPanel")},set:function(e){this.setPropertyValue("allowAddPanel",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowRemovePanel",{get:function(){return this.getPropertyValue("allowRemovePanel")},set:function(e){this.setPropertyValue("allowRemovePanel",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"templateTitleLocation",{get:function(){return this.getPropertyValue("templateTitleLocation")},set:function(e){this.setPropertyValue("templateTitleLocation",e.toLowerCase())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showQuestionNumbers",{get:function(){return this.getPropertyValue("showQuestionNumbers")},set:function(e){this.setPropertyValue("showQuestionNumbers",e),!this.isLoadingFromJson&&this.survey&&this.survey.questionVisibilityChanged(this,this.visible)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panelRemoveButtonLocation",{get:function(){return this.getPropertyValue("panelRemoveButtonLocation")},set:function(e){this.setPropertyValue("panelRemoveButtonLocation",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showRangeInProgress",{get:function(){return this.getPropertyValue("showRangeInProgress",!0)},set:function(e){this.setPropertyValue("showRangeInProgress",e),this.fireCallback(this.currentIndexChangedCallback)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderMode",{get:function(){return this.getPropertyValue("renderMode")},set:function(e){this.setPropertyValue("renderMode",e),this.fireCallback(this.renderModeChangedCallback)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRenderModeList",{get:function(){return"list"==this.renderMode},enumerable:!1,configurable:!0}),t.prototype.setVisibleIndex=function(t){if(!this.isVisible)return 0;for(var n="onSurvey"==this.showQuestionNumbers?t:0,r=0;r<this.panels.length;r++){var i=this.setPanelVisibleIndex(this.panels[r],n,"off"!=this.showQuestionNumbers);"onSurvey"==this.showQuestionNumbers&&(n+=i)}return e.prototype.setVisibleIndex.call(this,"onSurvey"!=this.showQuestionNumbers?t:-1),"onSurvey"!=this.showQuestionNumbers?1:n-t},t.prototype.setPanelVisibleIndex=function(e,t,n){return n?e.setVisibleIndex(t):(e.setVisibleIndex(-1),0)},Object.defineProperty(t.prototype,"canAddPanel",{get:function(){return(!this.survey||!this.survey.isDesignMode)&&this.allowAddPanel&&!this.isReadOnly&&this.panelCount<this.maxPanelCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canRemovePanel",{get:function(){return(!this.survey||!this.survey.isDesignMode)&&this.allowRemovePanel&&!this.isReadOnly&&this.panelCount>this.minPanelCount},enumerable:!1,configurable:!0}),t.prototype.rebuildPanels=function(){var e;if(!this.isLoadingFromJson){this.prepareValueForPanelCreating();var t=[];if(this.isDesignMode)new y(this,this.template),t.push(this.template);else for(var n=0;n<this.panelCount;n++)t.push(this.createNewPanel());(e=this.panels).splice.apply(e,m([0,this.panels.length],t)),this.setValueAfterPanelsCreating(),this.setPanelsState(),this.reRunCondition(),this.fireCallback(this.panelCountChangedCallback)}},Object.defineProperty(t.prototype,"defaultPanelValue",{get:function(){return this.getPropertyValue("defaultPanelValue")},set:function(e){this.setPropertyValue("defaultPanelValue",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"defaultValueFromLastPanel",{get:function(){return this.getPropertyValue("defaultValueFromLastPanel",!1)},set:function(e){this.setPropertyValue("defaultValueFromLastPanel",e)},enumerable:!1,configurable:!0}),t.prototype.isDefaultValueEmpty=function(){return e.prototype.isDefaultValueEmpty.call(this)&&this.isValueEmpty(this.defaultPanelValue)},t.prototype.setDefaultValue=function(){if(!this.isValueEmpty(this.defaultPanelValue)&&this.isValueEmpty(this.defaultValue)){if(this.isEmpty()&&0!=this.panelCount){for(var t=[],n=0;n<this.panelCount;n++)t.push(this.defaultPanelValue);this.value=t}}else e.prototype.setDefaultValue.call(this)},t.prototype.isEmpty=function(){var e=this.value;if(!e||!Array.isArray(e))return!0;for(var t=0;t<e.length;t++)if(!this.isRowEmpty(e[t]))return!1;return!0},t.prototype.getProgressInfo=function(){return o.SurveyElement.getProgressInfoByElements(this.panels,this.isRequired)},t.prototype.isRowEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},t.prototype.addPanelUI=function(){if(!this.canAddPanel)return null;var e=this.addPanel();return"list"===this.renderMode&&"default"!==this.panelsState&&e.expand(),e},t.prototype.addPanel=function(){this.panelCount++,this.isRenderModeList||(this.currentIndex=this.panelCount-1);var e=this.value,t=!1;return this.isValueEmpty(this.defaultPanelValue)||e&&Array.isArray(e)&&e.length==this.panelCount&&(t=!0,this.copyValue(e[e.length-1],this.defaultPanelValue)),this.defaultValueFromLastPanel&&e&&Array.isArray(e)&&e.length>1&&e.length==this.panelCount&&(t=!0,this.copyValue(e[e.length-1],e[e.length-2])),t&&(this.value=e),this.survey&&this.survey.dynamicPanelAdded(this),this.panels[this.panelCount-1]},t.prototype.copyValue=function(e,t){for(var n in t)e[n]=t[n]},t.prototype.removePanelUI=function(e){this.canRemovePanel&&(this.confirmDelete&&!Object(h.confirmAction)(this.confirmDeleteText)||this.removePanel(e))},t.prototype.goToNextPanel=function(){"list"!==this.renderMode&&this.currentPanel.hasErrors()||this.currentIndex++},t.prototype.goToPrevPanel=function(){this.currentIndex--},t.prototype.removePanel=function(e){var t=this.getPanelIndex(e);if(!(t<0||t>=this.panelCount)){var n=this.panels[t];this.panels.splice(t,1),this.updateBindings("panelCount",this.panelCount),!(e=this.value)||!Array.isArray(e)||t>=e.length||(this.isValueChangingInternally=!0,e.splice(t,1),this.value=e,this.fireCallback(this.panelCountChangedCallback),this.survey&&this.survey.dynamicPanelRemoved(this,t,n),this.isValueChangingInternally=!1)}},t.prototype.getPanelIndex=function(e){if(i.Helpers.isNumber(e))return e;for(var t=this.items,n=0;n<this.panels.length;n++)if(this.panels[n]===e||t[n]===e)return n;return-1},t.prototype.locStrsChanged=function(){e.prototype.locStrsChanged.call(this);for(var t=this.panels,n=0;n<t.length;n++)t[n].locStrsChanged()},t.prototype.clearIncorrectValues=function(){for(var e=0;e<this.panels.length;e++)this.clearIncorrectValuesInPanel(e)},t.prototype.clearErrors=function(){e.prototype.clearErrors.call(this);for(var t=0;t<this.panels.length;t++)this.panels[t].clearErrors()},t.prototype.getQuestionFromArray=function(e,t){return t>=this.panelCount?null:this.panels[t].getQuestionByName(e)},t.prototype.clearIncorrectValuesInPanel=function(e){var t=this.panels[e];t.clearIncorrectValues();var n=this.value,r=n&&e<n.length?n[e]:null;if(r){var i=!1;for(var o in r)this.getSharedQuestionFromArray(o,e)||t.getQuestionByName(o)||this.iscorrectValueWithPostPrefix(t,o,d.settings.commentPrefix)||this.iscorrectValueWithPostPrefix(t,o,d.settings.matrixTotalValuePostFix)||(delete r[o],i=!0);i&&(n[e]=r,this.value=n)}},t.prototype.iscorrectValueWithPostPrefix=function(e,t,n){return t.indexOf(n)===t.length-n.length&&!!e.getQuestionByName(t.substr(0,t.indexOf(n)))},t.prototype.getSharedQuestionFromArray=function(e,t){return this.survey&&this.valueName?this.survey.getQuestionByValueNameFromArray(this.valueName,e,t):null},t.prototype.addConditionObjectsByContext=function(e,t){for(var n=!!t&&this.template.questions.indexOf(t)>-1,r=this.getValueName()+"[0].",i=this.processedTitle+"[0].",o=new Array,a=this.template.questions,s=0;s<a.length;s++)a[s].addConditionObjectsByContext(o,t);for(s=0;s<o.length;s++)e.push({name:r+o[s].name,text:i+o[s].text,question:o[s].question});if(n)for(s=0;s<o.length;s++)o[s].question!=t&&e.push({name:"panel."+o[s].name,text:"panel."+o[s].text,question:o[s].question})},t.prototype.getConditionJson=function(t,n){if(void 0===t&&(t=null),void 0===n&&(n=null),!n)return e.prototype.getConditionJson.call(this,t,n);var r=n,i=n.indexOf(".");i>-1&&(r=n.substr(0,i),n=n.substr(i+1));var o=this.template.getQuestionByName(r);return o?o.getConditionJson(t,n):null},t.prototype.onReadOnlyChanged=function(){var t=this.isReadOnly;this.template.readOnly=t;for(var n=0;n<this.panels.length;n++)this.panels[n].readOnly=t;e.prototype.onReadOnlyChanged.call(this)},t.prototype.onSurveyLoad=function(){this.template.readOnly=this.isReadOnly,this.template.onSurveyLoad(),this.loadingPanelCount>0&&(this.panelCount=this.loadingPanelCount),this.isDesignMode&&this.rebuildPanels(),this.setPanelsSurveyImpl(),this.setPanelsState(),this.assignOnPropertyChangedToTemplate(),e.prototype.onSurveyLoad.call(this)},t.prototype.onFirstRendering=function(){this.template.onFirstRendering();for(var t=0;t<this.panels.length;t++)this.panels[t].onFirstRendering();e.prototype.onFirstRendering.call(this)},t.prototype.runCondition=function(t,n){e.prototype.runCondition.call(this,t,n),this.runPanelsCondition(t,n)},t.prototype.reRunCondition=function(){this.data&&this.runCondition(this.getDataFilteredValues(),this.getDataFilteredProperties())},t.prototype.runPanelsCondition=function(e,t){var n={};e&&e instanceof Object&&(n=JSON.parse(JSON.stringify(e)));for(var r=0;r<this.panels.length;r++){var o=this.getPanelItemData(this.panels[r].data),a=i.Helpers.createCopy(n);a[y.ItemVariableName.toLowerCase()]=o,a[y.IndexVariableName.toLowerCase()]=r,this.panels[r].runCondition(a,t)}},t.prototype.onAnyValueChanged=function(t){e.prototype.onAnyValueChanged.call(this,t);for(var n=0;n<this.panels.length;n++)this.panels[n].onAnyValueChanged(t),this.panels[n].onAnyValueChanged(y.ItemVariableName)},t.prototype.hasKeysDuplicated=function(e,t){void 0===t&&(t=null);for(var n,r=[],i=0;i<this.panels.length;i++)n=this.isValueDuplicated(this.panels[i],r,t,e)||n;return n},t.prototype.updatePanelsContainsErrors=function(){for(var e=this.changingValueQuestion.parent;e;)e.updateContainsErrors(),e=e.parent;this.updateContainsErrors()},t.prototype.hasErrors=function(t,n){if(void 0===t&&(t=!0),void 0===n&&(n=null),this.isValueChangingInternally)return!1;var r=!1;if(this.changingValueQuestion)return r=this.changingValueQuestion.hasErrors(t,n),r=this.hasKeysDuplicated(t,n)||r,this.updatePanelsContainsErrors(),r;var i=this.hasErrorInPanels(t,n);return e.prototype.hasErrors.call(this,t)||i},t.prototype.getContainsErrors=function(){var t=e.prototype.getContainsErrors.call(this);if(t)return t;for(var n=this.panels,r=0;r<n.length;r++)if(n[r].containsErrors)return!0;return!1},t.prototype.getIsAnswered=function(){if(!e.prototype.getIsAnswered.call(this))return!1;for(var t=this.panels,n=0;n<t.length;n++){var r=[];t[n].addQuestionsToList(r,!0);for(var i=0;i<r.length;i++)if(!r[i].isAnswered)return!1}return!0},t.prototype.clearValueIfInvisible=function(){for(var t=0;t<this.panels.length;t++)for(var n=this.panels[t].questions,r=0;r<n.length;r++)n[r].clearValueIfInvisible();e.prototype.clearValueIfInvisible.call(this)},t.prototype.getIsRunningValidators=function(){if(e.prototype.getIsRunningValidators.call(this))return!0;for(var t=0;t<this.panels.length;t++)for(var n=this.panels[t].questions,r=0;r<n.length;r++)if(n[r].isRunningValidators)return!0;return!1},t.prototype.getAllErrors=function(){for(var t=e.prototype.getAllErrors.call(this),n=0;n<this.panels.length;n++)for(var r=this.panels[n].questions,i=0;i<r.length;i++){var o=r[i].getAllErrors();o&&o.length>0&&(t=t.concat(o))}return t},t.prototype.getDisplayValueCore=function(e,t){var n=this.getUnbindValue(t);if(!n||!Array.isArray(n))return n;for(var r=0;r<this.panels.length&&r<n.length;r++){var i=n[r];i&&(n[r]=this.getPanelDisplayValue(r,i,e))}return n},t.prototype.getPanelDisplayValue=function(e,t,n){if(!t)return t;for(var r=this.panels[e],i=Object.keys(t),o=0;o<i.length;o++){var a=i[o],s=r.getQuestionByValueName(a);if(s||(s=this.getSharedQuestionFromArray(a,e)),s){var l=s.getDisplayValue(n,t[a]);t[a]=l,n&&s.title&&s.title!==a&&(t[s.title]=l,delete t[a])}}return t},t.prototype.hasErrorInPanels=function(e,t){for(var n=!1,r=this.panels,i=[],o=0;o<r.length;o++)this.setOnCompleteAsyncInPanel(r[o]);for(o=0;o<r.length;o++){var a=r[o].hasErrors(e,!!t&&t.focuseOnFirstError,t);a=this.isValueDuplicated(r[o],i,t)||a,this.isRenderModeList||!a||n||(this.currentIndex=o),n=a||n}return n},t.prototype.setOnCompleteAsyncInPanel=function(e){for(var t=this,n=e.questions,r=0;r<n.length;r++)n[r].onCompletedAsyncValidators=function(e){t.raiseOnCompletedAsyncValidators()}},t.prototype.isValueDuplicated=function(e,t,n,r){if(!this.keyName)return!1;var i=e.getQuestionByValueName(this.keyName);if(!i||i.isEmpty())return!1;var o=i.value;this.changingValueQuestion&&i!=this.changingValueQuestion&&i.hasErrors(r,n);for(var a=0;a<t.length;a++)if(o==t[a])return i.addError(new p.KeyDuplicationError(this.keyDuplicationError,this)),n&&!n.firstErrorQuestion&&(n.firstErrorQuestion=i),!0;return t.push(o),!1},t.prototype.createNewPanel=function(){var e=this.createAndSetupNewPanelObject(),t=this.template.toJSON();(new u.JsonObject).toObject(t,e),e.renderWidth="100%",e.updateCustomWidgets(),new y(this,e),e.onFirstRendering();for(var n=e.questions,r=0;r<n.length;r++)n[r].setParentQuestion(this);return e},t.prototype.createAndSetupNewPanelObject=function(){var e=this.createNewPanelObject();e.isInteractiveDesignElement=!1;var t=this;return e.onGetQuestionTitleLocation=function(){return t.getTemplateQuestionTitleLocation()},e},t.prototype.getTemplateQuestionTitleLocation=function(){return"default"!=this.templateTitleLocation?this.templateTitleLocation:this.getTitleLocationCore()},t.prototype.createNewPanelObject=function(){return u.Serializer.createClass("panel")},t.prototype.setPanelCountBasedOnValue=function(){if(!this.isValueChangingInternally&&!this.isDesignMode){var e=this.value,t=e&&Array.isArray(e)?e.length:0;0==t&&this.loadingPanelCount>0&&(t=this.loadingPanelCount),this.panelCount=t}},t.prototype.setQuestionValue=function(t){e.prototype.setQuestionValue.call(this,t,!1),this.setPanelCountBasedOnValue();for(var n=0;n<this.panels.length;n++)this.panelUpdateValueFromSurvey(this.panels[n]);this.updateIsAnswered()},t.prototype.onSurveyValueChanged=function(t){e.prototype.onSurveyValueChanged.call(this,t);for(var n=0;n<this.panels.length;n++)this.panelSurveyValueChanged(this.panels[n]);void 0===t&&this.setValueBasedOnPanelCount()},t.prototype.panelUpdateValueFromSurvey=function(e){for(var t=e.questions,n=this.getPanelItemData(e.data),r=0;r<t.length;r++){var i=t[r];i.updateValueFromSurvey(n[i.getValueName()]),i.updateCommentFromSurvey(n[i.getValueName()+d.settings.commentPrefix])}},t.prototype.panelSurveyValueChanged=function(e){for(var t=e.questions,n=this.getPanelItemData(e.data),r=0;r<t.length;r++){var i=t[r];i.onSurveyValueChanged(n[i.getValueName()])}},t.prototype.onSetData=function(){e.prototype.onSetData.call(this),this.isDesignMode&&(this.setTemplatePanelSurveyImpl(),this.rebuildPanels())},t.prototype.getItemIndex=function(e){var t=this.items.indexOf(e);return t>-1?t:this.items.length},t.prototype.getPanelItemData=function(e){var t=this.items,n=t.indexOf(e),r=this.value;return n<0&&Array.isArray(r)&&r.length>t.length&&(n=t.length),n<0||!r||!Array.isArray(r)||r.length<=n?{}:r[n]},t.prototype.setPanelItemData=function(e,t,n){if(!(this.isSetPanelItemData&&this.isSetPanelItemData.indexOf(t)>-1)){this.isSetPanelItemData||(this.isSetPanelItemData=[]),this.isSetPanelItemData.push(t);var r=this.items;(i=r.indexOf(e))<0&&(i=r.length);var i,o=this.getUnbindValue(this.value);if(o&&Array.isArray(o)||(o=[]),o.length<=i)for(var a=o.length;a<=i;a++)o.push({});if(o[i]||(o[i]={}),this.isValueEmpty(n)?delete o[i][t]:o[i][t]=n,i>=0&&i<this.panels.length&&(this.changingValueQuestion=this.panels[i].getQuestionByValueName(t)),this.value=o,this.changingValueQuestion=null,this.survey){var s={question:this,panel:e.panel,name:t,itemIndex:i,itemValue:o[i],value:n};this.survey.dynamicPanelItemValueChanged(this,s)}(i=this.isSetPanelItemData.indexOf(t))>-1&&this.isSetPanelItemData.splice(i,1)}},t.prototype.getRootData=function(){return this.data},t.prototype.getPlainData=function(t){void 0===t&&(t={includeEmpty:!0});var n=e.prototype.getPlainData.call(this,t);return n&&(n.isNode=!0,n.data=this.panels.map((function(e,n){var r={name:e.name||n,title:e.title||"Panel",value:e.getValue(),displayValue:e.getValue(),getString:function(e){return"object"==typeof e?JSON.stringify(e):e},isNode:!0,data:e.questions.map((function(e){return e.getPlainData(t)})).filter((function(e){return!!e}))};return(t.calculations||[]).forEach((function(t){r[t.propertyName]=e[t.propertyName]})),r}))),n},t.prototype.updateElementCss=function(t){e.prototype.updateElementCss.call(this,t);for(var n=0;n<this.panels.length;n++)this.panels[n].updateElementCss(t)},Object.defineProperty(t.prototype,"progressText",{get:function(){var e=this.panelCount;return a.surveyLocalization.getString("panelDynamicProgressText").format(this.currentIndex+1,e)},enumerable:!1,configurable:!0}),t.prototype.getPanelWrapperCss=function(){var e=this.cssClasses.panelWrapper;return"right"===this.panelRemoveButtonLocation&&(e+=" "+this.cssClasses.panelWrapperInRow),e},t.prototype.getPanelRemoveButtonCss=function(){var e=this.cssClasses.button+" "+this.cssClasses.buttonRemove;return"right"===this.panelRemoveButtonLocation&&(e+=" "+this.cssClasses.buttonRemoveRight),e},t}(l.Question);u.Serializer.addClass("paneldynamic",[{name:"templateElements",alternativeName:"questions",visible:!1,isLightSerializable:!1},{name:"templateTitle:text",serializationProperty:"locTemplateTitle"},{name:"templateDescription:text",serializationProperty:"locTemplateDescription"},{name:"allowAddPanel:boolean",default:!0},{name:"allowRemovePanel:boolean",default:!0},{name:"panelCount:number",isBindable:!0,default:0,choices:[0,1,2,3,4,5,6,7,8,9,10]},{name:"minPanelCount:number",default:0,minValue:0},{name:"maxPanelCount:number",default:d.settings.panelMaximumPanelCount},"defaultPanelValue:panelvalue","defaultValueFromLastPanel:boolean",{name:"panelsState",default:"default",choices:["default","collapsed","expanded","firstExpanded"]},{name:"keyName"},{name:"keyDuplicationError",serializationProperty:"locKeyDuplicationError"},{name:"confirmDelete:boolean"},{name:"confirmDeleteText",serializationProperty:"locConfirmDeleteText"},{name:"panelAddText",serializationProperty:"locPanelAddText"},{name:"panelRemoveText",serializationProperty:"locPanelRemoveText"},{name:"panelPrevText",serializationProperty:"locPanelPrevText"},{name:"panelNextText",serializationProperty:"locPanelNextText"},{name:"showQuestionNumbers",default:"off",choices:["off","onPanel","onSurvey"]},{name:"showRangeInProgress:boolean",default:!0},{name:"renderMode",default:"list",choices:["list","progressTop","progressBottom","progressTopBottom"]},{name:"templateTitleLocation",default:"default",choices:["default","top","bottom","left"]},{name:"panelRemoveButtonLocation",default:"bottom",choices:["bottom","right"]}],(function(){return new b("")}),"question"),c.QuestionFactory.Instance.registerQuestion("paneldynamic",(function(e){return new b(e)}))},"./src/question_radiogroup.ts":
/*!************************************!*\
  !*** ./src/question_radiogroup.ts ***!
  \************************************/
/*! exports provided: QuestionRadiogroupModel */function(e,t,n){"use strict";n.r(t),n.d(t,"QuestionRadiogroupModel",(function(){return c}));var r,i=n(/*! ./jsonobject */"./src/jsonobject.ts"),o=n(/*! ./questionfactory */"./src/questionfactory.ts"),a=n(/*! ./question_baseselect */"./src/question_baseselect.ts"),s=n(/*! ./surveyStrings */"./src/surveyStrings.ts"),l=n(/*! ./itemvalue */"./src/itemvalue.ts"),u=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e){function t(t){return e.call(this,t)||this}return u(t,e),t.prototype.getType=function(){return"radiogroup"},t.prototype.getFirstInputElementId=function(){return this.inputId+"_0"},Object.defineProperty(t.prototype,"selectedItem",{get:function(){return this.isEmpty()?null:l.ItemValue.getItemByValue(this.visibleChoices,this.value)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showClearButton",{get:function(){return this.getPropertyValue("showClearButton",!1)},set:function(e){this.setPropertyValue("showClearButton",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canShowClearButton",{get:function(){return this.showClearButton&&!this.isReadOnly},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clearButtonCaption",{get:function(){return s.surveyLocalization.getString("clearCaption")},enumerable:!1,configurable:!0}),t.prototype.supportGoNextPageAutomatic=function(){return!0},t}(a.QuestionCheckboxBase);i.Serializer.addClass("radiogroup",[{name:"showClearButton:boolean",default:!1}],(function(){return new c("")}),"checkboxbase"),o.QuestionFactory.Instance.registerQuestion("radiogroup",(function(e){var t=new c(e);return t.choices=o.QuestionFactory.DefaultChoices,t}))},"./src/question_ranking.ts":
/*!*********************************!*\
  !*** ./src/question_ranking.ts ***!
  \*********************************/
/*! exports provided: QuestionRankingModel */function(e,t,n){"use strict";n.r(t),n.d(t,"QuestionRankingModel",(function(){return p}));var r,i=n(/*! sortablejs */"./node_modules/sortablejs/modular/sortable.esm.js"),o=n(/*! ./jsonobject */"./src/jsonobject.ts"),a=n(/*! ./questionfactory */"./src/questionfactory.ts"),s=n(/*! ./question_checkbox */"./src/question_checkbox.ts"),l=n(/*! ./utils/is-mobile */"./src/utils/is-mobile.ts"),u=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=i.default,p=function(e){function t(t){var n=e.call(this,t)||this;return n.domNode=null,n.sortableInst=null,n.handleKeydown=function(e){var t=e.key,r=n.domNode.querySelectorAll("."+n.cssClasses.item),i=[].indexOf.call(r,e.target);"ArrowUp"===t&&i&&n.handleArrowUp(i),"ArrowDown"===t&&i!==r.length-1&&n.handleArrowDown(i)},n.handleArrowUp=function(e){var t=n.sortableInst.toArray();n.moveArrayItemBack(t,e),n.sortableInst.sort(t),n.syncNumbers(),n.setValueFromUI(),n.focusItem(e-1)},n.handleArrowDown=function(e){var t=n.sortableInst.toArray();n.moveArrayItemForward(t,e),n.sortableInst.sort(t),n.syncNumbers(),n.setValueFromUI(),n.focusItem(e+1)},n.moveArrayItemBack=function(e,t){var n;n=[e[t-1],e[t]],e[t]=n[0],e[t-1]=n[1]},n.moveArrayItemForward=function(e,t){var n;n=[e[t+1],e[t]],e[t]=n[0],e[t+1]=n[1]},n.focusItem=function(e){n.domNode.querySelectorAll("."+n.cssClasses.item)[e].focus()},n.setValueFromUI=function(){var e=[];n.domNode.querySelectorAll("."+n.cssClasses.controlLabel).forEach((function(t,r){var i=t.innerText;n.visibleChoices.forEach((function(t){i===t.text&&e.push(t.value)}))})),n.value=e},n.syncNumbers=function(){if(n.domNode){var e="."+n.cssClasses.item+":not(."+n.cssClasses.itemDragMod+") ."+n.cssClasses.itemIndex;n.domNode.querySelectorAll(e).forEach((function(e,t){e.innerText=n.getNumberByIndex(t)}))}},n.setGhostText=function(e){var t=n.domNode.querySelectorAll("."+n.cssClasses.itemIndex);t[t.length-1].innerText=e},n}return u(t,e),t.prototype.getType=function(){return"ranking"},Object.defineProperty(t.prototype,"isIndeterminate",{get:function(){return!this.value||0===this.value.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rootClass",{get:function(){var e=this.cssClasses;return l.IsMobile?e.root+" "+e.rootMobileMod:e.root},enumerable:!1,configurable:!0}),t.prototype.getNumberByIndex=function(e){return this.isIndeterminate?"":e+1+""},Object.defineProperty(t.prototype,"rankingChoices",{get:function(){var e=[],t=this.value,n=this.removeOtherChoiceFromChoices(this.visibleChoices);return 1===(e=this.isIndeterminate?n:this.mergeValueAndVisibleChoices(t,n)).length&&(e=[]),e},enumerable:!1,configurable:!0}),t.prototype.removeOtherChoiceFromChoices=function(e){var t=e;return e.forEach((function(e,n){"other"===e.value&&t.splice(n,1)})),t},t.prototype.afterRenderQuestionElement=function(t){t&&this.initSortable(t),e.prototype.afterRenderQuestionElement.call(this,t)},t.prototype.beforeDestroyQuestionElement=function(t){this.sortableInst&&this.sortableInst.destroy(),e.prototype.beforeDestroyQuestionElement.call(this,t)},t.prototype.supportSelectAll=function(){return!1},t.prototype.supportOther=function(){return!1},t.prototype.supportNone=function(){return!1},t.prototype.onVisibleChoicesChanged=function(){e.prototype.onVisibleChoicesChanged.call(this),this.isIndeterminate||(this.value=this.rankingChoices.map((function(e){return e.value})))},t.prototype.mergeValueAndVisibleChoices=function(e,t){var n=t.length,r=[];r.length=n;for(var i=0;i<n;i++){var o=t[i],a=e.indexOf(o.value);-1!==a?r.splice(a,1,o):r.splice(r.length-1,0,o)}return r=r.filter((function(e){return!!e}))},t.prototype.initSortable=function(e){if(e){var t=this;t.domNode=e,this.isReadOnly||this.isDesignMode||(t.sortableInst=new c(e,{animation:100,forceFallback:!0,delay:200,delayOnTouchOnly:!0,handle:l.IsMobile?"."+t.cssClasses.itemIconContainer:"."+t.cssClasses.itemContent,ghostClass:t.cssClasses.itemGhostMod,dragClass:t.cssClasses.itemDragMod,onStart:function(n){c.ghost.style.opacity=1,e.className+=" "+t.cssClasses.rootDragMod,t.isIndeterminate&&t.setGhostText(n.oldIndex+1)},onEnd:function(){e.className=e.className.replace(" "+t.cssClasses.rootDragMod,""),t.setValueFromUI()},onChange:function(e){t.isIndeterminate||t.syncNumbers(),t.setGhostText(e.newIndex+1)}}))}},t}(s.QuestionCheckboxModel);o.Serializer.addClass("ranking",[{name:"hasOther",visible:!1,isSerializable:!1},{name:"otherText",visible:!1,isSerializable:!1},{name:"otherErrorText",visible:!1,isSerializable:!1},{name:"storeOthersAsComment",visible:!1,isSerializable:!1},{name:"hasNone",visible:!1,isSerializable:!1},{name:"noneText",visible:!1,isSerializable:!1},{name:"hasSelectAll",visible:!1,isSerializable:!1},{name:"selectAllText",visible:!1,isSerializable:!1},{name:"colCount:number",visible:!1,isSerializable:!1},{name:"maxSelectedChoices",visible:!1,isSerializable:!1}],(function(){return new p("")}),"checkbox"),a.QuestionFactory.Instance.registerQuestion("ranking",(function(e){var t=new p(e);return t.choices=a.QuestionFactory.DefaultChoices,t}))},"./src/question_rating.ts":
/*!********************************!*\
  !*** ./src/question_rating.ts ***!
  \********************************/
/*! exports provided: QuestionRatingModel */function(e,t,n){"use strict";n.r(t),n.d(t,"QuestionRatingModel",(function(){return p}));var r,i=n(/*! ./itemvalue */"./src/itemvalue.ts"),o=n(/*! ./question */"./src/question.ts"),a=n(/*! ./jsonobject */"./src/jsonobject.ts"),s=n(/*! ./questionfactory */"./src/questionfactory.ts"),l=n(/*! ./settings */"./src/settings.ts"),u=n(/*! ./surveyStrings */"./src/surveyStrings.ts"),c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),p=function(e){function t(t){var n=e.call(this,t)||this;n.createItemValues("rateValues");var r=n;n.registerFunctionOnPropertyValueChanged("rateValues",(function(){r.fireCallback(r.rateValuesChangedCallback)})),n.onPropertyChanged.add((function(e,t){"rateMin"!=t.name&&"rateMax"!=t.name&&"rateStep"!=t.name||r.fireCallback(r.rateValuesChangedCallback)}));var i=n.createLocalizableString("minRateDescription",n,!0),o=n.createLocalizableString("maxRateDescription",n,!0);return i.onGetTextCallback=function(e){return e?e+" ":e},o.onGetTextCallback=function(e){return e?" "+e:e},n}return c(t,e),t.prototype.onSurveyLoad=function(){e.prototype.onSurveyLoad.call(this),this.fireCallback(this.rateValuesChangedCallback)},Object.defineProperty(t.prototype,"rateValues",{get:function(){return this.getPropertyValue("rateValues")},set:function(e){this.setPropertyValue("rateValues",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rateMin",{get:function(){return this.getPropertyValue("rateMin")},set:function(e){!this.isLoadingFromJson&&e>this.rateMax-this.rateStep&&(e=this.rateMax-this.rateStep),this.setPropertyValue("rateMin",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rateMax",{get:function(){return this.getPropertyValue("rateMax")},set:function(e){!this.isLoadingFromJson&&e<this.rateMin+this.rateStep&&(e=this.rateMin+this.rateStep),this.setPropertyValue("rateMax",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rateStep",{get:function(){return this.getPropertyValue("rateStep")},set:function(e){e<=0&&(e=1),!this.isLoadingFromJson&&e>this.rateMax-this.rateMin&&(e=this.rateMax-this.rateMin),this.setPropertyValue("rateStep",e)},enumerable:!1,configurable:!0}),t.prototype.getDisplayValueCore=function(e,t){var n=i.ItemValue.getTextOrHtmlByValue(this.visibleRateValues,t);return n||t},Object.defineProperty(t.prototype,"visibleRateValues",{get:function(){if(this.rateValues.length>0)return this.rateValues;for(var e=[],t=this.rateMin,n=this.rateStep;t<=this.rateMax&&e.length<l.settings.ratingMaximumRateValueCount;)e.push(new i.ItemValue(t)),t=this.correctValue(t+n,n);return e},enumerable:!1,configurable:!0}),t.prototype.correctValue=function(e,t){if(!e)return e;if(Math.round(e)==e)return e;for(var n=0;Math.round(t)!=t;)t*=10,n++;return parseFloat(e.toFixed(n))},t.prototype.getType=function(){return"rating"},t.prototype.getFirstInputElementId=function(){return this.inputId+"_0"},t.prototype.supportGoNextPageAutomatic=function(){return!0},t.prototype.supportComment=function(){return!0},t.prototype.supportOther=function(){return!0},Object.defineProperty(t.prototype,"minRateDescription",{get:function(){return this.getLocalizableStringText("minRateDescription")},set:function(e){this.setLocalizableStringText("minRateDescription",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locMinRateDescription",{get:function(){return this.getLocalizableString("minRateDescription")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxRateDescription",{get:function(){return this.getLocalizableStringText("maxRateDescription")},set:function(e){this.setLocalizableStringText("maxRateDescription",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locMaxRateDescription",{get:function(){return this.getLocalizableString("maxRateDescription")},enumerable:!1,configurable:!0}),t.prototype.valueToData=function(e){if(this.rateValues.length>0){var t=i.ItemValue.getItemByValue(this.rateValues,e);return t?t.value:e}return isNaN(e)?e:parseFloat(e)},t.prototype.setValueFromClick=function(e){this.value===parseFloat(e)?this.clearValue():this.value=e},t.prototype.getItemClass=function(e){var t=this.cssClasses.item,n=this.cssClasses.selected,r=this.cssClasses.itemDisabled,i=this.value==e.value,o=!(this.isReadOnly&&!e.isEnabled||i||this.survey&&this.survey.isDesignMode),a=t;return this.value==e.value&&(a+=" "+n),this.isReadOnly&&(a+=" "+r),o&&(a+=" "+this.cssClasses.itemHover),a},t}(o.Question);a.Serializer.addClass("rating",[{name:"hasComment:switch",layout:"row"},{name:"commentText",dependsOn:"hasComment",visibleIf:function(e){return e.hasComment},serializationProperty:"locCommentText",layout:"row"},{name:"rateValues:itemvalue[]",baseValue:function(){return u.surveyLocalization.getString("choices_Item")}},{name:"rateMin:number",default:1},{name:"rateMax:number",default:5},{name:"rateStep:number",default:1,minValue:.1},{name:"minRateDescription",alternativeName:"mininumRateDescription",serializationProperty:"locMinRateDescription"},{name:"maxRateDescription",alternativeName:"maximumRateDescription",serializationProperty:"locMaxRateDescription"}],(function(){return new p("")}),"question"),s.QuestionFactory.Instance.registerQuestion("rating",(function(e){return new p(e)}))},"./src/question_signaturepad.ts":
/*!**************************************!*\
  !*** ./src/question_signaturepad.ts ***!
  \**************************************/
/*! exports provided: QuestionSignaturePadModel */function(e,t,n){"use strict";n.r(t),n.d(t,"QuestionSignaturePadModel",(function(){return p}));var r,i=n(/*! ./jsonobject */"./src/jsonobject.ts"),o=n(/*! ./question */"./src/question.ts"),a=n(/*! ./surveyStrings */"./src/surveyStrings.ts"),s=n(/*! signature_pad */"./node_modules/signature_pad/dist/signature_pad.mjs"),l=n(/*! ./questionfactory */"./src/questionfactory.ts"),u=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},p=function(e){function t(t){return e.call(this,t)||this}return u(t,e),t.prototype.getCssRoot=function(t){var n=e.prototype.getCssRoot.call(this,t);return""+this.width=="300"&&(n+=" "+t.small),n},t.prototype.updateValue=function(){if(this.signaturePad){var e=this.signaturePad.toDataURL(this.dataFormat);this.value=e}},t.prototype.getType=function(){return"signaturepad"},t.prototype.afterRenderQuestionElement=function(t){t&&this.initSignaturePad(t),e.prototype.afterRenderQuestionElement.call(this,t)},t.prototype.beforeDestroyQuestionElement=function(e){e&&this.destroySignaturePad(e)},t.prototype.initSignaturePad=function(e){var t=this,n=e.getElementsByTagName("canvas")[0],r=e.getElementsByTagName("button")[0],i=new s.default(n,{backgroundColor:"#ffffff"});this.isInputReadOnly&&i.off(),r.onclick=function(){t.value=void 0},this.readOnlyChangedCallback=function(){!t.allowClear||t.isInputReadOnly?(i.off(),r.style.display="none"):(i.on(),r.style.display="block")},i.penColor=this.penColor,i.backgroundColor=this.backgroundColor,i.onBegin=function(){t.isDrawingValue=!0,n.focus()},i.onEnd=function(){t.isDrawingValue=!1,t.updateValue()};var o=function(){var e=t.value;n.width=t.width||300,n.height=t.height||200,function(e){var t=e.getContext("2d"),n=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1),r=e.width,i=e.height;e.width=r*n,e.height=i*n,e.style.width=r+"px",e.style.height=i+"px",t.scale(n,n)}(n),e?i.fromDataURL(e):i.clear()};this.valueChangedCallback=o,o(),this.readOnlyChangedCallback(),this.signaturePad=i;var a=function(e,t){"width"!==t.name&&"height"!==t.name||o()};this.onPropertyChanged.add(a),this.signaturePad.propertyChangedHandler=a},t.prototype.destroySignaturePad=function(e){this.signaturePad&&(this.onPropertyChanged.remove(this.signaturePad.propertyChangedHandler),this.signaturePad.off()),this.readOnlyChangedCallback=null,this.signaturePad=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.getPropertyValue("width",300)},set:function(e){this.setPropertyValue("width",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.getPropertyValue("height",200)},set:function(e){this.setPropertyValue("height",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowClear",{get:function(){return this.getPropertyValue("allowClear",!0)},set:function(e){this.setPropertyValue("allowClear",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"penColor",{get:function(){return this.getPropertyValue("penColor","#1ab394")},set:function(e){this.setPropertyValue("penColor",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backgroundColor",{get:function(){return this.getPropertyValue("backgroundColor","#ffffff")},set:function(e){this.setPropertyValue("backgroundColor",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clearButtonCaption",{get:function(){return a.surveyLocalization.getString("clearCaption")},enumerable:!1,configurable:!0}),t.prototype.needShowPlaceholder=function(){return!this.isDrawingValue&&this.isEmpty()},Object.defineProperty(t.prototype,"placeHolderText",{get:function(){return a.surveyLocalization.getString("signaturePlaceHolder")},enumerable:!1,configurable:!0}),c([Object(i.property)({defaultValue:!1})],t.prototype,"isDrawingValue",void 0),c([Object(i.property)({defaultValue:""})],t.prototype,"dataFormat",void 0),t}(o.Question);i.Serializer.addClass("signaturepad",[{name:"width:number",category:"general",default:300},{name:"height:number",category:"general",default:200},{name:"allowClear:boolean",category:"general",default:!0},{name:"penColor:color",category:"general",default:"#1ab394"},{name:"backgroundColor:color",category:"general",default:"#ffffff"},{name:"dataFormat",category:"general",default:"",choices:[{value:"",text:"PNG"},{value:"image/jpeg",text:"JPEG"},{value:"image/svg+xml",text:"SVG"}]},{name:"defaultValue",visible:!1},{name:"correctAnswer",visible:!1}],(function(){return new p("")}),"question"),l.QuestionFactory.Instance.registerQuestion("signaturepad",(function(e){return new p(e)}))},"./src/question_text.ts":
/*!******************************!*\
  !*** ./src/question_text.ts ***!
  \******************************/
/*! exports provided: QuestionTextModel */function(e,t,n){"use strict";n.r(t),n.d(t,"QuestionTextModel",(function(){return f}));var r,i=n(/*! ./questionfactory */"./src/questionfactory.ts"),o=n(/*! ./jsonobject */"./src/jsonobject.ts"),a=n(/*! ./localizablestring */"./src/localizablestring.ts"),s=n(/*! ./helpers */"./src/helpers.ts"),l=n(/*! ./validator */"./src/validator.ts"),u=n(/*! ./surveyStrings */"./src/surveyStrings.ts"),c=n(/*! ./error */"./src/error.ts"),p=n(/*! ./settings */"./src/settings.ts"),d=n(/*! ./question_textbase */"./src/question_textbase.ts"),h=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),f=function(e){function t(t){var n=e.call(this,t)||this;return n.createLocalizableString("minErrorText",n,!0),n.createLocalizableString("maxErrorText",n,!0),n.locDataListValue=new a.LocalizableStrings(n),n.registerFunctionOnPropertiesValueChanged(["min","max","inputType","minValueExpression","maxValueExpression"],(function(){n.setRenderedMinMax()})),n.registerFunctionOnPropertiesValueChanged(["inputType","size"],(function(){n.updateInputSize(),n.calcRenderedPlaceHolder()})),n}return h(t,e),t.prototype.isTextValue=function(){return["text","number","password"].indexOf(this.inputType)>-1},t.prototype.getType=function(){return"text"},t.prototype.onSurveyLoad=function(){e.prototype.onSurveyLoad.call(this),this.setRenderedMinMax(),this.updateInputSize()},Object.defineProperty(t.prototype,"inputType",{get:function(){return this.getPropertyValue("inputType")},set:function(e){"datetime_local"==(e=e.toLowerCase())&&(e="datetime-local"),this.setPropertyValue("inputType",e.toLowerCase()),this.isLoadingFromJson||(this.min=void 0,this.max=void 0,this.step=void 0)},enumerable:!1,configurable:!0}),t.prototype.runCondition=function(t,n){e.prototype.runCondition.call(this,t,n),(this.minValueExpression||this.maxValueExpression)&&this.setRenderedMinMax(t,n)},t.prototype.getValidators=function(){var t=e.prototype.getValidators.call(this);return"email"!==this.inputType||this.validators.some((function(e){return"emailvalidator"===e.getType()}))||t.push(new l.EmailValidator),t},t.prototype.isLayoutTypeSupported=function(e){return!0},Object.defineProperty(t.prototype,"size",{get:function(){return this.getPropertyValue("size")},set:function(e){this.setPropertyValue("size",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTextInput",{get:function(){return["text","search","tel","url","email","password"].indexOf(this.inputType)>-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputSize",{get:function(){return this.getPropertyValue("inputSize",0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"inputWidth",{get:function(){return this.getPropertyValue("inputWidth")},enumerable:!1,configurable:!0}),t.prototype.updateInputSize=function(){var e=this.isTextInput&&this.size>0?this.size:0;this.isTextInput&&e<1&&this.parent&&this.parent.itemSize&&(e=this.parent.itemSize),this.setPropertyValue("inputSize",e),this.setPropertyValue("inputWidth",e>0?"auto":"")},Object.defineProperty(t.prototype,"autoComplete",{get:function(){return this.getPropertyValue("autoComplete","")},set:function(e){this.setPropertyValue("autoComplete",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this.getPropertyValue("min")},set:function(e){this.isValueExpression(e)?this.minValueExpression=e.substr(1):this.setPropertyValue("min",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this.getPropertyValue("max")},set:function(e){this.isValueExpression(e)?this.maxValueExpression=e.substr(1):this.setPropertyValue("max",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minValueExpression",{get:function(){return this.getPropertyValue("minValueExpression","")},set:function(e){this.setPropertyValue("minValueExpression",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxValueExpression",{get:function(){return this.getPropertyValue("maxValueExpression","")},set:function(e){this.setPropertyValue("maxValueExpression",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedMin",{get:function(){return this.getPropertyValue("renderedMin")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedMax",{get:function(){return this.getPropertyValue("renderedMax")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minErrorText",{get:function(){return this.getLocalizableStringText("minErrorText",u.surveyLocalization.getString("minError"))},set:function(e){this.setLocalizableStringText("minErrorText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locMinErrorText",{get:function(){return this.getLocalizableString("minErrorText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxErrorText",{get:function(){return this.getLocalizableStringText("maxErrorText",u.surveyLocalization.getString("maxError"))},set:function(e){this.setLocalizableStringText("maxErrorText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locMaxErrorText",{get:function(){return this.getLocalizableString("maxErrorText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMinMaxType",{get:function(){return m.indexOf(this.inputType)>-1},enumerable:!1,configurable:!0}),t.prototype.onCheckForErrors=function(t,n){e.prototype.onCheckForErrors.call(this,t,n),n||this.canSetValueToSurvey()||(this.isValueLessMin&&t.push(new c.CustomError(this.getMinMaxErrorText(this.minErrorText,this.getCalculatedMinMax(this.renderedMin)),this)),this.isValueGreaterMax&&t.push(new c.CustomError(this.getMinMaxErrorText(this.maxErrorText,this.getCalculatedMinMax(this.renderedMax)),this)))},t.prototype.canSetValueToSurvey=function(){return!this.isMinMaxType||!this.isValueLessMin&&!this.isValueGreaterMax},t.prototype.getMinMaxErrorText=function(e,t){return t?e.replace("{0}",t.toString()):e},Object.defineProperty(t.prototype,"isValueLessMin",{get:function(){return!this.isValueEmpty(this.renderedMin)&&this.getCalculatedMinMax(this.value)<this.getCalculatedMinMax(this.renderedMin)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValueGreaterMax",{get:function(){return!this.isValueEmpty(this.renderedMax)&&this.getCalculatedMinMax(this.value)>this.getCalculatedMinMax(this.renderedMax)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDateInputType",{get:function(){return"date"===this.inputType||"datetime-local"===this.inputType},enumerable:!1,configurable:!0}),t.prototype.getCalculatedMinMax=function(e){return this.isValueEmpty(e)?e:this.isDateInputType?new Date(e):e},t.prototype.setRenderedMinMax=function(e,t){var n=this;void 0===e&&(e=null),void 0===t&&(t=null),this.setValueAndRunExpression(this.minValueExpression,this.min,(function(e){!e&&n.isDateInputType&&p.settings.minDate&&(e=p.settings.minDate),n.setPropertyValue("renderedMin",e)}),e,t),this.setValueAndRunExpression(this.maxValueExpression,this.max,(function(e){!e&&n.isDateInputType&&(e=p.settings.maxDate?p.settings.maxDate:"2999-12-31"),n.setPropertyValue("renderedMax",e)}),e,t)},Object.defineProperty(t.prototype,"step",{get:function(){return this.getPropertyValue("step")},set:function(e){this.setPropertyValue("step",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedStep",{get:function(){return this.isValueEmpty(this.step)?"any":this.step},enumerable:!1,configurable:!0}),t.prototype.supportGoNextPageAutomatic=function(){return["date","datetime","datetime-local"].indexOf(this.inputType)<0},t.prototype.supportGoNextPageError=function(){return["date","datetime","datetime-local"].indexOf(this.inputType)<0},Object.defineProperty(t.prototype,"dataList",{get:function(){return this.locDataList.value},set:function(e){this.locDataList.value=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locDataList",{get:function(){return this.locDataListValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataListId",{get:function(){return this.locDataList.isEmpty?"":this.id+"_datalist"},enumerable:!1,configurable:!0}),t.prototype.canRunValidators=function(e){return this.errors.length>0||!e||this.supportGoNextPageError()},t.prototype.setNewValue=function(t){t=this.correctValueType(t),e.prototype.setNewValue.call(this,t)},t.prototype.correctValueType=function(e){return!e||"number"!=this.inputType&&"range"!=this.inputType?e:s.Helpers.isNumber(e)?parseFloat(e):""},t.prototype.getControlClass=function(){var e=this.cssClasses,t=e.root+(this.errors.length>0?" "+e.onError:"");return this.isReadOnly&&(t+=" "+e.controlDisabled),t},t.prototype.hasPlaceHolder=function(){return!this.isReadOnly&&"range"!==this.inputType},t}(d.QuestionTextBase),m=["number","range","date","datetime-local","month","time","week"];o.Serializer.addClass("text",[{name:"inputType",default:"text",choices:["color","date","datetime","datetime-local","email","month","number","password","range","tel","text","time","url","week"]},{name:"size:number",minValue:0,dependsOn:"inputType",visibleIf:function(e){return!!e&&e.isTextInput}},{name:"textUpdateMode",default:"default",choices:["default","onBlur","onTyping"],dependsOn:"inputType",visibleIf:function(e){return!!e&&e.isTextInput}},{name:"autoComplete",dataList:["name","honorific-prefix","given-name","additional-name","family-name","honorific-suffix","nickname","organization-title","username","new-password","current-password","organization","street-address","address-line1","address-line2","address-line3","address-level4","address-level3","address-level2","address-level1","country","country-name","postal-code","cc-name","cc-given-name","cc-additional-name","cc-family-name","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc","cc-type","transaction-currency","transaction-amount","language","bday","bday-day","bday-month","bday-year","sex","url","photo","tel","tel-country-code","tel-national","tel-area-code","tel-local","tel-local-prefix","tel-local-suffix","tel-extension","email","impp"]},{name:"min",dependsOn:"inputType",visibleIf:function(e){return!!e&&e.isMinMaxType},onPropertyEditorUpdate:function(e,t){t.inputType=e.inputType}},{name:"max",dependsOn:"inputType",visibleIf:function(e){return!!e&&e.isMinMaxType},onPropertyEditorUpdate:function(e,t){t.inputType=e.inputType}},{name:"minValueExpression:expression",category:"logic",dependsOn:"inputType",visibleIf:function(e){return!!e&&e.isMinMaxType}},{name:"maxValueExpression:expression",category:"logic",dependsOn:"inputType",visibleIf:function(e){return!!e&&e.isMinMaxType}},{name:"minErrorText",serializationProperty:"locMinErrorText",dependsOn:"inputType",visibleIf:function(e){return!!e&&e.isMinMaxType}},{name:"maxErrorText",serializationProperty:"locMaxErrorText",dependsOn:"inputType",visibleIf:function(e){return!!e&&e.isMinMaxType}},{name:"step:number",dependsOn:"inputType",visibleIf:function(e){return!!e&&"number"===e.inputType}},{name:"maxLength:number",default:-1,dependsOn:"inputType",visibleIf:function(e){return!!e&&e.isTextInput}},{name:"placeHolder",serializationProperty:"locPlaceHolder",dependsOn:"inputType",visibleIf:function(e){return!!e&&e.isTextInput}},{name:"dataList:string[]",serializationProperty:"locDataList",dependsOn:"inputType",visibleIf:function(e){return!!e&&"text"===e.inputType}}],(function(){return new f("")}),"textbase"),i.QuestionFactory.Instance.registerQuestion("text",(function(e){return new f(e)}))},"./src/question_textbase.ts":
/*!**********************************!*\
  !*** ./src/question_textbase.ts ***!
  \**********************************/
/*! exports provided: QuestionTextBase */function(e,t,n){"use strict";n.r(t),n.d(t,"QuestionTextBase",(function(){return l}));var r,i=n(/*! ./question */"./src/question.ts"),o=n(/*! ./jsonobject */"./src/jsonobject.ts"),a=n(/*! ./helpers */"./src/helpers.ts"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t){var n=e.call(this,t)||this;return n.createLocalizableString("placeHolder",n),n}return s(t,e),t.prototype.isTextValue=function(){return!0},Object.defineProperty(t.prototype,"maxLength",{get:function(){return this.getPropertyValue("maxLength")},set:function(e){this.setPropertyValue("maxLength",e)},enumerable:!1,configurable:!0}),t.prototype.getMaxLength=function(){return a.Helpers.getMaxLength(this.maxLength,this.survey?this.survey.maxTextLength:-1)},Object.defineProperty(t.prototype,"placeHolder",{get:function(){return this.getLocalizableStringText("placeHolder")},set:function(e){this.setLocalizableStringText("placeHolder",e),this.calcRenderedPlaceHolder()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPlaceHolder",{get:function(){return this.getLocalizableString("placeHolder")},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"textbase"},t.prototype.isEmpty=function(){return e.prototype.isEmpty.call(this)||""===this.value},Object.defineProperty(t.prototype,"textUpdateMode",{get:function(){return this.getPropertyValue("textUpdateMode")},set:function(e){this.setPropertyValue("textUpdateMode",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSurveyInputTextUpdate",{get:function(){return"default"==this.textUpdateMode?!!this.survey&&this.survey.isUpdateValueTextOnTyping:"onTyping"==this.textUpdateMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedPlaceHolder",{get:function(){return this.getPropertyValue("renderedPlaceHolder")},enumerable:!1,configurable:!0}),t.prototype.setRenderedPlaceHolder=function(e){this.setPropertyValue("renderedPlaceHolder",e)},t.prototype.onReadOnlyChanged=function(){e.prototype.onReadOnlyChanged.call(this),this.calcRenderedPlaceHolder()},t.prototype.endLoadingFromJson=function(){e.prototype.endLoadingFromJson.call(this),this.calcRenderedPlaceHolder()},t.prototype.calcRenderedPlaceHolder=function(){this.setRenderedPlaceHolder(this.hasPlaceHolder()?this.placeHolder:void 0)},t.prototype.hasPlaceHolder=function(){return!this.isReadOnly},t}(i.Question);o.Serializer.addClass("textbase",[],(function(){return new l("")}),"question")},"./src/questionfactory.ts":
/*!********************************!*\
  !*** ./src/questionfactory.ts ***!
  \********************************/
/*! exports provided: QuestionFactory, ElementFactory */function(e,t,n){"use strict";n.r(t),n.d(t,"QuestionFactory",(function(){return o})),n.d(t,"ElementFactory",(function(){return a}));var r=n(/*! ./surveyStrings */"./src/surveyStrings.ts"),i=n(/*! ./jsonobject */"./src/jsonobject.ts"),o=function(){function e(){this.creatorHash={}}return Object.defineProperty(e,"DefaultChoices",{get:function(){return[r.surveyLocalization.getString("choices_Item")+"1",r.surveyLocalization.getString("choices_Item")+"2",r.surveyLocalization.getString("choices_Item")+"3"]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"DefaultColums",{get:function(){var e=r.surveyLocalization.getString("matrix_column")+" ";return[e+"1",e+"2",e+"3"]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"DefaultRows",{get:function(){var e=r.surveyLocalization.getString("matrix_row")+" ";return[e+"1",e+"2"]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"DefaultMutlipleTextItems",{get:function(){var e=r.surveyLocalization.getString("multipletext_itemname");return[e+"1",e+"2"]},enumerable:!1,configurable:!0}),e.prototype.registerQuestion=function(e,t){this.creatorHash[e]=t},e.prototype.unregisterElement=function(e){delete this.creatorHash[e]},e.prototype.clear=function(){this.creatorHash={}},e.prototype.getAllTypes=function(){var e=new Array;for(var t in this.creatorHash)e.push(t);return e.sort()},e.prototype.createQuestion=function(e,t){var n=this.creatorHash[e];return null==n?null:n(t)},e.Instance=new e,e}(),a=function(){function e(){this.creatorHash={}}return e.prototype.registerElement=function(e,t){this.creatorHash[e]=t},e.prototype.clear=function(){this.creatorHash={}},e.prototype.unregisterElement=function(e,t){void 0===t&&(t=!1),delete this.creatorHash[e],o.Instance.unregisterElement(e),t&&i.Serializer.removeClass(e)},e.prototype.getAllTypes=function(){var e=o.Instance.getAllTypes();for(var t in this.creatorHash)e.push(t);return e.sort()},e.prototype.createElement=function(e,t){var n=this.creatorHash[e];return null==n?o.Instance.createQuestion(e,t):n(t)},e.Instance=new e,e}()},"./src/questionnonvalue.ts":
/*!*********************************!*\
  !*** ./src/questionnonvalue.ts ***!
  \*********************************/
/*! exports provided: QuestionNonValue */function(e,t,n){"use strict";n.r(t),n.d(t,"QuestionNonValue",(function(){return s}));var r,i=n(/*! ./question */"./src/question.ts"),o=n(/*! ./jsonobject */"./src/jsonobject.ts"),a=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.getType=function(){return"nonvalue"},Object.defineProperty(t.prototype,"hasInput",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasTitle",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.getTitleLocation=function(){return""},Object.defineProperty(t.prototype,"hasComment",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.hasErrors=function(e,t){return void 0===e&&(e=!0),void 0===t&&(t=null),!1},t.prototype.getAllErrors=function(){return[]},t.prototype.supportGoNextPageAutomatic=function(){return!1},t.prototype.addConditionObjectsByContext=function(e,t){},t.prototype.getConditionJson=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=null),null},t}(i.Question);o.Serializer.addClass("nonvalue",[{name:"title",visible:!1},{name:"description",visible:!1},{name:"valueName",visible:!1},{name:"enableIf",visible:!1},{name:"defaultValue",visible:!1},{name:"correctAnswer",visible:!1},{name:"isRequired",visible:!1,isSerializable:!1},{name:"requiredErrorText",visible:!1},{name:"readOnly",visible:!1},{name:"requiredIf",visible:!1},{name:"validators",visible:!1},{name:"titleLocation",visible:!1},{name:"useDisplayValuesInTitle",visible:!1}],(function(){return new s("")}),"question")},"./src/react/boolean-checkbox.tsx":
/*!****************************************!*\
  !*** ./src/react/boolean-checkbox.tsx ***!
  \****************************************/
/*! exports provided: SurveyQuestionBooleanCheckbox */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyQuestionBooleanCheckbox",(function(){return u}));var r,i=n(/*! react */"react"),o=n(/*! ./reactquestion_factory */"./src/react/reactquestion_factory.tsx"),a=n(/*! ./boolean */"./src/react/boolean.tsx"),s=n(/*! survey-core */"./src/entries/core.ts"),l=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(t){return e.call(this,t)||this}return l(t,e),t.prototype.renderElement=function(){var e=this.question.cssClasses,t=this.getItemClass();return i.createElement("div",{className:e.root},i.createElement("label",{className:t,onClick:this.handleOnClick},i.createElement("input",{ref:this.checkRef,type:"checkbox",value:null===this.question.checkedValue?"":this.question.checkedValue,id:this.question.inputId,className:e.control,disabled:this.isDisplayMode,checked:this.question.checkedValue||!1,onChange:this.handleOnChange,"aria-label":this.question.locTitle.renderedHtml,"aria-invalid":this.question.errors.length>0,"aria-describedby":this.question.errors.length>0?this.question.id+"_errors":null}),i.createElement("span",{className:e.materialDecorator},i.createElement("svg",{viewBox:"0 0 24 24",className:e.itemDecorator},i.createElement("rect",{className:e.uncheckedPath,x:"5",y:"10",width:"14",height:"4"}),i.createElement("polygon",{className:e.checkedPath,points:"19,10 14,10 14,5 10,5 10,10 5,10 5,14 10,14 10,19 14,19 14,14 19,14 "}),i.createElement("path",{className:e.indeterminatePath,d:"M22,0H2C0.9,0,0,0.9,0,2v20c0,1.1,0.9,2,2,2h20c1.1,0,2-0.9,2-2V2C24,0.9,23.1,0,22,0z M21,18L6,3h15V18z M3,6l15,15H3V6z"})),i.createElement("span",{className:"check"})),"hidden"===this.question.titleLocation&&i.createElement("span",{className:e.label},this.question.locDisplayLabel.text)))},t}(a.SurveyQuestionBoolean);o.ReactQuestionFactory.Instance.registerQuestion("sv-boolean-checkbox",(function(e){return i.createElement(u,e)})),s.RendererFactory.Instance.registerRenderer("boolean","checkbox","sv-boolean-checkbox")},"./src/react/boolean.tsx":
/*!*******************************!*\
  !*** ./src/react/boolean.tsx ***!
  \*******************************/
/*! exports provided: SurveyQuestionBoolean */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyQuestionBoolean",(function(){return l}));var r,i=n(/*! react */"react"),o=n(/*! ./reactquestion_element */"./src/react/reactquestion_element.tsx"),a=n(/*! ./reactquestion_factory */"./src/react/reactquestion_factory.tsx"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t){var n=e.call(this,t)||this;return n.handleOnChange=n.handleOnChange.bind(n),n.handleOnClick=n.handleOnClick.bind(n),n.handleOnLabelClick=n.handleOnLabelClick.bind(n),n.handleOnSwitchClick=n.handleOnSwitchClick.bind(n),n.checkRef=i.createRef(),n}return s(t,e),Object.defineProperty(t.prototype,"question",{get:function(){return this.questionBase},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowClick",{get:function(){return this.question.isIndeterminate&&!this.isDisplayMode},enumerable:!1,configurable:!0}),t.prototype.preventDefaults=function(e){e.preventDefault(),e.stopPropagation()},t.prototype.doCheck=function(e){this.question.checkedValue=e,this.setState({value:this.question.checkedValue})},t.prototype.handleOnChange=function(e){this.doCheck(e.target.checked)},t.prototype.handleOnClick=function(e){this.allowClick&&(this.preventDefaults(e),this.question.checkedValue=!0,this.setState({value:this.question.checkedValue}))},t.prototype.handleOnSwitchClick=function(e){if(this.allowClick){this.preventDefaults(e);var t=e.nativeEvent.offsetX/e.target.offsetWidth>.5,n="rtl"==document.defaultView.getComputedStyle(e.target).direction?!t:t;return this.doCheck(n)}},t.prototype.handleOnLabelClick=function(e,t){this.allowClick&&(this.preventDefaults(e),this.doCheck(t))},t.prototype.updateDomElement=function(){if(this.question){var t=this.checkRef.current;t&&(t.indeterminate=this.question.isIndeterminate),this.control=t,e.prototype.updateDomElement.call(this)}},t.prototype.getItemClass=function(){var e=this.question.cssClasses,t=this.question.checkedValue,n=this.question.isReadOnly,r=e.item;return n&&(r+=" "+e.itemDisabled),t?r+=" "+e.itemChecked:null===t&&(r+=" "+e.itemIndeterminate),r},t.prototype.getLabelClass=function(e){var t=this.question;return this.question.cssClasses.label+" "+(t.checkedValue===!e||t.isReadOnly?t.cssClasses.disabledLabel:"")},t.prototype.getCheckedLabel=function(){return!0===this.question.checkedValue?this.question.locLabelTrue:!1===this.question.checkedValue?this.question.locLabelFalse:void 0},t.prototype.renderElement=function(){var e=this,t=this.question.cssClasses,n=this.getItemClass();return i.createElement("div",{className:t.root},i.createElement("label",{className:n,onClick:this.handleOnClick},i.createElement("input",{ref:this.checkRef,type:"checkbox",value:null===this.question.checkedValue?"":this.question.checkedValue,id:this.question.inputId,className:t.control,disabled:this.isDisplayMode,checked:this.question.checkedValue||!1,onChange:this.handleOnChange,"aria-label":this.question.locTitle.renderedHtml,"aria-invalid":this.question.errors.length>0,"aria-describedby":this.question.errors.length>0?this.question.id+"_errors":null}),i.createElement("span",{className:this.getLabelClass(!1),onClick:function(t){return e.handleOnLabelClick(t,!1)}},this.renderLocString(this.question.locLabelFalse)),i.createElement("div",{className:t.switch,onClick:this.handleOnSwitchClick},i.createElement("span",{className:t.slider},i.createElement("span",{className:t.sliderText},null!==this.question.checkedValue?this.renderLocString(this.getCheckedLabel()):null))),i.createElement("span",{className:this.getLabelClass(!0),onClick:function(t){return e.handleOnLabelClick(t,!0)}},this.renderLocString(this.question.locLabelTrue))))},t}(o.SurveyQuestionElementBase);a.ReactQuestionFactory.Instance.registerQuestion("boolean",(function(e){return i.createElement(l,e)}))},"./src/react/components/action-bar/action-bar-item-dropdown.tsx":
/*!**********************************************************************!*\
  !*** ./src/react/components/action-bar/action-bar-item-dropdown.tsx ***!
  \**********************************************************************/
/*! exports provided: SurveyActionBarItemDropdown */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyActionBarItemDropdown",(function(){return c}));var r,i=n(/*! react */"react"),o=n.n(i),a=n(/*! ../../element-factory */"./src/react/element-factory.tsx"),s=n(/*! ../popup/popup */"./src/react/components/popup/popup.tsx"),l=n(/*! ./action-bar-item */"./src/react/components/action-bar/action-bar-item.tsx"),u=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype.renderButtonContent=function(){var t=e.prototype.renderButtonContent.call(this);return o.a.createElement(o.a.Fragment,null,t,o.a.createElement(s.Popup,{model:this.item.popupModel}))},t}(l.SurveyActionBarItem);a.ReactElementFactory.Instance.registerElement("sv-action-bar-item-dropdown",(function(e){return o.a.createElement(c,e)}))},"./src/react/components/action-bar/action-bar-item.tsx":
/*!*************************************************************!*\
  !*** ./src/react/components/action-bar/action-bar-item.tsx ***!
  \*************************************************************/
/*! exports provided: SurveyAction, SurveyActionBarItem */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyAction",(function(){return p})),n.d(t,"SurveyActionBarItem",(function(){return d}));var r,i=n(/*! react */"react"),o=n.n(i),a=n(/*! ../../element-factory */"./src/react/element-factory.tsx"),s=n(/*! ../../reactquestion_element */"./src/react/reactquestion_element.tsx"),l=n(/*! ../svg-icon/svg-icon */"./src/react/components/svg-icon/svg-icon.tsx"),u=n(/*! ./action-bar-separator */"./src/react/components/action-bar/action-bar-separator.tsx"),c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),Object.defineProperty(t.prototype,"item",{get:function(){return this.props.item},enumerable:!1,configurable:!0}),t.prototype.getStateElement=function(){return this.item},t.prototype.renderElement=function(){var e="sv-action "+this.item.css+(this.item.isVisible?"":" sv-action--hidden"),t=this.item.needSeparator?o.a.createElement(u.SurveyActionBarSeparator,null):null,n=a.ReactElementFactory.Instance.createElement(this.item.component||"sv-action-bar-item",{item:this.item});return o.a.createElement("span",{className:e,id:this.item.id},t,n)},t}(s.SurveyElementBase),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),Object.defineProperty(t.prototype,"item",{get:function(){return this.props.item},enumerable:!1,configurable:!0}),t.prototype.getStateElement=function(){return this.item},t.prototype.renderElement=function(){return o.a.createElement(o.a.Fragment,null,this.renderInnerButton())},t.prototype.renderText=function(){if(this.item.hasTitle){var e="sv-action-bar-item__title "+(this.item.iconName?"sv-action-bar-item__title--with-icon":"");return o.a.createElement("span",{className:e}," ",this.item.title)}return null},t.prototype.renderButtonContent=function(){var e=this.renderText(),t=this.item.iconName?o.a.createElement(l.SvgIcon,{className:"sv-action-bar-item__icon",size:24,iconName:this.item.iconName}):null;return o.a.createElement(o.a.Fragment,null,t,e)},t.prototype.renderInnerButton=function(){var e=this,t="sv-action-bar-item "+this.item.innerCss+(this.item.active?" sv-action-bar-item--active":""),n=this.item.tooltip||this.item.title,r=this.renderButtonContent(),i=this.item.disableTabStop?-1:void 0;return o.a.createElement("button",{className:t,type:"button",disabled:this.item.disabled,onClick:function(){return e.item.action(e.item)},title:n,tabIndex:i},r)},t}(s.SurveyElementBase);a.ReactElementFactory.Instance.registerElement("sv-action-bar-item",(function(e){return o.a.createElement(d,e)}))},"./src/react/components/action-bar/action-bar-separator.tsx":
/*!******************************************************************!*\
  !*** ./src/react/components/action-bar/action-bar-separator.tsx ***!
  \******************************************************************/
/*! exports provided: SurveyActionBarSeparator */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyActionBarSeparator",(function(){return l}));var r,i=n(/*! react */"react"),o=n.n(i),a=n(/*! ../../element-factory */"./src/react/element-factory.tsx"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t){return e.call(this,t)||this}return s(t,e),t.prototype.render=function(){var e="sv-action-bar-separator "+this.props.cssClasses;return o.a.createElement("div",{className:e})},t}(o.a.Component);a.ReactElementFactory.Instance.registerElement("sv-action-bar-separator",(function(e){return o.a.createElement(l,e)}))},"./src/react/components/action-bar/action-bar.tsx":
/*!********************************************************!*\
  !*** ./src/react/components/action-bar/action-bar.tsx ***!
  \********************************************************/
/*! exports provided: SurveyActionBarItemDropdown, SurveyActionBarSeparator, SurveyActionBar */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyActionBar",(function(){return h}));var r=n(/*! react */"react"),i=n.n(r),o=n(/*! survey-core */"./src/entries/core.ts"),a=n(/*! ../../element-factory */"./src/react/element-factory.tsx"),s=n(/*! ../../reactquestion_element */"./src/react/reactquestion_element.tsx"),l=n(/*! ./action-bar-item */"./src/react/components/action-bar/action-bar-item.tsx"),u=n(/*! ./action-bar-item-dropdown */"./src/react/components/action-bar/action-bar-item-dropdown.tsx");n.d(t,"SurveyActionBarItemDropdown",(function(){return u.SurveyActionBarItemDropdown}));var c=n(/*! ./action-bar-separator */"./src/react/components/action-bar/action-bar-separator.tsx");n.d(t,"SurveyActionBarSeparator",(function(){return c.SurveyActionBarSeparator}));var p,d=(p=function(e,t){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}p(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),h=function(e){function t(t){var n=e.call(this,t)||this;return n.rootRef=i.a.createRef(),n}return d(t,e),Object.defineProperty(t.prototype,"handleClick",{get:function(){return void 0===this.props.handleClick||this.props.handleClick},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"model",{get:function(){return this.props.model},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){if(e.prototype.componentDidMount.call(this),this.hasItems){var t=this.rootRef.current;this.manager=new o.ResponsivityManager(t,this.model,"span.sv-action:not(.sv-dots)")}},t.prototype.componentWillUnmount=function(){this.manager&&this.manager.dispose(),e.prototype.componentWillUnmount.call(this)},t.prototype.getStateElement=function(){return this.model},t.prototype.renderElement=function(){if(!this.hasItems)return null;var e=this.renderItems();return i.a.createElement("div",{ref:this.rootRef,className:"sv-action-bar",onClick:this.handleClick?function(e){e.stopPropagation()}:void 0},e)},Object.defineProperty(t.prototype,"hasItems",{get:function(){return(this.model.actions||[]).length>0},enumerable:!1,configurable:!0}),t.prototype.renderItems=function(){return this.model.actions.map((function(e,t){return e.visible||void 0===e.visible?i.a.createElement(l.SurveyAction,{item:e,key:"item"+t}):null}))},t}(s.SurveyElementBase);a.ReactElementFactory.Instance.registerElement("sv-action-bar",(function(e){return i.a.createElement(h,e)}))},"./src/react/components/default-title/default-title.tsx":
/*!**************************************************************!*\
  !*** ./src/react/components/default-title/default-title.tsx ***!
  \**************************************************************/
/*! exports provided: DefaultTitle */function(e,t,n){"use strict";n.r(t),n.d(t,"DefaultTitle",(function(){return u}));var r,i=n(/*! react */"react"),o=n.n(i),a=n(/*! ../../element-factory */"./src/react/element-factory.tsx"),s=n(/*! ../title-content/title-content */"./src/react/components/title-content/title-content.tsx"),l=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isNeedFocus=!1,t}return l(t,e),Object.defineProperty(t.prototype,"cssClasses",{get:function(){return this.props.cssClasses},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this.props.element},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e=this,t=null;if(this.element.isCollapsed||this.element.isExpanded){var n=this.cssClasses.icon;this.element.isCollapsed||(n+=" "+this.cssClasses.iconExpanded);var r=this.element.isExpanded,i=this.element.isExpanded?this.element.contentId:null;t=o.a.createElement("span",{className:n,tabIndex:0,onKeyUp:function(t){var n;13==t.keyCode&&((n=e.element).isExpanded||n.isCollapsed)&&(n.toggleState(),e.isNeedFocus=n.isCollapsed)},"aria-expanded":r,"aria-controls":i})}return o.a.createElement(o.a.Fragment,null,o.a.createElement(s.TitleContent,{element:this.element,cssClasses:this.cssClasses}),t)},t.prototype.componentDidMount=function(){this.doAfterRender()},t.prototype.doAfterRender=function(){this.isNeedFocus&&(this.element.clickTitleFunction(),this.isNeedFocus=!1)},t}(o.a.Component);a.ReactElementFactory.Instance.registerElement("sv-default-title",(function(e){return o.a.createElement(u,e)}))},"./src/react/components/list/list.tsx":
/*!********************************************!*\
  !*** ./src/react/components/list/list.tsx ***!
  \********************************************/
/*! exports provided: List */function(e,t,n){"use strict";n.r(t),n.d(t,"List",(function(){return c}));var r,i=n(/*! react */"react"),o=n.n(i),a=n(/*! ../../element-factory */"./src/react/element-factory.tsx"),s=n(/*! ../../reactquestion_element */"./src/react/reactquestion_element.tsx"),l=n(/*! ../svg-icon/svg-icon */"./src/react/components/svg-icon/svg-icon.tsx"),u=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return this.props.model},enumerable:!1,configurable:!0}),t.prototype.getStateElement=function(){return this.model},t.prototype.render=function(){var e=this.renderItems();return o.a.createElement("ul",{className:"sv-list",onMouseDown:function(e){e.preventDefault()}},e)},t.prototype.renderItems=function(){var e=this;if(!this.model)return null;var t=this.model.items;return t?t.map((function(t,n){var r={paddingLeft:e.model.getItemIndent(t),display:void 0===t.visible||t.visible?null:"none"},i=e.model.getItemClass(t),a=t.iconName?o.a.createElement(l.SvgIcon,{className:"sv-list__item-icon",iconName:t.iconName,size:24}):null;return o.a.createElement("li",{style:r,key:n,className:i,onClick:function(){e.model.selectItem(t)}},a,o.a.createElement("span",null,t.title))})):null},t}(s.SurveyElementBase);a.ReactElementFactory.Instance.registerElement("sv-list",(function(e){return o.a.createElement(c,e)}))},"./src/react/components/matrix-actions/detail-button/detail-button.tsx":
/*!*****************************************************************************!*\
  !*** ./src/react/components/matrix-actions/detail-button/detail-button.tsx ***!
  \*****************************************************************************/
/*! exports provided: SurveyQuestionMatrixDetailButton */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyQuestionMatrixDetailButton",(function(){return u}));var r,i=n(/*! react */"react"),o=n.n(i),a=n(/*! ../../../element-factory */"./src/react/element-factory.tsx"),s=n(/*! ../../../reactquestion_element */"./src/react/reactquestion_element.tsx"),l=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(t){var n=e.call(this,t)||this;return n.handleOnShowHideClick=n.handleOnShowHideClick.bind(n),n}return l(t,e),t.prototype.getStateElement=function(){return this.props.item},Object.defineProperty(t.prototype,"item",{get:function(){return this.props.item},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"question",{get:function(){return this.props.item.data.question},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"row",{get:function(){return this.props.item.data.row},enumerable:!1,configurable:!0}),t.prototype.handleOnShowHideClick=function(e){this.row.showHideDetailPanelClick()},t.prototype.renderElement=function(){var e=this.row.isDetailPanelShowing,t=e,n=e?this.row.detailPanelId:null;return o.a.createElement("button",{type:"button",onClick:this.handleOnShowHideClick,className:this.question.getDetailPanelButtonCss(this.row),"aria-expanded":t,"aria-controls":n},o.a.createElement("span",{className:this.question.getDetailPanelIconCss(this.row)}))},t}(s.ReactSurveyElement);a.ReactElementFactory.Instance.registerElement("sv-matrix-detail-button",(function(e){return o.a.createElement(u,e)}))},"./src/react/components/matrix-actions/drag-drop-icon/drag-drop-icon.tsx":
/*!*******************************************************************************!*\
  !*** ./src/react/components/matrix-actions/drag-drop-icon/drag-drop-icon.tsx ***!
  \*******************************************************************************/
/*! exports provided: SurveyQuestionMatrixDynamicDragDropIcon */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyQuestionMatrixDynamicDragDropIcon",(function(){return u}));var r,i=n(/*! react */"react"),o=n.n(i),a=n(/*! ../../../element-factory */"./src/react/element-factory.tsx"),s=n(/*! ../../../reactquestion_element */"./src/react/reactquestion_element.tsx"),l=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),Object.defineProperty(t.prototype,"question",{get:function(){return this.props.item.data.question},enumerable:!1,configurable:!0}),t.prototype.renderElement=function(){return o.a.createElement("span",{className:this.question.cssClasses.iconDrag})},t}(s.ReactSurveyElement);a.ReactElementFactory.Instance.registerElement("sv-matrix-drag-drop-icon",(function(e){return o.a.createElement(u,e)}))},"./src/react/components/matrix-actions/remove-button/remove-button.tsx":
/*!*****************************************************************************!*\
  !*** ./src/react/components/matrix-actions/remove-button/remove-button.tsx ***!
  \*****************************************************************************/
/*! exports provided: SurveyQuestionMatrixDynamicRemoveButton */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyQuestionMatrixDynamicRemoveButton",(function(){return u}));var r,i=n(/*! react */"react"),o=n.n(i),a=n(/*! ../../../element-factory */"./src/react/element-factory.tsx"),s=n(/*! ../../../reactquestion_element */"./src/react/reactquestion_element.tsx"),l=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(t){var n=e.call(this,t)||this;return n.handleOnRowRemoveClick=n.handleOnRowRemoveClick.bind(n),n}return l(t,e),Object.defineProperty(t.prototype,"question",{get:function(){return this.props.item.data.question},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"row",{get:function(){return this.props.item.data.row},enumerable:!1,configurable:!0}),t.prototype.handleOnRowRemoveClick=function(e){this.question.removeRowUI(this.row)},t.prototype.renderElement=function(){var e=this.renderLocString(this.question.locRemoveRowText);return o.a.createElement("button",{className:this.question.cssClasses.button+" "+this.question.cssClasses.buttonRemove,type:"button",onClick:this.handleOnRowRemoveClick,disabled:this.question.isInputReadOnly},e,o.a.createElement("span",{className:this.question.cssClasses.iconRemove}))},t}(s.ReactSurveyElement);a.ReactElementFactory.Instance.registerElement("sv-matrix-remove-button",(function(e){return o.a.createElement(u,e)}))},"./src/react/components/popup/popup.tsx":
/*!**********************************************!*\
  !*** ./src/react/components/popup/popup.tsx ***!
  \**********************************************/
/*! exports provided: Popup, PopupContainer, showModal */function(e,t,n){"use strict";n.r(t),n.d(t,"Popup",(function(){return d})),n.d(t,"PopupContainer",(function(){return h})),n.d(t,"showModal",(function(){return f}));var r,i=n(/*! react */"react"),o=n.n(i),a=n(/*! react-dom */"react-dom"),s=n.n(a),l=n(/*! survey-core */"./src/entries/core.ts"),u=n(/*! ../../element-factory */"./src/react/element-factory.tsx"),c=n(/*! ../../reactquestion_element */"./src/react/reactquestion_element.tsx"),p=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),d=function(e){function t(t){var n=e.call(this,t)||this;return n.containerRef=o.a.createRef(),n.popup=new l.PopupBaseViewModel(n.props.model),n.popup.createPopupContainer(),n}return p(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return this.props.model},enumerable:!1,configurable:!0}),t.prototype.getStateElement=function(){return this.model},t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this),this.popup.mountPopupContainer(),this.popup.targetElement=this.containerRef.current.parentElement},t.prototype.componentWillUnmount=function(){this.popup.destroyPopupContainer()},t.prototype.render=function(){var e=s.a.createPortal(o.a.createElement(h,{model:this.popup}),this.popup.container);return o.a.createElement("div",{ref:this.containerRef},e)},t}(c.SurveyElementBase);u.ReactElementFactory.Instance.registerElement("sv-popup",(function(e){return o.a.createElement(d,e)}));var h=function(e){function t(t){var n=e.call(this,t)||this;return n.prevIsVisible=!1,n.handleKeydown=function(e){n.model.onKeyDown(e)},n.clickInside=function(e){e.stopPropagation()},n}return p(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return this.props.model},enumerable:!1,configurable:!0}),t.prototype.getStateElement=function(){return this.model},t.prototype.componentDidUpdate=function(t,n){e.prototype.componentDidUpdate.call(this,t,n),!this.prevIsVisible&&this.model.isVisible&&this.model.updateOnShowing(),this.prevIsVisible=this.model.isVisible},t.prototype.renderContainer=function(){var e=this,t=this.model.showPointer?this.renderPointer():null,n=this.renderHeader(),r=this.renderContent(),i=this.model.isModal?this.renderFooter():null;return o.a.createElement("div",{className:"sv-popup__container",style:{left:this.model.left,top:this.model.top,height:this.model.height},onClick:function(t){e.clickInside(t)}},t,o.a.createElement("div",{className:"sv-popup__scrolling-content"},n,r,i))},t.prototype.renderPointer=function(){return o.a.createElement("span",{style:{left:this.model.pointerTarget.left,top:this.model.pointerTarget.top},className:"sv-popup__pointer"})},t.prototype.renderHeader=function(){return o.a.createElement("div",{className:"sv-popup__header"})},t.prototype.renderContent=function(){var e=u.ReactElementFactory.Instance.createElement(this.model.contentComponentName,this.model.contentComponentData);return o.a.createElement("div",{className:"sv-popup__content"},e)},t.prototype.renderFooter=function(){var e=this;return o.a.createElement("div",{className:"sv-popup__footer"},o.a.createElement("button",{className:"sv-popup__footer-item sv-popup__button sv-popup__button--cancel",onClick:function(){e.model.cancel()}},this.model.cancelButtonText),o.a.createElement("button",{className:"sv-popup__footer-item sv-popup__button sv-popup__button--apply",onClick:function(){e.model.apply()}},this.model.applyButtonText))},t.prototype.render=function(){var e=this,t=this.renderContainer(),n="sv-popup "+this.model.styleClass,r={display:this.model.isVisible?"":"none"};return o.a.createElement("div",{tabIndex:-1,className:n,style:r,onClick:function(t){e.model.clickOutside(),t.stopPropagation()},onKeyDown:this.handleKeydown},t)},t}(c.SurveyElementBase);function f(e,t,n,r){var i=new l.PopupModel(e,t,"top","left",!1,!0,r,n),a=new l.PopupBaseViewModel(i,void 0);a.initializePopupContainer(),i.onHide=function(){s.a.unmountComponentAtNode(a.container),a.destroyPopupContainer()},s.a.render(o.a.createElement(h,{model:a}),a.container),a.model.isVisible=!0}l.settings.showModal=f},"./src/react/components/survey-header/logo-image.tsx":
/*!***********************************************************!*\
  !*** ./src/react/components/survey-header/logo-image.tsx ***!
  \***********************************************************/
/*! exports provided: LogoImage */function(e,t,n){"use strict";n.r(t),n.d(t,"LogoImage",(function(){return l}));var r,i=n(/*! react */"react"),o=n.n(i),a=n(/*! ../../element-factory */"./src/react/element-factory.tsx"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t){return e.call(this,t)||this}return s(t,e),Object.defineProperty(t.prototype,"survey",{get:function(){return this.props.data},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e=[];return e.push(o.a.createElement("div",{key:"logo-image",className:this.survey.logoClassNames},o.a.createElement("img",{className:this.survey.css.logoImage,src:this.survey.locLogo.renderedHtml,alt:this.survey.locTitle.renderedHtml,width:this.survey.logoWidth?this.survey.logoWidth:void 0,height:this.survey.logoHeight?this.survey.logoHeight:void 0,style:{objectFit:this.survey.logoFit}}))),this.survey.isLogoAfter&&e.push(o.a.createElement("div",{key:"logo-image-tail",className:"sv-logo--right-tail"})),o.a.createElement(o.a.Fragment,null,e)},t}(o.a.Component);a.ReactElementFactory.Instance.registerElement("sv-logo-image",(function(e){return o.a.createElement(l,e)}))},"./src/react/components/survey-header/survey-header.tsx":
/*!**************************************************************!*\
  !*** ./src/react/components/survey-header/survey-header.tsx ***!
  \**************************************************************/
/*! exports provided: SurveyHeader */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyHeader",(function(){return u}));var r,i=n(/*! react */"react"),o=n.n(i),a=n(/*! ../../reactquestion_element */"./src/react/reactquestion_element.tsx"),s=n(/*! ../../element-factory */"./src/react/element-factory.tsx"),l=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(t){var n=e.call(this,t)||this;return n.state={changed:0},n}return l(t,e),Object.defineProperty(t.prototype,"survey",{get:function(){return this.props.survey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"css",{get:function(){return this.survey.css},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){var e=this;this.survey.locLogo.onChanged=function(){e.setState({changed:e.state.changed+1})}},t.prototype.componentWillUnmount=function(){this.survey.locLogo.onChanged=function(){}},t.prototype.renderTitle=function(){if(!this.survey.renderedHasTitle)return null;var e=a.SurveyElementBase.renderLocString(this.survey.locTitle),t=a.SurveyElementBase.renderLocString(this.survey.locDescription);return o.a.createElement("div",{className:this.css.headerText,style:{maxWidth:this.survey.titleMaxWidth}},o.a.createElement("h3",{className:this.css.title},e),o.a.createElement("h5",{className:this.css.description},t))},t.prototype.renderLogoImage=function(e){if(!e)return null;var t=this.survey.getElementWrapperComponentName(this.survey,"logo-image"),n=this.survey.getElementWrapperComponentData(this.survey,"logo-image");return s.ReactElementFactory.Instance.createElement(t,{data:n})},t.prototype.render=function(){return this.survey.renderedHasHeader?o.a.createElement("div",{className:this.css.header},this.renderLogoImage(this.survey.isLogoBefore),this.renderTitle(),this.renderLogoImage(this.survey.isLogoAfter)):null},t}(o.a.Component);s.ReactElementFactory.Instance.registerElement("survey-header",(function(e){return o.a.createElement(u,e)}))},"./src/react/components/svg-icon/svg-icon.tsx":
/*!****************************************************!*\
  !*** ./src/react/components/svg-icon/svg-icon.tsx ***!
  \****************************************************/
/*! exports provided: SvgIcon */function(e,t,n){"use strict";n.r(t),n.d(t,"SvgIcon",(function(){return u}));var r,i=n(/*! react */"react"),o=n.n(i),a=n(/*! ../../element-factory */"./src/react/element-factory.tsx"),s=n(/*! survey-core */"./src/entries/core.ts"),l=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(t){var n=e.call(this,t)||this;return n.svgIconRef=o.a.createRef(),n}return l(t,e),t.prototype.updateSvg=function(){Object(s.createSvg)(this.props.size,this.props.width,this.props.height,this.props.iconName,this.svgIconRef.current)},t.prototype.componentDidUpdate=function(){this.updateSvg()},t.prototype.render=function(){return o.a.createElement("span",{className:this.props.className,onClick:this.props.onClick},o.a.createElement("svg",{className:"sv-svg-icon",ref:this.svgIconRef,role:"img"},o.a.createElement("use",null)))},t.prototype.componentDidMount=function(){this.updateSvg()},t}(o.a.Component);a.ReactElementFactory.Instance.registerElement("sv-svg-icon",(function(e){return o.a.createElement(u,e)}))},"./src/react/components/title-actions/title-actions.tsx":
/*!**************************************************************!*\
  !*** ./src/react/components/title-actions/title-actions.tsx ***!
  \**************************************************************/
/*! exports provided: TitleActions */function(e,t,n){"use strict";n.r(t),n.d(t,"TitleActions",(function(){return d}));var r,i=n(/*! react */"react"),o=n.n(i),a=n(/*! survey-core */"./src/entries/core.ts"),s=n(/*! ../../element-factory */"./src/react/element-factory.tsx"),l=n(/*! ../../reactquestion_element */"./src/react/reactquestion_element.tsx"),u=n(/*! ../action-bar/action-bar */"./src/react/components/action-bar/action-bar.tsx"),c=n(/*! ../title-content/title-content */"./src/react/components/title-content/title-content.tsx"),p=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return p(t,e),Object.defineProperty(t.prototype,"cssClasses",{get:function(){return this.props.cssClasses},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this.props.element},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e=this.element.isPage?o.a.createElement(o.a.Fragment,null,l.SurveyElementBase.renderLocString(this.element.locTitle)):o.a.createElement(c.TitleContent,{element:this.element,cssClasses:this.cssClasses});return o.a.createElement("div",{className:"sv-title-actions"},o.a.createElement("span",{className:"sv-title-actions__title"},e),o.a.createElement(u.SurveyActionBar,{model:this.element.getTitleToolbar()}))},t}(o.a.Component);a.RendererFactory.Instance.registerRenderer("element","title-actions","sv-title-actions"),s.ReactElementFactory.Instance.registerElement("sv-title-actions",(function(e){return o.a.createElement(d,e)}))},"./src/react/components/title-content/title-content.tsx":
/*!**************************************************************!*\
  !*** ./src/react/components/title-content/title-content.tsx ***!
  \**************************************************************/
/*! exports provided: TitleContent */function(e,t,n){"use strict";n.r(t),n.d(t,"TitleContent",(function(){return l}));var r,i=n(/*! react */"react"),o=n.n(i),a=n(/*! ../../reactquestion_element */"./src/react/reactquestion_element.tsx"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t){var n=e.call(this,t)||this;return n.titleKeyIndex=0,n.titleKeyPrefix="-titleKey-",n.getTitleKey=function(e){return n.titleKeyIndex++,e.name+n.titleKeyPrefix+n.titleKeyIndex},n}return s(t,e),Object.defineProperty(t.prototype,"cssClasses",{get:function(){return this.props.cssClasses},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){return this.props.element},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e=this.renderTitleSpans(this.element,this.cssClasses);return o.a.createElement(o.a.Fragment,null,e)},t.prototype.renderTitleSpans=function(e,t){var n=this,r=function(){return o.a.createElement("span",{"data-key":n.getTitleKey(e),key:n.getTitleKey(e)},"")},i=[];e.isRequireTextOnStart&&(i.push(this.renderRequireText(e,t)),i.push(r()));var s=e.no;return s&&(i.push(o.a.createElement("span",{"data-key":this.getTitleKey(e),key:this.getTitleKey(e),className:t.number,style:{position:"static"},"aria-hidden":!0},s)),i.push(r())),e.isRequireTextBeforeTitle&&(i.push(this.renderRequireText(e,t)),i.push(r())),i.push(a.SurveyElementBase.renderLocString(e.locTitle,null,this.getTitleKey(e))),e.isRequireTextAfterTitle&&(i.push(r()),i.push(this.renderRequireText(e,t))),i},t.prototype.renderRequireText=function(e,t){return o.a.createElement("span",{"data-key":this.getTitleKey(e),key:this.getTitleKey(e),className:t.requiredText||t.panel.requiredText,"aria-hidden":!0},e.requiredText)},t}(o.a.Component)},"./src/react/custom-widget.tsx":
/*!*************************************!*\
  !*** ./src/react/custom-widget.tsx ***!
  \*************************************/
/*! exports provided: SurveyCustomWidget */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyCustomWidget",(function(){return s}));var r,i=n(/*! react */"react"),o=n(/*! ./reactquestion_element */"./src/react/reactquestion_element.tsx"),a=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e){function t(t){var n=e.call(this,t)||this;return n.widgetRef=i.createRef(),n}return a(t,e),t.prototype._afterRender=function(){if(this.questionBase.customWidget){var e=this.widgetRef.current;e&&(this.questionBase.customWidget.afterRender(this.questionBase,e),this.questionBase.customWidgetData.isNeedRender=!1)}},t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this),this.questionBase&&this._afterRender()},t.prototype.componentDidUpdate=function(t,n){e.prototype.componentDidUpdate.call(this,t,n);var r=!!this.questionBase.customWidget&&this.questionBase.customWidget.isDefaultRender;this.questionBase&&!r&&this._afterRender()},t.prototype.componentWillUnmount=function(){if(e.prototype.componentWillUnmount.call(this),this.questionBase.customWidget){var t=this.widgetRef.current;t&&this.questionBase.customWidget.willUnmount(this.questionBase,t)}},t.prototype.canRender=function(){return e.prototype.canRender.call(this)&&this.questionBase.visible},t.prototype.renderElement=function(){var e=this.questionBase.customWidget;if(e.isDefaultRender)return i.createElement("div",{ref:this.widgetRef},this.creator.createQuestionElement(this.questionBase));var t=null;if(e.widgetJson.render)t=e.widgetJson.render(this.questionBase);else if(e.htmlTemplate){var n={__html:e.htmlTemplate};return i.createElement("div",{ref:this.widgetRef,dangerouslySetInnerHTML:n})}return i.createElement("div",{ref:this.widgetRef},t)},t}(o.SurveyQuestionElementBase)},"./src/react/element-factory.tsx":
/*!***************************************!*\
  !*** ./src/react/element-factory.tsx ***!
  \***************************************/
/*! exports provided: ReactElementFactory */function(e,t,n){"use strict";n.r(t),n.d(t,"ReactElementFactory",(function(){return r}));var r=function(){function e(){this.creatorHash={}}return e.prototype.registerElement=function(e,t){this.creatorHash[e]=t},e.prototype.getAllTypes=function(){var e=new Array;for(var t in this.creatorHash)e.push(t);return e.sort()},e.prototype.isElementRegistered=function(e){return!!this.creatorHash[e]},e.prototype.createElement=function(e,t){var n=this.creatorHash[e];return null==n?null:n(t)},e.Instance=new e,e}()},"./src/react/flow-panel.tsx":
/*!**********************************!*\
  !*** ./src/react/flow-panel.tsx ***!
  \**********************************/
/*! exports provided: SurveyFlowPanel */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyFlowPanel",(function(){return u}));var r,i=n(/*! react */"react"),o=n(/*! ./reactquestion */"./src/react/reactquestion.tsx"),a=n(/*! ./element-factory */"./src/react/element-factory.tsx"),s=n(/*! ./panel */"./src/react/panel.tsx"),l=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(t){return e.call(this,t)||this}return l(t,e),Object.defineProperty(t.prototype,"flowPanel",{get:function(){return this.panel},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this),this.flowPanel&&(this.flowPanel.onCustomHtmlProducing=function(){return""},this.flowPanel.onGetHtmlForQuestion=this.renderQuestion)},t.prototype.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this),this.flowPanel&&(this.flowPanel.onCustomHtmlProducing=null,this.flowPanel.onGetHtmlForQuestion=null)},t.prototype.getQuestion=function(e){return this.flowPanel.getQuestionByName(e)},t.prototype.renderQuestion=function(e){return"<question>"+e.name+"</question>"},t.prototype.renderRows=function(){return[this.renderHtml()]},t.prototype.getNodeIndex=function(){return this.renderedIndex++},t.prototype.renderHtml=function(){if(!this.flowPanel)return null;var e="<span>"+this.flowPanel.produceHtml()+"</span>";if(!DOMParser){var t={__html:e};return i.createElement("div",{dangerouslySetInnerHTML:t})}var n=(new DOMParser).parseFromString(e,"text/xml");return this.renderedIndex=0,this.renderParentNode(n)},t.prototype.renderNodes=function(e){for(var t=[],n=0;n<e.length;n++)t.push(this.renderNode(e[n]));return t},t.prototype.getStyle=function(e){var t={};return"b"===e.toLowerCase()&&(t.fontWeight="bold"),"i"===e.toLowerCase()&&(t.fontStyle="italic"),"u"===e.toLowerCase()&&(t.textDecoration="underline"),t},t.prototype.renderParentNode=function(e){var t=e.nodeName.toLowerCase(),n=this.renderNodes(this.getChildDomNodes(e));return"div"==t?i.createElement("div",{key:this.getNodeIndex()},n):i.createElement("span",{key:this.getNodeIndex(),style:this.getStyle(t)},n)},t.prototype.renderNode=function(e){if(!this.hasTextChildNodesOnly(e))return this.renderParentNode(e);var t=e.nodeName.toLowerCase();if("question"===t){var n=this.flowPanel.getQuestionByName(e.textContent);if(!n)return null;var r=i.createElement(o.SurveyQuestion,{key:n.name,element:n,creator:this.creator,css:this.css});return i.createElement("span",{key:this.getNodeIndex()},r)}return"div"===t?i.createElement("div",{key:this.getNodeIndex()},e.textContent):i.createElement("span",{key:this.getNodeIndex(),style:this.getStyle(t)},e.textContent)},t.prototype.getChildDomNodes=function(e){for(var t=[],n=0;n<e.childNodes.length;n++)t.push(e.childNodes[n]);return t},t.prototype.hasTextChildNodesOnly=function(e){for(var t=e.childNodes,n=0;n<t.length;n++)if("#text"!==t[n].nodeName.toLowerCase())return!1;return!0},t.prototype.renderContent=function(e,t){return i.createElement("f-panel",{style:e},t)},t}(s.SurveyPanel);a.ReactElementFactory.Instance.registerElement("flowpanel",(function(e){return i.createElement(u,e)}))},"./src/react/image.tsx":
/*!*****************************!*\
  !*** ./src/react/image.tsx ***!
  \*****************************/
/*! exports provided: SurveyQuestionImage */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyQuestionImage",(function(){return l}));var r,i=n(/*! react */"react"),o=n(/*! ./reactquestion_element */"./src/react/reactquestion_element.tsx"),a=n(/*! ./reactquestion_factory */"./src/react/reactquestion_factory.tsx"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t){return e.call(this,t)||this}return s(t,e),t.prototype.componentDidMount=function(){var t=this;e.prototype.componentDidMount.call(this),this.question.locImageLink.onChanged=function(){t.forceUpdate()}},t.prototype.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this),this.question.locImageLink.onChanged=function(){}},Object.defineProperty(t.prototype,"question",{get:function(){return this.questionBase},enumerable:!1,configurable:!0}),t.prototype.canRender=function(){return e.prototype.canRender.call(this)&&!!this.question.imageLink},t.prototype.renderElement=function(){var e=this.question.cssClasses,t={objectFit:this.question.imageFit},n=null;return"image"===this.question.contentMode&&(n=i.createElement("img",{className:e.image,src:this.question.locImageLink.renderedHtml,alt:this.question.text||this.question.title,width:this.question.imageWidth?this.question.imageWidth+"px":void 0,height:this.question.imageHeight?this.question.imageHeight+"px":void 0,style:t})),"video"===this.question.contentMode&&(n=i.createElement("embed",{className:e.image,src:this.question.imageLink,width:this.question.imageWidth?this.question.imageWidth+"px":void 0,height:this.question.imageHeight?this.question.imageHeight+"px":void 0,style:t})),i.createElement("div",{className:this.question.cssClasses.root},n)},t}(o.SurveyQuestionElementBase);a.ReactQuestionFactory.Instance.registerQuestion("image",(function(e){return i.createElement(l,e)}))},"./src/react/imagepicker.tsx":
/*!***********************************!*\
  !*** ./src/react/imagepicker.tsx ***!
  \***********************************/
/*! exports provided: SurveyQuestionImagePicker */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyQuestionImagePicker",(function(){return l}));var r,i=n(/*! react */"react"),o=n(/*! ./reactquestion_element */"./src/react/reactquestion_element.tsx"),a=n(/*! ./reactquestion_factory */"./src/react/reactquestion_factory.tsx"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t){var n=e.call(this,t)||this;return n.handleOnChange=n.handleOnChange.bind(n),n}return s(t,e),Object.defineProperty(t.prototype,"question",{get:function(){return this.questionBase},enumerable:!1,configurable:!0}),t.prototype.handleOnChange=function(e){if(this.question.multiSelect)if(e.target.checked)this.question.value=this.question.value.concat(e.target.value);else{var t=this.question.value;t.splice(this.question.value.indexOf(e.target.value),1),this.question.value=t}else this.question.value=e.target.value;this.setState({value:this.question.value})},t.prototype.renderElement=function(){var e=this.question.cssClasses;return i.createElement("fieldset",{className:e.root},i.createElement("legend",{"aria-label":this.question.locTitle.renderedHtml}),this.getItems(e))},t.prototype.getItems=function(e){for(var t=[],n=0;n<this.question.visibleChoices.length;n++){var r=this.question.visibleChoices[n],i="item"+n;t.push(this.renderItem(i,r,e))}return t},Object.defineProperty(t.prototype,"textStyle",{get:function(){return{marginLeft:"3px",display:"inline",position:"static"}},enumerable:!1,configurable:!0}),t.prototype.renderItem=function(e,t,n){var r=this.question.isItemSelected(t),o=this.question.inputId+"_"+t.value,a=this.question.getItemClass(t),s=null;this.question.showLabel&&(s=i.createElement("span",{title:t.text||t.value,className:this.question.cssClasses.itemText},t.text||t.value));var l={objectFit:this.question.imageFit},u=null;"image"===this.question.contentMode&&(u=i.createElement("img",{className:n.image,src:t.imageLink,width:this.question.imageWidth?this.question.imageWidth+"px":void 0,height:this.question.imageHeight?this.question.imageHeight+"px":void 0,alt:t.text||t.value,style:l})),"video"===this.question.contentMode&&(u=i.createElement("embed",{className:n.image,src:t.imageLink,width:this.question.imageWidth?this.question.imageWidth+"px":void 0,height:this.question.imageHeight?this.question.imageHeight+"px":void 0,style:l}));var c=i.createElement("div",{key:e,className:a},i.createElement("label",{className:n.label},i.createElement("input",{style:{display:"none"},className:n.itemControl,id:o,type:this.question.multiSelect?"checkbox":"radio",name:this.question.name+"_"+this.questionBase.id,checked:r,value:t.value,disabled:this.isDisplayMode||!t.isEnabled,onChange:this.handleOnChange,"aria-label":this.question.locTitle.renderedHtml,"aria-invalid":this.question.errors.length>0,"aria-describedby":this.question.errors.length>0?this.question.id+"_errors":null}),i.createElement("div",null,u,s))),p=this.question.survey,d=null;return p&&(d=p.wrapItemValue(c,this.question,t)),null!=d?d:c},t}(o.SurveyQuestionElementBase);a.ReactQuestionFactory.Instance.registerQuestion("imagepicker",(function(e){return i.createElement(l,e)}))},"./src/react/page.tsx":
/*!****************************!*\
  !*** ./src/react/page.tsx ***!
  \****************************/
/*! exports provided: SurveyPage */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyPage",(function(){return u}));var r,i=n(/*! react */"react"),o=n(/*! ./reactquestion_element */"./src/react/reactquestion_element.tsx"),a=n(/*! ./panel-base */"./src/react/panel-base.tsx"),s=n(/*! ./components/title-actions/title-actions */"./src/react/components/title-actions/title-actions.tsx"),l=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(t){return e.call(this,t)||this}return l(t,e),t.prototype.getPanelBase=function(){return this.props.page},Object.defineProperty(t.prototype,"page",{get:function(){return this.panelBase},enumerable:!1,configurable:!0}),t.prototype.renderElement=function(){var e=this.renderTitle(),t=this.renderDescription(),n=this.renderRows(this.panelBase.cssClasses);return i.createElement("div",{ref:this.rootRef,className:this.panelBase.cssClasses.page.root},e,t,n)},t.prototype.renderTitle=function(){if(!this.page._showTitle)return null;var e=null;if(this.page.hasTitleActions)e=i.createElement(i.Fragment,null,i.createElement(s.TitleActions,{element:this.page}));else{var t=o.SurveyElementBase.renderLocString(this.page.locTitle);e=i.createElement(i.Fragment,null,t)}return i.createElement("h4",{className:this.panelBase.cssClasses.page.title},e)},t.prototype.renderDescription=function(){if(!this.page._showDescription)return null;var e=o.SurveyElementBase.renderLocString(this.page.locDescription);return i.createElement("div",{className:this.panelBase.cssClasses.page.description},e)},t}(a.SurveyPanelBase)},"./src/react/panel-base.tsx":
/*!**********************************!*\
  !*** ./src/react/panel-base.tsx ***!
  \**********************************/
/*! exports provided: SurveyPanelBase */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyPanelBase",(function(){return l}));var r,i=n(/*! react */"react"),o=n(/*! ./reactquestion_element */"./src/react/reactquestion_element.tsx"),a=n(/*! ./row */"./src/react/row.tsx"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t){var n=e.call(this,t)||this;return n.renderedRowsCache={},n.rootRef=i.createRef(),n}return s(t,e),t.prototype.getStateElement=function(){return this.panelBase},t.prototype.canUsePropInState=function(t){return"elements"!==t&&e.prototype.canUsePropInState.call(this,t)},Object.defineProperty(t.prototype,"survey",{get:function(){return this.getSurvey()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"creator",{get:function(){return this.props.creator},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"css",{get:function(){return this.getCss()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"panelBase",{get:function(){return this.getPanelBase()},enumerable:!1,configurable:!0}),t.prototype.getPanelBase=function(){return this.props.element||this.props.question},t.prototype.getSurvey=function(){return this.props.survey||(this.panelBase?this.panelBase.survey:null)},t.prototype.getCss=function(){return this.props.css},t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this),this.doAfterRender()},t.prototype.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this);var t=this.rootRef.current;t&&t.removeAttribute("data-rendered")},t.prototype.componentDidUpdate=function(t,n){e.prototype.componentDidUpdate.call(this,t,n),t.page&&this.survey&&this.survey.currentPage&&t.page.name===this.survey.currentPage.name||this.doAfterRender()},t.prototype.doAfterRender=function(){var e=this.rootRef.current;e&&this.survey&&(this.panelBase.isPanel?this.survey.afterRenderPanel(this.panelBase,e):this.survey.afterRenderPage(e))},t.prototype.canRender=function(){return e.prototype.canRender.call(this)&&!!this.survey&&!!this.panelBase&&this.panelBase.visible&&!!this.panelBase.survey},t.prototype.renderRows=function(e){"rows"!==this.changedStatePropName&&(this.renderedRowsCache={});for(var t=[],n=this.panelBase.rows,r=0;r<n.length;r++){var i=this.renderedRowsCache[n[r].id];i||(i=this.createRow(n[r],e),this.renderedRowsCache[n[r].id]=i),t.push(i)}return t},t.prototype.createRow=function(e,t){return i.createElement(a.SurveyRow,{key:e.id,row:e,survey:this.survey,creator:this.creator,css:t})},t}(o.SurveyElementBase)},"./src/react/panel.tsx":
/*!*****************************!*\
  !*** ./src/react/panel.tsx ***!
  \*****************************/
/*! exports provided: SurveyPanel */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyPanel",(function(){return p}));var r,i=n(/*! react */"react"),o=n(/*! ./reactquestion */"./src/react/reactquestion.tsx"),a=n(/*! ./reactquestion_element */"./src/react/reactquestion_element.tsx"),s=n(/*! ./element-factory */"./src/react/element-factory.tsx"),l=n(/*! ./panel-base */"./src/react/panel-base.tsx"),u=n(/*! survey-core */"./src/entries/core.ts"),c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),p=function(e){function t(t){var n=e.call(this,t)||this;return n.hasBeenExpanded=!1,n.handleEditClick=n.handleEditClick.bind(n),n}return c(t,e),Object.defineProperty(t.prototype,"panel",{get:function(){return this.panelBase},enumerable:!1,configurable:!0}),t.prototype.handleEditClick=function(e){this.panel.cancelPreview()},t.prototype.renderElement=function(){var e=this.renderTitle(),t=this.renderDescription(),n=i.createElement(o.SurveyElementErrors,{element:this.panelBase,cssClasses:this.panelBase.cssClasses,creator:this.creator}),r={paddingLeft:this.panel.innerPaddingLeft,display:this.panel.isCollapsed?"none":"block"},a=null;if(!this.panel.isCollapsed||this.hasBeenExpanded){this.hasBeenExpanded=!0;var s=this.renderRows(this.panelBase.cssClasses),l=this.panelBase.cssClasses.panel.content;a=this.renderContent(r,s,l)}var u=this.renderBottom();return i.createElement("div",{ref:this.rootRef,className:this.panelBase.cssClasses.panel.container},e,t,n,a,u)},t.prototype.wrapElement=function(e){var t,n=this.panel.survey;return n&&(t=n.wrapElement(e,this.panel)),null!=t?t:e},t.prototype.renderContent=function(e,t,n){return i.createElement("div",{style:e,className:n,id:this.panel.contentId},t)},t.prototype.renderTitle=function(){var e=this;if(!this.panelBase.title)return null;var t=s.ReactElementFactory.Instance.createElement(this.panel.getTitleComponentName(),{element:this.panel,cssClasses:this.panel.cssClasses.panel});return i.createElement("h4",{className:this.panel.cssTitle,tabIndex:this.panel.titleTabIndex,"aria-expanded":this.panel.titleAriaExpanded,onClick:function(){return e.panel.toggleState()},onKeyUp:function(e){Object(u.doKey2Click)(e)}},t)},t.prototype.renderDescription=function(){if(!this.panelBase.description)return null;var e=a.SurveyElementBase.renderLocString(this.panelBase.locDescription);return i.createElement("div",{className:this.panel.cssClasses.panel.description},e)},t.prototype.renderBottom=function(){if(this.panel.hasEditButton&&this.survey)return i.createElement("div",{className:this.panel.cssClasses.panel.footer},i.createElement("input",{className:this.survey.cssNavigationEdit,type:"button",onClick:this.handleEditClick,value:this.survey.editText}))},t}(l.SurveyPanelBase);s.ReactElementFactory.Instance.registerElement("panel",(function(e){return i.createElement(p,e)}))},"./src/react/reactSurvey.tsx":
/*!***********************************!*\
  !*** ./src/react/reactSurvey.tsx ***!
  \***********************************/
/*! exports provided: Survey */function(e,t,n){"use strict";n.r(t),n.d(t,"Survey",(function(){return g}));var r,i=n(/*! react */"react"),o=n(/*! survey-core */"./src/entries/core.ts"),a=n(/*! ./reactsurveymodel */"./src/react/reactsurveymodel.tsx"),s=n(/*! ./page */"./src/react/page.tsx"),l=n(/*! ./reactquestion_element */"./src/react/reactquestion_element.tsx"),u=n(/*! ./string-viewer */"./src/react/string-viewer.tsx"),c=n(/*! ./components/survey-header/survey-header */"./src/react/components/survey-header/survey-header.tsx"),p=n(/*! ./reacttimerpanel */"./src/react/reacttimerpanel.tsx"),d=n(/*! ./reactSurveyNavigation */"./src/react/reactSurveyNavigation.tsx"),h=n(/*! ./reactquestion_factory */"./src/react/reactquestion_factory.tsx"),f=n(/*! ./element-factory */"./src/react/element-factory.tsx"),m=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),g=function(e){function t(t){var n=e.call(this,t)||this;return n.previousJSON={},n.isCurrentPageChanged=!1,n.onCurrentPageChangedHandler=function(e,t){n.isCurrentPageChanged=!0},n.handleTryAgainClick=n.handleTryAgainClick.bind(n),n.createSurvey(t),n.updateSurvey(t,{}),n.survey.currentPage,n.rootRef=i.createRef(),n}return m(t,e),Object.defineProperty(t,"cssType",{get:function(){return o.surveyCss.currentType},set:function(e){o.StylesManager.applyTheme(e)},enumerable:!1,configurable:!0}),t.prototype.getStateElement=function(){return this.survey},t.prototype.shouldComponentUpdate=function(e,t){return this.isModelJSONChanged(e)&&(this.createSurvey(e),this.updateSurvey(e,{})),!0},t.prototype.componentDidUpdate=function(t,n){e.prototype.componentDidUpdate.call(this,t,n),this.isCurrentPageChanged&&(this.isCurrentPageChanged=!1,this.survey.scrollToTopOnPageChange()),this.updateSurvey(this.props,t)},t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this);var t=this.rootRef.current;t&&this.survey&&this.survey.doAfterRenderSurvey(t),this.survey&&this.survey.startTimerFromUI()},t.prototype.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this),this.survey&&(this.survey.stopTimer(),this.survey.onCurrentPageChanged.remove(this.onCurrentPageChangedHandler))},t.prototype.doRender=function(){var e;e="completed"==this.survey.state?this.renderCompleted():"completedbefore"==this.survey.state?this.renderCompletedBefore():"loading"==this.survey.state?this.renderLoading():"starting"==this.survey.state?this.renderStartPage():this.renderSurvey();var t=i.createElement(c.SurveyHeader,{survey:this.survey}),n=i.createElement("div",{className:"sv_custom_header"});return this.survey.hasLogo&&(n=null),i.createElement("div",{ref:this.rootRef,className:this.css.root},i.createElement("form",{onSubmit:function(e){e.preventDefault()}},n,i.createElement("div",{className:this.css.container},t,e)))},t.prototype.renderElement=function(){return this.doRender()},Object.defineProperty(t.prototype,"css",{get:function(){return this.survey.css},set:function(e){this.survey.css=e},enumerable:!1,configurable:!0}),t.prototype.handleTryAgainClick=function(e){this.survey.doComplete()},t.prototype.renderCompleted=function(){if(!this.survey.showCompletedPage)return null;var e=null;if(this.survey.completedState){var t=null;if("error"==this.survey.completedState){var n=this.survey.getLocString("saveAgainButton");t=i.createElement("input",{type:"button",value:n,className:this.css.saveData.saveAgainButton,onClick:this.handleTryAgainClick})}var r=this.css.saveData[this.survey.completedState];e=i.createElement("div",{className:this.css.saveData.root},i.createElement("div",{className:r},i.createElement("span",null,this.survey.completedStateText),t))}var o={__html:this.survey.processedCompletedHtml};return i.createElement(i.Fragment,null,i.createElement("div",{dangerouslySetInnerHTML:o,className:[this.css.body,this.css.completedPage].join(" ")}),e)},t.prototype.renderCompletedBefore=function(){var e={__html:this.survey.processedCompletedBeforeHtml};return i.createElement("div",{dangerouslySetInnerHTML:e,className:this.css.body})},t.prototype.renderLoading=function(){var e={__html:this.survey.processedLoadingHtml};return i.createElement("div",{dangerouslySetInnerHTML:e,className:this.css.body})},t.prototype.renderStartPage=function(){var e=this.survey.startedPage?this.renderPage(this.survey.startedPage):null,t=this.survey.startedPage?this.survey.startedPage.id:"";return i.createElement(i.Fragment,null,i.createElement("div",{id:t,className:this.css.body},this.renderNavigation("top"),e,this.renderNavigation("bottom")))},t.prototype.renderSurvey=function(){var e=this.survey.currentPage?this.renderPage(this.survey.currentPage):null,t=this.survey.currentPage?this.survey.currentPage.id:"",n=this.survey.isShowProgressBarOnTop?this.renderProgress(!0):null,r=this.survey.isShowProgressBarOnBottom?this.renderProgress(!1):null;return e||(e=this.renderEmptySurvey()),i.createElement("div",{id:t,className:e?this.css.body:this.css.bodyEmpty},n,this.renderTimerPanel("top"),this.renderNavigation("top"),e,this.renderTimerPanel("bottom"),r,this.renderNavigation("bottom"))},t.prototype.renderTimerPanel=function(e){return"top"===e&&!this.survey.isTimerPanelShowingOnTop||"bottom"===e&&!this.survey.isTimerPanelShowingOnBottom?null:i.createElement(p.SurveyTimerPanel,{survey:this.survey})},t.prototype.renderPage=function(e){return i.createElement(s.SurveyPage,{survey:this.survey,page:e,css:this.css,creator:this})},t.prototype.renderProgress=function(e){return f.ReactElementFactory.Instance.createElement("sv-progress-"+this.survey.progressBarType.toLowerCase(),{survey:this.survey,css:this.css,isTop:e})},t.prototype.renderNavigation=function(e){return"both"===this.survey.isNavigationButtonsShowing||"none"!==this.survey.isNavigationButtonsShowing&&this.survey.isNavigationButtonsShowing===e?i.createElement(d.SurveyNavigation,{survey:this.survey,css:this.css}):null},t.prototype.renderEmptySurvey=function(){return i.createElement("span",null,this.survey.emptySurveyText)},t.prototype.createSurvey=function(e){e||(e={}),this.previousJSON={},e?e.model?this.survey=e.model:e.json&&(this.previousJSON=e.json,this.survey=new a.ReactSurveyModel(e.json)):this.survey=new a.ReactSurveyModel,e.css&&this.survey.mergeCss(e.css,this.css),this.setSurveyEvents()},t.prototype.isModelJSONChanged=function(e){return e.model?this.survey!==e.model:!!e.json&&!o.Helpers.isTwoValueEquals(e.json,this.previousJSON)},t.prototype.updateSurvey=function(e,t){if(e)for(var n in t=t||{},e)"model"!=n&&"children"!=n&&"json"!=n&&("css"!=n?e[n]!==t[n]&&(0==n.indexOf("on")&&this.survey[n]&&this.survey[n].add?(t[n]&&this.survey[n].remove(t[n]),this.survey[n].add(e[n])):this.survey[n]=e[n]):(this.survey.mergeValues(e.css,this.survey.getCss()),this.survey.updateElementCss()))},t.prototype.setSurveyEvents=function(){var e=this;this.survey.renderCallback=function(){var t=e.state&&e.state.modelChanged?e.state.modelChanged:0;e.setState({modelChanged:t+1})},this.survey.onPartialSend.add((function(t){e.state&&e.setState(e.state)})),this.survey.onCurrentPageChanged.add(this.onCurrentPageChangedHandler)},t.prototype.createQuestionElement=function(e){return h.ReactQuestionFactory.Instance.createQuestion(!e.isDefaultRendering||e.isDefaultRendering()?e.getTemplate():e.getComponentName(),{question:e,isDisplayMode:e.isInputReadOnly,creator:this})},t.prototype.renderError=function(e,t,n){return i.createElement("div",{key:e},i.createElement("span",{className:n.error.icon,"aria-hidden":"true"}),i.createElement("span",{className:n.error.item},i.createElement(u.SurveyLocStringViewer,{locStr:t.locText})))},t.prototype.questionTitleLocation=function(){return this.survey.questionTitleLocation},t.prototype.questionErrorLocation=function(){return this.survey.questionErrorLocation},t}(l.SurveyElementBase);f.ReactElementFactory.Instance.registerElement("survey",(function(e){return i.createElement(g,e)}))},"./src/react/reactSurveyNavigation.tsx":
/*!*********************************************!*\
  !*** ./src/react/reactSurveyNavigation.tsx ***!
  \*********************************************/
/*! exports provided: SurveyNavigation */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyNavigation",(function(){return s}));var r,i=n(/*! react */"react"),o=n(/*! ./reactSurveyNavigationBase */"./src/react/reactSurveyNavigationBase.tsx"),a=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e){function t(t){var n=e.call(this,t)||this;return n.mouseDownPage=null,n.handlePrevClick=n.handlePrevClick.bind(n),n.handleNextClick=n.handleNextClick.bind(n),n.handleNextMouseDown=n.handleNextMouseDown.bind(n),n.handleMouseDown=n.handleMouseDown.bind(n),n.handleCompleteClick=n.handleCompleteClick.bind(n),n.handlePreviewClick=n.handlePreviewClick.bind(n),n.handleStartClick=n.handleStartClick.bind(n),n}return a(t,e),t.prototype.handlePrevClick=function(e){this.survey.prevPage()},t.prototype.handleNextClick=function(e){this.mouseDownPage&&this.mouseDownPage!==this.survey.currentPage||(this.mouseDownPage=null,this.survey.nextPage())},t.prototype.handleNextMouseDown=function(e){return this.mouseDownPage=this.survey.currentPage,this.survey.navigationMouseDown()},t.prototype.handleMouseDown=function(e){return this.survey.navigationMouseDown()},t.prototype.handleCompleteClick=function(e){this.survey.completeLastPage()},t.prototype.handlePreviewClick=function(e){this.survey.showPreview()},t.prototype.handleStartClick=function(e){this.survey.start()},t.prototype.render=function(){if(!this.survey||"none"===this.survey.isNavigationButtonsShowing)return null;var e="starting"===this.survey.state,t=e||this.survey.isFirstPage||!this.survey.isShowPrevButton?null:this.renderButton(this.handlePrevClick,this.handleMouseDown,this.survey.pagePrevText,this.survey.cssNavigationPrev),n=e||this.survey.isLastPage?null:this.renderButton(this.handleNextClick,this.handleNextMouseDown,this.survey.pageNextText,this.survey.cssNavigationNext),r=!e&&this.survey.isLastPage&&this.survey.isCompleteButtonVisible?this.renderButton(this.handleCompleteClick,this.handleMouseDown,this.survey.completeText,this.survey.cssNavigationComplete):null,o=!e&&this.survey.isLastPage&&this.survey.isPreviewButtonVisible?this.renderButton(this.handlePreviewClick,this.handleMouseDown,this.survey.previewText,this.survey.cssNavigationPreview):null,a=e?this.renderButton(this.handleStartClick,null,this.survey.startSurveyText,this.survey.cssNavigationStart):null;return i.createElement("div",{className:this.css.footer},a,t,n,o,r)},t.prototype.renderButton=function(e,t,n,r){return i.createElement("input",{className:r,style:{marginRight:"5px"},type:"button",onMouseDown:t,onClick:e,value:n})},t}(o.SurveyNavigationBase)},"./src/react/reactSurveyNavigationBase.tsx":
/*!*************************************************!*\
  !*** ./src/react/reactSurveyNavigationBase.tsx ***!
  \*************************************************/
/*! exports provided: SurveyNavigationBase */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyNavigationBase",(function(){return a}));var r,i=n(/*! react */"react"),o=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t){var n=e.call(this,t)||this;return n.updateStateFunction=null,n.state={update:0},n}return o(t,e),Object.defineProperty(t.prototype,"survey",{get:function(){return this.props.survey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"css",{get:function(){return this.props.css},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){if(this.survey){var e=this;this.updateStateFunction=function(){e.setState({update:e.state.update+1})},this.survey.onPageVisibleChanged.add(this.updateStateFunction)}},t.prototype.componentWillUnmount=function(){this.survey&&this.updateStateFunction&&(this.survey.onPageVisibleChanged.remove(this.updateStateFunction),this.updateStateFunction=null)},t}(i.Component)},"./src/react/reactSurveyProgress.tsx":
/*!*******************************************!*\
  !*** ./src/react/reactSurveyProgress.tsx ***!
  \*******************************************/
/*! exports provided: SurveyProgress */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyProgress",(function(){return l}));var r,i=n(/*! react */"react"),o=n(/*! ./reactSurveyNavigationBase */"./src/react/reactSurveyNavigationBase.tsx"),a=n(/*! ./element-factory */"./src/react/element-factory.tsx"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t){return e.call(this,t)||this}return s(t,e),Object.defineProperty(t.prototype,"isTop",{get:function(){return this.props.isTop},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progress",{get:function(){return this.survey.progressValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progressText",{get:function(){return this.survey.progressText},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e=this.isTop?{}:{marginTop:"1em"},t={width:this.progress+"%"};return i.createElement("div",{className:this.css.progress,style:e},i.createElement("div",{style:t,className:this.css.progressBar,role:"progressbar","aria-valuemin":0,"aria-valuemax":100},i.createElement("span",{className:this.css.progressText+" "+this.css.progressTextInBar},this.progressText)),i.createElement("span",{className:this.css.progressText+" "+this.css.progressTextUnderBar},this.progressText))},t}(o.SurveyNavigationBase);a.ReactElementFactory.Instance.registerElement("sv-progress-pages",(function(e){return i.createElement(l,e)})),a.ReactElementFactory.Instance.registerElement("sv-progress-questions",(function(e){return i.createElement(l,e)})),a.ReactElementFactory.Instance.registerElement("sv-progress-correctQuestions",(function(e){return i.createElement(l,e)})),a.ReactElementFactory.Instance.registerElement("sv-progress-requiredQuestions",(function(e){return i.createElement(l,e)}))},"./src/react/reactSurveyProgressButtons.tsx":
/*!**************************************************!*\
  !*** ./src/react/reactSurveyProgressButtons.tsx ***!
  \**************************************************/
/*! exports provided: SurveyProgressButtons */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyProgressButtons",(function(){return u}));var r,i=n(/*! react */"react"),o=n(/*! ./reactSurveyNavigationBase */"./src/react/reactSurveyNavigationBase.tsx"),a=n(/*! ./element-factory */"./src/react/element-factory.tsx"),s=n(/*! survey-core */"./src/entries/core.ts"),l=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(t){var n=e.call(this,t)||this;return n.updateScroller=void 0,n.progressButtonsModel=new s.SurveyProgressButtonsModel(n.survey),n.listContainerRef=i.createRef(),n}return l(t,e),t.prototype.render=function(){var e=this;return i.createElement("div",{className:this.css.progressButtonsContainerCenter},i.createElement("div",{className:this.css.progressButtonsContainer},i.createElement("div",{className:this.getScrollButtonCss(!0),role:"button",onClick:function(){return e.clickScrollButton(e.listContainerRef.current,!0)}}),i.createElement("div",{className:this.css.progressButtonsListContainer,ref:this.listContainerRef},i.createElement("ul",{className:this.css.progressButtonsList},this.getListElements())),i.createElement("div",{className:this.getScrollButtonCss(!1),role:"button",onClick:function(){return e.clickScrollButton(e.listContainerRef.current,!1)}})))},t.prototype.getListElements=function(){var e=this,t=[];return this.survey.visiblePages.forEach((function(n,r){t.push(e.renderListElement(n,r))})),t},t.prototype.renderListElement=function(e,t){var n=this;return i.createElement("li",{key:"listelement"+t,className:this.getListElementCss(t),onClick:this.isListElementClickable(t)?function(){return n.clickListElement(t)}:void 0},i.createElement("div",{className:this.css.progressButtonsPageTitle,title:e.navigationTitle||e.name},e.navigationTitle||e.name),i.createElement("div",{className:this.css.progressButtonsPageDescription,title:e.navigationDescription},e.navigationDescription))},t.prototype.isListElementClickable=function(e){return this.progressButtonsModel.isListElementClickable(e)},t.prototype.getListElementCss=function(e){return this.progressButtonsModel.getListElementCss(e)},t.prototype.clickListElement=function(e){this.progressButtonsModel.clickListElement(e)},t.prototype.getScrollButtonCss=function(e){var t=e?this.survey.css.progressButtonsImageButtonLeft:this.survey.css.progressButtonsImageButtonRight;return this.state.hasScroller||(t+=" "+this.survey.css.progressButtonsImageButtonHidden),t},t.prototype.clickScrollButton=function(e,t){e.scrollLeft+=70*(t?-1:1)},t.prototype.componentDidMount=function(){var e=this;this.updateScroller=setInterval((function(){e.setState({hasScroller:e.listContainerRef.current.scrollWidth>e.listContainerRef.current.offsetWidth})}),100)},t.prototype.componentWillUnmount=function(){void 0!==this.updateScroller&&(clearInterval(this.updateScroller),this.updateScroller=void 0)},t}(o.SurveyNavigationBase);a.ReactElementFactory.Instance.registerElement("sv-progress-buttons",(function(e){return i.createElement(u,e)}))},"./src/react/reactSurveyWindow.tsx":
/*!*****************************************!*\
  !*** ./src/react/reactSurveyWindow.tsx ***!
  \*****************************************/
/*! exports provided: SurveyWindow */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyWindow",(function(){return u}));var r,i=n(/*! react */"react"),o=n(/*! ./reactSurvey */"./src/react/reactSurvey.tsx"),a=n(/*! ./reactsurveymodel */"./src/react/reactsurveymodel.tsx"),s=n(/*! ./reactquestion_element */"./src/react/reactquestion_element.tsx"),l=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(t){var n=e.call(this,t)||this;return n.handleOnExpanded=n.handleOnExpanded.bind(n),n}return l(t,e),t.prototype.getStateElements=function(){return[this.window,this.window.survey]},t.prototype.handleOnExpanded=function(e){this.window.isExpanded=!this.window.isExpanded},t.prototype.canRender=function(){return e.prototype.canRender.call(this)&&this.window.isShowing},t.prototype.renderElement=function(){var e=this.renderWindowHeader(),t=this.window.isExpanded?this.renderBody():null;return i.createElement("div",{className:this.css.window.root,style:{position:"fixed",bottom:3,right:10,maxWidth:"60%"}},e,t)},t.prototype.renderWindowHeader=function(){var e={paddingRight:"10px"},t=this.window.isExpanded?this.css.window.header.buttonCollapsed:this.css.window.header.buttonExpanded;t="glyphicon pull-right "+t;var n=s.SurveyElementBase.renderLocString(this.survey.locTitle);return i.createElement("div",{className:this.css.window.header.root},i.createElement("span",{onClick:this.handleOnExpanded,style:{width:"100%",cursor:"pointer"}},i.createElement("span",{className:this.css.window.header.title,style:e},n),i.createElement("span",{className:t,"aria-hidden":"true"})),this.window.isExpanded?i.createElement("span",{onClick:this.handleOnExpanded,style:{float:"right",cursor:"pointer"}},i.createElement("span",{className:this.css.window.header.title,style:e},"X")):null)},t.prototype.renderBody=function(){return i.createElement("div",{className:this.css.window.body},this.doRender())},t.prototype.createSurvey=function(t){t||(t={}),e.prototype.createSurvey.call(this,t),this.window=new a.ReactWindowModel(null,this.survey),t.closeOnCompleteTimeout&&(this.window.closeOnCompleteTimeout=t.closeOnCompleteTimeout),this.window.isShowing=!0,this.window.isExpanded||!t.expanded&&!t.isExpanded||this.window.expand();var n=this;this.window.closeWindowOnCompleteCallback=function(){n.window.hide()}},t}(o.Survey)},"./src/react/reactquestion.tsx":
/*!*************************************!*\
  !*** ./src/react/reactquestion.tsx ***!
  \*************************************/
/*! exports provided: SurveyQuestion, SurveyElementErrors, SurveyQuestionAndErrorsCell */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyQuestion",(function(){return p})),n.d(t,"SurveyElementErrors",(function(){return d})),n.d(t,"SurveyQuestionAndErrorsCell",(function(){return h}));var r,i=n(/*! react */"react"),o=n(/*! survey-core */"./src/entries/core.ts"),a=n(/*! ./reactquestion_comment */"./src/react/reactquestion_comment.tsx"),s=n(/*! ./reactquestion_element */"./src/react/reactquestion_element.tsx"),l=n(/*! ./custom-widget */"./src/react/custom-widget.tsx"),u=n(/*! ./element-factory */"./src/react/element-factory.tsx"),c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),p=function(e){function t(t){var n=e.call(this,t)||this;return n.isNeedFocus=!1,n.rootRef=i.createRef(),n}return c(t,e),t.renderQuestionBody=function(e,t){return t.isVisible?t.customWidget?i.createElement(l.SurveyCustomWidget,{creator:e,question:t}):e.createQuestionElement(t):null},t.prototype.getStateElement=function(){return this.question},Object.defineProperty(t.prototype,"question",{get:function(){return this.props.element},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"creator",{get:function(){return this.props.creator},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this),this.question&&(this.question.react=this),this.doAfterRender()},t.prototype.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this),this.question&&(this.question.react=null);var t=this.rootRef.current;t&&t.removeAttribute("data-rendered")},t.prototype.componentDidUpdate=function(t,n){e.prototype.componentDidUpdate.call(this,t,n),this.doAfterRender()},t.prototype.doAfterRender=function(){if(this.isNeedFocus&&(this.question.isCollapsed||this.question.clickTitleFunction(),this.isNeedFocus=!1),this.question){var e=this.rootRef.current;e&&"r"!==e.getAttribute("data-rendered")&&(e.setAttribute("data-rendered","r"),e.setAttribute("name",this.question.name),this.question.afterRender&&this.question.afterRender(e))}},t.prototype.canRender=function(){return e.prototype.canRender.call(this)&&!!this.question&&!!this.creator&&this.question.isVisible},t.prototype.renderElement=function(){var e=this.question,t=e.cssClasses,n=this.renderQuestion(),r=this.renderHeader(e),o=e.hasTitleOnLeftTop?r:null,a=e.hasTitleOnBottom?r:null,s=e.hasDescriptionUnderInput?this.renderDescription(t,!0):null,l=e.cssRoot,u=e&&e.hasComment?this.renderComment(t):null,c="top"===this.creator.questionErrorLocation()?this.renderErrors(t,"top"):null,p="bottom"===this.creator.questionErrorLocation()?this.renderErrors(t,"bottom"):null,d={};e.paddingLeft&&(d.paddingLeft=e.paddingLeft),e.paddingRight&&(d.paddingRight=e.paddingRight);var h={display:this.question.isCollapsed?"none":"block"};return e.isReadOnly&&(l+=" "+t.disabled),i.createElement("div",{ref:this.rootRef,id:e.id,className:l,style:d,role:e.ariaRole,"aria-labelledby":e.hasTitle?e.ariaTitleId:null},o,i.createElement("div",{className:e.cssContent,style:h},c,n,u,p,s),a)},t.prototype.wrapElement=function(e){var t,n=this.question.survey;return n&&(t=n.wrapElement(e,this.question)),null!=t?t:e},t.prototype.renderQuestion=function(){return t.renderQuestionBody(this.creator,this.question)},t.prototype.renderTitle=function(e){var t=this,n=u.ReactElementFactory.Instance.createElement(this.question.getTitleComponentName(),{element:this.question,cssClasses:this.question.cssClasses});return i.createElement("h5",{className:this.question.cssTitle,"aria-label":this.question.locTitle.renderedHtml,id:this.question.ariaTitleId,tabIndex:this.question.titleTabIndex,"aria-expanded":this.question.titleAriaExpanded,onClick:function(){return t.question.toggleState()},onKeyUp:function(e){Object(o.doKey2Click)(e)}},n)},t.prototype.renderDescription=function(e,t){void 0===t&&(t=!1);var n=s.SurveyElementBase.renderLocString(this.question.locDescription),r=t?e.descriptionUnderInput:e.description;return i.createElement("div",{className:r},n)},t.prototype.renderComment=function(e){var t=this.question.commentText;return i.createElement("div",{className:this.question.cssClasses.formGroup},i.createElement("div",null,t),i.createElement(a.SurveyQuestionCommentItem,{question:this.question,cssClasses:e,otherCss:e.other,isDisplayMode:this.question.isInputReadOnly}))},t.prototype.renderHeader=function(e){var t=e.cssClasses,n=e.hasTitle?this.renderTitle(t):null,r=e.hasDescriptionUnderTitle?this.renderDescription(t):null;return i.createElement("div",{className:e.cssHeader,onClick:e.clickTitleFunction},n,r)},t.prototype.renderErrors=function(e,t){return i.createElement(d,{element:this.question,cssClasses:e,creator:this.creator,location:t,id:this.question.id+"_errors"})},t}(s.SurveyElementBase);u.ReactElementFactory.Instance.registerElement("question",(function(e){return i.createElement(p,e)}));var d=function(e){function t(t){var n=e.call(this,t)||this;return n.state=n.getState(),n}return c(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this.props.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"element",{get:function(){var e=this.props.element;return e instanceof o.SurveyElement?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"creator",{get:function(){return this.props.creator},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"location",{get:function(){return this.props.location},enumerable:!1,configurable:!0}),t.prototype.getState=function(e){return void 0===e&&(e=null),e?{error:e.error+1}:{error:0}},t.prototype.canRender=function(){return!!this.element&&this.element.hasVisibleErrors},t.prototype.renderElement=function(){for(var e=[],t=0;t<this.element.errors.length;t++){var n="error"+t;e.push(this.creator.renderError(n,this.element.errors[t],this.cssClasses))}var r=this.cssClasses.error.root;return"top"===this.location?r+=" "+this.cssClasses.error.locationTop:"bottom"===this.location&&(r+=" "+this.cssClasses.error.locationBottom),i.createElement("div",{role:"alert","aria-live":"polite",className:r,id:this.id},e)},t}(s.ReactSurveyElement),h=function(e){function t(t){var n=e.call(this,t)||this;return n.cellRef=i.createRef(),n}return c(t,e),t.prototype.getStateElement=function(){return this.question},Object.defineProperty(t.prototype,"question",{get:function(){return this.getQuestion()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"creator",{get:function(){return this.props.creator},enumerable:!1,configurable:!0}),t.prototype.getQuestion=function(){return this.props.question},t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this),this.doAfterRender()},t.prototype.componentWillUnmount=function(){if(e.prototype.componentWillUnmount.call(this),this.question){var t=this.cellRef.current;t&&t.removeAttribute("data-rendered")}},t.prototype.componentDidUpdate=function(t,n){e.prototype.componentDidUpdate.call(this,t,n),this.doAfterRender()},t.prototype.doAfterRender=function(){},t.prototype.getCellClass=function(){return null},t.prototype.canRender=function(){return!!this.question},t.prototype.renderElement=function(){var e=this.creator.questionErrorLocation(),t=this.getShowErrors()?i.createElement(d,{element:this.question,cssClasses:this.cssClasses,creator:this.creator,location:e}):null,n="top"===e?t:null,r="bottom"===e?t:null,o=this.renderQuestion(),a=this.getCellStyle(),s=i.createElement(i.Fragment,null,n,o,r);return i.createElement("td",{ref:this.cellRef,className:this.getCellClass()+" "+this.cssClasses.cell,title:this.getHeaderText(),style:a},this.wrapCell(this.props.cell,s))},t.prototype.getShowErrors=function(){return this.question.isVisible},t.prototype.getCellStyle=function(){return null},t.prototype.renderQuestion=function(){return p.renderQuestionBody(this.creator,this.question)},t.prototype.getHeaderText=function(){return""},t.prototype.wrapCell=function(e,t){if(!e)return t;var n,r=this.question.survey;return r&&(n=r.wrapMatrixCell(t,e)),null!=n?n:t},t}(s.ReactSurveyElement)},"./src/react/reactquestion_buttongroup.tsx":
/*!*************************************************!*\
  !*** ./src/react/reactquestion_buttongroup.tsx ***!
  \*************************************************/
/*! exports provided: SurveyQuestionButtonGroup, SurveyButtonGroupItem */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyQuestionButtonGroup",(function(){return c})),n.d(t,"SurveyButtonGroupItem",(function(){return p}));var r,i=n(/*! ./reactquestion_element */"./src/react/reactquestion_element.tsx"),o=n(/*! react */"react"),a=n.n(o),s=n(/*! ./components/svg-icon/svg-icon */"./src/react/components/svg-icon/svg-icon.tsx"),l=n(/*! survey-core */"./src/entries/core.ts"),u=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e){function t(t){return e.call(this,t)||this}return u(t,e),Object.defineProperty(t.prototype,"question",{get:function(){return this.questionBase},enumerable:!1,configurable:!0}),t.prototype.getStateElement=function(){return this.question},t.prototype.render=function(){var e=this.renderItems();return a.a.createElement("div",{className:this.question.cssClasses.root},e)},t.prototype.renderItems=function(){var e=this;return this.question.visibleChoices.map((function(t,n){return a.a.createElement(p,{key:e.question.inputId+"_"+n,item:t,question:e.question,index:n})}))},t}(i.SurveyQuestionElementBase),p=function(e){function t(t){var n=e.call(this,t)||this;return n.model=new l.ButtonGroupItemModel(n.question,n.item,n.index),n}return u(t,e),Object.defineProperty(t.prototype,"index",{get:function(){return this.props.index},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"question",{get:function(){return this.props.question},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"item",{get:function(){return this.props.item},enumerable:!1,configurable:!0}),t.prototype.getStateElement=function(){return this.item},t.prototype.render=function(){var e=this.renderIcon(),t=this.renderInput(),n=this.renderCaption();return a.a.createElement("label",{className:this.model.css.label,title:this.model.caption.renderedHtml},t,a.a.createElement("div",{className:this.model.css.decorator},e,n))},t.prototype.renderIcon=function(){return this.model.iconName?a.a.createElement(s.SvgIcon,{className:this.model.css.icon,iconName:this.model.iconName,size:this.model.iconSize||24}):null},t.prototype.renderInput=function(){var e=this;return a.a.createElement("input",{className:this.model.css.control,id:this.model.id,type:"radio",name:this.model.name,checked:this.model.selected,value:this.model.value,disabled:this.model.readOnly,onChange:function(){e.model.onChange()},"aria-required":this.model.isRequired,"aria-label":this.model.caption.renderedHtml,"aria-invalid":this.model.hasErrors,"aria-describedby":this.model.describedBy,role:"radio"})},t.prototype.renderCaption=function(){if(!this.model.showCaption)return null;var e=this.renderLocString(this.model.caption);return a.a.createElement("span",{className:this.model.css.caption,title:this.model.caption.renderedHtml},e)},t}(i.SurveyElementBase)},"./src/react/reactquestion_checkbox.tsx":
/*!**********************************************!*\
  !*** ./src/react/reactquestion_checkbox.tsx ***!
  \**********************************************/
/*! exports provided: SurveyQuestionCheckbox, SurveyQuestionCheckboxItem */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyQuestionCheckbox",(function(){return u})),n.d(t,"SurveyQuestionCheckboxItem",(function(){return c}));var r,i=n(/*! react */"react"),o=n(/*! ./reactquestion_element */"./src/react/reactquestion_element.tsx"),a=n(/*! ./reactquestion_comment */"./src/react/reactquestion_comment.tsx"),s=n(/*! ./reactquestion_factory */"./src/react/reactquestion_factory.tsx"),l=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(t){return e.call(this,t)||this}return l(t,e),Object.defineProperty(t.prototype,"question",{get:function(){return this.questionBase},enumerable:!1,configurable:!0}),t.prototype.renderElement=function(){var e=this,t=this.question.cssClasses;return i.createElement("fieldset",{className:t.root,ref:function(t){return e.control=t}},i.createElement("legend",{"aria-label":this.question.locTitle.renderedHtml}),this.question.hasColumns?this.getColumns(t):this.getItems(t))},t.prototype.getColumns=function(e){var t=this;return this.question.columns.map((function(n,r){var o=n.map((function(n,i){return t.renderItem("item"+i,n,0===r&&0===i,e,""+r+i)}));return i.createElement("div",{key:"column"+r,className:t.question.getColumnClass()},o)}))},t.prototype.getItems=function(e){for(var t=[],n=0;n<this.question.visibleChoices.length;n++){var r=this.question.visibleChoices[n],i="item"+n,o=this.renderItem(i,r,0==n,e,""+n);t.push(o)}return t},Object.defineProperty(t.prototype,"textStyle",{get:function(){return null},enumerable:!1,configurable:!0}),t.prototype.renderItem=function(e,t,n,r,o){var a=i.createElement(c,{key:e,question:this.question,cssClasses:r,isDisplayMode:this.isDisplayMode,item:t,textStyle:this.textStyle,isFirst:n,index:o}),s=this.question.survey,l=null;return s&&(l=s.wrapItemValue(a,this.question,t)),null!=l?l:a},t}(o.SurveyQuestionElementBase),c=function(e){function t(t){var n=e.call(this,t)||this;return n.handleOnChange=n.handleOnChange.bind(n),n.selectAllChanged=n.selectAllChanged.bind(n),n}return l(t,e),t.prototype.getStateElement=function(){return this.item},Object.defineProperty(t.prototype,"question",{get:function(){return this.props.question},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"item",{get:function(){return this.props.item},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textStyle",{get:function(){return this.props.textStyle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFirst",{get:function(){return this.props.isFirst},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.props.index},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hideCaption",{get:function(){return!0===this.props.hideCaption},enumerable:!1,configurable:!0}),t.prototype.shouldComponentUpdate=function(){return!(this.question.customWidget&&!this.question.customWidgetData.isNeedRender&&!this.question.customWidget.widgetJson.isDefaultRender&&!this.question.customWidget.widgetJson.render)},t.prototype.handleOnChange=function(e){var t=[].concat(this.question.renderedValue||[]),n=t.indexOf(this.item.value);e.target.checked?n<0&&t.push(this.item.value):n>-1&&t.splice(n,1),this.question.renderedValue=t},t.prototype.selectAllChanged=function(e){this.question.toggleSelectAll()},t.prototype.canRender=function(){return!!this.item&&!!this.question},t.prototype.renderElement=function(){var e=this.question.isItemSelected(this.item),t=this.item.value===this.question.otherItem.value&&e?this.renderOther():null;return this.renderCheckbox(e,t)},Object.defineProperty(t.prototype,"inputStyle",{get:function(){return{marginRight:"3px"}},enumerable:!1,configurable:!0}),t.prototype.renderCheckbox=function(e,t){var n=this.question.inputId+"_"+this.index,r=this.hideCaption?"":this.renderLocString(this.item.locText),o=this.question.getItemClass(this.item),a=this.question.getLabelClass(this.item),s=this.item==this.question.selectAllItem?this.selectAllChanged:this.handleOnChange,l=this.item.locText;return i.createElement("div",{className:o},i.createElement("label",{className:a},i.createElement("input",{className:this.cssClasses.itemControl,type:"checkbox",value:this.item.value,id:n,style:this.inputStyle,disabled:this.isDisplayMode||!this.item.isEnabled,checked:e,onChange:s,"aria-required":this.question.isRequired,"aria-label":l.renderedHtml,"aria-invalid":this.question.errors.length>0,"aria-describedby":this.question.errors.length>0?this.question.id+"_errors":null}),i.createElement("span",{className:this.cssClasses.materialDecorator},i.createElement("svg",{viewBox:"0 0 24 24",className:this.cssClasses.itemDecorator},i.createElement("path",{d:"M5,13l2-2l3,3l7-7l2,2l-9,9L5,13z"})),i.createElement("span",{className:"check"})),i.createElement("span",{className:this.cssClasses.controlLabel,title:l.text},r)),t)},t.prototype.renderOther=function(){return i.createElement("div",{className:"form-group"},i.createElement(a.SurveyQuestionCommentItem,{question:this.question,otherCss:this.cssClasses.other,cssClasses:this.cssClasses,isDisplayMode:this.isDisplayMode}))},t}(o.ReactSurveyElement);s.ReactQuestionFactory.Instance.registerQuestion("checkbox",(function(e){return i.createElement(u,e)}))},"./src/react/reactquestion_comment.tsx":
/*!*********************************************!*\
  !*** ./src/react/reactquestion_comment.tsx ***!
  \*********************************************/
/*! exports provided: SurveyQuestionComment, SurveyQuestionCommentItem */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyQuestionComment",(function(){return l})),n.d(t,"SurveyQuestionCommentItem",(function(){return u}));var r,i=n(/*! react */"react"),o=n(/*! ./reactquestion_element */"./src/react/reactquestion_element.tsx"),a=n(/*! ./reactquestion_factory */"./src/react/reactquestion_factory.tsx"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t){return e.call(this,t)||this}return s(t,e),t.prototype.renderElement=function(){var e=this,t=this.question.cssClasses,n=this.question.isInputTextUpdate?null:this.updateValueOnEvent,r=this.question.isInputTextUpdate?this.updateValueOnEvent:null,o=this.question.renderedPlaceHolder;return this.question.isReadOnlyRenderDiv()?i.createElement("div",null,this.question.value):i.createElement("textarea",{id:this.question.inputId,className:t.root,disabled:this.isDisplayMode,ref:function(t){return e.control=t},maxLength:this.question.getMaxLength(),placeholder:o,onBlur:n,onInput:r,cols:this.question.cols,rows:this.question.rows,"aria-required":this.question.isRequired,"aria-label":this.question.locTitle.renderedHtml,"aria-invalid":this.question.errors.length>0,"aria-describedby":this.question.errors.length>0?this.question.id+"_errors":null})},t}(o.SurveyQuestionUncontrolledElement),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.canRender=function(){return!!this.props.question},t.prototype.renderElement=function(){var e=this,t=this.props.question,n=this.props.otherCss||this.cssClasses.comment,r=function(e){t.comment=e.target.value},o=t.isInputTextUpdate?null:r,a=t.isInputTextUpdate?r:null,s=this.state&&void 0!==this.state.comment?this.state.comment:t.comment||"";return t.isReadOnlyRenderDiv()?i.createElement("div",null,s):i.createElement("textarea",{className:n,value:s,disabled:this.isDisplayMode,maxLength:t.getOthersMaxLength(),placeholder:t.otherPlaceHolder,onChange:function(t){e.setState({comment:t.target.value})},onBlur:o,onInput:a,"aria-required":t.isRequired,"aria-label":t.locTitle.renderedHtml})},t}(o.ReactSurveyElement);a.ReactQuestionFactory.Instance.registerQuestion("comment",(function(e){return i.createElement(l,e)}))},"./src/react/reactquestion_custom.tsx":
/*!********************************************!*\
  !*** ./src/react/reactquestion_custom.tsx ***!
  \********************************************/
/*! exports provided: SurveyQuestionCustom, SurveyQuestionComposite */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyQuestionCustom",(function(){return c})),n.d(t,"SurveyQuestionComposite",(function(){return p}));var r,i=n(/*! react */"react"),o=n(/*! ./reactquestion_element */"./src/react/reactquestion_element.tsx"),a=n(/*! ./reactquestion */"./src/react/reactquestion.tsx"),s=n(/*! ./reactquestion_factory */"./src/react/reactquestion_factory.tsx"),l=n(/*! ./panel */"./src/react/panel.tsx"),u=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e){function t(t){return e.call(this,t)||this}return u(t,e),t.prototype.renderElement=function(){return a.SurveyQuestion.renderQuestionBody(this.creator,this.question.contentQuestion)},t}(o.SurveyQuestionUncontrolledElement),p=function(e){function t(t){return e.call(this,t)||this}return u(t,e),t.prototype.canRender=function(){return!!this.question.contentPanel},t.prototype.renderElement=function(){return i.createElement(l.SurveyPanel,{element:this.question.contentPanel,creator:this.creator,survey:this.question.survey})},t}(o.SurveyQuestionUncontrolledElement);s.ReactQuestionFactory.Instance.registerQuestion("custom",(function(e){return i.createElement(c,e)})),s.ReactQuestionFactory.Instance.registerQuestion("composite",(function(e){return i.createElement(p,e)}))},"./src/react/reactquestion_dropdown.tsx":
/*!**********************************************!*\
  !*** ./src/react/reactquestion_dropdown.tsx ***!
  \**********************************************/
/*! exports provided: SurveyQuestionDropdown, SurveyQuestionOptionItem */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyQuestionDropdown",(function(){return u})),n.d(t,"SurveyQuestionOptionItem",(function(){return c}));var r,i=n(/*! react */"react"),o=n(/*! ./reactquestion_element */"./src/react/reactquestion_element.tsx"),a=n(/*! ./reactquestion_comment */"./src/react/reactquestion_comment.tsx"),s=n(/*! ./reactquestion_factory */"./src/react/reactquestion_factory.tsx"),l=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(t){return e.call(this,t)||this}return l(t,e),t.prototype.setValueCore=function(e){this.questionBase.renderedValue=e},t.prototype.getValueCore=function(){return this.questionBase.renderedValue},t.prototype.renderElement=function(){var e=this.question.cssClasses,t=this.question.isOtherSelected?this.renderOther(e):null,n=this.renderSelect(e);return i.createElement("div",{className:e.root},n,t)},t.prototype.renderSelect=function(e){var t=this;if(this.isDisplayMode){var n=this.question.isOtherSelected;return i.createElement("div",{id:this.question.inputId,className:this.question.getControlClass(),disabled:!0},n?this.question.otherText:this.question.displayValue)}for(var r=[],o=0;o<this.question.visibleChoices.length;o++){var a=this.question.visibleChoices[o],s="item"+o,l=i.createElement(c,{key:s,item:a});r.push(l)}var u=this.question.showOptionsCaption?i.createElement("option",{value:""},this.question.optionsCaption):null;return i.createElement("div",{className:e.selectWrapper},i.createElement("select",{id:this.question.inputId,className:this.question.getControlClass(),ref:function(e){return t.control=e},autoComplete:this.question.autoComplete,onChange:this.updateValueOnEvent,onInput:this.updateValueOnEvent,"aria-label":this.question.locTitle.renderedHtml,"aria-invalid":this.question.errors.length>0,"aria-describedby":this.question.errors.length>0?this.question.id+"_errors":null,"aria-required":this.question.isRequired,required:this.question.isRequired},u,r))},t.prototype.renderOther=function(e){return i.createElement("div",{className:"form-group"},i.createElement(a.SurveyQuestionCommentItem,{question:this.question,otherCss:e.other,cssClasses:e,isDisplayMode:this.isDisplayMode}))},t}(o.SurveyQuestionUncontrolledElement),c=function(e){function t(t){return e.call(this,t)||this}return l(t,e),t.prototype.getStateElement=function(){return this.item},Object.defineProperty(t.prototype,"item",{get:function(){return this.props.item},enumerable:!1,configurable:!0}),t.prototype.canRender=function(){return!!this.item},t.prototype.renderElement=function(){return i.createElement("option",{value:this.item.value,disabled:!this.item.isEnabled},this.item.text)},t}(o.ReactSurveyElement);s.ReactQuestionFactory.Instance.registerQuestion("dropdown",(function(e){return i.createElement(u,e)}))},"./src/react/reactquestion_element.tsx":
/*!*********************************************!*\
  !*** ./src/react/reactquestion_element.tsx ***!
  \*********************************************/
/*! exports provided: SurveyElementBase, ReactSurveyElement, SurveyQuestionElementBase, SurveyQuestionUncontrolledElement */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyElementBase",(function(){return l})),n.d(t,"ReactSurveyElement",(function(){return u})),n.d(t,"SurveyQuestionElementBase",(function(){return c})),n.d(t,"SurveyQuestionUncontrolledElement",(function(){return p}));var r,i=n(/*! react */"react"),o=n(/*! survey-core */"./src/entries/core.ts"),a=n(/*! ./element-factory */"./src/react/element-factory.tsx"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t){return e.call(this,t)||this}return s(t,e),t.renderLocString=function(e,t,n){return void 0===t&&(t=null),a.ReactElementFactory.Instance.createElement(e.renderAs,{locStr:e,style:t,key:n})},t.prototype.componentDidMount=function(){this.makeBaseElementsReact()},t.prototype.componentWillUnmount=function(){this.unMakeBaseElementsReact()},t.prototype.componentDidUpdate=function(e,t){this.makeBaseElementsReact()},t.prototype.render=function(){if(!this.canRender())return null;this.startEndRendering(1);var e=this.renderElement();return this.startEndRendering(-1),e=this.wrapElement(e),this.changedStatePropNameValue=void 0,e},t.prototype.wrapElement=function(e){return e},Object.defineProperty(t.prototype,"isRendering",{get:function(){var e=this.getStateElement();return!!e&&e.reactRendering>0},enumerable:!1,configurable:!0}),t.prototype.getRenderedElement=function(){return this.getStateElement()},t.prototype.startEndRendering=function(e){var t=this.getRenderedElement();t&&(t.reactRendering||(t.reactRendering=0),t.reactRendering+=e)},t.prototype.canRender=function(){return!0},t.prototype.renderElement=function(){return null},Object.defineProperty(t.prototype,"changedStatePropName",{get:function(){return this.changedStatePropNameValue},enumerable:!1,configurable:!0}),t.prototype.makeBaseElementsReact=function(){for(var e=this.getStateElements(),t=0;t<e.length;t++)this.makeBaseElementReact(e[t])},t.prototype.unMakeBaseElementsReact=function(){for(var e=this.getStateElements(),t=0;t<e.length;t++)this.unMakeBaseElementReact(e[t])},t.prototype.getStateElements=function(){var e=this.getStateElement();return e?[e]:[]},t.prototype.getStateElement=function(){return null},Object.defineProperty(t.prototype,"isDisplayMode",{get:function(){return this.props.isDisplayMode||!1},enumerable:!1,configurable:!0}),t.prototype.renderLocString=function(e,n){return void 0===n&&(n=null),t.renderLocString(e,n)},t.prototype.makeBaseElementReact=function(e){var t=this;e&&(e.iteratePropertiesHash((function(e,n){if(t.canUsePropInState(n)){var r=e[n];Array.isArray(r)&&((r=r).onArrayChanged=function(e){t.isRendering||(t.changedStatePropNameValue=n,t.setState((function(e){var t={};return t[n]=r,t})))})}})),e.setPropertyValueCoreHandler=function(e,n,r){if(e[n]!==r){if(e[n]=r,!t.canUsePropInState(n))return;if(t.isRendering)return;t.changedStatePropNameValue=n,t.setState((function(e){var t={};return t[n]=r,t}))}})},t.prototype.canUsePropInState=function(e){return!0},t.prototype.unMakeBaseElementReact=function(e){e&&(e.setPropertyValueCoreHandler=void 0,e.iteratePropertiesHash((function(e,t){var n=e[t];Array.isArray(n)&&((n=n).onArrayChanged=function(){})})))},t}(i.Component),u=function(e){function t(t){return e.call(this,t)||this}return s(t,e),Object.defineProperty(t.prototype,"cssClasses",{get:function(){return this.props.cssClasses},enumerable:!1,configurable:!0}),t}(l),c=function(e){function t(t){return e.call(this,t)||this}return s(t,e),t.prototype.componentDidUpdate=function(t,n){e.prototype.componentDidUpdate.call(this,t,n),this.updateDomElement()},t.prototype.componentDidMount=function(){this.updateDomElement()},t.prototype.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this),this.questionBase&&this.questionBase.beforeDestroyQuestionElement(this.control)},t.prototype.updateDomElement=function(){var e=this.control;e&&"r"!==e.getAttribute("data-rendered")&&(e.setAttribute("data-rendered","r"),this.questionBase.afterRenderQuestionElement(e))},Object.defineProperty(t.prototype,"questionBase",{get:function(){return this.props.question},enumerable:!1,configurable:!0}),t.prototype.getRenderedElement=function(){return this.questionBase},Object.defineProperty(t.prototype,"creator",{get:function(){return this.props.creator},enumerable:!1,configurable:!0}),t.prototype.canRender=function(){return!!this.questionBase&&!!this.creator},t.prototype.shouldComponentUpdate=function(){return!(this.questionBase.customWidget&&!this.questionBase.customWidgetData.isNeedRender&&!this.questionBase.customWidget.widgetJson.isDefaultRender&&!this.questionBase.customWidget.widgetJson.render)},Object.defineProperty(t.prototype,"isDisplayMode",{get:function(){return this.props.isDisplayMode||!!this.questionBase&&this.questionBase.isInputReadOnly},enumerable:!1,configurable:!0}),t.prototype.wrapCell=function(e,t,n){if(!n)return t;var r,i=this.questionBase.survey;return i&&(r=i.wrapMatrixCell(t,e,n)),null!=r?r:t},t}(l),p=function(e){function t(t){var n=e.call(this,t)||this;return n.updateValueOnEvent=function(e){o.Helpers.isTwoValueEquals(n.questionBase.value,e.target.value)||n.setValueCore(e.target.value)},n.updateValueOnEvent=n.updateValueOnEvent.bind(n),n}return s(t,e),Object.defineProperty(t.prototype,"question",{get:function(){return this.questionBase},enumerable:!1,configurable:!0}),t.prototype.setValueCore=function(e){this.questionBase.value=e},t.prototype.getValueCore=function(){return this.questionBase.value},t.prototype.updateDomElement=function(){if(this.control){var t=this.control,n=this.getValueCore();o.Helpers.isTwoValueEquals(n,t.value)||(t.value=this.getValue(n))}e.prototype.updateDomElement.call(this)},t.prototype.getValue=function(e){return o.Helpers.isValueEmpty(e)?"":e},t}(c)},"./src/react/reactquestion_empty.tsx":
/*!*******************************************!*\
  !*** ./src/react/reactquestion_empty.tsx ***!
  \*******************************************/
/*! exports provided: SurveyQuestionEmpty */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyQuestionEmpty",(function(){return l}));var r,i=n(/*! react */"react"),o=n(/*! ./reactquestion_element */"./src/react/reactquestion_element.tsx"),a=n(/*! ./reactquestion_factory */"./src/react/reactquestion_factory.tsx"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t){var n=e.call(this,t)||this;return n.state={value:n.question.value},n}return s(t,e),Object.defineProperty(t.prototype,"question",{get:function(){return this.questionBase},enumerable:!1,configurable:!0}),t.prototype.renderElement=function(){return i.createElement("div",null)},t}(o.SurveyQuestionElementBase);a.ReactQuestionFactory.Instance.registerQuestion("empty",(function(e){return i.createElement(l,e)}))},"./src/react/reactquestion_expression.tsx":
/*!************************************************!*\
  !*** ./src/react/reactquestion_expression.tsx ***!
  \************************************************/
/*! exports provided: SurveyQuestionExpression */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyQuestionExpression",(function(){return l}));var r,i=n(/*! react */"react"),o=n(/*! ./reactquestion_element */"./src/react/reactquestion_element.tsx"),a=n(/*! ./reactquestion_factory */"./src/react/reactquestion_factory.tsx"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t){return e.call(this,t)||this}return s(t,e),Object.defineProperty(t.prototype,"question",{get:function(){return this.questionBase},enumerable:!1,configurable:!0}),t.prototype.renderElement=function(){var e=this,t=this.question.cssClasses;return i.createElement("div",{id:this.question.inputId,className:t.root,ref:function(t){return e.control=t}},this.question.displayValue)},t}(o.SurveyQuestionElementBase);a.ReactQuestionFactory.Instance.registerQuestion("expression",(function(e){return i.createElement(l,e)}))},"./src/react/reactquestion_factory.tsx":
/*!*********************************************!*\
  !*** ./src/react/reactquestion_factory.tsx ***!
  \*********************************************/
/*! exports provided: ReactQuestionFactory */function(e,t,n){"use strict";n.r(t),n.d(t,"ReactQuestionFactory",(function(){return r}));var r=function(){function e(){this.creatorHash={}}return e.prototype.registerQuestion=function(e,t){this.creatorHash[e]=t},e.prototype.getAllTypes=function(){var e=new Array;for(var t in this.creatorHash)e.push(t);return e.sort()},e.prototype.createQuestion=function(e,t){var n=this.creatorHash[e];return null==n?null:n(t)},e.Instance=new e,e}()},"./src/react/reactquestion_file.tsx":
/*!******************************************!*\
  !*** ./src/react/reactquestion_file.tsx ***!
  \******************************************/
/*! exports provided: SurveyQuestionFile */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyQuestionFile",(function(){return u}));var r,i=n(/*! react */"react"),o=n(/*! ./reactquestion_element */"./src/react/reactquestion_element.tsx"),a=n(/*! ./reactquestion_factory */"./src/react/reactquestion_factory.tsx"),s=n(/*! survey-core */"./src/entries/core.ts"),l=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(t){var n=e.call(this,t)||this;return n.handleOnDragOver=function(e){if(n.question.isInputReadOnly)return e.returnValue=!1,!1;e.dataTransfer.dropEffect="copy",e.preventDefault()},n.handleOnDrop=function(e){e.preventDefault();var t=e.dataTransfer;n.onChange(t)},n.handleOnChange=function(e){var t=e.target||e.srcElement;n.onChange(t)},n.handleOnClean=function(e){var t=n.question,r=e.target||e.srcElement;t.needConfirmRemoveFile&&!Object(s.confirmAction)(t.confirmRemoveAllMessage)||(t.clear(),r.parentElement.querySelectorAll("input")[0].value="",n.setState({fileLoaded:n.state.fileLoaded+1}))},n.handleOnRemoveFile=function(e){var t=n.question;t.needConfirmRemoveFile&&!Object(s.confirmAction)(t.getConfirmRemoveMessage(e.name))||(t.removeFile(e),n.setState({fileLoaded:n.state.fileLoaded+1}))},n.handleOnDownloadFile=function(e,t){Object(s.detectIEOrEdge)()&&(e.preventDefault(),Object(s.loadFileFromBase64)(t.content,t.name))},n.onChange=function(e){if(window.FileReader&&e&&e.files&&!(e.files.length<1)){for(var t=[],r=n.question.allowMultiple?e.files.length:1,i=0;i<r;i++)t.push(e.files[i]);e.value="",n.question.loadFiles(t),n.setState({fileLoaded:n.state.fileLoaded+1})}},n.state={fileLoaded:0,state:"empty",rootClass:n.question.cssClasses.root},n.handleOnChange=n.handleOnChange.bind(n),n.question.onStateChanged.add((function(e){return n.setState({fileLoaded:n.state.fileLoaded+1,state:e})})),n}return l(t,e),Object.defineProperty(t.prototype,"question",{get:function(){return this.questionBase},enumerable:!1,configurable:!0}),t.prototype.renderElement=function(){var e,t=this,n=this.renderPreview(),r=this.renderFileDecorator(),o=this.renderClearButton(this.question.cssClasses.removeButton),a=this.renderClearButton(this.question.cssClasses.removeButtonBottom);return e=i.createElement("input",{disabled:this.isDisplayMode,className:this.question.cssClasses.fileInput,id:this.question.inputId,ref:function(e){return t.control=e},type:"file",onChange:this.isDisplayMode?null:this.handleOnChange,"aria-required":this.question.isRequired,"aria-label":this.question.locTitle.renderedHtml,"aria-invalid":this.question.errors.length>0,"aria-describedby":this.question.errors.length>0?this.question.id+"_errors":null,multiple:this.question.allowMultiple,title:this.question.inputTitle,accept:this.question.acceptedTypes}),i.createElement("div",{className:this.state.rootClass},e,r,o,n,a)},t.prototype.renderFileDecorator=function(){var e,t=null,n=this.question.cssClasses.chooseFile+(this.isDisplayMode?" "+this.question.cssClasses.controlDisabled:"");return e=i.createElement("label",{role:"button",className:n,htmlFor:this.question.inputId,"aria-label":this.question.chooseButtonCaption},this.question.chooseButtonCaption),this.question.isEmpty()&&(t=i.createElement("span",{className:this.question.cssClasses.noFileChosen},this.question.noFileChosenCaption)),i.createElement("div",{className:this.question.cssClasses.fileDecorator,onDrop:this.handleOnDrop,onDragOver:this.handleOnDragOver},i.createElement("div",{className:this.question.cssClasses.wrapper},e,t))},t.prototype.renderClearButton=function(e){return this.question.isEmpty()||this.isDisplayMode?null:i.createElement("button",{type:"button",onClick:this.handleOnClean,className:e},this.question.cleanButtonCaption)},t.prototype.renderPreview=function(){var e=this;if(!this.question.previewValue)return null;var t=this.question.previewValue.map((function(t,n){if(!t)return null;var r=i.createElement("a",{href:t.content,onClick:function(n){e.handleOnDownloadFile(n,t)},title:t.name,download:t.name,style:{width:e.question.imageWidth+"px"}},t.name);return i.createElement("span",{key:e.question.inputId+"_"+n,className:e.question.cssClasses.preview},t.name?i.createElement("div",{className:e.question.cssClasses.fileSign},r):null,e.question.canPreviewImage(t)?i.createElement("img",{src:t.content,height:e.question.imageHeight,width:e.question.imageWidth,alt:"File preview"}):null,t.name&&!e.question.isReadOnly?i.createElement("div",null,i.createElement("span",{className:e.question.cssClasses.removeFile,onClick:function(n){return e.handleOnRemoveFile(t)}},e.question.removeFileCaption),i.createElement("svg",{className:e.question.cssClasses.removeFileSvg,onClick:function(n){return e.handleOnRemoveFile(t)},viewBox:"0 0 16 16"},i.createElement("path",{d:"M8,2C4.7,2,2,4.7,2,8s2.7,6,6,6s6-2.7,6-6S11.3,2,8,2z M11,10l-1,1L8,9l-2,2l-1-1l2-2L5,6l1-1l2,2l2-2l1,1L9,8 L11,10z"}))):null,i.createElement("div",{className:e.question.cssClasses.fileSignBottom},r))}));return i.createElement("div",null,t)},t}(o.SurveyQuestionElementBase);a.ReactQuestionFactory.Instance.registerQuestion("file",(function(e){return i.createElement(u,e)}))},"./src/react/reactquestion_html.tsx":
/*!******************************************!*\
  !*** ./src/react/reactquestion_html.tsx ***!
  \******************************************/
/*! exports provided: SurveyQuestionHtml */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyQuestionHtml",(function(){return l}));var r,i=n(/*! react */"react"),o=n(/*! ./reactquestion_element */"./src/react/reactquestion_element.tsx"),a=n(/*! ./reactquestion_factory */"./src/react/reactquestion_factory.tsx"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t){return e.call(this,t)||this}return s(t,e),Object.defineProperty(t.prototype,"question",{get:function(){return this.questionBase},enumerable:!1,configurable:!0}),t.prototype.canRender=function(){return e.prototype.canRender.call(this)&&!!this.question.html},t.prototype.renderElement=function(){var e={__html:this.question.locHtml.renderedHtml};return i.createElement("div",{className:this.question.cssClasses.root,dangerouslySetInnerHTML:e})},t}(o.SurveyQuestionElementBase);a.ReactQuestionFactory.Instance.registerQuestion("html",(function(e){return i.createElement(l,e)}))},"./src/react/reactquestion_matrix.tsx":
/*!********************************************!*\
  !*** ./src/react/reactquestion_matrix.tsx ***!
  \********************************************/
/*! exports provided: SurveyQuestionMatrix, SurveyQuestionMatrixRow */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyQuestionMatrix",(function(){return l})),n.d(t,"SurveyQuestionMatrixRow",(function(){return u}));var r,i=n(/*! react */"react"),o=n(/*! ./reactquestion_element */"./src/react/reactquestion_element.tsx"),a=n(/*! ./reactquestion_factory */"./src/react/reactquestion_factory.tsx"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t){var n=e.call(this,t)||this;return n.state={rowsChanged:0},n}return s(t,e),Object.defineProperty(t.prototype,"question",{get:function(){return this.questionBase},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){if(e.prototype.componentDidMount.call(this),this.question){var t=this;this.question.visibleRowsChangedCallback=function(){t.setState({rowsChanged:t.state.rowsChanged+1})}}},t.prototype.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this),this.question&&(this.question.visibleRowsChangedCallback=null)},t.prototype.renderElement=function(){for(var e=this,t=this.question.cssClasses,n=this.question.hasRows?i.createElement("td",null):null,r=[],o=0;o<this.question.visibleColumns.length;o++){var a=this.question.visibleColumns[o],s="column"+o,l=this.renderLocString(a.locText);r.push(i.createElement("th",{className:this.question.cssClasses.headerCell,key:s},this.wrapCell({column:a},l,"column-header")))}var c=[],p=this.question.visibleRows;for(o=0;o<p.length;o++){var d=p[o];s="row-"+d.name+"-"+o,c.push(i.createElement(u,{key:s,question:this.question,cssClasses:t,isDisplayMode:this.isDisplayMode,row:d,isFirst:0==o}))}var h=this.question.showHeader?i.createElement("thead",null,i.createElement("tr",null,n,r)):null;return i.createElement("div",{className:t.tableWrapper,ref:function(t){return e.control=t}},i.createElement("fieldset",null,i.createElement("legend",{"aria-label":this.question.locTitle.renderedHtml}),i.createElement("table",{className:t.root},h,i.createElement("tbody",null,c))))},t}(o.SurveyQuestionElementBase),u=function(e){function t(t){var n=e.call(this,t)||this;return n.handleOnChange=n.handleOnChange.bind(n),n}return s(t,e),Object.defineProperty(t.prototype,"question",{get:function(){return this.props.question},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"row",{get:function(){return this.props.row},enumerable:!1,configurable:!0}),t.prototype.handleOnChange=function(e){this.row.value=e.target.value,this.setState({value:this.row.value})},t.prototype.wrapCell=function(e,t,n){if(!n)return t;var r,i=this.question.survey;return i&&(r=i.wrapMatrixCell(t,e,n)),null!=r?r:t},t.prototype.canRender=function(){return!!this.row},t.prototype.renderElement=function(){var e=null;if(this.question.hasRows){var t=this.renderLocString(this.row.locText);e=i.createElement("td",{className:this.question.cssClasses.cell},this.wrapCell({row:this.row},t,"row-header"))}var n=this.generateTds();return i.createElement("tr",{className:this.row.rowClasses},e,n)},t.prototype.generateTds=function(){for(var e=this,t=[],n=this.row,r=0;r<this.question.visibleColumns.length;r++){var o=null,a=this.question.visibleColumns[r],s="value"+r,l=n.value==a.value,u=this.question.getItemClass(n,a),c=this.question.inputId+"_"+n.name+"_"+r;if(this.question.hasCellText){var p=this.question.isInputReadOnly?null:function(t){return function(){return e.cellClick(n,t)}};o=i.createElement("td",{key:s,className:u,onClick:p?p(a):null},this.renderLocString(this.question.getCellDisplayLocText(n.name,a)))}else o=i.createElement("td",{key:s,title:a.locText.renderedHtml,className:this.question.cssClasses.cell},i.createElement("label",{className:u},i.createElement("input",{id:c,type:"radio",className:this.cssClasses.itemValue,name:n.fullName,value:a.value,disabled:this.isDisplayMode,checked:l,onChange:this.handleOnChange,"aria-required":this.question.isRequired,"aria-label":this.question.locTitle.renderedHtml}),i.createElement("span",{className:this.question.cssClasses.materialDecorator},i.createElement("svg",{className:this.question.cssClasses.itemDecorator,viewBox:"-12 -12 24 24"},i.createElement("circle",{r:"6",cx:"0",cy:"0"}),"s")),i.createElement("span",{className:"circle"}),i.createElement("span",{className:"check"}),i.createElement("span",{style:{display:"none"}},this.question.locTitle.renderedHtml)));t.push(o)}return t},t.prototype.cellClick=function(e,t){e.value=t.value},t}(o.ReactSurveyElement);a.ReactQuestionFactory.Instance.registerQuestion("matrix",(function(e){return i.createElement(l,e)}))},"./src/react/reactquestion_matrixdropdown.tsx":
/*!****************************************************!*\
  !*** ./src/react/reactquestion_matrixdropdown.tsx ***!
  \****************************************************/
/*! exports provided: SurveyQuestionMatrixDropdown */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyQuestionMatrixDropdown",(function(){return l}));var r,i=n(/*! react */"react"),o=n(/*! ./reactquestion_matrixdropdownbase */"./src/react/reactquestion_matrixdropdownbase.tsx"),a=n(/*! ./reactquestion_factory */"./src/react/reactquestion_factory.tsx"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t){return e.call(this,t)||this}return s(t,e),t}(o.SurveyQuestionMatrixDropdownBase);a.ReactQuestionFactory.Instance.registerQuestion("matrixdropdown",(function(e){return i.createElement(l,e)}))},"./src/react/reactquestion_matrixdropdownbase.tsx":
/*!********************************************************!*\
  !*** ./src/react/reactquestion_matrixdropdownbase.tsx ***!
  \********************************************************/
/*! exports provided: SurveyQuestionMatrixDropdownBase, SurveyQuestionMatrixDropdownCell */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyQuestionMatrixDropdownBase",(function(){return d})),n.d(t,"SurveyQuestionMatrixDropdownCell",(function(){return f}));var r,i=n(/*! react */"react"),o=n(/*! ./reactquestion_element */"./src/react/reactquestion_element.tsx"),a=n(/*! ./reactquestion */"./src/react/reactquestion.tsx"),s=n(/*! ./reactquestion_checkbox */"./src/react/reactquestion_checkbox.tsx"),l=n(/*! ./reactquestion_radiogroup */"./src/react/reactquestion_radiogroup.tsx"),u=n(/*! ./panel */"./src/react/panel.tsx"),c=n(/*! ./components/action-bar/action-bar */"./src/react/components/action-bar/action-bar.tsx"),p=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),d=function(e){function t(t){var n=e.call(this,t)||this;return n.state=n.getState(),n}return p(t,e),Object.defineProperty(t.prototype,"question",{get:function(){return this.questionBase},enumerable:!1,configurable:!0}),t.prototype.getState=function(e){return void 0===e&&(e=null),{rowCounter:e?e.rowCounter+1:0}},t.prototype.updateVisibleRowsChangedCallback=function(){var e=this;this.question.visibleRowsChangedCallback=function(){e.updateStateOnCallback()}},t.prototype.renderedTableResetCallback=function(){var e=this;this.question.onRenderedTableResetCallback=function(){e.updateStateOnCallback()}},t.prototype.updateStateOnCallback=function(){this.isRendering||this.setState(this.getState(this.state))},t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this),this.updateVisibleRowsChangedCallback(),this.renderedTableResetCallback()},t.prototype.renderElement=function(){return this.renderTableDiv()},t.prototype.renderTableDiv=function(){var e=this,t=this.renderHeader(),n=this.renderFooter(),r=this.renderRows(),o=this.question.horizontalScroll?{overflowX:"scroll"}:{};return i.createElement("div",{style:o,ref:function(t){return e.control=t}},i.createElement("table",{className:this.question.cssClasses.root},t,r,n))},t.prototype.renderHeader=function(){var e=this.question.renderedTable;if(!e.showHeader)return null;for(var t=[],n=e.headerRow.cells,r=0;r<n.length;r++){var o=n[r],a="column"+r,s={};o.width&&(s.width=o.width),o.minWidth&&(s.minWidth=o.minWidth);var l=this.renderCellContent(o,"column-header",{});t.push(i.createElement("th",{className:this.question.cssClasses.headerCell,key:a,style:s},l))}return i.createElement("thead",null,i.createElement("tr",null,t))},t.prototype.renderFooter=function(){var e=this.question.renderedTable;if(!e.showFooter)return null;var t=this.renderRow("footer",e.footerRow,this.question.cssClasses);return i.createElement("tfoot",null,t)},t.prototype.renderRows=function(){for(var e=this.question.cssClasses,t=[],n=this.question.renderedTable.rows,r=0;r<n.length;r++)t.push(this.renderRow(n[r].id,n[r],e));return i.createElement("tbody",null,t)},t.prototype.renderRow=function(e,t,n){for(var r=[],o=t.cells,a=0;a<o.length;a++)r.push(this.renderCell(o[a],a,n));var s="row"+e;return i.createElement("tr",{className:t.className,key:s},r)},t.prototype.renderCell=function(e,t,n){var r="cell"+t;if(e.hasQuestion)return i.createElement(f,{key:r,cssClasses:n,cell:e,creator:this.creator});var o=e.hasTitle?"row-header":"",a=this.renderCellContent(e,o,n),s=null;return(e.width||e.minWidth)&&(s={},e.width&&(s.width=e.width),e.minWidth&&(s.minWidth=e.minWidth)),i.createElement("td",{className:e.className,key:r,style:s,colSpan:e.colSpans},a)},t.prototype.renderCellContent=function(e,t,n){var r=null,o=null,a=null,s=null;if((e.width||e.minWidth)&&(s={},e.width&&(s.width=e.width),e.minWidth&&(s.minWidth=e.minWidth)),e.hasTitle&&(t="row-header",r=this.renderLocString(e.locTitle),e.requiredText&&(o=i.createElement("span",null,""),a=i.createElement("span",null,e.requiredText))),e.isActionsCell&&(r=i.createElement(h,{model:e.item.getData()})),e.hasPanel&&(r=i.createElement(u.SurveyPanel,{key:e.panel.id,element:e.panel,survey:this.question.survey,cssClasses:n,isDisplayMode:this.isDisplayMode,creator:this.creator})),!r)return null;var l=i.createElement(i.Fragment,null,r,o,a);return this.wrapCell(e,l,t)},t}(o.SurveyQuestionElementBase),h=function(e){function t(t){return e.call(this,t)||this}return p(t,e),Object.defineProperty(t.prototype,"model",{get:function(){return this.props.model},enumerable:!1,configurable:!0}),t.prototype.renderElement=function(){return i.createElement(c.SurveyActionBar,{model:this.model,handleClick:!1})},t}(o.ReactSurveyElement),f=function(e){function t(t){return e.call(this,t)||this}return p(t,e),Object.defineProperty(t.prototype,"cell",{get:function(){return this.props.cell},enumerable:!1,configurable:!0}),t.prototype.getQuestion=function(){var t=e.prototype.getQuestion.call(this);return t||(this.cell?this.cell.question:null)},t.prototype.doAfterRender=function(){var e=this.cellRef.current;if(e&&this.cell&&this.question&&this.question.survey&&"r"!==e.getAttribute("data-rendered")){e.setAttribute("data-rendered","r");var t={cell:this.cell,cellQuestion:this.question,htmlElement:e,row:this.cell.row,column:this.cell.cell.column};this.question.survey.matrixAfterCellRender(this.question,t)}},t.prototype.getShowErrors=function(){return this.question.isVisible&&(!this.cell.isChoice||this.cell.isFirstChoice)},t.prototype.getCellClass=function(){return this.cell.className},t.prototype.getCellStyle=function(){var t=e.prototype.getCellStyle.call(this);return(this.cell.width||this.cell.minWidth)&&(t||(t={}),this.cell.width&&(t.width=this.cell.width),this.cell.minWidth&&(t.minWidth=this.cell.minWidth)),t},t.prototype.getHeaderText=function(){return this.cell.headers},t.prototype.renderQuestion=function(){return this.cell.isChoice?this.cell.isCheckbox?this.renderCellCheckboxButton():this.renderCellRadiogroupButton():a.SurveyQuestion.renderQuestionBody(this.creator,this.question)},t.prototype.renderCellCheckboxButton=function(){var e=this.cell.question.id+"item"+this.cell.choiceIndex;return i.createElement(s.SurveyQuestionCheckboxItem,{key:e,question:this.cell.question,cssClasses:this.cell.question.cssClasses,isDisplayMode:this.cell.question.isInputReadOnly,item:this.cell.item,isFirst:this.cell.isFirstChoice,index:this.cell.choiceIndex.toString(),hideCaption:!0})},t.prototype.renderCellRadiogroupButton=function(){var e=this.cell.question.id+"item"+this.cell.choiceIndex;return i.createElement(l.SurveyQuestionRadioItem,{key:e,question:this.cell.question,cssClasses:this.cell.question.cssClasses,isDisplayMode:this.cell.question.isInputReadOnly,item:this.cell.item,index:this.cell.choiceIndex.toString(),isChecked:this.cell.question.value===this.cell.item.value,isDisabled:this.cell.question.isReadOnly||!this.cell.item.isEnabled,hideCaption:!0})},t}(a.SurveyQuestionAndErrorsCell)},"./src/react/reactquestion_matrixdynamic.tsx":
/*!***************************************************!*\
  !*** ./src/react/reactquestion_matrixdynamic.tsx ***!
  \***************************************************/
/*! exports provided: SurveyQuestionMatrixDynamic */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyQuestionMatrixDynamic",(function(){return l}));var r,i=n(/*! react */"react"),o=n(/*! ./reactquestion_factory */"./src/react/reactquestion_factory.tsx"),a=n(/*! ./reactquestion_matrixdropdownbase */"./src/react/reactquestion_matrixdropdownbase.tsx"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t){var n=e.call(this,t)||this;return n.handleOnRowAddClick=n.handleOnRowAddClick.bind(n),n}return s(t,e),Object.defineProperty(t.prototype,"matrix",{get:function(){return this.questionBase},enumerable:!1,configurable:!0}),t.prototype.handleOnRowAddClick=function(e){this.matrix.addRowUI()},t.prototype.renderElement=function(){var e=this.question.cssClasses,t=this.question.renderedTable.showTable?this.renderTableDiv():this.renderNoRowsContent(e);return i.createElement("div",null,this.renderAddRowButtonOnTop(e),t,this.renderAddRowButtonOnBottom(e))},t.prototype.renderAddRowButtonOnTop=function(e){return this.matrix.renderedTable.showAddRowOnTop?this.renderAddRowButton(e):null},t.prototype.renderAddRowButtonOnBottom=function(e){return this.matrix.renderedTable.showAddRowOnBottom?this.renderAddRowButton(e):null},t.prototype.renderNoRowsContent=function(e){var t=this.renderLocString(this.matrix.locEmptyRowsText),n=i.createElement("div",{className:e.emptyRowsText},t),r=this.renderAddRowButton(e,!0);return i.createElement("div",{className:e.emptyRowsSection},n,r)},t.prototype.renderAddRowButton=function(e,t){void 0===t&&(t=!1),e.button,e.buttonAdd,t&&e.emptyRowsButton;var n=this.renderLocString(this.matrix.locAddRowText);return i.createElement("div",{className:e.footer},i.createElement("button",{className:e.button+" "+e.buttonAdd,type:"button",disabled:this.question.isInputReadOnly,onClick:this.question.isDesignMode?void 0:this.handleOnRowAddClick},n,i.createElement("span",{className:e.iconAdd})))},t}(a.SurveyQuestionMatrixDropdownBase);o.ReactQuestionFactory.Instance.registerQuestion("matrixdynamic",(function(e){return i.createElement(l,e)}))},"./src/react/reactquestion_multipletext.tsx":
/*!**************************************************!*\
  !*** ./src/react/reactquestion_multipletext.tsx ***!
  \**************************************************/
/*! exports provided: SurveyQuestionMultipleText */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyQuestionMultipleText",(function(){return u}));var r,i=n(/*! react */"react"),o=n(/*! ./reactquestion_element */"./src/react/reactquestion_element.tsx"),a=n(/*! ./reactquestion */"./src/react/reactquestion.tsx"),s=n(/*! ./reactquestion_factory */"./src/react/reactquestion_factory.tsx"),l=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(t){return e.call(this,t)||this}return l(t,e),Object.defineProperty(t.prototype,"question",{get:function(){return this.questionBase},enumerable:!1,configurable:!0}),t.prototype.renderElement=function(){for(var e=this.question.cssClasses,t=this.question.getRows(),n=[],r=0;r<t.length;r++)n.push(this.renderRow(r,t[r],e));return i.createElement("table",{className:e.root},i.createElement("tbody",null,n))},t.prototype.renderRow=function(e,t,n){for(var r="item"+e,o=[],s=0;s<t.length;s++){var l=t[s],u=this.renderLocString(l.locTitle),c=[],p=l.editor;(p.isRequireTextOnStart||p.isRequireTextBeforeTitle)&&(c.push(i.createElement("span",{key:"requiredTextBefore"+s,className:n.requiredText},p.requiredText)),c.push(i.createElement("span",{key:"spaceBefore"+s},""))),c.push(i.createElement("span",{key:"itemTitle"+s,className:n.itemTitle},u)),p.isRequireTextAfterTitle&&(c.push(i.createElement("span",{key:"spaceB"+s},"")),c.push(i.createElement("span",{key:"requiredTextAfter"+s,className:n.requiredText},p.requiredText))),o.push(i.createElement("td",{key:"label"+s,className:n.cell},c)),o.push(i.createElement(a.SurveyQuestionAndErrorsCell,{key:"value"+s,cssClasses:n,question:l.editor,creator:this.creator}))}return i.createElement("tr",{key:r,className:n.row},o)},t}(o.SurveyQuestionElementBase);s.ReactQuestionFactory.Instance.registerQuestion("multipletext",(function(e){return i.createElement(u,e)}))},"./src/react/reactquestion_paneldynamic.tsx":
/*!**************************************************!*\
  !*** ./src/react/reactquestion_paneldynamic.tsx ***!
  \**************************************************/
/*! exports provided: SurveyQuestionPanelDynamic, SurveyQuestionPanelDynamicItem */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyQuestionPanelDynamic",(function(){return u})),n.d(t,"SurveyQuestionPanelDynamicItem",(function(){return c}));var r,i=n(/*! react */"react"),o=n(/*! ./reactquestion_element */"./src/react/reactquestion_element.tsx"),a=n(/*! ./panel */"./src/react/panel.tsx"),s=n(/*! ./reactquestion_factory */"./src/react/reactquestion_factory.tsx"),l=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(t){var n=e.call(this,t)||this;return n.handleOnPanelAddClick=n.handleOnPanelAddClick.bind(n),n.handleOnPanelPrevClick=n.handleOnPanelPrevClick.bind(n),n.handleOnPanelNextClick=n.handleOnPanelNextClick.bind(n),n.handleOnRangeChange=n.handleOnRangeChange.bind(n),n}return l(t,e),Object.defineProperty(t.prototype,"question",{get:function(){return this.questionBase},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this),this.setState({panelCounter:0});var t=this;this.question.panelCountChangedCallback=function(){t.updateQuestionRendering()},this.question.currentIndexChangedCallback=function(){t.updateQuestionRendering()},this.question.renderModeChangedCallback=function(){t.updateQuestionRendering()}},t.prototype.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this),this.question.panelCountChangedCallback=null,this.question.currentIndexChangedCallback=null,this.question.renderModeChangedCallback=null},t.prototype.updateQuestionRendering=function(){this.setState({panelCounter:this.state?this.state.panelCounter+1:1})},t.prototype.handleOnPanelAddClick=function(e){this.question.addPanelUI()},t.prototype.handleOnPanelPrevClick=function(e){this.question.goToPrevPanel()},t.prototype.handleOnPanelNextClick=function(e){this.question.goToNextPanel()},t.prototype.handleOnRangeChange=function(e){this.question.currentIndex=e.target.value},t.prototype.renderElement=function(){var e=[];if(this.question.isRenderModeList)for(var t=0;t<this.question.panels.length;t++){var n=this.question.panels[t];e.push(i.createElement(c,{key:n.id,element:n,question:this.question,index:t,cssClasses:this.question.cssClasses,isDisplayMode:this.isDisplayMode,creator:this.creator}))}else null!=this.question.currentPanel&&(n=this.question.currentPanel,e.push(i.createElement(c,{key:this.question.currentIndex,element:n,question:this.question,index:this.question.currentIndex,cssClasses:this.question.cssClasses,isDisplayMode:this.isDisplayMode,creator:this.creator})));var r=this.question.isRenderModeList?this.renderAddRowButton():null,o=this.question.isProgressTopShowing?this.renderNavigator():null,a=this.question.isProgressBottomShowing?this.renderNavigator():null,s={};return this.question.horizontalScroll&&(s.overflowX="scroll"),i.createElement("div",{className:this.question.cssClasses.root},o,i.createElement("div",{style:s},e),a,r)},t.prototype.renderNavigator=function(){var e=this.question.isRangeShowing?this.renderRange():null,t=this.rendrerPrevButton(),n=this.rendrerNextButton(),r=this.renderAddRowButton(),o=this.question.isProgressTopShowing?this.question.cssClasses.progressTop:this.question.cssClasses.progressBottom;return i.createElement("div",{style:{clear:"both"},className:o},i.createElement("div",{className:this.question.cssClasses.progressContainer},t,e,n),r,i.createElement("div",{className:this.question.cssClasses.progressText},this.question.progressText))},t.prototype.rendrerPrevButton=function(){var e,t;return i.createElement("div",{title:this.question.panelPrevText},i.createElement("svg",{viewBox:"0 0 10 10",className:(e=this.question,t=e.cssClasses.buttonPrev,e.isPrevButtonShowing||(t+=" "+e.cssClasses.buttonPrev+"--disabled"),t),onClick:this.handleOnPanelPrevClick},i.createElement("polygon",{points:"2,2 0,4 5,9 10,4 8,2 5,5 "})))},t.prototype.rendrerNextButton=function(){var e,t;return i.createElement("div",{title:this.question.panelNextText},i.createElement("svg",{viewBox:"0 0 10 10",className:(e=this.question,t=e.cssClasses.buttonNext,e.isNextButtonShowing||(t+=" "+e.cssClasses.buttonNext+"--disabled"),t),onClick:this.handleOnPanelNextClick},i.createElement("polygon",{points:"2,2 0,4 5,9 10,4 8,2 5,5 "})))},t.prototype.renderRange=function(){var e,t=this;return i.createElement("div",{className:this.question.cssClasses.progress},i.createElement("div",{className:this.question.cssClasses.progressBar,style:{width:(e=t.question.panelCount-1,t.question.currentIndex/e*100+"%")},role:"progressbar"}))},t.prototype.renderAddRowButton=function(){if(!this.question.canAddPanel)return null;var e=this.question.cssClasses.button+" "+this.question.cssClasses.buttonAdd;return"list"===this.question.renderMode&&(e+=" "+this.question.cssClasses.buttonAdd+"--list-mode"),i.createElement("input",{className:e,type:"button",onClick:this.handleOnPanelAddClick,value:this.question.panelAddText})},t}(o.SurveyQuestionElementBase),c=function(e){function t(t){var n=e.call(this,t)||this;return n.handleOnPanelRemoveClick=n.handleOnPanelRemoveClick.bind(n),n}return l(t,e),Object.defineProperty(t.prototype,"question",{get:function(){return this.props.question},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.props.index},enumerable:!1,configurable:!0}),t.prototype.getSurvey=function(){return this.question?this.question.survey:null},t.prototype.getCss=function(){var e=this.getSurvey();return e?e.getCss():{}},t.prototype.handleOnPanelRemoveClick=function(e){this.question.removePanelUI(this.index)},t.prototype.render=function(){var t=e.prototype.render.call(this),n=this.renderButton(),r=this.question.isRenderModeList&&this.index<this.question.panelCount-1?i.createElement("hr",{className:this.question.cssClasses.separator}):null;return i.createElement(i.Fragment,null,i.createElement("div",{className:this.question.getPanelWrapperCss()},t,n),r)},t.prototype.renderButton=function(){return!this.question.canRemovePanel||this.question.isRenderModeList&&this.panel.isCollapsed?null:i.createElement("input",{className:this.question.getPanelRemoveButtonCss(),type:"button",onClick:this.handleOnPanelRemoveClick,value:this.question.panelRemoveText})},t}(a.SurveyPanel);s.ReactQuestionFactory.Instance.registerQuestion("paneldynamic",(function(e){return i.createElement(u,e)}))},"./src/react/reactquestion_radiogroup.tsx":
/*!************************************************!*\
  !*** ./src/react/reactquestion_radiogroup.tsx ***!
  \************************************************/
/*! exports provided: SurveyQuestionRadiogroup, SurveyQuestionRadioItem */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyQuestionRadiogroup",(function(){return c})),n.d(t,"SurveyQuestionRadioItem",(function(){return p}));var r,i=n(/*! react */"react"),o=n(/*! ./reactquestion_element */"./src/react/reactquestion_element.tsx"),a=n(/*! ./reactquestion_comment */"./src/react/reactquestion_comment.tsx"),s=n(/*! ./reactquestion_factory */"./src/react/reactquestion_factory.tsx"),l=n(/*! ./element-factory */"./src/react/element-factory.tsx"),u=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e){function t(t){return e.call(this,t)||this}return u(t,e),Object.defineProperty(t.prototype,"question",{get:function(){return this.questionBase},enumerable:!1,configurable:!0}),t.prototype.renderElement=function(){var e=this,t=this.question.cssClasses,n=null;return this.question.canShowClearButton&&(n=i.createElement("div",null,i.createElement("input",{type:"button",className:this.question.cssClasses.clearButton,onClick:function(){return e.question.clearValue()},value:this.question.clearButtonCaption}))),i.createElement("fieldset",{className:t.root,ref:function(t){return e.control=t},role:"radiogroup"},this.question.hasTitle?null:i.createElement("legend",{"aria-label":this.question.locTitle.renderedHtml}),this.question.hasColumns?this.getColumns(t):this.getItems(t),n)},t.prototype.getColumns=function(e){var t=this,n=this.getStateValue();return this.question.columns.map((function(r,o){var a=r.map((function(r,i){return t.renderItem(r,n,e,""+o+i)}));return i.createElement("div",{key:"column"+o,className:t.question.getColumnClass()},a)}))},t.prototype.getItems=function(e){for(var t=[],n=this.getStateValue(),r=0;r<this.question.visibleChoices.length;r++){var i=this.question.visibleChoices[r],o=this.renderItem(i,n,e,""+r);t.push(o)}return t},Object.defineProperty(t.prototype,"textStyle",{get:function(){return{marginLeft:"3px",display:"inline",position:"static"}},enumerable:!1,configurable:!0}),t.prototype.renderItem=function(e,t,n,r){var o="item"+r,a=i.createElement(p,{key:o,question:this.question,cssClasses:n,isDisplayMode:this.isDisplayMode,item:e,textStyle:this.textStyle,index:r,isChecked:t===e.value}),s=this.question.survey,l=null;return s&&(l=s.wrapItemValue(a,this.question,e)),null!=l?l:a},t.prototype.getStateValue=function(){return this.question.isEmpty()?"":this.question.renderedValue},t}(o.SurveyQuestionElementBase),p=function(e){function t(t){var n=e.call(this,t)||this;return n.handleOnChange=n.handleOnChange.bind(n),n}return u(t,e),t.prototype.getStateElement=function(){return this.item},Object.defineProperty(t.prototype,"question",{get:function(){return this.props.question},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"item",{get:function(){return this.props.item},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textStyle",{get:function(){return this.props.textStyle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.props.index},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isChecked",{get:function(){return this.props.isChecked},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hideCaption",{get:function(){return!0===this.props.hideCaption},enumerable:!1,configurable:!0}),t.prototype.shouldComponentUpdate=function(){return!(this.question.customWidget&&!this.question.customWidgetData.isNeedRender&&!this.question.customWidget.widgetJson.isDefaultRender&&!this.question.customWidget.widgetJson.render)},t.prototype.handleOnChange=function(e){this.question.renderedValue=this.item.value},t.prototype.canRender=function(){return!!this.question&&!!this.item},t.prototype.renderElement=function(){var e=this.isChecked&&this.item.value===this.question.otherItem.value?this.renderOther(this.cssClasses):null,t=this.question.inputId+"_"+this.index,n=this.hideCaption?"":this.renderLocString(this.item.locText,this.textStyle),r=this.question.getItemClass(this.item),o=this.question.getLabelClass(this.item),a=this.item.locText,s=this.question.getControlLabelClass(this.item);return i.createElement("div",{className:r},i.createElement("label",{className:o},i.createElement("input",{className:this.cssClasses.itemControl,id:t,type:"radio",name:this.question.name+"_"+this.question.id,checked:this.isChecked,value:this.item.value,disabled:this.isDisplayMode||!this.item.isEnabled,onChange:this.handleOnChange,"aria-required":this.question.isRequired,"aria-label":a.renderedHtml,"aria-invalid":this.question.errors.length>0,"aria-describedby":this.question.errors.length>0?this.question.id+"_errors":null}),i.createElement("span",{className:this.cssClasses.materialDecorator},i.createElement("svg",{className:this.cssClasses.itemDecorator,viewBox:"-12 -12 24 24"},i.createElement("circle",{r:"6",cx:"0",cy:"0"}))),i.createElement("span",{className:"check"}),i.createElement("span",{className:s,title:a.text},n)),e)},t.prototype.renderOther=function(e){return i.createElement("div",{className:"form-group"},i.createElement(a.SurveyQuestionCommentItem,{question:this.question,otherCss:e.other,cssClasses:e,isDisplayMode:this.isDisplayMode}))},t}(o.ReactSurveyElement);l.ReactElementFactory.Instance.registerElement("survey-radiogroup-item",(function(e){return i.createElement(p,e)})),s.ReactQuestionFactory.Instance.registerQuestion("radiogroup",(function(e){return i.createElement(c,e)}))},"./src/react/reactquestion_ranking.tsx":
/*!*********************************************!*\
  !*** ./src/react/reactquestion_ranking.tsx ***!
  \*********************************************/
/*! exports provided: SurveyQuestionRanking, SurveyQuestionRankingItem */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyQuestionRanking",(function(){return l})),n.d(t,"SurveyQuestionRankingItem",(function(){return u}));var r,i=n(/*! react */"react"),o=n(/*! ./reactquestion_element */"./src/react/reactquestion_element.tsx"),a=n(/*! ./reactquestion_factory */"./src/react/reactquestion_factory.tsx"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),Object.defineProperty(t.prototype,"question",{get:function(){return this.questionBase},enumerable:!1,configurable:!0}),t.prototype.renderElement=function(){var e=this;return i.createElement("div",{className:this.question.rootClass,ref:function(t){return e.control=t}},this.getItems())},t.prototype.getItems=function(){for(var e=[],t=this.question.rankingChoices,n=0;n<t.length;n++){var r=t[n];e.push(this.renderItem(r,n,this.question.handleKeydown,this.question.cssClasses,this.question.getItemClass(r)))}return e},t.prototype.renderItem=function(e,t,n,r,o){var a=e.value+"-"+t+"-item",s=this.renderLocString(e.locText),l=this.question.getNumberByIndex(t),c=i.createElement(u,{key:a,text:s,index:l,handleKeydown:n,cssClasses:r,itemClass:o}),p=this.question.survey,d=null;return p&&(d=p.wrapItemValue(c,this.question,e)),null!=d?d:c},t}(o.SurveyQuestionElementBase),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),Object.defineProperty(t.prototype,"text",{get:function(){return this.props.text},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.props.index},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"handleKeydown",{get:function(){return this.props.handleKeydown},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssClasses",{get:function(){return this.props.cssClasses},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"itemClass",{get:function(){return this.props.itemClass},enumerable:!1,configurable:!0}),t.prototype.renderElement=function(){return i.createElement("div",{tabIndex:0,className:this.itemClass,onKeyDown:this.handleKeydown},i.createElement("div",{tabIndex:-1,style:{outline:"none"}},i.createElement("div",{className:this.cssClasses.itemGhostNode}),i.createElement("div",{className:this.cssClasses.itemContent},i.createElement("div",{className:this.cssClasses.itemIconContainer},i.createElement("svg",{width:"10",height:"16",viewBox:"0 0 10 16",className:this.cssClasses.itemIcon+" "+this.cssClasses.itemIconHoverMod,xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M6 2C6 0.9 6.9 0 8 0C9.1 0 10 0.9 10 2C10 3.1 9.1 4 8 4C6.9 4 6 3.1 6 2ZM2 0C0.9 0 0 0.9 0 2C0 3.1 0.9 4 2 4C3.1 4 4 3.1 4 2C4 0.9 3.1 0 2 0ZM8 6C6.9 6 6 6.9 6 8C6 9.1 6.9 10 8 10C9.1 10 10 9.1 10 8C10 6.9 9.1 6 8 6ZM2 6C0.9 6 0 6.9 0 8C0 9.1 0.9 10 2 10C3.1 10 4 9.1 4 8C4 6.9 3.1 6 2 6ZM8 12C6.9 12 6 12.9 6 14C6 15.1 6.9 16 8 16C9.1 16 10 15.1 10 14C10 12.9 9.1 12 8 12ZM2 12C0.9 12 0 12.9 0 14C0 15.1 0.9 16 2 16C3.1 16 4 15.1 4 14C4 12.9 3.1 12 2 12Z"})),i.createElement("svg",{width:"10",height:"24",viewBox:"0 0 10 24",className:this.cssClasses.itemIcon+" "+this.cssClasses.itemIconFocusMod,xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M10 5L5 0L0 5H4V9H6V5H10Z"}),i.createElement("path",{d:"M6 19V15H4V19H0L5 24L10 19H6Z"}))),i.createElement("div",{className:this.cssClasses.itemIndex},this.index),i.createElement("div",{className:this.cssClasses.controlLabel},this.text))))},t}(o.ReactSurveyElement);a.ReactQuestionFactory.Instance.registerQuestion("ranking",(function(e){return i.createElement(l,e)}))},"./src/react/reactquestion_rating.tsx":
/*!********************************************!*\
  !*** ./src/react/reactquestion_rating.tsx ***!
  \********************************************/
/*! exports provided: SurveyQuestionRating */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyQuestionRating",(function(){return u}));var r,i=n(/*! react */"react"),o=n(/*! ./reactquestion_element */"./src/react/reactquestion_element.tsx"),a=n(/*! ./reactquestion_comment */"./src/react/reactquestion_comment.tsx"),s=n(/*! ./reactquestion_factory */"./src/react/reactquestion_factory.tsx"),l=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(t){var n=e.call(this,t)||this;return n.handleOnClick=n.handleOnClick.bind(n),n}return l(t,e),Object.defineProperty(t.prototype,"question",{get:function(){return this.questionBase},enumerable:!1,configurable:!0}),t.prototype.handleOnClick=function(e){this.question.setValueFromClick(e.target.value),this.setState({value:this.question.value})},t.prototype.renderElement=function(){for(var e=this,t=this.question.cssClasses,n=[],r=this.question.minRateDescription?this.renderLocString(this.question.locMinRateDescription):null,o=this.question.maxRateDescription?this.renderLocString(this.question.locMaxRateDescription):null,a=0;a<this.question.visibleRateValues.length;a++){var s=0==a?r:null,l=a==this.question.visibleRateValues.length-1?o:null;n.push(this.renderItem("value"+a,this.question.visibleRateValues[a],a,s,l,t))}var u=this.question.hasOther?this.renderOther(t):null;return i.createElement("div",{className:t.root,ref:function(t){return e.control=t}},i.createElement("fieldset",{role:"radiogroup"},i.createElement("legend",{"aria-label":this.question.locTitle.renderedHtml}),n),u)},t.prototype.renderItem=function(e,t,n,r,o,a){var s=this.question.getItemClass(t),l=this.renderLocString(t.locText),u=r?i.createElement("span",{className:a.minText},r):null,c=o?i.createElement("span",{className:a.maxText},o):null;return i.createElement("label",{key:e,className:s},i.createElement("input",{type:"radio",className:"sv-visuallyhidden",name:this.question.name,id:this.question.inputId+"_"+n,value:t.value,disabled:this.isDisplayMode,checked:this.question.value==t.value,readOnly:!0,onClick:this.handleOnClick,"aria-required":this.question.isRequired,"aria-label":t.locText.text,"aria-invalid":this.question.errors.length>0,"aria-describedby":this.question.errors.length>0?this.question.id+"_errors":null}),u,i.createElement("span",{className:a.itemText},l),c)},t.prototype.renderOther=function(e){return i.createElement("div",{className:e.other},i.createElement(a.SurveyQuestionCommentItem,{question:this.question,cssClasses:e,isDisplayMode:this.isDisplayMode}))},t}(o.SurveyQuestionElementBase);s.ReactQuestionFactory.Instance.registerQuestion("rating",(function(e){return i.createElement(u,e)}))},"./src/react/reactquestion_text.tsx":
/*!******************************************!*\
  !*** ./src/react/reactquestion_text.tsx ***!
  \******************************************/
/*! exports provided: SurveyQuestionText */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyQuestionText",(function(){return l}));var r,i=n(/*! react */"react"),o=n(/*! ./reactquestion_element */"./src/react/reactquestion_element.tsx"),a=n(/*! ./reactquestion_factory */"./src/react/reactquestion_factory.tsx"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t){var n=e.call(this,t)||this;return n._isWaitingForEnter=!1,n}return s(t,e),t.prototype.renderElement=function(){var e=this,t=this.question.getControlClass(),n={};this.question.inputWidth&&(n.width=this.question.inputWidth);var r=null,o=null,a=null;this.question.isInputTextUpdate&&(r=function(t){return e._isWaitingForEnter=229===t.keyCode},o=function(t){e._isWaitingForEnter&&13!==t.keyCode||(e.updateValueOnEvent(t),e._isWaitingForEnter=!1)},a=function(t){t.persist(),setTimeout((function(){e.updateValueOnEvent(t)}),1)});var s=this.question.renderedPlaceHolder,l=this.renderDataList();return i.createElement(i.Fragment,null,i.createElement("input",{id:this.question.inputId,disabled:this.isDisplayMode,className:t,type:this.question.inputType,ref:function(t){return e.control=t},style:n,maxLength:this.question.getMaxLength(),min:this.question.renderedMin,max:this.question.renderedMax,step:this.question.renderedStep,size:this.question.inputSize,placeholder:s,list:this.question.dataListId,autoComplete:this.question.autoComplete,onBlur:this.updateValueOnEvent,onChange:function(t){t.target===document.activeElement?e.question.isInputTextUpdate&&e.updateValueOnEvent(t):e.updateValueOnEvent(t)},onKeyUp:o,onKeyDown:r,onCompositionUpdate:a,"aria-required":this.question.isRequired,"aria-label":this.question.locTitle.renderedHtml,"aria-invalid":this.question.errors.length>0,"aria-describedby":this.question.errors.length>0?this.question.id+"_errors":null}),l)},t.prototype.renderDataList=function(){if(!this.question.dataListId)return null;var e=this.question.dataList;if(0==e.length)return null;for(var t=[],n=0;n<e.length;n++)t.push(i.createElement("option",{value:e[n]}));return i.createElement("datalist",{id:this.question.dataListId},t)},t}(o.SurveyQuestionUncontrolledElement);a.ReactQuestionFactory.Instance.registerQuestion("text",(function(e){return i.createElement(l,e)}))},"./src/react/reactsurveymodel.tsx":
/*!****************************************!*\
  !*** ./src/react/reactsurveymodel.tsx ***!
  \****************************************/
/*! exports provided: ReactSurveyModel, ReactWindowModel */function(e,t,n){"use strict";n.r(t),n.d(t,"ReactSurveyModel",(function(){return s})),n.d(t,"ReactWindowModel",(function(){return l}));var r,i=n(/*! survey-core */"./src/entries/core.ts"),o=n(/*! ./element-factory */"./src/react/element-factory.tsx"),a=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e){function t(t){return void 0===t&&(t=null),e.call(this,t)||this}return a(t,e),t.prototype.render=function(){this.renderCallback&&this.renderCallback()},t.prototype.mergeCss=function(e,t){this.mergeValues(e,t)},t.prototype.doAfterRenderSurvey=function(e){this.afterRenderSurvey(e)},t.prototype.onLoadSurveyFromService=function(){this.currentPage&&(this.currentPage.setWasShown(!1),this.currentPage.onFirstRendering()),this.render()},t.prototype.onLoadingSurveyFromService=function(){this.render()},t.prototype.setCompletedState=function(t,n){e.prototype.setCompletedState.call(this,t,n),this.render()},t.prototype.start=function(){var t=e.prototype.start.call(this);return this.render(),t},t.prototype.wrapRow=function(e,t){var n=this.getRowWrapperComponentName(t),r=this.getRowWrapperComponentData(t);return o.ReactElementFactory.Instance.createElement(n,{element:e,row:t,componentData:r})},t.prototype.wrapElement=function(e,t){var n=this.getElementWrapperComponentName(t),r=this.getElementWrapperComponentData(t);return o.ReactElementFactory.Instance.createElement(n,{element:e,question:t,componentData:r})},t.prototype.wrapItemValue=function(e,t,n){var r=this.getItemValueWrapperComponentName(n,t),i=this.getItemValueWrapperComponentData(n,t);return o.ReactElementFactory.Instance.createElement(r,{key:e.key,element:e,question:t,item:n,componentData:i})},t.prototype.wrapMatrixCell=function(e,t,n){void 0===n&&(n="cell");var r=this.getElementWrapperComponentName(t,n),i=this.getElementWrapperComponentData(t,n);return o.ReactElementFactory.Instance.createElement(r,{element:e,cell:t,componentData:i})},t}(i.SurveyModel),l=function(e){function t(t,n){return void 0===t&&(t=null),void 0===n&&(n=null),e.call(this,t,n)||this}return a(t,e),t.prototype.createSurvey=function(e){return new s(e)},Object.defineProperty(t.prototype,"renderCallback",{get:function(){return this.survey.renderCallback},set:function(e){this.survey.renderCallback=e},enumerable:!1,configurable:!0}),t}(i.SurveyWindowModel);i.SurveyModel.platform="react"},"./src/react/reacttimerpanel.tsx":
/*!***************************************!*\
  !*** ./src/react/reacttimerpanel.tsx ***!
  \***************************************/
/*! exports provided: SurveyTimerPanel */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyTimerPanel",(function(){return a}));var r,i=n(/*! react */"react"),o=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=function(e){function t(t){var n=e.call(this,t)||this;return n.update=function(){n.setState({timeSpent:n.survey.timeSpent})},n}return o(t,e),Object.defineProperty(t.prototype,"survey",{get:function(){return this.props.survey},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.survey.onTimer.add(this.update)},t.prototype.componentWillUnmount=function(){this.survey.onTimer.remove(this.update)},t.prototype.render=function(){return i.createElement("div",null,this.survey.timerInfoText)},t}(i.Component)},"./src/react/row.tsx":
/*!***************************!*\
  !*** ./src/react/row.tsx ***!
  \***************************/
/*! exports provided: SurveyRow */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyRow",(function(){return l}));var r,i=n(/*! react */"react"),o=n(/*! ./reactquestion_element */"./src/react/reactquestion_element.tsx"),a=n(/*! ./element-factory */"./src/react/element-factory.tsx"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t){var n=e.call(this,t)||this;return n.rootRef=i.createRef(),n}return s(t,e),t.prototype.getStateElement=function(){return this.row},Object.defineProperty(t.prototype,"row",{get:function(){return this.props.row},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"survey",{get:function(){return this.props.survey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"creator",{get:function(){return this.props.creator},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"css",{get:function(){return this.props.css},enumerable:!1,configurable:!0}),t.prototype.canRender=function(){return!!this.row&&!!this.survey&&!!this.creator&&this.row.visible},t.prototype.renderElementContent=function(){var e=this,t=null;return this.row.isNeedRender&&(t=this.row.visibleElements.map((function(t){var n=e.createElement(t),r={};return t.renderWidth&&(r.width=t.renderWidth,r.flexGrow=1,r.flexShrink=1,r.flexBasis=t.renderWidth,r.minWidth=t.minWidth,r.maxWidth=t.maxWidth),i.createElement("div",{style:r,key:n.key},n)}))),i.createElement("div",{ref:this.rootRef,className:this.css.row},t)},t.prototype.renderElement=function(){var e=this.survey,t=this.renderElementContent();return e.wrapRow(t,this.row)||t},t.prototype.componentDidMount=function(){var t=this;e.prototype.componentDidMount.call(this);var n=this.rootRef.current;if(n&&!this.row.isNeedRender){var r=n;setTimeout((function(){t.row.startLazyRendering(r)}),10)}},t.prototype.shouldComponentUpdate=function(e,t){return e.row!==this.row&&(e.row.isNeedRender=this.row.isNeedRender,this.stopLazyRendering()),!0},t.prototype.stopLazyRendering=function(){this.row.stopLazyRendering(),this.row.isNeedRender=!this.row.isLazyRendering},t.prototype.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this),this.stopLazyRendering()},t.prototype.createElement=function(e){var t=e.getType();return a.ReactElementFactory.Instance.isElementRegistered(t)||(t="question"),a.ReactElementFactory.Instance.createElement(t,{key:e.name,element:e,creator:this.creator,survey:this.survey,css:this.css})},t}(o.SurveyElementBase)},"./src/react/signaturepad.tsx":
/*!************************************!*\
  !*** ./src/react/signaturepad.tsx ***!
  \************************************/
/*! exports provided: SurveyQuestionSignaturePad */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyQuestionSignaturePad",(function(){return l}));var r,i=n(/*! react */"react"),o=n(/*! ./reactquestion_element */"./src/react/reactquestion_element.tsx"),a=n(/*! ./reactquestion_factory */"./src/react/reactquestion_factory.tsx"),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t){var n=e.call(this,t)||this;return n.state={value:n.question.value},n}return s(t,e),Object.defineProperty(t.prototype,"question",{get:function(){return this.questionBase},enumerable:!1,configurable:!0}),t.prototype.renderElement=function(){var e=this,t=this.question.cssClasses;return i.createElement("div",{className:t.root,ref:function(t){return e.control=t},style:{height:this.question.height,width:this.question.width}},i.createElement("div",{className:t.placeholder,style:{display:this.question.needShowPlaceholder()?"":"none"}},this.question.placeHolderText),i.createElement("div",null,i.createElement("canvas",{tabIndex:0})),i.createElement("div",{className:t.controls},i.createElement("button",{type:"button",className:t.clearButton,title:this.question.clearButtonCaption},"")))},t}(o.SurveyQuestionElementBase);a.ReactQuestionFactory.Instance.registerQuestion("signaturepad",(function(e){return i.createElement(l,e)}))},"./src/react/string-editor.tsx":
/*!*************************************!*\
  !*** ./src/react/string-editor.tsx ***!
  \*************************************/
/*! exports provided: SurveyLocStringEditor */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyLocStringEditor",(function(){return u}));var r,i=n(/*! react */"react"),o=n.n(i),a=n(/*! survey-core */"./src/entries/core.ts"),s=n(/*! ./element-factory */"./src/react/element-factory.tsx"),l=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(t){var n=e.call(this,t)||this;return n.onInput=function(e){n.locStr.text=e.target.innerText},n.onClick=function(e){e.preventDefault(),e.stopPropagation()},n.state={changed:0},n}return l(t,e),Object.defineProperty(t.prototype,"locStr",{get:function(){return this.props.locStr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this.props.style},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){if(this.locStr){var e=this;this.locStr.onChanged=function(){e.setState({changed:e.state.changed+1})}}},t.prototype.componentWillUnmount=function(){this.locStr&&(this.locStr.onChanged=function(){})},t.prototype.render=function(){if(!this.locStr)return null;if(this.locStr.hasHtml){var e={__html:this.locStr.renderedHtml};return o.a.createElement("span",{className:"sv-string-editor",contentEditable:"true",suppressContentEditableWarning:!0,style:this.style,dangerouslySetInnerHTML:e,onBlur:this.onInput,onClick:this.onClick})}return o.a.createElement("span",{className:"sv-string-editor",contentEditable:"true",suppressContentEditableWarning:!0,style:this.style,onBlur:this.onInput,onClick:this.onClick},this.locStr.renderedHtml)},t}(o.a.Component);s.ReactElementFactory.Instance.registerElement(a.LocalizableString.editableRenderer,(function(e){return o.a.createElement(u,e)}))},"./src/react/string-viewer.tsx":
/*!*************************************!*\
  !*** ./src/react/string-viewer.tsx ***!
  \*************************************/
/*! exports provided: SurveyLocStringViewer */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyLocStringViewer",(function(){return u}));var r,i=n(/*! react */"react"),o=n.n(i),a=n(/*! survey-core */"./src/entries/core.ts"),s=n(/*! ./element-factory */"./src/react/element-factory.tsx"),l=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(t){var n=e.call(this,t)||this;return n.state={changed:0},n}return l(t,e),Object.defineProperty(t.prototype,"locStr",{get:function(){return this.props.locStr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this.props.style},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){if(this.locStr){var e=this;this.locStr.onChanged=function(){e.setState({changed:e.state.changed+1})}}},t.prototype.componentWillUnmount=function(){this.locStr&&(this.locStr.onChanged=function(){})},t.prototype.render=function(){if(!this.locStr)return null;if(this.locStr.hasHtml){var e={__html:this.locStr.renderedHtml};return o.a.createElement("span",{style:this.style,dangerouslySetInnerHTML:e})}return o.a.createElement("span",{style:this.style},this.locStr.renderedHtml)},t}(o.a.Component);s.ReactElementFactory.Instance.registerElement(a.LocalizableString.defaultRenderer,(function(e){return o.a.createElement(u,e)}))},"./src/rendererFactory.ts":
/*!********************************!*\
  !*** ./src/rendererFactory.ts ***!
  \********************************/
/*! exports provided: RendererFactory */function(e,t,n){"use strict";n.r(t),n.d(t,"RendererFactory",(function(){return r}));var r=function(){function e(){this.renderersHash={}}return e.prototype.unregisterRenderer=function(e,t){delete this.renderersHash[e][t]},e.prototype.registerRenderer=function(e,t,n){this.renderersHash[e]||(this.renderersHash[e]={}),this.renderersHash[e][t]=n},e.prototype.getRenderer=function(e,t){return this.renderersHash[e]&&this.renderersHash[e][t]||"default"},e.prototype.getRendererByQuestion=function(e){return this.getRenderer(e.getType(),e.renderAs)},e.prototype.clear=function(){this.renderersHash={}},e.Instance=new e,e}()},"./src/settings.ts":
/*!*************************!*\
  !*** ./src/settings.ts ***!
  \*************************/
/*! exports provided: settings */function(e,t,n){"use strict";n.r(t),n.d(t,"settings",(function(){return r}));var r={commentPrefix:"-Comment",webserviceEncodeParameters:!0,useCachingForChoicesRestful:!0,get useCachingForChoicesRestfull(){return r.useCachingForChoicesRestful},set useCachingForChoicesRestfull(e){r.useCachingForChoicesRestful=e},surveyServiceUrl:"https://api.surveyjs.io/public/v1/Survey",itemValueSeparator:"|",defaultLocaleName:"default",matrixDefaultRowName:"default",matrixDefaultCellType:"dropdown",matrixTotalValuePostFix:"-total",matrixMaximumRowCount:1e3,matrixMaxRowCountInCondition:1,panelMaximumPanelCount:100,ratingMaximumRateValueCount:20,disableOnGettingChoicesFromWeb:!1,serializeLocalizableStringAsObject:!1,allowShowEmptyTitleInDesignMode:!0,allowShowEmptyDescriptionInDesignMode:!0,executeCompleteTriggerOnValueChanged:!1,executeSkipTriggerOnValueChanged:!0,readOnlyCommentRenderMode:"textarea",confirmActionFunc:function(e){return confirm(e)},minWidth:"300px",maxWidth:"initial",maximumConditionRunCountOnValueChanged:10,setQuestionVisibleIndexForHiddenTitle:!1,setQuestionVisibleIndexForHiddenNumber:!1,lazyRowsRendering:!1,lazyRowsRenderingStartRow:3,showItemsInOrder:"default",supportedValidators:{question:["expression"],comment:["text","regex"],text:["numeric","text","regex","email"],checkbox:["answercount"]},minDate:"",maxDate:"",showModal:void 0,supportCreatorV2:!1,customIcons:{}}},"./src/stylesmanager.ts":
/*!******************************!*\
  !*** ./src/stylesmanager.ts ***!
  \******************************/
/*! exports provided: StylesManager */function(e,t,n){"use strict";n.r(t),n.d(t,"StylesManager",(function(){return i}));var r=n(/*! ./defaultCss/cssstandard */"./src/defaultCss/cssstandard.ts"),i=function(){function e(){this.sheet=null,e.Enabled&&(this.sheet=e.findSheet(e.SurveyJSStylesSheetId),this.sheet||(this.sheet=e.createSheet(e.SurveyJSStylesSheetId),this.initializeStyles(this.sheet)))}return e.findSheet=function(e){if("undefined"==typeof document)return null;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode&&document.styleSheets[t].ownerNode.id===e)return document.styleSheets[t];return null},e.createSheet=function(e){var t=document.createElement("style");return t.id=e,t.appendChild(document.createTextNode("")),document.head.appendChild(t),t.sheet},e.applyTheme=function(t,n){var i;if(void 0===t&&(t="default"),void 0===n&&(n=".sv_main"),"modern"===t&&(n=".sv-root-modern "),-1!==["bootstrap","bootstrapmaterial","modern"].indexOf(t)?(i=e[t+"ThemeCss"],r.surveyCss.currentType=t):(i=e.ThemeCss,r.surveyCss.currentType="standard"),e.Enabled){var o=e.findSheet(t+n);if(!o){o=e.createSheet(t+n);var a=e.ThemeColors[t]||e.ThemeColors.default;Object.keys(i).forEach((function(e){var t=i[e];Object.keys(a).forEach((function(e){return t=t.replace(new RegExp("\\"+e,"g"),a[e])}));try{o.insertRule(n+e+" { "+t+" }",0)}catch(e){}}))}}},e.prototype.initializeStyles=function(t){e.Enabled&&(Object.keys(e.Styles).forEach((function(n){try{t.insertRule(n+" { "+e.Styles[n]+" }",0)}catch(e){}})),Object.keys(e.Media).forEach((function(n){try{t.insertRule(e.Media[n].media+" { "+n+" { "+e.Media[n].style+" } }",0)}catch(e){}})))},e.SurveyJSStylesSheetId="surveyjs-styles",e.Styles={".sv_main span":"word-break: break-word;",".sv_main legend":"border: none; margin: 0;",".sv_bootstrap_css .sv_qstn":"padding: 0.5em 1em 1.5em 1em;",".sv_bootstrap_css .sv_qcbc input[type=checkbox], .sv_bootstrap_css .sv_qcbc input[type=radio]":"vertical-align: middle; margin-top: -1px",".sv_bootstrap_css .sv_qstn fieldset":"display: block;",".sv_bootstrap_css .sv_qstn  .sv_q_checkbox_inline, .sv_bootstrap_css .sv_qstn .sv_q_radiogroup_inline":"display: inline-block;",".sv_bootstrap_css .sv-paneldynamic__progress-container ":"position: relative; margin-right: 250px; margin-left: 40px; margin-top: 10px;",".sv_main.sv_bootstrapmaterial_css .sv_q_radiogroup_control_label":"display: inline; position: static;",".sv_main.sv_bootstrapmaterial_css .checkbox":"margin-top:10px;margin-bottom:10px;",".sv_row":"clear: both; min-width:300px;",".sv_row .sv_qstn":"float: left",".sv_row .sv_qstn:last-child":"float: none",".sv_qstn":"display: vertical-align: top; overflow: auto; min-width:300px;",".sv_p_container":"display: vertical-align: top; min-width:300px;",".sv_q_title .sv_question_icon":"float: right; margin-right: 1em;",".sv_q_title .sv_question_icon::before":"content: ''; background-repeat: no-repeat; background-position: center; padding: 0.5em; display: inline-block; background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMi4wLjEsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCAxMCAxMCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTAgMTA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQoJLnN0MHtmaWxsOiM2RDcwNzI7fQ0KPC9zdHlsZT4NCjxwb2x5Z29uIGNsYXNzPSJzdDAiIHBvaW50cz0iMiwyIDAsNCA1LDkgMTAsNCA4LDIgNSw1ICIvPg0KPC9zdmc+DQo=);",".sv_q_title .sv_question_icon.sv_expanded::before":"transform: rotate(180deg);",".sv_qbln .checkbox-material":"margin-right: 3px;",".sv_qcbx .checkbox-material":"margin-right: 5px;",".sv_qcbx .checkbox label":"justify-content: left; display: inline-block;",".sv_qstn .radio label":"justify-content: left; display: inline-block;",".sv_qstn .sv_q_imgsel > label img":"pointer-events: none;",".sv_qstn .sv_q_imgsel.sv_q_imagepicker_inline":"display: inline-block;",".sv_qstn label.sv_q_m_label":"position: absolute; margin: 0; display: block; width: 100%;",".sv_qstn td":"position: relative;",".sv_q_mt_item_value":"float: left;",'[dir="rtl"] .sv_q_mt_item_value':"float: right;",".sv_qstn.sv_qstn_left":"margin-top: 0.75em;",".sv_qstn .title-left":"float: left; margin-right: 1em;",'[dir="rtl"] .sv_qstn .title-left':"float: right; margin-left: 1em;",".sv_qstn .content-left":"overflow: hidden",".sv_q_radiogroup_inline .sv_q_radiogroup_other":"display: inline-block;",".sv_q_checkbox_inline .sv_q_checkbox_other":"display: inline-block;",".sv_q_checkbox_inline, .sv_q_radiogroup_inline, .sv_q_imagepicker_inline":"line-height: 2.5em;",".form-inline .sv_q_checkbox_inline:not(:last-child)":"margin-right: 1em;",".form-inline .sv_q_radiogroup_inline:not(:last-child)":"margin-right: 1em;",".sv_imgsel .sv_q_imagepicker_inline:not(:last-child)":"margin-right: 1em;",".sv_qstn fieldset":"border: none; margin: 0; padding: 0;",".sv_qstn .sv_q_file_placeholder":"display:none",".sv_p_title":"padding-left: 1em; padding-bottom: 0.3em;",".sv_p_title_expandable":"cursor: pointer;",".sv_q_title_expandable":"cursor: pointer;",".sv_p_title .sv_panel_icon":"float: right; margin-right: 1em;",".sv_p_title .sv_panel_icon::before":"content: ''; background-repeat: no-repeat; background-position: center; padding: 0.5em; display: inline-block; background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMi4wLjEsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCAxMCAxMCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTAgMTA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+DQoJLnN0MHtmaWxsOiM2RDcwNzI7fQ0KPC9zdHlsZT4NCjxwb2x5Z29uIGNsYXNzPSJzdDAiIHBvaW50cz0iMiwyIDAsNCA1LDkgMTAsNCA4LDIgNSw1ICIvPg0KPC9zdmc+DQo=);",".sv_p_title .sv_panel_icon.sv_expanded::before":"transform: rotate(180deg);",".sv_p_footer":"padding-left: 1em; padding-bottom: 1em;padding-top: 1em;",".sv_matrix_cell_detail_button":"position: relative",".sv_detail_panel_icon":"display: block; position: absolute; left: 50%; top: 50%; transform: translate(-50%, -50%); width: 14px; height: 14px;",".sv_detail_panel_icon::before":"content: ''; background-repeat: no-repeat; background-position: center; width: 14px; height: 14px; display: block; transform: rotate(270deg); background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='utf-8'%3F%3E%3C!-- Generator: Adobe Illustrator 21.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0) --%3E%3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 15 15' style='enable-background:new 0 0 15 15;' xml:space='preserve'%3E%3Cstyle type='text/css'%3E .st0%7Bfill:%23FFFFFF;%7D%0A%3C/style%3E%3Cpolygon class='st0' points='14,5.5 12.6,4.1 7.5,9.1 2.4,4.1 1,5.5 7.5,12 '/%3E%3C/svg%3E%0A\");",".sv_detail_panel_icon.sv_detail_expanded::before":"transform: rotate(0deg)",".sv_matrix_empty_rows_section":"text-align: center; vertical-align: middle;",".sv_matrix_empty_rows_text":"padding:20px",".sv_q_file > input[type=file], .sv_q_file > button":"display: inline-block;",".sv_q_file_preview":"display: inline-block; vertical-align: top; border: 1px solid lightgray; padding: 5px; margin-top: 10px;",".sv_q_file_preview > a":"display: block; overflow: hidden; vertical-align: top; white-space: nowrap; text-overflow: ellipsis;",".sv_q_file_remove_button":"line-height: normal;",".sv_q_file_remove":"display: block; cursor: pointer;",".sv_q_m_cell_text":"cursor: pointer;",".sv_q_dd_other":"margin-top: 1em;",".sv_q_dd_other input":"width: 100%;",".sv_qstn .sv-q-col-1, .sv-question .sv-q-col-1":"width: 100%; display: inline-block; padding-right: 1em; box-sizing: border-box; word-break: break-word;",".sv_qstn .sv-q-col-2, .sv-question .sv-q-col-2":"width: calc(50% - 1em); display: inline-block; padding-right: 1em; box-sizing: border-box; word-break: break-word;",".sv_qstn .sv-q-col-3, .sv-question .sv-q-col-3":"width: calc(33.33333% - 1em); display: inline-block; padding-right: 1em; box-sizing: border-box; word-break: break-word;",".sv_qstn .sv-q-col-4, .sv-question .sv-q-col-4":"width: calc(25% - 1em); display: inline-block; padding-right: 1em; box-sizing: border-box; word-break: break-word;",".sv_qstn .sv-q-col-5, .sv-question .sv-q-col-5":"width: calc(20% - 1em); display: inline-block; padding-right: 1em; box-sizing: border-box; word-break: break-word;",".sv_qstn .sv-q-column-1, .sv-question .sv-q-column-1":"width: 100%; max-width: 100%; display: inline-block; padding-right: 1em; box-sizing: border-box; word-break: break-word;",".sv_qstn .sv-q-column-2, .sv-question .sv-q-column-2":"max-width: 50%; display: inline-block; padding-right: 1em; box-sizing: border-box; word-break: break-word;",".sv_qstn .sv-q-column-3, .sv-question .sv-q-column-3":"max-width: 33.33333%; display: inline-block; padding-right: 1em; box-sizing: border-box; word-break: break-word;",".sv_qstn .sv-q-column-4, .sv-question .sv-q-column-4":"max-width: 25%; display: inline-block; padding-right: 1em; box-sizing: border-box; word-break: break-word;",".sv_qstn .sv-q-column-5, .sv-question .sv-q-column-5":"max-width: 20%; display: inline-block; padding-right: 1em; box-sizing: border-box; word-break: break-word;",".sv_qstn .sv_q_file_input":"color: transparent;",".sv_qstn .sv_q_imgsel label > div":"overflow: hidden; white-space: nowrap; text-overflow: ellipsis; padding: 4px; border: 1px solid lightgray; border-radius: 4px;",".sv_qstn .sv_q_imgsel label > div > img, .sv_qstn .sv_q_imgsel label > div > embed":"display: block;",".sv_qstn table tr td .sv_q_m_cell_label":"position: absolute; left: 0; right: 0; top: 0; bottom: 0;","f-panel":"padding: 0.5em 1em; display: inline-block; line-height: 2em;",".sv_progress_bar > span":"white-space: nowrap;",".sv_progress-buttons__container-center":"text-align: center;",".sv_progress-buttons__container":"display: inline-block; font-size:0; width: 100%; max-width: 1100px; white-space: nowrap; overflow: hidden;",".sv_progress-buttons__image-button-left":"display: inline-block; vertical-align: top; margin-top: 22px; font-size: 14px; width: 16px; height: 16px; cursor: pointer; background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMi4wLjEsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCAxNiAxNiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTYgMTY7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwb2x5Z29uIHBvaW50cz0iMTEsMTIgOSwxNCAzLDggOSwyIDExLDQgNyw4ICIvPg0KPC9zdmc+DQo=);",".sv_progress-buttons__image-button-right":"display: inline-block; vertical-align: top; margin-top: 22px; font-size: 14px; width: 16px; height: 16px; cursor: pointer; background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMi4wLjEsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjAgMCAxNiAxNiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTYgMTY7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwb2x5Z29uIHBvaW50cz0iNSw0IDcsMiAxMyw4IDcsMTQgNSwxMiA5LDggIi8+DQo8L3N2Zz4NCg==);",".sv_progress-buttons__image-button--hidden":"visibility: hidden;",".sv_progress-buttons__list-container":"max-width: calc(100% - 36px); display: inline-block; overflow: hidden;",".sv_progress-buttons__list":"display: inline-block; width: max-content; padding-left: 28px; padding-right: 28px; margin-top: 14px; margin-bottom: 14px;",".sv_progress-buttons__list li":"width: 138px; font-size: 14px; font-family: 'Segoe UI', 'Helvetica Neue', Helvetica, Arial, sans-serif; position: relative; text-align: center; vertical-align: top; display: inline-block;",".sv_progress-buttons__list li:before":"width: 24px; height: 24px; content: ''; line-height: 30px; border: 3px solid #8dd9ca; display: block; margin: 0 auto 10px auto; border-radius: 50%; box-sizing: content-box; background-color: #8dd9ca; cursor: pointer;",".sv_progress-buttons__list li:after":"width: 73%; height: 3px; content: ''; position: absolute; background-color: #d4d4d4; top: 15px; left: -36.5%;",".sv_progress-buttons__list li:first-child:after":"content: none;",".sv_progress-buttons__list .sv_progress-buttons__page-title":"width: 100%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; color: $text-color; font-weight: bold;",".sv_progress-buttons__list .sv_progress-buttons__page-description":"width: 100%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; color: $text-color;",".sv_progress-buttons__list li.sv_progress-buttons__list-element--passed:before":"border-color: #1ab394; background-color: #1ab394;",".sv_progress-buttons__list li.sv_progress-buttons__list-element--passed + li:after":"background-color: #8dd9ca;",".sv_progress-buttons__list li.sv_progress-buttons__list-element--current:before":"border-color: #1ab394; background-color: white;",".sv_progress-buttons__list li.sv_progress-buttons__list-element--passed.sv_progress-buttons__list-element--current:before":"border-color: #1ab394; background-color: white;",".sv_progress-buttons__list li.sv_progress-buttons__list-element--nonclickable:before":"cursor: not-allowed;",".sv-ranking":"outline: none;",".sv-ranking-item":"cursor: pointer; margin-bottom: 5px;position: relative;",".sv-ranking-item:focus .sv-ranking-item__icon--hover":"visibility: hidden;",".sv-ranking-item:hover .sv-ranking-item__icon--hover":"visibility: visible;",".sv-question--disabled .sv-ranking-item:hover .sv-ranking-item__icon--hover":"visibility: hidden;",".sv-ranking-item:focus":"outline: none;",".sv-ranking-item:focus .sv-ranking-item__icon--focus":"visibility: visible; top: 15px;",".sv-ranking-item:focus .sv-ranking-item__index":"background: white; border: 2px solid #19b394;",".sv-ranking-item__content":"display: inline-block;background-color: white;padding-top: 5px;padding-bottom: 5px;padding-left: 35px;padding-right: 10px; border-radius: 100px;",".sv-ranking-item__icon-container":"position: absolute;left: 0;top: 0;bottom: 0;width: 35px;",".sv-ranking-item__icon":"visibility: hidden;left:10px;top:20px;fill:#19b394;position: absolute;",".sv-ranking-item__index":"display: inline-block;padding: 10px 16px;background: rgba(25, 179, 148, 0.1);border-radius: 100px;border: 2px solid transparent; margin-right: 10px;",".sv-ranking-item__text":"display: inline-block;",".sv-ranking-item__ghost":"display: none;background: #f3f3f3;border-radius: 100px;width: 200px;height: 55px;z-index: 1;position: absolute;left: 35px;",".sv-ranking-item--ghost .sv-ranking-item__ghost":"display: block;",".sv-ranking-item--ghost .sv-ranking-item__content":"visibility: hidden;",".sv-ranking-item--drag .sv-ranking-item__content":"box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.1);border-radius: 100px;",".sv-ranking--drag .sv-ranking-item:hover .sv-ranking-item__icon":"visibility: hidden;",".sv-ranking-item--drag .sv-ranking-item__icon--hover":"visibility: visible;",".sv-ranking--mobile .sv-ranking-item__icon--hover":"visibility:visible; fill:#9f9f9f;",".sv-ranking--mobile.sv-ranking--drag .sv-ranking-item--ghost .sv-ranking-item__icon.sv-ranking-item__icon--hover":"visibility:hidden;",".sv_qstn .sv_q_select_column":"display: inline-block; vertical-align: top; min-width: 10%;",".sv_qstn .sv_q_select_column > *:not(.sv_technical)":"display: block;",".sv_main .sv_container .sv_body .sv_p_root .sv_qstn .sv_q_select_column textarea":"margin-left: 0; padding-left: 0; line-height: initial;",".sv_main .sv-hidden":"display: none !important;",".sv_main .sv-visuallyhidden":"position: absolute; height: 1px !important; width: 1px !important; overflow: hidden; clip: rect(1px 1px 1px 1px); clip: rect(1px, 1px, 1px, 1px);",".sv_main .sv-progress":"height: 0.19em; background-color: $header-background-color; position: relative;",".sv_main .sv-progress__bar":"background-color: $main-color; height: 100%; position: relative;",".sv_main .sv-paneldynamic__progress-container":"position: relative; display: inline-block; width: calc(100% - 250px); margin-top: 20px;",".sv_main .sv-paneldynamic__add-btn":"float: right;",".sv_main .sv-paneldynamic__add-btn--list-mode":"float: none; margin-top: 0;",".sv_main .sv-paneldynamic__remove-btn":"margin-top: 1.25em;",".sv_main .sv-paneldynamic__remove-btn--right":"margin-top: 0; margin-left: 1.25em;",".sv_main .sv-paneldynamic__prev-btn, .sv_main .sv-paneldynamic__next-btn":"box-sizing: border-box; display: inline-block; cursor: pointer; width: 0.7em; top: -0.28em; position: absolute;",".sv_main .sv-paneldynamic__prev-btn":"left: -1.3em; transform: rotate(90deg);",".sv_main .sv-paneldynamic__next-btn ":"right: -1.3em; transform: rotate(270deg);",".sv_main .sv-paneldynamic__prev-btn.sv-paneldynamic__prev-btn--disabled, .sv_main .sv-paneldynamic__next-btn.sv-paneldynamic__next-btn--disabled":"cursor: auto;",".sv_main .sv-paneldynamic__progress-text":"font-weight: bold; font-size: 0.87em; margin-top: 0.69em; margin-left: 4em",".sv_main .sv-boolean__switch":"display: inline-block; box-sizing: border-box; width: 63px; height: 24px; margin-right: 17px; margin-left: 21px; padding: 2px 3px; vertical-align: middle; border-radius: 12px; cursor: pointer;",".sv_main .sv-boolean__slider":"display: inline-block; width: 20px; height: 20px; transition-duration: .4s; transition-property: margin-left; border: none; border-radius: 100%;",".sv_main .sv-boolean__label":"vertical-align: middle; cursor: pointer;",".sv_main .sv-boolean--indeterminate  .sv-boolean__slider":"margin-left: calc(50% - 10px);",".sv_main .sv-boolean--checked  .sv-boolean__slider":"margin-left: calc(100% - 20px);","[dir='rtl'] .sv-boolean__label ":"float: right;","[dir='rtl'] .sv-boolean--indeterminate .sv-boolean__slider":"margin-right: calc(50% - 0.625em);","[dir='rtl'] .sv-boolean--checked .sv-boolean__slider":"margin-right: calc(100% - 1.25em);","[dir='rtl'] .sv-boolean__switch":"float: right;","[style*='direction:rtl'] .sv-boolean__label ":"float: right;","[style*='direction:rtl'] .sv-boolean--indeterminate .sv-boolean__slider":"margin-right: calc(50% - 0.625em);","[style*='direction:rtl'] .sv-boolean--checked .sv-boolean__slider":"margin-right: calc(100% - 1.25em);","[style*='direction:rtl'] .sv-boolean__switch":"float: right;",".sv_main .sv_q_num":"",".sv_main .sv_q_num + span":"",".sv_main .sjs_sp_container":"position: relative; box-sizing: content-box;",".sv_main .sjs_sp_controls":"position: absolute; left: 0; bottom: 0;",".sv_main .sjs_sp_controls > button":"user-select: none;",".sv_main .sjs_sp_container>div>canvas:focus":"outline: none;",".sv_main .sjs_sp_placeholder":"display: flex;  align-items: center; justify-content: center; position: absolute; z-index: 0; user-select: none; pointer-events: none; width: 100%; height: 100%;",".sv_main .sv_logo":"",".sv_main .sv-logo--left":"display: inline-block; vertical-align: top; margin-right: 2em;",".sv_main .sv-logo--right":"display: inline-block; vertical-align: top; margin-left: 2em; float: right;",".sv_main .sv-logo--right+.sv-logo--right-tail":"clear: both;",".sv_main .sv-logo--top":"display: block; width: 100%; text-align: center;",".sv_main .sv-logo--bottom":"display: block; width: 100%; text-align: center;",".sv_main .sv_header__text":"display: inline-block; vertical-align: top; max-width: 100%",".sv_main .sv-expand-action:before":"content: \"\"; display: inline-block; background-image: url(\"data:image/svg+xml,%3C%3Fxml version='1.0' encoding='utf-8'%3F%3E%3C!-- Generator: Adobe Illustrator 21.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0) --%3E%3Csvg version='1.1' id='Layer_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 10 10' style='enable-background:new 0 0 10 10;' xml:space='preserve'%3E%3Cstyle type='text/css'%3E .st0%7Bfill:%23404040;%7D%0A%3C/style%3E%3Cpolygon class='st0' points='2,2 0,4 5,9 10,4 8,2 5,5 '/%3E%3C/svg%3E%0A\"); background-repeat: no-repeat; background-position: center center; height: 10px; width: 12px; margin: auto 8px;",".sv_main .sv-expand-action--expanded:before":"transform: rotate(180deg);",".sv_main .sv-action-bar":"display: flex; position: relative; align-items: center; margin-left: auto; padding: 0 0 0 16px; overflow: hidden; white-space: nowrap;",".sv_main .sv-action-bar-separator":"display: inline-block; width: 1px; height: 24px; vertical-align: middle; margin-right: 16px; background-color: #d6d6d6;",".sv_main .sv-action-bar-item":"-webkit-appearance: none; -moz-appearance: none; appearance: none; display: flex; height: 40px; padding: 8px; box-sizing: border-box; margin-right: 16px; border: none; border-radius: 2px; background-color: transparent; cursor: pointer; line-height: 24px; font-size: 16px; overflow-x: hidden; white-space: nowrap; min-width: auto; font-weight: normal",".sv_main .sv-action-bar-item__title":"vertical-align: middle; white-space: nowrap;",".sv_main .sv-action-bar-item__title--with-icon":"margin-left: 8px;",".sv_main .sv-action":"display: flex; align-items: center;",".sv_main .sv-action--hidden":"display: none;",".sv_main .sv-action-bar-item__icon svg":"display: block;",".sv_main .sv-action-bar-item:active":"opacity: 0.5;",".sv_main .sv-action-bar-item:focus":"outline: none;",".sv_main .sv-title-actions":"display: flex;align-items: center;",".sv_main .sv-title-actions__title":"flex-wrap: wrap; max-width: 90%; min-width: 50%;",".sv_main .sv-title-actions__bar":"min-width: 56px;",".sv_main .sv_matrix_cell_actions .sv-action-bar":"margin-left: 0; padding-left: 0;",".sv_main .sv_p_wrapper_in_row":"display: flex; flex-direction: row; align-items: center;",".sv_main  .sv_p_remove_btn_right":"margin-left: 1em;",".sv_main .sv-button-group":"display: flex; align-items: center; flex-direction: row; font-size: 16px; height: 48px; overflow: auto;",".sv_main .sv-button-group__item":"display: flex; box-sizing: border-box; flex-direction: row; justify-content: center; align-items: center; width: 100%; padding: 11px 16px; line-height: 24px; border-width: 1px; border-style: solid; outline: none; font-size: 16px; font-weight: 400; cursor: pointer; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;",".sv_main .sv-button-group__item:not(:first-of-type)":"margin-left: -1px;",".sv_main .sv-button-group__item-icon":"display: block; height: 24px;",".sv_main .sv-button-group__item--selected":"font-weight: 600;",".sv_main .sv-button-group__item-decorator":"display: flex; align-items: center;",".sv_main  .sv-button-group__item-icon + .sv-button-group__item-caption":"margin-left: 8px;",".sv_main .sv-button-group__item--disabled":"color: cursor: default;","sv-popup":"display: block; position: absolute; z-index: -1;",".sv-popup":"position: fixed; left: 0; top: 0; z-index: 1000; width: 100vw; height: 100vh; outline: none;",".sv-popup--modal":"display: flex; align-items: center; justify-content: center;",".sv-popup--modal .sv-popup__container":"position: static; filter: none; padding: calc(4 * 8px);",".sv-popup__container":"position: absolute; filter: drop-shadow(0px calc(1 * 8px) calc(2 * 8px) rgba(0, 0, 0, 0.1)); padding: calc(1 * 8px) 0; background: white; border-radius: 4px;",".sv-popup__scrolling-content":"max-width: 90vw; max-height: 90vh; overflow: auto;",".sv-popup__scrolling-content::-webkit-scrollbar":"height: 6px; width: 6px; background-color: #f3f3f3;",".sv-popup__scrolling-content::-webkit-scrollbar-thumb":"background: rgba(25, 179, 148, 0.1);",".sv-popup__content":"min-width: 100%;",".sv-popup--show-pointer.sv-popup--top":"transform: translateY(calc(-1 * 8px));",".sv-popup--show-pointer.sv-popup--top .sv-popup__pointer":"transform: translate(calc(-1 * 8px)) rotate(180deg);",".sv-popup--show-pointer.sv-popup--bottom":"transform: translateY(calc(1 * 8px));",".sv-popup--show-pointer.sv-popup--bottom .sv-popup__pointer":"transform: translate(calc(-1 * 8px), calc(-1 * 8px));",".sv-popup--show-pointer.sv-popup--right":"transform: translate(calc(1 * 8px));",".sv-popup--show-pointer.sv-popup--right .sv-popup__pointer":"transform: translate(-12px, -4px) rotate(-90deg);",".sv-popup--show-pointer.sv-popup--left":"transform: translate(calc(-1 * 8px));",".sv-popup--show-pointer.sv-popup--left .sv-popup__pointer":"transform: translate(-4px, -4px) rotate(90deg);",".sv-popup__pointer":"display: block; position: absolute;",".sv-popup__pointer:after":"content: ' '; display: block; width: 0; height: 0; border-left: calc(1 * 8px) solid transparent; border-right: calc(1 * 8px) solid transparent; border-bottom: calc(1 * 8px) solid white; align-self: center;",".sv-popup__footer":"display: flex; margin-top: calc(4 * 8px);",".sv-popup__footer-item:first-child":"margin-left: auto;",".sv-popup__footer-item + .sv-popup__footer-item":"margin-left: calc(1 * 8px);",".sv-popup__button":"padding: calc(2 * 8px) calc(6 * 8px); background: #fff; box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.15); border-radius: 4px; cursor: pointer; margin: 2px; font-family: 'Segoe UI', 'Helvetica Neue', Helvetica, Arial, sans-serif; font-style: normal; font-weight: 600; font-size: calc(2 * 8px); line-height: calc(3 * 8px); text-align: center; color: #19b394; border: none; outline: none;",".sv-popup__button:hover":"box-shadow: 0 0 0 2px #19b394;",".sv-popup__button:disabled":"color: rgba(22, 22, 22, 0.16); cursor: default;",".sv-popup__button:disabled:hover":"box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.15);",".sv-popup__button--apply":"background-color: #19b394; color: #fff;",".sv-popup__button--apply:disabled":"background-color: #f3f3f3;",".sv-list":"display: flex; flex-direction: column; align-items: flex-start; padding: 0; margin: 0; background: #ffffff; font-family: 'Open Sans'; list-style-type: none;",".sv-list__item":"width: 100%; display: flex; align-items: center; box-sizing: border-box; padding: calc(1 * 8px) calc(2 * 8px); cursor: pointer;",".sv-list__item-icon":"float: left; width: calc(3 * 8px); height: calc(3 * 8px); margin-right: calc(2 * 8px);",".sv-list__item-icon svg":"display: block;",".sv-list__item-icon use":"fill: #909090;",".sv-list__item:not(.sv-list__item--selected):hover":"background-color: #f3f3f3;",".sv-list__item--selected":"background-color: #19b394; color: #fff;",".sv-list__item--selected .sv-list__item-icon use":"fill: #fff;",".sv-list__item--disabled":"color: rgba(22, 22, 22, 0.16); cursor: default; pointer-events: none;",".sv-list__item span":"white-space: nowrap;"},e.Media={".sv_qstn fieldset .sv-q-col-1":{style:"width: 100%;",media:"@media only screen and (max-width: 480px)"},".sv_qstn fieldset .sv-q-col-2":{style:"width: 100%;",media:"@media only screen and (max-width: 480px)"},".sv_qstn fieldset .sv-q-col-3":{style:"width: 100%;",media:"@media only screen and (max-width: 480px)"},".sv_qstn fieldset .sv-q-col-4":{style:"width: 100%;",media:"@media only screen and (max-width: 480px)"},".sv_qstn fieldset .sv-q-col-5":{style:"width: 100%;",media:"@media only screen and (max-width: 480px)"},".sv_main .sv_container .panel-body.card-block .sv_row .sv_qstn":{style:"display: block; width: 100% !important;",media:"@media (max-width: 600px)"},".sv_main .sv_container .panel-body.card-block .sv_row .sv_qstn .title-left":{style:"float: none;",media:"@media (max-width: 600px)"},".sv_main .sv_container .panel-body.card-block .sv_row .sv_qstn .sv_q_radiogroup_inline, .sv_main .sv_container .panel-body.card-block .sv_row .sv_qstn .sv_q_checkbox_inline, .sv_main .sv_container .panel-body.card-block .sv_row .sv_qstn .sv_q_imagepicker_inline":{style:"display: block;",media:"@media (max-width: 600px)"},".sv_main .sv_container .panel-body.card-block .sv_row .sv_qstn table.table":{style:"display: block;",media:"@media (max-width: 600px)"},".sv_main .sv_container .panel-body.card-block .sv_row .sv_qstn table.table thead":{style:"display: none;",media:"@media (max-width: 600px)"},".sv_main .sv_container .panel-body.card-block .sv_row .sv_qstn table.table tbody, .sv_main .sv_container .panel-body.card-block .sv_row .sv_qstn table.table tr, .sv_main .sv_container .panel-body.card-block .sv_row .sv_qstn table.table td":{style:"display: block;",media:"@media (max-width: 600px)"},".sv_main .sv_container .panel-body.card-block .sv_row .sv_qstn table.table:not(.sv_q_matrix) td:before":{style:"content: attr(title);",media:"@media (max-width: 600px)"},".sv_main .sv_container .panel-body.card-block .sv_row .sv_qstn table.sv_q_matrix td:after":{style:"content: attr(title); padding-left: 1em",media:"@media (max-width: 600px)"},".sv_main .sv_container .panel-body.card-block .sv_row .sv_qstn .radio label, .sv_main .sv_container .panel-body.card-block .sv_row .sv_qstn .checkbox label":{style:"line-height: 12px; vertical-align: top;",media:"@media (max-width: 600px)"},".sv_qstn label.sv_q_m_label":{style:"display: inline;",media:"@media (max-width: 600px)"},".sv_main .sv_custom_header":{style:"display: none;",media:"@media (max-width: 1300px)"},".sv_main .sv_container .sv_header h3":{style:"font-size: 1.5em;",media:"@media (max-width: 1300px)"},".sv_main .sv_container .sv_header h3 span":{style:"font-size: 0.75em;",media:"@media (max-width: 700px)"},".sv_main.sv_bootstrap_css .sv-progress__text":{style:"margin-left: 8em;",media:"@media (min-width: 768px)"},".sv_row":{style:" display: flex; flex-wrap: wrap;",media:"@supports (display: flex)"},".sv-vue-row-additional-div":{style:" display: flex; flex-wrap: wrap; flex-basis: 100%; width: 100%;",media:"@supports (display: flex)"},".sv-row > .sv-row__panel, .sv-row__question:not(:last-child)":{style:"float: left;",media:"@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none)"},"[dir='rtl'],[style*='direction:rtl'] .sv-row__question:not(:last-child)":{style:"float: right;",media:"@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none)"},".sv-row > .sv-row__panel, .sv-row__question":{style:"width: 100% !important; padding-right: 0 !important;",media:"@media only screen and (max-width: 600px)"}},e.ThemeColors={default:{"$header-background-color":"#e7e7e7","$body-container-background-color":"#f4f4f4","$main-color":"#1ab394","$main-hover-color":"#0aa384","$body-background-color":"white","$inputs-background-color":"white","$text-color":"#6d7072","$text-input-color":"#6d7072","$header-color":"#6d7072","$border-color":"#e7e7e7","$error-color":"#ed5565","$error-background-color":"#fd6575","$progress-text-color":"#9d9d9d","$disable-color":"#dbdbdb","$disabled-label-color":"rgba(64, 64, 64, 0.5)","$slider-color":"white","$disabled-switch-color":"#9f9f9f","$disabled-slider-color":"#cfcfcf","$foreground-light":"#909090","$foreground-disabled":"#161616","$background-dim":"#f3f3f3"},orange:{"$header-background-color":"#4a4a4a","$body-container-background-color":"#f8f8f8","$main-color":"#f78119","$main-hover-color":"#e77109","$body-background-color":"white","$inputs-background-color":"white","$text-color":"#4a4a4a","$text-input-color":"#4a4a4a","$header-color":"#f78119","$border-color":"#e7e7e7","$error-color":"#ed5565","$error-background-color":"#fd6575","$progress-text-color":"#9d9d9d","$disable-color":"#dbdbdb","$disabled-label-color":"rgba(64, 64, 64, 0.5)","$slider-color":"white","$disabled-switch-color":"#9f9f9f","$disabled-slider-color":"#cfcfcf","$foreground-light":"#909090","$foreground-disabled":"#161616","$background-dim":"#f3f3f3"},darkblue:{"$header-background-color":"#d9d8dd","$body-container-background-color":"#f6f7f2","$main-color":"#3c4f6d","$main-hover-color":"#2c3f5d","$body-background-color":"white","$inputs-background-color":"white","$text-color":"#4a4a4a","$text-input-color":"#4a4a4a","$header-color":"#6d7072","$border-color":"#e7e7e7","$error-color":"#ed5565","$error-background-color":"#fd6575","$progress-text-color":"#9d9d9d","$disable-color":"#dbdbdb","$disabled-label-color":"rgba(64, 64, 64, 0.5)","$slider-color":"white","$disabled-switch-color":"#9f9f9f","$disabled-slider-color":"#cfcfcf","$foreground-light":"#909090","$foreground-disabled":"#161616","$background-dim":"#f3f3f3"},darkrose:{"$header-background-color":"#ddd2ce","$body-container-background-color":"#f7efed","$main-color":"#68656e","$main-hover-color":"#58555e","$body-background-color":"white","$inputs-background-color":"white","$text-color":"#4a4a4a","$text-input-color":"#4a4a4a","$header-color":"#6d7072","$border-color":"#e7e7e7","$error-color":"#ed5565","$error-background-color":"#fd6575","$progress-text-color":"#9d9d9d","$disable-color":"#dbdbdb","$disabled-label-color":"rgba(64, 64, 64, 0.5)","$slider-color":"white","$disabled-switch-color":"#9f9f9f","$disabled-slider-color":"#cfcfcf","$foreground-light":"#909090","$foreground-disabled":"#161616","$background-dim":"#f3f3f3"},stone:{"$header-background-color":"#cdccd2","$body-container-background-color":"#efedf4","$main-color":"#0f0f33","$main-hover-color":"#191955","$body-background-color":"white","$inputs-background-color":"white","$text-color":"#0f0f33","$text-input-color":"#0f0f33","$header-color":"#0f0f33","$border-color":"#e7e7e7","$error-color":"#ed5565","$error-background-color":"#fd6575","$progress-text-color":"#9d9d9d","$disable-color":"#dbdbdb","$disabled-label-color":"rgba(64, 64, 64, 0.5)","$slider-color":"white","$disabled-switch-color":"#9f9f9f","$disabled-slider-color":"#cfcfcf","$foreground-light":"#909090","$foreground-disabled":"#161616","$background-dim":"#f3f3f3"},winter:{"$header-background-color":"#82b8da","$body-container-background-color":"#dae1e7","$main-color":"#3c3b40","$main-hover-color":"#1e1d20","$body-background-color":"white","$inputs-background-color":"white","$text-color":"#000","$text-input-color":"#000","$header-color":"#000","$border-color":"#e7e7e7","$error-color":"#ed5565","$error-background-color":"#fd6575","$disable-color":"#dbdbdb","$progress-text-color":"#9d9d9d","$disabled-label-color":"rgba(64, 64, 64, 0.5)","$slider-color":"white","$disabled-switch-color":"#9f9f9f","$disabled-slider-color":"#cfcfcf","$foreground-light":"#909090","$foreground-disabled":"#161616","$background-dim":"#f3f3f3"},winterstone:{"$header-background-color":"#323232","$body-container-background-color":"#f8f8f8","$main-color":"#5ac8fa","$main-hover-color":"#06a1e7","$body-background-color":"white","$inputs-background-color":"white","$text-color":"#000","$text-input-color":"#000","$header-color":"#fff","$border-color":"#e7e7e7","$error-color":"#ed5565","$error-background-color":"#fd6575","$disable-color":"#dbdbdb","$progress-text-color":"#9d9d9d","$disabled-label-color":"rgba(64, 64, 64, 0.5)","$slider-color":"white","$disabled-switch-color":"#9f9f9f","$disabled-slider-color":"#cfcfcf","$foreground-light":"#909090","$foreground-disabled":"#161616","$background-dim":"#f3f3f3"},modern:{"$main-color":"#1ab394","$add-button-color":"#1948b3","$remove-button-color":"#ff1800","$disable-color":"#dbdbdb","$progress-text-color":"#9d9d9d","$disabled-label-color":"rgba(64, 64, 64, 0.5)","$slider-color":"white","$disabled-switch-color":"#9f9f9f","$disabled-slider-color":"#cfcfcf","$error-color":"#d52901","$text-color":"#404040","$light-text-color":"#fff","$button-text-color":"#fff","$checkmark-color":"#fff","$matrix-text-checked-color":"#fff","$text-input-color":"#404040","$inputs-background-color":"transparent","$main-hover-color":"#9f9f9f","$body-container-background-color":"#f4f4f4","$text-border-color":"#d4d4d4","$disabled-text-color":"rgba(64, 64, 64, 0.5)","$border-color":"rgb(64, 64, 64, 0.5)","$dropdown-border-color":"#d4d4d4","$header-background-color":"#e7e7e7","$answer-background-color":"rgba(26, 179, 148, 0.2)","$error-background-color":"rgba(213, 41, 1, 0.2)","$radio-checked-color":"#404040","$clean-button-color":"#1948b3","$body-background-color":"#ffffff","$foreground-light":"#909090","$foreground-disabled":"#161616","$background-dim":"#f3f3f3"},bootstrap:{"$main-color":"#18a689","$text-color":"#404040;","$text-input-color":"#404040;","$progress-text-color":"#9d9d9d","$disable-color":"#dbdbdb","$header-background-color":"#e7e7e7","$disabled-label-color":"rgba(64, 64, 64, 0.5)","$slider-color":"white","$disabled-switch-color":"#9f9f9f","$disabled-slider-color":"#cfcfcf","$foreground-light":"#909090","$foreground-disabled":"#161616","$background-dim":"#f3f3f3"},bootstrapmaterial:{"$main-color":"#18a689","$text-color":"#404040;","$text-input-color":"#404040;","$progress-text-color":"#9d9d9d","$disable-color":"#dbdbdb","$header-background-color":"#e7e7e7","$disabled-label-color":"rgba(64, 64, 64, 0.5)","$slider-color":"white","$disabled-switch-color":"#9f9f9f","$disabled-slider-color":"#cfcfcf","$body-background-color":"#ffffff","$foreground-light":"#909090","$foreground-disabled":"#161616","$background-dim":"#f3f3f3"}},e.ThemeCss={".sv_default_css":"background-color: $body-container-background-color;",".sv_default_css hr":"border-color: $border-color;",".sv_default_css input[type='button'], .sv_default_css button":"color: $body-background-color; background-color: $main-color;",".sv_default_css input[type='button']:hover, .sv_default_css button:hover":"background-color: $main-hover-color;",".sv_default_css .sv_header":"color: $header-color;",".sv_default_css .sv_custom_header":"background-color: $header-background-color;",".sv_default_css .sv_container":"color: $text-color;",".sv_default_css .sv_body":"background-color: $body-background-color; border-color: $main-color;",".sv_default_css .sv_progress":"background-color: $border-color;",".sv_default_css .sv_progress_bar":"background-color: $main-color;",".sv_default_css .sv_p_root > .sv_row":"border-color: $border-color;",".sv_default_css .sv_p_root > .sv_row:nth-child(odd)":"background-color: $body-background-color;",".sv_default_css .sv_p_root > .sv_row:nth-child(even)":"background-color: $body-container-background-color;",".sv_default_css .sv_q_other input":"color: $text-color; -webkit-text-fill-color: $text-color; border-color: $border-color; background-color: $inputs-background-color;",".sv_default_css .sv_q_text_root":"color: $text-color; -webkit-text-fill-color: $text-color; border-color: $border-color; background-color: $inputs-background-color;",".sv_default_css .sv_q_dropdown_control":"color: $text-input-color; border-color: $border-color; background-color: $inputs-background-color;",".sv_default_css input[type='text']":"color: $text-color; -webkit-text-fill-color: $text-color; border-color: $border-color; background-color: $inputs-background-color;",".sv_default_css select":"color: $text-color; border-color: $border-color; background-color: $inputs-background-color;",".sv_default_css textarea":"color: $text-input-color; -webkit-text-fill-color: $text-input-color; border-color: $border-color; background-color: $inputs-background-color;",".sv_default_css input:not([type='button']):not([type='reset']):not([type='submit']):not([type='image']):not([type='checkbox']):not([type='radio'])":"border: 1px solid $border-color; background-color: $inputs-background-color;color: $text-input-color; -webkit-text-fill-color: $text-input-color;",".sv_default_css input:not([type='button']):not([type='reset']):not([type='submit']):not([type='image']):not([type='checkbox']):not([type='radio']):focus":"border: 1px solid $main-color;",".sv_default_css .sv_container .sv_body .sv_p_root .sv_q .sv_select_wrapper .sv_q_dropdown_control ":"background-color: $inputs-background-color;",".sv_default_css .sv_q_other input:focus":"border-color: $main-color;",".sv_default_css .sv_q_text_root:focus":"border-color: $main-color;",".sv_default_css .sv_q_dropdown_control:focus":"border-color: $main-color;",".sv_default_css input[type='text']:focus":"border-color: $main-color;",'.sv_default_css .sv_container .sv_body .sv_p_root .sv_q input[type="radio"]:focus, .sv_default_css .sv_container .sv_body .sv_p_root .sv_q input[type="checkbox"]:focus':"outline: 1px dotted $main-color;",".sv_default_css select:focus":"border-color: $main-color;",".sv_default_css textarea:focus":"border-color: $main-color;",".sv_default_css .sv_select_wrapper":"background-color: $body-background-color;",".sv_default_css .sv_select_wrapper::before":"background-color: $main-color;",".sv_default_css .sv_q_rating_item.active .sv_q_rating_item_text":"background-color: $main-hover-color; border-color: $main-hover-color; color: $body-background-color;",".sv_default_css .sv_q_rating_item .sv_q_rating_item_text":"border-color: $border-color;",".sv_default_css .sv_q_rating_item .sv_q_rating_item_text:hover":"border-color: $main-hover-color;",".sv_default_css table.sv_q_matrix tr":"border-color: $border-color;",".sv_default_css table.sv_q_matrix_dropdown tr":"border-color: $border-color;",".sv_default_css table.sv_q_matrix_dynamic tr":"border-color: $border-color;",".sv_default_css .sv_q_m_cell_selected":"color: $body-background-color; background-color: $main-hover-color;",".sv_main .sv_q_file_remove:hover":"color: $main-color;",".sv_main .sv_q_file_choose_button":"color: $body-background-color; background-color: $main-color;",".sv_main .sv_q_file_choose_button:hover":"background-color: $main-hover-color;",".sv_main .sv_q_imgsel.checked label>div":"background-color: $main-color",".sv_default_css .sv_p_description":"padding-left: 1.29em;",".sv_main .sv-progress":"background-color: $header-background-color;",".sv_main .sv-progress__bar":"background-color: $main-color;",".sv_main .sv-paneldynamic__prev-btn.sv-paneldynamic__prev-btn--disabled, .sv_main .sv-paneldynamic__next-btn.sv-paneldynamic__next-btn--disabled":"fill: $disable-color;",".sv_main .sv-paneldynamic__progress-text":"color: $progress-text-color;",".sv_main .sv-paneldynamic__prev-btn, .sv_main .sv-paneldynamic__next-btn":"fill: $text-color",".sv_main .sv-boolean__switch":"background-color: $main-color;",".sv_main .sv-boolean__slider":"background-color: $slider-color;",".sv_main .sv-boolean__label--disabled":"color: $disabled-label-color;",".sv_main .sv-boolean--disabled .sv-boolean__switch":"background-color: $disabled-switch-color;",".sv_main .sv-boolean--disabled .sv-boolean__slider":"background-color: $disabled-slider-color;",".sv_main .sjs_sp_container":"border: 1px dashed $disable-color;",".sv_main .sjs_sp_placeholder":"color: $foreground-light;",".sv_main .sv_matrix_detail_row":"background-color: #ededed; border-top: 1px solid $header-background-color; border-bottom: 1px solid $header-background-color;",".sv_main .sv-action-bar-item":"color: $text-color;",".sv_main .sv-action-bar-item__icon use":"fill: $foreground-light;",".sv_main .sv-action-bar-item:hover":"background-color: $background-dim;",".sv_main .sv-button-group__item--hover:hover":"background-color: $background-dim;",".sv_main .sv-button-group__item-icon use":"fill: $foreground-light;",".sv_main .sv-button-group__item--selected":"color: $main-color;",".sv_main .sv-button-group__item--selected .sv-button-group__item-icon use":"fill: $main-color;",".sv_main .sv-button-group__item--disabled":"color: $foreground-disabled;",".sv_main .sv-button-group__item--disabled .sv-button-group__item-icon use":"fill: $foreground-disabled;",".sv_main .sv-button-group__item":"background: $body-background-color; border-color: $border-color;",".sv_main .sv_qstn textarea":"max-width: 100%",".sv_main .sv-matrixdynamic__drag-icon":"padding-top:14px",".sv_main .sv-matrixdynamic__drag-icon:after":"content: ' '; display: block; height: 4px; width: 16px; border: 1px solid $border-color; box-sizing: border-box; border-radius: 10px; cursor: move;"},e.modernThemeCss={".sv-boolean__switch":"background-color: $main-color;",".sv-boolean__slider":"background-color: $slider-color;",".sv-boolean__label--disabled":"color: $disabled-label-color;",".sv-boolean--disabled .sv-boolean__switch":"background-color: $disabled-switch-color;",".sv-boolean--disabled .sv-boolean__slider":"background-color: $disabled-slider-color;",".sv-btn":"color: $button-text-color;",".sv-checkbox__svg":"border-color: $border-color; fill: transparent;",".sv-checkbox--allowhover:hover .sv-checkbox__svg":"background-color: $main-hover-color; fill: $checkmark-color;",".sv-checkbox--checked .sv-checkbox__svg":"background-color: $main-color; fill: $checkmark-color;",".sv-checkbox--checked.sv-checkbox--disabled .sv-checkbox__svg":"background-color: $disable-color; fill: $checkmark-color;",".sv-checkbox--disabled .sv-checkbox__svg":"border-color: $disable-color;",".sv-comment":"border-color: $text-border-color; max-width: 100%;",".sv-comment:focus":"border-color: $main-color;",".sv-completedpage":"color: $text-color; background-color: $body-container-background-color;",".sv-container-modern":"color: $text-color;",".sv-container-modern__title":"color: $main-color;",".sv-description":"color: $disabled-text-color;",".sv-dropdown":"border-bottom: 0.06em solid $text-border-color;",".sv-dropdown:focus":"border-color: $dropdown-border-color;",".sv-dropdown--error":"border-color: $error-color; color: $error-color;",".sv-dropdown--error::placeholder":"color: $error-color;",".sv-dropdown--error::-ms-input-placeholder":"color: $error-color;",".sv-file__decorator":"background-color: $body-container-background-color;",".sv-file__clean-btn":"background-color: $remove-button-color;",".sv-file__choose-btn:not(.sv-file__choose-btn--disabled)":"background-color: $add-button-color;",".sv-file__choose-btn--disabled":"background-color: $disable-color;",".sv-file__remove-svg":"fill: #ff1800;",".sv-file__sign a":"color: $text-color;",".sv-footer__complete-btn":"background-color: $main-color;",".sv-footer__next-btn":"background-color: $main-color;",".sv-footer__prev-btn":"background-color: $main-color;",".sv-footer__start-btn":"background-color: $main-color;",".sv-footer__preview-btn":"background-color: $main-color;",".sv-footer__edit-btn":"background-color: $main-color;",".sv-imagepicker__item--allowhover:hover .sv-imagepicker__image":"background-color: $main-hover-color; border-color: $main-hover-color;",".sv-imagepicker__item--checked .sv-imagepicker__image":"background-color: $main-color; border-color: $main-color;",".sv-imagepicker__item--disabled.sv-imagepicker__item--checked .sv-imagepicker__image":"background-color: $disable-color; border-color: $disable-color;",".sv-item__control:focus + .sv-item__decorator":"border-color: $main-color;",".sv-matrix__text--checked":"color: $matrix-text-checked-color; background-color: $main-color;",".sv-matrix__text--disabled.sv-matrix__text--checked":"background-color: $disable-color;",".sv-matrixdynamic__add-btn":"background-color: $add-button-color;",".sv-matrixdynamic__remove-btn":"background-color: $remove-button-color;",".sv-matrixdynamic__drag-icon":"padding-top:16px",".sv-matrixdynamic__drag-icon:after":"content: ' '; display: block; height: 4px; width: 16px; border: 1px solid $border-color; box-sizing: border-box; border-radius: 10px; cursor: move;",".sv-paneldynamic__add-btn":"background-color: $add-button-color;",".sv-paneldynamic__remove-btn":"background-color: $remove-button-color;",".sv-paneldynamic__prev-btn, .sv-paneldynamic__next-btn":"fill: $text-color;",".sv-paneldynamic__prev-btn--disabled, .sv-paneldynamic__next-btn--disabled":"fill: $disable-color;",".sv-paneldynamic__progress-text":"color: $progress-text-color;",".sv-progress":"background-color: $header-background-color;",".sv-progress__bar":"background-color: $main-color;",".sv-progress__text":"color: $progress-text-color;",".sv-question__erbox":"color: $error-color;",".sv-question__title--answer":"background-color: $answer-background-color;",".sv-question__title--error":"background-color: $error-background-color;",".sv-panel__title--error":"background-color: $error-background-color;",".sv-radio__svg":"border-color: $border-color; fill: transparent;",".sv-radio--allowhover:hover .sv-radio__svg":"fill: $border-color;",".sv-radio--checked .sv-radio__svg":"border-color: $radio-checked-color; fill: $radio-checked-color;",".sv-radio--disabled .sv-radio__svg":"border-color: $disable-color;",".sv-radio--disabled.sv-radio--checked .sv-radio__svg":"fill: $disable-color;",".sv-rating":"color: $text-color;",".sv-rating input:focus + .sv-rating__min-text + .sv-rating__item-text, .sv-rating input:focus + .sv-rating__item-text":"outline-color: $main-color;",".sv-rating__item-text":"color: $main-hover-color; border: solid 0.1875em $main-hover-color;",".sv-rating__item-text:hover":"background-color: $main-hover-color; color: $body-background-color;",".sv-rating__item--selected .sv-rating__item-text":"background-color: $main-color; color: $body-background-color; border-color: $main-color;",".sv-rating--disabled .sv-rating__item-text":"color: $disable-color; border-color: $disable-color;",".sv-rating--disabled .sv-rating__item-text:hover":"background-color: transparent;",".sv-rating--disabled .sv-rating__item-text:hover .sv-rating__item--selected .sv-rating__item-text":"background-color: $disable-color; color: $body-background-color;","::-webkit-scrollbar":"background-color: $main-hover-color;","::-webkit-scrollbar-thumb":"background: $main-color;",".sv-selectbase__clear-btn":"background-color: $clean-button-color;",".sv-table":"background-color: rgba($main-hover-color, 0.1);",".sv-text:focus":"border-color: $main-color;",'.sv-text[type="date"]::-webkit-calendar-picker-indicator':"color: transparent; background: transparent;",".sv-text--error":"color: $error-color; border-color: $error-color;",".sv-text--error::placeholder":"color: $error-color;",".sv-text--error::-ms-placeholder":"color: $error-color;",".sv-text--error:-ms-placeholder":"color: $error-color;","input.sv-text, textarea.sv-comment, select.sv-dropdown":"color: $text-input-color; background-color: $inputs-background-color;",".sv-text::placeholder":"color: $text-input-color;",".sv-text::-ms-placeholder":"color: $text-input-color;",".sv-text:-ms-placeholder":"color: $text-input-color;",".sv-table__row--detail":"background-color: $header-background-color;",".sjs_sp_container":"border: 1px dashed $disable-color;",".sjs_sp_placeholder":"color: $foreground-light;"},e.bootstrapThemeCss={".sv_main .sv_q_imgsel.checked label>div":"background-color: $main-color",".sv_main .sv_p_description":"padding-left: 1.66em;",".sv_main .sv_qstn_error_bottom":"margin-top: 20px; margin-bottom: 0;",".sv_main .progress":"width: 60%;",".sv_main .progress-bar":"width: auto; margin-left: 2px; margin-right: 2px;",".sv_main .table>tbody>tr>td":"min-width: 90px;",".sv_main f-panel .sv_qstn":"padding: 0; vertical-align: middle;",".sv_main .sv_q_image":"display: inline-block;",".sv_main .sv_row .sv_qstn:first-child:last-child":"flex: none !important;",".sv_main .sv_row .sv_p_container:first-child:last-child":"flex: none !important;",".sv_main .sv-progress":"background-color: $header-background-color;",".sv_main .sv-progress__bar":"background-color: $main-color;",".sv_main .sv-paneldynamic__prev-btn.sv-paneldynamic__prev-btn--disabled, .sv_main .sv-paneldynamic__next-btn.sv-paneldynamic__next-btn--disabled":"fill: $disable-color;",".sv_main .sv-paneldynamic__progress-text":"color: $progress-text-color;",".sv_main .sv-paneldynamic__prev-btn, .sv_main .sv-paneldynamic__next-btn":"fill: $text-color",".sv_main .sv-boolean__switch":"background-color: $main-color;",".sv_main .sv-boolean__slider":"background-color: $slider-color;",".sv_main .sv-boolean__label--disabled":"color: $disabled-label-color;",".sv_main .sv-boolean--disabled .sv-boolean__switch":"background-color: $disabled-switch-color;",".sv_main .sv-boolean--disabled  .sv-boolean__slider":"background-color: $disabled-slider-color;",".sv_main .sjs_sp_container":"border: 1px dashed $disable-color;",".sv_main .sjs_sp_placeholder":"color: $foreground-light;",".sv_main .sv_matrix_detail_row":"background-color: #ededed; border-top: 1px solid $header-background-color; border-bottom: 1px solid $header-background-color;",".sv_main .sv-action-bar-item":"color: $text-color;",".sv_main .sv-action-bar-item__icon use":"fill: $foreground-light;",".sv_main .sv-action-bar-item:hover":"background-color: $background-dim;"},e.bootstrapmaterialThemeCss={".sv_main.sv_bootstrapmaterial_css .form-group.is-focused .form-control":"linear-gradient(0deg, $main-color 2px, $main-color 0),linear-gradient(0deg, #D2D2D2 1px, transparent 0);",".sv_main.sv_bootstrapmaterial_css .sv_qstn":"margin-bottom: 1rem;",".sv_main.sv_bootstrapmaterial_css .sv_qstn label.sv_q_m_label":"height: 100%;",".sv_main.sv_bootstrapmaterial_css .sv_q_image":"display: inline-block;",".sv_main .sv_row .sv_qstn:first-child:last-child":"flex: none !important;",".sv_main .sv_row .sv_p_container:first-child:last-child":"flex: none !important;",".sv_main.sv_bootstrapmaterial_css .checkbox input[type=checkbox]:checked + .checkbox-material .check":"border-color: $main-color;",".sv_main.sv_bootstrapmaterial_css label.checkbox-inline input[type=checkbox]:checked + .checkbox-material .check":"border-color: $main-color;",".sv_main.sv_bootstrapmaterial_css .checkbox input[type=checkbox]:checked + .checkbox-material .check:before":"color: $main-color;",".sv_main.sv_bootstrapmaterial_css label.checkbox-inline input[type=checkbox]:checked + .checkbox-material .check:before":"color: $main-color;",".sv_main.sv_bootstrapmaterial_css .radio input[type=radio]:checked ~ .circle":"border-color: $main-color;",".sv_main.sv_bootstrapmaterial_css label.radio-inline input[type=radio]:checked ~ .circle":"border-color: $main-color;",".sv_main.sv_bootstrapmaterial_css .radio input[type=radio]:checked ~ .check":"background-color: $main-color;",".sv_main.sv_bootstrapmaterial_css label.radio-inline input[type=radio]:checked ~ .check":"background-color: $main-color;",".sv_main.sv_bootstrapmaterial_css .btn-default.active":"background-color: $main-color; color: $body-background-color;",".sv_main.sv_bootstrapmaterial_css .btn-default:active":"background-color: $main-color; color: $body-background-color;",".sv_main.sv_bootstrapmaterial_css .btn-secondary.active":"background-color: $main-color; color: $body-background-color;",".sv_main.sv_bootstrapmaterial_css .btn-secondary:active":"background-color: $main-color; color: $body-background-color;",".sv_main.sv_bootstrapmaterial_css .open>.dropdown-toggle.btn-default":"background-color: $main-color; color: $body-background-color;",".sv_main.sv_bootstrapmaterial_css input[type='button'].btn-primary, .sv_main.sv_bootstrapmaterial_css button.btn-primary":"color: $body-background-color; background-color: $main-color;",".sv_main.sv_bootstrapmaterial_css input[type='button'].btn-primary:hover, .sv_main.sv_bootstrapmaterial_css button.btn-primary:hover":"background-color: $main-hover-color;",".sv_main .sv_q_imgsel.checked label>div":"background-color: $main-color;",".sv_main.sv_bootstrapmaterial_css .sv_q_file_remove:hover":"color: $main-color;",".sv_main.sv_bootstrapmaterial_css .form-group input[type=file]":"position: relative; opacity: 1;",".sv_main.sv_bootstrapmaterial_css .progress":"width: 60%; height: 1.5em;",".sv_main.sv_bootstrapmaterial_css .progress-bar":"width: auto; margin-left: 2px; margin-right: 2px;",".sv_main .sv-progress":"background-color: $header-background-color;",".sv_main .sv-progress__bar":"background-color: $main-color;",".sv_main .sv-paneldynamic__prev-btn.sv-paneldynamic__prev-btn--disabled, .sv_main .sv-paneldynamic__next-btn.sv-paneldynamic__next-btn--disabled":"fill: $disable-color;",".sv_main .sv-paneldynamic__progress-text":"color: $progress-text-color;",".sv_main .sv-paneldynamic__prev-btn, .sv_main .sv-paneldynamic__next-btn":"fill: $text-color",".sv_main .sv-boolean .checkbox-decorator":"display: none;",".sv_main .sv-boolean__switch":"background-color: $main-color;",".sv_main .sv-boolean__slider":"background-color: $slider-color;",".sv_main .sv-boolean__label.sv-boolean__label--disabled":"color: $disabled-label-color;",".sv_main .sv-boolean__label":"color: $text-color;",".sv_main .sv-boolean--disabled .sv-boolean__switch":"background-color: $disabled-switch-color;",".sv_main .sv-boolean--disabled  .sv-boolean__slider":"background-color: $disabled-slider-color;",".sv_main .sv_matrix_detail_row":"background-color: #ededed; border-top: 1px solid $header-background-color; border-bottom: 1px solid $header-background-color;",".sv_main .sjs_sp_container":"border: 1px dashed $disable-color;",".sv_main .sjs_sp_placeholder":"color: $foreground-light;",".sv_main .sv-action-bar-item":"color: $text-color;",".sv_main .sv-action-bar-item__icon use":"fill: $foreground-light;",".sv_main .sv-action-bar-item:hover":"background-color: $background-dim;"},e.Enabled=!0,e}()},"./src/survey-element.ts":
/*!*******************************!*\
  !*** ./src/survey-element.ts ***!
  \*******************************/
/*! exports provided: SurveyElement */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyElement",(function(){return d}));var r,i=n(/*! ./helpers */"./src/helpers.ts"),o=n(/*! ./jsonobject */"./src/jsonobject.ts"),a=n(/*! ./rendererFactory */"./src/rendererFactory.ts"),s=n(/*! ./base */"./src/base.ts"),l=n(/*! ./actions/action */"./src/actions/action.ts"),u=n(/*! ./actions/adaptive-container */"./src/actions/adaptive-container.ts"),c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),p=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},d=function(e){function t(n){var r=e.call(this)||this;return r.selectedElementInDesignValue=r,r.disableDesignActions=t.CreateDisabledDesignElements,r.isContentElement=!1,r.isEditableTemplateElement=!1,r.isInteractiveDesignElement=!0,r.name=n,r.createNewArray("errors"),r.createNewArray("titleActions"),r.registerFunctionOnPropertyValueChanged("isReadOnly",(function(){r.onReadOnlyChanged()})),r.registerFunctionOnPropertyValueChanged("errors",(function(){r.updateVisibleErrors()})),r}return c(t,e),t.getProgressInfoByElements=function(e,t){for(var n=s.Base.createProgressInfo(),r=0;r<e.length;r++)if(e[r].isVisible){var i=e[r].getProgressInfo();n.questionCount+=i.questionCount,n.answeredQuestionCount+=i.answeredQuestionCount,n.requiredQuestionCount+=i.requiredQuestionCount,n.requiredAnsweredQuestionCount+=i.requiredAnsweredQuestionCount}return t&&n.questionCount>0&&(0==n.requiredQuestionCount&&(n.requiredQuestionCount=1),n.answeredQuestionCount>0&&(n.requiredAnsweredQuestionCount=1)),n},t.ScrollElementToTop=function(e){if(!e||"undefined"==typeof document)return!1;var t=document.getElementById(e);if(!t||!t.scrollIntoView)return!1;var n=t.getBoundingClientRect().top;return n<0&&t.scrollIntoView(),n<0},t.GetFirstNonTextElement=function(e,t){if(void 0===t&&(t=!1),!e||!e.length||0==e.length)return null;if(t){var n=e[0];"#text"===n.nodeName&&(n.data=""),"#text"===(n=e[e.length-1]).nodeName&&(n.data="")}for(var r=0;r<e.length;r++)if("#text"!=e[r].nodeName&&"#comment"!=e[r].nodeName)return e[r];return null},t.FocusElement=function(e){if(!e||"undefined"==typeof document)return!1;var n=t.focusElementCore(e);return n||setTimeout((function(){t.focusElementCore(e)}),10),n},t.focusElementCore=function(e){var t=document.getElementById(e);return!!t&&(t.focus(),!0)},t.prototype.onPropertyValueChanged=function(t,n,r){e.prototype.onPropertyValueChanged.call(this,t,n,r),"state"===t&&("default"===n||"default"===r?this.updateTitleActions():this.updateExpandAction(),this.stateChangedCallback&&this.stateChangedCallback())},Object.defineProperty(t.prototype,"state",{get:function(){return this.getPropertyValue("state")},set:function(e){this.setPropertyValue("state",e),this.notifyStateChanged()},enumerable:!1,configurable:!0}),t.prototype.notifyStateChanged=function(){this.survey&&this.survey.elementContentVisibilityChanged(this)},Object.defineProperty(t.prototype,"isCollapsed",{get:function(){if(!this.isDesignMode)return"collapsed"==this.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isExpanded",{get:function(){return"expanded"==this.state},enumerable:!1,configurable:!0}),t.prototype.collapse=function(){this.isDesignMode||(this.state="collapsed")},t.prototype.expand=function(){this.state="expanded"},t.prototype.toggleState=function(){return this.isCollapsed?(this.expand(),!0):!this.isExpanded||(this.collapse(),!1)},Object.defineProperty(t.prototype,"hasStateButton",{get:function(){return this.isExpanded||this.isCollapsed},enumerable:!1,configurable:!0}),t.prototype.getTitleToolbar=function(){return this.titleToolbarValue||(this.titleToolbarValue=new u.AdaptiveActionContainer,this.titleToolbarValue.setItems(this.getTitleActions())),this.titleToolbarValue},t.prototype.updateExpandAction=function(){this.expandAction&&(this.expandAction.visible=this.isExpanded||this.isCollapsed,this.expandAction.innerCss="sv-expand-action"+(this.isExpanded?" sv-expand-action--expanded":""))},Object.defineProperty(t.prototype,"titleActions",{get:function(){return this.getPropertyValue("titleActions")},enumerable:!1,configurable:!0}),t.prototype.getTitleActions=function(){return this.isTitleActionRequested||(this.updateTitleActions(),this.isTitleActionRequested=!0),this.titleActions},t.prototype.updateTitleActions=function(){var e=this,t=[];this.hasStateButton&&!this.expandAction&&(this.expandAction=new l.Action({id:"expand-collapse-action",title:"",disableTabStop:!0,action:function(){e.toggleState()}})),this.expandAction&&t.push(this.expandAction),this.survey&&(t=this.survey.getUpdatedElementTitleActions(this,t)),this.updateExpandAction(),this.setPropertyValue("titleActions",t)},Object.defineProperty(t.prototype,"hasTitleActions",{get:function(){return this.getTitleActions().length>0},enumerable:!1,configurable:!0}),t.prototype.getTitleComponentName=function(){var e=a.RendererFactory.Instance.getRenderer("element","title-actions");return"default"==e?"sv-default-title":e},Object.defineProperty(t.prototype,"titleTabIndex",{get:function(){return"default"!==this.state?0:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleAriaExpanded",{get:function(){if("default"!==this.state)return"expanded"===this.state},enumerable:!1,configurable:!0}),t.prototype.setSurveyImpl=function(e){this.surveyImplValue=e,this.surveyImplValue?(this.surveyDataValue=this.surveyImplValue.getSurveyData(),this.setSurveyCore(this.surveyImplValue.getSurvey()),this.textProcessorValue=this.surveyImplValue.getTextProcessor(),this.onSetData()):this.setSurveyCore(null)},Object.defineProperty(t.prototype,"surveyImpl",{get:function(){return this.surveyImplValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this.surveyDataValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"survey",{get:function(){return this.getSurvey()},enumerable:!1,configurable:!0}),t.prototype.getSurvey=function(e){return void 0===e&&(e=!1),this.surveyValue||this.surveyImplValue&&this.setSurveyCore(this.surveyImplValue.getSurvey()),this.surveyValue},t.prototype.setSurveyCore=function(e){this.surveyValue=e,this.surveyChangedCallback&&this.surveyChangedCallback()},Object.defineProperty(t.prototype,"isDesignMode",{get:function(){return!!this.survey&&this.survey.isDesignMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isInternal",{get:function(){return this.isContentElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"areInvisibleElementsShowing",{get:function(){return!!this.survey&&this.survey.areInvisibleElementsShowing&&!this.isContentElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVisible",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isReadOnly",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"readOnly",{get:function(){return this.getPropertyValue("readOnly",!1)},set:function(e){this.readOnly!=e&&(this.setPropertyValue("readOnly",e),this.isLoadingFromJson||this.setPropertyValue("isReadOnly",this.isReadOnly))},enumerable:!1,configurable:!0}),t.prototype.onReadOnlyChanged=function(){this.readOnlyChangedCallback&&this.readOnlyChangedCallback()},t.prototype.updateElementCss=function(e){},t.prototype.getIsLoadingFromJson=function(){return!!e.prototype.getIsLoadingFromJson.call(this)||!!this.survey&&this.survey.isLoadingFromJson},Object.defineProperty(t.prototype,"name",{get:function(){return this.getPropertyValue("name","")},set:function(e){var t=this.name;this.setPropertyValue("name",this.getValidName(e)),!this.isLoadingFromJson&&t&&this.onNameChanged(t)},enumerable:!1,configurable:!0}),t.prototype.getValidName=function(e){return e},t.prototype.onNameChanged=function(e){},t.prototype.updateBindingValue=function(e,t){this.data&&!i.Helpers.isTwoValueEquals(t,this.data.getValue(e))&&this.data.setValue(e,t,!1)},Object.defineProperty(t.prototype,"errors",{get:function(){return this.getPropertyValue("errors")},set:function(e){this.setPropertyValue("errors",e)},enumerable:!1,configurable:!0}),t.prototype.updateVisibleErrors=function(){for(var e=0,t=0;t<this.errors.length;t++)this.errors[t].visible&&e++;this.hasVisibleErrors=e>0},Object.defineProperty(t.prototype,"containsErrors",{get:function(){return this.getPropertyValue("containsErrors",!1)},enumerable:!1,configurable:!0}),t.prototype.updateContainsErrors=function(){this.setPropertyValue("containsErrors",this.getContainsErrors())},t.prototype.getContainsErrors=function(){return this.errors.length>0},t.prototype.getElementsInDesign=function(e){return void 0===e&&(e=!1),[]},Object.defineProperty(t.prototype,"selectedElementInDesign",{get:function(){return this.selectedElementInDesignValue},set:function(e){this.selectedElementInDesignValue=e},enumerable:!1,configurable:!0}),t.prototype.updateCustomWidgets=function(){},t.prototype.onSurveyLoad=function(){},t.prototype.onFirstRendering=function(){},t.prototype.endLoadingFromJson=function(){e.prototype.endLoadingFromJson.call(this),this.survey||this.onSurveyLoad()},t.prototype.setVisibleIndex=function(e){return 0},Object.defineProperty(t.prototype,"isPage",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPanel",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isQuestion",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.delete=function(){},t.prototype.removeSelfFromList=function(e){if(e&&Array.isArray(e)){var t=e.indexOf(this);t>-1&&e.splice(t,1)}},Object.defineProperty(t.prototype,"textProcessor",{get:function(){return this.textProcessorValue},enumerable:!1,configurable:!0}),t.prototype.getProcessedHtml=function(e){return e&&this.textProcessor?this.textProcessor.processText(e,!0):e},t.prototype.onSetData=function(){},Object.defineProperty(t.prototype,"parent",{get:function(){return this.getPropertyValue("parent",null)},set:function(e){this.setPropertyValue("parent",e)},enumerable:!1,configurable:!0}),t.prototype.getPage=function(e){for(;e&&e.parent;)e=e.parent;return e&&"page"==e.getType()?e:null},t.prototype.moveToBase=function(e,t,n){if(void 0===n&&(n=null),!t)return!1;e.removeElement(this);var r=-1;return i.Helpers.isNumber(n)&&(r=parseInt(n)),-1==r&&n&&n.getType&&(r=t.indexOf(n)),t.addElement(this,r),!0},t.prototype.setPage=function(e,t){this.getPage(e)!==t&&(e&&e.removeElement(this),t&&t.addElement(this,-1))},t.prototype.getSearchableLocKeys=function(e){e.push("title"),e.push("description")},t.CreateDisabledDesignElements=!1,p([Object(o.property)({defaultValue:!1})],t.prototype,"hasVisibleErrors",void 0),t}(s.Base)},"./src/survey-error.ts":
/*!*****************************!*\
  !*** ./src/survey-error.ts ***!
  \*****************************/
/*! exports provided: SurveyError */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyError",(function(){return i}));var r=n(/*! ./localizablestring */"./src/localizablestring.ts"),i=function(){function e(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.text=e,this.errorOwner=t,this.visible=!0}return Object.defineProperty(e.prototype,"locText",{get:function(){return this.locTextValue||(this.locTextValue=new r.LocalizableString(this.errorOwner,!0),this.locTextValue.text=this.getText()),this.locTextValue},enumerable:!1,configurable:!0}),e.prototype.getText=function(){var e=this.text;return e||(e=this.getDefaultText()),this.errorOwner&&(e=this.errorOwner.getErrorCustomText(e,this)),e},e.prototype.getErrorType=function(){return"base"},e.prototype.getDefaultText=function(){return""},e}()},"./src/survey.ts":
/*!***********************!*\
  !*** ./src/survey.ts ***!
  \***********************/
/*! exports provided: SurveyModel */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyModel",(function(){return _}));var r,i=n(/*! ./helpers */"./src/helpers.ts"),o=n(/*! ./jsonobject */"./src/jsonobject.ts"),a=n(/*! ./base */"./src/base.ts"),s=n(/*! ./survey-element */"./src/survey-element.ts"),l=n(/*! ./defaultCss/cssstandard */"./src/defaultCss/cssstandard.ts"),u=n(/*! ./page */"./src/page.ts"),c=n(/*! ./textPreProcessor */"./src/textPreProcessor.ts"),p=n(/*! ./conditionProcessValue */"./src/conditionProcessValue.ts"),d=n(/*! ./dxSurveyService */"./src/dxSurveyService.ts"),h=n(/*! ./surveyStrings */"./src/surveyStrings.ts"),f=n(/*! ./error */"./src/error.ts"),m=n(/*! ./localizablestring */"./src/localizablestring.ts"),g=n(/*! ./stylesmanager */"./src/stylesmanager.ts"),y=n(/*! ./surveytimer */"./src/surveytimer.ts"),v=n(/*! ./conditions */"./src/conditions.ts"),b=n(/*! ./settings */"./src/settings.ts"),x=n(/*! ./utils/utils */"./src/utils/utils.ts"),w=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),_=function(e){function t(n){void 0===n&&(n=null);var r=e.call(this)||this;return r.valuesHash={},r.variablesHash={},r.localeValue="",r.completedStateValue="",r.completedStateTextValue="",r.isTimerStarted=!1,r.onCompleting=r.addEvent(),r.onComplete=r.addEvent(),r.onShowingPreview=r.addEvent(),r.onNavigateToUrl=r.addEvent(),r.onStarted=r.addEvent(),r.onPartialSend=r.addEvent(),r.onCurrentPageChanging=r.addEvent(),r.onCurrentPageChanged=r.addEvent(),r.onValueChanging=r.addEvent(),r.onValueChanged=r.addEvent(),r.onVisibleChanged=r.addEvent(),r.onPageVisibleChanged=r.addEvent(),r.onPanelVisibleChanged=r.addEvent(),r.onQuestionCreated=r.addEvent(),r.onQuestionAdded=r.addEvent(),r.onQuestionRemoved=r.addEvent(),r.onPanelAdded=r.addEvent(),r.onPanelRemoved=r.addEvent(),r.onPageAdded=r.addEvent(),r.onValidateQuestion=r.addEvent(),r.onSettingQuestionErrors=r.addEvent(),r.onServerValidateQuestions=r.addEvent(),r.onValidatePanel=r.addEvent(),r.onErrorCustomText=r.addEvent(),r.onValidatedErrorsOnCurrentPage=r.addEvent(),r.onProcessHtml=r.addEvent(),r.onGetQuestionTitle=r.addEvent(),r.onGetQuestionNo=r.addEvent(),r.onProgressText=r.addEvent(),r.onTextMarkdown=r.addEvent(),r.onTextRenderAs=r.addEvent(),r.onSendResult=r.addEvent(),r.onGetResult=r.addEvent(),r.onUploadFiles=r.addEvent(),r.onDownloadFile=r.addEvent(),r.onClearFiles=r.addEvent(),r.onLoadChoicesFromServer=r.addEvent(),r.onLoadedSurveyFromService=r.addEvent(),r.onProcessTextValue=r.addEvent(),r.onUpdateQuestionCssClasses=r.addEvent(),r.onUpdatePanelCssClasses=r.addEvent(),r.onUpdatePageCssClasses=r.addEvent(),r.onAfterRenderSurvey=r.addEvent(),r.onAfterRenderHeader=r.addEvent(),r.onAfterRenderPage=r.addEvent(),r.onAfterRenderQuestion=r.addEvent(),r.onAfterRenderQuestionInput=r.addEvent(),r.onAfterRenderPanel=r.addEvent(),r.onMatrixRowAdded=r.addEvent(),r.onMatrixBeforeRowAdded=r.addEvent(),r.onMatrixRowRemoving=r.addEvent(),r.onMatrixRowRemoved=r.addEvent(),r.onMatrixAllowRemoveRow=r.addEvent(),r.onMatrixCellCreated=r.addEvent(),r.onMatrixAfterCellRender=r.addEvent(),r.onMatrixCellValueChanged=r.addEvent(),r.onMatrixCellValueChanging=r.addEvent(),r.onMatrixCellValidate=r.addEvent(),r.onDynamicPanelAdded=r.addEvent(),r.onDynamicPanelRemoved=r.addEvent(),r.onTimer=r.addEvent(),r.onTimerPanelInfoText=r.addEvent(),r.onDynamicPanelItemValueChanged=r.addEvent(),r.onIsAnswerCorrect=r.addEvent(),r.onDragDropAllow=r.addEvent(),r.onScrollingElementToTop=r.addEvent(),r.onLocaleChangedEvent=r.addEvent(),r.onGetQuestionTitleActions=r.addEvent(),r.onGetPanelTitleActions=r.addEvent(),r.onGetPageTitleActions=r.addEvent(),r.onGetMatrixRowActions=r.addEvent(),r.onElementContentVisibilityChanged=r.addEvent(),r.onGetExpressionDisplayValue=r.addEvent(),r.jsonErrors=null,r.cssValue=null,r.hideRequiredErrors=!1,r._isMobile=!1,r._isDesignMode=!1,r.ignoreValidation=!1,r.isNavigationButtonPressed=!1,r.isCalculatingProgressText=!1,r.isTriggerIsRunning=!1,r.triggerValues=null,r.triggerKeys=null,r.conditionValues=null,r.isValueChangedOnRunningCondition=!1,r.conditionRunnerCounter=0,r.conditionUpdateVisibleIndexes=!1,r.conditionNotifyElementsOnAnyValueOrVariableChanged=!1,r.isEndLoadingFromJson=null,r.questionHashes={names:{},namesInsensitive:{},valueNames:{},valueNamesInsensitive:{}},r.timerFunc=null,r.timeSpent=0,"undefined"!=typeof document&&(t.stylesManager=new g.StylesManager),r.createLocalizableString("title",r,!0),r.createLocalizableString("description",r,!0),r.createLocalizableString("logo",r,!1),r.createLocalizableString("completedHtml",r),r.createLocalizableString("completedBeforeHtml",r),r.createLocalizableString("loadingHtml",r),r.createLocalizableString("startSurveyText",r),r.createLocalizableString("pagePrevText",r),r.createLocalizableString("pageNextText",r),r.createLocalizableString("completeText",r),r.createLocalizableString("previewText",r),r.createLocalizableString("editText",r),r.createLocalizableString("questionTitleTemplate",r,!0),r.textPreProcessor=new c.TextPreProcessor,r.textPreProcessor.onProcess=function(e){r.getProcessedTextValue(e)},r.createNewArray("pages",(function(e){r.doOnPageAdded(e)}),(function(e){r.doOnPageRemoved(e)})),r.createNewArray("triggers",(function(e){e.setOwner(r)})),r.createNewArray("calculatedValues",(function(e){e.setOwner(r)})),r.createNewArray("completedHtmlOnCondition",(function(e){e.locOwner=r})),r.createNewArray("navigateToUrlOnCondition",(function(e){e.locOwner=r})),r.registerFunctionOnPropertyValueChanged("firstPageIsStarted",(function(){r.onFirstPageIsStartedChanged()})),r.registerFunctionOnPropertyValueChanged("mode",(function(){r.onModeChanged()})),r.registerFunctionOnPropertyValueChanged("progressBarType",(function(){r.updateProgressText()})),r.registerFunctionOnPropertiesValueChanged(["questionStartIndex","requiredText","questionTitlePattern"],(function(){r.resetVisibleIndexes()})),r.onGetQuestionNo.onCallbacksChanged=function(){r.resetVisibleIndexes()},r.onProgressText.onCallbacksChanged=function(){r.updateProgressText()},r.onTextMarkdown.onCallbacksChanged=function(){r.locStrsChanged()},r.onGetQuestionTitle.onCallbacksChanged=function(){r.locStrsChanged()},r.onBeforeCreating(),n&&(("string"==typeof n||n instanceof String)&&(n=JSON.parse(n)),n&&n.clientId&&(r.clientId=n.clientId),r.fromJSON(n),r.surveyId&&r.loadSurveyFromService(r.surveyId,r.clientId)),r.onCreating(),r}return w(t,e),Object.defineProperty(t.prototype,"platformName",{get:function(){return t.platform},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"commentPrefix",{get:function(){return b.settings.commentPrefix},set:function(e){b.settings.commentPrefix=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentPageValue",{get:function(){return this.getPropertyValue("currentPageValue",null)},set:function(e){this.setPropertyValue("currentPageValue",e)},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"survey"},t.prototype.onPropertyValueChanged=function(e,t,n){"questionsOnPageMode"===e&&this.onQuestionsOnPageModeChanged(t)},Object.defineProperty(t.prototype,"pages",{get:function(){return this.getPropertyValue("pages")},enumerable:!1,configurable:!0}),t.prototype.getCss=function(){return this.css},Object.defineProperty(t.prototype,"css",{get:function(){return this.cssValue||(this.cssValue={},this.copyCssClasses(this.cssValue,l.surveyCss.getCss())),this.cssValue},set:function(e){this.updateElementCss(!1),this.mergeValues(e,this.css)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssNavigationComplete",{get:function(){return this.getNavigationCss(this.css.navigationButton,this.css.navigation.complete)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssNavigationPreview",{get:function(){return this.getNavigationCss(this.css.navigationButton,this.css.navigation.preview)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssNavigationEdit",{get:function(){return this.getNavigationCss(this.css.navigationButton,this.css.navigation.edit)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssNavigationPrev",{get:function(){return this.getNavigationCss(this.css.navigationButton,this.css.navigation.prev)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssNavigationStart",{get:function(){return this.getNavigationCss(this.css.navigationButton,this.css.navigation.start)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cssNavigationNext",{get:function(){return this.getNavigationCss(this.css.navigationButton,this.css.navigation.next)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completedCss",{get:function(){var e=this.css;return e.body+" "+e.completedPage},enumerable:!1,configurable:!0}),t.prototype.getNavigationCss=function(e,t){var n="";return e&&(n=e),t&&(n+=" "+t),n},Object.defineProperty(t.prototype,"lazyRendering",{get:function(){return!0===this.lazyRenderingValue},set:function(e){this.lazyRenderingValue=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLazyRendering",{get:function(){return this.lazyRendering||b.settings.lazyRowsRendering},enumerable:!1,configurable:!0}),t.prototype.updateLazyRenderingRowsOnRemovingElements=function(){if(this.isLazyRendering){var e=this.currentPage;e&&Object(x.scrollElementByChildId)(e.id)}},Object.defineProperty(t.prototype,"triggers",{get:function(){return this.getPropertyValue("triggers")},set:function(e){this.setPropertyValue("triggers",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"calculatedValues",{get:function(){return this.getPropertyValue("calculatedValues")},set:function(e){this.setPropertyValue("calculatedValues",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"surveyId",{get:function(){return this.getPropertyValue("surveyId","")},set:function(e){this.setPropertyValue("surveyId",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"surveyPostId",{get:function(){return this.getPropertyValue("surveyPostId","")},set:function(e){this.setPropertyValue("surveyPostId",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clientId",{get:function(){return this.getPropertyValue("clientId","")},set:function(e){this.setPropertyValue("clientId",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cookieName",{get:function(){return this.getPropertyValue("cookieName","")},set:function(e){this.setPropertyValue("cookieName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sendResultOnPageNext",{get:function(){return this.getPropertyValue("sendResultOnPageNext",!1)},set:function(e){this.setPropertyValue("sendResultOnPageNext",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"surveyShowDataSaving",{get:function(){return this.getPropertyValue("surveyShowDataSaving",!1)},set:function(e){this.setPropertyValue("surveyShowDataSaving",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"focusFirstQuestionAutomatic",{get:function(){return this.getPropertyValue("focusFirstQuestionAutomatic",!0)},set:function(e){this.setPropertyValue("focusFirstQuestionAutomatic",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"focusOnFirstError",{get:function(){return this.getPropertyValue("focusOnFirstError",!0)},set:function(e){this.setPropertyValue("focusOnFirstError",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showNavigationButtons",{get:function(){return this.getPropertyValue("showNavigationButtons")},set:function(e){!0!==e&&void 0!==e||(e="bottom"),!1===e&&(e="none"),this.setPropertyValue("showNavigationButtons",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showPrevButton",{get:function(){return this.getPropertyValue("showPrevButton",!0)},set:function(e){this.setPropertyValue("showPrevButton",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showTitle",{get:function(){return this.getPropertyValue("showTitle",!0)},set:function(e){this.setPropertyValue("showTitle",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showPageTitles",{get:function(){return this.getPropertyValue("showPageTitles",!0)},set:function(e){this.setPropertyValue("showPageTitles",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showCompletedPage",{get:function(){return this.getPropertyValue("showCompletedPage",!0)},set:function(e){this.setPropertyValue("showCompletedPage",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"navigateToUrl",{get:function(){return this.getPropertyValue("navigateToUrl")},set:function(e){this.setPropertyValue("navigateToUrl",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"navigateToUrlOnCondition",{get:function(){return this.getPropertyValue("navigateToUrlOnCondition")},set:function(e){this.setPropertyValue("navigateToUrlOnCondition",e)},enumerable:!1,configurable:!0}),t.prototype.getNavigateToUrl=function(){var e=this.getExpressionItemOnRunCondition(this.navigateToUrlOnCondition),t=e?e.url:this.navigateToUrl;return t&&(t=this.processText(t,!0)),t},t.prototype.navigateTo=function(){var e={url:this.getNavigateToUrl()};this.onNavigateToUrl.fire(this,e),e.url&&"undefined"!=typeof window&&window.location&&(window.location.href=e.url)},Object.defineProperty(t.prototype,"requiredText",{get:function(){return this.getPropertyValue("requiredText","*")},set:function(e){this.setPropertyValue("requiredText",e)},enumerable:!1,configurable:!0}),t.prototype.beforeSettingQuestionErrors=function(e,t){this.maakeRequiredErrorsInvisibgle(t),this.onSettingQuestionErrors.fire(this,{question:e,errors:t})},t.prototype.beforeSettingPanelErrors=function(e,t){this.maakeRequiredErrorsInvisibgle(t)},t.prototype.maakeRequiredErrorsInvisibgle=function(e){if(this.hideRequiredErrors)for(var t=0;t<e.length;t++){var n=e[t].getErrorType();"required"!=n&&"requireoneanswer"!=n||(e[t].visible=!1)}},Object.defineProperty(t.prototype,"questionStartIndex",{get:function(){return this.getPropertyValue("questionStartIndex","")},set:function(e){this.setPropertyValue("questionStartIndex",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storeOthersAsComment",{get:function(){return this.getPropertyValue("storeOthersAsComment",!0)},set:function(e){this.setPropertyValue("storeOthersAsComment",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxTextLength",{get:function(){return this.getPropertyValue("maxTextLength",0)},set:function(e){this.setPropertyValue("maxTextLength",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOthersLength",{get:function(){return this.getPropertyValue("maxOthersLength",0)},set:function(e){this.setPropertyValue("maxOthersLength",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"goNextPageAutomatic",{get:function(){return this.getPropertyValue("goNextPageAutomatic",!1)},set:function(e){this.setPropertyValue("goNextPageAutomatic",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowCompleteSurveyAutomatic",{get:function(){return this.getPropertyValue("allowCompleteSurveyAutomatic",!0)},set:function(e){this.setPropertyValue("allowCompleteSurveyAutomatic",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"checkErrorsMode",{get:function(){return this.getPropertyValue("checkErrorsMode")},set:function(e){this.setPropertyValue("checkErrorsMode",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textUpdateMode",{get:function(){return this.getPropertyValue("textUpdateMode")},set:function(e){this.setPropertyValue("textUpdateMode",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clearInvisibleValues",{get:function(){return this.getPropertyValue("clearInvisibleValues")},set:function(e){!0===e&&(e="onComplete"),!1===e&&(e="none"),this.setPropertyValue("clearInvisibleValues",e)},enumerable:!1,configurable:!0}),t.prototype.clearIncorrectValues=function(e){void 0===e&&(e=!1);for(var t=0;t<this.pages.length;t++)this.pages[t].clearIncorrectValues();if(e){var n=this.data,r=!1;for(var i in n)if(!this.getQuestionByValueName(i)&&!this.iscorrectValueWithPostPrefix(i,b.settings.commentPrefix)&&!this.iscorrectValueWithPostPrefix(i,b.settings.matrixTotalValuePostFix)){var o=this.getCalculatedValueByName(i);o&&o.includeIntoResult||(r=!0,delete n[i])}r&&(this.data=n)}},t.prototype.iscorrectValueWithPostPrefix=function(e,t){return e.indexOf(t)===e.length-t.length&&!!this.getQuestionByValueName(e.substr(0,e.indexOf(t)))},Object.defineProperty(t.prototype,"locale",{get:function(){return this.localeValue},set:function(e){h.surveyLocalization.currentLocale=e,this.localeValue=h.surveyLocalization.currentLocale,this.setPropertyValue("locale",this.localeValue),this.isLoadingFromJson||(this.locStrsChanged(),this.localeChanged(),this.onLocaleChangedEvent.fire(this,e))},enumerable:!1,configurable:!0}),t.prototype.getUsedLocales=function(){var e=new Array;this.addUsedLocales(e);var t=e.indexOf("default");if(t>-1){var n=h.surveyLocalization.defaultLocale,r=e.indexOf(n);r>-1&&e.splice(r,1),t=e.indexOf("default"),e[t]=n}return e},t.prototype.localeChanged=function(){for(var e=0;e<this.pages.length;e++)this.pages[e].localeChanged()},t.prototype.getLocale=function(){return this.locale},t.prototype.locStrsChanged=function(){if(e.prototype.locStrsChanged.call(this),this.currentPageValue){this.updateProgressText();var t=this.activePage;t&&t.locStrsChanged()}},t.prototype.getMarkdownHtml=function(e,t){return this.getSurveyMarkdownHtml(this,e,t)},t.prototype.getRenderer=function(e){return this.getRendererForString(this,e)},t.prototype.getRendererForString=function(e,t){var n={element:e,name:t,renderAs:this.getBuiltInRendererForString(e,t)};return this.onTextRenderAs.fire(this,n),n.renderAs},t.prototype.getExpressionDisplayValue=function(e,t,n){var r={question:e,value:t,displayValue:n};return this.onGetExpressionDisplayValue.fire(this,r),r.displayValue},t.prototype.getBuiltInRendererForString=function(e,t){if(this.isDesignMode)return m.LocalizableString.editableRenderer},t.prototype.getProcessedText=function(e){return this.processText(e,!0)},t.prototype.getLocString=function(e){return h.surveyLocalization.getString(e)},t.prototype.getErrorCustomText=function(e,t){var n={text:e,name:t.getErrorType(),error:t};return this.onErrorCustomText.fire(this,n),n.text},Object.defineProperty(t.prototype,"emptySurveyText",{get:function(){return this.getLocString("emptySurvey")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.getLocalizableStringText("title")},set:function(e){this.setLocalizableStringText("title",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTitle",{get:function(){return this.getLocalizableString("title")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"description",{get:function(){return this.getLocalizableStringText("description")},set:function(e){this.setLocalizableStringText("description",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locDescription",{get:function(){return this.getLocalizableString("description")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logo",{get:function(){return this.getLocalizableStringText("logo")},set:function(e){this.setLocalizableStringText("logo",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locLogo",{get:function(){return this.getLocalizableString("logo")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logoWidth",{get:function(){var e=this.getPropertyValue("logoWidth");return Object(x.getSize)(e)},set:function(e){this.setPropertyValue("logoWidth",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logoHeight",{get:function(){var e=this.getPropertyValue("logoHeight");return Object(x.getSize)(e)},set:function(e){this.setPropertyValue("logoHeight",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logoPosition",{get:function(){return this.getPropertyValue("logoPosition")},set:function(e){this.setPropertyValue("logoPosition",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasLogo",{get:function(){return!!this.logo&&"none"!==this.logoPosition},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLogoBefore",{get:function(){return!this.isDesignMode&&this.renderedHasLogo&&("left"===this.logoPosition||"top"===this.logoPosition)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLogoAfter",{get:function(){return this.isDesignMode?this.renderedHasLogo:this.renderedHasLogo&&("right"===this.logoPosition||"bottom"===this.logoPosition)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logoClassNames",{get:function(){return this.css.logo+" "+{left:"sv-logo--left",right:"sv-logo--right",top:"sv-logo--top",bottom:"sv-logo--bottom"}[this.logoPosition]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedHasTitle",{get:function(){return this.isDesignMode?this.isPropertyVisible("title"):!this.locTitle.isEmpty&&this.showTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedHasLogo",{get:function(){return this.isDesignMode?this.isPropertyVisible("logo"):this.hasLogo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderedHasHeader",{get:function(){return this.renderedHasTitle||this.renderedHasLogo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"logoFit",{get:function(){return this.getPropertyValue("logoFit")},set:function(e){this.setPropertyValue("logoFit",e)},enumerable:!1,configurable:!0}),t.prototype.setIsMobile=function(e){void 0===e&&(e=!0),this._isMobile=e},Object.defineProperty(t.prototype,"isMobile",{get:function(){return Object(x.isMobile)()||this._isMobile},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"titleMaxWidth",{get:function(){if(!this.isMobile&&!this.isValueEmpty(this.logo)&&!b.settings.supportCreatorV2){var e=this.logoWidth;if("left"===this.logoPosition||"right"===this.logoPosition)return"calc(100% - 5px - 2em - "+e+")"}return""},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completedHtml",{get:function(){return this.getLocalizableStringText("completedHtml")},set:function(e){this.setLocalizableStringText("completedHtml",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locCompletedHtml",{get:function(){return this.getLocalizableString("completedHtml")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completedHtmlOnCondition",{get:function(){return this.getPropertyValue("completedHtmlOnCondition")},set:function(e){this.setPropertyValue("completedHtmlOnCondition",e)},enumerable:!1,configurable:!0}),t.prototype.runExpression=function(e){if(!e)return null;var t=this.getFilteredValues(),n=this.getFilteredProperties();return new v.ExpressionRunner(e).run(t,n)},t.prototype.runCondition=function(e){if(!e)return!1;var t=this.getFilteredValues(),n=this.getFilteredProperties();return new v.ConditionRunner(e).run(t,n)},t.prototype.runTriggers=function(){this.checkTriggers(this.getFilteredValues(),!1)},Object.defineProperty(t.prototype,"renderedCompletedHtml",{get:function(){var e=this.getExpressionItemOnRunCondition(this.completedHtmlOnCondition);return e?e.html:this.completedHtml},enumerable:!1,configurable:!0}),t.prototype.getExpressionItemOnRunCondition=function(e){if(0==e.length)return null;for(var t=this.getFilteredValues(),n=this.getFilteredProperties(),r=0;r<e.length;r++)if(e[r].runCondition(t,n))return e[r];return null},Object.defineProperty(t.prototype,"completedBeforeHtml",{get:function(){return this.getLocalizableStringText("completedBeforeHtml")},set:function(e){this.setLocalizableStringText("completedBeforeHtml",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locCompletedBeforeHtml",{get:function(){return this.getLocalizableString("completedBeforeHtml")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"loadingHtml",{get:function(){return this.getLocalizableStringText("loadingHtml")},set:function(e){this.setLocalizableStringText("loadingHtml",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locLoadingHtml",{get:function(){return this.getLocalizableString("loadingHtml")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"startSurveyText",{get:function(){return this.getLocalizableStringText("startSurveyText",this.getLocString("startSurveyText"))},set:function(e){this.setLocalizableStringText("startSurveyText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locStartSurveyText",{get:function(){return this.getLocalizableString("startSurveyText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pagePrevText",{get:function(){return this.getLocalizableStringText("pagePrevText",this.getLocString("pagePrevText"))},set:function(e){this.setLocalizableStringText("pagePrevText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPagePrevText",{get:function(){return this.getLocalizableString("pagePrevText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageNextText",{get:function(){return this.getLocalizableStringText("pageNextText",this.getLocString("pageNextText"))},set:function(e){this.setLocalizableStringText("pageNextText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPageNextText",{get:function(){return this.getLocalizableString("pageNextText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completeText",{get:function(){return this.getLocalizableStringText("completeText",this.getLocString("completeText"))},set:function(e){this.setLocalizableStringText("completeText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locCompleteText",{get:function(){return this.getLocalizableString("completeText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previewText",{get:function(){return this.getLocalizableStringText("previewText",this.getLocString("previewText"))},set:function(e){this.setLocalizableStringText("previewText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locPreviewText",{get:function(){return this.getLocalizableString("previewText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"editText",{get:function(){return this.getLocalizableStringText("editText",this.getLocString("editText"))},set:function(e){this.setLocalizableStringText("editText",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locEditText",{get:function(){return this.getLocalizableString("editText")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionTitlePattern",{get:function(){return this.getPropertyValue("questionTitlePattern","numTitleRequire")},set:function(e){"numRequireTitle"!==e&&"requireNumTitle"!==e&&"numTitle"!=e&&(e="numTitleRequire"),this.setPropertyValue("questionTitlePattern",e)},enumerable:!1,configurable:!0}),t.prototype.getQuestionTitlePatternOptions=function(){var e=new Array,t=this.getLocString("questionTitlePatternText"),n=this.questionStartIndex?this.questionStartIndex:"1.";return e.push({value:"numTitleRequire",text:n+" "+t+" "+this.requiredText}),e.push({value:"numRequireTitle",text:n+" "+this.requiredText+" "+t}),e.push({value:"requireNumTitle",text:this.requiredText+" "+n+" "+t}),e.push({value:"numTitle",text:n+" "+t}),e},Object.defineProperty(t.prototype,"questionTitleTemplate",{get:function(){return this.getLocalizableStringText("questionTitleTemplate")},set:function(e){this.setLocalizableStringText("questionTitleTemplate",e),this.questionTitlePattern=this.getNewTitlePattern(e),this.questionStartIndex=this.getNewQuestionTitleElement(e,"no",this.questionStartIndex,"1"),this.requiredText=this.getNewQuestionTitleElement(e,"require",this.requiredText,"*")},enumerable:!1,configurable:!0}),t.prototype.getNewTitlePattern=function(e){if(e){for(var t=[];e.indexOf("{")>-1;){var n=(e=e.substr(e.indexOf("{")+1)).indexOf("}");if(n<0)break;t.push(e.substr(0,n)),e=e.substr(n+1)}if(t.length>1){if("require"==t[0])return"requireNumTitle";if("require"==t[1]&&3==t.length)return"numRequireTitle";if(t.indexOf("require")<0)return"numTitle"}if(1==t.length&&"title"==t[0])return"numTitle"}return"numTitleRequire"},t.prototype.getNewQuestionTitleElement=function(e,t,n,r){if(t="{"+t+"}",!e||e.indexOf(t)<0)return n;for(var i=e.indexOf(t),o="",a="",s=i-1;s>=0&&"}"!=e[s];s--);for(s<i-1&&(o=e.substr(s+1,i-s-1)),s=i+=t.length;s<e.length&&"{"!=e[s];s++);for(s>i&&(a=e.substr(i,s-i)),s=0;s<o.length&&o.charCodeAt(s)<33;)s++;for(o=o.substr(s),s=a.length-1;s>=0&&a.charCodeAt(s)<33;)s--;return a=a.substr(0,s+1),o||a?o+(n||r)+a:n},Object.defineProperty(t.prototype,"locQuestionTitleTemplate",{get:function(){return this.getLocalizableString("questionTitleTemplate")},enumerable:!1,configurable:!0}),t.prototype.getUpdatedQuestionTitle=function(e,t){if(this.onGetQuestionTitle.isEmpty)return t;var n={question:e,title:t};return this.onGetQuestionTitle.fire(this,n),n.title},t.prototype.getUpdatedQuestionNo=function(e,t){if(this.onGetQuestionNo.isEmpty)return t;var n={question:e,no:t};return this.onGetQuestionNo.fire(this,n),n.no},Object.defineProperty(t.prototype,"showPageNumbers",{get:function(){return this.getPropertyValue("showPageNumbers",!1)},set:function(e){e!==this.showPageNumbers&&(this.setPropertyValue("showPageNumbers",e),this.updateVisibleIndexes())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showQuestionNumbers",{get:function(){return this.getPropertyValue("showQuestionNumbers")},set:function(e){(e="onpage"===(e=e.toLowerCase())?"onPage":e)!==this.showQuestionNumbers&&(this.setPropertyValue("showQuestionNumbers",e),this.updateVisibleIndexes())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showProgressBar",{get:function(){return this.getPropertyValue("showProgressBar")},set:function(e){this.setPropertyValue("showProgressBar",e.toLowerCase())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"progressBarType",{get:function(){return this.getPropertyValue("progressBarType")},set:function(e){"correctquestion"===e&&(e="correctQuestion"),"requiredquestion"===e&&(e="requiredQuestion"),this.setPropertyValue("progressBarType",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowProgressBarOnTop",{get:function(){return!!this.canShowProresBar()&&("top"===this.showProgressBar||"both"===this.showProgressBar)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowProgressBarOnBottom",{get:function(){return!!this.canShowProresBar()&&("bottom"===this.showProgressBar||"both"===this.showProgressBar)},enumerable:!1,configurable:!0}),t.prototype.canShowProresBar=function(){return!this.isShowingPreview||"showAllQuestions"!=this.showPreviewBeforeComplete},Object.defineProperty(t.prototype,"processedTitle",{get:function(){return this.locTitle.renderedHtml},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionTitleLocation",{get:function(){return this.getPropertyValue("questionTitleLocation")},set:function(e){this.setPropertyValue("questionTitleLocation",e.toLowerCase()),this.isLoadingFromJson||this.updateElementCss(!0)},enumerable:!1,configurable:!0}),t.prototype.updateElementCss=function(e){for(var t=this.visiblePages,n=0;n<t.length;n++)t[n].updateElementCss(e)},Object.defineProperty(t.prototype,"questionErrorLocation",{get:function(){return this.getPropertyValue("questionErrorLocation")},set:function(e){this.setPropertyValue("questionErrorLocation",e.toLowerCase())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionDescriptionLocation",{get:function(){return this.getPropertyValue("questionDescriptionLocation")},set:function(e){this.setPropertyValue("questionDescriptionLocation",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mode",{get:function(){return this.getPropertyValue("mode")},set:function(e){(e=e.toLowerCase())!=this.mode&&("edit"!=e&&"display"!=e||this.setPropertyValue("mode",e))},enumerable:!1,configurable:!0}),t.prototype.onModeChanged=function(){for(var e=0;e<this.pages.length;e++){var t=this.pages[e];t.setPropertyValue("isReadOnly",t.isReadOnly)}},Object.defineProperty(t.prototype,"data",{get:function(){for(var e={},t=this.getValuesKeys(),n=0;n<t.length;n++){var r=t[n],i=this.getDataValueCore(this.valuesHash,r);void 0!==i&&(e[r]=i)}return this.setCalcuatedValuesIntoResult(e),e},set:function(e){this.valuesHash={},this.setDataCore(e)},enumerable:!1,configurable:!0}),t.prototype.mergeData=function(e){e&&this.setDataCore(e)},t.prototype.setDataCore=function(e){if(e)for(var t in e)this.setDataValueCore(this.valuesHash,t,e[t]);this.updateAllQuestionsValue(),this.notifyAllQuestionsOnValueChanged(),this.notifyElementsOnAnyValueOrVariableChanged(""),this.runConditions()},Object.defineProperty(t.prototype,"editingObj",{get:function(){return this.editingObjValue},set:function(e){var t=this;if(this.editingObj!=e&&(this.editingObj&&this.editingObj.onPropertyChanged.remove(this.onEditingObjPropertyChanged),this.editingObjValue=e,!this.isDisposed)){if(!e)for(var n=this.getAllQuestions(),r=0;r<n.length;r++)n[r].unbindValue();this.editingObj&&(this.setDataCore({}),this.onEditingObjPropertyChanged=function(e,n){o.Serializer.hasOriginalProperty(t.editingObj,n.name)&&t.updateOnSetValue(n.name,n.newValue,n.oldValue)},this.editingObj.onPropertyChanged.add(this.onEditingObjPropertyChanged))}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEditingSurveyElement",{get:function(){return!!this.editingObj},enumerable:!1,configurable:!0}),t.prototype.setCalcuatedValuesIntoResult=function(e){for(var t=0;t<this.calculatedValues.length;t++){var n=this.calculatedValues[t];n.includeIntoResult&&n.name&&void 0!==this.getVariable(n.name)&&(e[n.name]=this.getVariable(n.name))}},t.prototype.getAllValues=function(){return this.data},t.prototype.getPlainData=function(e){void 0===e&&(e={includeEmpty:!0,includeQuestionTypes:!1});var t=[];return this.getAllQuestions().forEach((function(n){var r=n.getPlainData(e);r&&t.push(r)})),t},t.prototype.getFilteredValues=function(){var e={};for(var t in this.variablesHash)e[t]=this.variablesHash[t];this.addCalculatedValuesIntoFilteredValues(e);for(var n=this.getValuesKeys(),r=0;r<n.length;r++)e[t=n[r]]=this.getDataValueCore(this.valuesHash,t);return e},t.prototype.addCalculatedValuesIntoFilteredValues=function(e){for(var t=this.calculatedValues,n=0;n<t.length;n++)e[t[n].name]=t[n].value},t.prototype.getFilteredProperties=function(){return{survey:this}},t.prototype.getValuesKeys=function(){if(!this.editingObj)return Object.keys(this.valuesHash);for(var e=o.Serializer.getPropertiesByObj(this.editingObj),t=[],n=0;n<e.length;n++)t.push(e[n].name);return t},t.prototype.getDataValueCore=function(e,t){return this.editingObj?o.Serializer.getObjPropertyValue(this.editingObj,t):e[t]},t.prototype.setDataValueCore=function(e,t,n){this.editingObj?o.Serializer.setObjPropertyValue(this.editingObj,t,n):e[t]=n},t.prototype.deleteDataValueCore=function(e,t){this.editingObj?this.editingObj[t]=null:delete e[t]},Object.defineProperty(t.prototype,"comments",{get:function(){for(var e={},t=this.getValuesKeys(),n=0;n<t.length;n++){var r=t[n];r.indexOf(this.commentPrefix)>0&&(e[r]=this.getDataValueCore(this.valuesHash,r))}return e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visiblePages",{get:function(){if(this.isDesignMode)return this.pages;for(var e=new Array,t=0;t<this.pages.length;t++)this.pages[t].isVisible&&e.push(this.pages[t]);return e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0==this.pages.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"PageCount",{get:function(){return this.pageCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pageCount",{get:function(){return this.pages.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"visiblePageCount",{get:function(){return this.visiblePages.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"startedPage",{get:function(){var e=this.firstPageIsStarted&&this.pages.length>0?this.pages[0]:null;return e&&(e.onFirstRendering(),e.setWasShown(!0)),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentPage",{get:function(){var e=this.visiblePages;return null!=this.currentPageValue&&e.indexOf(this.currentPageValue)<0&&(this.onContainsPageCallback&&this.onContainsPageCallback(this.currentPageValue)||(this.currentPage=null)),null==this.currentPageValue&&e.length>0&&(this.currentPage=e[0]),this.currentPageValue},set:function(e){if(!this.isLoadingFromJson){var t=this.getPageByObject(e);if(!e||t){var n=this.visiblePages;if(!(null!=t&&n.indexOf(t)<0)&&t!=this.currentPageValue){var r=this.currentPageValue;this.currentPageChanging(t,r)&&(this.currentPageValue=t,t&&(t.onFirstRendering(),t.updateCustomWidgets(),t.setWasShown(!0)),this.locStrsChanged(),this.currentPageChanged(t,r))}}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activePage",{get:function(){return this.isStartedState&&this.startedPage?this.startedPage:this.currentPage},enumerable:!1,configurable:!0}),t.prototype.getPageByObject=function(e){if(!e)return null;if(e.getType&&"page"==e.getType())return e;if("string"==typeof e||e instanceof String)return this.getPageByName(String(e));if(!isNaN(e)){var t=Number(e),n=this.visiblePages;return e<0||e>=n.length?null:n[t]}return e},Object.defineProperty(t.prototype,"currentPageNo",{get:function(){return this.visiblePages.indexOf(this.currentPage)},set:function(e){var t=this.visiblePages;e<0||e>=t.length||(this.currentPage=t[e])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionsOrder",{get:function(){return this.getPropertyValue("questionsOrder")},set:function(e){this.setPropertyValue("questionsOrder",e)},enumerable:!1,configurable:!0}),t.prototype.focusFirstQuestion=function(){if(!this.isFocusingQuestion){var e=this.activePage;e&&(e.scrollToTop(),e.focusFirstQuestion())}},t.prototype.scrollToTopOnPageChange=function(){var e=this.activePage;e&&(e.scrollToTop(),this.focusFirstQuestionAutomatic&&!this.isFocusingQuestion&&e.focusFirstQuestion())},Object.defineProperty(t.prototype,"state",{get:function(){return this.isLoading?"loading":this.isCompleted?"completed":this.isCompletedBefore?"completedbefore":!this.isDesignMode&&this.isEditMode&&this.isStartedState&&this.startedPage?"starting":this.isShowingPreview?this.currentPage?"preview":"empty":this.currentPage?"running":"empty"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCompleted",{get:function(){return this.getPropertyValue("isCompleted",!1)},set:function(e){this.setPropertyValue("isCompleted",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowingPreview",{get:function(){return this.getPropertyValue("isShowingPreview",!1)},set:function(e){this.isShowingPreview!=e&&(this.setPropertyValue("isShowingPreview",e),this.onShowingPreviewChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isStartedState",{get:function(){return this.getPropertyValue("isStartedState",!1)},set:function(e){this.setPropertyValue("isStartedState",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCompletedBefore",{get:function(){return this.getPropertyValue("isCompletedBefore",!1)},set:function(e){this.setPropertyValue("isCompletedBefore",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return this.getPropertyValue("isLoading",!1)},set:function(e){this.setPropertyValue("isLoading",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completedState",{get:function(){return this.completedStateValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"completedStateText",{get:function(){return this.completedStateTextValue},enumerable:!1,configurable:!0}),t.prototype.setCompletedState=function(e,t){this.completedStateValue=e,t||("saving"==e&&(t=this.getLocString("savingData")),"error"==e&&(t=this.getLocString("savingDataError")),"success"==e&&(t=this.getLocString("savingDataSuccess"))),this.completedStateTextValue=t},t.prototype.clear=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0),e&&(this.data=null,this.variablesHash={}),this.timeSpent=0;for(var n=0;n<this.pages.length;n++)this.pages[n].timeSpent=0,this.pages[n].setWasShown(!1),this.pages[n].passed=!1;this.isCompleted=!1,this.isCompletedBefore=!1,this.isLoading=!1,this.isStartedState=this.firstPageIsStarted,t&&this.visiblePageCount>0&&(this.currentPage=this.visiblePages[0]),e&&this.updateValuesWithDefaults()},t.prototype.mergeValues=function(e,t){if(t&&e&&"object"==typeof t)for(var n in e){var r=e[n];r&&"object"==typeof r?(t[n]||(t[n]={}),this.mergeValues(r,t[n])):t[n]=r}},t.prototype.updateValuesWithDefaults=function(){if(!this.isDesignMode&&!this.isLoading)for(var e=0;e<this.pages.length;e++)for(var t=this.pages[e].questions,n=0;n<t.length;n++)t[n].updateValueWithDefaults()},t.prototype.updateCustomWidgets=function(e){e&&e.updateCustomWidgets()},t.prototype.currentPageChanging=function(e,t){var n={oldCurrentPage:t,newCurrentPage:e,allowChanging:!0,isNextPage:this.isNextPage(e,t),isPrevPage:this.isPrevPage(e,t)};return this.onCurrentPageChanging.fire(this,n),n.allowChanging},t.prototype.currentPageChanged=function(e,t){var n=this.isNextPage(e,t);n&&(t.passed=!0),this.onCurrentPageChanged.fire(this,{oldCurrentPage:t,newCurrentPage:e,isNextPage:n,isPrevPage:this.isPrevPage(e,t)})},t.prototype.isNextPage=function(e,t){return!(!e||!t)&&e.visibleIndex==t.visibleIndex+1},t.prototype.isPrevPage=function(e,t){return!(!e||!t)&&e.visibleIndex+1==t.visibleIndex},t.prototype.getProgress=function(){if(null==this.currentPage)return 0;if("pages"!==this.progressBarType){var e=this.getProgressInfo();return"requiredQuestions"===this.progressBarType?e.requiredQuestionCount>1?Math.ceil(100*e.requiredAnsweredQuestionCount/e.requiredQuestionCount):100:e.questionCount>1?Math.ceil(100*e.answeredQuestionCount/e.questionCount):100}var t=this.visiblePages.indexOf(this.currentPage)+1;return Math.ceil(100*t/this.visiblePageCount)},Object.defineProperty(t.prototype,"progressValue",{get:function(){return this.getPropertyValue("progressValue",0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNavigationButtonsShowing",{get:function(){if(this.isDesignMode)return"none";var e=this.currentPage;return e?"show"===e.navigationButtonsVisibility?"bottom":"hide"===e.navigationButtonsVisibility?"none":this.showNavigationButtons:"none"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNavigationButtonsShowingOnTop",{get:function(){return this.getIsNavigationButtonsShowingOn("top")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNavigationButtonsShowingOnBottom",{get:function(){return this.getIsNavigationButtonsShowingOn("bottom")},enumerable:!1,configurable:!0}),t.prototype.getIsNavigationButtonsShowingOn=function(e){var t=this.isNavigationButtonsShowing;return"both"==t||t==e},Object.defineProperty(t.prototype,"isEditMode",{get:function(){return"edit"==this.mode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCompleteButtonVisible",{get:function(){return this.isEditMode&&(!this.isShowPreviewBeforeComplete||"preview"==this.state)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPreviewButtonVisible",{get:function(){return this.isEditMode&&this.isShowPreviewBeforeComplete&&"running"==this.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isCancelPreviewButtonVisible",{get:function(){return this.isEditMode&&this.isShowPreviewBeforeComplete&&"preview"==this.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDisplayMode",{get:function(){return"display"==this.mode||"preview"==this.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isUpdateValueTextOnTyping",{get:function(){return"onTyping"==this.textUpdateMode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDesignMode",{get:function(){return this._isDesignMode},enumerable:!1,configurable:!0}),t.prototype.setDesignMode=function(e){this._isDesignMode=e,this.onQuestionsOnPageModeChanged("standard")},Object.defineProperty(t.prototype,"showInvisibleElements",{get:function(){return this.getPropertyValue("showInvisibleElements",!1)},set:function(e){var t=this.visiblePages;this.setPropertyValue("showInvisibleElements",e),this.isLoadingFromJson||(this.runConditions(),this.updateAllElementsVisibility(t))},enumerable:!1,configurable:!0}),t.prototype.updateAllElementsVisibility=function(e){for(var t=0;t<this.pages.length;t++){var n=this.pages[t];n.updateElementVisibility(),e.indexOf(n)>-1!=n.isVisible&&this.onPageVisibleChanged.fire(this,{page:n,visible:n.isVisible})}},Object.defineProperty(t.prototype,"areInvisibleElementsShowing",{get:function(){return this.isDesignMode||this.showInvisibleElements},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"areEmptyElementsHidden",{get:function(){return this.isShowingPreview&&"showAnsweredQuestions"==this.showPreviewBeforeComplete},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCookie",{get:function(){if(!this.cookieName||"undefined"==typeof document)return!1;var e=document.cookie;return e&&e.indexOf(this.cookieName+"=true")>-1},enumerable:!1,configurable:!0}),t.prototype.setCookie=function(){this.cookieName&&"undefined"!=typeof document&&(document.cookie=this.cookieName+"=true; expires=Fri, 31 Dec 9999 0:0:0 GMT")},t.prototype.deleteCookie=function(){this.cookieName&&(document.cookie=this.cookieName+"=;")},t.prototype.nextPage=function(){return!this.isLastPage&&this.doCurrentPageComplete(!1)},t.prototype.hasErrorsOnNavigate=function(e){var t=this;if(this.ignoreValidation||!this.isEditMode)return!1;var n=function(n){n||t.doCurrentPageCompleteCore(e)};return"onComplete"===this.checkErrorsMode?!!this.isLastPage&&!1!==this.hasErrors(!0,!0,n):!1!==this.hasCurrentPageErrors(n)},t.prototype.checkForAsyncQuestionValidation=function(e,t){var n=this;this.clearAsyncValidationQuesitons();for(var r=0;r<e.length;r++)e[r].isRunningValidators&&(e[r].onCompletedAsyncValidators=function(e){n.onCompletedAsyncQuestionValidators(t,e)},this.asyncValidationQuesitons.push(e[r]));return this.asyncValidationQuesitons.length>0},t.prototype.clearAsyncValidationQuesitons=function(){if(this.asyncValidationQuesitons)for(var e=this.asyncValidationQuesitons,t=0;t<e.length;t++)e[t].onCompletedAsyncValidators=null;this.asyncValidationQuesitons=[]},t.prototype.onCompletedAsyncQuestionValidators=function(e,t){if(t)return this.clearAsyncValidationQuesitons(),void e(!0);for(var n=this.asyncValidationQuesitons,r=0;r<n.length;r++)if(n[r].isRunningValidators)return;e(!1)},Object.defineProperty(t.prototype,"isCurrentPageHasErrors",{get:function(){return this.checkIsCurrentPageHasErrors()},enumerable:!1,configurable:!0}),t.prototype.hasCurrentPageErrors=function(e){return this.hasPageErrors(void 0,e)},t.prototype.hasPageErrors=function(e,t){return e||(e=this.activePage),!!e&&(!!this.checkIsPageHasErrors(e)||!!t&&!!this.checkForAsyncQuestionValidation(e.questions,(function(e){return t(e)}))&&void 0)},t.prototype.hasErrors=function(e,t,n){void 0===e&&(e=!0),void 0===t&&(t=!1),n&&(e=!0);for(var r=this.visiblePages,i=null,o=!1,a=0;a<r.length;a++)r[a].hasErrors(e,!1)&&(i||(i=r[a]),o=!0);if(t&&i){this.currentPage=i;var s=i.questions;for(a=0;a<s.length;a++)if(s[a].errors.length>0){s[a].focus(!0);break}}return o||!n?o:!!this.checkForAsyncQuestionValidation(this.getAllQuestions(),(function(e){return n(e)}))&&void 0},t.prototype.ensureUniqueNames=function(e){if(void 0===e&&(e=null),null==e)for(var t=0;t<this.pages.length;t++)this.ensureUniqueName(this.pages[t]);else this.ensureUniqueName(e)},t.prototype.ensureUniqueName=function(e){if(e.isPage&&this.ensureUniquePageName(e),e.isPanel&&this.ensureUniquePanelName(e),e.isPage||e.isPanel)for(var t=e.elements,n=0;n<t.length;n++)this.ensureUniqueNames(t[n]);else this.ensureUniqueQuestionName(e)},t.prototype.ensureUniquePageName=function(e){var t=this;return this.ensureUniqueElementName(e,(function(e){return t.getPageByName(e)}))},t.prototype.ensureUniquePanelName=function(e){var t=this;return this.ensureUniqueElementName(e,(function(e){return t.getPanelByName(e)}))},t.prototype.ensureUniqueQuestionName=function(e){var t=this;return this.ensureUniqueElementName(e,(function(e){return t.getQuestionByName(e)}))},t.prototype.ensureUniqueElementName=function(e,t){var n=t(e.name);if(n&&n!=e){for(var r=this.getNewName(e.name);t(r);)r=this.getNewName(e.name);e.name=r}},t.prototype.getNewName=function(e){for(var t=e.length;t>0&&e[t-1]>="0"&&e[t-1]<="9";)t--;var n=e.substr(0,t),r=0;return t<e.length&&(r=parseInt(e.substr(t))),n+ ++r},t.prototype.checkIsCurrentPageHasErrors=function(e){return void 0===e&&(e=void 0),this.checkIsPageHasErrors(this.activePage,e)},t.prototype.checkIsPageHasErrors=function(e,t){if(void 0===t&&(t=void 0),void 0===t&&(t=this.focusOnFirstError),!e)return!0;var n=e.hasErrors(!0,t);return this.fireValidatedErrorsOnPage(e),n},t.prototype.fireValidatedErrorsOnPage=function(e){if(!this.onValidatedErrorsOnCurrentPage.isEmpty&&e){for(var t=e.questions,n=new Array,r=new Array,i=0;i<t.length;i++){var o=t[i];if(o.errors.length>0){n.push(o);for(var a=0;a<o.errors.length;a++)r.push(o.errors[a])}}this.onValidatedErrorsOnCurrentPage.fire(this,{questions:n,errors:r,page:e})}},t.prototype.prevPage=function(){if(this.isFirstPage)return!1;this.resetNavigationButton();var e=this.visiblePages,t=e.indexOf(this.currentPage);this.currentPage=e[t-1]},t.prototype.completeLastPage=function(){var e=this.doCurrentPageComplete(!0);return e&&this.cancelPreview(),e},t.prototype.navigationMouseDown=function(){return this.isNavigationButtonPressed=!0,!0},t.prototype.resetNavigationButton=function(){this.isNavigationButtonPressed=!1},t.prototype.showPreview=function(){if(this.resetNavigationButton(),this.hasErrorsOnNavigate(!0))return!1;if(this.doServerValidation(!0,!0))return!1;var e={allowShowPreview:!0};return this.onShowingPreview.fire(this,e),this.isShowingPreview=e.allowShowPreview,!0},t.prototype.cancelPreview=function(e){void 0===e&&(e=null),this.isShowingPreview&&(this.isShowingPreview=!1,i.Helpers.isValueEmpty(e)&&this.visiblePageCount>0&&(e=this.visiblePageCount-1),null!==e&&(this.currentPage=e))},t.prototype.cancelPreviewByPage=function(e){this.cancelPreview(e.originalPage)},t.prototype.doCurrentPageComplete=function(e){return!this.isValidatingOnServer&&(this.resetNavigationButton(),!this.hasErrorsOnNavigate(e)&&this.doCurrentPageCompleteCore(e))},t.prototype.doCurrentPageCompleteCore=function(e){return!this.doServerValidation(e)&&(e?(this.currentPage.passed=!0,this.doComplete()):this.doNextPage(),!0)},Object.defineProperty(t.prototype,"isSinglePage",{get:function(){return"singlePage"==this.questionsOnPageMode},set:function(e){this.questionsOnPageMode=e?"singlePage":"standard"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"questionsOnPageMode",{get:function(){return this.getPropertyValue("questionsOnPageMode","standard")},set:function(e){this.setPropertyValue("questionsOnPageMode",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"firstPageIsStarted",{get:function(){return this.getPropertyValue("firstPageIsStarted",!1)},set:function(e){this.setPropertyValue("firstPageIsStarted",e)},enumerable:!1,configurable:!0}),t.prototype.isPageStarted=function(e){return this.firstPageIsStarted&&this.pages.length>0&&this.pages[0]===e},Object.defineProperty(t.prototype,"showPreviewBeforeComplete",{get:function(){return this.getPropertyValue("showPreviewBeforeComplete","noPreview")},set:function(e){this.setPropertyValue("showPreviewBeforeComplete",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowPreviewBeforeComplete",{get:function(){var e=this.showPreviewBeforeComplete;return"showAllQuestions"==e||"showAnsweredQuestions"==e},enumerable:!1,configurable:!0}),t.prototype.onFirstPageIsStartedChanged=function(){0!=this.pages.length&&(this.isStartedState=this.firstPageIsStarted,this.pageVisibilityChanged(this.pages[0],!this.firstPageIsStarted))},t.prototype.onShowingPreviewChanged=function(){this.isDesignMode||(this.isShowingPreview?(this.runningPages=this.pages.slice(0,this.pages.length),this.setupPagesForPageModes(!0)):(this.runningPages&&this.restoreOrigionalPages(this.runningPages),this.runningPages=void 0),this.runConditions(),this.updateAllElementsVisibility(this.pages),this.updateVisibleIndexes(),this.currentPageNo=0)},t.prototype.onQuestionsOnPageModeChanged=function(e){this.isShowingPreview||("standard"==this.questionsOnPageMode||this.isDesignMode?(this.origionalPages&&this.restoreOrigionalPages(this.origionalPages),this.origionalPages=void 0):(e&&"standard"!=e||(this.origionalPages=this.pages.slice(0,this.pages.length)),this.setupPagesForPageModes(this.isSinglePage)),this.runConditions(),this.updateVisibleIndexes())},t.prototype.restoreOrigionalPages=function(e){this.questionHashesClear(),this.pages.splice(0,this.pages.length);for(var t=0;t<e.length;t++)this.pages.push(e[t])},t.prototype.setupPagesForPageModes=function(t){this.questionHashesClear();var n=this.firstPageIsStarted?1:0;e.prototype.startLoadingFromJson.call(this);var r=this.createPagesForQuestionOnPageMode(t,n),i=this.pages.length-n;this.pages.splice(n,i);for(var o=0;o<r.length;o++)this.pages.push(r[o]);for(e.prototype.endLoadingFromJson.call(this),o=0;o<r.length;o++)r[o].endLoadingFromJson(),r[o].setSurveyImpl(this);this.doElementsOnLoad()},t.prototype.createPagesForQuestionOnPageMode=function(e,t){return e?[this.createSinglePage(t)]:this.createPagesForEveryQuestion(t)},t.prototype.createSinglePage=function(e){var t=this.createNewPage("all");t.setSurveyImpl(this);for(var n=e;n<this.pages.length;n++){var r=this.pages[n],i=o.Serializer.createClass("panel");i.originalPage=r,t.addPanel(i);var a=(new o.JsonObject).toJsonObject(r);(new o.JsonObject).toObject(a,i),this.showPageTitles||(i.title="")}return t},t.prototype.createPagesForEveryQuestion=function(e){for(var t=[],n=e;n<this.pages.length;n++){var r=this.pages[n];r.setWasShown(!0);for(var i=0;i<r.elements.length;i++){var a=r.elements[i],s=o.Serializer.createClass(a.getType());if(s){var l=new o.JsonObject;l.lightSerializing=!0;var u=l.toJsonObject(r),c=o.Serializer.createClass(r.getType());c.fromJSON(u),c.name="page"+(t.length+1),c.setSurveyImpl(this),t.push(c);var p=(new o.JsonObject).toJsonObject(a);(new o.JsonObject).toObject(p,s),c.addElement(s);for(var d=0;d<c.questions.length;d++)this.questionHashesAdded(c.questions[d])}}}return t},Object.defineProperty(t.prototype,"isFirstPage",{get:function(){return null==this.currentPage||0==this.visiblePages.indexOf(this.currentPage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowPrevButton",{get:function(){if(this.isFirstPage||!this.showPrevButton)return!1;var e=this.visiblePages[this.currentPageNo-1];return this.getPageMaxTimeToFinish(e)<=0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLastPage",{get:function(){if(null==this.currentPage)return!0;var e=this.visiblePages;return e.indexOf(this.currentPage)==e.length-1},enumerable:!1,configurable:!0}),t.prototype.doComplete=function(e){void 0===e&&(e=!1);var t={allowComplete:!0,isCompleteOnTrigger:e};if(this.onCompleting.fire(this,t),t.allowComplete){var n=this.hasCookie;this.stopTimer(),this.setCompleted(),this.clearUnusedValues(),this.setCookie();var r=this,i=!1,o={isCompleteOnTrigger:e,showDataSaving:function(e){i=!0,r.setCompletedState("saving",e)},showDataSavingError:function(e){r.setCompletedState("error",e)},showDataSavingSuccess:function(e){r.setCompletedState("success",e),r.navigateTo()},showDataSavingClear:function(e){r.setCompletedState("","")}};this.onComplete.fire(this,o),!n&&this.surveyPostId&&this.sendResult(),i||this.navigateTo()}},t.prototype.start=function(){return!!this.firstPageIsStarted&&!this.checkIsPageHasErrors(this.startedPage,!0)&&(this.isStartedState=!1,this.startTimerFromUI(),this.onStarted.fire(this,{}),this.currentPage&&this.currentPage.locStrsChanged(),!0)},Object.defineProperty(t.prototype,"isValidatingOnServer",{get:function(){return this.getPropertyValue("isValidatingOnServer",!1)},enumerable:!1,configurable:!0}),t.prototype.setIsValidatingOnServer=function(e){e!=this.isValidatingOnServer&&(this.setPropertyValue("isValidatingOnServer",e),this.onIsValidatingOnServerChanged())},t.prototype.onIsValidatingOnServerChanged=function(){},t.prototype.doServerValidation=function(e,t){if(void 0===t&&(t=!1),!this.onServerValidateQuestions||this.onServerValidateQuestions.isEmpty)return!1;if(!e&&"onComplete"===this.checkErrorsMode)return!1;var n=this,r={data:{},errors:{},survey:this,complete:function(){n.completeServerValidation(r,t)}};if(e&&"onComplete"===this.checkErrorsMode)r.data=this.data;else for(var i=this.activePage.questions,o=0;o<i.length;o++){var a=i[o];if(a.visible){var s=this.getValue(a.getValueName());this.isValueEmpty(s)||(r.data[a.getValueName()]=s)}}return this.setIsValidatingOnServer(!0),"function"==typeof this.onServerValidateQuestions?this.onServerValidateQuestions(this,r):this.onServerValidateQuestions.fire(this,r),!0},t.prototype.completeServerValidation=function(e,t){if(this.setIsValidatingOnServer(!1),e||e.survey){var n=e.survey,r=!1;if(e.errors){var i=this.focusOnFirstError;for(var o in e.errors){var a=n.getQuestionByName(o);a&&a.errors&&(r=!0,a.addError(new f.CustomError(e.errors[o],this)),i&&(i=!1,a.page&&(this.currentPage=a.page),a.focus(!0)))}this.fireValidatedErrorsOnPage(this.currentPage)}r||(t?this.isShowingPreview=!0:n.isLastPage?n.doComplete():n.doNextPage())}},t.prototype.doNextPage=function(){var e=this.currentPage;if(this.checkOnPageTriggers(),this.isCompleted)this.doComplete(!0);else if(this.sendResultOnPageNext&&this.sendResult(this.surveyPostId,this.clientId,!0),e===this.currentPage){var t=this.visiblePages,n=t.indexOf(this.currentPage);this.currentPage=t[n+1]}},t.prototype.setCompleted=function(){this.isCompleted=!0},Object.defineProperty(t.prototype,"processedCompletedHtml",{get:function(){var e=this.renderedCompletedHtml;return e?this.processHtml(e):"<h3>"+this.getLocString("completingSurvey")+"</h3>"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processedCompletedBeforeHtml",{get:function(){return this.completedBeforeHtml?this.processHtml(this.completedBeforeHtml):"<h3>"+this.getLocString("completingSurveyBefore")+"</h3>"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"processedLoadingHtml",{get:function(){return this.loadingHtml?this.processHtml(this.loadingHtml):"<h3>"+this.getLocString("loadingSurvey")+"</h3>"},enumerable:!1,configurable:!0}),t.prototype.getProgressInfo=function(){var e=this.isDesignMode?this.pages:this.visiblePages;return s.SurveyElement.getProgressInfoByElements(e,!1)},Object.defineProperty(t.prototype,"progressText",{get:function(){var e=this.getPropertyValue("progressText","");return e||(this.updateProgressText(),e=this.getPropertyValue("progressText","")),e},enumerable:!1,configurable:!0}),t.prototype.updateProgressText=function(e){void 0===e&&(e=!1),this.isCalculatingProgressText||e&&"pages"==this.progressBarType&&this.onProgressText.isEmpty||(this.isCalculatingProgressText=!0,this.setPropertyValue("progressText",this.getProgressText()),this.setPropertyValue("progressValue",this.getProgress()),this.isCalculatingProgressText=!1)},t.prototype.getProgressText=function(){if(!this.isDesignMode&&null==this.currentPage)return"";var e={questionCount:0,answeredQuestionCount:0,requiredQuestionCount:0,requiredAnsweredQuestionCount:0,text:""},t=this.progressBarType.toLowerCase();if("questions"===t||"requiredquestions"===t||"correctquestions"===t||!this.onProgressText.isEmpty){var n=this.getProgressInfo();e.questionCount=n.questionCount,e.answeredQuestionCount=n.answeredQuestionCount,e.requiredQuestionCount=n.requiredQuestionCount,e.requiredAnsweredQuestionCount=n.requiredAnsweredQuestionCount}return e.text=this.getProgressTextCore(e),this.onProgressText.fire(this,e),e.text},t.prototype.getProgressTextCore=function(e){var t=this.progressBarType.toLowerCase();if("questions"===t)return this.getLocString("questionsProgressText").format(e.answeredQuestionCount,e.questionCount);if("requiredquestions"===t)return this.getLocString("questionsProgressText").format(e.requiredAnsweredQuestionCount,e.requiredQuestionCount);if("correctquestions"===t){var n=this.getCorrectedAnswerCount();return this.getLocString("questionsProgressText").format(n,e.questionCount)}var r=this.isDesignMode?this.pages:this.visiblePages,i=this.isDesignMode?1:r.indexOf(this.currentPage)+1;return this.getLocString("progressText").format(i,r.length)},t.prototype.afterRenderSurvey=function(e){this.onAfterRenderSurvey.fire(this,{survey:this,htmlElement:e})},t.prototype.updateQuestionCssClasses=function(e,t){this.onUpdateQuestionCssClasses.fire(this,{question:e,cssClasses:t})},t.prototype.updatePanelCssClasses=function(e,t){this.onUpdatePanelCssClasses.fire(this,{panel:e,cssClasses:t})},t.prototype.updatePageCssClasses=function(e,t){this.onUpdatePageCssClasses.fire(this,{page:e,cssClasses:t})},t.prototype.afterRenderPage=function(e){this.onAfterRenderPage.isEmpty||this.onAfterRenderPage.fire(this,{page:this.activePage,htmlElement:e})},t.prototype.afterRenderHeader=function(e){this.onAfterRenderHeader.isEmpty||this.onAfterRenderHeader.fire(this,{htmlElement:e})},t.prototype.afterRenderQuestion=function(e,t){this.onAfterRenderQuestion.fire(this,{question:e,htmlElement:t})},t.prototype.afterRenderQuestionInput=function(e,t){if(!this.onAfterRenderQuestionInput.isEmpty){var n=e.inputId;if(n&&t.id!==n&&"undefined"!=typeof document){var r=document.getElementById(n);r&&(t=r)}this.onAfterRenderQuestionInput.fire(this,{question:e,htmlElement:t})}},t.prototype.afterRenderPanel=function(e,t){this.onAfterRenderPanel.fire(this,{panel:e,htmlElement:t})},t.prototype.matrixBeforeRowAdded=function(e){this.onMatrixBeforeRowAdded.fire(this,e)},t.prototype.matrixRowAdded=function(e,t){this.onMatrixRowAdded.fire(this,{question:e,row:t})},t.prototype.getQuestionByValueNameFromArray=function(e,t,n){var r=this.getQuestionsByValueName(e);if(r){for(var i=0;i<r.length;i++){var o=r[i].getQuestionFromArray(t,n);if(o)return o}return null}},t.prototype.matrixRowRemoved=function(e,t,n){this.onMatrixRowRemoved.fire(this,{question:e,rowIndex:t,row:n})},t.prototype.matrixRowRemoving=function(e,t,n){var r={question:e,rowIndex:t,row:n,allow:!0};return this.onMatrixRowRemoving.fire(this,r),r.allow},t.prototype.matrixAllowRemoveRow=function(e,t,n){var r={question:e,rowIndex:t,row:n,allow:!0};return this.onMatrixAllowRemoveRow.fire(this,r),r.allow},t.prototype.matrixCellCreated=function(e,t){t.question=e,this.onMatrixCellCreated.fire(this,t)},t.prototype.matrixAfterCellRender=function(e,t){t.question=e,this.onMatrixAfterCellRender.fire(this,t)},t.prototype.matrixCellValueChanged=function(e,t){t.question=e,this.onMatrixCellValueChanged.fire(this,t)},t.prototype.matrixCellValueChanging=function(e,t){t.question=e,this.onMatrixCellValueChanging.fire(this,t)},Object.defineProperty(t.prototype,"isValidateOnValueChanging",{get:function(){return"onValueChanging"===this.checkErrorsMode},enumerable:!1,configurable:!0}),t.prototype.matrixCellValidate=function(e,t){return t.question=e,this.onMatrixCellValidate.fire(this,t),t.error?new f.CustomError(t.error,this):null},t.prototype.dynamicPanelAdded=function(e){if(!this.onDynamicPanelAdded.isEmpty){var t=e.panels,n=t[t.length-1];this.onDynamicPanelAdded.fire(this,{question:e,panel:n})}},t.prototype.dynamicPanelRemoved=function(e,t,n){for(var r=n?n.questions:[],i=0;i<r.length;i++)r[i].clearOnDeletingContainer();this.onDynamicPanelRemoved.fire(this,{question:e,panelIndex:t,panel:n})},t.prototype.dynamicPanelItemValueChanged=function(e,t){t.question=e,this.onDynamicPanelItemValueChanged.fire(this,t)},t.prototype.dragAndDropAllow=function(e){return e.allow=!0,this.onDragDropAllow.fire(this,e),e.allow},t.prototype.elementContentVisibilityChanged=function(e){this.currentPageValue&&this.currentPageValue.ensureRowsVisibility(),this.onElementContentVisibilityChanged.fire(this,{element:e})},t.prototype.getUpdatedElementTitleActions=function(e,t){return e.isPage?this.getUpdatedPageTitleActions(e,t):e.isPanel?this.getUpdatedPanelTitleActions(e,t):this.getUpdatedQuestionTitleActions(e,t)},t.prototype.getUpdatedQuestionTitleActions=function(e,t){var n={question:e,titleActions:t};return this.onGetQuestionTitleActions.fire(this,n),n.titleActions},t.prototype.getUpdatedPanelTitleActions=function(e,t){var n={panel:e,titleActions:t};return this.onGetPanelTitleActions.fire(this,n),n.titleActions},t.prototype.getUpdatedPageTitleActions=function(e,t){var n={page:e,titleActions:t};return this.onGetPageTitleActions.fire(this,n),n.titleActions},t.prototype.getUpdatedMatrixRowActions=function(e,t,n){var r={question:e,actions:n,row:t};return this.onGetMatrixRowActions.fire(this,r),r.actions},t.prototype.scrollElementToTop=function(e,t,n,r){var i={element:e,question:t,page:n,elementId:r,cancel:!1};this.onScrollingElementToTop.fire(this,i),i.cancel||s.SurveyElement.ScrollElementToTop(i.elementId)},t.prototype.uploadFiles=function(e,t,n,r){this.onUploadFiles.isEmpty?r("error",n):this.onUploadFiles.fire(this,{question:e,name:t,files:n||[],callback:r}),this.surveyPostId&&this.uploadFilesCore(t,n,r)},t.prototype.downloadFile=function(e,t,n){this.onDownloadFile.isEmpty&&n&&n("success",t.content||t),this.onDownloadFile.fire(this,{name:e,content:t.content||t,fileValue:t,callback:n})},t.prototype.clearFiles=function(e,t,n,r,i){this.onClearFiles.isEmpty&&i&&i("success",n),this.onClearFiles.fire(this,{question:e,name:t,value:n,fileName:r,callback:i})},t.prototype.updateChoicesFromServer=function(e,t,n){var r={question:e,choices:t,serverResult:n};return this.onLoadChoicesFromServer.fire(this,r),r.choices},t.prototype.createSurveyService=function(){return new d.dxSurveyService},t.prototype.uploadFilesCore=function(e,t,n){var r=this,i=[];t.forEach((function(e){n&&n("uploading",e),r.createSurveyService().sendFile(r.surveyPostId,e,(function(r,o){r?(i.push({content:o,file:e}),i.length===t.length&&n&&n("success",i)):n&&n("error",{response:o,file:e})}))}))},t.prototype.getPage=function(e){return this.pages[e]},t.prototype.addPage=function(e,t){void 0===t&&(t=-1),null!=e&&(t<0||t>=this.pages.length?this.pages.push(e):this.pages.splice(t,0,e))},t.prototype.addNewPage=function(e,t){void 0===e&&(e=null),void 0===t&&(t=-1);var n=this.createNewPage(e);return this.addPage(n,t),n},t.prototype.removePage=function(e){var t=this.pages.indexOf(e);t<0||(this.pages.splice(t,1),this.currentPageValue==e&&(this.currentPage=this.pages.length>0?this.pages[0]:null))},t.prototype.getQuestionByName=function(e,t){if(void 0===t&&(t=!1),!e)return null;t&&(e=e.toLowerCase());var n=(t?this.questionHashes.namesInsensitive:this.questionHashes.names)[e];return n?n[0]:null},t.prototype.getQuestionByValueName=function(e,t){void 0===t&&(t=!1);var n=this.getQuestionsByValueName(e,t);return n?n[0]:null},t.prototype.getQuestionsByValueName=function(e,t){void 0===t&&(t=!1);var n=(t?this.questionHashes.valueNamesInsensitive:this.questionHashes.valueNames)[e];return n||null},t.prototype.getCalculatedValueByName=function(e){for(var t=0;t<this.calculatedValues.length;t++)if(e==this.calculatedValues[t].name)return this.calculatedValues[t];return null},t.prototype.getQuestionsByNames=function(e,t){void 0===t&&(t=!1);var n=[];if(!e)return n;for(var r=0;r<e.length;r++)if(e[r]){var i=this.getQuestionByName(e[r],t);i&&n.push(i)}return n},t.prototype.getPageByElement=function(e){for(var t=0;t<this.pages.length;t++){var n=this.pages[t];if(n.containsElement(e))return n}return null},t.prototype.getPageByQuestion=function(e){return this.getPageByElement(e)},t.prototype.getPageByName=function(e){for(var t=0;t<this.pages.length;t++)if(this.pages[t].name==e)return this.pages[t];return null},t.prototype.getPagesByNames=function(e){var t=[];if(!e)return t;for(var n=0;n<e.length;n++)if(e[n]){var r=this.getPageByName(e[n]);r&&t.push(r)}return t},t.prototype.getAllQuestions=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);for(var n=new Array,r=0;r<this.pages.length;r++)this.pages[r].addQuestionsToList(n,e,t);return n},t.prototype.getQuizQuestions=function(){for(var e=new Array,t=this.firstPageIsStarted?1:0;t<this.pages.length;t++)if(this.pages[t].isVisible)for(var n=this.pages[t].questions,r=0;r<n.length;r++){var i=n[r];i.quizQuestionCount>0&&e.push(i)}return e},t.prototype.getPanelByName=function(e,t){void 0===t&&(t=!1);var n=this.getAllPanels();t&&(e=e.toLowerCase());for(var r=0;r<n.length;r++){var i=n[r].name;if(t&&(i=i.toLowerCase()),i==e)return n[r]}return null},t.prototype.getAllPanels=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);for(var n=new Array,r=0;r<this.pages.length;r++)this.pages[r].addPanelsIntoList(n,e,t);return n},t.prototype.createNewPage=function(e){return new u.PageModel(e)},t.prototype.questionOnValueChanging=function(e,t){if(this.onValueChanging.isEmpty)return t;var n={name:e,question:this.getQuestionByValueName(e),value:this.getUnbindValue(t),oldValue:this.getValue(e)};return this.onValueChanging.fire(this,n),n.value},t.prototype.updateQuestionValue=function(e,t){if(!this.isLoadingFromJson){var n=this.getQuestionsByValueName(e);if(n)for(var r=0;r<n.length;r++){var i=n[r].value;(i===t&&Array.isArray(i)&&this.editingObj||!this.isTwoValueEquals(i,t))&&n[r].updateValueFromSurvey(t)}}},t.prototype.checkQuestionErrorOnValueChanged=function(e){!this.isNavigationButtonPressed&&("onValueChanged"===this.checkErrorsMode||e.getAllErrors().length>0)&&this.checkQuestionErrorOnValueChangedCore(e)},t.prototype.checkQuestionErrorOnValueChangedCore=function(e){var t=e.getAllErrors().length,n=e.hasErrors(!0,{isOnValueChanged:!this.isValidateOnValueChanging});return e.page&&(t>0||e.getAllErrors().length>0)&&this.fireValidatedErrorsOnPage(e.page),n},t.prototype.checkErrorsOnValueChanging=function(e,t){if(this.isLoadingFromJson)return!1;var n=this.getQuestionsByValueName(e);if(!n)return!1;for(var r=!1,i=0;i<n.length;i++){var o=n[i];this.isTwoValueEquals(o.valueForSurvey,t)||(o.value=t),this.checkQuestionErrorOnValueChangedCore(o)&&(r=!0),r=r||o.errors.length>0}return r},t.prototype.notifyQuestionOnValueChanged=function(e,t){if(!this.isLoadingFromJson){var n=this.getQuestionsByValueName(e);if(n)for(var r=0;r<n.length;r++){var i=n[r];this.checkQuestionErrorOnValueChanged(i),i.onSurveyValueChanged(t),this.onValueChanged.fire(this,{name:e,question:i,value:t})}else this.onValueChanged.fire(this,{name:e,question:null,value:t});if(!this.isDisposed){for(r=0;r<this.pages.length;r++)this.pages[r].checkBindings(e,t);this.notifyElementsOnAnyValueOrVariableChanged(e)}}},t.prototype.notifyElementsOnAnyValueOrVariableChanged=function(e){if("processing"!==this.isEndLoadingFromJson)if(this.isRunningConditions)this.conditionNotifyElementsOnAnyValueOrVariableChanged=!0;else{for(var t=0;t<this.pages.length;t++)this.pages[t].onAnyValueChanged(e);this.isEndLoadingFromJson||this.locStrsChanged()}},t.prototype.updateAllQuestionsValue=function(){for(var e=this.getAllQuestions(),t=0;t<e.length;t++){var n=e[t],r=n.getValueName();n.updateValueFromSurvey(this.getValue(r)),n.requireUpdateCommentValue&&n.updateCommentFromSurvey(this.getComment(r))}},t.prototype.notifyAllQuestionsOnValueChanged=function(){for(var e=this.getAllQuestions(),t=0;t<e.length;t++)e[t].onSurveyValueChanged(this.getValue(e[t].getValueName()))},t.prototype.checkOnPageTriggers=function(){for(var e=this.getCurrentPageQuestions(!0),t={},n=0;n<e.length;n++){var r=e[n].getValueName();t[r]=this.getValue(r)}this.addCalculatedValuesIntoFilteredValues(t),this.checkTriggers(t,!0)},t.prototype.getCurrentPageQuestions=function(e){void 0===e&&(e=!1);var t=[],n=this.currentPage;if(!n)return t;for(var r=0;r<n.questions.length;r++){var i=n.questions[r];(e||i.visible)&&i.name&&t.push(i)}return t},t.prototype.checkTriggers=function(e,t){if(!this.isCompleted&&0!=this.triggers.length)if(this.isTriggerIsRunning)for(var n in this.triggerValues=this.getFilteredValues(),e)this.triggerKeys[n]=e[n];else{this.isTriggerIsRunning=!0,this.triggerKeys=e,this.triggerValues=this.getFilteredValues();for(var r=this.getFilteredProperties(),i=0;i<this.triggers.length;i++){var o=this.triggers[i];o.isOnNextPage==t&&o.checkExpression(this.triggerKeys,this.triggerValues,r)}this.isTriggerIsRunning=!1}},t.prototype.doElementsOnLoad=function(){for(var e=0;e<this.pages.length;e++)this.pages[e].onSurveyLoad()},Object.defineProperty(t.prototype,"isRunningConditions",{get:function(){return!!this.conditionValues},enumerable:!1,configurable:!0}),t.prototype.runConditions=function(){if(!this.isCompleted&&"processing"!==this.isEndLoadingFromJson&&!this.isRunningConditions){this.conditionValues=this.getFilteredValues();var e=this.getFilteredProperties(),t=this.pages.indexOf(this.currentPageValue);this.runConditionsCore(e),this.checkIfNewPagesBecomeVisible(t),this.conditionValues=null,this.isValueChangedOnRunningCondition&&this.conditionRunnerCounter<b.settings.maximumConditionRunCountOnValueChanged?(this.isValueChangedOnRunningCondition=!1,this.conditionRunnerCounter++,this.runConditions()):(this.isValueChangedOnRunningCondition=!1,this.conditionRunnerCounter=0,this.conditionUpdateVisibleIndexes&&(this.conditionUpdateVisibleIndexes=!1,this.updateVisibleIndexes()),this.conditionNotifyElementsOnAnyValueOrVariableChanged&&(this.conditionNotifyElementsOnAnyValueOrVariableChanged=!1,this.notifyElementsOnAnyValueOrVariableChanged("")))}},t.prototype.runConditionOnValueChanged=function(e,t){this.isRunningConditions?(this.conditionValues[e]=t,this.isValueChangedOnRunningCondition=!0):this.runConditions()},t.prototype.runConditionsCore=function(e){for(var t=this.pages,n=0;n<this.calculatedValues.length;n++)this.calculatedValues[n].resetCalculation();for(n=0;n<this.calculatedValues.length;n++)this.calculatedValues[n].doCalculation(this.calculatedValues,this.conditionValues,e);for(n=0;n<t.length;n++)t[n].runCondition(this.conditionValues,e)},t.prototype.checkIfNewPagesBecomeVisible=function(e){var t=this.pages.indexOf(this.currentPageValue);if(!(t<=e+1))for(var n=e+1;n<t;n++)if(this.pages[n].isVisible){this.currentPage=this.pages[n];break}},t.prototype.sendResult=function(e,t,n){if(void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=!1),this.isEditMode&&(n&&this.onPartialSend&&this.onPartialSend.fire(this,null),!e&&this.surveyPostId&&(e=this.surveyPostId),e&&(t&&(this.clientId=t),!n||this.clientId))){var r=this;this.surveyShowDataSaving&&this.setCompletedState("saving",""),this.createSurveyService().sendResult(e,this.data,(function(e,t,n){r.surveyShowDataSaving&&(e?r.setCompletedState("success",""):r.setCompletedState("error",t)),r.onSendResult.fire(r,{success:e,response:t,request:n})}),this.clientId,n)}},t.prototype.getResult=function(e,t){var n=this;this.createSurveyService().getResult(e,t,(function(e,t,r,i){n.onGetResult.fire(n,{success:e,data:t,dataList:r,response:i})}))},t.prototype.loadSurveyFromService=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null),e&&(this.surveyId=e),t&&(this.clientId=t);var n=this;this.isLoading=!0,this.onLoadingSurveyFromService(),t?this.createSurveyService().getSurveyJsonAndIsCompleted(this.surveyId,this.clientId,(function(e,t,r,i){n.isLoading=!1,e&&(n.isCompletedBefore="completed"==r,n.loadSurveyFromServiceJson(t))})):this.createSurveyService().loadSurvey(this.surveyId,(function(e,t,r){n.isLoading=!1,e&&n.loadSurveyFromServiceJson(t)}))},t.prototype.loadSurveyFromServiceJson=function(e){e&&(this.fromJSON(e),this.notifyAllQuestionsOnValueChanged(),this.onLoadSurveyFromService(),this.onLoadedSurveyFromService.fire(this,{}))},t.prototype.onLoadingSurveyFromService=function(){},t.prototype.onLoadSurveyFromService=function(){},t.prototype.resetVisibleIndexes=function(){for(var e=this.getAllQuestions(!0),t=0;t<e.length;t++)e[t].setVisibleIndex(-1);this.updateVisibleIndexes()},t.prototype.updateVisibleIndexes=function(){if(!this.isLoadingFromJson&&!this.isEndLoadingFromJson)if(this.isRunningConditions&&this.onVisibleChanged.isEmpty&&this.onPageVisibleChanged.isEmpty)this.conditionUpdateVisibleIndexes=!0;else{if(this.updatePageVisibleIndexes(this.showPageNumbers),"onPage"==this.showQuestionNumbers)for(var e=this.visiblePages,t=0;t<e.length;t++)e[t].setVisibleIndex(0);else{var n="on"==this.showQuestionNumbers?0:-1;for(t=0;t<this.pages.length;t++)n+=this.pages[t].setVisibleIndex(n)}this.updateProgressText(!0)}},t.prototype.updatePageVisibleIndexes=function(e){for(var t=0,n=0;n<this.pages.length;n++){var r=this.pages[n].isVisible;this.pages[n].visibleIndex=r?t++:-1,this.pages[n].num=e&&r?this.pages[n].visibleIndex+1:-1}},t.prototype.fromJSON=function(e){if(e){this.questionHashesClear(),this.jsonErrors=null;var t=new o.JsonObject;t.toObject(e,this),t.errors.length>0&&(this.jsonErrors=t.errors)}},t.prototype.setJsonObject=function(e){this.fromJSON(e)},t.prototype.endLoadingFromJson=function(){this.isEndLoadingFromJson="processing",this.isStartedState=this.firstPageIsStarted,this.onQuestionsOnPageModeChanged("standard"),e.prototype.endLoadingFromJson.call(this),this.hasCookie&&this.doComplete(),this.doElementsOnLoad(),this.isEndLoadingFromJson="conditions",this.runConditions(),this.notifyElementsOnAnyValueOrVariableChanged(""),this.isEndLoadingFromJson=null,this.updateVisibleIndexes()},t.prototype.onBeforeCreating=function(){},t.prototype.onCreating=function(){},t.prototype.getProcessedTextValue=function(e){if(this.getProcessedTextValueCore(e),!this.onProcessTextValue.isEmpty){var t=this.isValueEmpty(e.value);this.onProcessTextValue.fire(this,e),e.isExists=e.isExists||t&&!this.isValueEmpty(e.value)}},t.prototype.getProcessedTextValueCore=function(e){var t=e.name.toLocaleLowerCase();if(-1===["no","require","title"].indexOf(t))if("pageno"!==t){if("pagecount"===t)return e.isExists=!0,void(e.value=this.visiblePageCount);if("locale"===t)return e.isExists=!0,void(e.value=this.locale?this.locale:h.surveyLocalization.defaultLocale);if("correctedanswers"===t||"correctedanswercount"===t)return e.isExists=!0,void(e.value=this.getCorrectedAnswerCount());if("incorrectedanswers"===t||"incorrectedanswercount"===t)return e.isExists=!0,void(e.value=this.getInCorrectedAnswerCount());if("questioncount"===t)return e.isExists=!0,void(e.value=this.getQuizQuestionCount());var n=this.getVariable(t);if(void 0!==n)return e.isExists=!0,void(e.value=n);var r=this.getFirstName(t);if(r){e.isExists=!0;var i=r.getValueName().toLowerCase();t=(t=i+t.substr(i.length)).toLocaleLowerCase();var o={};return o[i]=e.returnDisplayValue?r.getDisplayValue(!1,void 0):r.value,void(e.value=(new p.ProcessValue).getValue(t,o))}var a=this.getValue(e.name);void 0!==a&&(e.isExists=!0,e.value=a)}else{e.isExists=!0;var s=this.currentPage;e.value=null!=s?this.visiblePages.indexOf(s)+1:0}},t.prototype.getFirstName=function(e){var t;e=e.toLowerCase();do{t=this.getQuestionByValueName(e,!0),e=this.reduceFirstName(e)}while(!t&&e);return t},t.prototype.reduceFirstName=function(e){var t=e.lastIndexOf("."),n=e.lastIndexOf("[");if(t<0&&n<0)return"";var r=Math.max(t,n);return e.substr(0,r)},t.prototype.clearUnusedValues=function(){for(var e=this.getAllQuestions(),t=0;t<e.length;t++)e[t].clearUnusedValues();"none"!=this.clearInvisibleValues&&this.clearInvisibleQuestionValues()},t.prototype.hasVisibleQuestionByValueName=function(e){var t=this.getQuestionsByValueName(e);if(!t)return!1;for(var n=0;n<t.length;n++)if(t[n].isVisible)return!0;return!1},t.prototype.questionCountByValueName=function(e){var t=this.getQuestionsByValueName(e);return t?t.length:0},t.prototype.clearInvisibleQuestionValues=function(){for(var e=this.getAllQuestions(),t=0;t<e.length;t++)e[t].clearValueIfInvisible()},t.prototype.getVariable=function(e){if(!e)return null;e=e.toLowerCase();var t=this.variablesHash[e];return this.isValueEmpty(t)&&(e.indexOf(".")>-1||e.indexOf("[")>-1)&&(new p.ProcessValue).hasValue(e,this.variablesHash)?(new p.ProcessValue).getValue(e,this.variablesHash):t},t.prototype.setVariable=function(e,t){e&&(e=e.toLowerCase(),this.variablesHash[e]=t,this.notifyElementsOnAnyValueOrVariableChanged(e),this.runConditionOnValueChanged(e,t))},t.prototype.getVariableNames=function(){var e=[];for(var t in this.variablesHash)e.push(t);return e},t.prototype.getUnbindValue=function(e){return this.editingObj?e:i.Helpers.getUnbindValue(e)},t.prototype.getValue=function(e){if(!e||0==e.length)return null;var t=this.getDataValueCore(this.valuesHash,e);return this.getUnbindValue(t)},t.prototype.setValue=function(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=!0);var i=t;if(r&&(i=this.questionOnValueChanging(e,t)),(!this.isValidateOnValueChanging||!this.checkErrorsOnValueChanging(e,i))&&(this.editingObj||!this.isValueEqual(e,i)||!this.isTwoValueEquals(i,t))){var o=this.getValue(e);this.isValueEmpty(i)?this.deleteDataValueCore(this.valuesHash,e):(i=this.getUnbindValue(i),this.setDataValueCore(this.valuesHash,e,i)),this.updateOnSetValue(e,i,o,n,r)}},t.prototype.updateOnSetValue=function(e,t,n,r,i){if(void 0===r&&(r=!1),void 0===i&&(i=!0),this.updateQuestionValue(e,t),!0!==r&&!this.isDisposed){var o={};o[e]={newValue:t,oldValue:n},this.runConditionOnValueChanged(e,t),this.checkTriggers(o,!1),i&&this.notifyQuestionOnValueChanged(e,t),"text"!==r&&this.tryGoNextPageAutomatic(e),this.updateProgressText(!0)}},t.prototype.isValueEqual=function(e,t){""!==t&&void 0!==t||(t=null);var n=this.getValue(e);return""!==n&&void 0!==n||(n=null),null===t||null===n?t===n:this.isTwoValueEquals(t,n)},t.prototype.doOnPageAdded=function(e){e.setSurveyImpl(this),e.name||(e.name=this.generateNewName(this.pages,"page")),this.questionHashesPanelAdded(e),this.updateVisibleIndexes(),this.isDesignMode&&this.updateProgressText();var t={page:e};this.onPageAdded.fire(this,t)},t.prototype.doOnPageRemoved=function(e){e.setSurveyImpl(null),this.updateVisibleIndexes(),this.isDesignMode&&this.updateProgressText(),this.updateLazyRenderingRowsOnRemovingElements()},t.prototype.generateNewName=function(e,t){for(var n={},r=0;r<e.length;r++)n[e[r].name]=!0;for(var i=1;n[t+i];)i++;return t+i},t.prototype.tryGoNextPageAutomatic=function(e){if(!this.isEndLoadingFromJson&&this.goNextPageAutomatic&&this.currentPage){var t=this.getQuestionByValueName(e);if(t&&(!t||t.visible&&t.supportGoNextPageAutomatic())&&(!t.hasErrors(!1)||t.supportGoNextPageError())){var n=this.getCurrentPageQuestions();if(!(n.indexOf(t)<0)){for(var r=0;r<n.length;r++)if(n[r].hasInput&&n[r].isEmpty())return;this.checkIsCurrentPageHasErrors(!1)||(this.isLastPage?!0===this.goNextPageAutomatic&&this.allowCompleteSurveyAutomatic&&this.completeLastPage():this.nextPage())}}}},t.prototype.getComment=function(e){var t=this.data[e+this.commentPrefix];return null==t&&(t=""),t},t.prototype.setComment=function(e,t,n){if(void 0===n&&(n=!1),t||(t=""),!i.Helpers.isTwoValueEquals(t,this.getComment(e))){var r=e+this.commentPrefix;this.isValueEmpty(t)?this.deleteDataValueCore(this.valuesHash,r):this.setDataValueCore(this.valuesHash,r,t);var o=this.getQuestionsByValueName(e);if(o)for(var a=0;a<o.length;a++)o[a].updateCommentFromSurvey(t),this.checkQuestionErrorOnValueChanged(o[a]);"text"!==n&&this.tryGoNextPageAutomatic(e);var s=this.getQuestionByName(e);s&&this.onValueChanged.fire(this,{name:r,question:s,value:t})}},t.prototype.clearValue=function(e){this.setValue(e,null),this.setComment(e,null)},Object.defineProperty(t.prototype,"clearValueOnDisableItems",{get:function(){return this.getPropertyValue("clearValueOnDisableItems",!1)},set:function(e){this.setPropertyValue("clearValueOnDisableItems",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isClearValueOnHidden",{get:function(){return"onHidden"==this.clearInvisibleValues||this.isClearValueOnHiddenContainer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isClearValueOnHiddenContainer",{get:function(){return"onHiddenContainer"==this.clearInvisibleValues&&!this.isShowingPreview&&!this.runningPages},enumerable:!1,configurable:!0}),t.prototype.questionVisibilityChanged=function(e,t){this.updateVisibleIndexes(),this.onVisibleChanged.fire(this,{question:e,name:e.name,visible:t})},t.prototype.pageVisibilityChanged=function(e,t){this.isLoadingFromJson||(t&&!this.currentPageValue&&(this.currentPageValue=this.currentPage),this.updateVisibleIndexes(),this.onPageVisibleChanged.fire(this,{page:e,visible:t}))},t.prototype.panelVisibilityChanged=function(e,t){this.updateVisibleIndexes(),this.onPanelVisibleChanged.fire(this,{panel:e,visible:t})},t.prototype.questionCreated=function(e){this.onQuestionCreated.fire(this,{question:e})},t.prototype.questionAdded=function(e,t,n,r){e.name||(e.name=this.generateNewName(this.getAllQuestions(!1,!0),"question")),e.page&&this.questionHashesAdded(e),this.updateVisibleIndexes(),this.onQuestionAdded.fire(this,{question:e,name:e.name,index:t,parentPanel:n,rootPanel:r})},t.prototype.questionRemoved=function(e){this.questionHashesRemoved(e,e.name,e.getValueName()),this.updateVisibleIndexes(),this.onQuestionRemoved.fire(this,{question:e,name:e.name}),this.updateLazyRenderingRowsOnRemovingElements()},t.prototype.questionRenamed=function(e,t,n){this.questionHashesRemoved(e,t,n),this.questionHashesAdded(e)},t.prototype.questionHashesClear=function(){this.questionHashes.names={},this.questionHashes.namesInsensitive={},this.questionHashes.valueNames={},this.questionHashes.valueNamesInsensitive={}},t.prototype.questionHashesPanelAdded=function(e){if(!this.isLoadingFromJson)for(var t=e.questions,n=0;n<t.length;n++)this.questionHashesAdded(t[n])},t.prototype.questionHashesAdded=function(e){this.questionHashAddedCore(this.questionHashes.names,e,e.name),this.questionHashAddedCore(this.questionHashes.namesInsensitive,e,e.name.toLowerCase()),this.questionHashAddedCore(this.questionHashes.valueNames,e,e.getValueName()),this.questionHashAddedCore(this.questionHashes.valueNamesInsensitive,e,e.getValueName().toLowerCase())},t.prototype.questionHashesRemoved=function(e,t,n){t&&(this.questionHashRemovedCore(this.questionHashes.names,e,t),this.questionHashRemovedCore(this.questionHashes.namesInsensitive,e,t.toLowerCase())),n&&(this.questionHashRemovedCore(this.questionHashes.valueNames,e,n),this.questionHashRemovedCore(this.questionHashes.valueNamesInsensitive,e,n.toLowerCase()))},t.prototype.questionHashAddedCore=function(e,t,n){var r;(r=e[n])?(r=e[n]).indexOf(t)<0&&r.push(t):e[n]=[t]},t.prototype.questionHashRemovedCore=function(e,t,n){var r=e[n];if(r){var i=r.indexOf(t);i>-1&&r.splice(i,1),0==r.length&&delete e[n]}},t.prototype.panelAdded=function(e,t,n,r){e.name||(e.name=this.generateNewName(this.getAllPanels(!1,!0),"panel")),this.questionHashesPanelAdded(e),this.updateVisibleIndexes(),this.onPanelAdded.fire(this,{panel:e,name:e.name,index:t,parentPanel:n,rootPanel:r})},t.prototype.panelRemoved=function(e){this.updateVisibleIndexes(),this.onPanelRemoved.fire(this,{panel:e,name:e.name}),this.updateLazyRenderingRowsOnRemovingElements()},t.prototype.validateQuestion=function(e){if(this.onValidateQuestion.isEmpty)return null;var t={name:e.name,question:e,value:e.value,error:null};return this.onValidateQuestion.fire(this,t),t.error?new f.CustomError(t.error,this):null},t.prototype.validatePanel=function(e){if(this.onValidatePanel.isEmpty)return null;var t={name:e.name,panel:e,error:null};return this.onValidatePanel.fire(this,t),t.error?new f.CustomError(t.error,this):null},t.prototype.processHtml=function(e){var t={html:e};return this.onProcessHtml.fire(this,t),this.processText(t.html,!0)},t.prototype.processText=function(e,t){return this.processTextEx(e,t,!1).text},t.prototype.processTextEx=function(e,t,n){var r={text:this.processTextCore(e,t,n),hasAllValuesOnLastRun:!0};return r.hasAllValuesOnLastRun=this.textPreProcessor.hasAllValuesOnLastRun,r},t.prototype.processTextCore=function(e,t,n){return void 0===n&&(n=!1),this.isDesignMode?e:this.textPreProcessor.process(e,t,n)},t.prototype.getSurveyMarkdownHtml=function(e,t,n){var r={element:e,text:t,name:n,html:null};return this.onTextMarkdown.fire(this,r),r.html},t.prototype.getCorrectedAnswerCount=function(){return this.getCorrectedAnswerCountCore(!0)},t.prototype.getQuizQuestionCount=function(){for(var e=this.getQuizQuestions(),t=0,n=0;n<e.length;n++)t+=e[n].quizQuestionCount;return t},t.prototype.getInCorrectedAnswerCount=function(){return this.getCorrectedAnswerCountCore(!1)},t.prototype.getCorrectedAnswerCountCore=function(e){for(var t=this.getQuizQuestions(),n=0,r={question:null,result:!1,correctAnswers:0,incorrectAnswers:0},i=0;i<t.length;i++){var o=t[i],a=o.quizQuestionCount;if(r.question=o,r.correctAnswers=o.correctAnswerCount,r.incorrectAnswers=a-r.correctAnswers,r.result=r.question.isAnswerCorrect(),this.onIsAnswerCorrect.fire(this,r),e){if(r.result||r.correctAnswers<a){var s=r.correctAnswers;0==s&&r.result&&(s=1),n+=s}}else(!r.result||r.incorrectAnswers<a)&&(n+=r.incorrectAnswers)}return n},t.prototype.getCorrectedAnswers=function(){return this.getCorrectedAnswerCount()},t.prototype.getInCorrectedAnswers=function(){return this.getInCorrectedAnswerCount()},Object.defineProperty(t.prototype,"showTimerPanel",{get:function(){return this.getPropertyValue("showTimerPanel","none")},set:function(e){this.setPropertyValue("showTimerPanel",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTimerPanelShowingOnTop",{get:function(){return this.isTimerStarted&&"top"==this.showTimerPanel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isTimerPanelShowingOnBottom",{get:function(){return this.isTimerStarted&&"bottom"==this.showTimerPanel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"showTimerPanelMode",{get:function(){return this.getPropertyValue("showTimerPanelMode","all")},set:function(e){this.setPropertyValue("showTimerPanelMode",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timerInfoText",{get:function(){var e={text:this.getTimerInfoText()};this.onTimerPanelInfoText.fire(this,e);var t=new m.LocalizableString(this,!0);return t.text=e.text,t.textOrHtml},enumerable:!1,configurable:!0}),t.prototype.getTimerInfoText=function(){var e=this.currentPage;if(!e)return"";var t=this.getDisplayTime(e.timeSpent),n=this.getDisplayTime(this.timeSpent),r=this.getPageMaxTimeToFinish(e),i=this.getDisplayTime(r),o=this.getDisplayTime(this.maxTimeToFinish);return"page"==this.showTimerPanelMode?this.getTimerInfoPageText(e,t,i):"survey"==this.showTimerPanelMode?this.getTimerInfoSurveyText(n,o):"all"==this.showTimerPanelMode?r<=0&&this.maxTimeToFinish<=0?this.getLocString("timerSpentAll").format(t,n):r>0&&this.maxTimeToFinish>0?this.getLocString("timerLimitAll").format(t,i,n,o):this.getTimerInfoPageText(e,t,i)+" "+this.getTimerInfoSurveyText(n,o):""},t.prototype.getTimerInfoPageText=function(e,t,n){return this.getPageMaxTimeToFinish(e)>0?this.getLocString("timerLimitPage").format(t,n):this.getLocString("timerSpentPage").format(t,n)},t.prototype.getTimerInfoSurveyText=function(e,t){return this.maxTimeToFinish>0?this.getLocString("timerLimitSurvey").format(e,t):this.getLocString("timerSpentSurvey").format(e,t)},t.prototype.getDisplayTime=function(e){var t=Math.floor(e/60),n=e%60,r="";return t>0&&(r+=t+" "+this.getLocString("timerMin")),r&&0==n?r:(r&&(r+=" "),r+n+" "+this.getLocString("timerSec"))},t.prototype.startTimer=function(){if(!this.isTimerStarted&&!this.isDesignMode){var e=this;this.timerFunc=function(){e.doTimer()},this.isTimerStarted=!0,y.SurveyTimer.instance.start(this.timerFunc)}},t.prototype.startTimerFromUI=function(){"none"!=this.showTimerPanel&&"running"===this.state&&this.startTimer()},t.prototype.stopTimer=function(){this.isTimerStarted&&(this.isTimerStarted=!1,y.SurveyTimer.instance.stop(this.timerFunc))},Object.defineProperty(t.prototype,"maxTimeToFinish",{get:function(){return this.getPropertyValue("maxTimeToFinish",0)},set:function(e){this.setPropertyValue("maxTimeToFinish",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxTimeToFinishPage",{get:function(){return this.getPropertyValue("maxTimeToFinishPage",0)},set:function(e){this.setPropertyValue("maxTimeToFinishPage",e)},enumerable:!1,configurable:!0}),t.prototype.getPageMaxTimeToFinish=function(e){return!e||e.maxTimeToFinish<0?0:e.maxTimeToFinish>0?e.maxTimeToFinish:this.maxTimeToFinishPage},t.prototype.doTimer=function(){var e=this.currentPage;if(e&&(e.timeSpent=e.timeSpent+1),this.timeSpent=this.timeSpent+1,this.onTimer.fire(this,{}),this.maxTimeToFinish>0&&this.maxTimeToFinish==this.timeSpent&&this.completeLastPage(),e){var t=this.getPageMaxTimeToFinish(e);t>0&&t==e.timeSpent&&(this.isLastPage?this.completeLastPage():this.nextPage())}},Object.defineProperty(t.prototype,"inSurvey",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getSurveyData=function(){return this},t.prototype.getSurvey=function(){return this},t.prototype.getTextProcessor=function(){return this},t.prototype.getObjects=function(e,t){var n=[];return Array.prototype.push.apply(n,this.getPagesByNames(e)),Array.prototype.push.apply(n,this.getQuestionsByNames(t)),n},t.prototype.setTriggerValue=function(e,t,n){if(e)if(n)this.setVariable(e,t);else{var r=this.getQuestionByName(e);if(r)r.value=t;else{var i=new p.ProcessValue,o=i.getFirstName(e);if(o==e)this.setValue(e,t);else{if(!this.getQuestionByName(o))return;var a=this.getUnbindValue(this.getFilteredValues());i.setValue(a,e,t),this.setValue(o,a[o])}}}},t.prototype.copyTriggerValue=function(e,t){if(e&&t){var n=(new p.ProcessValue).getValue(t,this.getFilteredValues());this.setTriggerValue(e,n,!1)}},t.prototype.focusQuestion=function(e){var t=this.getQuestionByName(e,!0);return!!(t&&t.isVisible&&t.page)&&(this.isFocusingQuestion=!0,this.currentPage=t.page,t.focus(),this.isFocusingQuestion=!1,!0)},t.prototype.getElementWrapperComponentName=function(e,n){return"logo-image"===n?"sv-logo-image":t.TemplateRendererComponentName},t.prototype.getRowWrapperComponentName=function(e){return t.TemplateRendererComponentName},t.prototype.getElementWrapperComponentData=function(e,t){return e},t.prototype.getRowWrapperComponentData=function(e){return e},t.prototype.getItemValueWrapperComponentName=function(e,n){return t.TemplateRendererComponentName},t.prototype.getItemValueWrapperComponentData=function(e,t){return e},t.prototype.getMatrixCellTemplateData=function(e){return e.question},t.prototype.searchText=function(e){e&&(e=e.toLowerCase());for(var t=[],n=0;n<this.pages.length;n++)this.pages[n].searchText(e,t);return t},t.prototype.dispose=function(){if(e.prototype.dispose.call(this),this.editingObj=null,this.pages){for(var t=0;t<this.pages.length;t++)this.pages[t].dispose();this.pages.splice(0,this.pages.length),this.currentPage=null}},t.TemplateRendererComponentName="sv-template-renderer",t.stylesManager=null,t.platform="unknown",t}(a.Base);o.Serializer.addClass("survey",[{name:"locale",choices:function(){return h.surveyLocalization.getLocales(!0)},onGetValue:function(e){return e.locale==h.surveyLocalization.defaultLocale?null:e.locale}},{name:"title",serializationProperty:"locTitle",dependsOn:"locale"},{name:"description:text",serializationProperty:"locDescription",dependsOn:"locale"},{name:"logo",serializationProperty:"locLogo"},{name:"logoWidth",default:"300px",minValue:0},{name:"logoHeight",default:"200px",minValue:0},{name:"logoFit",default:"contain",choices:["none","contain","cover","fill"]},{name:"logoPosition",default:"left",choices:["none","left","right","top","bottom"]},{name:"focusFirstQuestionAutomatic:boolean",default:!0},{name:"focusOnFirstError:boolean",default:!0},{name:"completedHtml:html",serializationProperty:"locCompletedHtml"},{name:"completedBeforeHtml:html",serializationProperty:"locCompletedBeforeHtml"},{name:"completedHtmlOnCondition:htmlconditions",className:"htmlconditionitem"},{name:"loadingHtml:html",serializationProperty:"locLoadingHtml"},{name:"pages:surveypages",className:"page"},{name:"questions",alternativeName:"elements",baseClassName:"question",visible:!1,isLightSerializable:!1,onGetValue:function(e){return null},onSetValue:function(e,t,n){var r=e.addNewPage("");n.toObject({questions:t},r)}},{name:"triggers:triggers",baseClassName:"surveytrigger",classNamePart:"trigger"},{name:"calculatedValues:calculatedvalues",className:"calculatedvalue"},{name:"surveyId",visible:!1},{name:"surveyPostId",visible:!1},{name:"surveyShowDataSaving:boolean",visible:!1},"cookieName","sendResultOnPageNext:boolean",{name:"showNavigationButtons",default:"bottom",choices:["none","top","bottom","both"]},{name:"showPrevButton:boolean",default:!0},{name:"showTitle:boolean",default:!0},{name:"showPageTitles:boolean",default:!0},{name:"showCompletedPage:boolean",default:!0},"navigateToUrl",{name:"navigateToUrlOnCondition:urlconditions",className:"urlconditionitem"},{name:"questionsOrder",default:"initial",choices:["initial","random"]},"showPageNumbers:boolean",{name:"showQuestionNumbers",default:"on",choices:["on","onPage","off"]},{name:"questionTitleLocation",default:"top",choices:["top","bottom","left"]},{name:"questionDescriptionLocation",default:"underTitle",choices:["underInput","underTitle"]},{name:"questionErrorLocation",default:"top",choices:["top","bottom"]},{name:"showProgressBar",default:"off",choices:["off","top","bottom","both"]},{name:"progressBarType",default:"pages",choices:["pages","questions","requiredQuestions","correctQuestions","buttons"]},{name:"mode",default:"edit",choices:["edit","display"]},{name:"storeOthersAsComment:boolean",default:!0},{name:"maxTextLength:number",default:0,minValue:0},{name:"maxOthersLength:number",default:0,minValue:0},"goNextPageAutomatic:boolean",{name:"clearInvisibleValues",default:"onComplete",choices:["none","onComplete","onHidden","onHiddenContainer"]},{name:"checkErrorsMode",default:"onNextPage",choices:["onNextPage","onValueChanged","onValueChanging","onComplete"]},{name:"textUpdateMode",default:"onBlur",choices:["onBlur","onTyping"]},{name:"startSurveyText",serializationProperty:"locStartSurveyText"},{name:"pagePrevText",serializationProperty:"locPagePrevText"},{name:"pageNextText",serializationProperty:"locPageNextText"},{name:"completeText",serializationProperty:"locCompleteText"},{name:"previewText",serializationProperty:"locPreviewText"},{name:"editText",serializationProperty:"locEditText"},{name:"requiredText",default:"*"},{name:"questionStartIndex",dependsOn:["showQuestionNumbers"],visibleIf:function(e){return!e||"off"!==e.showQuestionNumbers}},{name:"questionTitlePattern",default:"numTitleRequire",dependsOn:["questionStartIndex","requiredText"],choices:function(e){return e?e.getQuestionTitlePatternOptions():[]}},{name:"questionTitleTemplate",visible:!1,isSerializable:!1,serializationProperty:"locQuestionTitleTemplate"},{name:"firstPageIsStarted:boolean",default:!1},{name:"isSinglePage:boolean",default:!1,visible:!1,isSerializable:!1},{name:"questionsOnPageMode",default:"standard",choices:["singlePage","standard","questionPerPage"]},{name:"showPreviewBeforeComplete",default:"noPreview",choices:["noPreview","showAllQuestions","showAnsweredQuestions"]},{name:"maxTimeToFinish:number",default:0,minValue:0},{name:"maxTimeToFinishPage:number",default:0,minValue:0},{name:"showTimerPanel",default:"none",choices:["none","top","bottom"]},{name:"showTimerPanelMode",default:"all",choices:["all","page","survey"]}])},"./src/surveyProgressButtons.ts":
/*!**************************************!*\
  !*** ./src/surveyProgressButtons.ts ***!
  \**************************************/
/*! exports provided: SurveyProgressButtonsModel */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyProgressButtonsModel",(function(){return r}));var r=function(){function e(e){this.survey=e}return e.prototype.isListElementClickable=function(e){return!(this.survey.onServerValidateQuestions&&!this.survey.onServerValidateQuestions.isEmpty&&"onComplete"!==this.survey.checkErrorsMode)||e<=this.survey.currentPageNo+1},e.prototype.getListElementCss=function(e){if(!(e>=this.survey.visiblePages.length)){var t=this.survey.visiblePages[e].passed?this.survey.css.progressButtonsListElementPassed:"";return this.survey.currentPageNo===e&&(t+=""!==t?" ":"",t+=this.survey.css.progressButtonsListElementCurrent),this.isListElementClickable(e)||(t+=""!==t?" ":"",t+=this.survey.css.progressButtonsListElementNonClickable),t}},e.prototype.clickListElement=function(e){if(!this.survey.isDesignMode)if(e<this.survey.currentPageNo)this.survey.currentPageNo=e;else if(e>this.survey.currentPageNo)for(var t=this.survey.currentPageNo;t<e&&this.survey.nextPage();t++);},e}()},"./src/surveyStrings.ts":
/*!******************************!*\
  !*** ./src/surveyStrings.ts ***!
  \******************************/
/*! exports provided: surveyLocalization, surveyStrings */function(e,t,n){"use strict";n.r(t),n.d(t,"surveyLocalization",(function(){return i})),n.d(t,"surveyStrings",(function(){return o}));var r=n(/*! ./localization/english */"./src/localization/english.ts"),i={currentLocaleValue:"",defaultLocaleValue:"en",locales:{},localeNames:{},supportedLocales:[],get currentLocale(){return this.currentLocaleValue===this.defaultLocaleValue?"":this.currentLocaleValue},set currentLocale(e){"cz"===e&&(e="cs"),this.currentLocaleValue=e},get defaultLocale(){return this.defaultLocaleValue},set defaultLocale(e){"cz"===e&&(e="cs"),this.defaultLocaleValue=e},getLocaleStrings:function(e){return this.locales[e]},getCurrentStrings:function(){var e=this.currentLocale?this.locales[this.currentLocale]:this.locales[this.defaultLocale];return e||(e=this.locales[this.defaultLocale]),e},getString:function(e){var t=this.getCurrentStrings();t[e]||(t=this.locales[this.defaultLocale]);var n=t[e];return void 0===n&&(n=this.locales.en[e]),n},getLocales:function(e){void 0===e&&(e=!1);var t=[];t.push("");var n=this.locales;if(this.supportedLocales&&this.supportedLocales.length>0){n={};for(var r=0;r<this.supportedLocales.length;r++)n[this.supportedLocales[r]]=!0}for(var o in n)e&&o==this.defaultLocale||t.push(o);var a=function(e){if(!e)return"";var t=i.localeNames[e];return t||(t=e),t.toLowerCase()};return t.sort((function(e,t){var n=a(e),r=a(t);return n===r?0:n<r?-1:1})),t}},o=r.englishStrings;i.locales.en=r.englishStrings,i.localeNames.en="english"},"./src/surveyWindow.ts":
/*!*****************************!*\
  !*** ./src/surveyWindow.ts ***!
  \*****************************/
/*! exports provided: SurveyWindowModel */function(e,t,n){"use strict";n.r(t),n.d(t,"SurveyWindowModel",(function(){return s}));var r,i=n(/*! ./base */"./src/base.ts"),o=n(/*! ./survey */"./src/survey.ts"),a=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e){function t(t,n){void 0===n&&(n=null);var r=e.call(this)||this;r.closeOnCompleteTimeout=0,r.surveyValue=n||r.createSurvey(t),r.surveyValue.showTitle=!1,"undefined"!=typeof document&&(r.windowElement=document.createElement("div"));var i=r;return r.survey.onComplete.add((function(e,t){i.onSurveyComplete()})),r}return a(t,e),t.prototype.getType=function(){return"window"},Object.defineProperty(t.prototype,"survey",{get:function(){return this.surveyValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShowing",{get:function(){return this.getPropertyValue("isShowing",!1)},set:function(e){this.isShowing!=e&&(this.setPropertyValue("isShowing",e),this.showingChangedCallback&&this.showingChangedCallback())},enumerable:!1,configurable:!0}),t.prototype.show=function(){this.isShowing=!0},t.prototype.hide=function(){this.isShowing=!1},Object.defineProperty(t.prototype,"isExpanded",{get:function(){return this.getPropertyValue("isExpanded",!1)},set:function(e){this.setPropertyValue("isExpanded",e),!this.isLoadingFromJson&&this.expandedChangedCallback&&this.expandedChangedCallback()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this.survey.title},set:function(e){this.survey.title=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locTitle",{get:function(){return this.survey.locTitle},enumerable:!1,configurable:!0}),t.prototype.expand=function(){this.expandcollapse(!0)},t.prototype.collapse=function(){this.expandcollapse(!1)},t.prototype.createSurvey=function(e){return new o.SurveyModel(e)},t.prototype.expandcollapse=function(e){this.isExpanded=e},t.prototype.onSurveyComplete=function(){if(!(this.closeOnCompleteTimeout<0))if(0==this.closeOnCompleteTimeout)this.closeWindowOnComplete();else{var e=this,t=null;t="undefined"!=typeof window?window.setInterval((function(){e.closeWindowOnComplete(),"undefined"!=typeof window&&window.clearInterval(t)}),1e3*this.closeOnCompleteTimeout):0}},t.prototype.closeWindowOnComplete=function(){this.closeWindowOnCompleteCallback&&this.closeWindowOnCompleteCallback()},t.surveyElementName="windowSurveyJS",t}(i.Base)},"./src/surveytimer.ts":
/*!****************************!*\
  !*** ./src/surveytimer.ts ***!
  \****************************/
/*! exports provided: surveyTimerFunctions, SurveyTimer */function(e,t,n){"use strict";n.r(t),n.d(t,"surveyTimerFunctions",(function(){return i})),n.d(t,"SurveyTimer",(function(){return o}));var r=n(/*! ./base */"./src/base.ts"),i={setTimeout:function(e){return"undefined"==typeof window?0:window.setTimeout(e,1e3)},clearTimeout:function(e){"undefined"!=typeof window&&window.clearTimeout(e)}},o=function(){function e(){this.listenerCounter=0,this.timerId=-1,this.onTimer=new r.Event}return Object.defineProperty(e,"instance",{get:function(){return e.instanceValue||(e.instanceValue=new e),e.instanceValue},enumerable:!1,configurable:!0}),e.prototype.start=function(e){var t=this;void 0===e&&(e=null),e&&this.onTimer.add(e),this.timerId<0&&(this.timerId=i.setTimeout((function(){t.doTimer()}))),this.listenerCounter++},e.prototype.stop=function(e){void 0===e&&(e=null),e&&this.onTimer.remove(e),this.listenerCounter--,0==this.listenerCounter&&this.timerId>-1&&(i.clearTimeout(this.timerId),this.timerId=-1)},e.prototype.doTimer=function(){var e=this;this.timerId<0||(this.onTimer.fire(this,{}),this.timerId=i.setTimeout((function(){e.doTimer()})))},e.instanceValue=null,e}()},"./src/template-renderer.ts":
/*!**********************************!*\
  !*** ./src/template-renderer.ts ***!
  \**********************************/
/*! no exports provided */function(e,t,n){"use strict";n.r(t)},"./src/textPreProcessor.ts":
/*!*********************************!*\
  !*** ./src/textPreProcessor.ts ***!
  \*********************************/
/*! exports provided: TextPreProcessorItem, TextPreProcessorValue, TextPreProcessor, QuestionTextProcessor */function(e,t,n){"use strict";n.r(t),n.d(t,"TextPreProcessorItem",(function(){return o})),n.d(t,"TextPreProcessorValue",(function(){return a})),n.d(t,"TextPreProcessor",(function(){return s})),n.d(t,"QuestionTextProcessor",(function(){return l}));var r=n(/*! ./helpers */"./src/helpers.ts"),i=n(/*! ./conditionProcessValue */"./src/conditionProcessValue.ts"),o=function(){},a=function(e,t){this.name=e,this.returnDisplayValue=t,this.isExists=!1,this.canProcess=!0},s=function(){function e(){}return e.prototype.process=function(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!1),this.hasAllValuesOnLastRunValue=!0,!e)return e;if(!this.onProcess)return e;for(var i=this.getItems(e),o=i.length-1;o>=0;o--){var s=i[o],l=this.getName(e.substring(s.start+1,s.end));if(l){var u=new a(l,t);if(this.onProcess(u),u.isExists){r.Helpers.isValueEmpty(u.value)&&(this.hasAllValuesOnLastRunValue=!1);var c=r.Helpers.isValueEmpty(u.value)?"":u.value;n&&(c=encodeURIComponent(c)),e=e.substr(0,s.start)+c+e.substr(s.end+1)}else u.canProcess&&(this.hasAllValuesOnLastRunValue=!1)}}return e},e.prototype.processValue=function(e,t){var n=new a(e,t);return this.onProcess&&this.onProcess(n),n},Object.defineProperty(e.prototype,"hasAllValuesOnLastRun",{get:function(){return!!this.hasAllValuesOnLastRunValue},enumerable:!1,configurable:!0}),e.prototype.getItems=function(e){for(var t=[],n=e.length,r=-1,i="",a=0;a<n;a++)if("{"==(i=e[a])&&(r=a),"}"==i){if(r>-1){var s=new o;s.start=r,s.end=a,t.push(s)}r=-1}return t},e.prototype.getName=function(e){if(e)return e.trim()},e}(),l=function(){function e(e){var t=this;this.variableName=e,this.textPreProcessor=new s,this.textPreProcessor.onProcess=function(e){t.getProcessedTextValue(e)}}return e.prototype.processValue=function(e,t){return this.textPreProcessor.processValue(e,t)},Object.defineProperty(e.prototype,"survey",{get:function(){return null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"panel",{get:function(){return null},enumerable:!1,configurable:!0}),e.prototype.getValues=function(){return this.panel?this.panel.getValue():null},e.prototype.getQuestionByName=function(e){return this.panel?this.panel.getQuestionByValueName(e):null},e.prototype.onCustomProcessText=function(e){return!1},e.prototype.getProcessedTextValue=function(e){if(e&&!this.onCustomProcessText(e)){var t=(new i.ProcessValue).getFirstName(e.name);if(e.isExists=t==this.variableName,e.canProcess=e.isExists,e.canProcess){e.name=e.name.replace(this.variableName+".",""),t=(new i.ProcessValue).getFirstName(e.name);var n=this.getQuestionByName(t),r={};if(n)r[t]=e.returnDisplayValue?n.displayValue:n.value;else{var o=this.panel?this.getValues():null;o&&(r[t]=o[t])}e.value=(new i.ProcessValue).getValue(e.name,r)}}},e.prototype.processText=function(e,t){e=this.textPreProcessor.process(e,t);var n=this.survey;return n?n.processText(e,t):e},e.prototype.processTextEx=function(e,t){e=this.processText(e,t);var n=this.textPreProcessor.hasAllValuesOnLastRun,r={hasAllValuesOnLastRun:!0,text:e};return this.survey&&(r=this.survey.processTextEx(e,t,!1)),r.hasAllValuesOnLastRun=r.hasAllValuesOnLastRun&&n,r},e}()},"./src/trigger.ts":
/*!************************!*\
  !*** ./src/trigger.ts ***!
  \************************/
/*! exports provided: Trigger, SurveyTrigger, SurveyTriggerVisible, SurveyTriggerComplete, SurveyTriggerSetValue, SurveyTriggerSkip, SurveyTriggerRunExpression, SurveyTriggerCopyValue */function(e,t,n){"use strict";n.r(t),n.d(t,"Trigger",(function(){return d})),n.d(t,"SurveyTrigger",(function(){return h})),n.d(t,"SurveyTriggerVisible",(function(){return f})),n.d(t,"SurveyTriggerComplete",(function(){return m})),n.d(t,"SurveyTriggerSetValue",(function(){return g})),n.d(t,"SurveyTriggerSkip",(function(){return y})),n.d(t,"SurveyTriggerRunExpression",(function(){return v})),n.d(t,"SurveyTriggerCopyValue",(function(){return b}));var r,i=n(/*! ./helpers */"./src/helpers.ts"),o=n(/*! ./base */"./src/base.ts"),a=n(/*! ./jsonobject */"./src/jsonobject.ts"),s=n(/*! ./conditions */"./src/conditions.ts"),l=n(/*! ./expressions/expressions */"./src/expressions/expressions.ts"),u=n(/*! ./conditionProcessValue */"./src/conditionProcessValue.ts"),c=n(/*! ./settings */"./src/settings.ts"),p=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),d=function(e){function t(){var t=e.call(this)||this;t.usedNames=[];var n=t;return t.registerFunctionOnPropertiesValueChanged(["operator","value","name"],(function(){n.oldPropertiesChanged()})),t.registerFunctionOnPropertyValueChanged("expression",(function(){n.onExpressionChanged()})),t}return p(t,e),Object.defineProperty(t,"operators",{get:function(){return null!=t.operatorsValue||(t.operatorsValue={empty:function(e,t){return!e},notempty:function(e,t){return!!e},equal:function(e,t){return e==t},notequal:function(e,t){return e!=t},contains:function(e,t){return e&&e.indexOf&&e.indexOf(t)>-1},notcontains:function(e,t){return!e||!e.indexOf||-1==e.indexOf(t)},greater:function(e,t){return e>t},less:function(e,t){return e<t},greaterorequal:function(e,t){return e>=t},lessorequal:function(e,t){return e<=t}}),t.operatorsValue},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"triggerbase"},t.prototype.toString=function(){var e=this.getType().replace("trigger",""),t=this.expression?this.expression:this.buildExpression();return t&&(e+=", "+t),e},Object.defineProperty(t.prototype,"operator",{get:function(){return this.getPropertyValue("operator","equal")},set:function(e){e&&(e=e.toLowerCase(),t.operators[e]&&this.setPropertyValue("operator",e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.getPropertyValue("value",null)},set:function(e){this.setPropertyValue("value",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.getPropertyValue("name","")},set:function(e){this.setPropertyValue("name",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"expression",{get:function(){return this.getPropertyValue("expression","")},set:function(e){this.setPropertyValue("expression",e)},enumerable:!1,configurable:!0}),t.prototype.checkExpression=function(e,t,n){void 0===n&&(n=null),this.isCheckRequired(e)&&this.conditionRunner&&this.perform(t,n)},t.prototype.check=function(e){t.operators[this.operator](e,this.value)?this.onSuccess({},null):this.onFailure()},t.prototype.perform=function(e,t){var n=this;this.conditionRunner.onRunComplete=function(r){n.triggerResult(r,e,t)},this.conditionRunner.run(e,t)},t.prototype.triggerResult=function(e,t,n){e?this.onSuccess(t,n):this.onFailure()},t.prototype.onSuccess=function(e,t){},t.prototype.onFailure=function(){},t.prototype.endLoadingFromJson=function(){e.prototype.endLoadingFromJson.call(this),this.oldPropertiesChanged()},t.prototype.oldPropertiesChanged=function(){this.onExpressionChanged()},t.prototype.onExpressionChanged=function(){this.usedNames=[],this.hasFunction=!1,this.conditionRunner=null},t.prototype.buildExpression=function(){return this.name?this.isValueEmpty(this.value)&&this.isRequireValue?"":"{"+this.name+"} "+this.operator+" "+l.OperandMaker.toOperandString(this.value):""},t.prototype.isCheckRequired=function(e){if(!e)return!1;if(this.buildUsedNames(),!0===this.hasFunction)return!0;for(var t=new u.ProcessValue,n=0;n<this.usedNames.length;n++){var r=this.usedNames[n];if(e.hasOwnProperty(r))return!0;var o=t.getFirstName(r);if(e.hasOwnProperty(o)){if(r==o)return!0;var a=e[o];if(null!=a){if(!a.hasOwnProperty("oldValue")||!a.hasOwnProperty("newValue"))return!0;var s={};s[o]=a.oldValue;var l=t.getValue(r,s);s[o]=a.newValue;var c=t.getValue(r,s);return!i.Helpers.isTwoValueEquals(l,c)}}}return!1},t.prototype.buildUsedNames=function(){if(!this.conditionRunner){var e=this.expression;e||(e=this.buildExpression()),e&&(this.conditionRunner=new s.ConditionRunner(e),this.hasFunction=this.conditionRunner.hasFunction(),this.usedNames=this.conditionRunner.getVariables())}},Object.defineProperty(t.prototype,"isRequireValue",{get:function(){return"empty"!==this.operator&&"notempty"!=this.operator},enumerable:!1,configurable:!0}),t.operatorsValue=null,t}(o.Base),h=function(e){function t(){var t=e.call(this)||this;return t.ownerValue=null,t}return p(t,e),Object.defineProperty(t.prototype,"owner",{get:function(){return this.ownerValue},enumerable:!1,configurable:!0}),t.prototype.setOwner=function(e){this.ownerValue=e},t.prototype.getSurvey=function(e){return void 0===e&&(e=!1),this.owner&&this.owner.getSurvey?this.owner.getSurvey():null},Object.defineProperty(t.prototype,"isOnNextPage",{get:function(){return!1},enumerable:!1,configurable:!0}),t}(d),f=function(e){function t(){var t=e.call(this)||this;return t.pages=[],t.questions=[],t}return p(t,e),t.prototype.getType=function(){return"visibletrigger"},t.prototype.onSuccess=function(e,t){this.onTrigger(this.onItemSuccess)},t.prototype.onFailure=function(){this.onTrigger(this.onItemFailure)},t.prototype.onTrigger=function(e){if(this.owner)for(var t=this.owner.getObjects(this.pages,this.questions),n=0;n<t.length;n++)e(t[n])},t.prototype.onItemSuccess=function(e){e.visible=!0},t.prototype.onItemFailure=function(e){e.visible=!1},t}(h),m=function(e){function t(){return e.call(this)||this}return p(t,e),t.prototype.getType=function(){return"completetrigger"},Object.defineProperty(t.prototype,"isOnNextPage",{get:function(){return!c.settings.executeCompleteTriggerOnValueChanged},enumerable:!1,configurable:!0}),t.prototype.onSuccess=function(e,t){this.owner&&this.owner.setCompleted()},t}(h),g=function(e){function t(){return e.call(this)||this}return p(t,e),t.prototype.getType=function(){return"setvaluetrigger"},Object.defineProperty(t.prototype,"setToName",{get:function(){return this.getPropertyValue("setToName","")},set:function(e){this.setPropertyValue("setToName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setValue",{get:function(){return this.getPropertyValue("setValue")},set:function(e){this.setPropertyValue("setValue",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isVariable",{get:function(){return this.getPropertyValue("isVariable",!1)},set:function(e){this.setPropertyValue("isVariable",e)},enumerable:!1,configurable:!0}),t.prototype.onSuccess=function(e,t){this.setToName&&this.owner&&this.owner.setTriggerValue(this.setToName,this.setValue,this.isVariable)},t}(h),y=function(e){function t(){return e.call(this)||this}return p(t,e),t.prototype.getType=function(){return"skiptrigger"},Object.defineProperty(t.prototype,"gotoName",{get:function(){return this.getPropertyValue("gotoName","")},set:function(e){this.setPropertyValue("gotoName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isOnNextPage",{get:function(){return!c.settings.executeSkipTriggerOnValueChanged},enumerable:!1,configurable:!0}),t.prototype.onSuccess=function(e,t){this.gotoName&&this.owner&&this.owner.focusQuestion(this.gotoName)},t}(h),v=function(e){function t(){return e.call(this)||this}return p(t,e),t.prototype.getType=function(){return"runexpressiontrigger"},Object.defineProperty(t.prototype,"setToName",{get:function(){return this.getPropertyValue("setToName","")},set:function(e){this.setPropertyValue("setToName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"runExpression",{get:function(){return this.getPropertyValue("runExpression","")},set:function(e){this.setPropertyValue("runExpression",e)},enumerable:!1,configurable:!0}),t.prototype.onSuccess=function(e,t){var n=this;if(this.owner&&this.runExpression){var r=new s.ExpressionRunner(this.runExpression);r.canRun&&(r.onRunComplete=function(e){n.onCompleteRunExpression(e)},r.run(e,t))}},t.prototype.onCompleteRunExpression=function(e){this.setToName&&void 0!==e&&this.owner.setTriggerValue(this.setToName,e,!1)},t}(h),b=function(e){function t(){return e.call(this)||this}return p(t,e),Object.defineProperty(t.prototype,"setToName",{get:function(){return this.getPropertyValue("setToName","")},set:function(e){this.setPropertyValue("setToName",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fromName",{get:function(){return this.getPropertyValue("fromName","")},set:function(e){this.setPropertyValue("fromName",e)},enumerable:!1,configurable:!0}),t.prototype.getType=function(){return"copyvaluetrigger"},t.prototype.onSuccess=function(e,t){this.setToName&&this.owner&&this.owner.copyTriggerValue(this.setToName,this.fromName)},t}(h);a.Serializer.addClass("trigger",[{name:"operator",default:"equal",visible:!1},{name:"value",visible:!1},"expression:condition"]),a.Serializer.addClass("surveytrigger",[{name:"name",visible:!1}],null,"trigger"),a.Serializer.addClass("visibletrigger",["pages:pages","questions:questions"],(function(){return new f}),"surveytrigger"),a.Serializer.addClass("completetrigger",[],(function(){return new m}),"surveytrigger"),a.Serializer.addClass("setvaluetrigger",[{name:"!setToName:questionvalue"},{name:"setValue:triggervalue",dependsOn:"setToName",visibleIf:function(e){return!!e&&!!e.setToName}},{name:"isVariable:boolean",visible:!1}],(function(){return new g}),"surveytrigger"),a.Serializer.addClass("copyvaluetrigger",[{name:"!setToName:questionvalue"},{name:"!fromName:questionvalue"}],(function(){return new b}),"surveytrigger"),a.Serializer.addClass("skiptrigger",[{name:"!gotoName:question"}],(function(){return new y}),"surveytrigger"),a.Serializer.addClass("runexpressiontrigger",[{name:"setToName:questionvalue"},"runExpression:expression"],(function(){return new v}),"surveytrigger")},"./src/utils/is-mobile.ts":
/*!********************************!*\
  !*** ./src/utils/is-mobile.ts ***!
  \********************************/
/*! exports provided: IsMobile */function(e,t,n){"use strict";n.r(t),n.d(t,"IsMobile",(function(){return a}));var r,i=!1,o=null;"undefined"!=typeof navigator&&"undefined"!=typeof window&&navigator&&window&&(o=navigator.userAgent||navigator.vendor||window.opera),(r=o)&&(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4)))&&(i=!0);var a=i},"./src/utils/popup.ts":
/*!****************************!*\
  !*** ./src/utils/popup.ts ***!
  \****************************/
/*! exports provided: PopupUtils */function(e,t,n){"use strict";n.r(t),n.d(t,"PopupUtils",(function(){return r}));var r=function(){function e(){}return e.calculatePosition=function(e,t,n,r,i,o){if("center"==i)var a=(e.left+e.right-n)/2;else a="left"==i?e.left-n:e.right;if("middle"==r)var s=(e.top+e.bottom-t)/2;else s="top"==r?e.top-t:e.bottom;return o&&"center"!=i&&"middle"!=r&&("top"==r?s+=e.height:s-=e.height),{left:Math.round(a),top:Math.round(s)}},e.updateVerticalDimensions=function(e,t,n){var r;return e<0?r={height:t+e,top:0}:t+e>n&&(r={height:n-e,top:e}),r},e.updateVerticalPosition=function(e,t,n,r,i){var o=t-(e.top+(r?e.height:0)),a=t+e.bottom-(r?e.height:0)-i;return o>0&&a<=0&&"top"==n?n="bottom":a>0&&o<=0&&"bottom"==n?n="top":a>0&&o>0&&(n=o<a?"top":"bottom"),n},e.calculatePopupDirection=function(e,t){var n;return"center"==t&&"middle"!=e?n=e:"center"!=t&&(n=t),n},e.calculatePointerTarget=function(e,t,n,r,i){var o={};return"center"!=i?(o.top=e.top+e.height/2,o.left=e[i]):"middle"!=r&&(o.top=e[r],o.left=e.left+e.width/2),o.left=Math.round(o.left-n),o.top=Math.round(o.top-t),o},e}()},"./src/utils/responsivity-manager.ts":
/*!*******************************************!*\
  !*** ./src/utils/responsivity-manager.ts ***!
  \*******************************************/
/*! exports provided: ResponsivityManager, VerticalResponsivityManager */function(e,t,n){"use strict";n.r(t),n.d(t,"ResponsivityManager",(function(){return o})),n.d(t,"VerticalResponsivityManager",(function(){return a}));var r,i=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=function(){function e(e,t,n,r){var i=this;void 0===r&&(r=48),this.container=e,this.model=t,this.itemsSelector=n,this.dotsItemSize=r,this.resizeObserver=void 0,this.isInilized=!1,this.minDimensionConst=56,this.separatorSize=17,this.getComputedStyle=window.getComputedStyle.bind(window),this.resizeObserver=new ResizeObserver((function(e){return i.process()})),this.resizeObserver.observe(this.container.parentElement)}return Object.defineProperty(e.prototype,"items",{get:function(){return this.model.actions.filter((function(e){return!1!==e.visible}))},enumerable:!1,configurable:!0}),e.prototype.getDimensions=function(e){return{scroll:e.scrollWidth,offset:e.offsetWidth}},e.prototype.getAvailableSpace=function(){var e=this.getComputedStyle(this.container),t=this.container.offsetWidth;return"border-box"===e.boxSizing&&(t-=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)),t},e.prototype.calcItemSize=function(e){return e.offsetWidth},e.prototype.calcItemsSizes=function(){var e=this,t=this.model.actions;this.container.querySelectorAll(this.itemsSelector).forEach((function(n,r){var i=t[r];i.maxDimension=e.calcItemSize(n),i.minDimension=i.canShrink?e.minDimensionConst+(i.needSeparator?e.separatorSize:0):i.maxDimension}))},e.prototype.getVisibleItemsCount=function(e){for(var t=this.items.map((function(e){return e.minDimension})),n=0,r=0;r<t.length;r++)if((n+=t[r])>e)return r;return r},e.prototype.updateItemMode=function(e,t,n){for(var r=this.items,i=r.length-1;i>=0;i--)t<=e&&e<n?(n-=r[i].maxDimension-r[i].minDimension,r[i].mode="small"):r[i].mode="large"},e.prototype.fit=function(e){if(!(e<=0)){this.model.removeDotsButton();var t=0,n=0,r=this.items;r.forEach((function(e){t+=e.minDimension,n+=e.maxDimension})),e>=n?r.forEach((function(e){return e.mode="large"})):e<t?(r.forEach((function(e){return e.mode="small"})),this.model.showFirstN(this.getVisibleItemsCount(e-this.dotsItemSize))):this.updateItemMode(e,t,n)}},e.prototype.process=function(){this.isInilized||(this.calcItemsSizes(),this.isInilized=!0),this.fit(this.getAvailableSpace())},e.prototype.dispose=function(){this.resizeObserver.disconnect()},e}(),a=function(e){function t(t,n,r,i){var o=e.call(this,t,n,r,i)||this;return o.minDimensionConst=40,o}return i(t,e),t.prototype.getDimensions=function(){return{scroll:this.container.scrollHeight,offset:this.container.offsetHeight}},t.prototype.getAvailableSpace=function(){var e=this.getComputedStyle(this.container),t=this.container.offsetHeight;return"border-box"===e.boxSizing&&(t-=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)),t},t.prototype.calcItemSize=function(e){return e.offsetHeight},t}(o)},"./src/utils/utils.ts":
/*!****************************!*\
  !*** ./src/utils/utils.ts ***!
  \****************************/
/*! exports provided: unwrap, getSize, compareVersions, confirmAction, detectIEOrEdge, detectIEBrowser, loadFileFromBase64, isMobile, isElementVisible, findScrollableParent, scrollElementByChildId, createSvg, doKey2Click, getIconNameFromProxy */function(e,t,n){"use strict";n.r(t),n.d(t,"unwrap",(function(){return m})),n.d(t,"getSize",(function(){return g})),n.d(t,"compareVersions",(function(){return i})),n.d(t,"confirmAction",(function(){return o})),n.d(t,"detectIEOrEdge",(function(){return s})),n.d(t,"detectIEBrowser",(function(){return a})),n.d(t,"loadFileFromBase64",(function(){return l})),n.d(t,"isMobile",(function(){return u})),n.d(t,"isElementVisible",(function(){return c})),n.d(t,"findScrollableParent",(function(){return p})),n.d(t,"scrollElementByChildId",(function(){return d})),n.d(t,"createSvg",(function(){return f})),n.d(t,"doKey2Click",(function(){return y})),n.d(t,"getIconNameFromProxy",(function(){return h}));var r=n(/*! ./../settings */"./src/settings.ts");function i(e,t){for(var n=/(\.0+)+$/,r=e.replace(n,"").split("."),i=t.replace(n,"").split("."),o=Math.min(r.length,i.length),a=0;a<o;a++){var s=parseInt(r[a],10)-parseInt(i[a],10);if(s)return s}return r.length-i.length}function o(e){return r.settings&&r.settings.confirmActionFunc?r.settings.confirmActionFunc(e):confirm(e)}function a(){if("undefined"==typeof window)return!1;var e=window.navigator.userAgent,t=e.indexOf("MSIE "),n=e.indexOf("Trident/");return t>-1||n>-1}function s(){if("undefined"==typeof window)return!1;if(void 0===s.isIEOrEdge){var e=window.navigator.userAgent,t=e.indexOf("MSIE "),n=e.indexOf("Trident/"),r=e.indexOf("Edge/");s.isIEOrEdge=r>0||n>0||t>0}return s.isIEOrEdge}function l(e,t){try{for(var n=atob(e.split(",")[1]),r=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(n.length),o=new Uint8Array(i),a=0;a<n.length;a++)o[a]=n.charCodeAt(a);var s=new Blob([i],{type:r});"undefined"!=typeof window&&window.navigator&&window.navigator.msSaveBlob&&window.navigator.msSaveOrOpenBlob(s,t)}catch(e){}}function u(){return"undefined"!=typeof window&&void 0!==window.orientation}function c(e,t){if(void 0===t&&(t=0),"undefined"==typeof document)return!1;var n=e.getBoundingClientRect(),r=-t,i=Math.max(document.documentElement.clientHeight,window.innerHeight)+t,o=n.top,a=n.bottom;return Math.max(r,o)<=Math.min(i,a)}function p(e){return e?e.scrollHeight>e.clientHeight&&("scroll"===getComputedStyle(e).overflowY||"auto"===getComputedStyle(e).overflowY)?e:p(e.parentElement):document.documentElement}function d(e){if(document){var t=document.getElementById(e);if(t){var n=p(t);n&&n.dispatchEvent(new CustomEvent("scroll"))}}}function h(e){if(!e)return e;var t=r.settings.customIcons[e];return t||e}function f(e,t,n,r,i){i.style.width=(e||t||16)+"px",i.style.height=(e||n||16)+"px";var o=i.childNodes[0],a=h(r);o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#"+a)}function m(e){return"function"!=typeof e?e:e()}function g(e){if("number"==typeof e)return e+"px";if(e&&"string"==typeof e&&e.length>0){var t=e[e.length-1];if(t>="0"&&t<="9"||"."==t)try{return parseFloat(e)+"px"}catch(e){}}return e}function y(e){var t=e.target;if(t){var n=e.which||e.keyCode;13===n||32===n?t.click&&t.click():27===n&&t.blur&&t.blur()}}},"./src/validator.ts":
/*!**************************!*\
  !*** ./src/validator.ts ***!
  \**************************/
/*! exports provided: ValidatorResult, SurveyValidator, ValidatorRunner, NumericValidator, TextValidator, AnswerCountValidator, RegexValidator, EmailValidator, ExpressionValidator */function(e,t,n){"use strict";n.r(t),n.d(t,"ValidatorResult",(function(){return p})),n.d(t,"SurveyValidator",(function(){return d})),n.d(t,"ValidatorRunner",(function(){return h})),n.d(t,"NumericValidator",(function(){return f})),n.d(t,"TextValidator",(function(){return m})),n.d(t,"AnswerCountValidator",(function(){return g})),n.d(t,"RegexValidator",(function(){return y})),n.d(t,"EmailValidator",(function(){return v})),n.d(t,"ExpressionValidator",(function(){return b}));var r,i=n(/*! ./base */"./src/base.ts"),o=n(/*! ./error */"./src/error.ts"),a=n(/*! ./surveyStrings */"./src/surveyStrings.ts"),s=n(/*! ./jsonobject */"./src/jsonobject.ts"),l=n(/*! ./conditions */"./src/conditions.ts"),u=n(/*! ./helpers */"./src/helpers.ts"),c=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),p=function(e,t){void 0===t&&(t=null),this.value=e,this.error=t},d=function(e){function t(){var t=e.call(this)||this;return t.createLocalizableString("text",t,!0),t}return c(t,e),t.prototype.getSurvey=function(e){return void 0===e&&(e=!1),this.errorOwner&&this.errorOwner.getSurvey?this.errorOwner.getSurvey():null},Object.defineProperty(t.prototype,"text",{get:function(){return this.getLocalizableStringText("text")},set:function(e){this.setLocalizableStringText("text",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isValidateAllValues",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"locText",{get:function(){return this.getLocalizableString("text")},enumerable:!1,configurable:!0}),t.prototype.getErrorText=function(e){return this.text?this.text:this.getDefaultErrorText(e)},t.prototype.getDefaultErrorText=function(e){return""},t.prototype.validate=function(e,t,n,r){return void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),null},Object.defineProperty(t.prototype,"isRunning",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAsync",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.getLocale=function(){return this.errorOwner?this.errorOwner.getLocale():""},t.prototype.getMarkdownHtml=function(e,t){return this.errorOwner?this.errorOwner.getMarkdownHtml(e,t):null},t.prototype.getRenderer=function(e){return this.errorOwner?this.errorOwner.getRenderer(e):null},t.prototype.getProcessedText=function(e){return this.errorOwner?this.errorOwner.getProcessedText(e):e},t.prototype.createCustomError=function(e){return new o.CustomError(this.getErrorText(e),this.errorOwner)},t.prototype.toString=function(){var e=this.getType().replace("validator","");return this.text&&(e+=", "+this.text),e},t}(i.Base),h=function(){function e(){}return e.prototype.run=function(e){var t=this,n=[],r=null,i=null;this.prepareAsyncValidators();for(var o=[],a=e.getValidators(),s=0;s<a.length;s++){var l=a[s];!r&&l.isValidateAllValues&&(r=e.getDataFilteredValues(),i=e.getDataFilteredProperties()),l.isAsync&&(this.asyncValidators.push(l),l.onAsyncCompleted=function(e){if(e&&e.error&&o.push(e.error),t.onAsyncCompleted){for(var n=0;n<t.asyncValidators.length;n++)if(t.asyncValidators[n].isRunning)return;t.onAsyncCompleted(o)}})}for(a=e.getValidators(),s=0;s<a.length;s++){var u=(l=a[s]).validate(e.validatedValue,e.getValidatorTitle(),r,i);u&&u.error&&n.push(u.error)}return 0==this.asyncValidators.length&&this.onAsyncCompleted&&this.onAsyncCompleted([]),n},e.prototype.prepareAsyncValidators=function(){if(this.asyncValidators)for(var e=0;e<this.asyncValidators.length;e++)this.asyncValidators[e].onAsyncCompleted=null;this.asyncValidators=[]},e}(),f=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var r=e.call(this)||this;return r.minValue=t,r.maxValue=n,r}return c(t,e),t.prototype.getType=function(){return"numericvalidator"},t.prototype.validate=function(e,t,n,r){if(void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),this.isValueEmpty(e))return null;if(!u.Helpers.isNumber(e))return new p(null,new o.RequreNumericError(null,this.errorOwner));var i=new p(parseFloat(e));return null!==this.minValue&&this.minValue>i.value||null!==this.maxValue&&this.maxValue<i.value?(i.error=this.createCustomError(t),i):"number"==typeof e?null:i},t.prototype.getDefaultErrorText=function(e){var t=e||a.surveyLocalization.getString("value");return null!==this.minValue&&null!==this.maxValue?a.surveyLocalization.getString("numericMinMax").format(t,this.minValue,this.maxValue):null!==this.minValue?a.surveyLocalization.getString("numericMin").format(t,this.minValue):a.surveyLocalization.getString("numericMax").format(t,this.maxValue)},Object.defineProperty(t.prototype,"minValue",{get:function(){return this.getPropertyValue("minValue")},set:function(e){this.setPropertyValue("minValue",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.getPropertyValue("maxValue")},set:function(e){this.setPropertyValue("maxValue",e)},enumerable:!1,configurable:!0}),t}(d),m=function(e){function t(t,n,r){void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=!0);var i=e.call(this)||this;return i.minLength=t,i.maxLength=n,i.allowDigits=r,i}return c(t,e),t.prototype.getType=function(){return"textvalidator"},t.prototype.validate=function(e,t,n,r){return void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),this.isValueEmpty(e)?null:this.allowDigits||/^[A-Za-z\s]*$/.test(e)?this.minLength>0&&e.length<this.minLength||this.maxLength>0&&e.length>this.maxLength?new p(null,this.createCustomError(t)):null:new p(null,this.createCustomError(t))},t.prototype.getDefaultErrorText=function(e){return this.minLength>0&&this.maxLength>0?a.surveyLocalization.getString("textMinMaxLength").format(this.minLength,this.maxLength):this.minLength>0?a.surveyLocalization.getString("textMinLength").format(this.minLength):a.surveyLocalization.getString("textMaxLength").format(this.maxLength)},Object.defineProperty(t.prototype,"minLength",{get:function(){return this.getPropertyValue("minLength")},set:function(e){this.setPropertyValue("minLength",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxLength",{get:function(){return this.getPropertyValue("maxLength")},set:function(e){this.setPropertyValue("maxLength",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowDigits",{get:function(){return this.getPropertyValue("allowDigits",!0)},set:function(e){this.setPropertyValue("allowDigits",e)},enumerable:!1,configurable:!0}),t}(d),g=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var r=e.call(this)||this;return r.minCount=t,r.maxCount=n,r}return c(t,e),t.prototype.getType=function(){return"answercountvalidator"},t.prototype.validate=function(e,t,n,r){if(void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),null==e||e.constructor!=Array)return null;var i=e.length;return 0==i?null:this.minCount&&i<this.minCount?new p(null,this.createCustomError(a.surveyLocalization.getString("minSelectError").format(this.minCount))):this.maxCount&&i>this.maxCount?new p(null,this.createCustomError(a.surveyLocalization.getString("maxSelectError").format(this.maxCount))):null},t.prototype.getDefaultErrorText=function(e){return e},Object.defineProperty(t.prototype,"minCount",{get:function(){return this.getPropertyValue("minCount")},set:function(e){this.setPropertyValue("minCount",e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxCount",{get:function(){return this.getPropertyValue("maxCount")},set:function(e){this.setPropertyValue("maxCount",e)},enumerable:!1,configurable:!0}),t}(d),y=function(e){function t(t){void 0===t&&(t=null);var n=e.call(this)||this;return n.regex=t,n}return c(t,e),t.prototype.getType=function(){return"regexvalidator"},t.prototype.validate=function(e,t,n,r){if(void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),!this.regex||this.isValueEmpty(e))return null;var i=new RegExp(this.regex);if(Array.isArray(e))for(var o=0;o<e.length;o++){var a=this.hasError(i,e[o],t);if(a)return a}return this.hasError(i,e,t)},t.prototype.hasError=function(e,t,n){return e.test(t)?null:new p(t,this.createCustomError(n))},Object.defineProperty(t.prototype,"regex",{get:function(){return this.getPropertyValue("regex")},set:function(e){this.setPropertyValue("regex",e)},enumerable:!1,configurable:!0}),t}(d),v=function(e){function t(){var t=e.call(this)||this;return t.re=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()=[\]\.,;:\s@\"]+\.)+[^<>()=[\]\.,;:\s@\"]{2,})$/i,t}return c(t,e),t.prototype.getType=function(){return"emailvalidator"},t.prototype.validate=function(e,t,n,r){return void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),e?this.re.test(e)?null:new p(e,this.createCustomError(t)):null},t.prototype.getDefaultErrorText=function(e){return a.surveyLocalization.getString("invalidEmail")},t}(d),b=function(e){function t(t){void 0===t&&(t=null);var n=e.call(this)||this;return n.conditionRunner=null,n.isRunningValue=!1,n.expression=t,n}return c(t,e),t.prototype.getType=function(){return"expressionvalidator"},Object.defineProperty(t.prototype,"isValidateAllValues",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAsync",{get:function(){return!!this.ensureConditionRunner()&&this.conditionRunner.isAsync},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRunning",{get:function(){return this.isRunningValue},enumerable:!1,configurable:!0}),t.prototype.validate=function(e,t,n,r){var i=this;if(void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),!this.ensureConditionRunner())return null;this.conditionRunner.onRunComplete=function(n){i.isRunningValue=!1,i.onAsyncCompleted&&i.onAsyncCompleted(i.generateError(n,e,t))},this.isRunningValue=!0;var o=this.conditionRunner.run(n,r);return this.conditionRunner.isAsync?null:(this.isRunningValue=!1,this.generateError(o,e,t))},t.prototype.generateError=function(e,t,n){return e?null:new p(t,this.createCustomError(n))},t.prototype.getDefaultErrorText=function(e){return a.surveyLocalization.getString("invalidExpression").format(this.expression)},t.prototype.ensureConditionRunner=function(){return this.conditionRunner?(this.conditionRunner.expression=this.expression,!0):!!this.expression&&(this.conditionRunner=new l.ConditionRunner(this.expression),!0)},Object.defineProperty(t.prototype,"expression",{get:function(){return this.getPropertyValue("expression")},set:function(e){this.setPropertyValue("expression",e)},enumerable:!1,configurable:!0}),t}(d);s.Serializer.addClass("surveyvalidator",[{name:"text",serializationProperty:"locText"}]),s.Serializer.addClass("numericvalidator",["minValue:number","maxValue:number"],(function(){return new f}),"surveyvalidator"),s.Serializer.addClass("textvalidator",["minLength:number","maxLength:number","allowDigits:boolean"],(function(){return new m}),"surveyvalidator"),s.Serializer.addClass("answercountvalidator",["minCount:number","maxCount:number"],(function(){return new g}),"surveyvalidator"),s.Serializer.addClass("regexvalidator",["regex"],(function(){return new y}),"surveyvalidator"),s.Serializer.addClass("emailvalidator",[],(function(){return new v}),"surveyvalidator"),s.Serializer.addClass("expressionvalidator",["expression:condition"],(function(){return new b}),"surveyvalidator")},react:
/*!**************************************************************************************!*\
  !*** external {"root":"React","commonjs2":"react","commonjs":"react","amd":"react"} ***!
  \**************************************************************************************/
/*! no static exports found */function(t,n){t.exports=e},"react-dom":
/*!*****************************************************************************************************!*\
  !*** external {"root":"ReactDOM","commonjs2":"react-dom","commonjs":"react-dom","amd":"react-dom"} ***!
  \*****************************************************************************************************/
/*! no static exports found */function(e,n){e.exports=t}})},e.exports=r(n(0),n(22))},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,n.apply(this,arguments)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(31);function i(e,t){if(e){if("string"==typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));const r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i={};let o,a=0,s=0;function l(e){let t="";do{t=r[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function u(){const e=l(+new Date);return e!==o?(a=0,o=e):e+"."+l(a++)}for(;s<64;s++)i[r[s]]=s},,function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),l="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(l," */")),o=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(o).concat([i]).join("\n")}var a,s,l;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var l=[].concat(e[s]);r&&i[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),t.push(l))}},t}},function(e,t,n){var r,i,o={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),s=function(e){return document.querySelector(e)},l=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=s.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),u=null,c=0,p=[],d=n(87);function h(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=o[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(b(r.parts[a],t))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(b(r.parts[a],t));o[r.id]={id:r.id,refs:1,parts:s}}}}function f(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function m(e,t){var n=l(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=p[p.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),p.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=l(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,i)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=p.indexOf(e);t>=0&&p.splice(t,1)}function y(e){var t=document.createElement("style");return void 0===e.attrs.type&&(e.attrs.type="text/css"),v(t,e.attrs),m(e,t),t}function v(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function b(e,t){var n,r,i,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var a=c++;n=u||(u=y(t)),r=_.bind(null,n,a,!1),i=_.bind(null,n,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",v(t,e.attrs),m(e,t),t}(t),r=S.bind(null,n,t),i=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=y(t),r=C.bind(null,n),i=function(){g(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=f(e,t);return h(n,t),function(e){for(var r=[],i=0;i<n.length;i++){var a=n[i];(s=o[a.id]).refs--,r.push(s)}e&&h(f(e,t),t);for(i=0;i<r.length;i++){var s;if(0===(s=r[i]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete o[s.id]}}}};var x,w=(x=[],function(e,t){return x[e]=t,x.filter(Boolean).join("\n")});function _(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=w(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function C(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function S(e,t,n){var r=n.css,i=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(r=d(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=l(o),s=l(n(1));function l(e){return e&&e.__esModule?e:{default:e}}var u={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},c=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],p=function(e,t){t.style.fontSize=e.fontSize,t.style.fontFamily=e.fontFamily,t.style.fontWeight=e.fontWeight,t.style.fontStyle=e.fontStyle,t.style.letterSpacing=e.letterSpacing,t.style.textTransform=e.textTransform},d=!("undefined"==typeof window||!window.navigator)&&/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent),h=function(){return d?"_"+Math.random().toString(36).substr(2,12):void 0},f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.inputRef=function(e){n.input=e,"function"==typeof n.props.inputRef&&n.props.inputRef(e)},n.placeHolderSizerRef=function(e){n.placeHolderSizer=e},n.sizerRef=function(e){n.sizer=e},n.state={inputWidth:e.minWidth,inputId:e.id||h(),prevId:e.id},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.id;return n!==t.prevId?{inputId:n||h(),prevId:n}:null}}]),i(t,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"componentDidUpdate",value:function(e,t){t.inputWidth!==this.state.inputWidth&&"function"==typeof this.props.onAutosize&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(this.mounted&&window.getComputedStyle){var e=this.input&&window.getComputedStyle(this.input);e&&(p(e,this.sizer),this.placeHolderSizer&&p(e,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(this.mounted&&this.sizer&&void 0!==this.sizer.scrollWidth){var e=void 0;e=this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:this.sizer.scrollWidth+2,(e+="number"===this.props.type&&void 0===this.props.extraWidth?16:parseInt(this.props.extraWidth)||0)<this.props.minWidth&&(e=this.props.minWidth),e!==this.state.inputWidth&&this.setState({inputWidth:e})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var e=this.props.injectStyles;return d&&e?a.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var e=[this.props.defaultValue,this.props.value,""].reduce((function(e,t){return null!=e?e:t})),t=r({},this.props.style);t.display||(t.display="inline-block");var n=r({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),i=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(this.props,[]);return function(e){c.forEach((function(t){return delete e[t]}))}(i),i.className=this.props.inputClassName,i.id=this.state.inputId,i.style=n,a.default.createElement("div",{className:this.props.className,style:t},this.renderStyles(),a.default.createElement("input",r({},i,{ref:this.inputRef})),a.default.createElement("div",{ref:this.sizerRef,style:u},e),this.props.placeholder?a.default.createElement("div",{ref:this.placeHolderSizerRef,style:u},this.props.placeholder):null)}}]),t}(o.Component);f.propTypes={className:s.default.string,defaultValue:s.default.any,extraWidth:s.default.oneOfType([s.default.number,s.default.string]),id:s.default.string,injectStyles:s.default.bool,inputClassName:s.default.string,inputRef:s.default.func,inputStyle:s.default.object,minWidth:s.default.oneOfType([s.default.number,s.default.string]),onAutosize:s.default.func,onChange:s.default.func,placeholder:s.default.string,placeholderIsMinWidth:s.default.bool,style:s.default.object,value:s.default.any},f.defaultProps={minWidth:1,injectStyles:!0},t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sessionReducer=t.sessionService=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(74),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(75)),s=c(n(76)),l=n(77),u=c(n(78));function c(e){return e&&e.__esModule?e:{default:e}}var p=void 0;t.sessionService=function(){function e(t,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),p=this,e.setOptions(t,n),p}return i(e,null,[{key:"setOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.driver,i=t.validateSession,o=t.refreshOnCheckAuth,a=void 0!==o&&o,s=t.expires,l=void 0===s?360:s,u=t.redirectPath,c=void 0===u?"login":u,d=t.server,h=void 0!==d&&d;p.store=e,p.refreshOnCheckAuth=a,p.redirectPath=c,p.expires=l,p.driver=r,p.server=h,p.validateSession=i;var f={name:"redux-react-session"},m=n(79);r&&"COOKIES"!==r&&(f.driver=m[r]),p.storage=m.createInstance(f)}},{key:"initSessionService",value:function(t,n){return p=new e(t,n),e.refreshFromLocalStorage()}},{key:"initServerSession",value:function(t,n,i){p=new e(t,r({},i,{server:!0}));return e.saveFromClient(function(e){var t={},n=e.get("cookie");return n&&n.split(";").forEach((function(e){var n=e.split("=");n[0].trim()!==o.USER_SESSION&&n[0].trim()!==o.USER_DATA||(t[n[0].trim()]=JSON.parse(decodeURIComponent(n[1])))})),t}(n))}},{key:"saveFromClient",value:function(t){return new Promise((function(n,r){t[o.USER_SESSION]?e.saveSession(t[o.USER_SESSION]).then((function(){if(!t[o.USER_DATA])return n();e.saveUser(t[o.USER_DATA]).then((function(){return n()}))})):(p.store.dispatch((0,l.getSessionError)()),r("Session not found"))}))}},{key:"invalidateSession",value:function(){p.store.dispatch((0,l.invalidSession)()),e.deleteSession(),e.deleteUser()}},{key:"attemptLoadUser",value:function(){return p.store.dispatch((0,l.getSessionSuccess)()),e.loadUser().then((function(e){p.store.dispatch((0,l.getUserSessionSuccess)(e))})).catch((function(){p.store.dispatch((0,l.getUserSessionError)())}))}},{key:"refreshFromLocalStorage",value:function(){var t=this;return e.loadSession().then((function(e){if(p.validateSession){var n=p.validateSession(e);if((0,s.default)(n))return n.then((function(e){if(!e)throw new Error("Session is invalid");return t.attemptLoadUser()})).catch((function(){t.invalidateSession()}));if(!n)return void t.invalidateSession()}return t.attemptLoadUser()})).catch((function(){p.store.dispatch((0,l.getSessionError)())}))}},{key:"checkAuth",value:function(t,n,r){var i=p,o=i.refreshOnCheckAuth,a=i.store;e.loadSession().then((function(){o&&a.dispatch((0,l.getSessionSuccess)()),e.loadUser().then((function(e){o&&a.dispatch((0,l.getUserSessionSuccess)(e)),r()})).catch((function(){return r()}))})).catch((function(){o&&a.dispatch((0,l.getSessionError)()),o&&a.dispatch((0,l.getUserSessionError)()),n({pathname:p.redirectPath,state:{nextPathname:t.location.pathname}}),r()}))}},{key:"saveSession",value:function(e){return new Promise((function(t){p.server?(p[o.USER_SESSION]=e,p.store.dispatch((0,l.getSessionSuccess)()),t()):"COOKIES"===p.driver?(a.set(o.USER_SESSION,e,{expires:p.expires}),p.store.dispatch((0,l.getSessionSuccess)()),t()):p.storage.setItem(o.USER_SESSION,e).then((function(){p.store.dispatch((0,l.getSessionSuccess)()),t()})).catch((function(){a.set(o.USER_SESSION,e,{expires:p.expires}),p.store.dispatch((0,l.getSessionSuccess)()),t()}))}))}},{key:"loadSession",value:function(){return new Promise((function(e,t){if(p.server)p[o.USER_SESSION]?e(p[o.USER_SESSION]):t();else if("COOKIES"===p.driver){var n=a.getJSON(o.USER_SESSION);n?e(n):t("Session not found")}else p.storage.getItem(o.USER_SESSION).then((function(n){if(n)e(n);else{var r=a.getJSON(o.USER_SESSION);r?e(r):t("Session not found")}})).catch((function(e){return t(e)}))}))}},{key:"deleteSession",value:function(){return p.storage.removeItem(o.USER_SESSION).then((function(){p.store.dispatch((0,l.getSessionError)()),a.remove(o.USER_SESSION),delete p[o.USER_SESSION]}))}},{key:"saveUser",value:function(e){return new Promise((function(t){p.server?(p[o.USER_DATA]=e,p.store.dispatch((0,l.getUserSessionSuccess)(e)),t()):"COOKIES"===p.driver?(a.set(o.USER_DATA,e,{expires:p.expires}),p.store.dispatch((0,l.getUserSessionSuccess)(e)),t()):p.storage.setItem(o.USER_DATA,e).then((function(e){p.store.dispatch((0,l.getUserSessionSuccess)(e)),t()})).catch((function(){p.store.dispatch((0,l.getUserSessionSuccess)(e)),a.set(o.USER_DATA,e,{expires:p.expires}),t()}))}))}},{key:"loadUser",value:function(){return new Promise((function(e,t){if(p.server)p[o.USER_DATA]?e(p[o.USER_DATA]):t();else if("COOKIES"===p.driver){var n=a.getJSON(o.USER_DATA);n?e(n):t("User not found")}else p.storage.getItem(o.USER_DATA).then((function(n){if(n)e(n);else{var r=a.getJSON(o.USER_DATA);r?e(r):t("User not found")}})).catch((function(e){return t(e)}))}))}},{key:"deleteUser",value:function(){return p.storage.removeItem(o.USER_DATA).then((function(){p.store.dispatch((0,l.getUserSessionError)()),a.remove(o.USER_DATA),delete p[o.USER_DATA]}))}}]),e}(),t.sessionReducer=u.default},,,function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,l=a(e),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))i.call(n,c)&&(l[c]=n[c]);if(r){s=r(n);for(var p=0;p<s.length;p++)o.call(n,s[p])&&(l[s[p]]=n[s[p]])}}return l}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(44);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GET_SESSION_SUCCESS="@@redux-react-session/GET_SESSION_SUCCESS",t.GET_SESSION_ERROR="@@redux-react-session/GET_SESSION_ERROR",t.GET_USER_SESSION_SUCCESS="@@redux-react-session/GET_USER_SESSION_SUCCESS",t.GET_USER_SESSION_ERROR="@@redux-react-session/GET_USER_SESSION_ERROR",t.INVALID_SESSION="@@redux-react-session/INVALID_SESSION"},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=n=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),n(t)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){(function(n){var r,i,o;i=[],void 0===(o="function"==typeof(r=function(){"use strict";function t(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){s(r.response,t,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function i(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,a=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(e,n,a){var s=o.URL||o.webkitURL,l=document.createElement("a");n=n||e.name||"download",l.download=n,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?i(l):r(l.href)?t(e,n,a):i(l,l.target="_blank")):(l.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(l.href)}),4e4),setTimeout((function(){i(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,n,o){if(n=n||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,o),n);else if(r(e))t(e,n,o);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout((function(){i(a)}))}}:function(e,n,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,r);var s="application/octet-stream"===e.type,l=/constructor/i.test(o.HTMLElement)||o.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||s&&l||a)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},c.readAsDataURL(e)}else{var p=o.URL||o.webkitURL,d=p.createObjectURL(e);i?i.location=d:location.href=d,i=null,setTimeout((function(){p.revokeObjectURL(d)}),4e4)}});o.saveAs=s.saveAs=s,e.exports=s})?r.apply(t,i):r)||(e.exports=o)}).call(this,n(25))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var l,u=[],c=!1,p=-1;function d(){c&&l&&(c=!1,l.length?u=l.concat(u):p=-1,u.length&&h())}function h(){if(!c){var e=s(d);c=!0;for(var t=u.length;t;){for(l=u,u=[];++p<t;)l&&l[p].run();p=-1,t=u.length}l=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new f(e,t)),1!==u.length||c||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(88),i=n(89),o=n(90);function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return p(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=d(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|f(t,n),i=(e=s(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(l.isBuffer(t)){var n=0|h(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):d(e,t);if("Buffer"===t.type&&o(t.data))return d(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function p(e,t){if(c(t),e=s(e,t<0?0:0|h(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|h(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function f(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return j(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(e).length;default:if(r)return j(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return I(this,t,n);case"base64":return k(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:v(e,t,n,r,i);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,i){var o,a=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(o=n;o<s;o++)if(u(e,o)===u(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(n+l>s&&(n=s-l),o=n;o>=0;o--){for(var p=!0,d=0;d<l;d++)if(u(e,o+d)!==u(t,d)){p=!1;break}if(p)return o}return-1}function b(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function x(e,t,n,r){return $(j(t,e.length-n),e,n,r)}function w(e,t,n,r){return $(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function _(e,t,n,r){return w(e,t,n,r)}function C(e,t,n,r){return $(q(t),e,n,r)}function S(e,t,n,r){return $(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function k(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function E(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,l,u=e[i],c=null,p=u>239?4:u>223?3:u>191?2:1;if(i+p<=n)switch(p){case 1:u<128&&(c=u);break;case 2:128==(192&(o=e[i+1]))&&(l=(31&u)<<6|63&o)>127&&(c=l);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(l=(15&u)<<12|(63&o)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,p=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=p}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return u(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return function(e,t,n,r){return c(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},l.allocUnsafe=function(e){return p(null,e)},l.allocUnsafeSlow=function(e){return p(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=l.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?E(this,0,e):m.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,r,i){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),u=this.slice(r,i),c=e.slice(t,n),p=0;p<s;++p)if(u[p]!==c[p]){o=u[p],a=c[p];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return x(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return _(this,e,t,n);case"base64":return C(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function I(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function P(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=z(e[o]);return i}function O(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function N(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,i,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function A(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function D(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function V(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function M(e,t,n,r,o){return o||V(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,o){return o||V(e,0,n,8),i.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=l.prototype;else{var i=t-e;n=new l(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},l.prototype.readUInt8=function(e,t){return t||N(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||N(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||N(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||N(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||N(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||N(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||N(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||N(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||N(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):A(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):A(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):D(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):A(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):A(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return M(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return M(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},l.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=l.isBuffer(e)?e:j(new l(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var L=/[^+\/0-9A-Za-z-_]/g;function z(e){return e<16?"0"+e.toString(16):e.toString(16)}function j(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(L,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function $(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(25))},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=51},function(e,t,n){"use strict";e.exports=n(70)},function(e,t,n){"use strict";function r(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));var r=n(26),i=n(28),o=n(34),a=n(17),s=n(18),l=n(21);const u="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class c extends r.a{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),t=this.opts.protocols,n=u?{}:Object(a.c)(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=s.d&&!u?t?new s.a(e,t):new s.a(e):new s.a(e,t,n)}catch(e){return this.emitReserved("error",e)}this.ws.binaryType=this.socket.binaryType||s.b,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],i=n===t.length-1;Object(l.c)(r,this.supportsBinary,t=>{const n={};if(!s.d&&(r.options&&(n.compress=r.options.compress),this.opts.perMessageDeflate)){("string"==typeof t?e.byteLength(t):t.length)<this.opts.perMessageDeflate.threshold&&(n.compress=!1)}try{s.d?this.ws.send(t):this.ws.send(t,n)}catch(e){}i&&Object(s.c)(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let e=this.query||{};const t=this.opts.secure?"wss":"ws";let n="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=Object(o.a)()),this.supportsBinary||(e.b64=1);const r=Object(i.b)(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}check(){return!!s.a}}}).call(this,n(50).Buffer)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(0)),o=s(n(93)),a=s(n(1));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){var e,n,r;l(this,t);for(var i=arguments.length,a=Array(i),s=0;s<i;s++)a[s]=arguments[s];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.state={elementId:r.props.elementId||(0,o.default)()},r.clickInput=function(){var e=document.getElementById(r.state.elementId);e.value="",e.click()},r.handleFiles=function(e){r.props.base64?r.convertFilesToBase64(e.target.files):r.props.handleFiles(e.target.files)},r.convertFilesToBase64=function(e){var t=e;if(r.props.multipleFiles){var n,i;!function(){var e={base64:[],fileList:t},o=function(){var i=new FileReader,o=t[n];i.onloadend=function(n){e.base64.push(i.result),e.base64.length===t.length&&r.props.handleFiles(e)},i.readAsDataURL(o)};for(n=0,i=t.length;n<i;n++)o()}()}else{var o={base64:"",fileList:t},a=t[0],s=new FileReader;s.onloadend=function(e){o.base64=s.result,r.props.handleFiles(o)},s.readAsDataURL(a)}},u(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"render",value:function(){return i.default.createElement("div",{className:"react-file-reader"},i.default.createElement("input",{type:"file",onChange:this.handleFiles,accept:Array.isArray(this.props.fileTypes)?this.props.fileTypes.join(","):this.props.fileTypes,className:"react-file-reader-input",id:this.state.elementId,multiple:this.props.multipleFiles,style:{width:"0px",opacity:"0",position:"fixed"},disabled:this.props.disabled}),i.default.createElement("div",{className:"react-file-reader-button",onClick:this.clickInput},this.props.children))}}]),t}(i.default.Component);t.default=c,c.defaultProps={fileTypes:"image/*",multipleFiles:!1,base64:!1,disabled:!1},c.propTypes={multipleFiles:a.default.bool,handleFiles:a.default.func.isRequired,fileTypes:a.default.oneOfType([a.default.string,a.default.array]),base64:a.default.bool,children:a.default.element.isRequired,disabled:a.default.bool}},function(e,t,n){var r;e.exports=(r=n(0),function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=48)}([function(e,t){e.exports=r},function(e,t){var n=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(26)("wks"),i=n(17),o=n(3).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){e.exports=!n(8)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(7),i=n(16);e.exports=n(4)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(10),i=n(35),o=n(23),a=Object.defineProperty;t.f=n(4)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(40),i=n(22);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(11);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports={}},function(e,t,n){var r=n(39),i=n(27);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t){e.exports=!0},function(e,t,n){var r=n(3),i=n(1),o=n(53),a=n(6),s=n(5),l=function(e,t,n){var u,c,p,d=e&l.F,h=e&l.G,f=e&l.S,m=e&l.P,g=e&l.B,y=e&l.W,v=h?i:i[t]||(i[t]={}),b=v.prototype,x=h?r:f?r[t]:(r[t]||{}).prototype;for(u in h&&(n=t),n)(c=!d&&x&&void 0!==x[u])&&s(v,u)||(p=c?x[u]:n[u],v[u]=h&&"function"!=typeof x[u]?n[u]:g&&c?o(p,r):y&&x[u]==p?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(p):m&&"function"==typeof p?o(Function.call,p):p,m&&((v.virtual||(v.virtual={}))[u]=p,e&l.R&&b&&!b[u]&&a(b,u,p)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(22);e.exports=function(e){return Object(r(e))}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";var r=n(52)(!0);n(34)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})}))},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(11);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(26)("keys"),i=n(17);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(1),i=n(3),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(14)?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(7).f,i=n(5),o=n(2)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){n(62);for(var r=n(3),i=n(6),o=n(12),a=n(2)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var u=s[l],c=r[u],p=c&&c.prototype;p&&!p[a]&&i(p,a,u),o[u]=o.Array}},function(e,t,n){t.f=n(2)},function(e,t,n){var r=n(3),i=n(1),o=n(14),a=n(30),s=n(7).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){e.exports=function(e,t,n){return Math.min(Math.max(e,t),n)}},function(e,t,n){"use strict";var r=n(14),i=n(15),o=n(37),a=n(6),s=n(12),l=n(55),u=n(28),c=n(61),p=n(2)("iterator"),d=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,n,f,m,g,y){l(n,t,f);var v,b,x,w=function(e){if(!d&&e in k)return k[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},_=t+" Iterator",C="values"==m,S=!1,k=e.prototype,E=k[p]||k["@@iterator"]||m&&k[m],T=E||w(m),I=m?C?w("entries"):T:void 0,P="Array"==t&&k.entries||E;if(P&&(x=c(P.call(new e)))!==Object.prototype&&x.next&&(u(x,_,!0),r||"function"==typeof x[p]||a(x,p,h)),C&&E&&"values"!==E.name&&(S=!0,T=function(){return E.call(this)}),r&&!y||!d&&!S&&k[p]||a(k,p,T),s[t]=T,s[_]=h,m)if(v={values:C?T:w("values"),keys:g?T:w("keys"),entries:I},y)for(b in v)b in k||o(k,b,v[b]);else i(i.P+i.F*(d||S),t,v);return v}},function(e,t,n){e.exports=!n(4)&&!n(8)((function(){return 7!=Object.defineProperty(n(36)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(11),i=n(3).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){e.exports=n(6)},function(e,t,n){var r=n(10),i=n(56),o=n(27),a=n(25)("IE_PROTO"),s=function(){},l=function(){var e,t=n(36)("iframe"),r=o.length;for(t.style.display="none",n(60).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;r--;)delete l.prototype[o[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=l(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(5),i=n(9),o=n(57)(!1),a=n(25)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),l=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);for(;t.length>l;)r(s,n=t[l++])&&(~o(u,n)||u.push(n));return u}},function(e,t,n){var r=n(24);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(39),i=n(27).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(24),i=n(2)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:o?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){var n=/-?\d+(\.\d+)?%?/g;e.exports=function(e){return e.match(n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBase16Theme=t.createStyling=t.invertTheme=void 0;var r=h(n(49)),i=h(n(76)),o=h(n(81)),a=h(n(89)),s=h(n(93)),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(94)),u=h(n(132)),c=h(n(133)),p=h(n(138)),d=n(139);function h(e){return e&&e.__esModule?e:{default:e}}var f=l.default,m=(0,a.default)(f),g=(0,p.default)(c.default,d.rgb2yuv,(function(e){var t,n=(0,o.default)(e,3);return[(t=n[0],t<.25?1:t<.5?.9-t:1.1-t),n[1],n[2]]}),d.yuv2rgb,u.default),y=function(e){return function(t){return{className:[t.className,e.className].filter(Boolean).join(" "),style:(0,i.default)({},t.style||{},e.style||{})}}},v=function(e,t){var n=(0,a.default)(t);for(var o in e)-1===n.indexOf(o)&&n.push(o);return n.reduce((function(n,o){return n[o]=function(e,t){if(void 0===e)return t;if(void 0===t)return e;var n=void 0===e?"undefined":(0,r.default)(e),o=void 0===t?"undefined":(0,r.default)(t);switch(n){case"string":switch(o){case"string":return[t,e].filter(Boolean).join(" ");case"object":return y({className:e,style:t});case"function":return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return y({className:e})(t.apply(void 0,[n].concat(i)))}}case"object":switch(o){case"string":return y({className:t,style:e});case"object":return(0,i.default)({},t,e);case"function":return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return y({style:e})(t.apply(void 0,[n].concat(i)))}}case"function":switch(o){case"string":return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return e.apply(void 0,[y(n)({className:t})].concat(i))};case"object":return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return e.apply(void 0,[y(n)({style:t})].concat(i))};case"function":return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return e.apply(void 0,[t.apply(void 0,[n].concat(i))].concat(i))}}}}(e[o],t[o]),n}),{})},b=function(e,t){for(var n=arguments.length,o=Array(n>2?n-2:0),s=2;s<n;s++)o[s-2]=arguments[s];if(null===t)return e;Array.isArray(t)||(t=[t]);var l=t.map((function(t){return e[t]})).filter(Boolean),u=l.reduce((function(e,t){return"string"==typeof t?e.className=[e.className,t].filter(Boolean).join(" "):"object"===(void 0===t?"undefined":(0,r.default)(t))?e.style=(0,i.default)({},e.style,t):"function"==typeof t&&(e=(0,i.default)({},e,t.apply(void 0,[e].concat(o)))),e}),{className:"",style:{}});return u.className||delete u.className,0===(0,a.default)(u.style).length&&delete u.style,u},x=t.invertTheme=function(e){return(0,a.default)(e).reduce((function(t,n){return t[n]=/^base/.test(n)?g(e[n]):"scheme"===n?e[n]+":inverted":e[n],t}),{})},w=(t.createStyling=(0,s.default)((function(e){for(var t=arguments.length,n=Array(t>3?t-3:0),r=3;r<t;r++)n[r-3]=arguments[r];var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=o.defaultBase16,c=void 0===u?f:u,p=o.base16Themes,d=void 0===p?null:p,h=w(l,d);h&&(l=(0,i.default)({},h,l));var g=m.reduce((function(e,t){return e[t]=l[t]||c[t],e}),{}),y=(0,a.default)(l).reduce((function(e,t){return-1===m.indexOf(t)?(e[t]=l[t],e):e}),{}),x=e(g),_=v(y,x);return(0,s.default)(b,2).apply(void 0,[_].concat(n))}),3),t.getBase16Theme=function(e,t){if(e&&e.extend&&(e=e.extend),"string"==typeof e){var n=e.split(":"),r=(0,o.default)(n,2),i=r[0],a=r[1];e=(t||{})[i]||l[i],"inverted"===a&&(e=x(e))}return e&&e.hasOwnProperty("base00")?e:void 0})},function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(n,r){function i(){void 0!==o&&e.removeListener("error",o),n([].slice.call(arguments))}var o;"error"!==t&&(o=function(n){e.removeListener(t,i),r(n)},e.once("error",o)),e.once(t,i)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function p(e,t,n,r){var i,o,a,s;if(u(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=c(e))>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,s=l,console&&console.warn&&console.warn(s)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=d.bind(r);return i.listener=n,r.wrapFn=i,i}function f(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):g(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=i[e];if(void 0===l)return!1;if("function"==typeof l)o(l,this,t);else{var u=l.length,c=g(l,u);for(n=0;n<u;++n)o(c[n],this,t)}return!0},s.prototype.addListener=function(e,t){return p(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return p(this,e,t,!0)},s.prototype.once=function(e,t){return u(t),this.on(e,h(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,h(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,o,a;if(u(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return f(this,e,!0)},s.prototype.rawListeners=function(e){return f(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},s.prototype.listenerCount=m,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){e.exports.Dispatcher=n(140)},function(e,t,n){e.exports=n(142)},function(e,t,n){"use strict";t.__esModule=!0;var r=a(n(50)),i=a(n(65)),o="function"==typeof i.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function a(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof i.default&&"symbol"===o(r.default)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":void 0===e?"undefined":o(e)}},function(e,t,n){e.exports={default:n(51),__esModule:!0}},function(e,t,n){n(20),n(29),e.exports=n(30).f("iterator")},function(e,t,n){var r=n(21),i=n(22);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),l=r(n),u=s.length;return l<0||l>=u?e?"":void 0:(o=s.charCodeAt(l))<55296||o>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):o:e?s.slice(l,l+2):a-56320+(o-55296<<10)+65536}}},function(e,t,n){var r=n(54);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";var r=n(38),i=n(16),o=n(28),a={};n(6)(a,n(2)("iterator"),(function(){return this})),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(7),i=n(10),o=n(13);e.exports=n(4)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,l=0;s>l;)r.f(e,n=a[l++],t[n]);return e}},function(e,t,n){var r=n(9),i=n(58),o=n(59);e.exports=function(e){return function(t,n,a){var s,l=r(t),u=i(l.length),c=o(a,u);if(e&&n!=n){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var r=n(21),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(21),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(3).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(5),i=n(18),o=n(25)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){"use strict";var r=n(63),i=n(64),o=n(12),a=n(9);e.exports=n(34)(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){e.exports={default:n(66),__esModule:!0}},function(e,t,n){n(67),n(73),n(74),n(75),e.exports=n(1).Symbol},function(e,t,n){"use strict";var r=n(3),i=n(5),o=n(4),a=n(15),s=n(37),l=n(68).KEY,u=n(8),c=n(26),p=n(28),d=n(17),h=n(2),f=n(30),m=n(31),g=n(69),y=n(70),v=n(10),b=n(11),x=n(18),w=n(9),_=n(23),C=n(16),S=n(38),k=n(71),E=n(72),T=n(32),I=n(7),P=n(13),O=E.f,N=I.f,R=k.f,A=r.Symbol,D=r.JSON,V=D&&D.stringify,M=h("_hidden"),F=h("toPrimitive"),L={}.propertyIsEnumerable,z=c("symbol-registry"),j=c("symbols"),q=c("op-symbols"),$=Object.prototype,B="function"==typeof A&&!!T.f,U=r.QObject,W=!U||!U.prototype||!U.prototype.findChild,H=o&&u((function(){return 7!=S(N({},"a",{get:function(){return N(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=O($,t);r&&delete $[t],N(e,t,n),r&&e!==$&&N($,t,r)}:N,Q=function(e){var t=j[e]=S(A.prototype);return t._k=e,t},G=B&&"symbol"==typeof A.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof A},K=function(e,t,n){return e===$&&K(q,t,n),v(e),t=_(t,!0),v(n),i(j,t)?(n.enumerable?(i(e,M)&&e[M][t]&&(e[M][t]=!1),n=S(n,{enumerable:C(0,!1)})):(i(e,M)||N(e,M,C(1,{})),e[M][t]=!0),H(e,t,n)):N(e,t,n)},J=function(e,t){v(e);for(var n,r=g(t=w(t)),i=0,o=r.length;o>i;)K(e,n=r[i++],t[n]);return e},X=function(e){var t=L.call(this,e=_(e,!0));return!(this===$&&i(j,e)&&!i(q,e))&&(!(t||!i(this,e)||!i(j,e)||i(this,M)&&this[M][e])||t)},Y=function(e,t){if(e=w(e),t=_(t,!0),e!==$||!i(j,t)||i(q,t)){var n=O(e,t);return!n||!i(j,t)||i(e,M)&&e[M][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=R(w(e)),r=[],o=0;n.length>o;)i(j,t=n[o++])||t==M||t==l||r.push(t);return r},ee=function(e){for(var t,n=e===$,r=R(n?q:w(e)),o=[],a=0;r.length>a;)!i(j,t=r[a++])||n&&!i($,t)||o.push(j[t]);return o};B||(s((A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===$&&t.call(q,n),i(this,M)&&i(this[M],e)&&(this[M][e]=!1),H(this,e,C(1,n))};return o&&W&&H($,e,{configurable:!0,set:t}),Q(e)}).prototype,"toString",(function(){return this._k})),E.f=Y,I.f=K,n(41).f=k.f=Z,n(19).f=X,T.f=ee,o&&!n(14)&&s($,"propertyIsEnumerable",X,!0),f.f=function(e){return Q(h(e))}),a(a.G+a.W+a.F*!B,{Symbol:A});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)h(te[ne++]);for(var re=P(h.store),ie=0;re.length>ie;)m(re[ie++]);a(a.S+a.F*!B,"Symbol",{for:function(e){return i(z,e+="")?z[e]:z[e]=A(e)},keyFor:function(e){if(!G(e))throw TypeError(e+" is not a symbol!");for(var t in z)if(z[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!B,"Object",{create:function(e,t){return void 0===t?S(e):J(S(e),t)},defineProperty:K,defineProperties:J,getOwnPropertyDescriptor:Y,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});var oe=u((function(){T.f(1)}));a(a.S+a.F*oe,"Object",{getOwnPropertySymbols:function(e){return T.f(x(e))}}),D&&a(a.S+a.F*(!B||u((function(){var e=A();return"[null]"!=V([e])||"{}"!=V({a:e})||"{}"!=V(Object(e))}))),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(b(t)||void 0!==e)&&!G(e))return y(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!G(t))return t}),r[1]=t,V.apply(D,r)}}),A.prototype[F]||n(6)(A.prototype,F,A.prototype.valueOf),p(A,"Symbol"),p(Math,"Math",!0),p(r.JSON,"JSON",!0)},function(e,t,n){var r=n(17)("meta"),i=n(11),o=n(5),a=n(7).f,s=0,l=Object.isExtensible||function(){return!0},u=!n(8)((function(){return l(Object.preventExtensions({}))})),c=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},p=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[r].w},onFreeze:function(e){return u&&p.NEED&&l(e)&&!o(e,r)&&c(e),e}}},function(e,t,n){var r=n(13),i=n(32),o=n(19);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),l=o.f,u=0;s.length>u;)l.call(e,a=s[u++])&&t.push(a);return t}},function(e,t,n){var r=n(24);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(9),i=n(41).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return a.slice()}}(e):i(r(e))}},function(e,t,n){var r=n(19),i=n(16),o=n(9),a=n(23),s=n(5),l=n(35),u=Object.getOwnPropertyDescriptor;t.f=n(4)?u:function(e,t){if(e=o(e),t=a(t,!0),l)try{return u(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t){},function(e,t,n){n(31)("asyncIterator")},function(e,t,n){n(31)("observable")},function(e,t,n){"use strict";t.__esModule=!0;var r,i=(r=n(77))&&r.__esModule?r:{default:r};t.default=i.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){e.exports={default:n(78),__esModule:!0}},function(e,t,n){n(79),e.exports=n(1).Object.assign},function(e,t,n){var r=n(15);r(r.S+r.F,"Object",{assign:n(80)})},function(e,t,n){"use strict";var r=n(4),i=n(13),o=n(32),a=n(19),s=n(18),l=n(40),u=Object.assign;e.exports=!u||n(8)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r}))?function(e,t){for(var n=s(e),u=arguments.length,c=1,p=o.f,d=a.f;u>c;)for(var h,f=l(arguments[c++]),m=p?i(f).concat(p(f)):i(f),g=m.length,y=0;g>y;)h=m[y++],r&&!d.call(f,h)||(n[h]=f[h]);return n}:u},function(e,t,n){"use strict";t.__esModule=!0;var r=o(n(82)),i=o(n(85));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if(Array.isArray(e))return e;if((0,r.default)(Object(e)))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var s,l=(0,i.default)(e);!(r=(s=l.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t,n){e.exports={default:n(83),__esModule:!0}},function(e,t,n){n(29),n(20),e.exports=n(84)},function(e,t,n){var r=n(42),i=n(2)("iterator"),o=n(12);e.exports=n(1).isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||o.hasOwnProperty(r(t))}},function(e,t,n){e.exports={default:n(86),__esModule:!0}},function(e,t,n){n(29),n(20),e.exports=n(87)},function(e,t,n){var r=n(10),i=n(88);e.exports=n(1).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},function(e,t,n){var r=n(42),i=n(2)("iterator"),o=n(12);e.exports=n(1).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){e.exports={default:n(90),__esModule:!0}},function(e,t,n){n(91),e.exports=n(1).Object.keys},function(e,t,n){var r=n(18),i=n(13);n(92)("keys",(function(){return function(e){return i(r(e))}}))},function(e,t,n){var r=n(15),i=n(1),o=n(8);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o((function(){n(1)})),"Object",a)}},function(e,t,n){(function(t){var n=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],r=/^\s+|\s+$/g,i=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,o=/\{\n\/\* \[wrapped with (.+)\] \*/,a=/,? & /,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^\[object .+?Constructor\]$/,c=/^0o[0-7]+$/i,p=/^(?:0|[1-9]\d*)$/,d=parseInt,h="object"==typeof t&&t&&t.Object===Object&&t,f="object"==typeof self&&self&&self.Object===Object&&self,m=h||f||Function("return this")();function g(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function y(e){return e!=e}function v(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&r++;return r}function b(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&"__lodash_placeholder__"!==a||(e[n]="__lodash_placeholder__",o[i++]=n)}return o}var x,w,_,C=Function.prototype,S=Object.prototype,k=m["__core-js_shared__"],E=(x=/[^.]+$/.exec(k&&k.keys&&k.keys.IE_PROTO||""))?"Symbol(src)_1."+x:"",T=C.toString,I=S.hasOwnProperty,P=S.toString,O=RegExp("^"+T.call(I).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),N=Object.create,R=Math.max,A=Math.min,D=(w=$(Object,"defineProperty"),(_=$.name)&&_.length>2?w:void 0);function V(e){return J(e)?N(e):{}}function M(e,t,n,r){for(var i=-1,o=e.length,a=n.length,s=-1,l=t.length,u=R(o-a,0),c=Array(l+u),p=!r;++s<l;)c[s]=t[s];for(;++i<a;)(p||i<o)&&(c[n[i]]=e[i]);for(;u--;)c[s++]=e[i++];return c}function F(e,t,n,r){for(var i=-1,o=e.length,a=-1,s=n.length,l=-1,u=t.length,c=R(o-s,0),p=Array(c+u),d=!r;++i<c;)p[i]=e[i];for(var h=i;++l<u;)p[h+l]=t[l];for(;++a<s;)(d||i<o)&&(p[h+n[a]]=e[i++]);return p}function L(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=V(e.prototype),r=e.apply(n,t);return J(r)?r:n}}function z(e,t,n,r,i,o,a,s,l,u){var c=128&t,p=1&t,d=2&t,h=24&t,f=512&t,g=d?void 0:L(e);return function y(){for(var x=arguments.length,w=Array(x),_=x;_--;)w[_]=arguments[_];if(h)var C=q(y),S=v(w,C);if(r&&(w=M(w,r,i,h)),o&&(w=F(w,o,a,h)),x-=S,h&&x<u){var k=b(w,C);return j(e,t,z,y.placeholder,n,w,k,s,l,u-x)}var E=p?n:this,T=d?E[e]:e;return x=w.length,s?w=H(w,s):f&&x>1&&w.reverse(),c&&l<x&&(w.length=l),this&&this!==m&&this instanceof y&&(T=g||L(T)),T.apply(E,w)}}function j(e,t,n,r,i,o,a,s,l,u){var c=8&t;t|=c?32:64,4&(t&=~(c?64:32))||(t&=-4);var p=n(e,t,i,c?o:void 0,c?a:void 0,c?void 0:o,c?void 0:a,s,l,u);return p.placeholder=r,Q(p,e,t)}function q(e){return e.placeholder}function $(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!J(e)||function(e){return!!E&&E in e}(e))&&(function(e){var t=J(e)?P.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?O:u).test(function(e){if(null!=e){try{return T.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}function B(e){var t=e.match(o);return t?t[1].split(a):[]}function U(e,t){var n=t.length,r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(i,"{\n/* [wrapped with "+t+"] */\n")}function W(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||p.test(e))&&e>-1&&e%1==0&&e<t}function H(e,t){for(var n=e.length,r=A(t.length,n),i=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(e);r--;){var o=t[r];e[r]=W(o,n)?i[o]:void 0}return e}var Q=D?function(e,t,n){var r,i=t+"";return D(e,"toString",{configurable:!0,enumerable:!1,value:(r=U(i,G(B(i),n)),function(){return r})})}:function(e){return e};function G(e,t){return function(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n]););}(n,(function(n){var r="_."+n[0];t&n[1]&&!function(e,t){return!(!e||!e.length)&&function(e,t,n){if(t!=t)return function(e,t,n,r){for(var i=e.length,o=-1;++o<i;)if(t(e[o],o,e))return o;return-1}(e,y);for(var r=-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t)>-1}(e,r)&&e.push(r)})),e.sort()}function K(e,t,n){var r=function(e,t,n,r,i,o,a,s){var l=2&t;if(!l&&"function"!=typeof e)throw new TypeError("Expected a function");var u=r?r.length:0;if(u||(t&=-97,r=i=void 0),a=void 0===a?a:R(X(a),0),s=void 0===s?s:X(s),u-=i?i.length:0,64&t){var c=r,p=i;r=i=void 0}var d=[e,t,n,r,i,c,p,o,a,s];if(e=d[0],t=d[1],n=d[2],r=d[3],i=d[4],!(s=d[9]=null==d[9]?l?0:e.length:R(d[9]-u,0))&&24&t&&(t&=-25),t&&1!=t)h=8==t||16==t?function(e,t,n){var r=L(e);return function i(){for(var o=arguments.length,a=Array(o),s=o,l=q(i);s--;)a[s]=arguments[s];var u=o<3&&a[0]!==l&&a[o-1]!==l?[]:b(a,l);if((o-=u.length)<n)return j(e,t,z,i.placeholder,void 0,a,u,void 0,void 0,n-o);var c=this&&this!==m&&this instanceof i?r:e;return g(c,this,a)}}(e,t,s):32!=t&&33!=t||i.length?z.apply(void 0,d):function(e,t,n,r){var i=1&t,o=L(e);return function t(){for(var a=-1,s=arguments.length,l=-1,u=r.length,c=Array(u+s),p=this&&this!==m&&this instanceof t?o:e;++l<u;)c[l]=r[l];for(;s--;)c[l++]=arguments[++a];return g(p,i?n:this,c)}}(e,t,n,r);else var h=function(e,t,n){var r=1&t,i=L(e);return function t(){var o=this&&this!==m&&this instanceof t?i:e;return o.apply(r?n:this,arguments)}}(e,t,n);return Q(h,e,t)}(e,8,void 0,void 0,void 0,void 0,void 0,t=n?void 0:t);return r.placeholder=K.placeholder,r}function J(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function X(e){var t=function(e){return e?(e=function(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==P.call(e)}(e))return NaN;if(J(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=J(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(r,"");var n=l.test(e);return n||c.test(e)?d(e.slice(2),n?2:8):s.test(e)?NaN:+e}(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}(e),n=t%1;return t==t?n?t-n:t:0}K.placeholder={},e.exports=K}).call(this,n(43))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e.default:e}t.__esModule=!0;var i=n(95);t.threezerotwofour=r(i);var o=n(96);t.apathy=r(o);var a=n(97);t.ashes=r(a);var s=n(98);t.atelierDune=r(s);var l=n(99);t.atelierForest=r(l);var u=n(100);t.atelierHeath=r(u);var c=n(101);t.atelierLakeside=r(c);var p=n(102);t.atelierSeaside=r(p);var d=n(103);t.bespin=r(d);var h=n(104);t.brewer=r(h);var f=n(105);t.bright=r(f);var m=n(106);t.chalk=r(m);var g=n(107);t.codeschool=r(g);var y=n(108);t.colors=r(y);var v=n(109);t.default=r(v);var b=n(110);t.eighties=r(b);var x=n(111);t.embers=r(x);var w=n(112);t.flat=r(w);var _=n(113);t.google=r(_);var C=n(114);t.grayscale=r(C);var S=n(115);t.greenscreen=r(S);var k=n(116);t.harmonic=r(k);var E=n(117);t.hopscotch=r(E);var T=n(118);t.isotope=r(T);var I=n(119);t.marrakesh=r(I);var P=n(120);t.mocha=r(P);var O=n(121);t.monokai=r(O);var N=n(122);t.ocean=r(N);var R=n(123);t.paraiso=r(R);var A=n(124);t.pop=r(A);var D=n(125);t.railscasts=r(D);var V=n(126);t.shapeshifter=r(V);var M=n(127);t.solarized=r(M);var F=n(128);t.summerfruit=r(F);var L=n(129);t.tomorrow=r(L);var z=n(130);t.tube=r(z);var j=n(131);t.twilight=r(j)},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"threezerotwofour",author:"jan t. sott (http://github.com/idleberg)",base00:"#090300",base01:"#3a3432",base02:"#4a4543",base03:"#5c5855",base04:"#807d7c",base05:"#a5a2a2",base06:"#d6d5d4",base07:"#f7f7f7",base08:"#db2d20",base09:"#e8bbd0",base0A:"#fded02",base0B:"#01a252",base0C:"#b5e4f4",base0D:"#01a0e4",base0E:"#a16a94",base0F:"#cdab53"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"apathy",author:"jannik siebert (https://github.com/janniks)",base00:"#031A16",base01:"#0B342D",base02:"#184E45",base03:"#2B685E",base04:"#5F9C92",base05:"#81B5AC",base06:"#A7CEC8",base07:"#D2E7E4",base08:"#3E9688",base09:"#3E7996",base0A:"#3E4C96",base0B:"#883E96",base0C:"#963E4C",base0D:"#96883E",base0E:"#4C963E",base0F:"#3E965B"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"ashes",author:"jannik siebert (https://github.com/janniks)",base00:"#1C2023",base01:"#393F45",base02:"#565E65",base03:"#747C84",base04:"#ADB3BA",base05:"#C7CCD1",base06:"#DFE2E5",base07:"#F3F4F5",base08:"#C7AE95",base09:"#C7C795",base0A:"#AEC795",base0B:"#95C7AE",base0C:"#95AEC7",base0D:"#AE95C7",base0E:"#C795AE",base0F:"#C79595"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"atelier dune",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/dune)",base00:"#20201d",base01:"#292824",base02:"#6e6b5e",base03:"#7d7a68",base04:"#999580",base05:"#a6a28c",base06:"#e8e4cf",base07:"#fefbec",base08:"#d73737",base09:"#b65611",base0A:"#cfb017",base0B:"#60ac39",base0C:"#1fad83",base0D:"#6684e1",base0E:"#b854d4",base0F:"#d43552"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"atelier forest",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/forest)",base00:"#1b1918",base01:"#2c2421",base02:"#68615e",base03:"#766e6b",base04:"#9c9491",base05:"#a8a19f",base06:"#e6e2e0",base07:"#f1efee",base08:"#f22c40",base09:"#df5320",base0A:"#d5911a",base0B:"#5ab738",base0C:"#00ad9c",base0D:"#407ee7",base0E:"#6666ea",base0F:"#c33ff3"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"atelier heath",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/heath)",base00:"#1b181b",base01:"#292329",base02:"#695d69",base03:"#776977",base04:"#9e8f9e",base05:"#ab9bab",base06:"#d8cad8",base07:"#f7f3f7",base08:"#ca402b",base09:"#a65926",base0A:"#bb8a35",base0B:"#379a37",base0C:"#159393",base0D:"#516aec",base0E:"#7b59c0",base0F:"#cc33cc"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"atelier lakeside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/lakeside/)",base00:"#161b1d",base01:"#1f292e",base02:"#516d7b",base03:"#5a7b8c",base04:"#7195a8",base05:"#7ea2b4",base06:"#c1e4f6",base07:"#ebf8ff",base08:"#d22d72",base09:"#935c25",base0A:"#8a8a0f",base0B:"#568c3b",base0C:"#2d8f6f",base0D:"#257fad",base0E:"#5d5db1",base0F:"#b72dd2"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"atelier seaside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/seaside/)",base00:"#131513",base01:"#242924",base02:"#5e6e5e",base03:"#687d68",base04:"#809980",base05:"#8ca68c",base06:"#cfe8cf",base07:"#f0fff0",base08:"#e6193c",base09:"#87711d",base0A:"#c3c322",base0B:"#29a329",base0C:"#1999b3",base0D:"#3d62f5",base0E:"#ad2bee",base0F:"#e619c3"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"bespin",author:"jan t. sott",base00:"#28211c",base01:"#36312e",base02:"#5e5d5c",base03:"#666666",base04:"#797977",base05:"#8a8986",base06:"#9d9b97",base07:"#baae9e",base08:"#cf6a4c",base09:"#cf7d34",base0A:"#f9ee98",base0B:"#54be0d",base0C:"#afc4db",base0D:"#5ea6ea",base0E:"#9b859d",base0F:"#937121"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"brewer",author:"timothe poisot (http://github.com/tpoisot)",base00:"#0c0d0e",base01:"#2e2f30",base02:"#515253",base03:"#737475",base04:"#959697",base05:"#b7b8b9",base06:"#dadbdc",base07:"#fcfdfe",base08:"#e31a1c",base09:"#e6550d",base0A:"#dca060",base0B:"#31a354",base0C:"#80b1d3",base0D:"#3182bd",base0E:"#756bb1",base0F:"#b15928"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"bright",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#303030",base02:"#505050",base03:"#b0b0b0",base04:"#d0d0d0",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ffffff",base08:"#fb0120",base09:"#fc6d24",base0A:"#fda331",base0B:"#a1c659",base0C:"#76c7b7",base0D:"#6fb3d2",base0E:"#d381c3",base0F:"#be643c"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"chalk",author:"chris kempson (http://chriskempson.com)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#f5f5f5",base08:"#fb9fb1",base09:"#eda987",base0A:"#ddb26f",base0B:"#acc267",base0C:"#12cfc0",base0D:"#6fc2ef",base0E:"#e1a3ee",base0F:"#deaf8f"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"codeschool",author:"brettof86",base00:"#232c31",base01:"#1c3657",base02:"#2a343a",base03:"#3f4944",base04:"#84898c",base05:"#9ea7a6",base06:"#a7cfa3",base07:"#b5d8f6",base08:"#2a5491",base09:"#43820d",base0A:"#a03b1e",base0B:"#237986",base0C:"#b02f30",base0D:"#484d79",base0E:"#c59820",base0F:"#c98344"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"colors",author:"mrmrs (http://clrs.cc)",base00:"#111111",base01:"#333333",base02:"#555555",base03:"#777777",base04:"#999999",base05:"#bbbbbb",base06:"#dddddd",base07:"#ffffff",base08:"#ff4136",base09:"#ff851b",base0A:"#ffdc00",base0B:"#2ecc40",base0C:"#7fdbff",base0D:"#0074d9",base0E:"#b10dc9",base0F:"#85144b"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"default",author:"chris kempson (http://chriskempson.com)",base00:"#181818",base01:"#282828",base02:"#383838",base03:"#585858",base04:"#b8b8b8",base05:"#d8d8d8",base06:"#e8e8e8",base07:"#f8f8f8",base08:"#ab4642",base09:"#dc9656",base0A:"#f7ca88",base0B:"#a1b56c",base0C:"#86c1b9",base0D:"#7cafc2",base0E:"#ba8baf",base0F:"#a16946"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"eighties",author:"chris kempson (http://chriskempson.com)",base00:"#2d2d2d",base01:"#393939",base02:"#515151",base03:"#747369",base04:"#a09f93",base05:"#d3d0c8",base06:"#e8e6df",base07:"#f2f0ec",base08:"#f2777a",base09:"#f99157",base0A:"#ffcc66",base0B:"#99cc99",base0C:"#66cccc",base0D:"#6699cc",base0E:"#cc99cc",base0F:"#d27b53"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"embers",author:"jannik siebert (https://github.com/janniks)",base00:"#16130F",base01:"#2C2620",base02:"#433B32",base03:"#5A5047",base04:"#8A8075",base05:"#A39A90",base06:"#BEB6AE",base07:"#DBD6D1",base08:"#826D57",base09:"#828257",base0A:"#6D8257",base0B:"#57826D",base0C:"#576D82",base0D:"#6D5782",base0E:"#82576D",base0F:"#825757"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"flat",author:"chris kempson (http://chriskempson.com)",base00:"#2C3E50",base01:"#34495E",base02:"#7F8C8D",base03:"#95A5A6",base04:"#BDC3C7",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ECF0F1",base08:"#E74C3C",base09:"#E67E22",base0A:"#F1C40F",base0B:"#2ECC71",base0C:"#1ABC9C",base0D:"#3498DB",base0E:"#9B59B6",base0F:"#be643c"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"google",author:"seth wright (http://sethawright.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#CC342B",base09:"#F96A38",base0A:"#FBA922",base0B:"#198844",base0C:"#3971ED",base0D:"#3971ED",base0E:"#A36AC7",base0F:"#3971ED"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"grayscale",author:"alexandre gavioli (https://github.com/alexx2/)",base00:"#101010",base01:"#252525",base02:"#464646",base03:"#525252",base04:"#ababab",base05:"#b9b9b9",base06:"#e3e3e3",base07:"#f7f7f7",base08:"#7c7c7c",base09:"#999999",base0A:"#a0a0a0",base0B:"#8e8e8e",base0C:"#868686",base0D:"#686868",base0E:"#747474",base0F:"#5e5e5e"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"green screen",author:"chris kempson (http://chriskempson.com)",base00:"#001100",base01:"#003300",base02:"#005500",base03:"#007700",base04:"#009900",base05:"#00bb00",base06:"#00dd00",base07:"#00ff00",base08:"#007700",base09:"#009900",base0A:"#007700",base0B:"#00bb00",base0C:"#005500",base0D:"#009900",base0E:"#00bb00",base0F:"#005500"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"harmonic16",author:"jannik siebert (https://github.com/janniks)",base00:"#0b1c2c",base01:"#223b54",base02:"#405c79",base03:"#627e99",base04:"#aabcce",base05:"#cbd6e2",base06:"#e5ebf1",base07:"#f7f9fb",base08:"#bf8b56",base09:"#bfbf56",base0A:"#8bbf56",base0B:"#56bf8b",base0C:"#568bbf",base0D:"#8b56bf",base0E:"#bf568b",base0F:"#bf5656"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"hopscotch",author:"jan t. sott",base00:"#322931",base01:"#433b42",base02:"#5c545b",base03:"#797379",base04:"#989498",base05:"#b9b5b8",base06:"#d5d3d5",base07:"#ffffff",base08:"#dd464c",base09:"#fd8b19",base0A:"#fdcc59",base0B:"#8fc13e",base0C:"#149b93",base0D:"#1290bf",base0E:"#c85e7c",base0F:"#b33508"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"isotope",author:"jan t. sott",base00:"#000000",base01:"#404040",base02:"#606060",base03:"#808080",base04:"#c0c0c0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#ff0000",base09:"#ff9900",base0A:"#ff0099",base0B:"#33ff00",base0C:"#00ffff",base0D:"#0066ff",base0E:"#cc00ff",base0F:"#3300ff"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"marrakesh",author:"alexandre gavioli (http://github.com/alexx2/)",base00:"#201602",base01:"#302e00",base02:"#5f5b17",base03:"#6c6823",base04:"#86813b",base05:"#948e48",base06:"#ccc37a",base07:"#faf0a5",base08:"#c35359",base09:"#b36144",base0A:"#a88339",base0B:"#18974e",base0C:"#75a738",base0D:"#477ca1",base0E:"#8868b3",base0F:"#b3588e"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"mocha",author:"chris kempson (http://chriskempson.com)",base00:"#3B3228",base01:"#534636",base02:"#645240",base03:"#7e705a",base04:"#b8afad",base05:"#d0c8c6",base06:"#e9e1dd",base07:"#f5eeeb",base08:"#cb6077",base09:"#d28b71",base0A:"#f4bc87",base0B:"#beb55b",base0C:"#7bbda4",base0D:"#8ab3b5",base0E:"#a89bb9",base0F:"#bb9584"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:"#272822",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#66d9ef",base0E:"#ae81ff",base0F:"#cc6633"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"ocean",author:"chris kempson (http://chriskempson.com)",base00:"#2b303b",base01:"#343d46",base02:"#4f5b66",base03:"#65737e",base04:"#a7adba",base05:"#c0c5ce",base06:"#dfe1e8",base07:"#eff1f5",base08:"#bf616a",base09:"#d08770",base0A:"#ebcb8b",base0B:"#a3be8c",base0C:"#96b5b4",base0D:"#8fa1b3",base0E:"#b48ead",base0F:"#ab7967"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"paraiso",author:"jan t. sott",base00:"#2f1e2e",base01:"#41323f",base02:"#4f424c",base03:"#776e71",base04:"#8d8687",base05:"#a39e9b",base06:"#b9b6b0",base07:"#e7e9db",base08:"#ef6155",base09:"#f99b15",base0A:"#fec418",base0B:"#48b685",base0C:"#5bc4bf",base0D:"#06b6ef",base0E:"#815ba4",base0F:"#e96ba8"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"pop",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#eb008a",base09:"#f29333",base0A:"#f8ca12",base0B:"#37b349",base0C:"#00aabb",base0D:"#0e5a94",base0E:"#b31e8d",base0F:"#7a2d00"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"railscasts",author:"ryan bates (http://railscasts.com)",base00:"#2b2b2b",base01:"#272935",base02:"#3a4055",base03:"#5a647e",base04:"#d4cfc9",base05:"#e6e1dc",base06:"#f4f1ed",base07:"#f9f7f3",base08:"#da4939",base09:"#cc7833",base0A:"#ffc66d",base0B:"#a5c261",base0C:"#519f50",base0D:"#6d9cbe",base0E:"#b6b3eb",base0F:"#bc9458"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"shapeshifter",author:"tyler benziger (http://tybenz.com)",base00:"#000000",base01:"#040404",base02:"#102015",base03:"#343434",base04:"#555555",base05:"#ababab",base06:"#e0e0e0",base07:"#f9f9f9",base08:"#e92f2f",base09:"#e09448",base0A:"#dddd13",base0B:"#0ed839",base0C:"#23edda",base0D:"#3b48e3",base0E:"#f996e2",base0F:"#69542d"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"summerfruit",author:"christopher corley (http://cscorley.github.io/)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#B0B0B0",base05:"#D0D0D0",base06:"#E0E0E0",base07:"#FFFFFF",base08:"#FF0086",base09:"#FD8900",base0A:"#ABA800",base0B:"#00C918",base0C:"#1faaaa",base0D:"#3777E6",base0E:"#AD00A1",base0F:"#cc6633"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"tomorrow",author:"chris kempson (http://chriskempson.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#cc6666",base09:"#de935f",base0A:"#f0c674",base0B:"#b5bd68",base0C:"#8abeb7",base0D:"#81a2be",base0E:"#b294bb",base0F:"#a3685a"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"london tube",author:"jan t. sott",base00:"#231f20",base01:"#1c3f95",base02:"#5a5758",base03:"#737171",base04:"#959ca1",base05:"#d9d8d8",base06:"#e7e7e8",base07:"#ffffff",base08:"#ee2e24",base09:"#f386a1",base0A:"#ffd204",base0B:"#00853e",base0C:"#85cebc",base0D:"#009ddc",base0E:"#98005d",base0F:"#b06110"},e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.default={scheme:"twilight",author:"david hart (http://hart-dev.com)",base00:"#1e1e1e",base01:"#323537",base02:"#464b50",base03:"#5f5a60",base04:"#838184",base05:"#a7a7a7",base06:"#c3c3c3",base07:"#ffffff",base08:"#cf6a4c",base09:"#cda869",base0A:"#f9ee98",base0B:"#8f9d6a",base0C:"#afc4db",base0D:"#7587a6",base0E:"#9b859d",base0F:"#9b703f"},e.exports=t.default},function(e,t,n){var r=n(33);function i(e){var t=Math.round(r(e,0,255)).toString(16);return 1==t.length?"0"+t:t}e.exports=function(e){var t=4===e.length?i(255*e[3]):"";return"#"+i(e[0])+i(e[1])+i(e[2])+t}},function(e,t,n){var r=n(134),i=n(135),o=n(136),a=n(137),s={"#":i,hsl:function(e){var t=r(e),n=a(t);return 4===t.length&&n.push(t[3]),n},rgb:o};function l(e){for(var t in s)if(0===e.indexOf(t))return s[t](e)}l.rgb=o,l.hsl=r,l.hex=i,e.exports=l},function(e,t,n){var r=n(44),i=n(33);function o(e,t){switch(e=parseFloat(e),t){case 0:return i(e,0,360);case 1:case 2:return i(e,0,100);case 3:return i(e,0,1)}}e.exports=function(e){return r(e).map(o)}},function(e,t){e.exports=function(e){4!==e.length&&5!==e.length||(e=function(e){for(var t="#",n=1;n<e.length;n++){var r=e.charAt(n);t+=r+r}return t}(e));var t=[parseInt(e.substring(1,3),16),parseInt(e.substring(3,5),16),parseInt(e.substring(5,7),16)];if(9===e.length){var n=parseFloat((parseInt(e.substring(7,9),16)/255).toFixed(2));t.push(n)}return t}},function(e,t,n){var r=n(44),i=n(33);function o(e,t){return t<3?-1!=e.indexOf("%")?Math.round(255*i(parseInt(e,10),0,100)/100):i(parseInt(e,10),0,255):i(parseFloat(e),0,1)}e.exports=function(e){return r(e).map(o)}},function(e,t){e.exports=function(e){var t,n,r,i,o,a=e[0]/360,s=e[1]/100,l=e[2]/100;if(0==s)return[o=255*l,o,o];t=2*l-(n=l<.5?l*(1+s):l+s-l*s),i=[0,0,0];for(var u=0;u<3;u++)(r=a+1/3*-(u-1))<0&&r++,r>1&&r--,o=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,i[u]=255*o;return i}},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t,r="object"==typeof self&&self&&self.Object===Object&&self,i=n||r||Function("return this")();function o(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function a(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var s=Object.prototype,l=s.hasOwnProperty,u=s.toString,c=i.Symbol,p=s.propertyIsEnumerable,d=c?c.isConcatSpreadable:void 0,h=Math.max;function f(e){return y(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!function(e){var t=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}(e)?u.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)}(e)}(e)&&l.call(e,"callee")&&(!p.call(e,"callee")||"[object Arguments]"==u.call(e))}(e)||!!(d&&e&&e[d])}var m,g,y=Array.isArray,v=(m=function(e){for(var t=(e=function e(t,n,r,i,o){var s=-1,l=t.length;for(r||(r=f),o||(o=[]);++s<l;){var u=t[s];n>0&&r(u)?n>1?e(u,n-1,r,i,o):a(o,u):i||(o[o.length]=u)}return o}(e,1)).length,n=t;n--;)if("function"!=typeof e[n])throw new TypeError("Expected a function");return function(){for(var n=0,r=t?e[n].apply(this,arguments):arguments[0];++n<t;)r=e[n].call(this,r);return r}},g=h(void 0===g?m.length-1:g,0),function(){for(var e=arguments,t=-1,n=h(e.length-g,0),r=Array(n);++t<n;)r[t]=e[g+t];t=-1;for(var i=Array(g+1);++t<g;)i[t]=e[t];return i[g]=r,o(m,this,i)});e.exports=v}).call(this,n(43))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.yuv2rgb=function(e){var t,n,r,i=e[0],o=e[1],a=e[2];return t=1*i+0*o+1.13983*a,n=1*i+-.39465*o+-.5806*a,r=1*i+2.02311*o+0*a,[255*(t=Math.min(Math.max(0,t),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]},t.rgb2yuv=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255;return[.299*t+.587*n+.114*r,-.14713*t+-.28886*n+.436*r,.615*t+-.51499*n+-.10001*r]}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(141),o=function(){function e(){r(this,"_callbacks",void 0),r(this,"_isDispatching",void 0),r(this,"_isHandled",void 0),r(this,"_isPending",void 0),r(this,"_lastID",void 0),r(this,"_pendingPayload",void 0),this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}var t=e.prototype;return t.register=function(e){var t="ID_"+this._lastID++;return this._callbacks[t]=e,t},t.unregister=function(e){this._callbacks[e]||i(!1),delete this._callbacks[e]},t.waitFor=function(e){this._isDispatching||i(!1);for(var t=0;t<e.length;t++){var n=e[t];this._isPending[n]?this._isHandled[n]||i(!1):(this._callbacks[n]||i(!1),this._invokeCallback(n))}},t.dispatch=function(e){this._isDispatching&&i(!1),this._startDispatching(e);try{for(var t in this._callbacks)this._isPending[t]||this._invokeCallback(t)}finally{this._stopDispatching()}},t.isDispatching=function(){return this._isDispatching},t._invokeCallback=function(e){this._isPending[e]=!0,this._callbacks[e](this._pendingPayload),this._isHandled[e]=!0},t._startDispatching=function(e){for(var t in this._callbacks)this._isPending[t]=!1,this._isHandled[t]=!1;this._pendingPayload=e,this._isDispatching=!0},t._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},e}();e.exports=o},function(e,t,n){"use strict";e.exports=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(!e){var o;if(void 0===t)o=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;(o=new Error(t.replace(/%s/g,(function(){return String(r[a++])})))).name="Invariant Violation"}throw o.framesToPop=1,o}}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?h(e):t}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f(this,n)}}n.r(t);var g=n(0),y=n.n(g);function v(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function b(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!=n?n:null}.bind(this))}function x(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function w(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,r=null,i=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?r="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(r="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?i="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(i="UNSAFE_componentWillUpdate"),null!==n||null!==r||null!==i){var o=e.displayName||e.name,a="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+o+" uses "+a+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==r?"\n  "+r:"")+(null!==i?"\n  "+i:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=v,t.componentWillReceiveProps=b),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=x;var s=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;s.call(this,e,t,r)}}return e}function _(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function C(e){var t=function(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}(e);return"number"===t&&(t=isNaN(e)?"nan":(0|e)!=e?"float":"integer"),t}v.__suppressDeprecationWarning=!0,b.__suppressDeprecationWarning=!0,x.__suppressDeprecationWarning=!0;var S={scheme:"rjv-default",author:"mac gainor",base00:"rgba(0, 0, 0, 0)",base01:"rgb(245, 245, 245)",base02:"rgb(235, 235, 235)",base03:"#93a1a1",base04:"rgba(0, 0, 0, 0.3)",base05:"#586e75",base06:"#073642",base07:"#002b36",base08:"#d33682",base09:"#cb4b16",base0A:"#dc322f",base0B:"#859900",base0C:"#6c71c4",base0D:"#586e75",base0E:"#2aa198",base0F:"#268bd2"},k={scheme:"rjv-grey",author:"mac gainor",base00:"rgba(1, 1, 1, 0)",base01:"rgba(1, 1, 1, 0.1)",base02:"rgba(0, 0, 0, 0.2)",base03:"rgba(1, 1, 1, 0.3)",base04:"rgba(0, 0, 0, 0.4)",base05:"rgba(1, 1, 1, 0.5)",base06:"rgba(1, 1, 1, 0.6)",base07:"rgba(1, 1, 1, 0.7)",base08:"rgba(1, 1, 1, 0.8)",base09:"rgba(1, 1, 1, 0.8)",base0A:"rgba(1, 1, 1, 0.8)",base0B:"rgba(1, 1, 1, 0.8)",base0C:"rgba(1, 1, 1, 0.8)",base0D:"rgba(1, 1, 1, 0.8)",base0E:"rgba(1, 1, 1, 0.8)",base0F:"rgba(1, 1, 1, 0.8)"},E={white:"#fff",black:"#000",transparent:"rgba(1, 1, 1, 0)",globalFontFamily:"monospace",globalCursor:"default",indentBlockWidth:"5px",braceFontWeight:"bold",braceCursor:"pointer",ellipsisFontSize:"18px",ellipsisLineHeight:"10px",ellipsisCursor:"pointer",keyMargin:"0px 5px",keyLetterSpacing:"0.5px",keyFontStyle:"none",keyBorderRadius:"3px",keyColonWeight:"bold",keyVerticalAlign:"top",keyOpacity:"0.85",keyOpacityHover:"1",keyValPaddingTop:"3px",keyValPaddingBottom:"3px",keyValPaddingRight:"5px",keyValBorderLeft:"1px solid",keyValBorderHover:"2px solid",keyValPaddingHover:"3px 5px 3px 4px",pushedContentMarginLeft:"6px",variableValuePaddingRight:"6px",nullFontSize:"11px",nullFontWeight:"bold",nullPadding:"1px 2px",nullBorderRadius:"3px",nanFontSize:"11px",nanFontWeight:"bold",nanPadding:"1px 2px",nanBorderRadius:"3px",undefinedFontSize:"11px",undefinedFontWeight:"bold",undefinedPadding:"1px 2px",undefinedBorderRadius:"3px",dataTypeFontSize:"11px",dataTypeMarginRight:"4px",datatypeOpacity:"0.8",objectSizeBorderRadius:"3px",objectSizeFontStyle:"italic",objectSizeMargin:"0px 6px 0px 0px",clipboardCursor:"pointer",clipboardCheckMarginLeft:"-12px",metaDataPadding:"0px 0px 0px 10px",arrayGroupMetaPadding:"0px 0px 0px 4px",iconContainerWidth:"17px",tooltipPadding:"4px",editInputMinWidth:"130px",editInputBorderRadius:"2px",editInputPadding:"5px",editInputMarginRight:"4px",editInputFontFamily:"monospace",iconCursor:"pointer",iconFontSize:"15px",iconPaddingRight:"1px",dateValueMarginLeft:"2px",iconMarginRight:"3px",detectedRowPaddingTop:"3px",addKeyCoverBackground:"rgba(255, 255, 255, 0.3)",addKeyCoverPosition:"absolute",addKeyCoverPositionPx:"0px",addKeyModalWidth:"200px",addKeyModalMargin:"auto",addKeyModalPadding:"10px",addKeyModalRadius:"3px"},T=n(45),I=function(e){var t=function(e){return{backgroundColor:e.base00,ellipsisColor:e.base09,braceColor:e.base07,expandedIcon:e.base0D,collapsedIcon:e.base0E,keyColor:e.base07,arrayKeyColor:e.base0C,objectSize:e.base04,copyToClipboard:e.base0F,copyToClipboardCheck:e.base0D,objectBorder:e.base02,dataTypes:{boolean:e.base0E,date:e.base0D,float:e.base0B,function:e.base0D,integer:e.base0F,string:e.base09,nan:e.base08,null:e.base0A,undefined:e.base05,regexp:e.base0A,background:e.base02},editVariable:{editIcon:e.base0E,cancelIcon:e.base09,removeIcon:e.base09,addIcon:e.base0E,checkIcon:e.base0E,background:e.base01,color:e.base0A,border:e.base07},addKeyModal:{background:e.base05,border:e.base04,color:e.base0A,labelColor:e.base01},validationFailure:{background:e.base09,iconColor:e.base01,fontColor:e.base01}}}(e);return{"app-container":{fontFamily:E.globalFontFamily,cursor:E.globalCursor,backgroundColor:t.backgroundColor,position:"relative"},ellipsis:{display:"inline-block",color:t.ellipsisColor,fontSize:E.ellipsisFontSize,lineHeight:E.ellipsisLineHeight,cursor:E.ellipsisCursor},"brace-row":{display:"inline-block",cursor:"pointer"},brace:{display:"inline-block",cursor:E.braceCursor,fontWeight:E.braceFontWeight,color:t.braceColor},"expanded-icon":{color:t.expandedIcon},"collapsed-icon":{color:t.collapsedIcon},colon:{display:"inline-block",margin:E.keyMargin,color:t.keyColor,verticalAlign:"top"},objectKeyVal:function(e,n){return{style:o({paddingTop:E.keyValPaddingTop,paddingRight:E.keyValPaddingRight,paddingBottom:E.keyValPaddingBottom,borderLeft:E.keyValBorderLeft+" "+t.objectBorder,":hover":{paddingLeft:n.paddingLeft-1+"px",borderLeft:E.keyValBorderHover+" "+t.objectBorder}},n)}},"object-key-val-no-border":{padding:E.keyValPadding},"pushed-content":{marginLeft:E.pushedContentMarginLeft},variableValue:function(e,t){return{style:o({display:"inline-block",paddingRight:E.variableValuePaddingRight,position:"relative"},t)}},"object-name":{display:"inline-block",color:t.keyColor,letterSpacing:E.keyLetterSpacing,fontStyle:E.keyFontStyle,verticalAlign:E.keyVerticalAlign,opacity:E.keyOpacity,":hover":{opacity:E.keyOpacityHover}},"array-key":{display:"inline-block",color:t.arrayKeyColor,letterSpacing:E.keyLetterSpacing,fontStyle:E.keyFontStyle,verticalAlign:E.keyVerticalAlign,opacity:E.keyOpacity,":hover":{opacity:E.keyOpacityHover}},"object-size":{color:t.objectSize,borderRadius:E.objectSizeBorderRadius,fontStyle:E.objectSizeFontStyle,margin:E.objectSizeMargin,cursor:"default"},"data-type-label":{fontSize:E.dataTypeFontSize,marginRight:E.dataTypeMarginRight,opacity:E.datatypeOpacity},boolean:{display:"inline-block",color:t.dataTypes.boolean},date:{display:"inline-block",color:t.dataTypes.date},"date-value":{marginLeft:E.dateValueMarginLeft},float:{display:"inline-block",color:t.dataTypes.float},function:{display:"inline-block",color:t.dataTypes.function,cursor:"pointer",whiteSpace:"pre-line"},"function-value":{fontStyle:"italic"},integer:{display:"inline-block",color:t.dataTypes.integer},string:{display:"inline-block",color:t.dataTypes.string},nan:{display:"inline-block",color:t.dataTypes.nan,fontSize:E.nanFontSize,fontWeight:E.nanFontWeight,backgroundColor:t.dataTypes.background,padding:E.nanPadding,borderRadius:E.nanBorderRadius},null:{display:"inline-block",color:t.dataTypes.null,fontSize:E.nullFontSize,fontWeight:E.nullFontWeight,backgroundColor:t.dataTypes.background,padding:E.nullPadding,borderRadius:E.nullBorderRadius},undefined:{display:"inline-block",color:t.dataTypes.undefined,fontSize:E.undefinedFontSize,padding:E.undefinedPadding,borderRadius:E.undefinedBorderRadius,backgroundColor:t.dataTypes.background},regexp:{display:"inline-block",color:t.dataTypes.regexp},"copy-to-clipboard":{cursor:E.clipboardCursor},"copy-icon":{color:t.copyToClipboard,fontSize:E.iconFontSize,marginRight:E.iconMarginRight,verticalAlign:"top"},"copy-icon-copied":{color:t.copyToClipboardCheck,marginLeft:E.clipboardCheckMarginLeft},"array-group-meta-data":{display:"inline-block",padding:E.arrayGroupMetaPadding},"object-meta-data":{display:"inline-block",padding:E.metaDataPadding},"icon-container":{display:"inline-block",width:E.iconContainerWidth},tooltip:{padding:E.tooltipPadding},removeVarIcon:{verticalAlign:"top",display:"inline-block",color:t.editVariable.removeIcon,cursor:E.iconCursor,fontSize:E.iconFontSize,marginRight:E.iconMarginRight},addVarIcon:{verticalAlign:"top",display:"inline-block",color:t.editVariable.addIcon,cursor:E.iconCursor,fontSize:E.iconFontSize,marginRight:E.iconMarginRight},editVarIcon:{verticalAlign:"top",display:"inline-block",color:t.editVariable.editIcon,cursor:E.iconCursor,fontSize:E.iconFontSize,marginRight:E.iconMarginRight},"edit-icon-container":{display:"inline-block",verticalAlign:"top"},"check-icon":{display:"inline-block",cursor:E.iconCursor,color:t.editVariable.checkIcon,fontSize:E.iconFontSize,paddingRight:E.iconPaddingRight},"cancel-icon":{display:"inline-block",cursor:E.iconCursor,color:t.editVariable.cancelIcon,fontSize:E.iconFontSize,paddingRight:E.iconPaddingRight},"edit-input":{display:"inline-block",minWidth:E.editInputMinWidth,borderRadius:E.editInputBorderRadius,backgroundColor:t.editVariable.background,color:t.editVariable.color,padding:E.editInputPadding,marginRight:E.editInputMarginRight,fontFamily:E.editInputFontFamily},"detected-row":{paddingTop:E.detectedRowPaddingTop},"key-modal-request":{position:E.addKeyCoverPosition,top:E.addKeyCoverPositionPx,left:E.addKeyCoverPositionPx,right:E.addKeyCoverPositionPx,bottom:E.addKeyCoverPositionPx,backgroundColor:E.addKeyCoverBackground},"key-modal":{width:E.addKeyModalWidth,backgroundColor:t.addKeyModal.background,marginLeft:E.addKeyModalMargin,marginRight:E.addKeyModalMargin,padding:E.addKeyModalPadding,borderRadius:E.addKeyModalRadius,marginTop:"15px",position:"relative"},"key-modal-label":{color:t.addKeyModal.labelColor,marginLeft:"2px",marginBottom:"5px",fontSize:"11px"},"key-modal-input-container":{overflow:"hidden"},"key-modal-input":{width:"100%",padding:"3px 6px",fontFamily:"monospace",color:t.addKeyModal.color,border:"none",boxSizing:"border-box",borderRadius:"2px"},"key-modal-cancel":{backgroundColor:t.editVariable.removeIcon,position:"absolute",top:"0px",right:"0px",borderRadius:"0px 3px 0px 3px",cursor:"pointer"},"key-modal-cancel-icon":{color:t.addKeyModal.labelColor,fontSize:E.iconFontSize,transform:"rotate(45deg)"},"key-modal-submit":{color:t.editVariable.addIcon,fontSize:E.iconFontSize,position:"absolute",right:"2px",top:"3px",cursor:"pointer"},"function-ellipsis":{display:"inline-block",color:t.ellipsisColor,fontSize:E.ellipsisFontSize,lineHeight:E.ellipsisLineHeight,cursor:E.ellipsisCursor},"validation-failure":{float:"right",padding:"3px 6px",borderRadius:"2px",cursor:"pointer",color:t.validationFailure.fontColor,backgroundColor:t.validationFailure.background},"validation-failure-label":{marginRight:"6px"},"validation-failure-clear":{position:"relative",verticalAlign:"top",cursor:"pointer",color:t.validationFailure.iconColor,fontSize:E.iconFontSize,transform:"rotate(45deg)"}}};function P(e,t,n){return e||console.error("theme has not been set"),function(e){var t=S;return!1!==e&&"none"!==e||(t=k),Object(T.createStyling)(I,{defaultBase16:t})(e)}(e)(t,n)}var O=function(e){c(n,e);var t=m(n);function n(){return a(this,n),t.apply(this,arguments)}return l(n,[{key:"render",value:function(){var e=this.props,t=(e.rjvId,e.type_name),n=e.displayDataTypes,r=e.theme;return n?y.a.createElement("span",Object.assign({className:"data-type-label"},P(r,"data-type-label")),t):null}}]),n}(y.a.PureComponent),N=function(e){c(n,e);var t=m(n);function n(){return a(this,n),t.apply(this,arguments)}return l(n,[{key:"render",value:function(){var e=this.props;return y.a.createElement("div",P(e.theme,"boolean"),y.a.createElement(O,Object.assign({type_name:"bool"},e)),e.value?"true":"false")}}]),n}(y.a.PureComponent),R=function(e){c(n,e);var t=m(n);function n(){return a(this,n),t.apply(this,arguments)}return l(n,[{key:"render",value:function(){var e=this.props;return y.a.createElement("div",P(e.theme,"date"),y.a.createElement(O,Object.assign({type_name:"date"},e)),y.a.createElement("span",Object.assign({className:"date-value"},P(e.theme,"date-value")),e.value.toLocaleTimeString("en-us",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})))}}]),n}(y.a.PureComponent),A=function(e){c(n,e);var t=m(n);function n(){return a(this,n),t.apply(this,arguments)}return l(n,[{key:"render",value:function(){var e=this.props;return y.a.createElement("div",P(e.theme,"float"),y.a.createElement(O,Object.assign({type_name:"float"},e)),this.props.value)}}]),n}(y.a.PureComponent);function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function V(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}function M(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=V(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function F(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||V(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var L=n(46),z=new(n(47).Dispatcher),j=new(function(e){c(n,e);var t=m(n);function n(){var e;a(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).objects={},e.set=function(t,n,r,i){void 0===e.objects[t]&&(e.objects[t]={}),void 0===e.objects[t][n]&&(e.objects[t][n]={}),e.objects[t][n][r]=i},e.get=function(t,n,r,i){return void 0===e.objects[t]||void 0===e.objects[t][n]||null==e.objects[t][n][r]?i:e.objects[t][n][r]},e.handleAction=function(t){var n=t.rjvId,r=t.data;switch(t.name){case"RESET":e.emit("reset-"+n);break;case"VARIABLE_UPDATED":t.data.updated_src=e.updateSrc(n,r),e.set(n,"action","variable-update",o(o({},r),{},{type:"variable-edited"})),e.emit("variable-update-"+n);break;case"VARIABLE_REMOVED":t.data.updated_src=e.updateSrc(n,r),e.set(n,"action","variable-update",o(o({},r),{},{type:"variable-removed"})),e.emit("variable-update-"+n);break;case"VARIABLE_ADDED":t.data.updated_src=e.updateSrc(n,r),e.set(n,"action","variable-update",o(o({},r),{},{type:"variable-added"})),e.emit("variable-update-"+n);break;case"ADD_VARIABLE_KEY_REQUEST":e.set(n,"action","new-key-request",r),e.emit("add-key-request-"+n)}},e.updateSrc=function(t,n){var r=n.name,i=n.namespace,o=n.new_value,a=(n.existing_value,n.variable_removed);i.shift();var s,l=e.get(t,"global","src"),u=e.deepCopy(l,F(i)),c=u,p=M(i);try{for(p.s();!(s=p.n()).done;)c=c[s.value]}catch(e){p.e(e)}finally{p.f()}return a?"array"==C(c)?c.splice(r,1):delete c[r]:null!==r?c[r]=o:u=o,e.set(t,"global","src",u),u},e.deepCopy=function(t,n){var r,i=C(t),a=n.shift();return"array"==i?r=F(t):"object"==i&&(r=o({},t)),void 0!==a&&(r[a]=e.deepCopy(t[a],n)),r},e}return n}(L.EventEmitter));z.register(j.handleAction.bind(j));var q=j,$=function(e){c(n,e);var t=m(n);function n(e){var r;return a(this,n),(r=t.call(this,e)).toggleCollapsed=function(){r.setState({collapsed:!r.state.collapsed},(function(){q.set(r.props.rjvId,r.props.namespace,"collapsed",r.state.collapsed)}))},r.getFunctionDisplay=function(e){var t=h(r).props;return e?y.a.createElement("span",null,r.props.value.toString().slice(9,-1).replace(/\{[\s\S]+/,""),y.a.createElement("span",{className:"function-collapsed",style:{fontWeight:"bold"}},y.a.createElement("span",null,"{"),y.a.createElement("span",P(t.theme,"ellipsis"),"..."),y.a.createElement("span",null,"}"))):r.props.value.toString().slice(9,-1)},r.state={collapsed:q.get(e.rjvId,e.namespace,"collapsed",!0)},r}return l(n,[{key:"render",value:function(){var e=this.props,t=this.state.collapsed;return y.a.createElement("div",P(e.theme,"function"),y.a.createElement(O,Object.assign({type_name:"function"},e)),y.a.createElement("span",Object.assign({},P(e.theme,"function-value"),{className:"rjv-function-container",onClick:this.toggleCollapsed}),this.getFunctionDisplay(t)))}}]),n}(y.a.PureComponent),B=function(e){c(n,e);var t=m(n);function n(){return a(this,n),t.apply(this,arguments)}return l(n,[{key:"render",value:function(){return y.a.createElement("div",P(this.props.theme,"nan"),"NaN")}}]),n}(y.a.PureComponent),U=function(e){c(n,e);var t=m(n);function n(){return a(this,n),t.apply(this,arguments)}return l(n,[{key:"render",value:function(){return y.a.createElement("div",P(this.props.theme,"null"),"NULL")}}]),n}(y.a.PureComponent),W=function(e){c(n,e);var t=m(n);function n(){return a(this,n),t.apply(this,arguments)}return l(n,[{key:"render",value:function(){var e=this.props;return y.a.createElement("div",P(e.theme,"integer"),y.a.createElement(O,Object.assign({type_name:"int"},e)),this.props.value)}}]),n}(y.a.PureComponent),H=function(e){c(n,e);var t=m(n);function n(){return a(this,n),t.apply(this,arguments)}return l(n,[{key:"render",value:function(){var e=this.props;return y.a.createElement("div",P(e.theme,"regexp"),y.a.createElement(O,Object.assign({type_name:"regexp"},e)),this.props.value.toString())}}]),n}(y.a.PureComponent),Q=function(e){c(n,e);var t=m(n);function n(e){var r;return a(this,n),(r=t.call(this,e)).toggleCollapsed=function(){r.setState({collapsed:!r.state.collapsed},(function(){q.set(r.props.rjvId,r.props.namespace,"collapsed",r.state.collapsed)}))},r.state={collapsed:q.get(e.rjvId,e.namespace,"collapsed",!0)},r}return l(n,[{key:"render",value:function(){this.state.collapsed;var e=this.props,t=e.collapseStringsAfterLength,n=e.theme,r=e.value,i={style:{cursor:"default"}};return"integer"===C(t)&&r.length>t&&(i.style.cursor="pointer",this.state.collapsed&&(r=y.a.createElement("span",null,r.substring(0,t),y.a.createElement("span",P(n,"ellipsis")," ...")))),y.a.createElement("div",P(n,"string"),y.a.createElement(O,Object.assign({type_name:"string"},e)),y.a.createElement("span",Object.assign({className:"string-value"},i,{onClick:this.toggleCollapsed}),'"',r,'"'))}}]),n}(y.a.PureComponent),G=function(e){c(n,e);var t=m(n);function n(){return a(this,n),t.apply(this,arguments)}return l(n,[{key:"render",value:function(){return y.a.createElement("div",P(this.props.theme,"undefined"),"undefined")}}]),n}(y.a.PureComponent);function K(){return(K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var J=g.useLayoutEffect,X=function(e,t){"function"!=typeof e?e.current=t:e(t)},Y={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Z=function(e){Object.keys(Y).forEach((function(t){e.style.setProperty(t,Y[t],"important")}))},ee=null,te=function(){},ne=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width"],re=!!document.documentElement.currentStyle,ie=Object(g.forwardRef)((function(e,t){var n,r=e.cacheMeasurements,i=e.maxRows,o=e.minRows,a=e.onChange,s=void 0===a?te:a,l=e.onHeightChange,u=void 0===l?te:l,c=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),p=void 0!==c.value,d=Object(g.useRef)(null),h=function(e,t){var n=Object(g.useRef)();return Object(g.useCallback)((function(r){e.current=r,n.current&&X(n.current,null),n.current=t,t&&X(t,r)}),[t])}(d,t),f=Object(g.useRef)(0),m=Object(g.useRef)(),y=function(){var e=d.current,t=r&&m.current?m.current:function(e){var t=window.getComputedStyle(e);if(null===t)return null;var n,r=(n=t,ne.reduce((function(e,t){return e[t]=n[t],e}),{})),i=r.boxSizing;return""===i?null:(re&&"border-box"===i&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px"),{sizingStyle:r,paddingSize:parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),borderSize:parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth)})}(e);if(t){m.current=t;var n=function(e,t,n,r){void 0===n&&(n=1),void 0===r&&(r=1/0),ee||((ee=document.createElement("textarea")).setAttribute("tab-index","-1"),ee.setAttribute("aria-hidden","true"),Z(ee)),null===ee.parentNode&&document.body.appendChild(ee);var i=e.paddingSize,o=e.borderSize,a=e.sizingStyle,s=a.boxSizing;Object.keys(a).forEach((function(e){var t=e;ee.style[t]=a[t]})),Z(ee),ee.value=t;var l=function(e,t){var n=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?n+t.borderSize:n-t.paddingSize}(ee,e);ee.value="x";var u=ee.scrollHeight-i,c=u*n;"border-box"===s&&(c=c+i+o),l=Math.max(c,l);var p=u*r;return"border-box"===s&&(p=p+i+o),[l=Math.min(p,l),u]}(t,e.value||e.placeholder||"x",o,i),a=n[0],s=n[1];f.current!==a&&(f.current=a,e.style.setProperty("height",a+"px","important"),u(a,{rowHeight:s}))}};return Object(g.useLayoutEffect)(y),n=function(e){var t=Object(g.useRef)(e);return J((function(){t.current=e})),t}(y),Object(g.useLayoutEffect)((function(){var e=function(e){n.current(e)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(g.createElement)("textarea",K({},c,{onChange:function(e){p||y(),s(e)},ref:h}))}));function oe(e){e=e.trim();try{if("["===(e=JSON.stringify(JSON.parse(e)))[0])return ae("array",JSON.parse(e));if("{"===e[0])return ae("object",JSON.parse(e));if(e.match(/\-?\d+\.\d+/)&&e.match(/\-?\d+\.\d+/)[0]===e)return ae("float",parseFloat(e));if(e.match(/\-?\d+e-\d+/)&&e.match(/\-?\d+e-\d+/)[0]===e)return ae("float",Number(e));if(e.match(/\-?\d+/)&&e.match(/\-?\d+/)[0]===e)return ae("integer",parseInt(e));if(e.match(/\-?\d+e\+\d+/)&&e.match(/\-?\d+e\+\d+/)[0]===e)return ae("integer",Number(e))}catch(e){}switch(e=e.toLowerCase()){case"undefined":return ae("undefined",void 0);case"nan":return ae("nan",NaN);case"null":return ae("null",null);case"true":return ae("boolean",!0);case"false":return ae("boolean",!1);default:if(e=Date.parse(e))return ae("date",new Date(e))}return ae(!1,null)}function ae(e,t){return{type:e,value:t}}var se=function(e){c(n,e);var t=m(n);function n(){return a(this,n),t.apply(this,arguments)}return l(n,[{key:"render",value:function(){var e=this.props,t=e.style,n=_(e,["style"]);return y.a.createElement("span",n,y.a.createElement("svg",Object.assign({},be(t),{viewBox:"0 0 24 24",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),y.a.createElement("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M7,13H17V11H7"})))}}]),n}(y.a.PureComponent),le=function(e){c(n,e);var t=m(n);function n(){return a(this,n),t.apply(this,arguments)}return l(n,[{key:"render",value:function(){var e=this.props,t=e.style,n=_(e,["style"]);return y.a.createElement("span",n,y.a.createElement("svg",Object.assign({},be(t),{viewBox:"0 0 24 24",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),y.a.createElement("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"})))}}]),n}(y.a.PureComponent),ue=function(e){c(n,e);var t=m(n);function n(){return a(this,n),t.apply(this,arguments)}return l(n,[{key:"render",value:function(){var e=this.props,t=e.style,n=_(e,["style"]),r=be(t).style;return y.a.createElement("span",n,y.a.createElement("svg",{fill:r.color,width:r.height,height:r.width,style:r,viewBox:"0 0 1792 1792"},y.a.createElement("path",{d:"M1344 800v64q0 14-9 23t-23 9h-832q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h832q14 0 23 9t9 23zm128 448v-832q0-66-47-113t-113-47h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113zm128-832v832q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q119 0 203.5 84.5t84.5 203.5z"})))}}]),n}(y.a.PureComponent),ce=function(e){c(n,e);var t=m(n);function n(){return a(this,n),t.apply(this,arguments)}return l(n,[{key:"render",value:function(){var e=this.props,t=e.style,n=_(e,["style"]),r=be(t).style;return y.a.createElement("span",n,y.a.createElement("svg",{fill:r.color,width:r.height,height:r.width,style:r,viewBox:"0 0 1792 1792"},y.a.createElement("path",{d:"M1344 800v64q0 14-9 23t-23 9h-352v352q0 14-9 23t-23 9h-64q-14 0-23-9t-9-23v-352h-352q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h352v-352q0-14 9-23t23-9h64q14 0 23 9t9 23v352h352q14 0 23 9t9 23zm128 448v-832q0-66-47-113t-113-47h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113zm128-832v832q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q119 0 203.5 84.5t84.5 203.5z"})))}}]),n}(y.a.PureComponent),pe=function(e){c(n,e);var t=m(n);function n(){return a(this,n),t.apply(this,arguments)}return l(n,[{key:"render",value:function(){var e=this.props,t=e.style,n=_(e,["style"]);return y.a.createElement("span",n,y.a.createElement("svg",{style:o(o({},be(t).style),{},{paddingLeft:"2px",verticalAlign:"top"}),viewBox:"0 0 15 15",fill:"currentColor"},y.a.createElement("path",{d:"M0 14l6-6-6-6z"})))}}]),n}(y.a.PureComponent),de=function(e){c(n,e);var t=m(n);function n(){return a(this,n),t.apply(this,arguments)}return l(n,[{key:"render",value:function(){var e=this.props,t=e.style,n=_(e,["style"]);return y.a.createElement("span",n,y.a.createElement("svg",{style:o(o({},be(t).style),{},{paddingLeft:"2px",verticalAlign:"top"}),viewBox:"0 0 15 15",fill:"currentColor"},y.a.createElement("path",{d:"M0 5l6 6 6-6z"})))}}]),n}(y.a.PureComponent),he=function(e){c(n,e);var t=m(n);function n(){return a(this,n),t.apply(this,arguments)}return l(n,[{key:"render",value:function(){var e=this.props,t=e.style,n=_(e,["style"]);return y.a.createElement("span",n,y.a.createElement("svg",Object.assign({},be(t),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),y.a.createElement("g",null,y.a.createElement("path",{d:"m30 35h-25v-22.5h25v7.5h2.5v-12.5c0-1.4-1.1-2.5-2.5-2.5h-7.5c0-2.8-2.2-5-5-5s-5 2.2-5 5h-7.5c-1.4 0-2.5 1.1-2.5 2.5v27.5c0 1.4 1.1 2.5 2.5 2.5h25c1.4 0 2.5-1.1 2.5-2.5v-5h-2.5v5z m-20-27.5h2.5s2.5-1.1 2.5-2.5 1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5 1.3 2.5 2.5 2.5h2.5s2.5 1.1 2.5 2.5h-20c0-1.5 1.1-2.5 2.5-2.5z m-2.5 20h5v-2.5h-5v2.5z m17.5-5v-5l-10 7.5 10 7.5v-5h12.5v-5h-12.5z m-17.5 10h7.5v-2.5h-7.5v2.5z m12.5-17.5h-12.5v2.5h12.5v-2.5z m-7.5 5h-5v2.5h5v-2.5z"}))))}}]),n}(y.a.PureComponent),fe=function(e){c(n,e);var t=m(n);function n(){return a(this,n),t.apply(this,arguments)}return l(n,[{key:"render",value:function(){var e=this.props,t=e.style,n=_(e,["style"]);return y.a.createElement("span",n,y.a.createElement("svg",Object.assign({},be(t),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),y.a.createElement("g",null,y.a.createElement("path",{d:"m28.6 25q0-0.5-0.4-1l-4-4 4-4q0.4-0.5 0.4-1 0-0.6-0.4-1.1l-2-2q-0.4-0.4-1-0.4-0.6 0-1 0.4l-4.1 4.1-4-4.1q-0.4-0.4-1-0.4-0.6 0-1 0.4l-2 2q-0.5 0.5-0.5 1.1 0 0.5 0.5 1l4 4-4 4q-0.5 0.5-0.5 1 0 0.7 0.5 1.1l2 2q0.4 0.4 1 0.4 0.6 0 1-0.4l4-4.1 4.1 4.1q0.4 0.4 1 0.4 0.6 0 1-0.4l2-2q0.4-0.4 0.4-1z m8.7-5q0 4.7-2.3 8.6t-6.3 6.2-8.6 2.3-8.6-2.3-6.2-6.2-2.3-8.6 2.3-8.6 6.2-6.2 8.6-2.3 8.6 2.3 6.3 6.2 2.3 8.6z"}))))}}]),n}(y.a.PureComponent),me=function(e){c(n,e);var t=m(n);function n(){return a(this,n),t.apply(this,arguments)}return l(n,[{key:"render",value:function(){var e=this.props,t=e.style,n=_(e,["style"]);return y.a.createElement("span",n,y.a.createElement("svg",Object.assign({},be(t),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),y.a.createElement("g",null,y.a.createElement("path",{d:"m30.1 21.4v-2.8q0-0.6-0.4-1t-1-0.5h-5.7v-5.7q0-0.6-0.4-1t-1-0.4h-2.9q-0.6 0-1 0.4t-0.4 1v5.7h-5.7q-0.6 0-1 0.5t-0.5 1v2.8q0 0.6 0.5 1t1 0.5h5.7v5.7q0 0.5 0.4 1t1 0.4h2.9q0.6 0 1-0.4t0.4-1v-5.7h5.7q0.6 0 1-0.5t0.4-1z m7.2-1.4q0 4.7-2.3 8.6t-6.3 6.2-8.6 2.3-8.6-2.3-6.2-6.2-2.3-8.6 2.3-8.6 6.2-6.2 8.6-2.3 8.6 2.3 6.3 6.2 2.3 8.6z"}))))}}]),n}(y.a.PureComponent),ge=function(e){c(n,e);var t=m(n);function n(){return a(this,n),t.apply(this,arguments)}return l(n,[{key:"render",value:function(){var e=this.props,t=e.style,n=_(e,["style"]);return y.a.createElement("span",n,y.a.createElement("svg",Object.assign({},be(t),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),y.a.createElement("g",null,y.a.createElement("path",{d:"m31.6 21.6h-10v10h-3.2v-10h-10v-3.2h10v-10h3.2v10h10v3.2z"}))))}}]),n}(y.a.PureComponent),ye=function(e){c(n,e);var t=m(n);function n(){return a(this,n),t.apply(this,arguments)}return l(n,[{key:"render",value:function(){var e=this.props,t=e.style,n=_(e,["style"]);return y.a.createElement("span",n,y.a.createElement("svg",Object.assign({},be(t),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),y.a.createElement("g",null,y.a.createElement("path",{d:"m19.8 26.4l2.6-2.6-3.4-3.4-2.6 2.6v1.3h2.2v2.1h1.2z m9.8-16q-0.3-0.4-0.7 0l-7.8 7.8q-0.4 0.4 0 0.7t0.7 0l7.8-7.8q0.4-0.4 0-0.7z m1.8 13.2v4.3q0 2.6-1.9 4.5t-4.5 1.9h-18.6q-2.6 0-4.5-1.9t-1.9-4.5v-18.6q0-2.7 1.9-4.6t4.5-1.8h18.6q1.4 0 2.6 0.5 0.3 0.2 0.4 0.5 0.1 0.4-0.2 0.7l-1.1 1.1q-0.3 0.3-0.7 0.1-0.5-0.1-1-0.1h-18.6q-1.4 0-2.5 1.1t-1 2.5v18.6q0 1.4 1 2.5t2.5 1h18.6q1.5 0 2.5-1t1.1-2.5v-2.9q0-0.2 0.2-0.4l1.4-1.5q0.3-0.3 0.8-0.1t0.4 0.6z m-2.1-16.5l6.4 6.5-15 15h-6.4v-6.5z m9.9 3l-2.1 2-6.4-6.4 2.1-2q0.6-0.7 1.5-0.7t1.5 0.7l3.4 3.4q0.6 0.6 0.6 1.5t-0.6 1.5z"}))))}}]),n}(y.a.PureComponent),ve=function(e){c(n,e);var t=m(n);function n(){return a(this,n),t.apply(this,arguments)}return l(n,[{key:"render",value:function(){var e=this.props,t=e.style,n=_(e,["style"]);return y.a.createElement("span",n,y.a.createElement("svg",Object.assign({},be(t),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),y.a.createElement("g",null,y.a.createElement("path",{d:"m31.7 16.4q0-0.6-0.4-1l-2.1-2.1q-0.4-0.4-1-0.4t-1 0.4l-9.1 9.1-5-5q-0.5-0.4-1-0.4t-1 0.4l-2.1 2q-0.4 0.4-0.4 1 0 0.6 0.4 1l8.1 8.1q0.4 0.4 1 0.4 0.6 0 1-0.4l12.2-12.1q0.4-0.4 0.4-1z m5.6 3.6q0 4.7-2.3 8.6t-6.3 6.2-8.6 2.3-8.6-2.3-6.2-6.2-2.3-8.6 2.3-8.6 6.2-6.2 8.6-2.3 8.6 2.3 6.3 6.2 2.3 8.6z"}))))}}]),n}(y.a.PureComponent);function be(e){return e||(e={}),{style:o(o({verticalAlign:"middle"},e),{},{color:e.color?e.color:"#000000",height:"1em",width:"1em"})}}var xe=function(e){c(n,e);var t=m(n);function n(e){var r;return a(this,n),(r=t.call(this,e)).copiedTimer=null,r.handleCopy=function(){var e=document.createElement("textarea"),t=r.props,n=t.clickCallback,i=t.src,o=t.namespace;e.innerHTML=JSON.stringify(r.clipboardValue(i),null,"  "),document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),r.copiedTimer=setTimeout((function(){r.setState({copied:!1})}),5500),r.setState({copied:!0},(function(){"function"==typeof n&&n({src:i,namespace:o,name:o[o.length-1]})}))},r.getClippyIcon=function(){var e=r.props.theme;return r.state.copied?y.a.createElement("span",null,y.a.createElement(he,Object.assign({className:"copy-icon"},P(e,"copy-icon"))),y.a.createElement("span",P(e,"copy-icon-copied"),"")):y.a.createElement(he,Object.assign({className:"copy-icon"},P(e,"copy-icon")))},r.clipboardValue=function(e){switch(C(e)){case"function":case"regexp":return e.toString();default:return e}},r.state={copied:!1},r}return l(n,[{key:"componentWillUnmount",value:function(){this.copiedTimer&&(clearTimeout(this.copiedTimer),this.copiedTimer=null)}},{key:"render",value:function(){var e=this.props,t=(e.src,e.theme),n=e.hidden,r=e.rowHovered,i=P(t,"copy-to-clipboard").style,a="inline";return n&&(a="none"),y.a.createElement("span",{className:"copy-to-clipboard-container",title:"Copy to clipboard",style:{verticalAlign:"top",display:r?"inline-block":"none"}},y.a.createElement("span",{style:o(o({},i),{},{display:a}),onClick:this.handleCopy},this.getClippyIcon()))}}]),n}(y.a.PureComponent),we=function(e){c(n,e);var t=m(n);function n(e){var r;return a(this,n),(r=t.call(this,e)).getEditIcon=function(){var e=r.props,t=e.variable,n=e.theme;return y.a.createElement("div",{className:"click-to-edit",style:{verticalAlign:"top",display:r.state.hovered?"inline-block":"none"}},y.a.createElement(ye,Object.assign({className:"click-to-edit-icon"},P(n,"editVarIcon"),{onClick:function(){r.prepopInput(t)}})))},r.prepopInput=function(e){if(!1!==r.props.onEdit){var t=function(e){var t;switch(C(e)){case"undefined":t="undefined";break;case"nan":t="NaN";break;case"string":t=e;break;case"date":case"function":case"regexp":t=e.toString();break;default:try{t=JSON.stringify(e,null,"  ")}catch(e){t=""}}return t}(e.value),n=oe(t);r.setState({editMode:!0,editValue:t,parsedInput:{type:n.type,value:n.value}})}},r.getRemoveIcon=function(){var e=r.props,t=e.variable,n=e.namespace,i=e.theme,o=e.rjvId;return y.a.createElement("div",{className:"click-to-remove",style:{verticalAlign:"top",display:r.state.hovered?"inline-block":"none"}},y.a.createElement(fe,Object.assign({className:"click-to-remove-icon"},P(i,"removeVarIcon"),{onClick:function(){z.dispatch({name:"VARIABLE_REMOVED",rjvId:o,data:{name:t.name,namespace:n,existing_value:t.value,variable_removed:!0}})}})))},r.getValue=function(e,t){var n=!t&&e.type,i=h(r).props;switch(n){case!1:return r.getEditInput();case"string":return y.a.createElement(Q,Object.assign({value:e.value},i));case"integer":return y.a.createElement(W,Object.assign({value:e.value},i));case"float":return y.a.createElement(A,Object.assign({value:e.value},i));case"boolean":return y.a.createElement(N,Object.assign({value:e.value},i));case"function":return y.a.createElement($,Object.assign({value:e.value},i));case"null":return y.a.createElement(U,i);case"nan":return y.a.createElement(B,i);case"undefined":return y.a.createElement(G,i);case"date":return y.a.createElement(R,Object.assign({value:e.value},i));case"regexp":return y.a.createElement(H,Object.assign({value:e.value},i));default:return y.a.createElement("div",{className:"object-value"},JSON.stringify(e.value))}},r.getEditInput=function(){var e=r.props.theme,t=r.state.editValue;return y.a.createElement("div",null,y.a.createElement(ie,Object.assign({type:"text",inputRef:function(e){return e&&e.focus()},value:t,className:"variable-editor",onChange:function(e){var t=e.target.value,n=oe(t);r.setState({editValue:t,parsedInput:{type:n.type,value:n.value}})},onKeyDown:function(e){switch(e.key){case"Escape":r.setState({editMode:!1,editValue:""});break;case"Enter":(e.ctrlKey||e.metaKey)&&r.submitEdit(!0)}e.stopPropagation()},placeholder:"update this value",minRows:2},P(e,"edit-input"))),y.a.createElement("div",P(e,"edit-icon-container"),y.a.createElement(fe,Object.assign({className:"edit-cancel"},P(e,"cancel-icon"),{onClick:function(){r.setState({editMode:!1,editValue:""})}})),y.a.createElement(ve,Object.assign({className:"edit-check string-value"},P(e,"check-icon"),{onClick:function(){r.submitEdit()}})),y.a.createElement("div",null,r.showDetected())))},r.submitEdit=function(e){var t=r.props,n=t.variable,i=t.namespace,o=t.rjvId,a=r.state,s=a.editValue,l=a.parsedInput,u=s;e&&l.type&&(u=l.value),r.setState({editMode:!1}),z.dispatch({name:"VARIABLE_UPDATED",rjvId:o,data:{name:n.name,namespace:i,existing_value:n.value,new_value:u,variable_removed:!1}})},r.showDetected=function(){var e=r.props,t=e.theme,n=(e.variable,e.namespace,e.rjvId,r.state.parsedInput),i=(n.type,n.value,r.getDetectedInput());if(i)return y.a.createElement("div",null,y.a.createElement("div",P(t,"detected-row"),i,y.a.createElement(ve,{className:"edit-check detected",style:o({verticalAlign:"top",paddingLeft:"3px"},P(t,"check-icon").style),onClick:function(){r.submitEdit(!0)}})))},r.getDetectedInput=function(){var e=r.state.parsedInput,t=e.type,n=e.value,i=h(r).props,a=i.theme;if(!1!==t)switch(t.toLowerCase()){case"object":return y.a.createElement("span",null,y.a.createElement("span",{style:o(o({},P(a,"brace").style),{},{cursor:"default"})},"{"),y.a.createElement("span",{style:o(o({},P(a,"ellipsis").style),{},{cursor:"default"})},"..."),y.a.createElement("span",{style:o(o({},P(a,"brace").style),{},{cursor:"default"})},"}"));case"array":return y.a.createElement("span",null,y.a.createElement("span",{style:o(o({},P(a,"brace").style),{},{cursor:"default"})},"["),y.a.createElement("span",{style:o(o({},P(a,"ellipsis").style),{},{cursor:"default"})},"..."),y.a.createElement("span",{style:o(o({},P(a,"brace").style),{},{cursor:"default"})},"]"));case"string":return y.a.createElement(Q,Object.assign({value:n},i));case"integer":return y.a.createElement(W,Object.assign({value:n},i));case"float":return y.a.createElement(A,Object.assign({value:n},i));case"boolean":return y.a.createElement(N,Object.assign({value:n},i));case"function":return y.a.createElement($,Object.assign({value:n},i));case"null":return y.a.createElement(U,i);case"nan":return y.a.createElement(B,i);case"undefined":return y.a.createElement(G,i);case"date":return y.a.createElement(R,Object.assign({value:new Date(n)},i))}},r.state={editMode:!1,editValue:"",hovered:!1,renameKey:!1,parsedInput:{type:!1,value:null}},r}return l(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.variable,r=t.singleIndent,i=t.type,a=t.theme,s=t.namespace,l=t.indentWidth,u=t.enableClipboard,c=t.onEdit,p=t.onDelete,d=t.onSelect,h=t.displayArrayKey,f=t.quotesOnKeys,m=this.state.editMode;return y.a.createElement("div",Object.assign({},P(a,"objectKeyVal",{paddingLeft:l*r}),{onMouseEnter:function(){return e.setState(o(o({},e.state),{},{hovered:!0}))},onMouseLeave:function(){return e.setState(o(o({},e.state),{},{hovered:!1}))},className:"variable-row",key:n.name}),"array"==i?h?y.a.createElement("span",Object.assign({},P(a,"array-key"),{key:n.name+"_"+s}),n.name,y.a.createElement("div",P(a,"colon"),":")):null:y.a.createElement("span",null,y.a.createElement("span",Object.assign({},P(a,"object-name"),{className:"object-key",key:n.name+"_"+s}),!!f&&y.a.createElement("span",{style:{verticalAlign:"top"}},'"'),y.a.createElement("span",{style:{display:"inline-block"}},n.name),!!f&&y.a.createElement("span",{style:{verticalAlign:"top"}},'"')),y.a.createElement("span",P(a,"colon"),":")),y.a.createElement("div",Object.assign({className:"variable-value",onClick:!1===d&&!1===c?null:function(t){var r=F(s);(t.ctrlKey||t.metaKey)&&!1!==c?e.prepopInput(n):!1!==d&&(r.shift(),d(o(o({},n),{},{namespace:r})))}},P(a,"variableValue",{cursor:!1===d?"default":"pointer"})),this.getValue(n,m)),u?y.a.createElement(xe,{rowHovered:this.state.hovered,hidden:m,src:n.value,clickCallback:u,theme:a,namespace:[].concat(F(s),[n.name])}):null,!1!==c&&0==m?this.getEditIcon():null,!1!==p&&0==m?this.getRemoveIcon():null)}}]),n}(y.a.PureComponent),_e=function(e){c(n,e);var t=m(n);function n(){var e;a(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).getObjectSize=function(){var t=e.props,n=t.size,r=t.theme;if(t.displayObjectSize)return y.a.createElement("span",Object.assign({className:"object-size"},P(r,"object-size")),n," item",1===n?"":"s")},e.getAddAttribute=function(t){var n=e.props,r=n.theme,i=n.namespace,a=n.name,s=n.src,l=n.rjvId,u=n.depth;return y.a.createElement("span",{className:"click-to-add",style:{verticalAlign:"top",display:t?"inline-block":"none"}},y.a.createElement(me,Object.assign({className:"click-to-add-icon"},P(r,"addVarIcon"),{onClick:function(){var e={name:u>0?a:null,namespace:i.splice(0,i.length-1),existing_value:s,variable_removed:!1,key_name:null};"object"===C(s)?z.dispatch({name:"ADD_VARIABLE_KEY_REQUEST",rjvId:l,data:e}):z.dispatch({name:"VARIABLE_ADDED",rjvId:l,data:o(o({},e),{},{new_value:[].concat(F(s),[null])})})}})))},e.getRemoveObject=function(t){var n=e.props,r=n.theme,i=(n.hover,n.namespace),o=n.name,a=n.src,s=n.rjvId;if(1!==i.length)return y.a.createElement("span",{className:"click-to-remove",style:{display:t?"inline-block":"none"}},y.a.createElement(fe,Object.assign({className:"click-to-remove-icon"},P(r,"removeVarIcon"),{onClick:function(){z.dispatch({name:"VARIABLE_REMOVED",rjvId:s,data:{name:o,namespace:i.splice(0,i.length-1),existing_value:a,variable_removed:!0}})}})))},e.render=function(){var t=e.props,n=t.theme,r=t.onDelete,i=t.onAdd,o=t.enableClipboard,a=t.src,s=t.namespace,l=t.rowHovered;return y.a.createElement("div",Object.assign({},P(n,"object-meta-data"),{className:"object-meta-data",onClick:function(e){e.stopPropagation()}}),e.getObjectSize(),o?y.a.createElement(xe,{rowHovered:l,clickCallback:o,src:a,theme:n,namespace:s}):null,!1!==i?e.getAddAttribute(l):null,!1!==r?e.getRemoveObject(l):null)},e}return n}(y.a.PureComponent);function Ce(e){var t=e.parent_type,n=e.namespace,r=e.quotesOnKeys,i=e.theme,o=e.jsvRoot,a=e.name,s=e.displayArrayKey,l=e.name?e.name:"";return!o||!1!==a&&null!==a?"array"==t?s?y.a.createElement("span",Object.assign({},P(i,"array-key"),{key:n}),y.a.createElement("span",{className:"array-key"},l),y.a.createElement("span",P(i,"colon"),":")):y.a.createElement("span",null):y.a.createElement("span",Object.assign({},P(i,"object-name"),{key:n}),y.a.createElement("span",{className:"object-key"},r&&y.a.createElement("span",{style:{verticalAlign:"top"}},'"'),y.a.createElement("span",null,l),r&&y.a.createElement("span",{style:{verticalAlign:"top"}},'"')),y.a.createElement("span",P(i,"colon"),":")):y.a.createElement("span",null)}function Se(e){var t=e.theme;switch(e.iconStyle){case"triangle":return y.a.createElement(de,Object.assign({},P(t,"expanded-icon"),{className:"expanded-icon"}));case"square":return y.a.createElement(ue,Object.assign({},P(t,"expanded-icon"),{className:"expanded-icon"}));default:return y.a.createElement(se,Object.assign({},P(t,"expanded-icon"),{className:"expanded-icon"}))}}function ke(e){var t=e.theme;switch(e.iconStyle){case"triangle":return y.a.createElement(pe,Object.assign({},P(t,"collapsed-icon"),{className:"collapsed-icon"}));case"square":return y.a.createElement(ce,Object.assign({},P(t,"collapsed-icon"),{className:"collapsed-icon"}));default:return y.a.createElement(le,Object.assign({},P(t,"collapsed-icon"),{className:"collapsed-icon"}))}}var Ee=function(e){c(n,e);var t=m(n);function n(e){var r;return a(this,n),(r=t.call(this,e)).toggleCollapsed=function(e){var t=[];for(var n in r.state.expanded)t.push(r.state.expanded[n]);t[e]=!t[e],r.setState({expanded:t})},r.state={expanded:[]},r}return l(n,[{key:"getExpandedIcon",value:function(e){var t=this.props,n=t.theme,r=t.iconStyle;return this.state.expanded[e]?y.a.createElement(Se,{theme:n,iconStyle:r}):y.a.createElement(ke,{theme:n,iconStyle:r})}},{key:"render",value:function(){var e=this,t=this.props,n=t.src,r=t.groupArraysAfterLength,i=(t.depth,t.name),o=t.theme,a=t.jsvRoot,s=t.namespace,l=(t.parent_type,_(t,["src","groupArraysAfterLength","depth","name","theme","jsvRoot","namespace","parent_type"])),u=0,c=5*this.props.indentWidth;a||(u=5*this.props.indentWidth);var p=r,d=Math.ceil(n.length/p);return y.a.createElement("div",Object.assign({className:"object-key-val"},P(o,a?"jsv-root":"objectKeyVal",{paddingLeft:u})),y.a.createElement(Ce,this.props),y.a.createElement("span",null,y.a.createElement(_e,Object.assign({size:n.length},this.props))),F(Array(d)).map((function(t,r){return y.a.createElement("div",Object.assign({key:r,className:"object-key-val array-group"},P(o,"objectKeyVal",{marginLeft:6,paddingLeft:c})),y.a.createElement("span",P(o,"brace-row"),y.a.createElement("div",Object.assign({className:"icon-container"},P(o,"icon-container"),{onClick:function(t){e.toggleCollapsed(r)}}),e.getExpandedIcon(r)),e.state.expanded[r]?y.a.createElement(Pe,Object.assign({key:i+r,depth:0,name:!1,collapsed:!1,groupArraysAfterLength:p,index_offset:r*p,src:n.slice(r*p,r*p+p),namespace:s,type:"array",parent_type:"array_group",theme:o},l)):y.a.createElement("span",Object.assign({},P(o,"brace"),{onClick:function(t){e.toggleCollapsed(r)},className:"array-group-brace"}),"[",y.a.createElement("div",Object.assign({},P(o,"array-group-meta-data"),{className:"array-group-meta-data"}),y.a.createElement("span",Object.assign({className:"object-size"},P(o,"object-size")),r*p," - ",r*p+p>n.length?n.length:r*p+p)),"]")))})))}}]),n}(y.a.PureComponent),Te=function(e){c(n,e);var t=m(n);function n(e){var r;a(this,n),(r=t.call(this,e)).toggleCollapsed=function(){r.setState({expanded:!r.state.expanded},(function(){q.set(r.props.rjvId,r.props.namespace,"expanded",r.state.expanded)}))},r.getObjectContent=function(e,t,n){return y.a.createElement("div",{className:"pushed-content object-container"},y.a.createElement("div",Object.assign({className:"object-content"},P(r.props.theme,"pushed-content")),r.renderObjectContents(t,n)))},r.getEllipsis=function(){return 0===r.state.size?null:y.a.createElement("div",Object.assign({},P(r.props.theme,"ellipsis"),{className:"node-ellipsis",onClick:r.toggleCollapsed}),"...")},r.getObjectMetaData=function(e){var t=r.props,n=(t.rjvId,t.theme,r.state),i=n.size,o=n.hovered;return y.a.createElement(_e,Object.assign({rowHovered:o,size:i},r.props))},r.renderObjectContents=function(e,t){var n,i=r.props,o=i.depth,a=i.parent_type,s=i.index_offset,l=i.groupArraysAfterLength,u=i.namespace,c=r.state.object_type,p=[],d=Object.keys(e||{});return r.props.sortKeys&&"array"!==c&&(d=d.sort()),d.forEach((function(i){if(n=new Ie(i,e[i]),"array_group"===a&&s&&(n.name=parseInt(n.name)+s),e.hasOwnProperty(i))if("object"===n.type)p.push(y.a.createElement(Pe,Object.assign({key:n.name,depth:o+1,name:n.name,src:n.value,namespace:u.concat(n.name),parent_type:c},t)));else if("array"===n.type){var d=Pe;l&&n.value.length>l&&(d=Ee),p.push(y.a.createElement(d,Object.assign({key:n.name,depth:o+1,name:n.name,src:n.value,namespace:u.concat(n.name),type:"array",parent_type:c},t)))}else p.push(y.a.createElement(we,Object.assign({key:n.name+"_"+u,variable:n,singleIndent:5,namespace:u,type:r.props.type},t)))})),p};var i=n.getState(e);return r.state=o(o({},i),{},{prevProps:{}}),r}return l(n,[{key:"getBraceStart",value:function(e,t){var n=this,r=this.props,i=r.src,o=r.theme,a=r.iconStyle;if("array_group"===r.parent_type)return y.a.createElement("span",null,y.a.createElement("span",P(o,"brace"),"array"===e?"[":"{"),t?this.getObjectMetaData(i):null);var s=t?Se:ke;return y.a.createElement("span",null,y.a.createElement("span",Object.assign({onClick:function(e){n.toggleCollapsed()}},P(o,"brace-row")),y.a.createElement("div",Object.assign({className:"icon-container"},P(o,"icon-container")),y.a.createElement(s,{theme:o,iconStyle:a})),y.a.createElement(Ce,this.props),y.a.createElement("span",P(o,"brace"),"array"===e?"[":"{")),t?this.getObjectMetaData(i):null)}},{key:"render",value:function(){var e=this,t=this.props,n=t.depth,r=t.src,i=(t.namespace,t.name,t.type,t.parent_type),a=t.theme,s=t.jsvRoot,l=t.iconStyle,u=_(t,["depth","src","namespace","name","type","parent_type","theme","jsvRoot","iconStyle"]),c=this.state,p=c.object_type,d=c.expanded,h={};return s||"array_group"===i?"array_group"===i&&(h.borderLeft=0,h.display="inline"):h.paddingLeft=5*this.props.indentWidth,y.a.createElement("div",Object.assign({className:"object-key-val",onMouseEnter:function(){return e.setState(o(o({},e.state),{},{hovered:!0}))},onMouseLeave:function(){return e.setState(o(o({},e.state),{},{hovered:!1}))}},P(a,s?"jsv-root":"objectKeyVal",h)),this.getBraceStart(p,d),d?this.getObjectContent(n,r,o({theme:a,iconStyle:l},u)):this.getEllipsis(),y.a.createElement("span",{className:"brace-row"},y.a.createElement("span",{style:o(o({},P(a,"brace").style),{},{paddingLeft:d?"3px":"0px"})},"array"===p?"]":"}"),d?null:this.getObjectMetaData(r)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r=t.prevProps;return e.src!==r.src||e.collapsed!==r.collapsed||e.name!==r.name||e.namespace!==r.namespace||e.rjvId!==r.rjvId?o(o({},n.getState(e)),{},{prevProps:e}):null}}]),n}(y.a.PureComponent);Te.getState=function(e){var t=Object.keys(e.src).length,n=(!1===e.collapsed||!0!==e.collapsed&&e.collapsed>e.depth)&&(!e.shouldCollapse||!1===e.shouldCollapse({name:e.name,src:e.src,type:C(e.src),namespace:e.namespace}))&&0!==t;return{expanded:q.get(e.rjvId,e.namespace,"expanded",n),object_type:"array"===e.type?"array":"object",parent_type:"array"===e.type?"array":"object",size:t,hovered:!1}};var Ie=function e(t,n){a(this,e),this.name=t,this.value=n,this.type=C(n)};w(Te);var Pe=Te,Oe=function(e){c(n,e);var t=m(n);function n(){var e;a(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).render=function(){var t=h(e).props,n=[t.name],r=Pe;return Array.isArray(t.src)&&t.groupArraysAfterLength&&t.src.length>t.groupArraysAfterLength&&(r=Ee),y.a.createElement("div",{className:"pretty-json-container object-container"},y.a.createElement("div",{className:"object-content"},y.a.createElement(r,Object.assign({namespace:n,depth:0,jsvRoot:!0},t))))},e}return n}(y.a.PureComponent),Ne=function(e){c(n,e);var t=m(n);function n(e){var r;return a(this,n),(r=t.call(this,e)).closeModal=function(){z.dispatch({rjvId:r.props.rjvId,name:"RESET"})},r.submit=function(){r.props.submit(r.state.input)},r.state={input:e.input?e.input:""},r}return l(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.theme,r=t.rjvId,i=t.isValid,o=this.state.input,a=i(o);return y.a.createElement("div",Object.assign({className:"key-modal-request"},P(n,"key-modal-request"),{onClick:this.closeModal}),y.a.createElement("div",Object.assign({},P(n,"key-modal"),{onClick:function(e){e.stopPropagation()}}),y.a.createElement("div",P(n,"key-modal-label"),"Key Name:"),y.a.createElement("div",{style:{position:"relative"}},y.a.createElement("input",Object.assign({},P(n,"key-modal-input"),{className:"key-modal-input",ref:function(e){return e&&e.focus()},spellCheck:!1,value:o,placeholder:"...",onChange:function(t){e.setState({input:t.target.value})},onKeyPress:function(t){a&&"Enter"===t.key?e.submit():"Escape"===t.key&&e.closeModal()}})),a?y.a.createElement(ve,Object.assign({},P(n,"key-modal-submit"),{className:"key-modal-submit",onClick:function(t){return e.submit()}})):null),y.a.createElement("span",P(n,"key-modal-cancel"),y.a.createElement(ge,Object.assign({},P(n,"key-modal-cancel-icon"),{className:"key-modal-cancel",onClick:function(){z.dispatch({rjvId:r,name:"RESET"})}})))))}}]),n}(y.a.PureComponent),Re=function(e){c(n,e);var t=m(n);function n(){var e;a(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).isValid=function(t){var n=e.props.rjvId,r=q.get(n,"action","new-key-request");return""!=t&&-1===Object.keys(r.existing_value).indexOf(t)},e.submit=function(t){var n=e.props.rjvId,r=q.get(n,"action","new-key-request");r.new_value=o({},r.existing_value),r.new_value[t]=e.props.defaultValue,z.dispatch({name:"VARIABLE_ADDED",rjvId:n,data:r})},e}return l(n,[{key:"render",value:function(){var e=this.props,t=e.active,n=e.theme,r=e.rjvId;return t?y.a.createElement(Ne,{rjvId:r,theme:n,isValid:this.isValid,submit:this.submit}):null}}]),n}(y.a.PureComponent),Ae=function(e){c(n,e);var t=m(n);function n(){return a(this,n),t.apply(this,arguments)}return l(n,[{key:"render",value:function(){var e=this.props,t=e.message,n=e.active,r=e.theme,i=e.rjvId;return n?y.a.createElement("div",Object.assign({className:"validation-failure"},P(r,"validation-failure"),{onClick:function(){z.dispatch({rjvId:i,name:"RESET"})}}),y.a.createElement("span",P(r,"validation-failure-label"),t),y.a.createElement(ge,P(r,"validation-failure-clear"))):null}}]),n}(y.a.PureComponent),De=function(e){c(n,e);var t=m(n);function n(e){var r;return a(this,n),(r=t.call(this,e)).rjvId=Date.now().toString(),r.getListeners=function(){return{reset:r.resetState,"variable-update":r.updateSrc,"add-key-request":r.addKeyRequest}},r.updateSrc=function(){var e,t=q.get(r.rjvId,"action","variable-update"),n=t.name,i=t.namespace,o=t.new_value,a=t.existing_value,s=(t.variable_removed,t.updated_src),l=t.type,u=r.props,c=u.onEdit,p=u.onDelete,d=u.onAdd,h={existing_src:r.state.src,new_value:o,updated_src:s,name:n,namespace:i,existing_value:a};switch(l){case"variable-added":e=d(h);break;case"variable-edited":e=c(h);break;case"variable-removed":e=p(h)}!1!==e?(q.set(r.rjvId,"global","src",s),r.setState({src:s})):r.setState({validationFailure:!0})},r.addKeyRequest=function(){r.setState({addKeyRequest:!0})},r.resetState=function(){r.setState({validationFailure:!1,addKeyRequest:!1})},r.state={addKeyRequest:!1,editKeyRequest:!1,validationFailure:!1,src:n.defaultProps.src,name:n.defaultProps.name,theme:n.defaultProps.theme,validationMessage:n.defaultProps.validationMessage,prevSrc:n.defaultProps.src,prevName:n.defaultProps.name,prevTheme:n.defaultProps.theme},r}return l(n,[{key:"componentDidMount",value:function(){q.set(this.rjvId,"global","src",this.state.src);var e=this.getListeners();for(var t in e)q.on(t+"-"+this.rjvId,e[t]);this.setState({addKeyRequest:!1,editKeyRequest:!1})}},{key:"componentDidUpdate",value:function(e,t){!1!==t.addKeyRequest&&this.setState({addKeyRequest:!1}),!1!==t.editKeyRequest&&this.setState({editKeyRequest:!1}),e.src!==this.state.src&&q.set(this.rjvId,"global","src",this.state.src)}},{key:"componentWillUnmount",value:function(){var e=this.getListeners();for(var t in e)q.removeListener(t+"-"+this.rjvId,e[t])}},{key:"render",value:function(){var e=this.state,t=e.validationFailure,n=e.validationMessage,r=e.addKeyRequest,i=e.theme,a=e.src,s=e.name,l=this.props,u=l.style,c=l.defaultValue;return y.a.createElement("div",{className:"react-json-view",style:o(o({},P(i,"app-container").style),u)},y.a.createElement(Ae,{message:n,active:t,theme:i,rjvId:this.rjvId}),y.a.createElement(Oe,Object.assign({},this.props,{src:a,name:s,theme:i,type:C(a),rjvId:this.rjvId})),y.a.createElement(Re,{active:r,theme:i,rjvId:this.rjvId,defaultValue:c}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.src!==t.prevSrc||e.name!==t.prevName||e.theme!==t.prevTheme){var r={src:e.src,name:e.name,theme:e.theme,validationMessage:e.validationMessage,prevSrc:e.src,prevName:e.name,prevTheme:e.theme};return n.validateState(r)}return null}}]),n}(y.a.PureComponent);De.defaultProps={src:{},name:"root",theme:"rjv-default",collapsed:!1,collapseStringsAfterLength:!1,shouldCollapse:!1,sortKeys:!1,quotesOnKeys:!0,groupArraysAfterLength:100,indentWidth:4,enableClipboard:!0,displayObjectSize:!0,displayDataTypes:!0,onEdit:!1,onDelete:!1,onAdd:!1,onSelect:!1,iconStyle:"triangle",style:{},validationMessage:"Validation Error",defaultValue:null,displayArrayKey:!0},De.validateState=function(e){var t={};return"object"!==C(e.theme)||function(e){var t=["base00","base01","base02","base03","base04","base05","base06","base07","base08","base09","base0A","base0B","base0C","base0D","base0E","base0F"];if("object"===C(e)){for(var n=0;n<t.length;n++)if(!(t[n]in e))return!1;return!0}return!1}(e.theme)||(console.error("react-json-view error:","theme prop must be a theme name or valid base-16 theme object.",'defaulting to "rjv-default" theme'),t.theme="rjv-default"),"object"!==C(e.src)&&"array"!==C(e.src)&&(console.error("react-json-view error:","src property must be a valid json object"),t.name="ERROR",t.src={message:"src property must be a valid json object"}),o(o({},e),t)},w(De),t.default=De}]))},function(e,t,n){var r=n(110);e.exports=h,e.exports.parse=o,e.exports.compile=function(e,t){return s(o(e,t),t)},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=d;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(e,t){for(var n,r=[],o=0,a=0,s="",c=t&&t.delimiter||"/";null!=(n=i.exec(e));){var p=n[0],d=n[1],h=n.index;if(s+=e.slice(a,h),a=h+p.length,d)s+=d[1];else{var f=e[a],m=n[2],g=n[3],y=n[4],v=n[5],b=n[6],x=n[7];s&&(r.push(s),s="");var w=null!=m&&null!=f&&f!==m,_="+"===b||"*"===b,C="?"===b||"*"===b,S=n[2]||c,k=y||v;r.push({name:g||o++,prefix:m||"",delimiter:S,optional:C,repeat:_,partial:w,asterisk:!!x,pattern:k?u(k):x?".*":"[^"+l(S)+"]+?"})}}return a<e.length&&(s+=e.substr(a)),s&&r.push(s),r}function a(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function s(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"==typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",p(t)));return function(t,i){for(var o="",s=t||{},l=(i||{}).pretty?a:encodeURIComponent,u=0;u<e.length;u++){var c=e[u];if("string"!=typeof c){var p,d=s[c.name];if(null==d){if(c.optional){c.partial&&(o+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(r(d)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var h=0;h<d.length;h++){if(p=l(d[h]),!n[u].test(p))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(p)+"`");o+=(0===h?c.prefix:c.delimiter)+p}}else{if(p=c.asterisk?encodeURI(d).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):l(d),!n[u].test(p))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+p+'"');o+=c.prefix+p}}else o+=c}return o}}function l(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function u(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function c(e,t){return e.keys=t,e}function p(e){return e&&e.sensitive?"":"i"}function d(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,o=!1!==n.end,a="",s=0;s<e.length;s++){var u=e[s];if("string"==typeof u)a+=l(u);else{var d=l(u.prefix),h="(?:"+u.pattern+")";t.push(u),u.repeat&&(h+="(?:"+d+h+")*"),a+=h=u.optional?u.partial?d+"("+h+")?":"(?:"+d+"("+h+"))?":d+"("+h+")"}}var f=l(n.delimiter||"/"),m=a.slice(-f.length)===f;return i||(a=(m?a.slice(0,-f.length):a)+"(?:"+f+"(?=$))?"),a+=o?"$":i&&m?"":"(?="+f+"|$)",c(new RegExp("^"+a,p(n)),t)}function h(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return c(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(h(e[i],t,n).source);return c(new RegExp("(?:"+r.join("|")+")",p(n)),t)}(e,t,n):function(e,t,n){return d(o(e,n),t,n)}(e,t,n)}},,,function(e,t,n){"use strict";
/** @license React v16.13.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(43),i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,u=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,p=i?Symbol.for("react.context"):60110,d=i?Symbol.for("react.forward_ref"):60112,h=i?Symbol.for("react.suspense"):60113,f=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,g="function"==typeof Symbol&&Symbol.iterator;function y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function x(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||v}function w(){}function _(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||v}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(y(85));this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=x.prototype;var C=_.prototype=new w;C.constructor=_,r(C,x.prototype),C.isPureReactComponent=!0;var S={current:null},k=Object.prototype.hasOwnProperty,E={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,n){var r,i={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)k.call(t,r)&&!E.hasOwnProperty(r)&&(i[r]=t[r]);var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===i[r]&&(i[r]=l[r]);return{$$typeof:o,type:e,key:a,ref:s,props:i,_owner:S.current}}function I(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var P=/\/+/g,O=[];function N(e,t,n,r){if(O.length){var i=O.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function R(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>O.length&&O.push(e)}function A(e,t,n){return null==e?0:function e(t,n,r,i){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var l=!1;if(null===t)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case o:case a:l=!0}}if(l)return r(i,t,""===n?"."+D(t,0):n),1;if(l=0,n=""===n?".":n+":",Array.isArray(t))for(var u=0;u<t.length;u++){var c=n+D(s=t[u],u);l+=e(s,c,r,i)}else if(null===t||"object"!=typeof t?c=null:c="function"==typeof(c=g&&t[g]||t["@@iterator"])?c:null,"function"==typeof c)for(t=c.call(t),u=0;!(s=t.next()).done;)l+=e(s=s.value,c=n+D(s,u++),r,i);else if("object"===s)throw r=""+t,Error(y(31,"[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r,""));return l}(e,"",t,n)}function D(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function V(e,t){e.func.call(e.context,t,e.count++)}function M(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?F(e,r,n,(function(e){return e})):null!=e&&(I(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(P,"$&/")+"/")+n)),r.push(e))}function F(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(P,"$&/")+"/"),A(e,M,t=N(t,o,r,i)),R(t)}var L={current:null};function z(){var e=L.current;if(null===e)throw Error(y(321));return e}var j={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:S,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:function(e,t,n){if(null==e)return e;var r=[];return F(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;A(e,V,t=N(null,null,t,n)),R(t)},count:function(e){return A(e,(function(){return null}),null)},toArray:function(e){var t=[];return F(e,t,null,(function(e){return e})),t},only:function(e){if(!I(e))throw Error(y(143));return e}},t.Component=x,t.Fragment=s,t.Profiler=u,t.PureComponent=_,t.StrictMode=l,t.Suspense=h,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,t.cloneElement=function(e,t,n){if(null==e)throw Error(y(267,e));var i=r({},e.props),a=e.key,s=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,l=S.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)k.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){u=Array(c);for(var p=0;p<c;p++)u[p]=arguments[p+2];i.children=u}return{$$typeof:o,type:e.type,key:a,ref:s,props:i,_owner:l}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:p,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return z().useCallback(e,t)},t.useContext=function(e,t){return z().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return z().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return z().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return z().useLayoutEffect(e,t)},t.useMemo=function(e,t){return z().useMemo(e,t)},t.useReducer=function(e,t,n){return z().useReducer(e,t,n)},t.useRef=function(e){return z().useRef(e)},t.useState=function(e){return z().useState(e)},t.version="16.13.0"},function(e,t,n){"use strict";
/** @license React v16.13.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(0),i=n(43),o=n(64);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));function s(e,t,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this.onError(e)}}var l=!1,u=null,c=!1,p=null,d={onError:function(e){l=!0,u=e}};function h(e,t,n,r,i,o,a,c,p){l=!1,u=null,s.apply(d,arguments)}var f=null,m=null,g=null;function y(e,t,n){var r=e.type||"unknown-event";e.currentTarget=g(n),function(e,t,n,r,i,o,s,d,f){if(h.apply(this,arguments),l){if(!l)throw Error(a(198));var m=u;l=!1,u=null,c||(c=!0,p=m)}}(r,t,void 0,e),e.currentTarget=null}var v=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;v.hasOwnProperty("ReactCurrentDispatcher")||(v.ReactCurrentDispatcher={current:null}),v.hasOwnProperty("ReactCurrentBatchConfig")||(v.ReactCurrentBatchConfig={suspense:null});var b=/^(.*)[\\\/]/,x="function"==typeof Symbol&&Symbol.for,w=x?Symbol.for("react.element"):60103,_=x?Symbol.for("react.portal"):60106,C=x?Symbol.for("react.fragment"):60107,S=x?Symbol.for("react.strict_mode"):60108,k=x?Symbol.for("react.profiler"):60114,E=x?Symbol.for("react.provider"):60109,T=x?Symbol.for("react.context"):60110,I=x?Symbol.for("react.concurrent_mode"):60111,P=x?Symbol.for("react.forward_ref"):60112,O=x?Symbol.for("react.suspense"):60113,N=x?Symbol.for("react.suspense_list"):60120,R=x?Symbol.for("react.memo"):60115,A=x?Symbol.for("react.lazy"):60116,D=x?Symbol.for("react.block"):60121,V="function"==typeof Symbol&&Symbol.iterator;function M(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=V&&e[V]||e["@@iterator"])?e:null}function F(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case C:return"Fragment";case _:return"Portal";case k:return"Profiler";case S:return"StrictMode";case O:return"Suspense";case N:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case T:return"Context.Consumer";case E:return"Context.Provider";case P:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case R:return F(e.type);case D:return F(e.render);case A:if(e=1===e._status?e._result:null)return F(e)}return null}function L(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=F(e.type);n=null,r&&(n=F(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(b,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}var z=null,j={};function q(){if(z)for(var e in j){var t=j[e],n=z.indexOf(e);if(!(-1<n))throw Error(a(96,e));if(!B[n]){if(!t.extractEvents)throw Error(a(97,e));for(var r in B[n]=t,n=t.eventTypes){var i=void 0,o=n[r],s=t,l=r;if(U.hasOwnProperty(l))throw Error(a(99,l));U[l]=o;var u=o.phasedRegistrationNames;if(u){for(i in u)u.hasOwnProperty(i)&&$(u[i],s,l);i=!0}else o.registrationName?($(o.registrationName,s,l),i=!0):i=!1;if(!i)throw Error(a(98,r,e))}}}}function $(e,t,n){if(W[e])throw Error(a(100,e));W[e]=t,H[e]=t.eventTypes[n].dependencies}var B=[],U={},W={},H={};function Q(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!j.hasOwnProperty(t)||j[t]!==r){if(j[t])throw Error(a(102,t));j[t]=r,n=!0}}n&&q()}var G=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),K=null,J=null,X=null;function Y(e){if(e=m(e)){if("function"!=typeof K)throw Error(a(280));var t=e.stateNode;t&&(t=f(t),K(e.stateNode,e.type,t))}}function Z(e){J?X?X.push(e):X=[e]:J=e}function ee(){if(J){var e=J,t=X;if(X=J=null,Y(e),t)for(e=0;e<t.length;e++)Y(t[e])}}function te(e,t){return e(t)}function ne(e,t,n,r,i){return e(t,n,r,i)}function re(){}var ie=te,oe=!1,ae=!1;function se(){null===J&&null===X||(re(),ee())}function le(e,t,n){if(ae)return e(t,n);ae=!0;try{return ie(e,t,n)}finally{ae=!1,se()}}var ue=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ce=Object.prototype.hasOwnProperty,pe={},de={};function he(e,t,n,r,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}var fe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){fe[e]=new he(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];fe[t]=new he(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){fe[e]=new he(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){fe[e]=new he(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){fe[e]=new he(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){fe[e]=new he(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){fe[e]=new he(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){fe[e]=new he(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){fe[e]=new he(e,5,!1,e.toLowerCase(),null,!1)}));var me=/[\-:]([a-z])/g;function ge(e){return e[1].toUpperCase()}function ye(e,t,n,r){var i=fe.hasOwnProperty(t)?fe[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!ce.call(de,e)||!ce.call(pe,e)&&(ue.test(e)?de[e]=!0:(pe[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function ve(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function be(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function xe(e){e._valueTracker||(e._valueTracker=function(e){var t=be(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function we(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=be(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function _e(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Ce(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ve(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Se(e,t){null!=(t=t.checked)&&ye(e,"checked",t,!1)}function ke(e,t){Se(e,t);var n=ve(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Te(e,t.type,n):t.hasOwnProperty("defaultValue")&&Te(e,t.type,ve(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ee(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Te(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Ie(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Pe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ve(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Oe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ne(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ve(n)}}function Re(e,t){var n=ve(t.value),r=ve(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(me,ge);fe[t]=new he(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(me,ge);fe[t]=new he(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(me,ge);fe[t]=new he(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){fe[e]=new he(e,1,!1,e.toLowerCase(),null,!1)})),fe.xlinkHref=new he("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){fe[e]=new he(e,1,!1,e.toLowerCase(),null,!0)}));var De="http://www.w3.org/1999/xhtml",Ve="http://www.w3.org/2000/svg";function Me(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Me(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Le,ze=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if(e.namespaceURI!==Ve||"innerHTML"in e)e.innerHTML=t;else{for((Le=Le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function je(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function qe(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var $e={animationend:qe("Animation","AnimationEnd"),animationiteration:qe("Animation","AnimationIteration"),animationstart:qe("Animation","AnimationStart"),transitionend:qe("Transition","TransitionEnd")},Be={},Ue={};function We(e){if(Be[e])return Be[e];if(!$e[e])return e;var t,n=$e[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ue)return Be[e]=n[t];return e}G&&(Ue=document.createElement("div").style,"AnimationEvent"in window||(delete $e.animationend.animation,delete $e.animationiteration.animation,delete $e.animationstart.animation),"TransitionEvent"in window||delete $e.transitionend.transition);var He=We("animationend"),Qe=We("animationiteration"),Ge=We("animationstart"),Ke=We("transitionend"),Je="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xe=new("function"==typeof WeakMap?WeakMap:Map);function Ye(e){var t=Xe.get(e);return void 0===t&&(t=new Map,Xe.set(e,t)),t}function Ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function et(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function tt(e){if(Ze(e)!==e)throw Error(a(188))}function nt(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return tt(i),e;if(o===r)return tt(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function rt(e,t){if(null==t)throw Error(a(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function it(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var ot=null;function at(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)y(e,t[r],n[r]);else t&&y(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function st(e){if(null!==e&&(ot=rt(ot,e)),e=ot,ot=null,e){if(it(e,at),ot)throw Error(a(95));if(c)throw e=p,c=!1,p=null,e}}function lt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ut(e){if(!G)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}var ct=[];function pt(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ct.length&&ct.push(e)}function dt(e,t,n,r){if(ct.length){var i=ct.pop();return i.topLevelType=e,i.eventSystemFlags=r,i.nativeEvent=t,i.targetInst=n,i}return{topLevelType:e,eventSystemFlags:r,nativeEvent:t,targetInst:n,ancestors:[]}}function ht(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=Tn(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=lt(e.nativeEvent);r=e.topLevelType;var o=e.nativeEvent,a=e.eventSystemFlags;0===n&&(a|=64);for(var s=null,l=0;l<B.length;l++){var u=B[l];u&&(u=u.extractEvents(r,t,o,i,a))&&(s=rt(s,u))}st(s)}}function ft(e,t,n){if(!n.has(e)){switch(e){case"scroll":Gt(t,"scroll",!0);break;case"focus":case"blur":Gt(t,"focus",!0),Gt(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ut(e)&&Gt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Je.indexOf(e)&&Qt(e,t)}n.set(e,null)}}var mt,gt,yt,vt=!1,bt=[],xt=null,wt=null,_t=null,Ct=new Map,St=new Map,kt=[],Et="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Tt="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function It(e,t,n,r,i){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:i,container:r}}function Pt(e,t){switch(e){case"focus":case"blur":xt=null;break;case"dragenter":case"dragleave":wt=null;break;case"mouseover":case"mouseout":_t=null;break;case"pointerover":case"pointerout":Ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":St.delete(t.pointerId)}}function Ot(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=It(t,n,r,i,o),null!==t&&(null!==(t=In(t))&&gt(t)),e):(e.eventSystemFlags|=r,e)}function Nt(e){var t=Tn(e.target);if(null!==t){var n=Ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=et(n)))return e.blockedOn=t,void o.unstable_runWithPriority(e.priority,(function(){yt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Rt(e){if(null!==e.blockedOn)return!1;var t=Yt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=In(t);return null!==n&&gt(n),e.blockedOn=t,!1}return!0}function At(e,t,n){Rt(e)&&n.delete(t)}function Dt(){for(vt=!1;0<bt.length;){var e=bt[0];if(null!==e.blockedOn){null!==(e=In(e.blockedOn))&&mt(e);break}var t=Yt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:bt.shift()}null!==xt&&Rt(xt)&&(xt=null),null!==wt&&Rt(wt)&&(wt=null),null!==_t&&Rt(_t)&&(_t=null),Ct.forEach(At),St.forEach(At)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,vt||(vt=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Dt)))}function Mt(e){function t(t){return Vt(t,e)}if(0<bt.length){Vt(bt[0],e);for(var n=1;n<bt.length;n++){var r=bt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==xt&&Vt(xt,e),null!==wt&&Vt(wt,e),null!==_t&&Vt(_t,e),Ct.forEach(t),St.forEach(t),n=0;n<kt.length;n++)(r=kt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<kt.length&&null===(n=kt[0]).blockedOn;)Nt(n),null===n.blockedOn&&kt.shift()}var Ft={},Lt=new Map,zt=new Map,jt=["abort","abort",He,"animationEnd",Qe,"animationIteration",Ge,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ke,"transitionEnd","waiting","waiting"];function qt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1],o="on"+(i[0].toUpperCase()+i.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:t},zt.set(r,t),Lt.set(r,o),Ft[i]=o}}qt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),qt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),qt(jt,2);for(var $t="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Bt=0;Bt<$t.length;Bt++)zt.set($t[Bt],0);var Ut=o.unstable_UserBlockingPriority,Wt=o.unstable_runWithPriority,Ht=!0;function Qt(e,t){Gt(t,e,!1)}function Gt(e,t,n){var r=zt.get(t);switch(void 0===r?2:r){case 0:r=Kt.bind(null,t,1,e);break;case 1:r=Jt.bind(null,t,1,e);break;default:r=Xt.bind(null,t,1,e)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Kt(e,t,n,r){oe||re();var i=Xt,o=oe;oe=!0;try{ne(i,e,t,n,r)}finally{(oe=o)||se()}}function Jt(e,t,n,r){Wt(Ut,Xt.bind(null,e,t,n,r))}function Xt(e,t,n,r){if(Ht)if(0<bt.length&&-1<Et.indexOf(e))e=It(null,e,t,n,r),bt.push(e);else{var i=Yt(e,t,n,r);if(null===i)Pt(e,r);else if(-1<Et.indexOf(e))e=It(i,e,t,n,r),bt.push(e);else if(!function(e,t,n,r,i){switch(t){case"focus":return xt=Ot(xt,e,t,n,r,i),!0;case"dragenter":return wt=Ot(wt,e,t,n,r,i),!0;case"mouseover":return _t=Ot(_t,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ct.set(o,Ot(Ct.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,St.set(o,Ot(St.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r)){Pt(e,r),e=dt(e,r,null,t);try{le(ht,e)}finally{pt(e)}}}}function Yt(e,t,n,r){if(null!==(n=Tn(n=lt(r)))){var i=Ze(n);if(null===i)n=null;else{var o=i.tag;if(13===o){if(null!==(n=et(i)))return n;n=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}e=dt(e,r,n,t);try{le(ht,e)}finally{pt(e)}return null}var Zt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},en=["Webkit","ms","Moz","O"];function tn(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||Zt.hasOwnProperty(e)&&Zt[e]?(""+t).trim():t+"px"}function nn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=tn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(Zt).forEach((function(e){en.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zt[t]=Zt[e]}))}));var rn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function on(e,t){if(t){if(rn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(a(62,""))}}function an(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sn=De;function ln(e,t){var n=Ye(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=H[t];for(var r=0;r<t.length;r++)ft(t[r],e,n)}function un(){}function cn(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function pn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dn(e,t){var n,r=pn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=pn(r)}}function hn(){for(var e=window,t=cn();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=cn((e=t.contentWindow).document)}return t}function fn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var mn=null,gn=null;function yn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function vn(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var bn="function"==typeof setTimeout?setTimeout:void 0,xn="function"==typeof clearTimeout?clearTimeout:void 0;function wn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function _n(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Cn=Math.random().toString(36).slice(2),Sn="__reactInternalInstance$"+Cn,kn="__reactEventHandlers$"+Cn,En="__reactContainere$"+Cn;function Tn(e){var t=e[Sn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[En]||n[Sn]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=_n(e);null!==e;){if(n=e[Sn])return n;e=_n(e)}return t}n=(e=n).parentNode}return null}function In(e){return!(e=e[Sn]||e[En])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Pn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function On(e){return e[kn]||null}function Nn(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Rn(e,t){var n=e.stateNode;if(!n)return null;var r=f(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(a(231,t,typeof n));return n}function An(e,t,n){(t=Rn(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=rt(n._dispatchListeners,t),n._dispatchInstances=rt(n._dispatchInstances,e))}function Dn(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Nn(t);for(t=n.length;0<t--;)An(n[t],"captured",e);for(t=0;t<n.length;t++)An(n[t],"bubbled",e)}}function Vn(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=Rn(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=rt(n._dispatchListeners,t),n._dispatchInstances=rt(n._dispatchInstances,e))}function Mn(e){e&&e.dispatchConfig.registrationName&&Vn(e._targetInst,null,e)}function Fn(e){it(e,Dn)}var Ln=null,zn=null,jn=null;function qn(){if(jn)return jn;var e,t,n=zn,r=n.length,i="value"in Ln?Ln.value:Ln.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return jn=i.slice(e,1<t?1-t:void 0)}function $n(){return!0}function Bn(){return!1}function Un(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?$n:Bn,this.isPropagationStopped=Bn,this}function Wn(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Hn(e){if(!(e instanceof this))throw Error(a(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Qn(e){e.eventPool=[],e.getPooled=Wn,e.release=Hn}i(Un.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=$n)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=$n)},persist:function(){this.isPersistent=$n},isPersistent:Bn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Bn,this._dispatchInstances=this._dispatchListeners=null}}),Un.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Un.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var o=new t;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,Qn(n),n},Qn(Un);var Gn=Un.extend({data:null}),Kn=Un.extend({data:null}),Jn=[9,13,27,32],Xn=G&&"CompositionEvent"in window,Yn=null;G&&"documentMode"in document&&(Yn=document.documentMode);var Zn=G&&"TextEvent"in window&&!Yn,er=G&&(!Xn||Yn&&8<Yn&&11>=Yn),tr=String.fromCharCode(32),nr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},rr=!1;function ir(e,t){switch(e){case"keyup":return-1!==Jn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function or(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var ar=!1;var sr={eventTypes:nr,extractEvents:function(e,t,n,r){var i;if(Xn)e:{switch(e){case"compositionstart":var o=nr.compositionStart;break e;case"compositionend":o=nr.compositionEnd;break e;case"compositionupdate":o=nr.compositionUpdate;break e}o=void 0}else ar?ir(e,n)&&(o=nr.compositionEnd):"keydown"===e&&229===n.keyCode&&(o=nr.compositionStart);return o?(er&&"ko"!==n.locale&&(ar||o!==nr.compositionStart?o===nr.compositionEnd&&ar&&(i=qn()):(zn="value"in(Ln=r)?Ln.value:Ln.textContent,ar=!0)),o=Gn.getPooled(o,t,n,r),i?o.data=i:null!==(i=or(n))&&(o.data=i),Fn(o),i=o):i=null,(e=Zn?function(e,t){switch(e){case"compositionend":return or(t);case"keypress":return 32!==t.which?null:(rr=!0,tr);case"textInput":return(e=t.data)===tr&&rr?null:e;default:return null}}(e,n):function(e,t){if(ar)return"compositionend"===e||!Xn&&ir(e,t)?(e=qn(),jn=zn=Ln=null,ar=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return er&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=Kn.getPooled(nr.beforeInput,t,n,r)).data=e,Fn(t)):t=null,null===i?t:null===t?i:[i,t]}},lr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ur(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!lr[e.type]:"textarea"===t}var cr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function pr(e,t,n){return(e=Un.getPooled(cr.change,e,t,n)).type="change",Z(n),Fn(e),e}var dr=null,hr=null;function fr(e){st(e)}function mr(e){if(we(Pn(e)))return e}function gr(e,t){if("change"===e)return t}var yr=!1;function vr(){dr&&(dr.detachEvent("onpropertychange",br),hr=dr=null)}function br(e){if("value"===e.propertyName&&mr(hr))if(e=pr(hr,e,lt(e)),oe)st(e);else{oe=!0;try{te(fr,e)}finally{oe=!1,se()}}}function xr(e,t,n){"focus"===e?(vr(),hr=n,(dr=t).attachEvent("onpropertychange",br)):"blur"===e&&vr()}function wr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return mr(hr)}function _r(e,t){if("click"===e)return mr(t)}function Cr(e,t){if("input"===e||"change"===e)return mr(t)}G&&(yr=ut("input")&&(!document.documentMode||9<document.documentMode));var Sr={eventTypes:cr,_isInputEventSupported:yr,extractEvents:function(e,t,n,r){var i=t?Pn(t):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=gr;else if(ur(i))if(yr)a=Cr;else{a=wr;var s=xr}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=_r);if(a&&(a=a(e,t)))return pr(a,n,r);s&&s(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Te(i,"number",i.value)}},kr=Un.extend({view:null,detail:null}),Er={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Er[e])&&!!t[e]}function Ir(){return Tr}var Pr=0,Or=0,Nr=!1,Rr=!1,Ar=kr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Ir,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Pr;return Pr=e.screenX,Nr?"mousemove"===e.type?e.screenX-t:0:(Nr=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Or;return Or=e.screenY,Rr?"mousemove"===e.type?e.screenY-t:0:(Rr=!0,0)}}),Dr=Ar.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Vr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Mr={eventTypes:Vr,extractEvents:function(e,t,n,r,i){var o="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(o&&0==(32&i)&&(n.relatedTarget||n.fromElement)||!a&&!o)return null;(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,a)?(a=t,null!==(t=(t=n.relatedTarget||n.toElement)?Tn(t):null)&&(t!==Ze(t)||5!==t.tag&&6!==t.tag)&&(t=null)):a=null;if(a===t)return null;if("mouseout"===e||"mouseover"===e)var s=Ar,l=Vr.mouseLeave,u=Vr.mouseEnter,c="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=Dr,l=Vr.pointerLeave,u=Vr.pointerEnter,c="pointer");if(e=null==a?o:Pn(a),o=null==t?o:Pn(t),(l=s.getPooled(l,a,n,r)).type=c+"leave",l.target=e,l.relatedTarget=o,(n=s.getPooled(u,t,n,r)).type=c+"enter",n.target=o,n.relatedTarget=e,c=t,(r=a)&&c)e:{for(u=c,a=0,e=s=r;e;e=Nn(e))a++;for(e=0,t=u;t;t=Nn(t))e++;for(;0<a-e;)s=Nn(s),a--;for(;0<e-a;)u=Nn(u),e--;for(;a--;){if(s===u||s===u.alternate)break e;s=Nn(s),u=Nn(u)}s=null}else s=null;for(u=s,s=[];r&&r!==u&&(null===(a=r.alternate)||a!==u);)s.push(r),r=Nn(r);for(r=[];c&&c!==u&&(null===(a=c.alternate)||a!==u);)r.push(c),c=Nn(c);for(c=0;c<s.length;c++)Vn(s[c],"bubbled",l);for(c=r.length;0<c--;)Vn(r[c],"captured",n);return 0==(64&i)?[l]:[l,n]}};var Fr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Lr=Object.prototype.hasOwnProperty;function zr(e,t){if(Fr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Lr.call(t,n[r])||!Fr(e[n[r]],t[n[r]]))return!1;return!0}var jr=G&&"documentMode"in document&&11>=document.documentMode,qr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},$r=null,Br=null,Ur=null,Wr=!1;function Hr(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Wr||null==$r||$r!==cn(n)?null:("selectionStart"in(n=$r)&&fn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Ur&&zr(Ur,n)?null:(Ur=n,(e=Un.getPooled(qr.select,Br,e,t)).type="select",e.target=$r,Fn(e),e))}var Qr={eventTypes:qr,extractEvents:function(e,t,n,r,i,o){if(!(o=!(i=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){e:{i=Ye(i),o=H.onSelect;for(var a=0;a<o.length;a++)if(!i.has(o[a])){i=!1;break e}i=!0}o=!i}if(o)return null;switch(i=t?Pn(t):window,e){case"focus":(ur(i)||"true"===i.contentEditable)&&($r=i,Br=t,Ur=null);break;case"blur":Ur=Br=$r=null;break;case"mousedown":Wr=!0;break;case"contextmenu":case"mouseup":case"dragend":return Wr=!1,Hr(n,r);case"selectionchange":if(jr)break;case"keydown":case"keyup":return Hr(n,r)}return null}},Gr=Un.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Kr=Un.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jr=kr.extend({relatedTarget:null});function Xr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var Yr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ei=kr.extend({key:function(e){if(e.key){var t=Yr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Xr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Zr[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Ir,charCode:function(e){return"keypress"===e.type?Xr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Xr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),ti=Ar.extend({dataTransfer:null}),ni=kr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Ir}),ri=Un.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ii=Ar.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),oi={eventTypes:Ft,extractEvents:function(e,t,n,r){var i=Lt.get(e);if(!i)return null;switch(e){case"keypress":if(0===Xr(n))return null;case"keydown":case"keyup":e=ei;break;case"blur":case"focus":e=Jr;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=Ar;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=ti;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=ni;break;case He:case Qe:case Ge:e=Gr;break;case Ke:e=ri;break;case"scroll":e=kr;break;case"wheel":e=ii;break;case"copy":case"cut":case"paste":e=Kr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Dr;break;default:e=Un}return Fn(t=e.getPooled(i,t,n,r)),t}};if(z)throw Error(a(101));z=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),q(),f=On,m=In,g=Pn,Q({SimpleEventPlugin:oi,EnterLeaveEventPlugin:Mr,ChangeEventPlugin:Sr,SelectEventPlugin:Qr,BeforeInputEventPlugin:sr});var ai=[],si=-1;function li(e){0>si||(e.current=ai[si],ai[si]=null,si--)}function ui(e,t){si++,ai[si]=e.current,e.current=t}var ci={},pi={current:ci},di={current:!1},hi=ci;function fi(e,t){var n=e.type.contextTypes;if(!n)return ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function mi(e){return null!=(e=e.childContextTypes)}function gi(){li(di),li(pi)}function yi(e,t,n){if(pi.current!==ci)throw Error(a(168));ui(pi,t),ui(di,n)}function vi(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in e))throw Error(a(108,F(t)||"Unknown",o));return i({},n,{},r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ci,hi=pi.current,ui(pi,e),ui(di,di.current),!0}function xi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=vi(e,t,hi),r.__reactInternalMemoizedMergedChildContext=e,li(di),li(pi),ui(pi,e)):li(di),ui(di,n)}var wi=o.unstable_runWithPriority,_i=o.unstable_scheduleCallback,Ci=o.unstable_cancelCallback,Si=o.unstable_requestPaint,ki=o.unstable_now,Ei=o.unstable_getCurrentPriorityLevel,Ti=o.unstable_ImmediatePriority,Ii=o.unstable_UserBlockingPriority,Pi=o.unstable_NormalPriority,Oi=o.unstable_LowPriority,Ni=o.unstable_IdlePriority,Ri={},Ai=o.unstable_shouldYield,Di=void 0!==Si?Si:function(){},Vi=null,Mi=null,Fi=!1,Li=ki(),zi=1e4>Li?ki:function(){return ki()-Li};function ji(){switch(Ei()){case Ti:return 99;case Ii:return 98;case Pi:return 97;case Oi:return 96;case Ni:return 95;default:throw Error(a(332))}}function qi(e){switch(e){case 99:return Ti;case 98:return Ii;case 97:return Pi;case 96:return Oi;case 95:return Ni;default:throw Error(a(332))}}function $i(e,t){return e=qi(e),wi(e,t)}function Bi(e,t,n){return e=qi(e),_i(e,t,n)}function Ui(e){return null===Vi?(Vi=[e],Mi=_i(Ti,Hi)):Vi.push(e),Ri}function Wi(){if(null!==Mi){var e=Mi;Mi=null,Ci(e)}Hi()}function Hi(){if(!Fi&&null!==Vi){Fi=!0;var e=0;try{var t=Vi;$i(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Vi=null}catch(t){throw null!==Vi&&(Vi=Vi.slice(e+1)),_i(Ti,Wi),t}finally{Fi=!1}}}function Qi(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function Gi(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var Ki={current:null},Ji=null,Xi=null,Yi=null;function Zi(){Yi=Xi=Ji=null}function eo(e){var t=Ki.current;li(Ki),e.type._context._currentValue=t}function to(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function no(e,t){Ji=e,Yi=Xi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Oa=!0),e.firstContext=null)}function ro(e,t){if(Yi!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Yi=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Xi){if(null===Ji)throw Error(a(308));Xi=t,Ji.dependencies={expirationTime:0,firstContext:t,responders:null}}else Xi=Xi.next=t;return e._currentValue}var io=!1;function oo(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function ao(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function so(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function lo(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function uo(e,t){var n=e.alternate;null!==n&&ao(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function co(e,t,n,r){var o=e.updateQueue;io=!1;var a=o.baseQueue,s=o.shared.pending;if(null!==s){if(null!==a){var l=a.next;a.next=s.next,s.next=l}a=s,o.shared.pending=null,null!==(l=e.alternate)&&(null!==(l=l.updateQueue)&&(l.baseQueue=s))}if(null!==a){l=a.next;var u=o.baseState,c=0,p=null,d=null,h=null;if(null!==l)for(var f=l;;){if((s=f.expirationTime)<r){var m={expirationTime:f.expirationTime,suspenseConfig:f.suspenseConfig,tag:f.tag,payload:f.payload,callback:f.callback,next:null};null===h?(d=h=m,p=u):h=h.next=m,s>c&&(c=s)}else{null!==h&&(h=h.next={expirationTime:1073741823,suspenseConfig:f.suspenseConfig,tag:f.tag,payload:f.payload,callback:f.callback,next:null}),ol(s,f.suspenseConfig);e:{var g=e,y=f;switch(s=t,m=n,y.tag){case 1:if("function"==typeof(g=y.payload)){u=g.call(m,u,s);break e}u=g;break e;case 3:g.effectTag=-4097&g.effectTag|64;case 0:if(null==(s="function"==typeof(g=y.payload)?g.call(m,u,s):g))break e;u=i({},u,s);break e;case 2:io=!0}}null!==f.callback&&(e.effectTag|=32,null===(s=o.effects)?o.effects=[f]:s.push(f))}if(null===(f=f.next)||f===l){if(null===(s=o.shared.pending))break;f=a.next=s.next,s.next=l,o.baseQueue=a=s,o.shared.pending=null}}null===h?p=u:h.next=d,o.baseState=p,o.baseQueue=h,al(c),e.expirationTime=c,e.memoizedState=u}}function po(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!=typeof r)throw Error(a(191,r));r.call(i)}}}var ho=v.ReactCurrentBatchConfig,fo=(new r.Component).refs;function mo(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:i({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var go={isMounted:function(e){return!!(e=e._reactInternalFiber)&&Ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=Hs(),i=ho.suspense;(i=so(r=Qs(r,e,i),i)).payload=t,null!=n&&(i.callback=n),lo(e,i),Gs(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=Hs(),i=ho.suspense;(i=so(r=Qs(r,e,i),i)).tag=1,i.payload=t,null!=n&&(i.callback=n),lo(e,i),Gs(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=Hs(),r=ho.suspense;(r=so(n=Qs(n,e,r),r)).tag=2,null!=t&&(r.callback=t),lo(e,r),Gs(e,n)}};function yo(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!zr(n,r)||!zr(i,o))}function vo(e,t,n){var r=!1,i=ci,o=t.contextType;return"object"==typeof o&&null!==o?o=ro(o):(i=mi(t)?hi:pi.current,o=(r=null!=(r=t.contextTypes))?fi(e,i):ci),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=go,e.stateNode=t,t._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function bo(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&go.enqueueReplaceState(t,t.state,null)}function xo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=fo,oo(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=ro(o):(o=mi(t)?hi:pi.current,i.context=fi(e,o)),co(e,n,i,r),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(mo(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&go.enqueueReplaceState(i,i.state,null),co(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var wo=Array.isArray;function _o(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===fo&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Co(e,t){if("textarea"!==e.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function So(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=El(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Pl(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=_o(e,t,n),r.return=e,r):((r=Tl(n.type,n.key,n.props,null,e.mode,r)).ref=_o(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ol(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function p(e,t,n,r,o){return null===t||7!==t.tag?((t=Il(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Pl(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Tl(t.type,t.key,t.props,null,e.mode,n)).ref=_o(e,null,t),n.return=e,n;case _:return(t=Ol(t,e.mode,n)).return=e,t}if(wo(t)||M(t))return(t=Il(t,e.mode,n,null)).return=e,t;Co(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?n.type===C?p(e,t,n.props.children,r,i):u(e,t,n,r):null;case _:return n.key===i?c(e,t,n,r):null}if(wo(n)||M(n))return null!==i?null:p(e,t,n,r,null);Co(e,n)}return null}function f(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case w:return e=e.get(null===r.key?n:r.key)||null,r.type===C?p(t,e,r.props.children,i,r.key):u(t,e,r,i);case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(wo(r)||M(r))return p(t,e=e.get(n)||null,r,i,null);Co(t,r)}return null}function m(i,a,s,l){for(var u=null,c=null,p=a,m=a=0,g=null;null!==p&&m<s.length;m++){p.index>m?(g=p,p=null):g=p.sibling;var y=h(i,p,s[m],l);if(null===y){null===p&&(p=g);break}e&&p&&null===y.alternate&&t(i,p),a=o(y,a,m),null===c?u=y:c.sibling=y,c=y,p=g}if(m===s.length)return n(i,p),u;if(null===p){for(;m<s.length;m++)null!==(p=d(i,s[m],l))&&(a=o(p,a,m),null===c?u=p:c.sibling=p,c=p);return u}for(p=r(i,p);m<s.length;m++)null!==(g=f(p,i,m,s[m],l))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),a=o(g,a,m),null===c?u=g:c.sibling=g,c=g);return e&&p.forEach((function(e){return t(i,e)})),u}function g(i,s,l,u){var c=M(l);if("function"!=typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var p=c=null,m=s,g=s=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=h(i,m,v.value,u);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),s=o(b,s,g),null===p?c=b:p.sibling=b,p=b,m=y}if(v.done)return n(i,m),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,u))&&(s=o(v,s,g),null===p?c=v:p.sibling=v,p=v);return c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=f(m,i,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=o(v,s,g),null===p?c=v:p.sibling=v,p=v);return e&&m.forEach((function(e){return t(i,e)})),c}return function(e,r,o,l){var u="object"==typeof o&&null!==o&&o.type===C&&null===o.key;u&&(o=o.props.children);var c="object"==typeof o&&null!==o;if(c)switch(o.$$typeof){case w:e:{for(c=o.key,u=r;null!==u;){if(u.key===c){switch(u.tag){case 7:if(o.type===C){n(e,u.sibling),(r=i(u,o.props.children)).return=e,e=r;break e}break;default:if(u.elementType===o.type){n(e,u.sibling),(r=i(u,o.props)).ref=_o(e,u,o),r.return=e,e=r;break e}}n(e,u);break}t(e,u),u=u.sibling}o.type===C?((r=Il(o.props.children,e.mode,l,o.key)).return=e,e=r):((l=Tl(o.type,o.key,o.props,null,e.mode,l)).ref=_o(e,r,o),l.return=e,e=l)}return s(e);case _:e:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Ol(o,e.mode,l)).return=e,e=r}return s(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Pl(o,e.mode,l)).return=e,e=r),s(e);if(wo(o))return m(e,r,o,l);if(M(o))return g(e,r,o,l);if(c&&Co(e,o),void 0===o&&!u)switch(e.tag){case 1:case 0:throw e=e.type,Error(a(152,e.displayName||e.name||"Component"))}return n(e,r)}}var ko=So(!0),Eo=So(!1),To={},Io={current:To},Po={current:To},Oo={current:To};function No(e){if(e===To)throw Error(a(174));return e}function Ro(e,t){switch(ui(Oo,t),ui(Po,e),ui(Io,To),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Fe(null,"");break;default:t=Fe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}li(Io),ui(Io,t)}function Ao(){li(Io),li(Po),li(Oo)}function Do(e){No(Oo.current);var t=No(Io.current),n=Fe(t,e.type);t!==n&&(ui(Po,e),ui(Io,n))}function Vo(e){Po.current===e&&(li(Io),li(Po))}var Mo={current:0};function Fo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Lo(e,t){return{responder:e,props:t}}var zo=v.ReactCurrentDispatcher,jo=v.ReactCurrentBatchConfig,qo=0,$o=null,Bo=null,Uo=null,Wo=!1;function Ho(){throw Error(a(321))}function Qo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Fr(e[n],t[n]))return!1;return!0}function Go(e,t,n,r,i,o){if(qo=o,$o=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,zo.current=null===e||null===e.memoizedState?ya:va,e=n(r,i),t.expirationTime===qo){o=0;do{if(t.expirationTime=0,!(25>o))throw Error(a(301));o+=1,Uo=Bo=null,t.updateQueue=null,zo.current=ba,e=n(r,i)}while(t.expirationTime===qo)}if(zo.current=ga,t=null!==Bo&&null!==Bo.next,qo=0,Uo=Bo=$o=null,Wo=!1,t)throw Error(a(300));return e}function Ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Uo?$o.memoizedState=Uo=e:Uo=Uo.next=e,Uo}function Jo(){if(null===Bo){var e=$o.alternate;e=null!==e?e.memoizedState:null}else e=Bo.next;var t=null===Uo?$o.memoizedState:Uo.next;if(null!==t)Uo=t,Bo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(Bo=e).memoizedState,baseState:Bo.baseState,baseQueue:Bo.baseQueue,queue:Bo.queue,next:null},null===Uo?$o.memoizedState=Uo=e:Uo=Uo.next=e}return Uo}function Xo(e,t){return"function"==typeof t?t(e):t}function Yo(e){var t=Jo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=Bo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var l=s=o=null,u=i;do{var c=u.expirationTime;if(c<qo){var p={expirationTime:u.expirationTime,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(s=l=p,o=r):l=l.next=p,c>$o.expirationTime&&($o.expirationTime=c,al(c))}else null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:u.suspenseConfig,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),ol(c,u.suspenseConfig),r=u.eagerReducer===e?u.eagerState:e(r,u.action);u=u.next}while(null!==u&&u!==i);null===l?o=r:l.next=s,Fr(r,t.memoizedState)||(Oa=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function Zo(e){var t=Jo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);Fr(o,t.memoizedState)||(Oa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function ea(e){var t=Ko();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Xo,lastRenderedState:e}).dispatch=ma.bind(null,$o,e),[t.memoizedState,e]}function ta(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=$o.updateQueue)?(t={lastEffect:null},$o.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function na(){return Jo().memoizedState}function ra(e,t,n,r){var i=Ko();$o.effectTag|=e,i.memoizedState=ta(1|t,n,void 0,void 0===r?null:r)}function ia(e,t,n,r){var i=Jo();r=void 0===r?null:r;var o=void 0;if(null!==Bo){var a=Bo.memoizedState;if(o=a.destroy,null!==r&&Qo(r,a.deps))return void ta(t,n,o,r)}$o.effectTag|=e,i.memoizedState=ta(1|t,n,o,r)}function oa(e,t){return ra(516,4,e,t)}function aa(e,t){return ia(516,4,e,t)}function sa(e,t){return ia(4,2,e,t)}function la(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ua(e,t,n){return n=null!=n?n.concat([e]):null,ia(4,2,la.bind(null,t,e),n)}function ca(){}function pa(e,t){return Ko().memoizedState=[e,void 0===t?null:t],e}function da(e,t){var n=Jo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Qo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ha(e,t){var n=Jo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Qo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function fa(e,t,n){var r=ji();$i(98>r?98:r,(function(){e(!0)})),$i(97<r?97:r,(function(){var r=jo.suspense;jo.suspense=void 0===t?null:t;try{e(!1),n()}finally{jo.suspense=r}}))}function ma(e,t,n){var r=Hs(),i=ho.suspense;i={expirationTime:r=Qs(r,e,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var o=t.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),t.pending=i,o=e.alternate,e===$o||null!==o&&o===$o)Wo=!0,i.expirationTime=qo,$o.expirationTime=qo;else{if(0===e.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.eagerReducer=o,i.eagerState=s,Fr(s,a))return}catch(e){}Gs(e,r)}}var ga={readContext:ro,useCallback:Ho,useContext:Ho,useEffect:Ho,useImperativeHandle:Ho,useLayoutEffect:Ho,useMemo:Ho,useReducer:Ho,useRef:Ho,useState:Ho,useDebugValue:Ho,useResponder:Ho,useDeferredValue:Ho,useTransition:Ho},ya={readContext:ro,useCallback:pa,useContext:ro,useEffect:oa,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,ra(4,2,la.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ra(4,2,e,t)},useMemo:function(e,t){var n=Ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=ma.bind(null,$o,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ko().memoizedState=e},useState:ea,useDebugValue:ca,useResponder:Lo,useDeferredValue:function(e,t){var n=ea(e),r=n[0],i=n[1];return oa((function(){var n=jo.suspense;jo.suspense=void 0===t?null:t;try{i(e)}finally{jo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=ea(!1),n=t[0];return t=t[1],[pa(fa.bind(null,t,e),[t,e]),n]}},va={readContext:ro,useCallback:da,useContext:ro,useEffect:aa,useImperativeHandle:ua,useLayoutEffect:sa,useMemo:ha,useReducer:Yo,useRef:na,useState:function(){return Yo(Xo)},useDebugValue:ca,useResponder:Lo,useDeferredValue:function(e,t){var n=Yo(Xo),r=n[0],i=n[1];return aa((function(){var n=jo.suspense;jo.suspense=void 0===t?null:t;try{i(e)}finally{jo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=Yo(Xo),n=t[0];return t=t[1],[da(fa.bind(null,t,e),[t,e]),n]}},ba={readContext:ro,useCallback:da,useContext:ro,useEffect:aa,useImperativeHandle:ua,useLayoutEffect:sa,useMemo:ha,useReducer:Zo,useRef:na,useState:function(){return Zo(Xo)},useDebugValue:ca,useResponder:Lo,useDeferredValue:function(e,t){var n=Zo(Xo),r=n[0],i=n[1];return aa((function(){var n=jo.suspense;jo.suspense=void 0===t?null:t;try{i(e)}finally{jo.suspense=n}}),[e,t]),r},useTransition:function(e){var t=Zo(Xo),n=t[0];return t=t[1],[da(fa.bind(null,t,e),[t,e]),n]}},xa=null,wa=null,_a=!1;function Ca(e,t){var n=Sl(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function ka(e){if(_a){var t=wa;if(t){var n=t;if(!Sa(e,t)){if(!(t=wn(n.nextSibling))||!Sa(e,t))return e.effectTag=-1025&e.effectTag|2,_a=!1,void(xa=e);Ca(xa,n)}xa=e,wa=wn(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,_a=!1,xa=e}}function Ea(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;xa=e}function Ta(e){if(e!==xa)return!1;if(!_a)return Ea(e),_a=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!vn(t,e.memoizedProps))for(t=wa;t;)Ca(e,t),t=wn(t.nextSibling);if(Ea(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){wa=wn(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}wa=null}}else wa=xa?wn(e.stateNode.nextSibling):null;return!0}function Ia(){wa=xa=null,_a=!1}var Pa=v.ReactCurrentOwner,Oa=!1;function Na(e,t,n,r){t.child=null===e?Eo(t,null,n,r):ko(t,e.child,n,r)}function Ra(e,t,n,r,i){n=n.render;var o=t.ref;return no(t,i),r=Go(e,t,n,r,o,i),null===e||Oa?(t.effectTag|=1,Na(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Ga(e,t,i))}function Aa(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!=typeof a||kl(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Tl(n.type,null,r,null,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Da(e,t,a,r,i,o))}return a=e.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:zr)(i,r)&&e.ref===t.ref)?Ga(e,t,o):(t.effectTag|=1,(e=El(a,r)).ref=t.ref,e.return=t,t.child=e)}function Da(e,t,n,r,i,o){return null!==e&&zr(e.memoizedProps,r)&&e.ref===t.ref&&(Oa=!1,i<o)?(t.expirationTime=e.expirationTime,Ga(e,t,o)):Ma(e,t,n,r,o)}function Va(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Ma(e,t,n,r,i){var o=mi(n)?hi:pi.current;return o=fi(t,o),no(t,i),n=Go(e,t,n,r,o,i),null===e||Oa?(t.effectTag|=1,Na(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),Ga(e,t,i))}function Fa(e,t,n,r,i){if(mi(n)){var o=!0;bi(t)}else o=!1;if(no(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),vo(t,n,r),xo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;"object"==typeof u&&null!==u?u=ro(u):u=fi(t,u=mi(n)?hi:pi.current);var c=n.getDerivedStateFromProps,p="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;p||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==u)&&bo(t,a,r,u),io=!1;var d=t.memoizedState;a.state=d,co(t,r,a,i),l=t.memoizedState,s!==r||d!==l||di.current||io?("function"==typeof c&&(mo(t,n,c,r),l=t.memoizedState),(s=io||yo(t,n,s,r,d,l,u))?(p||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.effectTag|=4)):("function"==typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"==typeof a.componentDidMount&&(t.effectTag|=4),r=!1)}else a=t.stateNode,ao(e,t),s=t.memoizedProps,a.props=t.type===t.elementType?s:Gi(t.type,s),l=a.context,"object"==typeof(u=n.contextType)&&null!==u?u=ro(u):u=fi(t,u=mi(n)?hi:pi.current),(p="function"==typeof(c=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==u)&&bo(t,a,r,u),io=!1,l=t.memoizedState,a.state=l,co(t,r,a,i),d=t.memoizedState,s!==r||l!==d||di.current||io?("function"==typeof c&&(mo(t,n,c,r),d=t.memoizedState),(c=io||yo(t,n,s,r,l,d,u))?(p||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,d,u),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,d,u)),"function"==typeof a.componentDidUpdate&&(t.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=d),a.props=r,a.state=d,a.context=u,r=c):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&l===e.memoizedState||(t.effectTag|=256),r=!1);return La(e,t,n,r,o,i)}function La(e,t,n,r,i,o){Va(e,t);var a=0!=(64&t.effectTag);if(!r&&!a)return i&&xi(t,n,!1),Ga(e,t,o);r=t.stateNode,Pa.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=ko(t,e.child,null,o),t.child=ko(t,null,s,o)):Na(e,t,s,o),t.memoizedState=r.state,i&&xi(t,n,!0),t.child}function za(e){var t=e.stateNode;t.pendingContext?yi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&yi(0,t.context,!1),Ro(e,t.containerInfo)}var ja,qa,$a,Ba={dehydrated:null,retryTime:0};function Ua(e,t,n){var r,i=t.mode,o=t.pendingProps,a=Mo.current,s=!1;if((r=0!=(64&t.effectTag))||(r=0!=(2&a)&&(null===e||null!==e.memoizedState)),r?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),ui(Mo,1&a),null===e){if(void 0!==o.fallback&&ka(t),s){if(s=o.fallback,(o=Il(null,i,0,null)).return=t,0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Il(s,i,n,null)).return=t,o.sibling=n,t.memoizedState=Ba,t.child=o,n}return i=o.children,t.memoizedState=null,t.child=Eo(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,s){if(o=o.fallback,(n=El(e,e.pendingProps)).return=t,0==(2&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=El(i,o)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=Ba,t.child=n,i}return n=ko(t,e.child,o.children,n),t.memoizedState=null,t.child=n}if(e=e.child,s){if(s=o.fallback,(o=Il(null,i,0,null)).return=t,o.child=e,null!==e&&(e.return=o),0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Il(s,i,n,null)).return=t,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,t.memoizedState=Ba,t.child=o,n}return t.memoizedState=null,t.child=ko(t,e,o.children,n)}function Wa(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),to(e.return,t)}function Ha(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i,a.lastEffect=o)}function Qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Na(e,t,r.children,n),0!=(2&(r=Mo.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Wa(e,n);else if(19===e.tag)Wa(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ui(Mo,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Fo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ha(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Fo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ha(t,!0,n,null,o,t.lastEffect);break;case"together":Ha(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Ga(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&al(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=El(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=El(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ka(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ja(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return mi(t.type)&&gi(),null;case 3:return Ao(),li(di),li(pi),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!Ta(t)||(t.effectTag|=4),null;case 5:Vo(t),n=No(Oo.current);var o=t.type;if(null!==e&&null!=t.stateNode)qa(e,t,o,r,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!r){if(null===t.stateNode)throw Error(a(166));return null}if(e=No(Io.current),Ta(t)){r=t.stateNode,o=t.type;var s=t.memoizedProps;switch(r[Sn]=t,r[kn]=s,o){case"iframe":case"object":case"embed":Qt("load",r);break;case"video":case"audio":for(e=0;e<Je.length;e++)Qt(Je[e],r);break;case"source":Qt("error",r);break;case"img":case"image":case"link":Qt("error",r),Qt("load",r);break;case"form":Qt("reset",r),Qt("submit",r);break;case"details":Qt("toggle",r);break;case"input":Ce(r,s),Qt("invalid",r),ln(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Qt("invalid",r),ln(n,"onChange");break;case"textarea":Ne(r,s),Qt("invalid",r),ln(n,"onChange")}for(var l in on(o,s),e=null,s)if(s.hasOwnProperty(l)){var u=s[l];"children"===l?"string"==typeof u?r.textContent!==u&&(e=["children",u]):"number"==typeof u&&r.textContent!==""+u&&(e=["children",""+u]):W.hasOwnProperty(l)&&null!=u&&ln(n,l)}switch(o){case"input":xe(r),Ee(r,s,!0);break;case"textarea":xe(r),Ae(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=un)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(l=9===n.nodeType?n:n.ownerDocument,e===sn&&(e=Me(o)),e===sn?"script"===o?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=l.createElement(o,{is:r.is}):(e=l.createElement(o),"select"===o&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,o),e[Sn]=t,e[kn]=r,ja(e,t),t.stateNode=e,l=an(o,r),o){case"iframe":case"object":case"embed":Qt("load",e),u=r;break;case"video":case"audio":for(u=0;u<Je.length;u++)Qt(Je[u],e);u=r;break;case"source":Qt("error",e),u=r;break;case"img":case"image":case"link":Qt("error",e),Qt("load",e),u=r;break;case"form":Qt("reset",e),Qt("submit",e),u=r;break;case"details":Qt("toggle",e),u=r;break;case"input":Ce(e,r),u=_e(e,r),Qt("invalid",e),ln(n,"onChange");break;case"option":u=Ie(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},u=i({},r,{value:void 0}),Qt("invalid",e),ln(n,"onChange");break;case"textarea":Ne(e,r),u=Oe(e,r),Qt("invalid",e),ln(n,"onChange");break;default:u=r}on(o,u);var c=u;for(s in c)if(c.hasOwnProperty(s)){var p=c[s];"style"===s?nn(e,p):"dangerouslySetInnerHTML"===s?null!=(p=p?p.__html:void 0)&&ze(e,p):"children"===s?"string"==typeof p?("textarea"!==o||""!==p)&&je(e,p):"number"==typeof p&&je(e,""+p):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(W.hasOwnProperty(s)?null!=p&&ln(n,s):null!=p&&ye(e,s,p,l))}switch(o){case"input":xe(e),Ee(e,r,!1);break;case"textarea":xe(e),Ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+ve(r.value));break;case"select":e.multiple=!!r.multiple,null!=(n=r.value)?Pe(e,!!r.multiple,n,!1):null!=r.defaultValue&&Pe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof u.onClick&&(e.onclick=un)}yn(o,r)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)$a(0,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(a(166));n=No(Oo.current),No(Io.current),Ta(t)?(n=t.stateNode,r=t.memoizedProps,n[Sn]=t,n.nodeValue!==r&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Sn]=t,t.stateNode=n)}return null;case 13:return li(Mo),r=t.memoizedState,0!=(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==r,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Ta(t):(r=null!==(o=e.memoizedState),n||null===o||null!==(o=e.child.sibling)&&(null!==(s=t.firstEffect)?(t.firstEffect=o,o.nextEffect=s):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8)),n&&!r&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Mo.current)?Ts===xs&&(Ts=ws):(Ts!==xs&&Ts!==ws||(Ts=_s),0!==Rs&&null!==Ss&&(Al(Ss,Es),Dl(Ss,Rs)))),(n||r)&&(t.effectTag|=4),null);case 4:return Ao(),null;case 10:return eo(t),null;case 17:return mi(t.type)&&gi(),null;case 19:if(li(Mo),null===(r=t.memoizedState))return null;if(o=0!=(64&t.effectTag),null===(s=r.rendering)){if(o)Ka(r,!1);else if(Ts!==xs||null!==e&&0!=(64&e.effectTag))for(s=t.child;null!==s;){if(null!==(e=Fo(s))){for(t.effectTag|=64,Ka(r,!1),null!==(o=e.updateQueue)&&(t.updateQueue=o,t.effectTag|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=t.child;null!==r;)s=n,(o=r).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(e=o.alternate)?(o.childExpirationTime=0,o.expirationTime=s,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=e.childExpirationTime,o.expirationTime=e.expirationTime,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,s=e.dependencies,o.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),r=r.sibling;return ui(Mo,1&Mo.current|2),t.child}s=s.sibling}}else{if(!o)if(null!==(e=Fo(s))){if(t.effectTag|=64,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),Ka(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>r.tailExpiration&&1<n&&(t.effectTag|=64,o=!0,Ka(r,!1),t.expirationTime=t.childExpirationTime=n-1);r.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=r.last)?n.sibling=s:t.child=s,r.last=s)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=zi()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Mo.current,ui(Mo,o?1&t|2:1&t),n):null}throw Error(a(156,t.tag))}function Xa(e){switch(e.tag){case 1:mi(e.type)&&gi();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Ao(),li(di),li(pi),0!=(64&(t=e.effectTag)))throw Error(a(285));return e.effectTag=-4097&t|64,e;case 5:return Vo(e),null;case 13:return li(Mo),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return li(Mo),null;case 4:return Ao(),null;case 10:return eo(e),null;default:return null}}function Ya(e,t){return{value:e,source:t,stack:L(t)}}ja=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},qa=function(e,t,n,r,o){var a=e.memoizedProps;if(a!==r){var s,l,u=t.stateNode;switch(No(Io.current),e=null,n){case"input":a=_e(u,a),r=_e(u,r),e=[];break;case"option":a=Ie(u,a),r=Ie(u,r),e=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":a=Oe(u,a),r=Oe(u,r),e=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(u.onclick=un)}for(s in on(n,r),n=null,a)if(!r.hasOwnProperty(s)&&a.hasOwnProperty(s)&&null!=a[s])if("style"===s)for(l in u=a[s])u.hasOwnProperty(l)&&(n||(n={}),n[l]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(W.hasOwnProperty(s)?e||(e=[]):(e=e||[]).push(s,null));for(s in r){var c=r[s];if(u=null!=a?a[s]:void 0,r.hasOwnProperty(s)&&c!==u&&(null!=c||null!=u))if("style"===s)if(u){for(l in u)!u.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&u[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(e||(e=[]),e.push(s,n)),n=c;else"dangerouslySetInnerHTML"===s?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(e=e||[]).push(s,c)):"children"===s?u===c||"string"!=typeof c&&"number"!=typeof c||(e=e||[]).push(s,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(W.hasOwnProperty(s)?(null!=c&&ln(o,s),e||u===c||(e=[])):(e=e||[]).push(s,c))}n&&(e=e||[]).push("style",n),o=e,(t.updateQueue=o)&&(t.effectTag|=4)}},$a=function(e,t,n,r){n!==r&&(t.effectTag|=4)};var Za="function"==typeof WeakSet?WeakSet:Set;function es(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=L(n)),null!==n&&F(n.type),t=t.value,null!==e&&1===e.tag&&F(e.type);try{console.error(t)}catch(e){setTimeout((function(){throw e}))}}function ts(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){vl(e,t)}else t.current=null}function ns(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Gi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(a(163))}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==t)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function os(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void is(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var r=n.elementType===n.type?t.memoizedProps:Gi(n.type,t.memoizedProps);e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&po(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}po(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&yn(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Mt(n)))));case 19:case 17:case 20:case 21:return}throw Error(a(163))}function as(e,t,n){switch("function"==typeof _l&&_l(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e.next;$i(97<n?97:n,(function(){var e=r;do{var n=e.destroy;if(void 0!==n){var i=t;try{n()}catch(e){vl(i,e)}}e=e.next}while(e!==r)}))}break;case 1:ts(t),"function"==typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(t){vl(e,t)}}(t,n);break;case 5:ts(t);break;case 4:cs(e,t,n)}}function ss(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&ss(t)}function ls(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:{for(var t=e.return;null!==t;){if(ls(t)){var n=t;break e}t=t.return}throw Error(a(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.effectTag&&(je(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ls(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}r?function e(t,n,r){var i=t.tag,o=5===i||6===i;if(o)t=o?t.stateNode:t.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(t,n):r.insertBefore(t,n):(8===r.nodeType?(n=r.parentNode).insertBefore(t,r):(n=r).appendChild(t),null!==(r=r._reactRootContainer)&&void 0!==r||null!==n.onclick||(n.onclick=un));else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t):function e(t,n,r){var i=t.tag,o=5===i||6===i;if(o)t=o?t.stateNode:t.stateNode.instance,n?r.insertBefore(t,n):r.appendChild(t);else if(4!==i&&null!==(t=t.child))for(e(t,n,r),t=t.sibling;null!==t;)e(t,n,r),t=t.sibling}(e,n,t)}function cs(e,t,n){for(var r,i,o=t,s=!1;;){if(!s){s=o.return;e:for(;;){if(null===s)throw Error(a(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===o.tag||6===o.tag){e:for(var l=e,u=o,c=n,p=u;;)if(as(l,p,c),null!==p.child&&4!==p.tag)p.child.return=p,p=p.child;else{if(p===u)break e;for(;null===p.sibling;){if(null===p.return||p.return===u)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}i?(l=r,u=o.stateNode,8===l.nodeType?l.parentNode.removeChild(u):l.removeChild(u)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(as(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function ps(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void rs(3,t);case 1:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[kn]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Se(n,r),an(e,i),t=an(e,r),i=0;i<o.length;i+=2){var s=o[i],l=o[i+1];"style"===s?nn(n,l):"dangerouslySetInnerHTML"===s?ze(n,l):"children"===s?je(n,l):ye(n,s,l,t)}switch(e){case"input":ke(n,r);break;case"textarea":Re(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?Pe(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?Pe(n,!!r.multiple,r.defaultValue,!0):Pe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(a(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Mt(t.containerInfo)));case 12:return;case 13:if(n=t,null===t.memoizedState?r=!1:(r=!0,n=t.child,Ds=zi()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,r?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,i=null!=(i=e.memoizedProps.style)&&i.hasOwnProperty("display")?i.display:null,o.style.display=tn("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void ds(t);case 19:return void ds(t);case 17:return}throw Error(a(163))}function ds(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Za),t.forEach((function(t){var r=xl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}var hs="function"==typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=so(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ms||(Ms=!0,Fs=r),es(e,t)},n}function ms(e,t,n){(n=so(n,null)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return es(e,t),r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Ls?Ls=new Set([this]):Ls.add(this),es(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var gs,ys=Math.ceil,vs=v.ReactCurrentDispatcher,bs=v.ReactCurrentOwner,xs=0,ws=3,_s=4,Cs=0,Ss=null,ks=null,Es=0,Ts=xs,Is=null,Ps=1073741823,Os=1073741823,Ns=null,Rs=0,As=!1,Ds=0,Vs=null,Ms=!1,Fs=null,Ls=null,zs=!1,js=null,qs=90,$s=null,Bs=0,Us=null,Ws=0;function Hs(){return 0!=(48&Cs)?1073741821-(zi()/10|0):0!==Ws?Ws:Ws=1073741821-(zi()/10|0)}function Qs(e,t,n){if(0==(2&(t=t.mode)))return 1073741823;var r=ji();if(0==(4&t))return 99===r?1073741823:1073741822;if(0!=(16&Cs))return Es;if(null!==n)e=Qi(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Qi(e,150,100);break;case 97:case 96:e=Qi(e,5e3,250);break;case 95:e=2;break;default:throw Error(a(326))}return null!==Ss&&e===Es&&--e,e}function Gs(e,t){if(50<Bs)throw Bs=0,Us=null,Error(a(185));if(null!==(e=Ks(e,t))){var n=ji();1073741823===t?0!=(8&Cs)&&0==(48&Cs)?Zs(e):(Xs(e),0===Cs&&Wi()):Xs(e),0==(4&Cs)||98!==n&&99!==n||(null===$s?$s=new Map([[e,t]]):(void 0===(n=$s.get(e))||n>t)&&$s.set(e,t))}}function Ks(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Ss===i&&(al(t),Ts===_s&&Al(i,Es)),Dl(i,t)),i}function Js(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Rl(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function Xs(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Ui(Zs.bind(null,e));else{var t=Js(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=Hs();if(1073741823===t?r=99:1===t||2===t?r=95:r=0>=(r=10*(1073741821-t)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&i>=r)return;n!==Ri&&Ci(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Ui(Zs.bind(null,e)):Bi(r,Ys.bind(null,e),{timeout:10*(1073741821-t)-zi()}),e.callbackNode=t}}}function Ys(e,t){if(Ws=0,t)return Vl(e,t=Hs()),Xs(e),null;var n=Js(e);if(0!==n){if(t=e.callbackNode,0!=(48&Cs))throw Error(a(327));if(ml(),e===Ss&&n===Es||nl(e,n),null!==ks){var r=Cs;Cs|=16;for(var i=il();;)try{ll();break}catch(t){rl(e,t)}if(Zi(),Cs=r,vs.current=i,1===Ts)throw t=Is,nl(e,n),Al(e,n),Xs(e),t;if(null===ks)switch(i=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,r=Ts,Ss=null,r){case xs:case 1:throw Error(a(345));case 2:Vl(e,2<n?2:n);break;case ws:if(Al(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=pl(i)),1073741823===Ps&&10<(i=Ds+500-zi())){if(As){var o=e.lastPingedTime;if(0===o||o>=n){e.lastPingedTime=n,nl(e,n);break}}if(0!==(o=Js(e))&&o!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}e.timeoutHandle=bn(dl.bind(null,e),i);break}dl(e);break;case _s:if(Al(e,n),n===(r=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=pl(i)),As&&(0===(i=e.lastPingedTime)||i>=n)){e.lastPingedTime=n,nl(e,n);break}if(0!==(i=Js(e))&&i!==n)break;if(0!==r&&r!==n){e.lastPingedTime=r;break}if(1073741823!==Os?r=10*(1073741821-Os)-zi():1073741823===Ps?r=0:(r=10*(1073741821-Ps)-5e3,0>(r=(i=zi())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ys(r/1960))-r)&&(r=n)),10<r){e.timeoutHandle=bn(dl.bind(null,e),r);break}dl(e);break;case 5:if(1073741823!==Ps&&null!==Ns){o=Ps;var s=Ns;if(0>=(r=0|s.busyMinDurationMs)?r=0:(i=0|s.busyDelayMs,r=(o=zi()-(10*(1073741821-o)-(0|s.timeoutMs||5e3)))<=i?0:i+r-o),10<r){Al(e,n),e.timeoutHandle=bn(dl.bind(null,e),r);break}}dl(e);break;default:throw Error(a(329))}if(Xs(e),e.callbackNode===t)return Ys.bind(null,e)}}return null}function Zs(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,0!=(48&Cs))throw Error(a(327));if(ml(),e===Ss&&t===Es||nl(e,t),null!==ks){var n=Cs;Cs|=16;for(var r=il();;)try{sl();break}catch(t){rl(e,t)}if(Zi(),Cs=n,vs.current=r,1===Ts)throw n=Is,nl(e,t),Al(e,t),Xs(e),n;if(null!==ks)throw Error(a(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Ss=null,dl(e),Xs(e)}return null}function el(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&Wi()}}function tl(e,t){var n=Cs;Cs&=-2,Cs|=8;try{return e(t)}finally{0===(Cs=n)&&Wi()}}function nl(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,xn(n)),null!==ks)for(n=ks.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&gi();break;case 3:Ao(),li(di),li(pi);break;case 5:Vo(r);break;case 4:Ao();break;case 13:case 19:li(Mo);break;case 10:eo(r)}n=n.return}Ss=e,ks=El(e.current,null),Es=t,Ts=xs,Is=null,Os=Ps=1073741823,Ns=null,Rs=0,As=!1}function rl(e,t){for(;;){try{if(Zi(),zo.current=ga,Wo)for(var n=$o.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(qo=0,Uo=Bo=$o=null,Wo=!1,null===ks||null===ks.return)return Ts=1,Is=t,ks=null;e:{var i=e,o=ks.return,a=ks,s=t;if(t=Es,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,null!==s&&"object"==typeof s&&"function"==typeof s.then){var l=s;if(0==(2&a.mode)){var u=a.alternate;u?(a.memoizedState=u.memoizedState,a.expirationTime=u.expirationTime):a.memoizedState=null}var c=0!=(1&Mo.current),p=o;do{var d;if(d=13===p.tag){var h=p.memoizedState;if(null!==h)d=null!==h.dehydrated;else{var f=p.memoizedProps;d=void 0!==f.fallback&&(!0!==f.unstable_avoidThisFallback||!c)}}if(d){var m=p.updateQueue;if(null===m){var g=new Set;g.add(l),p.updateQueue=g}else m.add(l);if(0==(2&p.mode)){if(p.effectTag|=64,a.effectTag&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var y=so(1073741823,null);y.tag=2,lo(a,y)}a.expirationTime=1073741823;break e}s=void 0,a=t;var v=i.pingCache;if(null===v?(v=i.pingCache=new hs,s=new Set,v.set(l,s)):void 0===(s=v.get(l))&&(s=new Set,v.set(l,s)),!s.has(a)){s.add(a);var b=bl.bind(null,i,l,a);l.then(b,b)}p.effectTag|=4096,p.expirationTime=t;break e}p=p.return}while(null!==p);s=Error((F(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+L(a))}5!==Ts&&(Ts=2),s=Ya(s,a),p=o;do{switch(p.tag){case 3:l=s,p.effectTag|=4096,p.expirationTime=t,uo(p,fs(p,l,t));break e;case 1:l=s;var x=p.type,w=p.stateNode;if(0==(64&p.effectTag)&&("function"==typeof x.getDerivedStateFromError||null!==w&&"function"==typeof w.componentDidCatch&&(null===Ls||!Ls.has(w)))){p.effectTag|=4096,p.expirationTime=t,uo(p,ms(p,l,t));break e}}p=p.return}while(null!==p)}ks=cl(ks)}catch(e){t=e;continue}break}}function il(){var e=vs.current;return vs.current=ga,null===e?ga:e}function ol(e,t){e<Ps&&2<e&&(Ps=e),null!==t&&e<Os&&2<e&&(Os=e,Ns=t)}function al(e){e>Rs&&(Rs=e)}function sl(){for(;null!==ks;)ks=ul(ks)}function ll(){for(;null!==ks&&!Ai();)ks=ul(ks)}function ul(e){var t=gs(e.alternate,e,Es);return e.memoizedProps=e.pendingProps,null===t&&(t=cl(e)),bs.current=null,t}function cl(e){ks=e;do{var t=ks.alternate;if(e=ks.return,0==(2048&ks.effectTag)){if(t=Ja(t,ks,Es),1===Es||1!==ks.childExpirationTime){for(var n=0,r=ks.child;null!==r;){var i=r.expirationTime,o=r.childExpirationTime;i>n&&(n=i),o>n&&(n=o),r=r.sibling}ks.childExpirationTime=n}if(null!==t)return t;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=ks.firstEffect),null!==ks.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=ks.firstEffect),e.lastEffect=ks.lastEffect),1<ks.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=ks:e.firstEffect=ks,e.lastEffect=ks))}else{if(null!==(t=Xa(ks)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=ks.sibling))return t;ks=e}while(null!==ks);return Ts===xs&&(Ts=5),null}function pl(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function dl(e){var t=ji();return $i(99,hl.bind(null,e,t)),null}function hl(e,t){do{ml()}while(null!==js);if(0!=(48&Cs))throw Error(a(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=pl(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Ss&&(ks=Ss=null,Es=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=Cs;Cs|=32,bs.current=null,mn=Ht;var s=hn();if(fn(s)){if("selectionStart"in s)var l={start:s.selectionStart,end:s.selectionEnd};else e:{var u=(l=(l=s.ownerDocument)&&l.defaultView||window).getSelection&&l.getSelection();if(u&&0!==u.rangeCount){l=u.anchorNode;var c=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{l.nodeType,p.nodeType}catch(e){l=null;break e}var d=0,h=-1,f=-1,m=0,g=0,y=s,v=null;t:for(;;){for(var b;y!==l||0!==c&&3!==y.nodeType||(h=d+c),y!==p||0!==u&&3!==y.nodeType||(f=d+u),3===y.nodeType&&(d+=y.nodeValue.length),null!==(b=y.firstChild);)v=y,y=b;for(;;){if(y===s)break t;if(v===l&&++m===c&&(h=d),v===p&&++g===u&&(f=d),null!==(b=y.nextSibling))break;v=(y=v).parentNode}y=b}l=-1===h||-1===f?null:{start:h,end:f}}else l=null}l=l||{start:0,end:0}}else l=null;gn={activeElementDetached:null,focusedElem:s,selectionRange:l},Ht=!1,Vs=i;do{try{fl()}catch(e){if(null===Vs)throw Error(a(330));vl(Vs,e),Vs=Vs.nextEffect}}while(null!==Vs);Vs=i;do{try{for(s=e,l=t;null!==Vs;){var x=Vs.effectTag;if(16&x&&je(Vs.stateNode,""),128&x){var w=Vs.alternate;if(null!==w){var _=w.ref;null!==_&&("function"==typeof _?_(null):_.current=null)}}switch(1038&x){case 2:us(Vs),Vs.effectTag&=-3;break;case 6:us(Vs),Vs.effectTag&=-3,ps(Vs.alternate,Vs);break;case 1024:Vs.effectTag&=-1025;break;case 1028:Vs.effectTag&=-1025,ps(Vs.alternate,Vs);break;case 4:ps(Vs.alternate,Vs);break;case 8:cs(s,c=Vs,l),ss(c)}Vs=Vs.nextEffect}}catch(e){if(null===Vs)throw Error(a(330));vl(Vs,e),Vs=Vs.nextEffect}}while(null!==Vs);if(_=gn,w=hn(),x=_.focusedElem,l=_.selectionRange,w!==x&&x&&x.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(x.ownerDocument.documentElement,x)){null!==l&&fn(x)&&(w=l.start,void 0===(_=l.end)&&(_=w),"selectionStart"in x?(x.selectionStart=w,x.selectionEnd=Math.min(_,x.value.length)):(_=(w=x.ownerDocument||document)&&w.defaultView||window).getSelection&&(_=_.getSelection(),c=x.textContent.length,s=Math.min(l.start,c),l=void 0===l.end?s:Math.min(l.end,c),!_.extend&&s>l&&(c=l,l=s,s=c),c=dn(x,s),p=dn(x,l),c&&p&&(1!==_.rangeCount||_.anchorNode!==c.node||_.anchorOffset!==c.offset||_.focusNode!==p.node||_.focusOffset!==p.offset)&&((w=w.createRange()).setStart(c.node,c.offset),_.removeAllRanges(),s>l?(_.addRange(w),_.extend(p.node,p.offset)):(w.setEnd(p.node,p.offset),_.addRange(w))))),w=[];for(_=x;_=_.parentNode;)1===_.nodeType&&w.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"==typeof x.focus&&x.focus(),x=0;x<w.length;x++)(_=w[x]).element.scrollLeft=_.left,_.element.scrollTop=_.top}Ht=!!mn,gn=mn=null,e.current=n,Vs=i;do{try{for(x=e;null!==Vs;){var C=Vs.effectTag;if(36&C&&os(x,Vs.alternate,Vs),128&C){w=void 0;var S=Vs.ref;if(null!==S){var k=Vs.stateNode;switch(Vs.tag){case 5:w=k;break;default:w=k}"function"==typeof S?S(w):S.current=w}}Vs=Vs.nextEffect}}catch(e){if(null===Vs)throw Error(a(330));vl(Vs,e),Vs=Vs.nextEffect}}while(null!==Vs);Vs=null,Di(),Cs=o}else e.current=n;if(zs)zs=!1,js=e,qs=t;else for(Vs=i;null!==Vs;)t=Vs.nextEffect,Vs.nextEffect=null,Vs=t;if(0===(t=e.firstPendingTime)&&(Ls=null),1073741823===t?e===Us?Bs++:(Bs=0,Us=e):Bs=0,"function"==typeof wl&&wl(n.stateNode,r),Xs(e),Ms)throw Ms=!1,e=Fs,Fs=null,e;return 0!=(8&Cs)||Wi(),null}function fl(){for(;null!==Vs;){var e=Vs.effectTag;0!=(256&e)&&ns(Vs.alternate,Vs),0==(512&e)||zs||(zs=!0,Bi(97,(function(){return ml(),null}))),Vs=Vs.nextEffect}}function ml(){if(90!==qs){var e=97<qs?97:qs;return qs=90,$i(e,gl)}}function gl(){if(null===js)return!1;var e=js;if(js=null,0!=(48&Cs))throw Error(a(331));var t=Cs;for(Cs|=32,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:rs(5,n),is(5,n)}}catch(t){if(null===e)throw Error(a(330));vl(e,t)}n=e.nextEffect,e.nextEffect=null,e=n}return Cs=t,Wi(),!0}function yl(e,t,n){lo(e,t=fs(e,t=Ya(n,t),1073741823)),null!==(e=Ks(e,1073741823))&&Xs(e)}function vl(e,t){if(3===e.tag)yl(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){yl(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Ls||!Ls.has(r))){lo(n,e=ms(n,e=Ya(t,e),1073741823)),null!==(n=Ks(n,1073741823))&&Xs(n);break}}n=n.return}}function bl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),Ss===e&&Es===n?Ts===_s||Ts===ws&&1073741823===Ps&&zi()-Ds<500?nl(e,Es):As=!0:Rl(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,Xs(e)))}function xl(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=Qs(t=Hs(),e,null)),null!==(e=Ks(e,t))&&Xs(e)}gs=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||di.current)Oa=!0;else{if(r<n){switch(Oa=!1,t.tag){case 3:za(t),Ia();break;case 5:if(Do(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:mi(t.type)&&bi(t);break;case 4:Ro(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value,i=t.type._context,ui(Ki,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&r>=n?Ua(e,t,n):(ui(Mo,1&Mo.current),null!==(t=Ga(e,t,n))?t.sibling:null);ui(Mo,1&Mo.current);break;case 19:if(r=t.childExpirationTime>=n,0!=(64&e.effectTag)){if(r)return Qa(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),ui(Mo,Mo.current),!r)return null}return Ga(e,t,n)}Oa=!1}}else Oa=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=fi(t,pi.current),no(t,n),i=Go(null,t,r,e,i,n),t.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)){var o=!0;bi(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,oo(t);var s=r.getDerivedStateFromProps;"function"==typeof s&&mo(t,r,s,e),i.updater=go,t.stateNode=i,i._reactInternalFiber=t,xo(t,r,e,n),t=La(null,t,r,!0,o,n)}else t.tag=0,Na(null,t,i,n),t=t.child;return t;case 16:e:{if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,o=t.tag=function(e){if("function"==typeof e)return kl(e)?1:0;if(null!=e){if((e=e.$$typeof)===P)return 11;if(e===R)return 14}return 2}(i),e=Gi(i,e),o){case 0:t=Ma(null,t,i,e,n);break e;case 1:t=Fa(null,t,i,e,n);break e;case 11:t=Ra(null,t,i,e,n);break e;case 14:t=Aa(null,t,i,Gi(i.type,e),r,n);break e}throw Error(a(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ma(e,t,r,i=t.elementType===r?i:Gi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Fa(e,t,r,i=t.elementType===r?i:Gi(r,i),n);case 3:if(za(t),r=t.updateQueue,null===e||null===r)throw Error(a(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ao(e,t),co(t,r,null,n),(r=t.memoizedState.element)===i)Ia(),t=Ga(e,t,n);else{if((i=t.stateNode.hydrate)&&(wa=wn(t.stateNode.containerInfo.firstChild),xa=t,i=_a=!0),i)for(n=Eo(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Na(e,t,r,n),Ia();t=t.child}return t;case 5:return Do(t),null===e&&ka(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,vn(r,i)?s=null:null!==o&&vn(r,o)&&(t.effectTag|=16),Va(e,t),4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Na(e,t,s,n),t=t.child),t;case 6:return null===e&&ka(t),null;case 13:return Ua(e,t,n);case 4:return Ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ko(t,null,r,n):Na(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ra(e,t,r,i=t.elementType===r?i:Gi(r,i),n);case 7:return Na(e,t,t.pendingProps,n),t.child;case 8:case 12:return Na(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value;var l=t.type._context;if(ui(Ki,l._currentValue),l._currentValue=o,null!==s)if(l=s.value,0===(o=Fr(l,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,o):1073741823))){if(s.children===i.children&&!di.current){t=Ga(e,t,n);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u){s=l.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!=(c.observedBits&o)){1===l.tag&&((c=so(n,null)).tag=2,lo(l,c)),l.expirationTime<n&&(l.expirationTime=n),null!==(c=l.alternate)&&c.expirationTime<n&&(c.expirationTime=n),to(l.return,n),u.expirationTime<n&&(u.expirationTime=n);break}c=c.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}Na(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,no(t,n),r=r(i=ro(i,o.unstable_observedBits)),t.effectTag|=1,Na(e,t,r,n),t.child;case 14:return o=Gi(i=t.type,t.pendingProps),Aa(e,t,i,o=Gi(i.type,o),r,n);case 15:return Da(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Gi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,mi(r)?(e=!0,bi(t)):e=!1,no(t,n),vo(t,r,i),xo(t,r,i,n),La(null,t,r,!0,e,n);case 19:return Qa(e,t,n)}throw Error(a(156,t.tag))};var wl=null,_l=null;function Cl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Sl(e,t,n,r){return new Cl(e,t,n,r)}function kl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function El(e,t){var n=e.alternate;return null===n?((n=Sl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Tl(e,t,n,r,i,o){var s=2;if(r=e,"function"==typeof e)kl(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case C:return Il(n.children,i,o,t);case I:s=8,i|=7;break;case S:s=8,i|=1;break;case k:return(e=Sl(12,n,t,8|i)).elementType=k,e.type=k,e.expirationTime=o,e;case O:return(e=Sl(13,n,t,i)).type=O,e.elementType=O,e.expirationTime=o,e;case N:return(e=Sl(19,n,t,i)).elementType=N,e.expirationTime=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case E:s=10;break e;case T:s=9;break e;case P:s=11;break e;case R:s=14;break e;case A:s=16,r=null;break e;case D:s=22;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Sl(s,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Il(e,t,n,r){return(e=Sl(7,e,r,t)).expirationTime=n,e}function Pl(e,t,n){return(e=Sl(6,e,null,t)).expirationTime=n,e}function Ol(e,t,n){return(t=Sl(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Nl(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Rl(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function Al(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(r>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Dl(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Vl(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Ml(e,t,n,r){var i=t.current,o=Hs(),s=ho.suspense;o=Qs(o,i,s);e:if(n){t:{if(Ze(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(a(170));var l=n;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(mi(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(a(171))}if(1===n.tag){var u=n.type;if(mi(u)){n=vi(n,u,l);break e}}n=l}else n=ci;return null===t.context?t.context=n:t.pendingContext=n,(t=so(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),lo(i,t),Gs(i,o),o}function Fl(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Ll(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function zl(e,t){Ll(e,t),(e=e.alternate)&&Ll(e,t)}function jl(e,t,n){var r=new Nl(e,t,n=null!=n&&!0===n.hydrate),i=Sl(3,null,null,2===t?7:1===t?3:0);r.current=i,i.stateNode=r,oo(i),e[En]=r.current,n&&0!==t&&function(e,t){var n=Ye(t);Et.forEach((function(e){ft(e,t,n)})),Tt.forEach((function(e){ft(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function ql(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $l(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=Fl(a);s.call(e)}}Ml(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new jl(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"==typeof i){var l=i;i=function(){var e=Fl(a);l.call(e)}}tl((function(){Ml(t,a,e,i)}))}return Fl(a)}function Bl(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Ul(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ql(t))throw Error(a(200));return Bl(e,t,null,n)}jl.prototype.render=function(e){Ml(e,this._internalRoot,null,null)},jl.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Ml(null,e,null,(function(){t[En]=null}))},mt=function(e){if(13===e.tag){var t=Qi(Hs(),150,100);Gs(e,t),zl(e,t)}},gt=function(e){13===e.tag&&(Gs(e,3),zl(e,3))},yt=function(e){if(13===e.tag){var t=Hs();Gs(e,t=Qs(t,e,null)),zl(e,t)}},K=function(e,t,n){switch(t){case"input":if(ke(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=On(r);if(!i)throw Error(a(90));we(r),ke(r,i)}}}break;case"textarea":Re(e,n);break;case"select":null!=(t=n.value)&&Pe(e,!!n.multiple,t,!1)}},te=el,ne=function(e,t,n,r,i){var o=Cs;Cs|=4;try{return $i(98,e.bind(null,t,n,r,i))}finally{0===(Cs=o)&&Wi()}},re=function(){0==(49&Cs)&&(function(){if(null!==$s){var e=$s;$s=null,e.forEach((function(e,t){Vl(t,e),Xs(t)})),Wi()}}(),ml())},ie=function(e,t){var n=Cs;Cs|=2;try{return e(t)}finally{0===(Cs=n)&&Wi()}};var Wl,Hl,Ql={Events:[In,Pn,On,Q,U,Fn,function(e){it(e,Mn)},Z,ee,Xt,st,ml,{current:!1}]};Hl=(Wl={findFiberByHostInstance:Tn,bundleType:0,version:"16.13.0",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);wl=function(e){try{t.onCommitFiberRoot(n,e,void 0,64==(64&e.current.effectTag))}catch(e){}},_l=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){}}}catch(e){}}(i({},Wl,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=nt(e))?null:e.stateNode},findFiberByHostInstance:function(e){return Hl?Hl(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null})),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ql,t.createPortal=Ul,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"==typeof e.render)throw Error(a(188));throw Error(a(268,Object.keys(e)))}return e=null===(e=nt(t))?null:e.stateNode},t.flushSync=function(e,t){if(0!=(48&Cs))throw Error(a(187));var n=Cs;Cs|=1;try{return $i(99,e.bind(null,t))}finally{Cs=n,Wi()}},t.hydrate=function(e,t,n){if(!ql(t))throw Error(a(200));return $l(null,e,t,!0,n)},t.render=function(e,t,n){if(!ql(t))throw Error(a(200));return $l(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ql(e))throw Error(a(40));return!!e._reactRootContainer&&(tl((function(){$l(null,null,e,!1,(function(){e._reactRootContainer=null,e[En]=null}))})),!0)},t.unstable_batchedUpdates=el,t.unstable_createPortal=function(e,t){return Ul(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ql(n))throw Error(a(200));if(null==e||void 0===e._reactInternalFiber)throw Error(a(38));return $l(e,t,n,!1,r)},t.version="16.13.0"},function(e,t,n){"use strict";e.exports=n(65)},function(e,t,n){"use strict";
/** @license React v0.19.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r,i,o,a,s;if("undefined"==typeof window||"function"!=typeof MessageChannel){var l=null,u=null,c=function(){if(null!==l)try{var e=t.unstable_now();l(!0,e),l=null}catch(e){throw setTimeout(c,0),e}},p=Date.now();t.unstable_now=function(){return Date.now()-p},r=function(e){null!==l?setTimeout(r,0,e):(l=e,setTimeout(c,0))},i=function(e,t){u=setTimeout(e,t)},o=function(){clearTimeout(u)},a=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var d=window.performance,h=window.Date,f=window.setTimeout,m=window.clearTimeout;if("undefined"!=typeof console){var g=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof g&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof d&&"function"==typeof d.now)t.unstable_now=function(){return d.now()};else{var y=h.now();t.unstable_now=function(){return h.now()-y}}var v=!1,b=null,x=-1,w=5,_=0;a=function(){return t.unstable_now()>=_},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):w=0<e?Math.floor(1e3/e):5};var C=new MessageChannel,S=C.port2;C.port1.onmessage=function(){if(null!==b){var e=t.unstable_now();_=e+w;try{b(!0,e)?S.postMessage(null):(v=!1,b=null)}catch(e){throw S.postMessage(null),e}}else v=!1},r=function(e){b=e,v||(v=!0,S.postMessage(null))},i=function(e,n){x=f((function(){e(t.unstable_now())}),n)},o=function(){m(x),x=-1}}function k(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<I(i,t)))break e;e[r]=t,e[n]=i,n=r}}function E(e){return void 0===(e=e[0])?null:e}function T(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,l=e[s];if(void 0!==a&&0>I(a,n))void 0!==l&&0>I(l,a)?(e[r]=l,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==l&&0>I(l,n)))break e;e[r]=l,e[s]=n,r=s}}}return t}return null}function I(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var P=[],O=[],N=1,R=null,A=3,D=!1,V=!1,M=!1;function F(e){for(var t=E(O);null!==t;){if(null===t.callback)T(O);else{if(!(t.startTime<=e))break;T(O),t.sortIndex=t.expirationTime,k(P,t)}t=E(O)}}function L(e){if(M=!1,F(e),!V)if(null!==E(P))V=!0,r(z);else{var t=E(O);null!==t&&i(L,t.startTime-e)}}function z(e,n){V=!1,M&&(M=!1,o()),D=!0;var r=A;try{for(F(n),R=E(P);null!==R&&(!(R.expirationTime>n)||e&&!a());){var s=R.callback;if(null!==s){R.callback=null,A=R.priorityLevel;var l=s(R.expirationTime<=n);n=t.unstable_now(),"function"==typeof l?R.callback=l:R===E(P)&&T(P),F(n)}else T(P);R=E(P)}if(null!==R)var u=!0;else{var c=E(O);null!==c&&i(L,c.startTime-n),u=!1}return u}finally{R=null,A=r,D=!1}}function j(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var q=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){V||D||(V=!0,r(z))},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return E(P)},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var n=A;A=t;try{return e()}finally{A=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=q,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=A;A=e;try{return t()}finally{A=n}},t.unstable_scheduleCallback=function(e,n,a){var s=t.unstable_now();if("object"==typeof a&&null!==a){var l=a.delay;l="number"==typeof l&&0<l?s+l:s,a="number"==typeof a.timeout?a.timeout:j(e)}else a=j(e),l=s;return e={id:N++,callback:n,priorityLevel:e,startTime:l,expirationTime:a=l+a,sortIndex:-1},l>s?(e.sortIndex=l,k(O,e),null===E(P)&&e===E(O)&&(M?o():M=!0,i(L,l-s))):(e.sortIndex=a,k(P,e),V||D||(V=!0,r(z))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();F(e);var n=E(P);return n!==R&&null!==R&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<R.expirationTime||a()},t.unstable_wrapCallback=function(e){var t=A;return function(){var n=A;A=t;try{return e.apply(this,arguments)}finally{A=n}}}},function(e,t,n){"use strict";var r=n(67);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";e.exports=n(69)},function(e,t,n){"use strict";
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r="function"==typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,l=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,p=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,h=r?Symbol.for("react.forward_ref"):60112,f=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,y=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.block"):60121,b=r?Symbol.for("react.fundamental"):60117,x=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function _(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case p:case d:case a:case l:case s:case f:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case g:case u:return e;default:return t}}case o:return t}}}function C(e){return _(e)===d}t.AsyncMode=p,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=u,t.Element=i,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=g,t.Portal=o,t.Profiler=l,t.StrictMode=s,t.Suspense=f,t.isAsyncMode=function(e){return C(e)||_(e)===p},t.isConcurrentMode=C,t.isContextConsumer=function(e){return _(e)===c},t.isContextProvider=function(e){return _(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return _(e)===h},t.isFragment=function(e){return _(e)===a},t.isLazy=function(e){return _(e)===y},t.isMemo=function(e){return _(e)===g},t.isPortal=function(e){return _(e)===o},t.isProfiler=function(e){return _(e)===l},t.isStrictMode=function(e){return _(e)===s},t.isSuspense=function(e){return _(e)===f},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===d||e===l||e===s||e===f||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===g||e.$$typeof===u||e.$$typeof===c||e.$$typeof===h||e.$$typeof===b||e.$$typeof===x||e.$$typeof===w||e.$$typeof===v)},t.typeOf=_},function(e,t,n){"use strict";
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r="function"==typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,l=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,p=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,h=r?Symbol.for("react.forward_ref"):60112,f=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,y=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.block"):60121,b=r?Symbol.for("react.fundamental"):60117,x=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function _(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case p:case d:case a:case l:case s:case f:return e;default:switch(e=e&&e.$$typeof){case c:case h:case y:case g:case u:return e;default:return t}}case o:return t}}}function C(e){return _(e)===d}t.AsyncMode=p,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=u,t.Element=i,t.ForwardRef=h,t.Fragment=a,t.Lazy=y,t.Memo=g,t.Portal=o,t.Profiler=l,t.StrictMode=s,t.Suspense=f,t.isAsyncMode=function(e){return C(e)||_(e)===p},t.isConcurrentMode=C,t.isContextConsumer=function(e){return _(e)===c},t.isContextProvider=function(e){return _(e)===u},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return _(e)===h},t.isFragment=function(e){return _(e)===a},t.isLazy=function(e){return _(e)===y},t.isMemo=function(e){return _(e)===g},t.isPortal=function(e){return _(e)===o},t.isProfiler=function(e){return _(e)===l},t.isStrictMode=function(e){return _(e)===s},t.isSuspense=function(e){return _(e)===f},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===d||e===l||e===s||e===f||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===g||e.$$typeof===u||e.$$typeof===c||e.$$typeof===h||e.$$typeof===b||e.$$typeof===x||e.$$typeof===w||e.$$typeof===v)},t.typeOf=_},function(e,t,n){var r=n(44);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.USER_SESSION="USER-SESSION",t.USER_DATA="USER_DATA"},function(e,t,n){var r,i;
/*!
 * JavaScript Cookie v2.2.0
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */!function(o){if(void 0===(i="function"==typeof(r=o)?r.call(t,n,t,e):r)||(e.exports=i),!0,e.exports=o(),!!0){var a=window.Cookies,s=window.Cookies=o();s.noConflict=function(){return window.Cookies=a,s}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}return function t(n){function r(t,i,o){var a;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(o=e({path:"/"},r.defaults,o)).expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*o.expires),o.expires=s}o.expires=o.expires?o.expires.toUTCString():"";try{a=JSON.stringify(i),/^[\{\[]/.test(a)&&(i=a)}catch(e){}i=n.write?n.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var l="";for(var u in o)o[u]&&(l+="; "+u,!0!==o[u]&&(l+="="+o[u]));return document.cookie=t+"="+i+l}t||(a={});for(var c=document.cookie?document.cookie.split("; "):[],p=/(%[0-9A-Z]{2})+/g,d=0;d<c.length;d++){var h=c[d].split("="),f=h.slice(1).join("=");this.json||'"'!==f.charAt(0)||(f=f.slice(1,-1));try{var m=h[0].replace(p,decodeURIComponent);if(f=n.read?n.read(f,m):n(f,m)||f.replace(p,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch(e){}if(t===m){a=f;break}t||(a[m]=f)}catch(e){}}return a}}return r.set=r,r.get=function(e){return r.call(r,e)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,n){r(t,"",e(n,{expires:-1}))},r.withConverter=t,r}((function(){}))}))},function(e,t){function n(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}e.exports=n,e.exports.default=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.invalidSession=t.getUserSessionError=t.getUserSessionSuccess=t.getSessionError=t.getSessionSuccess=void 0;var r=n(46);t.getSessionSuccess=function(){return{type:r.GET_SESSION_SUCCESS}},t.getSessionError=function(){return{type:r.GET_SESSION_ERROR}},t.getUserSessionSuccess=function(e){return{user:e,type:r.GET_USER_SESSION_SUCCESS}},t.getUserSessionError=function(){return{type:r.GET_USER_SESSION_ERROR}},t.invalidSession=function(){return{type:r.INVALID_SESSION}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialState=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(46),o=t.initialState={authenticated:!1,checked:!1,invalid:!1,user:{}};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case i.GET_SESSION_SUCCESS:return{user:r({},e.user),authenticated:!0,checked:!0,invalid:!1};case i.GET_SESSION_ERROR:return r({},e,{user:r({},e.user),authenticated:!1,checked:!0});case i.GET_USER_SESSION_SUCCESS:return r({},e,{user:t.user});case i.GET_USER_SESSION_ERROR:return r({},e,{user:{}});case i.INVALID_SESSION:return{user:{},checked:!0,authenticated:!1,invalid:!0};default:return e}}},function(e,t,n){(function(t){e.exports=function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){var n=t[a][1][e];return i(n||e)}),u,u.exports,e,t,n,r)}return n[a].exports}for(var o=!1,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,n,r){(function(e){"use strict";var t,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,a=new i(c),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),t=function(){s.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)t="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){c(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(c,0)};else{var l=new e.MessageChannel;l.port1.onmessage=c,t=function(){l.port2.postMessage(0)}}var u=[];function c(){var e,t;r=!0;for(var n=u.length;n;){for(t=u,u=[],e=-1;++e<n;)t[e]();n=u.length}r=!1}n.exports=function(e){1!==u.push(e)||r||t()}}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var r=e(1);function i(){}var o={},a=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==i&&h(this,e)}function c(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function p(e,t,n){r((function(){var r;try{r=t(n)}catch(t){return o.reject(e,t)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)}))}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var n=!1;function r(t){n||(n=!0,o.reject(e,t))}function i(t){n||(n=!0,o.resolve(e,t))}var a=f((function(){t(i,r)}));"error"===a.status&&r(a.value)}function f(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}t.exports=u,u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(i);return this.state!==l?p(n,this.state===s?e:t,this.outcome):this.queue.push(new c(n,e,t)),n},c.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},c.prototype.otherCallFulfilled=function(e){p(this.promise,this.onFulfilled,e)},c.prototype.callRejected=function(e){o.reject(this.promise,e)},c.prototype.otherCallRejected=function(e){p(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=f(d,t);if("error"===n.status)return o.reject(e,n.value);var r=n.value;if(r)h(e,r);else{e.state=s,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},u.resolve=function(e){return e instanceof this?e:o.resolve(new this(i),e)},u.reject=function(e){var t=new this(i);return o.reject(t,e)},u.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,l=-1,u=new this(i);++l<n;)c(e[l],l);return u;function c(e,i){t.resolve(e).then((function(e){a[i]=e,++s!==n||r||(r=!0,o.resolve(u,a))}),(function(e){r||(r=!0,o.reject(u,e))}))}},u.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a,s=-1,l=new this(i);++s<n;)a=e[s],t.resolve(a).then((function(e){r||(r=!0,o.resolve(l,e))}),(function(e){r||(r=!0,o.reject(l,e))}));return l}},{1:1}],3:[function(e,n,r){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(2))}).call(this,void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(e){return}}();function o(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;for(var n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"==typeof Promise&&e(3);var a=Promise;function s(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function l(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e.catch(n)}function u(e){return"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function c(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var p=void 0,d={},h=Object.prototype.toString;function f(e){return"boolean"==typeof p?a.resolve(p):function(e){return new a((function(t){var n=e.transaction("local-forage-detect-blob-support","readwrite"),r=o([""]);n.objectStore("local-forage-detect-blob-support").put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}(e).then((function(e){return p=e}))}function m(e){var t=d[e.name],n={};n.promise=new a((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function g(e){var t=d[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function y(e,t){var n=d[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function v(e,t){return new a((function(n,r){if(d[e.name]=d[e.name]||{forages:[],db:null,dbReady:null,deferredOperations:[]},e.db){if(!t)return n(e.db);m(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var a=i.open.apply(i,o);t&&(a.onupgradeneeded=function(t){var n=a.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore("local-forage-detect-blob-support")}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),a.onerror=function(e){e.preventDefault(),r(a.error)},a.onsuccess=function(){n(a.result),g(e)}}))}function b(e){return v(e,!1)}function x(e){return v(e,!0)}function w(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,i=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||n){if(n){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function _(e){return o([function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}(atob(e.data))],{type:e.type})}function C(e){return e&&e.__local_forage_encoded_blob}function S(e){var t=this,n=t._initReady().then((function(){var e=d[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return l(n,e,e),n}function k(e,t,n,r){void 0===r&&(r=1);try{var i=e.db.transaction(e.storeName,t);n(null,i)}catch(i){if(r>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return a.resolve().then((function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),x(e)})).then((function(){return function(e){m(e);for(var t=d[e.name],n=t.forages,r=0;r<n.length;r++){var i=n[r];i._dbInfo.db&&(i._dbInfo.db.close(),i._dbInfo.db=null)}return e.db=null,b(e).then((function(t){return e.db=t,w(e)?x(e):t})).then((function(r){e.db=t.db=r;for(var i=0;i<n.length;i++)n[i]._dbInfo.db=r})).catch((function(t){throw y(e,t),t}))}(e).then((function(){k(e,t,n,r-1)}))})).catch(n);n(i)}}var E={_driver:"asyncStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var i=d[n.name];i||(i={forages:[],db:null,dbReady:null,deferredOperations:[]},d[n.name]=i),i.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=S);var o=[];function s(){return a.resolve()}for(var l=0;l<i.forages.length;l++){var u=i.forages[l];u!==t&&o.push(u._initReady().catch(s))}var c=i.forages.slice(0);return a.all(o).then((function(){return n.db=i.db,b(n)})).then((function(e){return n.db=e,w(n,t._defaultConfig.version)?x(n):e})).then((function(e){n.db=i.db=e,t._dbInfo=n;for(var r=0;r<c.length;r++){var o=c[r];o!==t&&(o._dbInfo.db=n.db,o._dbInfo.version=n.version)}}))},_support:function(){try{if(!i)return!1;var e="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=new a((function(t,r){n.ready().then((function(){k(n._dbInfo,"readonly",(function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;C(r)&&(r=_(r));var i=e(r,n.key,s++);void 0!==i?t(i):n.continue()}else t()},a.onerror=function(){r(a.error)}}catch(e){r(e)}}))})).catch(r)}));return s(r,t),r},getItem:function(e,t){var n=this;e=u(e);var r=new a((function(t,r){n.ready().then((function(){k(n._dbInfo,"readonly",(function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),C(e)&&(e=_(e)),t(e)},a.onerror=function(){r(a.error)}}catch(e){r(e)}}))})).catch(r)}));return s(r,t),r},setItem:function(e,t,n){var r=this;e=u(e);var i=new a((function(n,i){var o;r.ready().then((function(){return o=r._dbInfo,"[object Blob]"===h.call(t)?f(o.db).then((function(e){return e?t:(n=t,new a((function(e,t){var r=new FileReader;r.onerror=t,r.onloadend=function(t){var r=btoa(t.target.result||"");e({__local_forage_encoded_blob:!0,data:r,type:n.type})},r.readAsBinaryString(n)})));var n})):t})).then((function(t){k(r._dbInfo,"readwrite",(function(o,a){if(o)return i(o);try{var s=a.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var l=s.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),n(t)},a.onabort=a.onerror=function(){var e=l.error?l.error:l.transaction.error;i(e)}}catch(e){i(e)}}))})).catch(i)}));return s(i,n),i},removeItem:function(e,t){var n=this;e=u(e);var r=new a((function(t,r){n.ready().then((function(){k(n._dbInfo,"readwrite",(function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName).delete(e);o.oncomplete=function(){t()},o.onerror=function(){r(a.error)},o.onabort=function(){var e=a.error?a.error:a.transaction.error;r(e)}}catch(e){r(e)}}))})).catch(r)}));return s(r,t),r},clear:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){k(t._dbInfo,"readwrite",(function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=o.error?o.error:o.transaction.error;n(e)}}catch(e){n(e)}}))})).catch(n)}));return s(n,e),n},length:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){k(t._dbInfo,"readonly",(function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).count();o.onsuccess=function(){e(o.result)},o.onerror=function(){n(o.error)}}catch(e){n(e)}}))})).catch(n)}));return s(n,e),n},key:function(e,t){var n=this,r=new a((function(t,r){e<0?t(null):n.ready().then((function(){k(n._dbInfo,"readonly",(function(i,o){if(i)return r(i);try{var a=o.objectStore(n._dbInfo.storeName),s=!1,l=a.openCursor();l.onsuccess=function(){var n=l.result;n?0===e||s?t(n.key):(s=!0,n.advance(e)):t(null)},l.onerror=function(){r(l.error)}}catch(e){r(e)}}))})).catch(r)}));return s(r,t),r},keys:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){k(t._dbInfo,"readonly",(function(r,i){if(r)return n(r);try{var o=i.objectStore(t._dbInfo.storeName).openCursor(),a=[];o.onsuccess=function(){var t=o.result;t?(a.push(t.key),t.continue()):e(a)},o.onerror=function(){n(o.error)}}catch(e){n(e)}}))})).catch(n)}));return s(n,e),n},dropInstance:function(e,t){t=c.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;if(e.name){var l=e.name===n.name&&o._dbInfo.db,u=l?a.resolve(o._dbInfo.db):b(e).then((function(t){var n=d[e.name],r=n.forages;n.db=t;for(var i=0;i<r.length;i++)r[i]._dbInfo.db=t;return t}));r=e.storeName?u.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;m(e);var r=d[e.name],o=r.forages;t.close();for(var s=0;s<o.length;s++){var l=o[s];l._dbInfo.db=null,l._dbInfo.version=n}return new a((function(t,r){var o=i.open(e.name,n);o.onerror=function(e){o.result.close(),r(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,g(n._dbInfo)}})).catch((function(t){throw(y(e,t)||a.resolve()).catch((function(){})),t}))}})):u.then((function(t){m(e);var n=d[e.name],r=n.forages;t.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;return new a((function(t,n){var r=i.deleteDatabase(e.name);r.onerror=r.onblocked=function(e){var t=r.result;t&&t.close(),n(e)},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<r.length;t++)g(r[t]._dbInfo)})).catch((function(t){throw(y(e,t)||a.resolve()).catch((function(){})),t}))}))}else r=a.reject("Invalid arguments");return s(r,t),r}},T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I=/^~~local_forage_type~([^~]+)~/,P="__lfsc__:".length,O=P+"arbf".length,N=Object.prototype.toString;function R(e){var t,n,r,i,o,a=.75*e.length,s=e.length,l=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),c=new Uint8Array(u);for(t=0;t<s;t+=4)n=T.indexOf(e[t]),r=T.indexOf(e[t+1]),i=T.indexOf(e[t+2]),o=T.indexOf(e[t+3]),c[l++]=n<<2|r>>4,c[l++]=(15&r)<<4|i>>2,c[l++]=(3&i)<<6|63&o;return u}function A(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=T[n[t]>>2],r+=T[(3&n[t])<<4|n[t+1]>>4],r+=T[(15&n[t+1])<<2|n[t+2]>>6],r+=T[63&n[t+2]];return n.length%3==2?r=r.substring(0,r.length-1)+"=":n.length%3==1&&(r=r.substring(0,r.length-2)+"=="),r}var D={serialize:function(e,t){var n="";if(e&&(n=N.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===N.call(e.buffer))){var r,i="__lfsc__:";e instanceof ArrayBuffer?(r=e,i+="arbf"):(r=e.buffer,"[object Int8Array]"===n?i+="si08":"[object Uint8Array]"===n?i+="ui08":"[object Uint8ClampedArray]"===n?i+="uic8":"[object Int16Array]"===n?i+="si16":"[object Uint16Array]"===n?i+="ur16":"[object Int32Array]"===n?i+="si32":"[object Uint32Array]"===n?i+="ui32":"[object Float32Array]"===n?i+="fl32":"[object Float64Array]"===n?i+="fl64":t(new Error("Failed to get type for BinaryArray"))),t(i+A(r))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){var n="~~local_forage_type~"+e.type+"~"+A(this.result);t("__lfsc__:blob"+n)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(n){console.error("Couldn't convert value into a JSON string: ",e),t(null,n)}},deserialize:function(e){if("__lfsc__:"!==e.substring(0,P))return JSON.parse(e);var t,n=e.substring(O),r=e.substring(P,O);if("blob"===r&&I.test(n)){var i=n.match(I);t=i[1],n=n.substring(i[0].length)}var a=R(n);switch(r){case"arbf":return a;case"blob":return o([a],{type:t});case"si08":return new Int8Array(a);case"ui08":return new Uint8Array(a);case"uic8":return new Uint8ClampedArray(a);case"si16":return new Int16Array(a);case"ur16":return new Uint16Array(a);case"si32":return new Int32Array(a);case"ui32":return new Uint32Array(a);case"fl32":return new Float32Array(a);case"fl64":return new Float64Array(a);default:throw new Error("Unkown type: "+r)}},stringToBuffer:R,bufferToString:A};function V(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function M(e,t,n,r,i,o){e.executeSql(n,r,i,(function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,s){s.rows.length?o(e,a):V(e,t,(function(){e.executeSql(n,r,i,o)}),o)}),o):o(e,a)}),o)}function F(e,t,n,r){var i=this;e=u(e);var o=new a((function(o,a){i.ready().then((function(){void 0===t&&(t=null);var s=t,l=i._dbInfo;l.serializer.serialize(t,(function(t,u){u?a(u):l.db.transaction((function(n){M(n,l,"INSERT OR REPLACE INTO "+l.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){o(s)}),(function(e,t){a(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void o(F.apply(i,[e,s,n,r-1]));a(t)}}))}))})).catch(a)}));return s(o,n),o}function L(e){return new a((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var i=[],o=0;o<r.rows.length;o++)i.push(r.rows.item(o).name);t({db:e,storeNames:i})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}var z={_driver:"webSQLStorage",_initStorage:function(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var i=new a((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(e){return r(e)}n.db.transaction((function(i){V(i,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=D,i},_support:"function"==typeof openDatabase,iterate:function(e,t){var n=this,r=new a((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){M(n,i,"SELECT * FROM "+i.storeName,[],(function(n,r){for(var o=r.rows,a=o.length,s=0;s<a;s++){var l=o.item(s),u=l.value;if(u&&(u=i.serializer.deserialize(u)),void 0!==(u=e(u,l.key,s+1)))return void t(u)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return s(r,t),r},getItem:function(e,t){var n=this;e=u(e);var r=new a((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){M(n,i,"SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return s(r,t),r},setItem:function(e,t,n){return F.apply(this,[e,t,n,1])},removeItem:function(e,t){var n=this;e=u(e);var r=new a((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){M(n,i,"DELETE FROM "+i.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return s(r,t),r},clear:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){M(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return s(n,e),n},length:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){M(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return s(n,e),n},key:function(e,t){var n=this,r=new a((function(t,r){n.ready().then((function(){var i=n._dbInfo;i.db.transaction((function(n){M(n,i,"SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return s(r,t),r},keys:function(e){var t=this,n=new a((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){M(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return s(n,e),n},dropInstance:function(e,t){t=c.apply(this,arguments);var n=this.config();(e="function"!=typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,i=this;return s(r=e.name?new a((function(t){var r;r=e.name===n.name?i._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(L(r))})).then((function(e){return new a((function(t,n){e.db.transaction((function(r){function i(e){return new a((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var o=[],s=0,l=e.storeNames.length;s<l;s++)o.push(i(e.storeNames[s]));a.all(o).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):a.reject("Invalid arguments"),t),r}};function j(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function q(){return!function(){try{return localStorage.setItem("_localforage_support_test",!0),localStorage.removeItem("_localforage_support_test"),!1}catch(e){return!0}}()||localStorage.length>0}var $={_driver:"localStorageWrapper",_initStorage:function(e){var t={};if(e)for(var n in e)t[n]=e[n];return t.keyPrefix=j(e,this._defaultConfig),q()?(this._dbInfo=t,t.serializer=D,a.resolve()):a.reject()},_support:function(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}(),iterate:function(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,i=r.length,o=localStorage.length,a=1,s=0;s<o;s++){var l=localStorage.key(s);if(0===l.indexOf(r)){var u=localStorage.getItem(l);if(u&&(u=t.serializer.deserialize(u)),void 0!==(u=e(u,l.substring(i),a++)))return u}}}));return s(r,t),r},getItem:function(e,t){var n=this;e=u(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return s(r,t),r},setItem:function(e,t,n){var r=this;e=u(e);var i=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new a((function(i,o){var a=r._dbInfo;a.serializer.serialize(t,(function(t,r){if(r)o(r);else try{localStorage.setItem(a.keyPrefix+e,t),i(n)}catch(e){"QuotaExceededError"!==e.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==e.name||o(e),o(e)}}))}))}));return s(i,n),i},removeItem:function(e,t){var n=this;e=u(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return s(r,t),r},clear:function(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return s(n,e),n},length:function(e){var t=this.keys().then((function(e){return e.length}));return s(t,e),t},key:function(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(e){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return s(r,t),r},keys:function(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++){var o=localStorage.key(i);0===o.indexOf(e.keyPrefix)&&r.push(o.substring(e.keyPrefix.length))}return r}));return s(n,e),n},dropInstance:function(e,t){if(t=c.apply(this,arguments),!(e="function"!=typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,i=this;return s(r=e.name?new a((function(t){e.storeName?t(j(e,i._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):a.reject("Invalid arguments"),t),r}},B=function(e,t){for(var n,r,i=e.length,o=0;o<i;){if((n=e[o])===(r=t)||"number"==typeof n&&"number"==typeof r&&isNaN(n)&&isNaN(r))return!0;o++}return!1},U=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},W={},H={},Q={INDEXEDDB:E,WEBSQL:z,LOCALSTORAGE:$},G=[Q.INDEXEDDB._driver,Q.WEBSQL._driver,Q.LOCALSTORAGE._driver],K=["dropInstance"],J=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(K),X={description:"",driver:G.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Y(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function Z(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(U(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var ee=new(function(){function e(t){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Q)if(Q.hasOwnProperty(n)){var r=Q[n],i=r._driver;this[n]=i,W[i]||this.defineDriver(r)}this._defaultConfig=Z({},X),this._config=Z({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===(void 0===e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!=typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new a((function(t,n){try{var r=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(i);for(var o=J.concat("_initStorage"),l=0,u=o.length;l<u;l++){var c=o[l];if((!B(K,c)||e[c])&&"function"!=typeof e[c])return void n(i)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=a.reject(t);return s(n,arguments[arguments.length-1]),n}},n=0,r=K.length;n<r;n++){var i=K[n];e[i]||(e[i]=t(i))}}();var p=function(n){W[r]&&console.info("Redefining LocalForage driver: "+r),W[r]=e,H[r]=n,t()};"_support"in e?e._support&&"function"==typeof e._support?e._support().then(p,n):p(!!e._support):p(!0)}catch(e){n(e)}}));return l(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=W[e]?a.resolve(W[e]):a.reject(new Error("Driver not found."));return l(r,t,n),r},e.prototype.getSerializer=function(e){var t=a.resolve(D);return l(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return l(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;U(e)||(e=[e]);var i=this._getSupportedDrivers(e);function o(){r._config.driver=r.driver()}function s(e){return r._extend(e),o(),r._ready=r._initStorage(r._config),r._ready}var u=null!==this._driverSet?this._driverSet.catch((function(){return a.resolve()})):a.resolve();return this._driverSet=u.then((function(){var e=i[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,o(),r._wrapLibraryMethodsWithReady(),r._initDriver=function(e){return function(){var t=0;return function n(){for(;t<e.length;){var i=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(i).then(s).catch(n)}o();var l=new Error("No available storage method found.");return r._driverSet=a.reject(l),r._driverSet}()}}(i)}))})).catch((function(){o();var e=new Error("No available storage method found.");return r._driverSet=a.reject(e),r._driverSet})),l(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!H[e]},e.prototype._extend=function(e){Z(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=J.length;e<t;e++)Y(this,J[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=ee},{3:3}]},{},[4])(4)}).call(this,n(25))},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,n(t,r)}e.exports=n,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=function(e){"use strict";var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof p?t:p,o=Object.create(i.prototype),a=new C(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return k()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=x(a,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,a),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var c={};function p(){}function d(){}function h(){}var f={};s(f,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==t&&n.call(g,i)&&(f=g);var y=h.prototype=p.prototype=Object.create(f);function v(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){var r;this._invoke=function(i,o){function a(){return new t((function(r,a){!function r(i,o,a,s){var l=u(e[i],e,o);if("throw"!==l.type){var c=l.arg,p=c.value;return p&&"object"==typeof p&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(p).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,s)}))}s(l.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function x(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function S(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return d.prototype=h,s(y,"constructor",h),s(h,"constructor",d),d.displayName=s(h,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,a,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},v(b.prototype),s(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new b(l(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},v(y),s(y,a,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=S,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;_(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}(e.exports);try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(86);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(37)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){(t=n(36)(!1)).push([e.i,'.gy-modalContainer {\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  opacity: 1;\n  transition: all 0.3s cubic-bezier(0.075, 0.82, 0.165, 1);\n  z-index: -1;\n}\n.gy-modalContainer .mask {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 2;\n  background-color: rgba(0, 0, 0, 0.3);\n}\n.gy-modalContainer .innerContent {\n  position: absolute;\n  left: 50%;\n  top: 80%;\n  width: 600px;\n  height: 200px;\n  background-color: #1ab394;\n  height: auto;\n  z-index: 3;\n  background-color: #ffffff;\n  transition: all 0.3s cubic-bezier(0.075, 0.82, 0.165, 1);\n  transform-origin: 75.5px 221.5px 0px;\n  transform: translate(-50%, -50%);\n  border-radius: 50px;\n}\n\n.gy-modalContainer .innerContent .innerContent-header {\n  padding: inherit;\n  border-radius: 4px 4px 0 0;\n  background: #fff;\n  color: rgba(0, 0, 0, 0.65);\n  border-bottom: 1px solid #e9e9e9;\n}\n.gy-modalContainer .innerContent .innerContent-title {\n  margin: 0;\n  font-size: 14px;\n  line-height: 21px;\n  font-weight: 500;\n  color: rgba(0, 0, 0, 0.85);\n}\n.gy-modalContainer .innerContent .innerContent-center {\n  padding: 16px;\n  font-size: 12px;\n  line-height: 1.5;\n  color: "white";\n}\n.gy-modalContainer .innerContent .innerContent-footer {\n  border-top: 1px solid #e9e9e9;\n  padding: 10px 16px 10px 10px;\n  border-radius: 0 0 4px 4px;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n}\n',""]),e.exports=t},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},function(e,t,n){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=u(e),a=r[0],s=r[1],l=new o(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),c=0,p=s>0?a-4:a;for(n=0;n<p;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,l[c++]=255&t);1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t);return l},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(c(e,a,a+16383>s?s:a+16383));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,p=n?i-1:0,d=n?-1:1,h=e[t+p];for(p+=d,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=256*o+e[t+p],p+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+p],p+=d,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=u}return(h?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,p=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,f=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+p>=1?d/l:d*Math.pow(2,1-p))*l>=2&&(a++,l/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(t*l-1)*Math.pow(2,i),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=f,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+h]=255&a,h+=f,a/=256,u-=8);e[n+h-f]|=128*m}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(92),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(25))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,o,a,s,l=1,u={},c=!1,p=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){f(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){f(e.data)},r=function(e){o.port2.postMessage(e)}):p&&"onreadystatechange"in p.createElement("script")?(i=p.documentElement,r=function(e){var t=p.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(f,0,e)}:(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&f(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(a+t,"*")}),d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return u[l]=i,r(l),l++},d.clearImmediate=h}function h(e){delete u[e]}function f(e){if(c)setTimeout(f,0,e);else{var t=u[e];if(t){c=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{h(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(25),n(49))},function(e,t,n){var r;!function(){function n(e){return(e=e.toString(16)).length<2&&(e="0"+e),e}function i(){var e=function(){try{return Array.from((window.crypto||window.msCrypto).getRandomValues(new Uint8Array(16)))}catch(t){for(var e=[];e.length<16;)e.push(256*Math.random()&255);return e}}();return e[6]=15&e[6]|64,e[8]=63&e[8]|128,(e=e.map(n).join("").match(/(.{8})(.{4})(.{4})(.{4})(.{12})/)).shift(),e.join("-")}var o=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/;i.valid=function(e){return o.test(e)},window&&(window.uuid4=i),e.exports&&(e.exports=i),void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r)}()},function(e,t,n){var r={"./endWithEyes.json":95,"./endWithMouth.json":96,"./masks.json":97,"./opposite.json":98};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=94},function(e){e.exports=JSON.parse('{"name":"endWithEyes","setting":[{"duration":180},{"host":{"occlusion_mask":false,"feature_show":{"eyes":{"toggle":false,"sliderIndex":0},"mouth":{"toggle":false,"sliderIndex":0},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true},"guest":{"occlusion_mask":false,"feature_show":{"eyes":{"toggle":false,"sliderIndex":0},"mouth":{"toggle":false,"sliderIndex":0},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true}},{"host":{"occlusion_mask":true,"feature_show":{"eyes":{"toggle":true,"sliderIndex":5},"mouth":{"toggle":true,"sliderIndex":4},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true},"guest":{"occlusion_mask":true,"feature_show":{"eyes":{"toggle":true,"sliderIndex":5},"mouth":{"toggle":true,"sliderIndex":4},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true}},{"host":{"occlusion_mask":true,"feature_show":{"eyes":{"toggle":true,"sliderIndex":5},"mouth":{"toggle":false,"sliderIndex":0},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true},"guest":{"occlusion_mask":true,"feature_show":{"eyes":{"toggle":true,"sliderIndex":5},"mouth":{"toggle":false,"sliderIndex":0},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true}}]}')},function(e){e.exports=JSON.parse('{"name":"endWithMouth","setting":[{"duration":180},{"host":{"occlusion_mask":false,"feature_show":{"eyes":{"toggle":false,"sliderIndex":0},"mouth":{"toggle":false,"sliderIndex":0},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true},"guest":{"occlusion_mask":false,"feature_show":{"eyes":{"toggle":false,"sliderIndex":0},"mouth":{"toggle":false,"sliderIndex":0},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true}},{"host":{"occlusion_mask":true,"feature_show":{"eyes":{"toggle":true,"sliderIndex":5},"mouth":{"toggle":true,"sliderIndex":4},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true},"guest":{"occlusion_mask":true,"feature_show":{"eyes":{"toggle":true,"sliderIndex":5},"mouth":{"toggle":true,"sliderIndex":4},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true}},{"host":{"occlusion_mask":true,"feature_show":{"eyes":{"toggle":false,"sliderIndex":0},"mouth":{"toggle":true,"sliderIndex":4},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true},"guest":{"occlusion_mask":true,"feature_show":{"eyes":{"toggle":false,"sliderIndex":0},"mouth":{"toggle":true,"sliderIndex":4},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true}}]}')},function(e){e.exports=JSON.parse('{"endWithEyes":{"name":"endWithEyes","setting":[{"duration":180},{"host":{"occlusion_mask":false,"feature_show":{"eyes":{"toggle":false,"sliderIndex":0},"mouth":{"toggle":false,"sliderIndex":0},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true},"guest":{"occlusion_mask":false,"feature_show":{"eyes":{"toggle":false,"sliderIndex":0},"mouth":{"toggle":false,"sliderIndex":0},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true}},{"host":{"occlusion_mask":true,"feature_show":{"eyes":{"toggle":true,"sliderIndex":5},"mouth":{"toggle":true,"sliderIndex":4},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true},"guest":{"occlusion_mask":true,"feature_show":{"eyes":{"toggle":true,"sliderIndex":5},"mouth":{"toggle":true,"sliderIndex":4},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true}},{"host":{"occlusion_mask":true,"feature_show":{"eyes":{"toggle":true,"sliderIndex":5},"mouth":{"toggle":false,"sliderIndex":0},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true},"guest":{"occlusion_mask":true,"feature_show":{"eyes":{"toggle":true,"sliderIndex":5},"mouth":{"toggle":false,"sliderIndex":0},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true}}]},"endWithMouth":{"name":"endWithMouth","setting":[{"duration":180},{"host":{"occlusion_mask":false,"feature_show":{"eyes":{"toggle":false,"sliderIndex":0},"mouth":{"toggle":false,"sliderIndex":0},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true},"guest":{"occlusion_mask":false,"feature_show":{"eyes":{"toggle":false,"sliderIndex":0},"mouth":{"toggle":false,"sliderIndex":0},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true}},{"host":{"occlusion_mask":true,"feature_show":{"eyes":{"toggle":true,"sliderIndex":5},"mouth":{"toggle":true,"sliderIndex":4},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true},"guest":{"occlusion_mask":true,"feature_show":{"eyes":{"toggle":true,"sliderIndex":5},"mouth":{"toggle":true,"sliderIndex":4},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true}},{"host":{"occlusion_mask":true,"feature_show":{"eyes":{"toggle":false,"sliderIndex":0},"mouth":{"toggle":true,"sliderIndex":4},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true},"guest":{"occlusion_mask":true,"feature_show":{"eyes":{"toggle":false,"sliderIndex":0},"mouth":{"toggle":true,"sliderIndex":4},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true}}]},"opposite":{"name":"opposite","setting":[{"duration":180},{"host":{"occlusion_mask":false,"feature_show":{"eyes":{"toggle":false,"sliderIndex":0},"mouth":{"toggle":false,"sliderIndex":0},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true},"guest":{"occlusion_mask":false,"feature_show":{"eyes":{"toggle":false,"sliderIndex":0},"mouth":{"toggle":false,"sliderIndex":0},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true}},{"host":{"occlusion_mask":true,"feature_show":{"eyes":{"toggle":true,"sliderIndex":5},"mouth":{"toggle":false,"sliderIndex":0},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true},"guest":{"occlusion_mask":true,"feature_show":{"eyes":{"toggle":false,"sliderIndex":0},"mouth":{"toggle":true,"sliderIndex":4},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true}},{"host":{"occlusion_mask":true,"feature_show":{"eyes":{"toggle":false,"sliderIndex":0},"mouth":{"toggle":true,"sliderIndex":4},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true},"guest":{"occlusion_mask":true,"feature_show":{"eyes":{"toggle":true,"sliderIndex":5},"mouth":{"toggle":false,"sliderIndex":0},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true}}]}}')},function(e){e.exports=JSON.parse('{"name":"opposite","setting":[{"duration":180},{"host":{"occlusion_mask":false,"feature_show":{"eyes":{"toggle":false,"sliderIndex":0},"mouth":{"toggle":false,"sliderIndex":0},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true},"guest":{"occlusion_mask":false,"feature_show":{"eyes":{"toggle":false,"sliderIndex":0},"mouth":{"toggle":false,"sliderIndex":0},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true}},{"host":{"occlusion_mask":true,"feature_show":{"eyes":{"toggle":true,"sliderIndex":5},"mouth":{"toggle":false,"sliderIndex":0},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true},"guest":{"occlusion_mask":true,"feature_show":{"eyes":{"toggle":false,"sliderIndex":0},"mouth":{"toggle":true,"sliderIndex":4},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true}},{"host":{"occlusion_mask":true,"feature_show":{"eyes":{"toggle":false,"sliderIndex":0},"mouth":{"toggle":true,"sliderIndex":4},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true},"guest":{"occlusion_mask":true,"feature_show":{"eyes":{"toggle":true,"sliderIndex":5},"mouth":{"toggle":false,"sliderIndex":0},"nose":{"toggle":false,"sliderIndex":0},"bar":{"toggle":false,"direction":false,"sliderIndex":0,"position":0}},"video":true,"audio":true}}]}')},function(e,t,n){var r=n(100);e.exports=function(e,t){if(null==e)return{};var n,i,o=r(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,n){var r=n(103);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(37)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){(t=n(36)(!1)).push([e.i,'/*!\n * surveyjs - Survey JavaScript library v1.8.58\n * Copyright (c) 2015-2021 Devsoft Baltic O  - http://surveyjs.io/\n * License: MIT (http://www.opensource.org/licenses/mit-license.php)\n */\n.sv_window {\n  position: fixed;\n  bottom: 3px;\n  right: 10px;\n  background-color: cadetblue;\n  padding: 1px;\n  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n  font-size: 14px;\n  font-style: normal;\n  font-weight: 400;\n  line-height: 1.42857143;\n  text-align: left;\n  text-align: start;\n  text-decoration: none;\n  text-shadow: none;\n  text-transform: none;\n  letter-spacing: normal;\n  word-break: normal;\n  word-spacing: normal;\n  word-wrap: normal;\n  white-space: normal;\n  background-color: #fff;\n  -webkit-background-clip: padding-box;\n  background-clip: padding-box;\n  border: 1px solid #ccc;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n  border-radius: 6px;\n  -webkit-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);\n  box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);\n  line-break: auto;\n  z-index: 100; }\n\n.sv_window_title {\n  padding: 8px 14px;\n  margin: 0;\n  font-size: 14px;\n  background-color: #f7f7f7;\n  border-bottom: 1px solid #ebebeb;\n  border-radius: 5px 5px 0 0; }\n\n.sv_window_content {\n  padding: 8px;\n  margin: 0; }\n\n.sv_window_title a,\n.sv_window_title a:link,\n.sv_window_title a:visited {\n  text-decoration: none;\n  font-size: 14px;\n  font-style: normal;\n  color: black; }\n\n.sv_main.sv_frame .sv_container {\n  max-width: 80%;\n  margin: auto;\n  padding: 0 1em; }\n  .sv_main.sv_frame .sv_container .sv_header {\n    padding-top: 5em;\n    padding-bottom: 1em; }\n\n.sv_main {\n  background-color: #f4f4f4; }\n  .sv_main hr {\n    border-bottom: 1px solid #e7e7e7; }\n  .sv_main input[type="button"],\n  .sv_main button {\n    color: white;\n    background-color: #1ab394; }\n    .sv_main input[type="button"]:hover,\n    .sv_main button:hover {\n      background-color: #179d82; }\n  .sv_main .sv_q_other input,\n  .sv_main .sv_q_text_root,\n  .sv_main .sv_q_dropdown_control,\n  .sv_main input:not([type="button"]):not([type="reset"]):not([type="submit"]):not([type="image"]):not([type="checkbox"]):not([type="radio"]),\n  .sv_main select,\n  .sv_main textarea {\n    appearance: none;\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    border: 1px solid #e7e7e7;\n    color: #6d7072;\n    background-color: white;\n    opacity: 1; }\n    .sv_main .sv_q_other input:focus,\n    .sv_main .sv_q_text_root:focus,\n    .sv_main .sv_q_dropdown_control:focus,\n    .sv_main input:not([type="button"]):not([type="reset"]):not([type="submit"]):not([type="image"]):not([type="checkbox"]):not([type="radio"]):focus,\n    .sv_main select:focus,\n    .sv_main textarea:focus {\n      border: 1px solid #1ab394; }\n  .sv_main .sv_select_wrapper {\n    background-color: white; }\n    .sv_main .sv_select_wrapper:before {\n      background-color: #1ab394; }\n  .sv_main .sv_header {\n    color: #6d7072; }\n  .sv_main .sv_custom_header {\n    background-color: #e7e7e7; }\n  .sv_main .sv_container {\n    color: #6d7072; }\n  .sv_main .sv_body {\n    background-color: white;\n    border-top: 2px solid #1ab394; }\n  .sv_main .sv_progress {\n    background-color: #e7e7e7;\n    margin-bottom: 2em; }\n  .sv_main .sv_progress_bar {\n    background-color: #1ab394; }\n  .sv_main .sv_p_root > .sv_row {\n    border-bottom: 1px solid #e7e7e7; }\n    .sv_main .sv_p_root > .sv_row:nth-child(odd) {\n      background-color: white; }\n    .sv_main .sv_p_root > .sv_row:nth-child(even) {\n      background-color: #f4f4f4; }\n  .sv_main .sv_q_erbox:not([style*="display: none"]):not([style*="display:none"]) {\n    border: 1px solid #ed5565;\n    background-color: #fcdfe2;\n    color: #ed5565; }\n    .sv_main .sv_q_erbox:not([style*="display: none"]):not([style*="display:none"]) + input,\n    .sv_main .sv_q_erbox:not([style*="display: none"]):not([style*="display:none"]) + textarea,\n    .sv_main .sv_q_erbox:not([style*="display: none"]):not([style*="display:none"]) + .sv_select_wrapper select {\n      border: 1px solid #ed5565; }\n      .sv_main .sv_q_erbox:not([style*="display: none"]):not([style*="display:none"]) + input:focus,\n      .sv_main .sv_q_erbox:not([style*="display: none"]):not([style*="display:none"]) + textarea:focus,\n      .sv_main .sv_q_erbox:not([style*="display: none"]):not([style*="display:none"]) + .sv_select_wrapper select:focus {\n        outline: #ed5565 auto 5px; }\n  .sv_main table.sv_q_matrix tr,\n  .sv_main table.sv_q_matrix_dropdown tr,\n  .sv_main table.sv_q_matrix_dynamic tr {\n    border-bottom: 1px solid #e7e7e7; }\n  .sv_main .sv_matrix_cell {\n    vertical-align: top; }\n  .sv_main .sv_matrix_cell_detail {\n    vertical-align: middle;\n    text-align: center;\n    width: 32px; }\n  .sv_main .sv-table__cell--choice {\n    text-align: center; }\n  .sv_main .sv_matrix_cell_detail_button {\n    width: 29px;\n    height: 29px;\n    min-width: 0px;\n    padding: 0;\n    outline: none; }\n  .sv_main .sv_matrix_cell_detail_button_expanded {\n    background-color: lightgray; }\n    .sv_main .sv_matrix_cell_detail_button_expanded:hover {\n      background-color: darkgray; }\n  .sv_main .sv_matrix_cell_detail_rowtext {\n    vertical-align: middle; }\n  .sv_main .sv_q_m_cell_selected {\n    color: white;\n    background-color: #179d82; }\n  .sv_main .sv_q_rating_item.active .sv_q_rating_item_text {\n    background-color: #179d82;\n    border-color: #179d82;\n    color: white; }\n  .sv_main .sv_q_rating_item .sv_q_rating_item_text {\n    border: 1px solid #e7e7e7; }\n    .sv_main .sv_q_rating_item .sv_q_rating_item_text:hover {\n      border: 1px solid #179d82; }\n  .sv_main .sv_q_imgsel.checked label > div {\n    background-color: #1ab394; }\n  .sv_main .sv_q_file_remove:hover {\n    color: #1ab394; }\n  .sv_main .sv-boolean__switch {\n    background-color: #1ab394; }\n  .sv_main .sv-boolean__slider {\n    background-color: white; }\n  .sv_main .sv-boolean__label--disabled {\n    color: rgba(64, 64, 64, 0.5); }\n\n.sv_main {\n  position: relative;\n  width: 100%;\n  font-family: "Segoe UI", "Helvetica Neue", Helvetica, Arial, sans-serif, "Helvetica Neue", Arial, sans-serif;\n  font-size: 14px; }\n  .sv_main hr {\n    border: none; }\n  .sv_main input[type="button"],\n  .sv_main button {\n    appearance: none;\n    -webkit-appearance: none;\n    -moz-appearance: none;\n    font-size: 0.85em;\n    font-weight: bold;\n    line-height: 2em;\n    border: none;\n    min-width: 100px;\n    cursor: pointer;\n    padding: 0 2em;\n    border-radius: 2px; }\n  .sv_main .sv_custom_header {\n    position: absolute;\n    width: 100%;\n    height: 74%;\n    max-height: 275px; }\n  .sv_main .sv_container {\n    position: relative; }\n    .sv_main .sv_container .sv_header {\n      padding: 1em; }\n      .sv_main .sv_container .sv_header h3 {\n        font-size: 2em;\n        font-weight: 300;\n        margin: 0; }\n    .sv_main .sv_container .sv_body {\n      padding: 1em 1em 1.6428em 1em; }\n      .sv_main .sv_container .sv_body.sv_completed_page {\n        text-align: center;\n        padding: 5em 1em; }\n        .sv_main .sv_container .sv_body.sv_completed_page > h3 {\n          margin: 0;\n          font-size: 30px;\n          font-weight: 300; }\n      .sv_main .sv_container .sv_body .sv_progress {\n        height: 0.3em; }\n        .sv_main .sv_container .sv_body .sv_progress .sv_progress_bar {\n          height: 100%;\n          min-width: 100px;\n          position: relative;\n          margin-top: 2em; }\n          .sv_main .sv_container .sv_body .sv_progress .sv_progress_bar > span {\n            position: absolute;\n            top: -1.5em;\n            display: inline-block;\n            white-space: nowrap; }\n      .sv_main .sv_container .sv_body .sv_p_root .sv_page_title {\n        font-size: 1em;\n        margin-top: 0.1em;\n        font-weight: normal; }\n      .sv_main .sv_container .sv_body .sv_p_root .sv_p_title {\n        font-weight: bold;\n        font-size: 1.15em;\n        margin: 1.5em 0 0 0; }\n      .sv_main .sv_container .sv_body .sv_p_root .sv_p_panel {\n        margin: 0 0 1.5em 0; }\n      .sv_main .sv_container .sv_body .sv_p_root > .sv_row {\n        padding: 0; }\n      .sv_main .sv_container .sv_body .sv_p_root .sv_q_title {\n        font-weight: bold;\n        font-size: 1em;\n        margin: 0.5em 0; }\n      .sv_main .sv_container .sv_body .sv_p_root .sv_q--disabled .sv_q_title {\n        color: rgba(64, 64, 64, 0.5); }\n      .sv_main .sv_container .sv_body .sv_p_root .sv_q_description {\n        margin-top: -0.6em;\n        min-height: 0.6em; }\n      .sv_main .sv_container .sv_body .sv_p_root .sv_q_flow .sv_q_checkbox_inline,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_q_flow .sv_q_radiogroup_inline,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_q_flow .sv_q_imagepicker_inline {\n        line-height: 2em;\n        display: inline-block; }\n      .sv_main .sv_container .sv_body .sv_p_root .sv_q {\n        padding: 0.5em 1em 1.5em 1em;\n        box-sizing: border-box;\n        overflow: auto; }\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q .sv_panel_dynamic .sv_q_title {\n          font-weight: normal; }\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q .sv_panel_dynamic .sv-paneldynamic__progress-container {\n          position: relative;\n          display: inline-block;\n          width: calc(100% - 250px);\n          margin-left: 40px;\n          margin-top: 10px; }\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q .sv_q_erbox:not([style*="display: none"]):not([style*="display:none"]) {\n          margin: 1em 0;\n          padding: 1em; }\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q .sv_q_other input,\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q .sv_q_text_root,\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q .sv_q_dropdown_control,\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q input:not([type="button"]):not([type="reset"]):not([type="submit"]):not([type="image"]):not([type="checkbox"]):not([type="radio"]),\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q select,\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q textarea {\n          position: relative;\n          width: 100%;\n          box-sizing: border-box;\n          font-size: 1em;\n          line-height: 2em;\n          padding-left: 1em; }\n          .sv_main .sv_container .sv_body .sv_p_root .sv_q .sv_q_other input:focus,\n          .sv_main .sv_container .sv_body .sv_p_root .sv_q .sv_q_text_root:focus,\n          .sv_main .sv_container .sv_body .sv_p_root .sv_q .sv_q_dropdown_control:focus,\n          .sv_main .sv_container .sv_body .sv_p_root .sv_q input:not([type="button"]):not([type="reset"]):not([type="submit"]):not([type="image"]):not([type="checkbox"]):not([type="radio"]):focus,\n          .sv_main .sv_container .sv_body .sv_p_root .sv_q select:focus,\n          .sv_main .sv_container .sv_body .sv_p_root .sv_q textarea:focus {\n            outline: none; }\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q .sv_q_other input,\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q .sv_q_dropdown_control,\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q input:not([type="button"]):not([type="reset"]):not([type="submit"]):not([type="image"]):not([type="checkbox"]):not([type="radio"]),\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q select {\n          height: calc(2em + 1px); }\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q div.sv_q_text_root,\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q div.sv_q_dropdown_control {\n          min-height: 2.43em;\n          min-width: 7em; }\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q .sv_select_wrapper {\n          width: 100%;\n          position: relative;\n          display: inline-block; }\n          .sv_main .sv_container .sv_body .sv_p_root .sv_q .sv_select_wrapper select {\n            display: block;\n            background: transparent;\n            appearance: none;\n            -webkit-appearance: none;\n            -moz-appearance: none;\n            padding-right: 2.5em; }\n            .sv_main .sv_container .sv_body .sv_p_root .sv_q .sv_select_wrapper select::-ms-expand {\n              display: none; }\n          .sv_main .sv_container .sv_body .sv_p_root .sv_q .sv_select_wrapper:before {\n            padding: 1em;\n            position: absolute;\n            right: 1px;\n            right: 0;\n            top: 1px;\n            background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIxLjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAzNCAzNCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzQgMzQ7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDojRkZGRkZGO30KPC9zdHlsZT4KPHBvbHlnb24gY2xhc3M9InN0MCIgcG9pbnRzPSIxMiwxNiAxNCwxNCAxNywxNyAyMCwxNCAyMiwxNiAxNywyMSAiLz4KPC9zdmc+Cg==);\n            content: "";\n            background-repeat: no-repeat;\n            background-position: center;\n            z-index: 1;\n            pointer-events: none; }\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q input[type="color"] {\n          min-height: 2em;\n          padding: 0; }\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q input[type="radio"],\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q input[type="checkbox"] {\n          margin: 0;\n          margin-right: 0.55em;\n          width: 1.2em;\n          height: 1.2em;\n          vertical-align: middle;\n          font-size: 1em;\n          margin-top: -0.1em; }\n          .sv_main .sv_container .sv_body .sv_p_root .sv_q input[type="radio"]:focus,\n          .sv_main .sv_container .sv_body .sv_p_root .sv_q input[type="checkbox"]:focus {\n            outline: 1px dotted #1ab394; }\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q .sv_q_radiogroup.sv_q_radiogroup_inline:not(:last-child),\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q .sv_q_checkbox.sv_q_checkbox_inline:not(:last-child),\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q .sv_q_imgsel.sv_q_imagepicker_inline:not(:last-child) {\n          margin-right: 1.5em; }\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q .sv_q_imgsel label > div {\n          overflow: hidden;\n          white-space: nowrap;\n          text-overflow: ellipsis;\n          padding: 4px;\n          border: 1px solid lightgray;\n          border-radius: 4px; }\n          .sv_main .sv_container .sv_body .sv_p_root .sv_q .sv_q_imgsel label > div > img {\n            display: block;\n            pointer-events: none;\n            position: relative; }\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q .sv_q_radiogroup_clear {\n          margin-top: 0.5em; }\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q .sv_q_checkbox_inline,\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q .sv_q_radiogroup_inline,\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q .sv_q_imagepicker_inline {\n          line-height: 2em;\n          display: inline-block; }\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q .sv_q_footer {\n          padding: 1em 0; }\n      .sv_main .sv_container .sv_body .sv_p_root table {\n        width: 100%;\n        border-collapse: collapse; }\n        .sv_main .sv_container .sv_body .sv_p_root table.sv_q_matrix .sv_matrix_dynamic_button, .sv_main .sv_container .sv_body .sv_p_root table.sv_q_matrix_dropdown .sv_matrix_dynamic_button, .sv_main .sv_container .sv_body .sv_p_root table.sv_q_matrix_dynamic .sv_matrix_dynamic_button {\n          padding: 0.3em 2em; }\n        .sv_main .sv_container .sv_body .sv_p_root table.sv_q_matrix td,\n        .sv_main .sv_container .sv_body .sv_p_root table.sv_q_matrix th {\n          padding: 0 1em;\n          text-align: center; }\n        @media (min-width: 768px) {\n          .sv_main .sv_container .sv_body .sv_p_root table.sv_q_matrix td {\n            min-width: 10em; } }\n        .sv_main .sv_container .sv_body .sv_p_root table.sv_q_matrix td .sv_q_m_label {\n          position: static;\n          display: block;\n          width: 100%; }\n        .sv_main .sv_container .sv_body .sv_p_root table.sv_q_matrix td:first-child {\n          text-align: left; }\n        .sv_main .sv_container .sv_body .sv_p_root table.sv_q_matrix_dropdown .sv_qcbc .sv_q_checkbox_control_label {\n          margin-right: 1.5em; }\n        .sv_main .sv_container .sv_body .sv_p_root table td,\n        .sv_main .sv_container .sv_body .sv_p_root table th {\n          padding: 0 1em; }\n        .sv_main .sv_container .sv_body .sv_p_root table td {\n          padding: 0.5em; }\n        .sv_main .sv_container .sv_body .sv_p_root table th {\n          line-height: 1.3em;\n          padding: 0.5em;\n          vertical-align: bottom;\n          font-weight: bold; }\n      .sv_main .sv_container .sv_body .sv_p_root fieldset.sv_qcbc {\n        line-height: 2em;\n        padding-top: 0.1em; }\n      .sv_main .sv_container .sv_body .sv_p_root .sv_q_checkbox_label,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_q_radiogroup_label {\n        display: block; }\n      .sv_main .sv_container .sv_body .sv_p_root .sv_q_other {\n        margin-left: 1em; }\n      .sv_main .sv_container .sv_body .sv_p_root .sv_q_select_column {\n        display: inline-block;\n        vertical-align: top;\n        min-width: 10%; }\n      .sv_main .sv_container .sv_body .sv_p_root .sv_q_rating {\n        line-height: 2em; }\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q_rating .sv_q_rating_item {\n          cursor: pointer;\n          word-spacing: -0.3em;\n          font-weight: normal;\n          display: inline; }\n          .sv_main .sv_container .sv_body .sv_p_root .sv_q_rating .sv_q_rating_item > * {\n            word-spacing: initial; }\n            @media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n              .sv_main .sv_container .sv_body .sv_p_root .sv_q_rating .sv_q_rating_item > * {\n                word-spacing: normal; } }\n          .sv_main .sv_container .sv_body .sv_p_root .sv_q_rating .sv_q_rating_item .sv_q_rating_item_text {\n            display: inline-block;\n            min-width: 2em;\n            padding: 0 0.3em;\n            margin-left: -1px;\n            text-align: center; }\n          .sv_main .sv_container .sv_body .sv_p_root .sv_q_rating .sv_q_rating_item:not(:first-child) .sv_q_rating_item_text:not(:hover) {\n            border-left-color: transparent; }\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q_rating .sv_q_rating_min_text {\n          margin-right: 0.5em; }\n        .sv_main .sv_container .sv_body .sv_p_root .sv_q_rating .sv_q_rating_max_text {\n          margin-left: 0.5em; }\n      .sv_main .sv_container .sv_body .sv_nav {\n        padding: 1em 0;\n        min-height: 2em; }\n        .sv_main .sv_container .sv_body .sv_nav .sv_start_btn,\n        .sv_main .sv_container .sv_body .sv_nav .sv_next_btn,\n        .sv_main .sv_container .sv_body .sv_nav .sv_complete_btn {\n          float: right; }\n        .sv_main .sv_container .sv_body .sv_nav .sv_preview_btn {\n          float: right; }\n        .sv_main .sv_container .sv_body .sv_nav .sv_prev_btn {\n          float: left; }\n        .sv_main .sv_container .sv_body .sv_nav .sv_edit_btn {\n          float: left; }\n  .sv_main .sv_q_image {\n    display: inline-block; }\n\n.sv_main .sv_p_root .sv_row .sv_q.sv_qstn:first-child:last-child {\n  flex: none !important; }\n\n[dir="rtl"] .sv_main input, [style*="direction:rtl"] .sv_main input {\n  text-align: right; }\n\n[dir="rtl"] .sv_main th, [style*="direction:rtl"] .sv_main th {\n  text-align: right; }\n\n[dir="rtl"] .sv_main .sv_container .sv_body .sv_nav .sv_start_btn,\n[dir="rtl"] .sv_main .sv_container .sv_body .sv_nav .sv_next_btn,\n[dir="rtl"] .sv_main .sv_container .sv_body .sv_nav .sv_complete_btn, [style*="direction:rtl"] .sv_main .sv_container .sv_body .sv_nav .sv_start_btn,\n[style*="direction:rtl"] .sv_main .sv_container .sv_body .sv_nav .sv_next_btn,\n[style*="direction:rtl"] .sv_main .sv_container .sv_body .sv_nav .sv_complete_btn {\n  float: left; }\n\n[dir="rtl"] .sv_main .sv_container .sv_body .sv_nav .sv_prev_btn, [style*="direction:rtl"] .sv_main .sv_container .sv_body .sv_nav .sv_prev_btn {\n  float: right; }\n\n@media (max-width: 600px) {\n  .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_q,\n  .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_qstn {\n    display: block;\n    width: 100% !important; }\n    .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_q .title-left,\n    .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_qstn .title-left {\n      float: none; }\n    .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_q .sv_q_radiogroup_inline,\n    .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_q .sv_q_checkbox_inline,\n    .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_q .sv_q_imagepicker_inline,\n    .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_qstn .sv_q_radiogroup_inline,\n    .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_qstn .sv_q_checkbox_inline,\n    .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_qstn .sv_q_imagepicker_inline {\n      display: block; }\n    .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_q table.sv_q_matrix,\n    .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_q table.sv_q_matrix_dropdown,\n    .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_q table.sv_q_matrix_dynamic,\n    .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_qstn table.sv_q_matrix,\n    .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_qstn table.sv_q_matrix_dropdown,\n    .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_qstn table.sv_q_matrix_dynamic {\n      display: block; }\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_q table.sv_q_matrix thead,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_q table.sv_q_matrix_dropdown thead,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_q table.sv_q_matrix_dynamic thead,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_qstn table.sv_q_matrix thead,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_qstn table.sv_q_matrix_dropdown thead,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_qstn table.sv_q_matrix_dynamic thead {\n        display: none; }\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_q table.sv_q_matrix td.sv-table__cell--choice,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_q table.sv_q_matrix_dropdown td.sv-table__cell--choice,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_q table.sv_q_matrix_dynamic td.sv-table__cell--choice,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_qstn table.sv_q_matrix td.sv-table__cell--choice,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_qstn table.sv_q_matrix_dropdown td.sv-table__cell--choice,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_qstn table.sv_q_matrix_dynamic td.sv-table__cell--choice {\n        text-align: initial; }\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_q table.sv_q_matrix tbody,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_q table.sv_q_matrix tr,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_q table.sv_q_matrix td,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_q table.sv_q_matrix_dropdown tbody,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_q table.sv_q_matrix_dropdown tr,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_q table.sv_q_matrix_dropdown td,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_q table.sv_q_matrix_dynamic tbody,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_q table.sv_q_matrix_dynamic tr,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_q table.sv_q_matrix_dynamic td,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_qstn table.sv_q_matrix tbody,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_qstn table.sv_q_matrix tr,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_qstn table.sv_q_matrix td,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_qstn table.sv_q_matrix_dropdown tbody,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_qstn table.sv_q_matrix_dropdown tr,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_qstn table.sv_q_matrix_dropdown td,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_qstn table.sv_q_matrix_dynamic tbody,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_qstn table.sv_q_matrix_dynamic tr,\n      .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_qstn table.sv_q_matrix_dynamic td {\n        display: block; }\n    .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_q table.sv_q_matrix_dropdown td:before,\n    .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_q table.sv_q_matrix_dynamic td:before,\n    .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_qstn table.sv_q_matrix_dropdown td:before,\n    .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_qstn table.sv_q_matrix_dynamic td:before {\n      content: attr(title); }\n    .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_q table.sv_q_matrix td label.sv_q_m_label,\n    .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_qstn table.sv_q_matrix td label.sv_q_m_label {\n      display: inline; }\n    .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_q table.sv_q_matrix td:after,\n    .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_qstn table.sv_q_matrix td:after {\n      content: attr(title); }\n    .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_q table.sv_q_matrix .sv_q_m_cell,\n    .sv_main .sv_container .sv_body .sv_p_root .sv_row .sv_qstn table.sv_q_matrix .sv_q_m_cell {\n      text-align: initial; } }\n\n.sv_main .sv_qstn .sv_q_file .sv-visuallyhidden {\n  position: absolute !important;\n  opacity: 0; }\n\n.sv_main .sv_qstn .sv_q_file .sv_q_file_choose_button {\n  display: inline-block;\n  box-sizing: border-box;\n  min-width: 100px;\n  line-height: 2em;\n  padding: 0.25em 2em;\n  font-size: 0.85em;\n  font-weight: bold;\n  border: none;\n  border-radius: 2px;\n  cursor: pointer; }\n\n.sv_main .sv_qstn .sv_q_file .sv_q_file_remove_button {\n  padding: 0.25em 2em; }\n\n.sv_main .sv_qstn .sv_q_file .sv-file__decorator {\n  display: inline-block;\n  min-width: 250px; }\n  .sv_main .sv_qstn .sv_q_file .sv-file__decorator .sv_q_file_placeholder {\n    margin-left: 1em;\n    display: inline-block; }\n\n.sjs_sp_container {\n  position: relative; }\n\n.sjs_sp_controls {\n  position: absolute;\n  left: 0;\n  bottom: 0; }\n\n.sjs_sp_controls > button {\n  user-select: none; }\n\n.sjs_sp_container > div > canvas:focus {\n  outline: none; }\n\n.sjs_sp_placeholder {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  z-index: 0;\n  user-select: none;\n  pointer-events: none;\n  width: 100%;\n  height: 100%; }\n\n.sv-boolean__decorator {\n  border-radius: 2px; }\n\n.sv_main .sv-boolean__decorator + .sv-boolean__label {\n  float: none;\n  vertical-align: top;\n  margin-left: 0.5em; }\n\n.sv-boolean__svg {\n  border: none;\n  border-radius: 2px;\n  background-color: #1ab394;\n  fill: white;\n  width: 24px;\n  height: 24px; }\n\n.sv-boolean--allowhover:hover .sv-boolean__checked-path {\n  display: inline-block; }\n\n.sv-boolean--allowhover:hover .sv-boolean__svg {\n  background-color: #9f9f9f;\n  fill: white; }\n\n.sv-boolean--allowhover:hover .sv-boolean__unchecked-path,\n.sv-boolean--allowhover:hover .sv-boolean__indeterminate-path {\n  display: none; }\n\n.sv-boolean__checked-path,\n.sv-boolean__indeterminate-path {\n  display: none; }\n\n.sv-boolean--indeterminate .sv-boolean__svg {\n  background-color: inherit;\n  fill: #1ab394; }\n\n.sv-boolean--indeterminate .sv-boolean__indeterminate-path {\n  display: inline-block; }\n\n.sv-boolean--indeterminate .sv-boolean__unchecked-path,\n.sv-boolean--checked .sv-boolean__unchecked-path {\n  display: none; }\n\n.sv-boolean--checked .sv-boolean__checked-path {\n  display: inline-block; }\n\n.sv-boolean--disabled.sv-boolean--indeterminate .sv-boolean__svg {\n  background-color: inherit;\n  fill: #dbdbdb; }\n\n.sv-boolean--disabled .sv-boolean__svg {\n  background-color: #dbdbdb; }\n\ntd.sv_matrix_cell .sv_qbln,\ntd.td.sv_matrix_cell .sv_qbln {\n  text-align: center; }\n  td.sv_matrix_cell .sv_qbln .sv-boolean,\n  td.td.sv_matrix_cell .sv_qbln .sv-boolean {\n    text-align: initial; }',""]),e.exports=t},function(e,t,n){var r=n(105);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(37)(r,i);r.locals&&(e.exports=r.locals)},function(e,t,n){var r=n(36),i=n(106),o=n(107),a=n(108),s=n(109);(t=r(!1)).push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Montserrat:wght@400;500;700&family=Roboto:wght@300;400;500&display=swap);"]);var l=i(o),u=i(a),c=i(s);t.push([e.i,'body,input,button{font-size:1.6vw;margin:0;font-family:Sans-Serif;background-color:#000}@font-face{font-family:"Roboto",sans-serif;src:local("Roboto"),url('+l+') format("truetype")}@font-face{font-family:"Fira Code",monospace;src:local("Fira Code"),url('+u+') format("truetype")}@font-face{font-family:"Montserrat",sans-serif;src:local("Montserrat"),url('+c+') format("truetype")}@media(max-width: 1024px){body,input,button{font-size:1em}}input:focus,button:focus{outline:0}input[type=text]{border:none;border-bottom:solid 2px #4c4c4f;font-size:1em;background-color:rgba(0,0,0,0);color:#fff;padding:.4em 0;margin:2ex 0;width:100%;max-width:18em;display:block}input[type=checkbox]{-ms-transform:scale(2);-moz-transform:scale(2);-webkit-transform:scale(2);-o-transform:scale(2);transform:scale(2);padding:10px;margin-inline:10px}.sv_main{font-size:15px;background-color:#000}.sv_body{background-color:#000}.sv_main .sv_container .sv_body{padding:1em 1em 1.6428em 1em;background-color:#000}.sv_main .sv_container .sv_body .sv_p_root .sv_page_title{font-size:0;background-color:#000}.sv_main.sv_default_css .sv_p_root>.sv_row:nth-child(2n){background-color:#000;border:#000}.sv_main.sv_default_css .sv_p_root>.sv_row:nth-child(2n+1){background-color:#000;border:#000}.sv_complete_btn{height:60px;font-size:25px}.sv_p_root{background-color:#000}.sv_custom_header{background-color:#000}.sv_row{font-size:1.5em;background-color:#000;color:#fff;border-color:#000}.sv_nav{padding:1em 0;min-height:2em;background-color:#000}.sv_main input[type=button],.sv_main button{width:100%;margin:0 auto;background-color:#fff;color:#000;font-size:20px}.checkboxtext{margin-left:10px;font-size:20px;display:inline}.home{display:flex;justify-content:center;align-items:center}.call-exit-button,.hangup-button,.audio-button-true,.audio-button-false,.video-button-true,.video-button-false,.fullscreen-button{width:3em;height:3em;border-radius:50%;background:rgba(44,44,44,.6);display:flex;align-items:center;justify-content:center;border:0;box-shadow:.2ex .2ex 1.5em #444;transition:all .2s ease-out;margin:0 .4em;cursor:pointer}.call-exit-button:hover,.hangup-button:hover,.audio-button-true:hover,.audio-button-false:hover,.video-button-true:hover,.video-button-false:hover,.fullscreen-button:hover{box-shadow:.4ex .4ex 3em #666;background:#407cf7}.you-left,.remote-left,.hangup-button,.audio-button-true .on,.video-button-true .on,.video-button-false .off,.fullscreen-button .on,.room-occupied{display:none}:-webkit-full-screen .fullscreen-button .on{display:block}:-moz-full-screen .fullscreen-button .on{display:block}:-ms-fullscreen .fullscreen-button .on{display:block}:fullscreen .fullscreen-button .on{display:block}:-webkit-full-screen .fullscreen-button .off{display:none}:-moz-full-screen .fullscreen-button .off{display:none}:-ms-fullscreen .fullscreen-button .off{display:none}:fullscreen .fullscreen-button .off{display:none}:-webkit-full-screen video{width:100%;height:100%}.guest-hangup+.auth .you-left{display:inline}.full .room-occupied,.host-hangup+.auth .remote-left,.recent-room{display:block}.recent-room{color:#4285f4;margin:1ex 1em}.remote-video{display:block;max-height:100%;max-width:100%;object-fit:cover}.local-video{max-height:100%;max-width:100%;right:0;top:0;object-fit:cover;transition:all .3s}.established .local-video{margin:.5rem;max-height:12rem;max-width:12rem;height:auto;width:auto;z-index:20;border-radius:6px;box-shadow:0px 0px 12px 5px rgba(33,32,32,.631372549)}.canvas{position:absolute;height:100%;width:100%;z-index:10}.consent_form{z-index:20;text-align:left;background-color:#000;margin:auto;font-size:20px}.survey_topic{overflow:scroll;position:absolute;height:100%;width:100%;z-index:20;text-align:center;background-color:#000;margin:auto}.survey_topic_container{width:50%;margin:0 auto}.survey_diable_checkbox{text-align:left;margin:10px;color:gray}.survey_checkbox{text-align:left;margin-top:20px;margin-bottom:20px}.survey_ready_button{background-color:#fff;color:#000;width:100%;height:50px;margin-top:20px}.survey_topic_head{color:#fff;font-size:40px;margin:0 auto;font-weight:bold;padding:50px}.survey_topic_text{color:#fff;font-size:20px;margin:0 auto;font-weight:bold}.topic{position:absolute;font-family:"Montserrat";display:flex;flex-direction:column;place-content:center;place-items:center;width:80%;z-index:20;text-align:center;margin:auto;top:50%;left:0;right:0;padding:3rem 1rem;box-sizing:border-box;backdrop-filter:blur(25px);background-color:rgba(0,0,0,.6117647059);border-radius:14px;box-shadow:0px 0px 8px 3px rgba(36,36,36,.368627451)}.topic_head{color:#fff;font-size:3rem;margin:0 auto;font-weight:bold;padding:2rem}.topic_text{color:#fff;font-size:1.3rem;margin:0 auto}.chatblock{position:absolute;height:40%;width:20%;z-index:20;top:50%;left:15px;text-align:left}.clock{font-size:2em;box-sizing:border-box;backdrop-filter:blur(25px);background-color:rgba(0,0,0,.7921568627);border-radius:14px;box-shadow:0px 0px 8px 3px rgba(36,36,36,.368627451);color:#fff;display:flex;place-items:center;place-content:center}.sidebar_container{display:flex;position:absolute;top:0;flex-direction:column;place-items:center;place-content:center;width:100vw;z-index:10;text-align:center;padding:1rem 11rem .5rem .5rem;box-sizing:border-box;backdrop-filter:blur(25px);background-color:rgba(0,0,0,.7921568627);font-size:1.2rem;box-shadow:0px 0px 8px 3px rgba(36,36,36,.368627451)}.sidebar_container>*{padding-bottom:1rem;padding-top:1rem}.sidebar_container>*::after{content:"";position:absolute;bottom:0;width:90%;height:.8px;background-color:rgba(164,164,164,.4392156863)}.sidebar_container>*:first-child{padding-top:0;padding-bottom:1rem}.sidebar_container>*:last-child{padding-top:1rem;padding-bottom:0}.sidebar_container>*:last-child::after{display:none}.sidebar_container .info{font-family:"Fira Code";display:grid;grid-template-columns:1fr 1fr 1fr;grid-auto-flow:row;place-content:space-evenly;place-items:center;width:100%;font-size:.8em;position:relative}.sidebar_container .sidebar_prompt{font-family:"Montserrat",sans-serif;display:flex;place-content:center;place-items:center;font-size:1.8rem;font-weight:500}.sidebar_container .sidebar_foot{position:relative;width:80%;font-size:1rem;text-align:center;display:flex;place-content:center;place-items:center;flex-direction:column;height:100%;gap:.15rem}.sidebar_container .sidebar_foot>span{margin-right:1rem}.media-bridge{position:relative;display:flex;place-items:center;place-content:center;height:100vh;width:100vw}.local-video,.remote-video{position:absolute;height:100%;width:100%}.auth{position:absolute;bottom:0;left:0;right:0;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:99}.toolBar{z-index:99;position:absolute}.sv_window{position:fixed;top:20px;right:10px;width:25%}.primary-button{text-decoration:none;display:inline-block;cursor:pointer;background-color:#4285f4;border:none;color:#fff;font-size:.6em;margin:0 5px 20px 5px;width:8em;line-height:3ex;padding:1ex .7em;text-align:center;-webkit-box-shadow:1px 1px 5px 0 rgba(0,0,0,.5);-moz-box-shadow:1px 1px 5px 0 rgba(0,0,0,.5);box-shadow:1px 1px 5px 0 rgba(0,0,0,.5)}.media-controls{display:flex;margin:2ex 0;justify-content:center;left:0;right:0}.svg{width:1.4em}.room-occupied,.request-access,.waiting,.request-access,.grant-access,.waiting{overflow:hidden;padding:0 1em;box-sizing:border-box;width:100%;background:rgba(0,0,0,.8);max-height:0;transition:max-height .3s ease;font-size:.8rem}.full+.auth .room-occupied,.guest-hangup+.auth .request-access,.join+.auth .request-access,.approve+.auth .grant-access{transition-delay:.3s;max-height:20ex}.host-hangup+.auth .waiting,.create+.auth .waiting{max-height:20ex}.established+.auth .hangup-button{display:flex}.react-switch-checkbox{height:0;width:0;visibility:hidden}.react-switch-label{display:flex;align-items:center;justify-content:space-between;cursor:pointer;width:50px;height:25px;background:gray;border-radius:100px;position:relative;transition:background-color .2s}.react-switch-label .react-switch-button{content:"";position:absolute;top:2px;left:2px;width:20px;height:20px;border-radius:45px;transition:.2s;background:#fff;box-shadow:0 0 2px 0 rgba(10,10,10,.29)}.react-switch-checkbox:checked+.react-switch-label .react-switch-button{left:calc(100% - 2px);transform:translateX(-100%)}.react-switch-label:active .react-switch-button{width:30px}.progress-container{display:flex;gap:1rem;place-content:center;place-items:center;width:100%}',""]),e.exports=t},function(e,t,n){"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},function(e,t,n){"use strict";n.r(t),t.default=n.p+"fonts/Roboto-Regular.ttf"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"fonts/FiraCode-VariableFont_wght.ttf"},function(e,t,n){"use strict";n.r(t),t.default=n.p+"fonts/Montserrat-VariableFont_wght.ttf"},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"protocol",(function(){return ll})),n.d(r,"PacketType",(function(){return ul})),n.d(r,"Encoder",(function(){return cl})),n.d(r,"Decoder",(function(){return dl}));var i=n(0),o=n.n(i),a=n(22);function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,s(e,t)}var u=n(1),c=n.n(u),p=c.a.shape({trySubscribe:c.a.func.isRequired,tryUnsubscribe:c.a.func.isRequired,notifyNestedSubs:c.a.func.isRequired,isSubscribed:c.a.func.isRequired}),d=c.a.shape({subscribe:c.a.func.isRequired,dispatch:c.a.func.isRequired,getState:c.a.func.isRequired});o.a.forwardRef;var h=function(e){var t;void 0===e&&(e="store");var n=e+"Subscription",r=function(t){l(o,t);var r=o.prototype;function o(n,r){var i;return(i=t.call(this,n,r)||this)[e]=n.store,i}return r.getChildContext=function(){var t;return(t={})[e]=this[e],t[n]=null,t},r.render=function(){return i.Children.only(this.props.children)},o}(i.Component);return r.propTypes={store:d.isRequired,children:c.a.element.isRequired},r.childContextTypes=((t={})[e]=d.isRequired,t[n]=p,t),r}(),f=n(29);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var y=n(23),v=n.n(y),b=n(10),x=n.n(b),w=n(52),_={notify:function(){}};var C=function(){function e(e,t,n){this.store=e,this.parentSub=t,this.onStateChange=n,this.unsubscribe=null,this.listeners=_}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){var e,t;this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=(e=[],t=[],{clear:function(){t=null,e=null},notify:function(){for(var n=e=t,r=0;r<n.length;r++)n[r]()},get:function(){return t},subscribe:function(n){var r=!0;return t===e&&(t=e.slice()),t.push(n),function(){r&&null!==e&&(r=!1,t===e&&(t=e.slice()),t.splice(t.indexOf(n),1))}}}))},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=_)},e}(),S=void 0!==o.a.forwardRef,k=0,E={};function T(){}function I(e,t){var n,r;void 0===t&&(t={});var o=t,a=o.getDisplayName,s=void 0===a?function(e){return"ConnectAdvanced("+e+")"}:a,u=o.methodName,c=void 0===u?"connectAdvanced":u,h=o.renderCountProp,y=void 0===h?void 0:h,b=o.shouldHandleStateChanges,_=void 0===b||b,I=o.storeKey,P=void 0===I?"store":I,O=o.withRef,N=void 0!==O&&O,R=g(o,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),A=P+"Subscription",D=k++,V=((n={})[P]=d,n[A]=p,n),M=((r={})[A]=p,r);return function(t){x()(Object(w.isValidElementType)(t),"You must pass a component to the function returned by "+c+". Instead received "+JSON.stringify(t));var n=t.displayName||t.name||"Component",r=s(n),o=m({},R,{getDisplayName:s,methodName:c,renderCountProp:y,shouldHandleStateChanges:_,storeKey:P,withRef:N,displayName:r,wrappedComponentName:n,WrappedComponent:t}),a=function(n){function a(e,t){var i;return(i=n.call(this,e,t)||this).version=D,i.state={},i.renderCount=0,i.store=e[P]||t[P],i.propsMode=Boolean(e[P]),i.setWrappedInstance=i.setWrappedInstance.bind(Object(f.a)(Object(f.a)(i))),x()(i.store,'Could not find "'+P+'" in either the context or props of "'+r+'". Either wrap the root component in a <Provider>, or explicitly pass "'+P+'" as a prop to "'+r+'".'),i.initSelector(),i.initSubscription(),i}l(a,n);var s=a.prototype;return s.getChildContext=function(){var e,t=this.propsMode?null:this.subscription;return(e={})[A]=t||this.context[A],e},s.componentDidMount=function(){_&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},s.componentWillReceiveProps=function(e){this.selector.run(e)},s.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},s.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=T,this.store=null,this.selector.run=T,this.selector.shouldComponentUpdate=!1},s.getWrappedInstance=function(){return x()(N,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+c+"() call."),this.wrappedInstance},s.setWrappedInstance=function(e){this.wrappedInstance=e},s.initSelector=function(){var t=e(this.store.dispatch,o);this.selector=function(e,t){var n={run:function(r){try{var i=e(t.getState(),r);(i!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=i,n.error=null)}catch(e){n.shouldComponentUpdate=!0,n.error=e}}};return n}(t,this.store),this.selector.run(this.props)},s.initSubscription=function(){if(_){var e=(this.propsMode?this.props:this.context)[A];this.subscription=new C(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},s.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(E)):this.notifyNestedSubs()},s.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},s.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},s.addExtraProps=function(e){if(!(N||y||this.propsMode&&this.subscription))return e;var t=m({},e);return N&&(t.ref=this.setWrappedInstance),y&&(t[y]=this.renderCount++),this.propsMode&&this.subscription&&(t[A]=this.subscription),t},s.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return Object(i.createElement)(t,this.addExtraProps(e.props))},a}(i.Component);return S&&(a.prototype.UNSAFE_componentWillReceiveProps=a.prototype.componentWillReceiveProps,delete a.prototype.componentWillReceiveProps),a.WrappedComponent=t,a.displayName=r,a.childContextTypes=M,a.contextTypes=V,a.propTypes=V,v()(a,t)}}var P=Object.prototype.hasOwnProperty;function O(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function N(e,t){if(O(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!P.call(t,n[i])||!O(e[n[i]],t[n[i]]))return!1;return!0}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var D="function"==typeof Symbol&&Symbol.observable||"@@observable",V=function(){return Math.random().toString(36).substring(7).split("").join(".")},M={INIT:"@@redux/INIT"+V(),REPLACE:"@@redux/REPLACE"+V(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+V()}};function F(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function L(e,t){return function(){return t(e.apply(this,arguments))}}function z(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function j(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function q(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=j(e);var i=r(t,n);return"function"==typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=j(i),i=r(t,n)),i},r}}var $=[function(e){return"function"==typeof e?q(e):void 0},function(e){return e?void 0:z((function(e){return{dispatch:e}}))},function(e){return e&&"object"==typeof e?z((function(t){return function(e,t){if("function"==typeof e)return L(e,t);if("object"!=typeof e||null===e)throw new Error(A(16));var n={};for(var r in e){var i=e[r];"function"==typeof i&&(n[r]=L(i,t))}return n}(e,t)})):void 0}];var B=[function(e){return"function"==typeof e?q(e):void 0},function(e){return e?void 0:z((function(){return{}}))}];function U(e,t,n){return m({},n,e,t)}var W=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var r,i=n.pure,o=n.areMergedPropsEqual,a=!1;return function(t,n,s){var l=e(t,n,s);return a?i&&o(l,r)||(r=l):(a=!0,r=l),r}}}(e):void 0},function(e){return e?void 0:function(){return U}}];function H(e,t,n,r){return function(i,o){return n(e(i,o),t(r,o),o)}}function Q(e,t,n,r,i){var o,a,s,l,u,c=i.areStatesEqual,p=i.areOwnPropsEqual,d=i.areStatePropsEqual,h=!1;function f(i,h){var f,m,g=!p(h,a),y=!c(i,o);return o=i,a=h,g&&y?(s=e(o,a),t.dependsOnOwnProps&&(l=t(r,a)),u=n(s,l,a)):g?(e.dependsOnOwnProps&&(s=e(o,a)),t.dependsOnOwnProps&&(l=t(r,a)),u=n(s,l,a)):y?(f=e(o,a),m=!d(f,s),s=f,m&&(u=n(s,l,a)),u):u}return function(i,c){return h?f(i,c):(s=e(o=i,a=c),l=t(r,a),u=n(s,l,a),h=!0,u)}}function G(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,o=g(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=n(e,o),s=r(e,o),l=i(e,o);return(o.pure?Q:H)(a,s,l,e,o)}function K(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function J(e,t){return e===t}var X,Y,Z,ee,te,ne,re,ie,oe,ae,se,le,ue=(Z=(Y=void 0===X?{}:X).connectHOC,ee=void 0===Z?I:Z,te=Y.mapStateToPropsFactories,ne=void 0===te?B:te,re=Y.mapDispatchToPropsFactories,ie=void 0===re?$:re,oe=Y.mergePropsFactories,ae=void 0===oe?W:oe,se=Y.selectorFactory,le=void 0===se?G:se,function(e,t,n,r){void 0===r&&(r={});var i=r,o=i.pure,a=void 0===o||o,s=i.areStatesEqual,l=void 0===s?J:s,u=i.areOwnPropsEqual,c=void 0===u?N:u,p=i.areStatePropsEqual,d=void 0===p?N:p,h=i.areMergedPropsEqual,f=void 0===h?N:h,y=g(i,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),v=K(e,ne,"mapStateToProps"),b=K(t,ie,"mapDispatchToProps"),x=K(n,ae,"mergeProps");return ee(le,m({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:v,initMapDispatchToProps:b,initMergeProps:x,pure:a,areStatesEqual:l,areOwnPropsEqual:c,areStatePropsEqual:d,areMergedPropsEqual:f},y))}),ce=n(27),pe=n.n(ce),de=n(3),he=n.n(de),fe=n(40);function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){he()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye={zoom:200,occlusion_mask:!1,feature_show:{eyes:{toggle:!1,sliderIndex:0},mouth:{toggle:!1,sliderIndex:0},nose:{toggle:!1,sliderIndex:0},bar:{toggle:!1,direction:!1,sliderIndex:0,position:0}}};function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){he()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xe=be({rooms:[],roomData:{},video:!0,audio:!0},ye),we=function e(t,n,r){var i;if("function"==typeof n&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(A(0));if("function"==typeof n&&void 0===r&&(r=n,n=void 0),void 0!==r){if("function"!=typeof r)throw new Error(A(1));return r(e)(t,n)}if("function"!=typeof t)throw new Error(A(2));var o=t,a=n,s=[],l=s,u=!1;function c(){l===s&&(l=s.slice())}function p(){if(u)throw new Error(A(3));return a}function d(e){if("function"!=typeof e)throw new Error(A(4));if(u)throw new Error(A(5));var t=!0;return c(),l.push(e),function(){if(t){if(u)throw new Error(A(6));t=!1,c();var n=l.indexOf(e);l.splice(n,1),s=null}}}function h(e){if(!F(e))throw new Error(A(7));if(void 0===e.type)throw new Error(A(8));if(u)throw new Error(A(9));try{u=!0,a=o(a,e)}finally{u=!1}for(var t=s=l,n=0;n<t.length;n++){(0,t[n])()}return e}function f(e){if("function"!=typeof e)throw new Error(A(10));o=e,h({type:M.REPLACE})}function m(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(A(11));function n(){e.next&&e.next(p())}return n(),{unsubscribe:t(n)}}})[D]=function(){return this},e}return h({type:M.INIT}),(i={dispatch:h,subscribe:d,getState:p,replaceReducer:f})[D]=m,i}(function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"==typeof e[i]&&(n[i]=e[i])}var o,a=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:M.INIT}))throw new Error(A(12));if(void 0===n(void 0,{type:M.PROBE_UNKNOWN_ACTION()}))throw new Error(A(13))}))}(n)}catch(e){o=e}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var r=!1,i={},s=0;s<a.length;s++){var l=a[s],u=n[l],c=e[l],p=u(c,t);if(void 0===p){t&&t.type;throw new Error(A(14))}i[l]=p,r=r||p!==c}return(r=r||a.length!==Object.keys(e).length)?i:e}}({controlParams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_ALL":return console.log(t.payload),ge({},t.payload);case"UPDATE_MASK":return ge(ge({},e),{},{occlusion_mask:t.payload});case"UPDATE_EYE":return ge(ge({},e),{},{feature_show:ge(ge({},e.feature_show),{},{eyes:t.payload})});case"UPDATE_MOUTH":return ge(ge({},e),{},{feature_show:ge(ge({},e.feature_show),{},{mouth:t.payload})});case"UPDATE_NOSE":return ge(ge({},e),{},{feature_show:ge(ge({},e.feature_show),{},{nose:t.payload})});case"UPDATE_BAR":return ge(ge({},e),{},{feature_show:ge(ge({},e.feature_show),{},{bar:t.payload})});default:return e}},rooms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ROOM":return pe()(new Set([].concat(pe()(e),[t.room])));default:return e}},roomData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ROOM_DATA":return be(be({},e),t.roomData);default:return e}},video:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VIDEO":return t.video;default:return e}},audio:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUDIO":return t.audio;default:return e}},session:fe.sessionReducer}),xe);we.subscribe((function(){null!=we&&(console.log("Stored",null==we?void 0:we.getState()),localStorage.setItem("reduxState",JSON.stringify(we.getState())))}));var _e={refreshOnCheckAuth:!0,driver:"COOKIES",validateSession:function(e){return console.log("session",e),!0}};fe.sessionService.initSessionService(we,_e).then((function(){return console.log("Redux React Session is ready and a session was refreshed from your storage")})).catch((function(){return console.log("Redux React Session is ready and there is no session in your storage")}));var Ce=we,Se=n(11),ke=n.n(Se);function Ee(e){return"/"===e.charAt(0)}function Te(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var Ie=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],o=e&&Ee(e),a=t&&Ee(t),s=o||a;if(e&&Ee(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var l=i[i.length-1];n="."===l||".."===l||""===l}else n=!1;for(var u=0,c=i.length;c>=0;c--){var p=i[c];"."===p?Te(i,c):".."===p?(Te(i,c),u++):u&&(Te(i,c),u--)}if(!s)for(;u--;u)i.unshift("..");!s||""===i[0]||i[0]&&Ee(i[0])||i.unshift("");var d=i.join("/");return n&&"/"!==d.substr(-1)&&(d+="/"),d};var Pe=function(e,t){if(!e)throw new Error("Invariant failed")};function Oe(e){return"/"===e.charAt(0)?e:"/"+e}function Ne(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function Re(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function Ae(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function De(e,t,n,r){var i;"string"==typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(i=m({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=Ie(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function Ve(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"==typeof e?e(t,n):e;"string"==typeof o?"function"==typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var Me=!("undefined"==typeof window||!window.document||!window.document.createElement);function Fe(e,t){t(window.confirm(e))}function Le(){try{return window.history.state||{}}catch(e){return{}}}function ze(e){void 0===e&&(e={}),Me||Pe(!1);var t,n=window.history,r=(-1===(t=window.navigator.userAgent).indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,i=!(-1===window.navigator.userAgent.indexOf("Trident")),o=e,a=o.forceRefresh,s=void 0!==a&&a,l=o.getUserConfirmation,u=void 0===l?Fe:l,c=o.keyLength,p=void 0===c?6:c,d=e.basename?Re(Oe(e.basename)):"";function h(e){var t=e||{},n=t.key,r=t.state,i=window.location,o=i.pathname+i.search+i.hash;return d&&(o=Ne(o,d)),De(o,r,n)}function f(){return Math.random().toString(36).substr(2,p)}var g=Ve();function y(e){m(P,e),P.length=n.length,g.notifyListeners(P.location,P.action)}function v(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||w(h(e.state))}function b(){w(h(Le()))}var x=!1;function w(e){if(x)x=!1,y();else{g.confirmTransitionTo(e,"POP",u,(function(t){t?y({action:"POP",location:e}):function(e){var t=P.location,n=C.indexOf(t.key);-1===n&&(n=0);var r=C.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(x=!0,k(i))}(e)}))}}var _=h(Le()),C=[_.key];function S(e){return d+Ae(e)}function k(e){n.go(e)}var E=0;function T(e){1===(E+=e)&&1===e?(window.addEventListener("popstate",v),i&&window.addEventListener("hashchange",b)):0===E&&(window.removeEventListener("popstate",v),i&&window.removeEventListener("hashchange",b))}var I=!1;var P={length:n.length,action:"POP",location:_,createHref:S,push:function(e,t){var i=De(e,t,f(),P.location);g.confirmTransitionTo(i,"PUSH",u,(function(e){if(e){var t=S(i),o=i.key,a=i.state;if(r)if(n.pushState({key:o,state:a},null,t),s)window.location.href=t;else{var l=C.indexOf(P.location.key),u=C.slice(0,l+1);u.push(i.key),C=u,y({action:"PUSH",location:i})}else window.location.href=t}}))},replace:function(e,t){var i=De(e,t,f(),P.location);g.confirmTransitionTo(i,"REPLACE",u,(function(e){if(e){var t=S(i),o=i.key,a=i.state;if(r)if(n.replaceState({key:o,state:a},null,t),s)window.location.replace(t);else{var l=C.indexOf(P.location.key);-1!==l&&(C[l]=i.key),y({action:"REPLACE",location:i})}else window.location.replace(t)}}))},go:k,goBack:function(){k(-1)},goForward:function(){k(1)},block:function(e){void 0===e&&(e=!1);var t=g.setPrompt(e);return I||(T(1),I=!0),function(){return I&&(I=!1,T(-1)),t()}},listen:function(e){var t=g.appendListener(e);return T(1),function(){T(-1),t()}}};return P}var je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $e(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Be=function(e){function t(){var n,r;qe(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=$e(this,e.call.apply(e,[this].concat(o))),r.state={match:r.computeMatch(r.props.history.location.pathname)},$e(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:je({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},t.prototype.computeMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}},t.prototype.componentWillMount=function(){var e=this,t=this.props,n=t.children,r=t.history;x()(null==n||1===o.a.Children.count(n),"A <Router> may have only one child element"),this.unlisten=r.listen((function(){e.setState({match:e.computeMatch(r.location.pathname)})}))},t.prototype.componentWillReceiveProps=function(e){ke()(this.props.history===e.history,"You cannot change <Router history>")},t.prototype.componentWillUnmount=function(){this.unlisten()},t.prototype.render=function(){var e=this.props.children;return e?o.a.Children.only(e):null},t}(o.a.Component);Be.propTypes={history:c.a.object.isRequired,children:c.a.node},Be.contextTypes={router:c.a.object},Be.childContextTypes={router:c.a.object.isRequired};var Ue=Be;function We(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function He(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Qe=function(e){function t(){var n,r;We(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=He(this,e.call.apply(e,[this].concat(o))),r.history=ze(r.props),He(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){ke()(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")},t.prototype.render=function(){return o.a.createElement(Ue,{history:this.history,children:this.props.children})},t}(o.a.Component);Qe.propTypes={basename:c.a.string,forceRefresh:c.a.bool,getUserConfirmation:c.a.func,keyLength:c.a.number,children:c.a.node};var Ge=Qe,Ke=n(59),Je=n.n(Ke),Xe={},Ye=0,Ze=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=Xe[n]||(Xe[n]={});if(r[e])return r[e];var i=[],o={re:Je()(e,i,t),keys:i};return Ye<1e4&&(r[e]=o,Ye++),o},et=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];"string"==typeof t&&(t={path:t});var r=t,i=r.path,o=r.exact,a=void 0!==o&&o,s=r.strict,l=void 0!==s&&s,u=r.sensitive,c=void 0!==u&&u;if(null==i)return n;var p=Ze(i,{end:a,strict:l,sensitive:c}),d=p.re,h=p.keys,f=d.exec(e);if(!f)return null;var m=f[0],g=f.slice(1),y=e===m;return a&&!y?null:{path:i,url:"/"===i&&""===m?"/":m,isExact:y,params:h.reduce((function(e,t,n){return e[t.name]=g[n],e}),{})}};function tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var rt=function(e){function t(){return tt(this,t),nt(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){x()(this.context.router,"You should not use <Switch> outside a <Router>")},t.prototype.componentWillReceiveProps=function(e){ke()(!(e.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),ke()(!(!e.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},t.prototype.render=function(){var e=this.context.router.route,t=this.props.children,n=this.props.location||e.location,r=void 0,i=void 0;return o.a.Children.forEach(t,(function(t){if(null==r&&o.a.isValidElement(t)){var a=t.props,s=a.path,l=a.exact,u=a.strict,c=a.sensitive,p=a.from,d=s||p;i=t,r=et(n.pathname,{path:d,exact:l,strict:u,sensitive:c},e.match)}})),r?o.a.cloneElement(i,{location:n,computedMatch:r}):null},t}(o.a.Component);rt.contextTypes={router:c.a.shape({route:c.a.object.isRequired}).isRequired},rt.propTypes={children:c.a.node,location:c.a.object};var it=rt,ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function at(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function st(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var lt=function(e){return 0===o.a.Children.count(e)},ut=function(e){function t(){var n,r;at(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=st(this,e.call.apply(e,[this].concat(o))),r.state={match:r.computeMatch(r.props,r.context.router)},st(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:ot({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},t.prototype.computeMatch=function(e,t){var n=e.computedMatch,r=e.location,i=e.path,o=e.strict,a=e.exact,s=e.sensitive;if(n)return n;x()(t,"You should not use <Route> or withRouter() outside a <Router>");var l=t.route,u=(r||l.location).pathname;return et(u,{path:i,strict:o,exact:a,sensitive:s},l.match)},t.prototype.componentWillMount=function(){ke()(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),ke()(!(this.props.component&&this.props.children&&!lt(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),ke()(!(this.props.render&&this.props.children&&!lt(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},t.prototype.componentWillReceiveProps=function(e,t){ke()(!(e.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),ke()(!(!e.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(e,t.router)})},t.prototype.render=function(){var e=this.state.match,t=this.props,n=t.children,r=t.component,i=t.render,a=this.context.router,s=a.history,l=a.route,u=a.staticContext,c={match:e,location:this.props.location||l.location,history:s,staticContext:u};return r?e?o.a.createElement(r,c):null:i?e?i(c):null:"function"==typeof n?n(c):n&&!lt(n)?o.a.Children.only(n):null},t}(o.a.Component);ut.propTypes={computedMatch:c.a.object,path:c.a.string,exact:c.a.bool,strict:c.a.bool,sensitive:c.a.bool,component:c.a.func,render:c.a.func,children:c.a.oneOfType([c.a.func,c.a.node]),location:c.a.object},ut.contextTypes={router:c.a.shape({history:c.a.object.isRequired,route:c.a.object.isRequired,staticContext:c.a.object})},ut.childContextTypes={router:c.a.object.isRequired};var ct=ut,pt=n(7),dt=n.n(pt),ht=n(8),ft=n.n(ht),mt=n(4),gt=n.n(mt),yt=n(14),vt=n.n(yt),bt=n(15),xt=n.n(bt),wt=n(6),_t=n.n(wt),Ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function St(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Et=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},Tt=function(e){function t(){var n,r;St(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=kt(this,e.call.apply(e,[this].concat(o))),r.handleClick=function(e){if(r.props.onClick&&r.props.onClick(e),!e.defaultPrevented&&0===e.button&&!r.props.target&&!Et(e)){e.preventDefault();var t=r.context.router.history,n=r.props,i=n.replace,o=n.to;i?t.replace(o):t.push(o)}},kt(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),n=e.innerRef,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["replace","to","innerRef"]);x()(this.context.router,"You should not use <Link> outside a <Router>"),x()(void 0!==t,'You must specify the "to" property');var i=this.context.router.history,a="string"==typeof t?De(t,null,null,i.location):t,s=i.createHref(a);return o.a.createElement("a",Ct({},r,{onClick:this.handleClick,href:s,ref:n}))},t}(o.a.Component);Tt.propTypes={onClick:c.a.func,target:c.a.string,replace:c.a.bool,to:c.a.oneOfType([c.a.string,c.a.object]).isRequired,innerRef:c.a.oneOfType([c.a.string,c.a.func])},Tt.defaultProps={replace:!1},Tt.contextTypes={router:c.a.shape({history:c.a.shape({push:c.a.func.isRequired,replace:c.a.func.isRequired,createHref:c.a.func.isRequired}).isRequired}).isRequired};var It=Tt,Pt=function(e){return o.a.createElement("div",{className:"home"},o.a.createElement("div",null,o.a.createElement("h1",{itemProp:"headline"},"Webrtc Video Room"),o.a.createElement("p",null,"Please enter a room name."),o.a.createElement("input",{type:"text",name:"room",value:e.roomId,onChange:e.handleChange,pattern:"^\\w+$",maxLength:"10",required:!0,autoFocus:!0,title:"Room name should only contain letters or numbers."}),o.a.createElement(It,{className:"primary-button",to:"/r/"+e.roomId},"Join"),o.a.createElement(It,{className:"primary-button",to:"/control/"+e.roomId},"Control"),0!==e.rooms.length&&o.a.createElement("div",null,"Recently used rooms:"),e.rooms.map((function(e){return o.a.createElement(It,{key:e,className:"recent-room",to:"/r/"+e},e)}))))};Pt.propTypes={handleChange:u.PropTypes.func.isRequired,defaultRoomId:u.PropTypes.string.isRequired,roomId:u.PropTypes.string.isRequired,rooms:u.PropTypes.array.isRequired};var Ot=ue((function(e){return{rooms:e.rooms}}))(Pt);function Nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_t()(e);if(t){var i=_t()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xt()(this,n)}}var Rt=function(e){vt()(n,e);var t=Nt(n);function n(e){var r;return dt()(this,n),(r=t.call(this,e)).defaultRoomId=String(new Date-(new Date).setHours(0,0,0,0)),r.state={roomId:r.defaultRoomId},r.handleChange=r.handleChange.bind(gt()(r)),r}return ft()(n,[{key:"handleChange",value:function(e){this.setState({roomId:e.target.value})}},{key:"render",value:function(){return o.a.createElement(Ot,{defaultRoomId:this.defaultRoomId,roomId:this.state.roomId,handleChange:this.handleChange})}}]),n}(i.Component);Rt.contextTypes={router:u.PropTypes.object};var At=Rt,Dt=n(24),Vt=n.n(Dt),Mt=n(13),Ft=n.n(Mt),Lt=n(19),zt=n(5),jt=n.n(zt);function qt(e,t){if(null==e)return{};var n,r,i=g(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var $t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bt="object"===("undefined"==typeof window?"undefined":$t(window))&&"object"===("undefined"==typeof document?"undefined":$t(document))&&9===document.nodeType;function Ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wt(e,t,n){return t&&Ut(e.prototype,t),n&&Ut(e,n),e}var Ht={}.constructor;function Qt(e){if(null==e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map(Qt);if(e.constructor!==Ht)return e;var t={};for(var n in e)t[n]=Qt(e[n]);return t}function Gt(e,t,n){void 0===e&&(e="unnamed");var r=n.jss,i=Qt(t),o=r.plugins.onCreateRule(e,i,n);return o||(e[0],null)}var Kt=function(e,t){for(var n="",r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=t),n+=e[r];return n},Jt=function(e,t){if(void 0===t&&(t=!1),!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=", "),n+=Kt(e[r]," ");else n=Kt(e,", ");return t||"!important"!==e[e.length-1]||(n+=" !important"),n};function Xt(e){return e&&!1===e.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function Yt(e,t){for(var n="",r=0;r<t;r++)n+="  ";return n+e}function Zt(e,t,n){void 0===n&&(n={});var r="";if(!t)return r;var i=n.indent,o=void 0===i?0:i,a=t.fallbacks;!1===n.format&&(o=-1/0);var s=Xt(n),l=s.linebreak,u=s.space;if(e&&o++,a)if(Array.isArray(a))for(var c=0;c<a.length;c++){var p=a[c];for(var d in p){var h=p[d];null!=h&&(r&&(r+=l),r+=Yt(d+":"+u+Jt(h)+";",o))}}else for(var f in a){var m=a[f];null!=m&&(r&&(r+=l),r+=Yt(f+":"+u+Jt(m)+";",o))}for(var g in t){var y=t[g];null!=y&&"fallbacks"!==g&&(r&&(r+=l),r+=Yt(g+":"+u+Jt(y)+";",o))}return(r||n.allowEmpty)&&e?(r&&(r=""+l+r+l),Yt(""+e+u+"{"+r,--o)+Yt("}",o)):r}var en=/([[\].#*$><+~=|^:(),"'`\s])/g,tn="undefined"!=typeof CSS&&CSS.escape,nn=function(e){return tn?tn(e):e.replace(en,"\\$1")},rn=function(){function e(e,t,n){this.type="style",this.isProcessed=!1;var r=n.sheet,i=n.Renderer;this.key=e,this.options=n,this.style=t,r?this.renderer=r.renderer:i&&(this.renderer=new i)}return e.prototype.prop=function(e,t,n){if(void 0===t)return this.style[e];var r=!!n&&n.force;if(!r&&this.style[e]===t)return this;var i=t;n&&!1===n.process||(i=this.options.jss.plugins.onChangeValue(t,e,this));var o=null==i||!1===i,a=e in this.style;if(o&&!a&&!r)return this;var s=o&&a;if(s?delete this.style[e]:this.style[e]=i,this.renderable&&this.renderer)return s?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,i),this;var l=this.options.sheet;return l&&l.attached,this},e}(),on=function(e){function t(t,n,r){var i;i=e.call(this,t,n,r)||this;var o=r.selector,a=r.scoped,s=r.sheet,l=r.generateId;return o?i.selectorText=o:!1!==a&&(i.id=l(Object(f.a)(Object(f.a)(i)),s),i.selectorText="."+nn(i.id)),i}l(t,e);var n=t.prototype;return n.applyTo=function(e){var t=this.renderer;if(t){var n=this.toJSON();for(var r in n)t.setProperty(e,r,n[r])}return this},n.toJSON=function(){var e={};for(var t in this.style){var n=this.style[t];"object"!=typeof n?e[t]=n:Array.isArray(n)&&(e[t]=Jt(n))}return e},n.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?m({},e,{allowEmpty:!0}):e;return Zt(this.selectorText,this.style,n)},Wt(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,n=this.renderable;if(n&&t)t.setSelector(n,e)||t.replaceRule(n,this)}},get:function(){return this.selectorText}}]),t}(rn),an={onCreateRule:function(e,t,n){return"@"===e[0]||n.parent&&"keyframes"===n.parent.type?null:new on(e,t,n)}},sn={indent:1,children:!0},ln=/@([\w-]+)/,un=function(){function e(e,t,n){this.type="conditional",this.isProcessed=!1,this.key=e;var r=e.match(ln);for(var i in this.at=r?r[1]:"unknown",this.query=n.name||"@"+this.at,this.options=n,this.rules=new Rn(m({},n,{parent:this})),t)this.rules.add(i,t[i]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r?(this.options.jss.plugins.onProcessRule(r),r):null},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.toString=function(e){void 0===e&&(e=sn);var t=Xt(e).linebreak;if(null==e.indent&&(e.indent=sn.indent),null==e.children&&(e.children=sn.children),!1===e.children)return this.query+" {}";var n=this.rules.toString(e);return n?this.query+" {"+t+n+t+"}":""},e}(),cn=/@media|@supports\s+/,pn={onCreateRule:function(e,t,n){return cn.test(e)?new un(e,t,n):null}},dn={indent:1,children:!0},hn=/@keyframes\s+([\w-]+)/,fn=function(){function e(e,t,n){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var r=e.match(hn);r&&r[1]?this.name=r[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var i=n.scoped,o=n.sheet,a=n.generateId;for(var s in this.id=!1===i?this.name:nn(a(this,o)),this.rules=new Rn(m({},n,{parent:this})),t)this.rules.add(s,t[s],m({},n,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){void 0===e&&(e=dn);var t=Xt(e).linebreak;if(null==e.indent&&(e.indent=dn.indent),null==e.children&&(e.children=dn.children),!1===e.children)return this.at+" "+this.id+" {}";var n=this.rules.toString(e);return n&&(n=""+t+n+t),this.at+" "+this.id+" {"+n+"}"},e}(),mn=/@keyframes\s+/,gn=/\$([\w-]+)/g,yn=function(e,t){return"string"==typeof e?e.replace(gn,(function(e,n){return n in t?t[n]:e})):e},vn=function(e,t,n){var r=e[t],i=yn(r,n);i!==r&&(e[t]=i)},bn={onCreateRule:function(e,t,n){return"string"==typeof e&&mn.test(e)?new fn(e,t,n):null},onProcessStyle:function(e,t,n){return"style"===t.type&&n?("animation-name"in e&&vn(e,"animation-name",n.keyframes),"animation"in e&&vn(e,"animation",n.keyframes),e):e},onChangeValue:function(e,t,n){var r=n.options.sheet;if(!r)return e;switch(t){case"animation":case"animation-name":return yn(e,r.keyframes);default:return e}}},xn=function(e){function t(){return e.apply(this,arguments)||this}return l(t,e),t.prototype.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?m({},e,{allowEmpty:!0}):e;return Zt(this.key,this.style,n)},t}(rn),wn={onCreateRule:function(e,t,n){return n.parent&&"keyframes"===n.parent.type?new xn(e,t,n):null}},_n=function(){function e(e,t,n){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){var t=Xt(e).linebreak;if(Array.isArray(this.style)){for(var n="",r=0;r<this.style.length;r++)n+=Zt(this.at,this.style[r]),this.style[r+1]&&(n+=t);return n}return Zt(this.at,this.style,e)},e}(),Cn=/@font-face/,Sn={onCreateRule:function(e,t,n){return Cn.test(e)?new _n(e,t,n):null}},kn=function(){function e(e,t,n){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){return Zt(this.key,this.style,e)},e}(),En={onCreateRule:function(e,t,n){return"@viewport"===e||"@-ms-viewport"===e?new kn(e,t,n):null}},Tn=function(){function e(e,t,n){this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),In={"@charset":!0,"@import":!0,"@namespace":!0},Pn=[an,pn,bn,wn,Sn,En,{onCreateRule:function(e,t,n){return e in In?new Tn(e,t,n):null}}],On={process:!0},Nn={force:!0,process:!0},Rn=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,n){var r=this.options,i=r.parent,o=r.sheet,a=r.jss,s=r.Renderer,l=r.generateId,u=r.scoped,c=m({classes:this.classes,parent:i,sheet:o,jss:a,Renderer:s,generateId:l,scoped:u,name:e,keyframes:this.keyframes,selector:void 0},n),p=e;e in this.raw&&(p=e+"-d"+this.counter++),this.raw[p]=t,p in this.classes&&(c.selector="."+nn(this.classes[p]));var d=Gt(p,t,c);if(!d)return null;this.register(d);var h=void 0===c.index?this.index.length:c.index;return this.index.splice(h,0,d),d},t.replace=function(e,t,n){var r=this.get(e),i=this.index.indexOf(r);r&&this.remove(r);var o=n;return-1!==i&&(o=m({},n,{index:i})),this.add(e,t,o)},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof on?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof fn&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof on?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof fn&&delete this.keyframes[e.name]},t.update=function(){var e,t,n;if("string"==typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.get(e),t,n);else for(var r=0;r<this.index.length;r++)this.updateOne(this.index[r],t,n)},t.updateOne=function(t,n,r){void 0===r&&(r=On);var i=this.options,o=i.jss.plugins,a=i.sheet;if(t.rules instanceof e)t.rules.update(n,r);else{var s=t.style;if(o.onUpdate(n,t,a,r),r.process&&s&&s!==t.style){for(var l in o.onProcessStyle(t.style,t,a),t.style){var u=t.style[l];u!==s[l]&&t.prop(l,u,Nn)}for(var c in s){var p=t.style[c],d=s[c];null==p&&p!==d&&t.prop(c,null,Nn)}}}},t.toString=function(e){for(var t="",n=this.options.sheet,r=!!n&&n.options.link,i=Xt(e).linebreak,o=0;o<this.index.length;o++){var a=this.index[o].toString(e);(a||r)&&(t&&(t+=i),t+=a)}return t},e}(),An=function(){function e(e,t){for(var n in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=m({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new Rn(this.options),e)this.rules.add(n,e[n]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var i=this.rules.add(e,t,n);return i?(this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(r?r.push(i):(this.insertRule(i),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),i):i:(this.deployed=!1,i)):null},t.replaceRule=function(e,t,n){var r=this.rules.get(e);if(!r)return this.addRule(e,t,n);var i=this.rules.replace(e,t,n);return i&&this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(this.renderer&&(i?r.renderable&&this.renderer.replaceRule(r.renderable,i):this.renderer.deleteRule(r)),i):i:(this.deployed=!1,i)},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var n=[];for(var r in e){var i=this.addRule(r,e[r],t);i&&n.push(i)}return n},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"==typeof e?e:this.rules.get(e);return!(!t||this.attached&&!t.renderable)&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,n){return this.rules.updateOne(e,t,n),this},t.toString=function(e){return this.rules.toString(e)},e}(),Dn=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(e,t,n){for(var r=0;r<this.registry.onCreateRule.length;r++){var i=this.registry.onCreateRule[r](e,t,n);if(i)return i}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,n){for(var r=0;r<this.registry.onProcessStyle.length;r++)t.style=this.registry.onProcessStyle[r](t.style,t,n)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,n,r){for(var i=0;i<this.registry.onUpdate.length;i++)this.registry.onUpdate[i](e,t,n,r)},t.onChangeValue=function(e,t,n){for(var r=e,i=0;i<this.registry.onChangeValue.length;i++)r=this.registry.onChangeValue[i](r,t,n);return r},t.use=function(e,t){void 0===t&&(t={queue:"external"});var n=this.plugins[t.queue];-1===n.indexOf(e)&&(n.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var n in t)n in e&&e[n].push(t[n]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),Vn=new(function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var r=0;r<t.length;r++)if(t[r].options.index>n)return void t.splice(r,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,n=t.attached,r=g(t,["attached"]),i=Xt(r).linebreak,o="",a=0;a<this.registry.length;a++){var s=this.registry[a];null!=n&&s.attached!==n||(o&&(o+=i),o+=s.toString(r))}return o},Wt(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}()),Mn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window&&window.Math===Math?window:"undefined"!=typeof self&&self.Math===Math?self:Function("return this")(),Fn="2f1acc6c3a606b082e5eef5e54414ffb";null==Mn[Fn]&&(Mn[Fn]=0);var Ln=Mn[Fn]++,zn=function(e){void 0===e&&(e={});var t=0;return function(n,r){t+=1;var i="",o="";return r&&(r.options.classNamePrefix&&(o=r.options.classNamePrefix),null!=r.options.jss.id&&(i=String(r.options.jss.id))),e.minify?""+(o||"c")+Ln+i+t:o+n.key+"-"+Ln+(i?"-"+i:"")+"-"+t}},jn=function(e){var t;return function(){return t||(t=e()),t}},qn=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(e){return""}},$n=function(e,t,n){try{var r=n;if(Array.isArray(n)&&(r=Jt(n,!0),"!important"===n[n.length-1]))return e.style.setProperty(t,r,"important"),!0;e.attributeStyleMap?e.attributeStyleMap.set(t,r):e.style.setProperty(t,r)}catch(e){return!1}return!0},Bn=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(e){}},Un=function(e,t){return e.selectorText=t,e.selectorText===t},Wn=jn((function(){return document.querySelector("head")}));function Hn(e){var t=Vn.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.attached&&r.options.index>t.index&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if((n=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.attached&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e))&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=e.insertionPoint;if(r&&"string"==typeof r){var i=function(e){for(var t=Wn(),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===e)return r}return null}(r);if(i)return{parent:i.parentNode,node:i.nextSibling}}return!1}var Qn=jn((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),Gn=function(e,t,n){try{"insertRule"in e?e.insertRule(t,n):"appendRule"in e&&e.appendRule(t)}catch(e){return!1}return e.cssRules[n]},Kn=function(e,t){var n=e.cssRules.length;return void 0===t||t>n?n:t},Jn=function(){function e(e){this.getPropertyValue=qn,this.setProperty=$n,this.removeProperty=Bn,this.setSelector=Un,this.hasInsertedRules=!1,this.cssRules=[],e&&Vn.add(e),this.sheet=e;var t,n=this.sheet?this.sheet.options:{},r=n.media,i=n.meta,o=n.element;this.element=o||((t=document.createElement("style")).textContent="\n",t),this.element.setAttribute("data-jss",""),r&&this.element.setAttribute("media",r),i&&this.element.setAttribute("data-meta",i);var a=Qn();a&&this.element.setAttribute("nonce",a)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var n=t.insertionPoint,r=Hn(t);if(!1!==r&&r.parent)r.parent.insertBefore(e,r.node);else if(n&&"number"==typeof n.nodeType){var i=n,o=i.parentNode;o&&o.insertBefore(e,i.nextSibling)}else Wn().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var n=0;n<e.index.length;n++)this.insertRule(e.index[n],n,t)},t.insertRule=function(e,t,n){if(void 0===n&&(n=this.element.sheet),e.rules){var r=e,i=n;if("conditional"===e.type||"keyframes"===e.type){var o=Kn(n,t);if(!1===(i=Gn(n,r.toString({children:!1}),o)))return!1;this.refCssRule(e,o,i)}return this.insertRules(r.rules,i),i}var a=e.toString();if(!a)return!1;var s=Kn(n,t),l=Gn(n,a,s);return!1!==l&&(this.hasInsertedRules=!0,this.refCssRule(e,s,l),l)},t.refCssRule=function(e,t,n){e.renderable=n,e.options.parent instanceof An&&this.cssRules.splice(t,0,n)},t.deleteRule=function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),this.cssRules.splice(n,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var n=this.indexOf(e);return-1!==n&&(this.element.sheet.deleteRule(n),this.cssRules.splice(n,1),this.insertRule(t,n))},t.getRules=function(){return this.element.sheet.cssRules},e}(),Xn=0,Yn=function(){function e(e){this.id=Xn++,this.version="10.9.0",this.plugins=new Dn,this.options={id:{minify:!1},createGenerateId:zn,Renderer:Bt?Jn:null,plugins:[]},this.generateId=zn({minify:!1});for(var t=0;t<Pn.length;t++)this.plugins.use(Pn[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=m({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var n=t.index;"number"!=typeof n&&(n=0===Vn.index?0:Vn.index+1);var r=new An(e,m({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(r),r},t.removeStyleSheet=function(e){return e.detach(),Vn.remove(e),this},t.createRule=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),"object"==typeof e)return this.createRule(void 0,e,t);var r=m({},n,{name:e,jss:this,Renderer:this.options.Renderer});r.generateId||(r.generateId=this.generateId),r.classes||(r.classes={}),r.keyframes||(r.keyframes={});var i=Gt(e,t,r);return i&&this.plugins.onProcessRule(i),i},t.use=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.plugins.use(t)})),this},e}(),Zn=function(e){return new Yn(e)},er="object"==typeof CSS&&null!=CSS&&"number"in CSS;
/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */
Zn();function tr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,n=e.newClasses;e.Component;if(!n)return t;var r=m({},t);return Object.keys(n).forEach((function(e){n[e]&&(r[e]="".concat(t[e]," ").concat(n[e]))})),r}var nr={set:function(e,t,n,r){var i=e.get(t);i||(i=new Map,e.set(t,i)),i.set(n,r)},get:function(e,t,n){var r=e.get(t);return r?r.get(n):void 0},delete:function(e,t,n){e.get(t).delete(n)}};var rr=o.a.createContext(null);function ir(){return o.a.useContext(rr)}var or="function"==typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",ar=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var sr=Date.now(),lr="fnValues"+sr,ur="fnStyle"+ ++sr,cr=function(){return{onCreateRule:function(e,t,n){if("function"!=typeof t)return null;var r=Gt(e,{},n);return r[ur]=t,r},onProcessStyle:function(e,t){if(lr in t||ur in t)return e;var n={};for(var r in e){var i=e[r];"function"==typeof i&&(delete e[r],n[r]=i)}return t[lr]=n,e},onUpdate:function(e,t,n,r){var i=t,o=i[ur];o&&(i.style=o(e)||{});var a=i[lr];if(a)for(var s in a)i.prop(s,a[s](e),r)}}},pr="@global",dr=function(){function e(e,t,n){for(var r in this.type="global",this.at=pr,this.isProcessed=!1,this.key=e,this.options=n,this.rules=new Rn(m({},n,{parent:this})),t)this.rules.add(r,t[r]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(e){return this.rules.toString(e)},e}(),hr=function(){function e(e,t,n){this.type="global",this.at=pr,this.isProcessed=!1,this.key=e,this.options=n;var r=e.substr("@global ".length);this.rule=n.jss.createRule(r,t,m({},n,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),fr=/\s*,\s*/g;function mr(e,t){for(var n=e.split(fr),r="",i=0;i<n.length;i++)r+=t+" "+n[i].trim(),n[i+1]&&(r+=", ");return r}var gr=function(){return{onCreateRule:function(e,t,n){if(!e)return null;if(e===pr)return new dr(e,t,n);if("@"===e[0]&&"@global "===e.substr(0,"@global ".length))return new hr(e,t,n);var r=n.parent;return r&&("global"===r.type||r.options.parent&&"global"===r.options.parent.type)&&(n.scoped=!1),n.selector||!1!==n.scoped||(n.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var n=e.options,r=e.style,i=r?r[pr]:null;if(i){for(var o in i)t.addRule(o,i[o],m({},n,{selector:mr(o,e.selector)}));delete r[pr]}}(e,t),function(e,t){var n=e.options,r=e.style;for(var i in r)if("@"===i[0]&&i.substr(0,pr.length)===pr){var o=mr(i.substr(pr.length),e.selector);t.addRule(o,r[i],m({},n,{selector:o})),delete r[i]}}(e,t))}}},yr=/\s*,\s*/g,vr=/&/g,br=/\$([\w-]+)/g;var xr=function(){function e(e,t){return function(n,r){var i=e.getRule(r)||t&&t.getRule(r);return i?i.selector:r}}function t(e,t){for(var n=t.split(yr),r=e.split(yr),i="",o=0;o<n.length;o++)for(var a=n[o],s=0;s<r.length;s++){var l=r[s];i&&(i+=", "),i+=-1!==l.indexOf("&")?l.replace(vr,a):a+" "+l}return i}function n(e,t,n){if(n)return m({},n,{index:n.index+1});var r=e.options.nestingLevel;r=void 0===r?1:r+1;var i=m({},e.options,{nestingLevel:r,index:t.indexOf(e)+1});return delete i.name,i}return{onProcessStyle:function(r,i,o){if("style"!==i.type)return r;var a,s,l=i,u=l.options.parent;for(var c in r){var p=-1!==c.indexOf("&"),d="@"===c[0];if(p||d){if(a=n(l,u,a),p){var h=t(c,l.selector);s||(s=e(u,o)),h=h.replace(br,s);var f=l.key+"-"+c;"replaceRule"in u?u.replaceRule(f,r[c],m({},a,{selector:h})):u.addRule(f,r[c],m({},a,{selector:h}))}else d&&u.addRule(c,{},a).addRule(l.key,r[c],{selector:l.selector});delete r[c]}}return r}}},wr=/[A-Z]/g,_r=/^ms-/,Cr={};function Sr(e){return"-"+e.toLowerCase()}var kr=function(e){if(Cr.hasOwnProperty(e))return Cr[e];var t=e.replace(wr,Sr);return Cr[e]=_r.test(t)?"-"+t:t};function Er(e){var t={};for(var n in e){t[0===n.indexOf("--")?n:kr(n)]=e[n]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(Er):t.fallbacks=Er(e.fallbacks)),t}var Tr=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=Er(e[t]);return e}return Er(e)},onChangeValue:function(e,t,n){if(0===t.indexOf("--"))return e;var r=kr(t);return t===r?e:(n.prop(r,e),null)}}},Ir=er&&CSS?CSS.px:"px",Pr=er&&CSS?CSS.ms:"ms",Or=er&&CSS?CSS.percent:"%";function Nr(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},r={};for(var i in e)r[i]=e[i],r[i.replace(t,n)]=e[i];return r}var Rr=Nr({"animation-delay":Pr,"animation-duration":Pr,"background-position":Ir,"background-position-x":Ir,"background-position-y":Ir,"background-size":Ir,border:Ir,"border-bottom":Ir,"border-bottom-left-radius":Ir,"border-bottom-right-radius":Ir,"border-bottom-width":Ir,"border-left":Ir,"border-left-width":Ir,"border-radius":Ir,"border-right":Ir,"border-right-width":Ir,"border-top":Ir,"border-top-left-radius":Ir,"border-top-right-radius":Ir,"border-top-width":Ir,"border-width":Ir,"border-block":Ir,"border-block-end":Ir,"border-block-end-width":Ir,"border-block-start":Ir,"border-block-start-width":Ir,"border-block-width":Ir,"border-inline":Ir,"border-inline-end":Ir,"border-inline-end-width":Ir,"border-inline-start":Ir,"border-inline-start-width":Ir,"border-inline-width":Ir,"border-start-start-radius":Ir,"border-start-end-radius":Ir,"border-end-start-radius":Ir,"border-end-end-radius":Ir,margin:Ir,"margin-bottom":Ir,"margin-left":Ir,"margin-right":Ir,"margin-top":Ir,"margin-block":Ir,"margin-block-end":Ir,"margin-block-start":Ir,"margin-inline":Ir,"margin-inline-end":Ir,"margin-inline-start":Ir,padding:Ir,"padding-bottom":Ir,"padding-left":Ir,"padding-right":Ir,"padding-top":Ir,"padding-block":Ir,"padding-block-end":Ir,"padding-block-start":Ir,"padding-inline":Ir,"padding-inline-end":Ir,"padding-inline-start":Ir,"mask-position-x":Ir,"mask-position-y":Ir,"mask-size":Ir,height:Ir,width:Ir,"min-height":Ir,"max-height":Ir,"min-width":Ir,"max-width":Ir,bottom:Ir,left:Ir,top:Ir,right:Ir,inset:Ir,"inset-block":Ir,"inset-block-end":Ir,"inset-block-start":Ir,"inset-inline":Ir,"inset-inline-end":Ir,"inset-inline-start":Ir,"box-shadow":Ir,"text-shadow":Ir,"column-gap":Ir,"column-rule":Ir,"column-rule-width":Ir,"column-width":Ir,"font-size":Ir,"font-size-delta":Ir,"letter-spacing":Ir,"text-decoration-thickness":Ir,"text-indent":Ir,"text-stroke":Ir,"text-stroke-width":Ir,"word-spacing":Ir,motion:Ir,"motion-offset":Ir,outline:Ir,"outline-offset":Ir,"outline-width":Ir,perspective:Ir,"perspective-origin-x":Or,"perspective-origin-y":Or,"transform-origin":Or,"transform-origin-x":Or,"transform-origin-y":Or,"transform-origin-z":Or,"transition-delay":Pr,"transition-duration":Pr,"vertical-align":Ir,"flex-basis":Ir,"shape-margin":Ir,size:Ir,gap:Ir,grid:Ir,"grid-gap":Ir,"row-gap":Ir,"grid-row-gap":Ir,"grid-column-gap":Ir,"grid-template-rows":Ir,"grid-template-columns":Ir,"grid-auto-rows":Ir,"grid-auto-columns":Ir,"box-shadow-x":Ir,"box-shadow-y":Ir,"box-shadow-blur":Ir,"box-shadow-spread":Ir,"font-line-height":Ir,"text-shadow-x":Ir,"text-shadow-y":Ir,"text-shadow-blur":Ir});function Ar(e,t,n){if(null==t)return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]=Ar(e,t[r],n);else if("object"==typeof t)if("fallbacks"===e)for(var i in t)t[i]=Ar(i,t[i],n);else for(var o in t)t[o]=Ar(e+"-"+o,t[o],n);else if("number"==typeof t&&!1===isNaN(t)){var a=n[e]||Rr[e];return!a||0===t&&a===Ir?t.toString():"function"==typeof a?a(t).toString():""+t+a}return t}var Dr=function(e){void 0===e&&(e={});var t=Nr(e);return{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var r in e)e[r]=Ar(r,e[r],t);return e},onChangeValue:function(e,n){return Ar(n,e,t)}}},Vr=n(31);var Mr=n(53),Fr=n(33);function Lr(e){return function(e){if(Array.isArray(e))return Object(Vr.a)(e)}(e)||Object(Mr.a)(e)||Object(Fr.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var zr="",jr="",qr="",$r="",Br=Bt&&"ontouchstart"in document.documentElement;if(Bt){var Ur={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},Wr=document.createElement("p").style;for(var Hr in Ur)if(Hr+"Transform"in Wr){zr=Hr,jr=Ur[Hr];break}"Webkit"===zr&&"msHyphens"in Wr&&(zr="ms",jr=Ur.ms,$r="edge"),"Webkit"===zr&&"-apple-trailing-word"in Wr&&(qr="apple")}var Qr=zr,Gr=jr,Kr=qr,Jr=$r,Xr=Br;var Yr={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===Qr?"-webkit-"+e:Gr+e)}},Zr={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===Qr?Gr+"print-"+e:e)}},ei=/[-\s]+(.)?/g;function ti(e,t){return t?t.toUpperCase():""}function ni(e){return e.replace(ei,ti)}function ri(e){return ni("-"+e)}var ii,oi={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===Qr){if(ni("mask-image")in t)return e;if(Qr+ri("mask-image")in t)return Gr+e}return e}},ai={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==Kr||Xr?e:Gr+e)}},si={noPrefill:["transform"],supportedProperty:function(e,t,n){return"transform"===e&&(n.transform?e:Gr+e)}},li={noPrefill:["transition"],supportedProperty:function(e,t,n){return"transition"===e&&(n.transition?e:Gr+e)}},ui={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===Qr||"ms"===Qr&&"edge"!==Jr?Gr+e:e)}},ci={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===Qr||"ms"===Qr||"apple"===Kr?Gr+e:e)}},pi={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===Qr?"WebkitColumn"+ri(e)in t&&Gr+"column-"+e:"Moz"===Qr&&("page"+ri(e)in t&&"page-"+e))}},di={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===Qr)return e;var n=e.replace("-inline","");return Qr+ri(n)in t&&Gr+n}},hi={supportedProperty:function(e,t){return ni(e)in t&&e}},fi={supportedProperty:function(e,t){var n=ri(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:Qr+n in t?Gr+e:"Webkit"!==Qr&&"Webkit"+n in t&&"-webkit-"+e}},mi={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===Qr?""+Gr+e:e)}},gi={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===Qr?Gr+"scroll-chaining":e)}},yi={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},vi={supportedProperty:function(e,t){var n=yi[e];return!!n&&(Qr+ri(n)in t&&Gr+n)}},bi={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},xi=Object.keys(bi),wi=function(e){return Gr+e},_i=[Yr,Zr,oi,ai,si,li,ui,ci,pi,di,hi,fi,mi,gi,vi,{supportedProperty:function(e,t,n){var r=n.multiple;if(xi.indexOf(e)>-1){var i=bi[e];if(!Array.isArray(i))return Qr+ri(i)in t&&Gr+i;if(!r)return!1;for(var o=0;o<i.length;o++)if(!(Qr+ri(i[0])in t))return!1;return i.map(wi)}return!1}}],Ci=_i.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),Si=_i.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,Lr(t.noPrefill)),e}),[]),ki={};if(Bt){ii=document.createElement("p");var Ei=window.getComputedStyle(document.documentElement,"");for(var Ti in Ei)isNaN(Ti)||(ki[Ei[Ti]]=Ei[Ti]);Si.forEach((function(e){return delete ki[e]}))}function Ii(e,t){if(void 0===t&&(t={}),!ii)return e;if(null!=ki[e])return ki[e];"transition"!==e&&"transform"!==e||(t[e]=e in ii.style);for(var n=0;n<Ci.length&&(ki[e]=Ci[n](e,ii.style,t),!ki[e]);n++);try{ii.style[e]=""}catch(e){return!1}return ki[e]}var Pi,Oi={},Ni={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},Ri=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function Ai(e,t,n){if("var"===t)return"var";if("all"===t)return"all";if("all"===n)return", all";var r=t?Ii(t):", "+Ii(n);return r||(t||n)}function Di(e,t){var n=t;if(!Pi||"content"===e)return t;if("string"!=typeof n||!isNaN(parseInt(n,10)))return n;var r=e+n;if(null!=Oi[r])return Oi[r];try{Pi.style[e]=n}catch(e){return Oi[r]=!1,!1}if(Ni[e])n=n.replace(Ri,Ai);else if(""===Pi.style[e]&&("-ms-flex"===(n=Gr+n)&&(Pi.style[e]="-ms-flexbox"),Pi.style[e]=n,""===Pi.style[e]))return Oi[r]=!1,!1;return Pi.style[e]="",Oi[r]=n,Oi[r]}Bt&&(Pi=document.createElement("p"));var Vi=function(){function e(t){for(var n in t){var r=t[n];if("fallbacks"===n&&Array.isArray(r))t[n]=r.map(e);else{var i=!1,o=Ii(n);o&&o!==n&&(i=!0);var a=!1,s=Di(o,Jt(r));s&&s!==r&&(a=!0),(i||a)&&(i&&delete t[n],t[o||n]=s||r)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at="-"===(n=t.at)[1]||"ms"===Qr?n:"@"+Gr+"keyframes"+n.substr(10)}var n},onProcessStyle:function(t,n){return"style"!==n.type?t:e(t)},onChangeValue:function(e,t){return Di(t,Jt(e))||e}}};var Mi=function(){var e=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length};return{onProcessStyle:function(t,n){if("style"!==n.type)return t;for(var r={},i=Object.keys(t).sort(e),o=0;o<i.length;o++)r[i[o]]=t[i[o]];return r}}};function Fi(){return{plugins:[cr(),gr(),xr(),Tr(),Dr(),"undefined"==typeof window?null:Vi(),Mi()]}}var Li=Zn(Fi()),zi={disableGeneration:!1,generateClassName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableGlobal,n=void 0!==t&&t,r=e.productionPrefix,i=void 0===r?"jss":r,o=e.seed,a=void 0===o?"":o,s=""===a?"":"".concat(a,"-"),l=0,u=function(){return l+=1};return function(e,t){var r=t.options.name;if(r&&0===r.indexOf("Mui")&&!t.options.link&&!n){if(-1!==ar.indexOf(e.key))return"Mui-".concat(e.key);var o="".concat(s).concat(r,"-").concat(e.key);return t.options.theme[or]&&""===a?"".concat(o,"-").concat(u()):o}return"".concat(s).concat(i).concat(u())}}(),jss:Li,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},ji=o.a.createContext(zi);var qi=-1e9;function $i(){return qi+=1}function Bi(e){return(Bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ui(e){return e&&"object"===Bi(e)&&e.constructor===Object}function Wi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?m({},e):e;return Ui(e)&&Ui(t)&&Object.keys(t).forEach((function(i){"__proto__"!==i&&(Ui(t[i])&&i in e?r[i]=Wi(e[i],t[i],n):r[i]=t[i])})),r}function Hi(e){var t="function"==typeof e;return{create:function(n,r){var i;try{i=t?e(n):e}catch(e){throw e}if(!r||!n.overrides||!n.overrides[r])return i;var o=n.overrides[r],a=m({},i);return Object.keys(o).forEach((function(e){a[e]=Wi(a[e],o[e])})),a},options:{}}}var Qi={};function Gi(e,t,n){var r=e.state;if(e.stylesOptions.disableGeneration)return t||{};r.cacheClasses||(r.cacheClasses={value:null,lastProp:null,lastJSS:{}});var i=!1;return r.classes!==r.cacheClasses.lastJSS&&(r.cacheClasses.lastJSS=r.classes,i=!0),t!==r.cacheClasses.lastProp&&(r.cacheClasses.lastProp=t,i=!0),i&&(r.cacheClasses.value=tr({baseClasses:r.cacheClasses.lastJSS,newClasses:t,Component:n})),r.cacheClasses.value}function Ki(e,t){var n=e.state,r=e.theme,i=e.stylesOptions,o=e.stylesCreator,a=e.name;if(!i.disableGeneration){var s=nr.get(i.sheetsManager,o,r);s||(s={refs:0,staticSheet:null,dynamicStyles:null},nr.set(i.sheetsManager,o,r,s));var l=m({},o.options,i,{theme:r,flip:"boolean"==typeof i.flip?i.flip:"rtl"===r.direction});l.generateId=l.serverGenerateClassName||l.generateClassName;var u=i.sheetsRegistry;if(0===s.refs){var c;i.sheetsCache&&(c=nr.get(i.sheetsCache,o,r));var p=o.create(r,a);c||((c=i.jss.createStyleSheet(p,m({link:!1},l))).attach(),i.sheetsCache&&nr.set(i.sheetsCache,o,r,c)),u&&u.add(c),s.staticSheet=c,s.dynamicStyles=function e(t){var n=null;for(var r in t){var i=t[r],o=typeof i;if("function"===o)n||(n={}),n[r]=i;else if("object"===o&&null!==i&&!Array.isArray(i)){var a=e(i);a&&(n||(n={}),n[r]=a)}}return n}(p)}if(s.dynamicStyles){var d=i.jss.createStyleSheet(s.dynamicStyles,m({link:!0},l));d.update(t),d.attach(),n.dynamicSheet=d,n.classes=tr({baseClasses:s.staticSheet.classes,newClasses:d.classes}),u&&u.add(d)}else n.classes=s.staticSheet.classes;s.refs+=1}}function Ji(e,t){var n=e.state;n.dynamicSheet&&n.dynamicSheet.update(t)}function Xi(e){var t=e.state,n=e.theme,r=e.stylesOptions,i=e.stylesCreator;if(!r.disableGeneration){var o=nr.get(r.sheetsManager,i,n);o.refs-=1;var a=r.sheetsRegistry;0===o.refs&&(nr.delete(r.sheetsManager,i,n),r.jss.removeStyleSheet(o.staticSheet),a&&a.remove(o.staticSheet)),t.dynamicSheet&&(r.jss.removeStyleSheet(t.dynamicSheet),a&&a.remove(t.dynamicSheet))}}function Yi(e,t){var n,r=o.a.useRef([]),i=o.a.useMemo((function(){return{}}),t);r.current!==i&&(r.current=i,n=e()),o.a.useEffect((function(){return function(){n&&n()}}),[i])}function Zi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.name,r=t.classNamePrefix,i=t.Component,a=t.defaultTheme,s=void 0===a?Qi:a,l=qt(t,["name","classNamePrefix","Component","defaultTheme"]),u=Hi(e),c=n||r||"makeStyles";u.options={index:$i(),name:n,meta:c,classNamePrefix:c};var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ir()||s,r=m({},o.a.useContext(ji),l),a=o.a.useRef(),c=o.a.useRef();Yi((function(){var i={name:n,state:{},stylesCreator:u,stylesOptions:r,theme:t};return Ki(i,e),c.current=!1,a.current=i,function(){Xi(i)}}),[t,u]),o.a.useEffect((function(){c.current&&Ji(a.current,e),c.current=!0}));var p=Gi(a.current,e.classes,i);return p};return p}var eo=["xs","sm","md","lg","xl"];function to(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,r=e.unit,i=void 0===r?"px":r,o=e.step,a=void 0===o?5:o,s=qt(e,["values","unit","step"]);function l(e){var t="number"==typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(i,")")}function u(e,t){var r=eo.indexOf(t);return r===eo.length-1?l(e):"@media (min-width:".concat("number"==typeof n[e]?n[e]:e).concat(i,") and ")+"(max-width:".concat((-1!==r&&"number"==typeof n[eo[r+1]]?n[eo[r+1]]:t)-a/100).concat(i,")")}return m({keys:eo,values:n,up:l,down:function(e){var t=eo.indexOf(e)+1,r=n[eo[t]];return t===eo.length?l("xs"):"@media (max-width:".concat(("number"==typeof r&&t>0?r:e)-a/100).concat(i,")")},between:u,only:function(e){return u(e,e)},width:function(e){return n[e]}},s)}function no(e,t,n){var r;return m({gutters:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.warn(["Material-UI: theme.mixins.gutters() is deprecated.","You can use the source of the mixin directly:","\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n      },\n      "].join("\n")),m({paddingLeft:t(2),paddingRight:t(2)},n,R({},e.up("sm"),m({paddingLeft:t(3),paddingRight:t(3)},n[e.up("sm")])))},toolbar:(r={minHeight:56},R(r,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),R(r,e.up("sm"),{minHeight:64}),r)},n)}function ro(e){for(var t="https://material-ui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified Material-UI error #"+e+"; visit "+t+" for the full message."}var io={black:"#000",white:"#fff"},oo={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},ao={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},so={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},lo={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},uo={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},co={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},po={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function ho(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function fo(e){if(e.type)return e;if("#"===e.charAt(0))return fo(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla"].indexOf(n))throw new Error(ro(3,e));var r=e.substring(t+1,e.length-1).split(",");return{type:n,values:r=r.map((function(e){return parseFloat(e)}))}}function mo(e){var t=e.type,n=e.values;return-1!==t.indexOf("rgb")?n=n.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(t,"(").concat(n.join(", "),")")}function go(e){var t="hsl"===(e=fo(e)).type?fo(function(e){var t=(e=fo(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-o*Math.max(Math.min(t-3,9-t,1),-1)},s="rgb",l=[Math.round(255*a(0)),Math.round(255*a(8)),Math.round(255*a(4))];return"hsla"===e.type&&(s+="a",l.push(t[3])),mo({type:s,values:l})}(e)).values:e.values;return t=t.map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function yo(e,t){return e=fo(e),t=ho(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,mo(e)}function vo(e,t){if(e=fo(e),t=ho(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return mo(e)}function bo(e,t){if(e=fo(e),t=ho(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return mo(e)}var xo={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:io.white,default:oo[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},wo={text:{primary:io.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:oo[800],default:"#303030"},action:{active:io.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function _o(e,t,n,r){var i=r.light||r,o=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=bo(e.main,i):"dark"===t&&(e.dark=vo(e.main,o)))}function Co(e){var t=e.primary,n=void 0===t?{light:ao[300],main:ao[500],dark:ao[700]}:t,r=e.secondary,i=void 0===r?{light:so.A200,main:so.A400,dark:so.A700}:r,o=e.error,a=void 0===o?{light:lo[300],main:lo[500],dark:lo[700]}:o,s=e.warning,l=void 0===s?{light:uo[300],main:uo[500],dark:uo[700]}:s,u=e.info,c=void 0===u?{light:co[300],main:co[500],dark:co[700]}:u,p=e.success,d=void 0===p?{light:po[300],main:po[500],dark:po[700]}:p,h=e.type,f=void 0===h?"light":h,g=e.contrastThreshold,y=void 0===g?3:g,v=e.tonalOffset,b=void 0===v?.2:v,x=qt(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function w(e){return function(e,t){var n=go(e),r=go(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,wo.text.primary)>=y?wo.text.primary:xo.text.primary}var _=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(e=m({},e)).main&&e[t]&&(e.main=e[t]),!e.main)throw new Error(ro(4,t));if("string"!=typeof e.main)throw new Error(ro(5,JSON.stringify(e.main)));return _o(e,"light",n,b),_o(e,"dark",r,b),e.contrastText||(e.contrastText=w(e.main)),e},C={dark:wo,light:xo};return Wi(m({common:io,type:f,primary:_(n),secondary:_(i,"A400","A200","A700"),error:_(a),warning:_(l),info:_(c),success:_(d),grey:oo,contrastThreshold:y,getContrastText:w,augmentColor:_,tonalOffset:b},C[f]),x)}function So(e){return Math.round(1e5*e)/1e5}function ko(e){return So(e)}var Eo={textTransform:"uppercase"};function To(e,t){var n="function"==typeof t?t(e):t,r=n.fontFamily,i=void 0===r?'"Roboto", "Helvetica", "Arial", sans-serif':r,o=n.fontSize,a=void 0===o?14:o,s=n.fontWeightLight,l=void 0===s?300:s,u=n.fontWeightRegular,c=void 0===u?400:u,p=n.fontWeightMedium,d=void 0===p?500:p,h=n.fontWeightBold,f=void 0===h?700:h,g=n.htmlFontSize,y=void 0===g?16:g,v=n.allVariants,b=n.pxToRem,x=qt(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]);var w=a/14,_=b||function(e){return"".concat(e/y*w,"rem")},C=function(e,t,n,r,o){return m({fontFamily:i,fontWeight:e,fontSize:_(t),lineHeight:n},'"Roboto", "Helvetica", "Arial", sans-serif'===i?{letterSpacing:"".concat(So(r/t),"em")}:{},o,v)},S={h1:C(l,96,1.167,-1.5),h2:C(l,60,1.2,-.5),h3:C(c,48,1.167,0),h4:C(c,34,1.235,.25),h5:C(c,24,1.334,0),h6:C(d,20,1.6,.15),subtitle1:C(c,16,1.75,.15),subtitle2:C(d,14,1.57,.1),body1:C(c,16,1.5,.15),body2:C(c,14,1.43,.15),button:C(d,14,1.75,.4,Eo),caption:C(c,12,1.66,.4),overline:C(c,12,2.66,1,Eo)};return Wi(m({htmlFontSize:y,pxToRem:_,round:ko,fontFamily:i,fontSize:a,fontWeightLight:l,fontWeightRegular:c,fontWeightMedium:d,fontWeightBold:f},S),x,{clone:!1})}function Io(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var Po=["none",Io(0,2,1,-1,0,1,1,0,0,1,3,0),Io(0,3,1,-2,0,2,2,0,0,1,5,0),Io(0,3,3,-2,0,3,4,0,0,1,8,0),Io(0,2,4,-1,0,4,5,0,0,1,10,0),Io(0,3,5,-1,0,5,8,0,0,1,14,0),Io(0,3,5,-1,0,6,10,0,0,1,18,0),Io(0,4,5,-2,0,7,10,1,0,2,16,1),Io(0,5,5,-3,0,8,10,1,0,3,14,2),Io(0,5,6,-3,0,9,12,1,0,3,16,2),Io(0,6,6,-3,0,10,14,1,0,4,18,3),Io(0,6,7,-4,0,11,15,1,0,4,20,3),Io(0,7,8,-4,0,12,17,2,0,5,22,4),Io(0,7,8,-4,0,13,19,2,0,5,24,4),Io(0,7,9,-4,0,14,21,2,0,5,26,4),Io(0,8,9,-5,0,15,22,2,0,6,28,5),Io(0,8,10,-5,0,16,24,2,0,6,30,5),Io(0,8,11,-5,0,17,26,2,0,6,32,5),Io(0,9,11,-5,0,18,28,2,0,7,34,6),Io(0,9,12,-6,0,19,29,2,0,7,36,6),Io(0,10,13,-6,0,20,31,3,0,8,38,7),Io(0,10,13,-6,0,21,33,3,0,8,40,7),Io(0,10,14,-6,0,22,35,3,0,8,42,7),Io(0,11,14,-7,0,23,36,3,0,9,44,8),Io(0,11,15,-7,0,24,38,3,0,9,46,8)],Oo={borderRadius:4},No=n(54);var Ro=n(55);function Ao(e,t){return Object(No.a)(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||Object(Fr.a)(e,t)||Object(Ro.a)()}var Do=function(e,t){return t?Wi(e,t,{clone:!1}):e},Vo={xs:0,sm:600,md:960,lg:1280,xl:1920},Mo={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(Vo[e],"px)")}};var Fo,Lo,zo={m:"margin",p:"padding"},jo={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},qo={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},$o=(Fo=function(e){if(e.length>2){if(!qo[e])return[e];e=qo[e]}var t=Ao(e.split(""),2),n=t[0],r=t[1],i=zo[n],o=jo[r]||"";return Array.isArray(o)?o.map((function(e){return i+e})):[i+o]},Lo={},function(e){return void 0===Lo[e]&&(Lo[e]=Fo(e)),Lo[e]}),Bo=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function Uo(e){var t=e.spacing||8;return"number"==typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"==typeof t?t:function(){}}function Wo(e,t){return function(n){return e.reduce((function(e,r){return e[r]=function(e,t){if("string"==typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"==typeof n?-n:"-".concat(n)}(t,n),e}),{})}}function Ho(e){var t=Uo(e.theme);return Object.keys(e).map((function(n){if(-1===Bo.indexOf(n))return null;var r=Wo($o(n),t),i=e[n];return function(e,t,n){if(Array.isArray(t)){var r=e.theme.breakpoints||Mo;return t.reduce((function(e,i,o){return e[r.up(r.keys[o])]=n(t[o]),e}),{})}if("object"===Bi(t)){var i=e.theme.breakpoints||Mo;return Object.keys(t).reduce((function(e,r){return e[i.up(r)]=n(t[r]),e}),{})}return n(t)}(e,i,r)})).reduce(Do,{})}Ho.propTypes={},Ho.filterProps=Bo;function Qo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=Uo({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0===n.length?t(1):1===n.length?t(n[0]):n.map((function(e){if("string"==typeof e)return e;var n=t(e);return"number"==typeof n?"".concat(n,"px"):n})).join(" ")};return Object.defineProperty(n,"unit",{get:function(){return e}}),n.mui=!0,n}var Go={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Ko={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Jo(e){return"".concat(Math.round(e),"ms")}var Xo={easing:Go,duration:Ko,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,r=void 0===n?Ko.standard:n,i=t.easing,o=void 0===i?Go.easeInOut:i,a=t.delay,s=void 0===a?0:a;qt(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"==typeof r?r:Jo(r)," ").concat(o," ").concat("string"==typeof s?s:Jo(s))})).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}},Yo={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Zo(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.mixins,i=void 0===r?{}:r,o=e.palette,a=void 0===o?{}:o,s=e.spacing,l=e.typography,u=void 0===l?{}:l,c=qt(e,["breakpoints","mixins","palette","spacing","typography"]),p=Co(a),d=to(n),h=Qo(s),f=Wi({breakpoints:d,direction:"ltr",mixins:no(d,h,i),overrides:{},palette:p,props:{},shadows:Po,typography:To(p,u),spacing:h,shape:Oo,transitions:Xo,zIndex:Yo},c),m=arguments.length,g=new Array(m>1?m-1:0),y=1;y<m;y++)g[y-1]=arguments[y];return f=g.reduce((function(e,t){return Wi(e,t)}),f)}var ea=Zo();var ta=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Zi(e,m({defaultTheme:ea},t))},na=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("input",{checked:e.isOn,onChange:e.handler,id:e.id,className:"react-switch-checkbox",type:"checkbox"}),o.a.createElement("label",{style:{backgroundColor:e.isOn&&"#06D6A0"},className:"react-switch-label",htmlFor:e.id},o.a.createElement("span",{className:"react-switch-button"})))};function ra(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=ra(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var ia=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=ra(e))&&(r&&(r+=" "),r+=t);return r};function oa(e){var t=e.theme,n=e.name,r=e.props;if(!t||!t.props||!t.props[n])return r;var i,o=t.props[n];for(i in o)void 0===r[i]&&(r[i]=o[i]);return r}var aa=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=t.defaultTheme,i=t.withTheme,a=void 0!==i&&i,s=t.name,l=qt(t,["defaultTheme","withTheme","name"]);var u=s,c=Zi(e,m({defaultTheme:r,Component:n,name:s||n.displayName,classNamePrefix:u},l)),p=o.a.forwardRef((function(e,t){e.classes;var i,l=e.innerRef,u=qt(e,["classes","innerRef"]),p=c(m({},n.defaultProps,e)),d=u;return("string"==typeof s||a)&&(i=ir()||r,s&&(d=oa({theme:i,name:s,props:u})),a&&!d.theme&&(d.theme=i)),o.a.createElement(n,m({ref:l||t,classes:p},d))}));return v()(p,n),p}};var sa=function(e,t){return aa(e,m({defaultTheme:ea},t))};function la(e){if("string"!=typeof e)throw new Error(ro(7));return e.charAt(0).toUpperCase()+e.slice(1)}var ua={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p"},ca=i.forwardRef((function(e,t){var n=e.align,r=void 0===n?"inherit":n,o=e.classes,a=e.className,s=e.color,l=void 0===s?"initial":s,u=e.component,c=e.display,p=void 0===c?"initial":c,d=e.gutterBottom,h=void 0!==d&&d,f=e.noWrap,g=void 0!==f&&f,y=e.paragraph,v=void 0!==y&&y,b=e.variant,x=void 0===b?"body1":b,w=e.variantMapping,_=void 0===w?ua:w,C=qt(e,["align","classes","className","color","component","display","gutterBottom","noWrap","paragraph","variant","variantMapping"]),S=u||(v?"p":_[x]||ua[x])||"span";return i.createElement(S,m({className:ia(o.root,a,"inherit"!==x&&o[x],"initial"!==l&&o["color".concat(la(l))],g&&o.noWrap,h&&o.gutterBottom,v&&o.paragraph,"inherit"!==r&&o["align".concat(la(r))],"initial"!==p&&o["display".concat(la(p))]),ref:t},C))})),pa=sa((function(e){return{root:{margin:0},body2:e.typography.body2,body1:e.typography.body1,caption:e.typography.caption,button:e.typography.button,h1:e.typography.h1,h2:e.typography.h2,h3:e.typography.h3,h4:e.typography.h4,h5:e.typography.h5,h6:e.typography.h6,subtitle1:e.typography.subtitle1,subtitle2:e.typography.subtitle2,overline:e.typography.overline,srOnly:{position:"absolute",height:1,width:1,overflow:"hidden"},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right"},alignJustify:{textAlign:"justify"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gutterBottom:{marginBottom:"0.35em"},paragraph:{marginBottom:16},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorTextPrimary:{color:e.palette.text.primary},colorTextSecondary:{color:e.palette.text.secondary},colorError:{color:e.palette.error.main},displayInline:{display:"inline"},displayBlock:{display:"block"}}}),{name:"MuiTypography"})(ca);var da=!0,ha=!1,fa=null,ma={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function ga(e){e.metaKey||e.altKey||e.ctrlKey||(da=!0)}function ya(){da=!1}function va(){"hidden"===this.visibilityState&&ha&&(da=!0)}function ba(e){var t,n,r,i=e.target;try{return i.matches(":focus-visible")}catch(e){}return da||(n=(t=i).type,!("INPUT"!==(r=t.tagName)||!ma[n]||t.readOnly)||"TEXTAREA"===r&&!t.readOnly||!!t.isContentEditable)}function xa(){ha=!0,window.clearTimeout(fa),fa=window.setTimeout((function(){ha=!1}),100)}function wa(){return{isFocusVisible:ba,onBlurVisible:xa,ref:i.useCallback((function(e){var t,n=a.findDOMNode(e);null!=n&&((t=n.ownerDocument).addEventListener("keydown",ga,!0),t.addEventListener("mousedown",ya,!0),t.addEventListener("pointerdown",ya,!0),t.addEventListener("touchstart",ya,!0),t.addEventListener("visibilitychange",va,!0))}),[])}}function _a(e){return e&&e.ownerDocument||document}var Ca="undefined"!=typeof window?i.useLayoutEffect:i.useEffect;function Sa(e){var t=i.useRef(e);return Ca((function(){t.current=e})),i.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}function ka(e,t){"function"==typeof e?e(t):e&&(e.current=t)}function Ea(e,t){return i.useMemo((function(){return null==e&&null==t?null:function(n){ka(e,n),ka(t,n)}}),[e,t])}var Ta=sa((function(e){return{thumb:{"&$open":{"& $offset":{transform:"scale(1) translateY(-10px)"}}},open:{},offset:m({zIndex:1},e.typography.body2,{fontSize:e.typography.pxToRem(12),lineHeight:1.2,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),top:-34,transformOrigin:"bottom center",transform:"scale(0)",position:"absolute"}),circle:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:"50% 50% 50% 0",backgroundColor:"currentColor",transform:"rotate(-45deg)"},label:{color:e.palette.primary.contrastText,transform:"rotate(45deg)"}}}),{name:"PrivateValueLabel"})((function(e){var t=e.children,n=e.classes,r=e.className,o=e.open,a=e.value,s=e.valueLabelDisplay;return"off"===s?t:i.cloneElement(t,{className:ia(t.props.className,(o||"on"===s)&&n.open,n.thumb)},i.createElement("span",{className:ia(n.offset,r)},i.createElement("span",{className:n.circle},i.createElement("span",{className:n.label},a))))}));function Ia(e,t){return e-t}function Pa(e,t,n){return Math.min(Math.max(t,e),n)}function Oa(e,t){return e.reduce((function(e,n,r){var i=Math.abs(t-n);return null===e||i<e.distance||i===e.distance?{distance:i,index:r}:e}),null).index}function Na(e,t){if(void 0!==t.current&&e.changedTouches){for(var n=0;n<e.changedTouches.length;n+=1){var r=e.changedTouches[n];if(r.identifier===t.current)return{x:r.clientX,y:r.clientY}}return!1}return{x:e.clientX,y:e.clientY}}function Ra(e,t,n){return 100*(e-t)/(n-t)}function Aa(e,t,n){var r=Math.round((e-n)/t)*t+n;return Number(r.toFixed(function(e){if(Math.abs(e)<1){var t=e.toExponential().split("e-"),n=t[0].split(".")[1];return(n?n.length:0)+parseInt(t[1],10)}var r=e.toString().split(".")[1];return r?r.length:0}(t)))}function Da(e){var t=e.values,n=e.source,r=e.newValue,i=e.index;if(t[i]===r)return n;var o=t.slice();return o[i]=r,o}function Va(e){var t=e.sliderRef,n=e.activeIndex,r=e.setActive;t.current.contains(document.activeElement)&&Number(document.activeElement.getAttribute("data-index"))===n||t.current.querySelector('[role="slider"][data-index="'.concat(n,'"]')).focus(),r&&r(n)}var Ma={horizontal:{offset:function(e){return{left:"".concat(e,"%")}},leap:function(e){return{width:"".concat(e,"%")}}},"horizontal-reverse":{offset:function(e){return{right:"".concat(e,"%")}},leap:function(e){return{width:"".concat(e,"%")}}},vertical:{offset:function(e){return{bottom:"".concat(e,"%")}},leap:function(e){return{height:"".concat(e,"%")}}}},Fa=function(e){return e},La=i.forwardRef((function(e,t){var n=e["aria-label"],r=e["aria-labelledby"],o=e["aria-valuetext"],a=e.classes,s=e.className,l=e.color,u=void 0===l?"primary":l,c=e.component,p=void 0===c?"span":c,d=e.defaultValue,h=e.disabled,f=void 0!==h&&h,g=e.getAriaLabel,y=e.getAriaValueText,v=e.marks,b=void 0!==v&&v,x=e.max,w=void 0===x?100:x,_=e.min,C=void 0===_?0:_,S=e.name,k=e.onChange,E=e.onChangeCommitted,T=e.onMouseDown,I=e.orientation,P=void 0===I?"horizontal":I,O=e.scale,N=void 0===O?Fa:O,R=e.step,A=void 0===R?1:R,D=e.ThumbComponent,V=void 0===D?"span":D,M=e.track,F=void 0===M?"normal":M,L=e.value,z=e.ValueLabelComponent,j=void 0===z?Ta:z,q=e.valueLabelDisplay,$=void 0===q?"off":q,B=e.valueLabelFormat,U=void 0===B?Fa:B,W=qt(e,["aria-label","aria-labelledby","aria-valuetext","classes","className","color","component","defaultValue","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","onMouseDown","orientation","scale","step","ThumbComponent","track","value","ValueLabelComponent","valueLabelDisplay","valueLabelFormat"]),H=ir()||ea,Q=i.useRef(),G=i.useState(-1),K=G[0],J=G[1],X=i.useState(-1),Y=X[0],Z=X[1],ee=Ao(function(e){var t=e.controlled,n=e.default,r=(e.name,e.state,i.useRef(void 0!==t).current),o=i.useState(n),a=o[0],s=o[1];return[r?t:a,i.useCallback((function(e){r||s(e)}),[])]}({controlled:L,default:d,name:"Slider"}),2),te=ee[0],ne=ee[1],re=Array.isArray(te),ie=re?te.slice().sort(Ia):[te];ie=ie.map((function(e){return Pa(e,C,w)}));var oe=!0===b&&null!==A?Lr(Array(Math.floor((w-C)/A)+1)).map((function(e,t){return{value:C+A*t}})):b||[],ae=wa(),se=ae.isFocusVisible,le=ae.onBlurVisible,ue=ae.ref,ce=i.useState(-1),pe=ce[0],de=ce[1],he=i.useRef(),fe=Ea(ue,he),me=Ea(t,fe),ge=Sa((function(e){var t=Number(e.currentTarget.getAttribute("data-index"));se(e)&&de(t),Z(t)})),ye=Sa((function(){-1!==pe&&(de(-1),le()),Z(-1)})),ve=Sa((function(e){var t=Number(e.currentTarget.getAttribute("data-index"));Z(t)})),be=Sa((function(){Z(-1)})),xe="rtl"===H.direction,we=Sa((function(e){var t,n=Number(e.currentTarget.getAttribute("data-index")),r=ie[n],i=(w-C)/10,o=oe.map((function(e){return e.value})),a=o.indexOf(r),s=xe?"ArrowLeft":"ArrowRight",l=xe?"ArrowRight":"ArrowLeft";switch(e.key){case"Home":t=C;break;case"End":t=w;break;case"PageUp":A&&(t=r+i);break;case"PageDown":A&&(t=r-i);break;case s:case"ArrowUp":t=A?r+A:o[a+1]||o[o.length-1];break;case l:case"ArrowDown":t=A?r-A:o[a-1]||o[0];break;default:return}if(e.preventDefault(),A&&(t=Aa(t,A,C)),t=Pa(t,C,w),re){var u=t;t=Da({values:ie,source:te,newValue:t,index:n}).sort(Ia),Va({sliderRef:he,activeIndex:t.indexOf(u)})}ne(t),de(n),k&&k(e,t),E&&E(e,t)})),_e=i.useRef(),Ce=P;xe&&"vertical"!==P&&(Ce+="-reverse");var Se=function(e){var t,n,r=e.finger,i=e.move,o=void 0!==i&&i,a=e.values,s=e.source,l=he.current.getBoundingClientRect(),u=l.width,c=l.height,p=l.bottom,d=l.left;if(t=0===Ce.indexOf("vertical")?(p-r.y)/c:(r.x-d)/u,-1!==Ce.indexOf("-reverse")&&(t=1-t),n=function(e,t,n){return(n-t)*e+t}(t,C,w),A)n=Aa(n,A,C);else{var h=oe.map((function(e){return e.value}));n=h[Oa(h,n)]}n=Pa(n,C,w);var f=0;if(re){var m=n;f=(n=Da({values:a,source:s,newValue:n,index:f=o?_e.current:Oa(a,n)}).sort(Ia)).indexOf(m),_e.current=f}return{newValue:n,activeIndex:f}},ke=Sa((function(e){var t=Na(e,Q);if(t){var n=Se({finger:t,move:!0,values:ie,source:te}),r=n.newValue,i=n.activeIndex;Va({sliderRef:he,activeIndex:i,setActive:J}),ne(r),k&&k(e,r)}})),Ee=Sa((function(e){var t=Na(e,Q);if(t){var n=Se({finger:t,values:ie,source:te}).newValue;J(-1),"touchend"===e.type&&Z(-1),E&&E(e,n),Q.current=void 0;var r=_a(he.current);r.removeEventListener("mousemove",ke),r.removeEventListener("mouseup",Ee),r.removeEventListener("touchmove",ke),r.removeEventListener("touchend",Ee)}})),Te=Sa((function(e){e.preventDefault();var t=e.changedTouches[0];null!=t&&(Q.current=t.identifier);var n=Na(e,Q),r=Se({finger:n,values:ie,source:te}),i=r.newValue,o=r.activeIndex;Va({sliderRef:he,activeIndex:o,setActive:J}),ne(i),k&&k(e,i);var a=_a(he.current);a.addEventListener("touchmove",ke),a.addEventListener("touchend",Ee)}));i.useEffect((function(){var e=he.current;e.addEventListener("touchstart",Te);var t=_a(e);return function(){e.removeEventListener("touchstart",Te),t.removeEventListener("mousemove",ke),t.removeEventListener("mouseup",Ee),t.removeEventListener("touchmove",ke),t.removeEventListener("touchend",Ee)}}),[Ee,ke,Te]);var Ie=Sa((function(e){T&&T(e),e.preventDefault();var t=Na(e,Q),n=Se({finger:t,values:ie,source:te}),r=n.newValue,i=n.activeIndex;Va({sliderRef:he,activeIndex:i,setActive:J}),ne(r),k&&k(e,r);var o=_a(he.current);o.addEventListener("mousemove",ke),o.addEventListener("mouseup",Ee)})),Pe=Ra(re?ie[0]:C,C,w),Oe=Ra(ie[ie.length-1],C,w)-Pe,Ne=m({},Ma[Ce].offset(Pe),Ma[Ce].leap(Oe));return i.createElement(p,m({ref:me,className:ia(a.root,a["color".concat(la(u))],s,f&&a.disabled,oe.length>0&&oe.some((function(e){return e.label}))&&a.marked,!1===F&&a.trackFalse,"vertical"===P&&a.vertical,"inverted"===F&&a.trackInverted),onMouseDown:Ie},W),i.createElement("span",{className:a.rail}),i.createElement("span",{className:a.track,style:Ne}),i.createElement("input",{value:ie.join(","),name:S,type:"hidden"}),oe.map((function(e,t){var n,r=Ra(e.value,C,w),o=Ma[Ce].offset(r);return n=!1===F?-1!==ie.indexOf(e.value):"normal"===F&&(re?e.value>=ie[0]&&e.value<=ie[ie.length-1]:e.value<=ie[0])||"inverted"===F&&(re?e.value<=ie[0]||e.value>=ie[ie.length-1]:e.value>=ie[0]),i.createElement(i.Fragment,{key:e.value},i.createElement("span",{style:o,"data-index":t,className:ia(a.mark,n&&a.markActive)}),null!=e.label?i.createElement("span",{"aria-hidden":!0,"data-index":t,style:o,className:ia(a.markLabel,n&&a.markLabelActive)},e.label):null)})),ie.map((function(e,t){var s=Ra(e,C,w),l=Ma[Ce].offset(s);return i.createElement(j,{key:t,valueLabelFormat:U,valueLabelDisplay:$,className:a.valueLabel,value:"function"==typeof U?U(N(e),t):U,index:t,open:Y===t||K===t||"on"===$,disabled:f},i.createElement(V,{className:ia(a.thumb,a["thumbColor".concat(la(u))],K===t&&a.active,f&&a.disabled,pe===t&&a.focusVisible),tabIndex:f?null:0,role:"slider",style:l,"data-index":t,"aria-label":g?g(t):n,"aria-labelledby":r,"aria-orientation":P,"aria-valuemax":N(w),"aria-valuemin":N(C),"aria-valuenow":N(e),"aria-valuetext":y?y(N(e),t):o,onKeyDown:we,onFocus:ge,onBlur:ye,onMouseOver:ve,onMouseLeave:be}))})))})),za=sa((function(e){return{root:{height:2,width:"100%",boxSizing:"content-box",padding:"13px 0",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:e.palette.primary.main,WebkitTapHighlightColor:"transparent","&$disabled":{pointerEvents:"none",cursor:"default",color:e.palette.grey[400]},"&$vertical":{width:2,height:"100%",padding:"0 13px"},"@media (pointer: coarse)":{padding:"20px 0","&$vertical":{padding:"0 20px"}},"@media print":{colorAdjust:"exact"}},colorPrimary:{},colorSecondary:{color:e.palette.secondary.main},marked:{marginBottom:20,"&$vertical":{marginBottom:"auto",marginRight:20}},vertical:{},disabled:{},rail:{display:"block",position:"absolute",width:"100%",height:2,borderRadius:1,backgroundColor:"currentColor",opacity:.38,"$vertical &":{height:"100%",width:2}},track:{display:"block",position:"absolute",height:2,borderRadius:1,backgroundColor:"currentColor","$vertical &":{width:2}},trackFalse:{"& $track":{display:"none"}},trackInverted:{"& $track":{backgroundColor:"light"===e.palette.type?bo(e.palette.primary.main,.62):vo(e.palette.primary.main,.5)},"& $rail":{opacity:1}},thumb:{position:"absolute",width:12,height:12,marginLeft:-6,marginTop:-5,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow"],{duration:e.transitions.duration.shortest}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",left:-15,top:-15,right:-15,bottom:-15},"&$focusVisible,&:hover":{boxShadow:"0px 0px 0px 8px ".concat(yo(e.palette.primary.main,.16)),"@media (hover: none)":{boxShadow:"none"}},"&$active":{boxShadow:"0px 0px 0px 14px ".concat(yo(e.palette.primary.main,.16))},"&$disabled":{width:8,height:8,marginLeft:-4,marginTop:-3,"&:hover":{boxShadow:"none"}},"$vertical &":{marginLeft:-5,marginBottom:-6},"$vertical &$disabled":{marginLeft:-3,marginBottom:-4}},thumbColorPrimary:{},thumbColorSecondary:{"&$focusVisible,&:hover":{boxShadow:"0px 0px 0px 8px ".concat(yo(e.palette.secondary.main,.16))},"&$active":{boxShadow:"0px 0px 0px 14px ".concat(yo(e.palette.secondary.main,.16))}},active:{},focusVisible:{},valueLabel:{left:"calc(-50% - 4px)"},mark:{position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},markActive:{backgroundColor:e.palette.background.paper,opacity:.8},markLabel:m({},e.typography.body2,{color:e.palette.text.secondary,position:"absolute",top:26,transform:"translateX(-50%)",whiteSpace:"nowrap","$vertical &":{top:"auto",left:26,transform:"translateY(50%)"},"@media (pointer: coarse)":{top:40,"$vertical &":{left:31}}}),markLabelActive:{color:e.palette.text.primary}}}),{name:"MuiSlider"})(La);function ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ja(Object(n),!0).forEach((function(t){he()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ja(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $a=ta((function(e){return{toolBar:{zIndex:20,right:0,top:"50px",backgroundColor:"white",position:"absolute",flexDirection:"col"},toggleSwitch:{flexDirection:"row"}}}));ue((function(e){return{controlParams:e.controlParams}}),(function(e){return{updateMask:function(e){return Ce.dispatch({type:"UPDATE_MASK",payload:e})},updateEye:function(e){return Ce.dispatch({type:"UPDATE_EYE",payload:e})},updateMouth:function(e){return Ce.dispatch({type:"UPDATE_MOUTH",payload:e})},updateNose:function(e){return Ce.dispatch({type:"UPDATE_NOSE",payload:e})},updateBar:function(e){return Ce.dispatch({type:"UPDATE_BAR",payload:e})}}}))((function(e){var t=$a(),n=e.controlParams,r=Object(i.useState)(n),a=jt()(r,2),s=a[0],l=a[1];return o.a.createElement("div",{className:t.toolBar},o.a.createElement("div",{className:t.toggleSwitch},o.a.createElement(pa,{style:{color:"black"}},"Occlusion mask"),o.a.createElement(na,{id:"mask",isOn:s.occlusion_mask,handler:function(){e.updateMask(!s.occlusion_mask),l(qa(qa({},s),{},{occlusion_mask:!s.occlusion_mask}))}})),o.a.createElement("div",{className:t.toggleSwitch},o.a.createElement(pa,{style:{color:"black"}},"Eyes"),o.a.createElement(na,{id:"eyes",isOn:s.feature_show.eyes.toggle,handler:function(){var t={toggle:!s.feature_show.eyes.toggle,sliderIndex:s.feature_show.eyes.sliderIndex};e.updateEye(t),l(qa(qa({},s),{},{feature_show:qa(qa({},s.feature_show),{},{eyes:t})}))}}),o.a.createElement(za,{id:"eyeSlider",defaultValue:s.feature_show.eyes.sliderIndex,step:1,marks:!0,min:0,max:10,valueLabelDisplay:"auto",onChange:function(t,n){console.log("value change",n);var r={toggle:s.feature_show.eyes.toggle,sliderIndex:n};e.updateEye(r),l(qa(qa({},s),{},{feature_show:qa(qa({},s.feature_show),{},{eyes:r})}))}})),o.a.createElement("div",{className:t.toggleSwitch},o.a.createElement(pa,{style:{color:"black"}},"Mouth"),o.a.createElement(na,{id:"mouth",isOn:s.feature_show.mouth.toggle,handler:function(){var t={toggle:!s.feature_show.mouth.toggle,sliderIndex:s.feature_show.mouth.sliderIndex};e.updateMouth(t),l(qa(qa({},s),{},{feature_show:qa(qa({},s.feature_show),{},{mouth:t})}))}}),o.a.createElement(za,{id:"mouthSlider",defaultValue:s.feature_show.mouth.sliderIndex,step:1,marks:!0,min:0,max:10,valueLabelDisplay:"auto",onChange:function(t,n){console.log("value change",n);var r={toggle:s.feature_show.mouth.toggle,sliderIndex:n};e.updateMouth(r),l(qa(qa({},s),{},{feature_show:qa(qa({},s.feature_show),{},{mouth:r})}))}})),o.a.createElement("div",{className:t.toggleSwitch},o.a.createElement(pa,{style:{color:"black"}},"Nose"),o.a.createElement(na,{id:"nose",isOn:s.feature_show.nose.toggle,handler:function(){var t={toggle:!s.feature_show.nose.toggle,sliderIndex:s.feature_show.nose.sliderIndex};e.updateNose(t),l(qa(qa({},s),{},{feature_show:qa(qa({},s.feature_show),{},{nose:t})}))}}),o.a.createElement(za,{id:"noseSlider",defaultValue:s.feature_show.nose.sliderIndex,step:1,marks:!0,min:0,max:10,valueLabelDisplay:"auto",onChange:function(t,n){console.log("value change",n);var r={toggle:s.feature_show.nose.toggle,sliderIndex:n};e.updateNose(r),l(qa(qa({},s),{},{feature_show:qa(qa({},s.feature_show),{},{nose:r})}))}})),o.a.createElement("div",{className:t.toggleSwitch},o.a.createElement(pa,{style:{color:"black"}},"bar"),o.a.createElement(na,{id:"bar",isOn:s.feature_show.bar.toggle,handler:function(){var t=qa(qa({},s.feature_show.bar),{},{toggle:!s.feature_show.bar.toggle});e.updateBar(t),l(qa(qa({},s),{},{feature_show:qa(qa({},s.feature_show),{},{bar:t})}))}}),o.a.createElement(pa,{style:{color:"black"}},"direction"),o.a.createElement(na,{id:"barDirection",isOn:s.feature_show.bar.direction,handler:function(){var t=qa(qa({},s.feature_show.bar),{},{direction:!s.feature_show.bar.direction});e.updateBar(t),l(qa(qa({},s),{},{feature_show:qa(qa({},s.feature_show),{},{bar:t})}))}}),o.a.createElement(za,{id:"barSlider",defaultValue:s.feature_show.bar.sliderIndex,step:1,marks:!0,min:0,max:10,valueLabelDisplay:"auto",onChange:function(t,n){console.log("value change",n);var r=qa(qa({},s.feature_show.bar),{},{sliderIndex:n});e.updateBar(r),l(qa(qa({},s),{},{feature_show:qa(qa({},s.feature_show),{},{bar:r})}))}}),o.a.createElement(za,{id:"barPositionSlider",defaultValue:s.feature_show.bar.position,step:1,marks:!0,min:0,max:10,valueLabelDisplay:"auto",onChange:function(t,n){var r=qa(qa({},s.feature_show.bar),{},{position:n});e.updateBar(r),l(qa(qa({},s),{},{feature_show:qa(qa({},s.feature_show),{},{bar:r})}))}})))}));function Ba(e){var t,n,r=e.end,i=parseInt(e.time_diff/60),a=e.time_diff-60*i;t=i<10?"0"+i.toString():i.toString(),n=a<10?"0"+a.toString():a.toString();var s="";return s=r?"TIME'S UP":t+":"+n,o.a.createElement("div",{className:"clock"},o.a.createElement("text",null," ",s," "))}n(85);function Ua(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_t()(e);if(t){var i=_t()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xt()(this,n)}}var Wa=function(e){vt()(n,e);var t=Ua(n);function n(){return dt()(this,n),t.apply(this,arguments)}return ft()(n,[{key:"render",value:function(){var e=this.props,t=e.visible,n=(e.title,e.children),r=(e.onOk,e.onCancel);return o.a.createElement("div",{className:"gy-modalContainer",style:t?{zIndex:2e3,opacity:1}:{zIndex:-1,opacity:0}},o.a.createElement("div",{className:"mask",onClick:r}),o.a.createElement("div",{className:"innerContent",style:t?{width:"600px",height:"200px",backgroundColor:"#1ab394",textAlign:"center"}:{width:"0px",height:"0px"}},o.a.createElement("div",{className:"innerContent-center"},n)))}}]),n}(i.Component);function Ha(e){var t=null!=e.userRole?e.userRole:"";return o.a.createElement("div",{className:"topic intro-topic"},o.a.createElement("p",{className:"topic_head"},"YOUR FACE IS MUTED"),o.a.createElement("p",{className:"topic_text"},o.a.createElement("i",null,"Your Face is Muted")," explores how a lack of non-verbal cues",o.a.createElement("br",null),"affects critical conversations and our ability to empathise.",o.a.createElement("br",null),o.a.createElement("br",null),"This is a two person experience. Please take a seat and wait",o.a.createElement("br",null),"for your conversation partner."),o.a.createElement("p",{className:"topic_info"},t))}function Qa(e){var t=null!=e.userRole?e.userRole:"";return o.a.createElement("div",{className:"topic introfacedetect-topic"},o.a.createElement("p",{className:"topic_head"},"YOUR FACE IS MUTED"),o.a.createElement("p",{className:"topic_text"},"This is a three-part experience that will take 3 minutes.",o.a.createElement("br",null),o.a.createElement("br",null),"In each part you will be given a prompt to explore with your conversation partner whilst different parts of your face will be obfuscated.",o.a.createElement("br",null),o.a.createElement("br",null),"After each part, you will recieve question about how you are feeling and how you perceive your partner to be feeling.",o.a.createElement("br",null),o.a.createElement("br",null),"Tap Start on the iPad to begin the experience."),o.a.createElement("p",{className:"topic_info"},t))}function Ga(e){var t=e.result,n=null!=e.userRole?e.userRole:"";return o.a.createElement("div",{className:"topic thankyou-topic"},o.a.createElement("p",{className:"topic_head"},"THANK YOU"),o.a.createElement("p",{className:"topic_text"},o.a.createElement("br",null),t,o.a.createElement("br",null),o.a.createElement("br",null),"This artwork is a live experiment. With your participation, ",o.a.createElement("br",null),"you have contributed to the next iteration of this work.",o.a.createElement("br",null),o.a.createElement("br",null),"Thank you for your participation in Your Face is Muted. To ",o.a.createElement("br",null),"find out more about this research progress and outcomes,",o.a.createElement("br",null),"you can visit ",o.a.createElement("span",{style:{color:"red"}},"yourfaceismuted.com")),o.a.createElement("p",{className:"topic_info"},n))}he()(Wa,"propTypes",{visible:c.a.bool,title:c.a.string,onOk:c.a.func,onCancel:c.a.func,children:c.a.element}),he()(Wa,"defaultProps",{visible:!1,title:"Title",onOk:function(){},onCancel:function(){}});function Ka(e){var t=e.stagesData,n=e.side_prompt,r=e.user_role,i=e.time_diff,a=e.end,s=e.state_process,l=null!=t?t.currentIdx:0,u=null!=t?t.total:0,c=null!=t?t.name:0;return o.a.createElement("div",{className:"sidebar_container"},o.a.createElement("div",{className:"info"},s&&o.a.createElement(Ba,{time_diff:i,end:a}),o.a.createElement("div",{className:"sidebar_foot"},o.a.createElement("span",null,c),o.a.createElement("div",{class:"progress-container"},o.a.createElement("div",{class:"progress-bar",style:{background:"#d4eeff",transition:"all 0.5s",height:"0.5rem",width:"100%",borderRadius:"50px"}},o.a.createElement("div",{class:"progress-bar-completed",style:{background:"#1da1f2",height:"100%",borderRadius:"inherit",width:"".concat((l+1)/u*100,"%")}})),o.a.createElement("span",{class:"progress-text"},l+1,"/",u))),o.a.createElement("span",{className:"sidebar_user_role"},r)),o.a.createElement("div",{className:"sidebar_prompt"},n))}var Ja,Xa=n(2);function Ya(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Za(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Za(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Za(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var es=function(e,t,n){return e+(t-e)*n},ts=function(e){return(Math.cos(Math.PI*e)+1)/2},ns=function(e){return e*e},rs=function(e){return 1-e},is=function(e){return rs(rs(e)*rs(e))},os=function(e,t,n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(n,Math.max(t,e))}((n-e)/(t-e))},as=function(e,t,n,r,i){return es(n,r,os(e,t,i))},ss=(Ja={linear:{name:"Linear",fun:function(e){return e}},ease:{name:"Ease",fun:ts},invlerp:{name:"Inverse Linear",invlerp:os},range:{name:"Range",fun:function(e,t,n){return es(t[0],t[1],os(e[0],e[1],n))}},rangeXY:{name:"rangeXY",fun:as}},he()(Ja,"ease",{name:"Ease",fun:ts}),he()(Ja,"easeIn",{name:"Ease-In",fun:ns}),he()(Ja,"flip",{name:"Flip",fun:as}),he()(Ja,"easeOut",{name:"Ease-Out",fun:is}),he()(Ja,"easeInOut",{name:"Ease In and Out",fun:function(e){return es(ns(e),is(e),e)}}),he()(Ja,"easeOutBounce",{name:"easeOutBounce",fun:function(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375}}),he()(Ja,"spike",{name:"Spike Interpolation",fun:function(e){return e<=.5?ns(e/.5):e}}),Ja),ls=function(){function e(t,n,r){dt()(this,e),this.currentValue=t,this._value=t,this.interpFun=n,this.duration=r,this.elapsed=0}return ft()(e,[{key:"value",get:function(){return this.currentValue},set:function(e){this.currentValue=e}},{key:"lerp",value:function(e,t,n){return e+(t-e)*n}},{key:"update",value:function(e){if(this.elapsed<=this.duration){this.elapsed+=e;var t=this.elapsed/this.duration;this.value=this.lerp(this.value,this._value,this.interpFun.fun(t))}else Math.abs(this.value-this._value)<=.001?console.log("Interp value reached ".concat(this.value," - ").concat(this._value," = ").concat(Math.abs(this.value-this._value))):console.log("Interp time reached: ".concat(this.elapsed," / ").concat(this.duration))}},{key:"updateValue",value:function(e){this._value=e,this.elapsed=0}},{key:"setValue",value:function(e){this._value=e,this.currentValue=e,this.elapsed=this.interpTime+1}}]),e}(),us=function(){function e(t,n,r,i){dt()(this,e),this.animX=new ls(t,r,i),this.animY=new ls(n,r,i)}return ft()(e,[{key:"x",get:function(){return this.animX.value},set:function(e){this.animX.updateValue(e)}},{key:"y",get:function(){return this.animY.value},set:function(e){this.animY.updateValue(e)}},{key:"update",value:function(e){this.animX.update(e),this.animY.update(e)}},{key:"updatePosition",value:function(e,t){this.animX.updateValue(e),this.animY.updateValue(t)}},{key:"setPosition",value:function(e,t){this.animX.setValue(e),this.animY.setValue(t)}}]),e}(),cs=function(){function e(){var t,n,r,i,o,a,s,l,u,c,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;dt()(this,e),p=null!==(t=p)&&void 0!==t?t:{},this.name=null!==(n=p.name)&&void 0!==n?n:"Landmark",this.scale=null!==(r=p.scale)&&void 0!==r?r:[1,1],this.visible=null===(i=p.visible)||void 0===i||i,this.pointSize=null!==(o=p.pointSize)&&void 0!==o?o:5,this.pointColor=null!==(a=p.pointColor)&&void 0!==a?a:"fff",this.drawMask=null===(s=p.drawMask)||void 0===s||s,this.pointsRange=null!==(l=p.pointsRange)&&void 0!==l?l:[0,0],this.interpFun=null!==(u=p.interpFun)&&void 0!==u?u:ss.linear,this.interpTime=null!==(c=p.interpTime)&&void 0!==c?c:.5,this.pointsRange=this.pointsRange.sort(),this.rotation=0,this.points=[];for(var d=this.pointsRange[0];d<this.pointsRange[1];d++)this.points.push(new us(0,0,this.interpFun,this.interpTime));this.startPoint=this.points[0],this.centerPoint=new us(0,0,this.interpFun,this.interpTime),this.radius=new ls(0,this.interpFun,this.interpTime),this.lastUpdate=performance.now(),this.deltaTime=0,this.useGradientMask=!0,console.log("New Drawable Landmark ".concat(this.name,". Point: ").concat(this.pointSize," ").concat(this.pointColor,". Interpolation ").concat(this.interpFun.name," ").concat(this.interpTime))}return ft()(e,[{key:"updateAnimations",value:function(){this.deltaTime=(performance.now()-this.lastUpdate)/1e3,this.lastUpdate=performance.now();var e,t=Ya(this.points);try{for(t.s();!(e=t.n()).done;){e.value.update(this.deltaTime)}}catch(e){t.e(e)}finally{t.f()}this.updateCentroid(this.deltaTime)}},{key:"updateCentroid",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.startPoint=this.points[0],t){this.centerPoint.x,this.centerPoint.y,this.radius.value;this.centerPoint.update(this.deltaTime),this.radius.update(this.deltaTime)}else{var n=this.getCenterPoint(this.points);this.centerPoint.setPosition(n.x,n.y),this.radius.setValue(n.radius)}}},{key:"updatePoints",value:function(e){e.length!=this.points.length&&console.warn("Number of new points does not match the number of points for landmark ".concat(this.name,". \n Landmark Points: ").concat(this.points.length," \n New points: ").concat(e.length));for(var t=0;t<e.length;t++)t>=this.points.length&&this.points.push(new us(e[t].x,e[t].y,this.interpFun,this.interpTime)),this.points[t].updatePosition(e[t].x,e[t].y);this.updateAnimations()}},{key:"updatePointsFromLandmark",value:function(e){var t=[];t=this.pointsRange[0]>=this.pointsRange[1]?e:e.slice(this.pointsRange[0],this.pointsRange[1]),this.updatePoints(t)}},{key:"setRotation",value:function(e){this.rotation=e*(Math.PI/180)}},{key:"getDistance",value:function(e,t,n,r){var i=r-t,o=n-e;return Math.sqrt(o*o+i*i)}},{key:"getCenterPoint",value:function(e){if(1==e.length)return{x:e[0].x,y:e[0].y,radius:0};for(var t=e[0].x,n=e[0].x,r=e[0].y,i=e[0].y,o=0;o<e.length;o++)e[o].x<t&&(t=e[o].x),e[o].x>n&&(n=e[o].x),e[o].y<r&&(r=e[o].y),e[o].y>i&&(i=e[o].y);return{x:(n+t)/2,y:(i+r)/2,radius:this.getDistance(n,i,t,r)}}},{key:"drawEllipticalGradient",value:function(e,t,n,r,i,o){var a=.5*r.value*i,s=.5*r.value*o,l=a*(Math.cos(this.rotation)+1),u=s*(Math.sin(this.rotation)+1),c=1,p=1,d=1,h=1,f={x:t,y:n},m={x:t,y:n},g=0;l>=u?(g=l,d=u/l,h=l/u,f.x=t,f.y=n*h,m.x=t,m.y=n*h):(g=u,c=l/u,p=u/l,f.x=t*p,f.y=n,m.x=t*p,m.y=n);var y=e.createRadialGradient(f.x,f.y,0,m.x,m.y,g);y.addColorStop(0,"rgba(255,255,255,1)"),y.addColorStop(.5,"rgba(255,255,255,0.7)"),y.addColorStop(.7,"rgba(255,255,255,0.05)"),y.addColorStop(.95,"rgba(255,255,255,0)"),e.fillStyle=y,e.setTransform(c,0,0,d,0,0),a*=2.8,s*=2,e.fillRect((t-.5*a)*p,(n-.5*s)*h,a*p,s*h),e.setTransform(1,0,0,1,0,0)}},{key:"drawEllipse",value:function(e,t,n,r,i,o){var a=.5*r.value*i,s=.5*r.value*o,l=a*(Math.cos(this.rotation)+1),u=s*(Math.sin(this.rotation)+1);e.ellipse(t,n,l,u,0,0,2*Math.PI),e.fill()}},{key:"drawClippingMask",value:function(e){this.visible&&(e.globalCompositeOperation="destination-out",e.beginPath(),this.useGradientMask?this.drawEllipticalGradient(e,this.centerPoint.x,this.centerPoint.y,this.radius,1.6*this.scale[0],1.6*this.scale[1]):this.drawEllipse(e,this.centerPoint.x,this.centerPoint.y,this.radius,this.scale[0],this.scale[1]),e.closePath(),e.globalCompositeOperation="source-over")}},{key:"drawCentroid",value:function(e){this.visible&&(e.beginPath(),e.fillStyle="blue",e.arc(this.centerPoint.x,this.centerPoint.y,this.pointSize,0,2*Math.PI),e.fill(),e.closePath())}},{key:"drawPoints",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.visible){t&&console.log(this.name,this.points),e.fillStyle=this.pointColor;var n,r=Ya(this.points);try{for(r.s();!(n=r.n()).done;){var i=n.value;e.beginPath(),e.arc(i.x,i.y,this.pointSize,0,2*Math.PI),e.fill(),e.closePath()}}catch(e){r.e(e)}finally{r.f()}}}}]),e}(),ps=n(12);function ds(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return hs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hs(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function hs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_t()(e);if(t){var i=_t()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xt()(this,n)}}function ms(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ms(Object(n),!0).forEach((function(t){he()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ms(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ys=n(48),vs="Welcome to `Your Face is Muted`! This experience consists of three stages. In each, the screen in front of you will show a prompt with a topic to discuss with your conversation partner.Throughout the discussion, different parts of your face will be obfuscated. The iPad next to you will occasionally prompt you with questions about you and your partner's current emotion. Let's see how accurate you can read how they feel! Sounds good? Then click the start button on the iPad and converse away!",bs="Ooops! We can not detect your face, please make sure to look at the screen duringthe experience. Otherwise, the conversation may be terminated.",xs={name:"Test",pointsRange:[0,0],scale:[1,1],visible:!0,pointSize:2,pointColor:"#f00",drawMask:!0,interpFun:ss.easeInOut,interpTime:.15},ws=[new cs(gs(gs({},xs),{},{name:"JawOutline",pointsRange:[0,17],scale:[1,1],visible:!1})),new cs(gs(gs({},xs),{},{name:"LeftEyeBrow",pointsRange:[17,22],scale:[1,1],visible:!1})),new cs(gs(gs({},xs),{},{name:"RightEyeBrow",pointsRange:[22,27],scale:[1,1],visible:!1})),new cs(gs(gs({},xs),{},{name:"Nose",pointsRange:[27,36],scale:[.5,1],visible:!1})),new cs(gs(gs({},xs),{},{name:"LeftEye",pointsRange:[36,42],scale:[1.5,1.35]})),new cs(gs(gs({},xs),{},{name:"RightEye",pointsRange:[42,48],scale:[1.5,1.35]})),new cs(gs(gs({},xs),{},{name:"Mouth",pointsRange:[48,68],scale:[.8,.8]}))],_s=(new cs(gs(gs({},xs),{},{name:"Center",pointsRange:[],scale:[1,1],pointSize:10,pointColor:"#ff0",drawMask:!1})),{occlusion_mask:!1,feature_show:{eyes:{toggle:!1,sliderIndex:0},mouth:{toggle:!1,sliderIndex:0},nose:{toggle:!1,sliderIndex:0},bar:{toggle:!1,direction:!1,sliderIndex:0,position:0}},video:!0,audio:!0,recording:!1}),Cs=function(e){vt()(a,e);var t,n,r,i=fs(a);function a(e){var t;return dt()(this,a),(t=i.call(this,e)).state={bridge:"",user:e.username,recording:!1,time_slot:0,time_diff:0,process:!1,sessionId:"",stagesData:null,stage:0,side_prompt:"",user_role:"",process_cfg:null,attention:"Ooops! We can not detect your face, please look at the screen during      the process. Or the conversation will be terminated.",visible:!1,ready:!1,loading:!1,intro:{visible:!1,content:vs},result:"",controlData:{},survey_in_progress:!1},t.socket=null!=t.props.socket?t.props.socket:null,t.record={record_count:0,record_detail:[]},t.currentVideoSource=null,t.remoteVideo=null,t.emo_result=[],t.survey_count=0,t.controlParams=e.controlParams,t.faceApiLoaded=!0,t.detections=null,t.detectionsUpdated=!0,t.process_duration=1,t.timeLeft=1,t.endTime=0,t.onRemoteHangup=t.onRemoteHangup.bind(gt()(t)),t.onMessage=t.onMessage.bind(gt()(t)),t.sendData=t.sendData.bind(gt()(t)),t.setupDataHandlers=t.setupDataHandlers.bind(gt()(t)),t.setDescription=t.setDescription.bind(gt()(t)),t.sendDescription=t.sendDescription.bind(gt()(t)),t.hangup=t.hangup.bind(gt()(t)),t.init=t.init.bind(gt()(t)),t.setDescription=t.setDescription.bind(gt()(t)),t.loadModel=t.loadModel.bind(gt()(t)),t.drawCanvas=t.drawCanvas.bind(gt()(t)),t.onControl=t.onControl.bind(gt()(t)),t.sendDataToServer=t.sendDataToServer.bind(gt()(t)),t.startRecording=t.startRecording.bind(gt()(t)),t.stopRecording=t.stopRecording.bind(gt()(t)),t.saveVideo=t.saveVideo.bind(gt()(t)),t.onProcessStart=t.onProcessStart.bind(gt()(t)),t.onProcessControl=t.onProcessControl.bind(gt()(t)),t.onStageControl=t.onStageControl.bind(gt()(t)),t.onProcessStop=t.onProcessStop.bind(gt()(t)),t.onUploadingFinish=t.onUploadingFinish.bind(gt()(t)),t.mask_configuration=[],t.losingface=0,t}return ft()(a,[{key:"componentDidMount",value:function(){var e=this;this.loadModel(),this.props.media(this),this.props.getUserMedia.then((function(t){return e.localVideo.srcObject=e.localStream=t})),null!=this.socket&&(this.socket.on(Xa.SOCKET_CMDS.ROOM_JOIN_FEEDBACK,(function(t){return e.onJoinFeedback(t)})),this.socket.on(Xa.SOCKET_CMDS.PROCESS_START,(function(t){return e.onProcessStart(t)})),this.socket.on(Xa.SOCKET_CMDS.PROCESS_STOP,(function(t){return e.onProcessStop(t)})),this.socket.on(Xa.SOCKET_CMDS.PROCESS_CONTROL,(function(t){return e.onProcessControl(t)})),this.socket.on(Xa.SOCKET_CMDS.RESET,(function(t){return e.onReset(t)})),this.socket.on(Xa.SOCKET_CMDS.STAGE_CONTROL,(function(t){return e.onStageControl(t)})),this.socket.on(Xa.SOCKET_CMDS.UPLOAD_FINISH,(function(t){return e.onUploadingFinish(t)})),this.socket.on(Xa.SOCKET_CMDS.SURVEY_START,(function(t){return e.onSurveyStart(t)})),this.socket.on(Xa.SOCKET_CMDS.SURVEY_END,(function(t){return e.onSurveyEnd(t)})),this.socket.on(Xa.SOCKET_CMDS.FACE_DETECTED,(function(t){return e.onFace(t)})),this.socket.on(Xa.SOCKET_CMDS.MESSAGE,(function(t){return e.onMessage(t)})),this.socket.on(Xa.SOCKET_CMDS.HANGUP,(function(t){return e.onRemoteHangup(t)})),this.socket.on(Xa.SOCKET_CMDS.CONTROL,(function(t){return e.onControl(t)})),this.socket.on(Xa.SOCKET_CMDS.RECORDING,(function(t){return e.startRecording(t)}))),null!=this.remoteVideo&&this.remoteVideo.addEventListener("play",(function(){console.log("Remote Video Play"),e.tryStartFaceDetection().catch((function(e){console.warn("Error attempting to start face detection emotion: ".concat(e))}))})),this.localVideo.addEventListener("play",(function(){console.log("Local Video Play");var t=e.localStream.getAudioTracks()[0];e.localStream.getVideoTracks()[0];(new MediaStream).addTrack(t),e.mediaRecorder=new MediaRecorder(e.localStream,{mimeType:"video/webm"}),e.chunks=[],e.mediaRecorder.ondataavailable=function(t){t.data&&t.data.size>0&&!e.state.survey_in_progress&&e.chunks.push(t.data)},null==e.socket&&e.tryStartFaceDetection().catch((function(e){console.warn("Error attempting to start face detection: ".concat(e))}))}))}},{key:"componentDidUpdate",value:function(e){}},{key:"componentWillUnmount",value:function(){this.props.media(null),void 0!==this.localStream&&this.localStream.getVideoTracks()[0].stop(),null!=this.socket&&(this.socket.emit(Xa.SOCKET_CMDS.ROOM_IDLE,{room:this.props.room}),this.socket.emit(Xa.SOCKET_CMDS.LEAVE_ROOM)),clearInterval(this.timmer)}},{key:"loadModel",value:(r=Vt()(Ft.a.mark((function e(){var t;return Ft.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.faceApiLoaded=!1,console.info("++ loading model"),e.next=4,Lt.j.setBackend("webgl");case 4:return t="/models",e.next=7,Lt.g(t);case 7:return e.sent,e.next=10,Lt.e(t);case 10:return e.sent,e.next=13,Lt.f(t);case 13:return e.sent,e.next=16,Lt.d(t);case 16:e.sent,this.faceApiLoaded=!0;case 18:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"onSurveyEnd",value:function(e){var t=this,n=(e.duration,e.stage);this.survey_count+=1,this.setState(gs(gs({},this.state),{},{survey_in_progress:!1}));var r=(new Date).getTime();1==n&&(this.endTime=r+31e3),2==n&&(this.endTime=r+6e4),3==n&&(this.endTime=r+9e4),4==n&&(this.endTime=r+0);var i,o=this.state.controlData.mask,a=this.state.controlData.topic;if(console.log("print topic",a),i=1==a.length?a[0]:a["host"==this.state.user?0:1],console.log(Xa.SOCKET_CMDS.SURVEY_END,n),4!=n&&this.survey_count<3&&this.setState(gs(gs({},this.state),{},{side_prompt:i,stage:n})),setTimeout((function(){t.setState(gs(gs({},t.state),{},{visible:!1,attention:bs}))}),ps.TIMES.LOSING_FACE_NOTIFY),1==a.length)this.setState(gs(gs({},this.state),{},{topic:{content:a[0],visible:!0}}));else{var s="host"==this.state.user?0:1;this.setState(gs(gs({},this.state),{},{topic:{content:a[s],visible:!0}}))}this.props.updateAll(o),console.log(Xa.SOCKET_CMDS.SURVEY_END,e,this.endTime)}},{key:"onSurveyStart",value:function(e){this.setState(gs(gs({},this.state),{},{survey_in_progress:!0,side_prompt:"We have some questions for you on Ipad"}))}},{key:"onJoinFeedback",value:function(e){e.error||this.setState(gs(gs({},this.state),{},{user_role:e.userRoomId}))}},{key:"onProcessControl",value:function(){var e=this;this.state.process||this.setState(gs({},this.state),(function(){console.log(e.state),e.onReady()}))}},{key:"onReady",value:function(){console.log("on ready set state"),this.setState(gs({},this.state))}},{key:"onProcessStart",value:function(e){var t=this,n=e.stagesData,r=e.startTime,i=e.duration,o=e.record_by_user,a=e.sessionId;console.log("set intro invisible"),console.log("process start",r,i,a),console.log("record",o,o[this.state.user]),this.setState(gs(gs({},this.state),{},{stagesData:n})),this.state.process||(this.record={record_count:0,record_detail:[]},this.emo_result=[],o[this.state.user]&&this.startRecording(),console.log("process start counting"),this.process_duration=i,this.timeLeft=this.process_duration,console.log("Starting clock"),this.timmer=setInterval((function(){try{(new Date).getTime();t.timeLeft-=1,t.timeLeft<-5e3?clearInterval(t.timmer):!t.state.survey_in_progress&&t.timeLeft>=0&&t.setState(gs(gs({},t.state),{},{sessionId:r,process:!0,recording:o[t.state.user],time_slot:t.state.time_slot+1,time_diff:t.timeLeft}))}catch(e){console.error("Error running timer",e)}return!0}),ps.TIMES.PROCESS_UPDATE_INTERVAL))}},{key:"onReset",value:function(){null!=this.socket&&this.socket.emit(Xa.SOCKET_CMDS.RESET,{room:this.props.room})}},{key:"onProcessStop",value:function(e){var t=this,n=e.accident_stop;null==n&&(n="From Socket"),this.state.recording&&this.stopRecording(n),console.log("media process stop. Accident: ",n),clearInterval(this.timmer),this.setState(gs(gs({},this.state),{},{recording:!1,time_slot:0,time_diff:0,process:!1,sessionId:"",stage:0,visible:!1,loading:!1,ready:!1,topic:{content:"Welcome! Please have a seat.",visible:!1},intro:{content:vs,visible:!1},survey_in_progress:!1})),this.survey_count=0,this.props.updateAll(_s),n?(this.record={record_count:0,record_detail:[]},this.emo_result=[]):(this.sendDataToServer(),this.setState(gs(gs({},this.state),{},{loading:!0})),setTimeout((function(){t.setState(gs(gs({},t.state),{},{loading:!1}))}),ps.TIMES.PROCESS_STOP_WAIT),this.record={record_count:0,record_detail:[]},this.emo_result=[])}},{key:"onUploadingFinish",value:function(e){var t="host";"host"==this.state.user&&(t="guest");var n=e[this.state.user],r=e[t],i=0;console.log("upload, ",e);for(var o=0;o<3;o++)try{n[o].result.question2==r[o].result.question1&&(i+=1)}catch(e){console.log("someone not pick one option")}var a="In the conversation, you made ".concat(i," over 3 correct guess ");this.setState(gs(gs({},this.state),{},{result:a}))}},{key:"onStageControl",value:function(e){var t=this;console.info("- onStageControl()",e),0!=this.state.stage&&(this.emo_result.push(this.record.record_detail),console.info("- stage control, ",this.state,this.emo_result)),this.record={record_count:0,record_detail:[]},console.log("stage control receiving",this.emo_result);var n=e.mask,r=e.topic;if(0==this.state.stage){var i=n[this.state.user];1==r.length&&(this.setState(gs(gs({},this.state),{},{side_prompt:r[0],intro:{content:vs,visible:!1}})),setTimeout((function(){t.setState(gs(gs({},t.state),{},{visible:!1,attention:bs}))}),ps.TIMES.LOSING_FACE_NOTIFY)),this.props.updateAll(i)}this.setState(gs(gs({},this.state),{},{stage:1,time_slot:0,controlData:{mask:n[this.state.user],topic:r}}))}},{key:"onControl",value:function(e){console.log("On Control");var t=e.user,n=e.controlData;t==this.state.user?(this.props.updateAll(n),0==n.video?this.localVideo.pause():this.localVideo.play(),1==n.recording&&0==this.state.recording&&this.startRecording(),0==n.recording&&1==this.state.recording&&this.stopRecording()):null!=this.remoteVideo&&(0==n.video?this.remoteVideo.pause():this.remoteVideo.play(),0==n.audio?this.remoteVideo.muted=!0:this.remoteVideo.muted=!1)}},{key:"onFaceDetect",value:function(){var e;null!=this.socket&&(e="guest"==this.state.user?"host":"guest",this.socket.emit(Xa.SOCKET_CMDS.FACE_DETECTED,{room:this.props.room,user:e}))}},{key:"onFace",value:function(e){this.state.user!=e||this.state.process||this.setState(gs(gs({},this.state),{},{ready:!0,intro:gs(gs({},this.state.intro),{},{visible:!0})}))}},{key:"startRecording",value:function(){this.chunks=[],this.mediaRecorder.start(10),this.setState({recording:!0})}},{key:"stopRecording",value:function(e){console.log("stopping recording"),this.mediaRecorder.stop(),this.setState({recording:!1}),e||this.saveVideo()}},{key:"saveVideo",value:function(){var e=new Blob(this.chunks,{type:"video/webm"}),t=this.state.sessionId+"_"+this.state.user;ys.saveAs(e,t)}},{key:"tryStartFaceDetection",value:(n=Vt()(Ft.a.mark((function e(){var t,n,r,i=this;return Ft.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.faceApiLoaded){e.next=4;break}return console.warn("Waiting for face api models to load..."),setTimeout(Vt()(Ft.a.mark((function e(){return Ft.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.tryStartFaceDetection();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),ps.TIMES.FACE_DETECTION_RETRY),e.abrupt("return");case 4:t=Lt.b(this.localVideo),null!=this.remoteVideo&&(n=Lt.b(this.remoteVideo),console.log("compare",n,t)),r={width:t.width,height:t.height},Lt.h(this.canvasRef,r),console.log(this.canvasRef.width,this.canvasRef.height),console.log("Triggering face detection.."),setTimeout(Vt()(Ft.a.mark((function e(){return Ft.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.faceDetectionCallback();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),ps.TIMES.FACE_DETECTION_DELAY),window.requestAnimationFrame(this.drawCanvas);case 12:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"faceDetectionCallback",value:(t=Vt()(Ft.a.mark((function e(){var t,n,r,i,o=this;return Ft.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,e.prev=1,null==this.currentVideoSource&&(null==this.remoteVideo?(this.currentVideoSource=this.localVideo,console.warn("No remote video source, using local video for face api detection")):this.currentVideoSource=this.remoteVideo,console.log("Using Video Source: ".concat(this.currentVideoSource.id),this.currentVideoSource)),e.next=5,Lt.c(this.currentVideoSource,new Lt.a).withFaceLandmarks().withFaceExpressions();case 5:null!=(n=e.sent)&&null!=n&&(this.detections=n),this.detectionsUpdated=!0,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.error("ERROR detecting single face ".concat(e.t0)),this.detectionsUpdated=!1;case 14:r=(new Date).getTime();try{this.faceAttributes=(a=this.detections,s=void 0,l=void 0,u=void 0,c=void 0,p=void 0,d=void 0,h=void 0,f=void 0,s=a.landmarks,l=s.getLeftEye(),u=s.getRightEye(),c=s.getNose(),p=s.getMouth(),d={x:l[0].x,y:Math.min(l[1].y,l[2].y),x_max:l[3].x,y_max:Math.max(l[4].y,l[5].y)},h={x:u[0].x,y:Math.min(u[1].y,u[2].y),x_max:u[3].x,y_max:Math.max(u[4].y,u[5].y)},f={x:Math.min(c[4].x,c[3].x),y:c[0].y,x_max:c[8].x,y_max:Math.max(c[4].y,c[5].y)},{leftEyeAttributes:d,rightEyeAttributes:h,mouthAttributes:{x:p[0].x,y:p[4].y,x_max:p[6].x,y_max:p[11].y},noseAttributes:f}),this.state.process||this.onFaceDetect(),this.losingface=0,t&&(this.sendData("recover"),t=!1)}catch(e){try{console.error("ERROR getting feature attributes ".concat(e)),this.state.survey_in_progress?this.losingface+=.5:this.losingface+=1,this.losingface%=22,this.losingface>=10&&this.losingface<20&&(this.state.process?t||(t=!0,this.sendData("lose-face")):t||(t=!0,this.sendData(Xa.SOCKET_CMDS.ROOM_IDLE)),console.log("WARNING: Lost face tracking for more than 10 secs.")),this.losingface>=20&&this.state.process&&(this.onReset(),console.log("WARNING: Your partner seems to have left.")),this.losingface>=20&&!this.state.process&&!this.state.ready&&(null!=this.socket&&this.socket.emit(Xa.SOCKET_CMDS.ROOM_IDLE,{room:this.props.room}),console.log("The room seems to be idle.")),console.log("WARNING: Can't detect face on remote side",this.losingface)}catch(e){console.log("Error while losing face: ",e)}}if(this.state.process&&!this.state.survey_in_progress)try{i={timeStamp:r,time_slot:this.state.time_slot,emotion:this.detections.expressions},this.record.record_detail.push(i),this.record.record_count+=1}catch(e){console.warn("Error showing emotion: ".concat(e))}setTimeout(Vt()(Ft.a.mark((function e(){return Ft.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.faceDetectionCallback();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),ps.TIMES.FACE_DETECTION_DELAY);case 18:case"end":return e.stop()}var a,s,l,u,c,p,d,h,f}),e,this,[[1,10]])}))),function(){return t.apply(this,arguments)})},{key:"drawCanvas",value:function(){var e=this.canvasRef.getContext("2d");if(e.fillStyle="black",e.fillRect(0,0,this.canvasRef.width,this.canvasRef.height),null!=this.detections){var t=this.detections,n=(this.detections.detection.imageHeight,this.detections.detection.imageWidth,e.canvas.clientHeight,e.canvas.clientWidth,e.canvas.height),r=e.canvas.width;e.canvas.getBoundingClientRect().height,e.canvas.getBoundingClientRect().width,t.detection.imageWidth,t.detection.imageHeight;if(this.detectionsUpdated){(t=Lt.i(t,{width:r,height:n})).detection.imageWidth,t.detection.imageHeight;var i,o=t.landmarks,a=ds(ws);try{for(a.s();!(i=a.n()).done;){var s=i.value;s.updatePointsFromLandmark(o.positions),s.setRotation(t.angle.roll)}}catch(e){a.e(e)}finally{a.f()}this.detectionsUpdated=!1}var l,u=ds(ws);try{for(u.s();!(l=u.n()).done;){var c=l.value;c.drawMask&&c.drawClippingMask(e)}}catch(e){u.e(e)}finally{u.f()}}window.requestAnimationFrame(this.drawCanvas)}},{key:"onRemoteHangup",value:function(){this.setState(gs(gs({},this.state),{},{bridge:"host-hangup"}))}},{key:"onMessage",value:function(e){var t=this;"offer"===e.type?this.pc.setRemoteDescription(new RTCSessionDescription(e)).then((function(){return t.pc.createAnswer()})).then(this.setDescription).then(this.sendDescription).catch(this.handleError):"answer"===e.type?this.pc.setRemoteDescription(new RTCSessionDescription(e)):"candidate"===e.type&&this.pc.addIceCandidate(e.candidate)}},{key:"sendData",value:function(e){null!=this.dc&&null!=this.dc&&this.dc.send(JSON.stringify(e))}},{key:"setupDataHandlers",value:function(){var e=this;this.dc.onmessage=function(t){var n=JSON.parse(t.data);"lose-face"==n&&e.setState(gs(gs({},e.state),{},{visible:!0,ready:e.state.process})),"recover"==n&&e.setState(gs(gs({},e.state),{},{visible:!1,ready:!0})),n==Xa.SOCKET_CMDS.ROOM_IDLE&&e.setState(gs(gs({},e.state),{},{ready:!1})),console.log("received message over data channel:"+n)},this.dc.onclose=function(){e.remoteStream.getVideoTracks()[0].stop(),console.log("The Data Channel is Closed")}}},{key:"setDescription",value:function(e){return this.pc.setLocalDescription(e)}},{key:"sendDescription",value:function(){null!=this.socket&&this.socket.send(this.pc.localDescription)}},{key:"hangup",value:function(){this.setState(gs(gs({},this.state),{},{bridge:"guest-hangup"})),this.pc.close(),null!=this.socket&&(this.socket.emit(Xa.SOCKET_CMDS.ROOM_IDLE,{room:this.props.room}),this.socket.emit(Xa.SOCKET_CMDS.LEAVE_ROOM))}},{key:"handleError",value:function(e){console.log(e)}},{key:"sendDataToServer",value:function(){var e=this.record;this.emo_result.push(this.record.record_detail),console.info("+ finish, sending data, ",this.emo_result,e);var t=this.emo_result;null!=this.socket&&(console.log("sending data to server ",JSON.parse(JSON.stringify(t))),this.socket.emit(Xa.SOCKET_CMDS.DATA_SEND,{room:this.props.room,data_type:Xa.DATA_TYPES.EMOTION,user:this.state.user,data:t}),this.record.record_detail=[],this.record.record_count=0)}},{key:"init",value:function(){var e=this;console.log("Initializing Media");try{this.pc=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"turn:139.180.183.4:3478",username:"hao",credential:"158131hh2232A"}]}),console.log("RTCPeerCOnnection created"),this.pc.onconnectionstatechange=function(e){console.log("onconnectionstatechange change ",e)},this.pc.addEventListener("iceconnectionstatechange",(function(t){var n=e.pc.iceConnectionState;console.log("iceconnection change ",n),"failed"===n||"closed"===n||"disconnected"===n?e.reconnecttimer=setInterval((function(){console.log("iceconnection trying to reconnect"),location.reload()}),ps.TIMES.ICE_RECONNECTION_INTERVAL):clearInterval(e.reconnecttimer)})),this.pc.onicecandidate=function(t){console.log("onicecandidate",t),t.candidate&&null!=e.socket&&e.socket.send({type:"candidate",candidate:t.candidate})},this.pc.ontrack=function(e){console.log("ontrack",e)},this.pc.onaddstream=function(t){console.log("onaddstream",t),null!=e.remoteVideo&&(e.remoteStream=t.stream,e.remoteVideo.srcObject=e.remoteStream=t.stream,e.setState(gs(gs({},e.state),{},{bridge:"established"})))},this.pc.ondatachannel=function(t){console.log("ondatachannel",t),e.dc=t.channel,e.setupDataHandlers(),e.sendData({peerMediaStream:{video:e.localStream.getVideoTracks()[0].enabled}})},console.log("RTCPeerCOnnection listeners added"),this.localStream.getTracks().forEach((function(t){console.log("Adding track ",t),e.pc.addTrack(t,e.localStream)})),"host"===this.state.user&&this.props.getUserMedia.then((function(){console.log("Attach media if ready ()"),e.dc=e.pc.createDataChannel("chat"),e.setupDataHandlers(),console.log("attachMediaIfReady"),e.pc.createOffer({iceRestart:!0}).then(e.setDescription).then(e.sendDescription).catch(e.handleError)})).catch((function(e){console.warn("Error Getting user media: ",e)}))}catch(e){console.error("ERROR: Could not init WebRTC",e)}}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"media-bridge ".concat(this.state.bridge)},o.a.createElement("canvas",{className:"canvas",ref:function(t){return e.canvasRef=t}}),this.state.process&&o.a.createElement(Ka,{stagesData:this.state.stagesData,side_prompt:this.state.side_prompt,user_role:this.state.user_role,time_diff:this.state.time_diff,end:this.state.survey_in_progress,state_process:this.state.process}),null==e.socket?o.a.createElement(o.a.Fragment,null):e.state.process?void 0:e.state.intro.visible?o.a.createElement(Qa,{userRole:e.state.user_role}):o.a.createElement(Ha,{userRole:e.state.user_role}),this.state.loading&&o.a.createElement(Ga,{result:this.state.result,userRole:this.state.user_role}),o.a.createElement(Wa,{title:"Attention",visible:this.state.visible},o.a.createElement("h1",{style:{color:"white"}},this.state.attention)),null!=this.socket&&o.a.createElement("video",{className:"remote-video",id:"remote-video",ref:function(t){return e.remoteVideo=t},autoPlay:!0}),o.a.createElement("video",{className:"local-video",id:"local-video",ref:function(t){return e.localVideo=t},autoPlay:!0,muted:!0}))}}]),a}(i.Component);Cs.propTypes={socket:u.PropTypes.object.isRequired,getUserMedia:u.PropTypes.object.isRequired,media:u.PropTypes.func.isRequired};var Ss=ue((function(e){return{video:e.video,audio:e.audio,controlParams:e.controlParams}}),(function(e){return{updateAll:function(e){return Ce.dispatch({type:"UPDATE_ALL",payload:e})},setVideo:function(e){return Ce.dispatch({type:"SET_VIDEO",video:e})},setAudio:function(e){return Ce.dispatch({type:"SET_AUDIO",audio:e})}}}))(Cs),ks=n(32),Es=n.n(ks),Ts=document.documentElement;document.fullscreenEnabled=document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled,document.exitFullscreen=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen,Ts.requestFullscreen=Ts.requestFullscreen||Ts.webkitRequestFullscreen||Ts.mozRequestFullScreen||Ts.msRequestFullScreen;var Is=function(e){return o.a.createElement("div",{className:"auth"},o.a.createElement("div",{className:"media-controls"}),o.a.createElement("div",{className:"request-access"},o.a.createElement("p",null,o.a.createElement("span",{className:"you-left"},"You hung up."),"Send an invitation to join the room."),o.a.createElement("form",{onSubmit:e.send},o.a.createElement("input",{type:"text",autoFocus:!0,onChange:e.handleInput,"data-ref":"message",maxLength:"30",required:!0,placeholder:"Hi, I'm Hao.",value:"hi"}),o.a.createElement("button",{className:"primary-button"},"Send"))),o.a.createElement("div",{className:"grant-access"},o.a.createElement("p",null,"A peer has sent you a message to join the room:"),o.a.createElement("div",null,e.message),o.a.createElement("button",{onClick:e.handleInvitation,"data-ref":"reject",className:"primary-button"},"Reject"),o.a.createElement("button",{onClick:e.handleInvitation,"data-ref":"accept",className:"primary-button"},"Accept")),o.a.createElement("div",{className:"room-occupied"},o.a.createElement("p",null,"Please, try another room!"),o.a.createElement(It,{className:"primary-button",to:"/"},"OK")),o.a.createElement("div",{className:"waiting"},o.a.createElement("p",null,o.a.createElement("span",null,"Waiting for someone to join this room:"),o.a.createElement("a",{href:window.location.href},window.location.href),o.a.createElement("br",null),o.a.createElement("span",{className:"remote-left"},"The remote side hung up."))))};Is.propTypes={message:u.PropTypes.string.isRequired,audio:u.PropTypes.bool.isRequired,video:u.PropTypes.bool.isRequired,toggleVideo:u.PropTypes.func.isRequired,toggleAudio:u.PropTypes.func.isRequired,send:u.PropTypes.func.isRequired,handleHangup:u.PropTypes.func.isRequired,handleInput:u.PropTypes.func.isRequired,handleInvitation:u.PropTypes.func.isRequired};var Ps=Is;function Os(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_t()(e);if(t){var i=_t()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xt()(this,n)}}var Ns=function(e){vt()(n,e);var t=Os(n);function n(e){var r;return dt()(this,n),(r=t.call(this,e)).state={sid:"",message:"",audio:!0,video:!0},r.handleInvitation=r.handleInvitation.bind(gt()(r)),r.handleHangup=r.handleHangup.bind(gt()(r)),r.handleInput=r.handleInput.bind(gt()(r)),r.toggleVideo=r.toggleVideo.bind(gt()(r)),r.toggleAudio=r.toggleAudio.bind(gt()(r)),r.send=r.send.bind(gt()(r)),r}return ft()(n,[{key:"hideAuth",value:function(){this.props.media.setState({bridge:"connecting"})}},{key:"full",value:function(){console.log("Room is full!"),this.props.media.setState({bridge:"full"})}},{key:"componentDidMount",value:function(){var e=this,t=this.props.socket;t.on(Xa.SOCKET_CMDS.HELLO,(function(){var t,n,r,i;console.log("SOCKET CONNECTED (hello received): ".concat(null===(t=e.props)||void 0===t||null===(n=t.socket)||void 0===n?void 0:n.id," ").concat(null===(r=e.props)||void 0===r||null===(i=r.socket)||void 0===i?void 0:i.nsp))})),t.onAny((function(e){e!==Xa.SOCKET_CMDS.FACE_DETECTED&&console.log("Received event ".concat(e))})),t.on(Xa.SOCKET_CMDS.CONNECT_ERROR,(function(t){console.log("connect_error on ".concat(e," due to ").concat(t.message))})),this.setState({video:this.props.video,audio:this.props.audio,zoom:this.props.zoom}),console.log(this.props),t.on(Xa.SOCKET_CMDS.ROOM_FULL,this.full),t.on(Xa.SOCKET_CMDS.BRIDGE,(function(t){console.log("Received bridge"),e.props.media.init()})),t.on(Xa.SOCKET_CMDS.ROOM_JOIN_FEEDBACK,(function(t){t.error?console.warn("Could not join room: ".concat(JSON.stringify(t))):(e.props.setRoomData(t),console.log("Role assigned ".concat(JSON.stringify(t))),e.props.media.setState({user:t.userRole,bridge:t.bridge}),"join"==t.bridge&&(e.props.socket.emit(Xa.SOCKET_CMDS.AUTH,e.state),e.hideAuth(),console.log("Emitting Auth")))})),t.on(Xa.SOCKET_CMDS.APPROVE,(function(t){var n=t.message,r=t.sid;console.log("Received approve from ".concat(r,": ").concat(n)),e.props.media.setState({bridge:"approve"}),e.setState({message:n,sid:r}),setTimeout((function(){console.log("Emitting ".concat(Xa.SOCKET_CMDS.ACCEPT," ").concat(r));try{e.props.socket.emit(Xa.SOCKET_CMDS.ACCEPT,r),e.hideAuth()}catch(e){console.error("Error emitting accept ",e)}}),ps.TIMES.AUTOACCEPT_WAIT)})),t.emit(Xa.SOCKET_CMDS.JOIN_ROOM),this.props.getUserMedia.then((function(t){e.localStream=t;var n=t.getVideoTracks();console.log("VideoTracks: ",n),e.track=n[0];try{e.track.applyConstraints({advanced:[he()({},"zoom",e.props.zoom)]}).catch((function(e){console.warn("Error applying constraints to track: ",e)})),e.localStream.getVideoTracks()[0].enabled=e.state.video,e.localStream.getAudioTracks()[0].enabled=e.state.audio}catch(e){console.warn("Error applying constraints to track: ",e)}}))}},{key:"componentDidUpdate",value:function(){try{this.track.applyConstraints({advanced:[he()({},"zoom",this.props.zoom)]}).catch((function(e){console.warn("Error applying constraints to track: ",e)}))}catch(e){console.warn("Error applying constraints to track: ",e)}}},{key:"handleInput",value:function(e){this.setState(he()({},e.target.dataset.ref,e.target.value))}},{key:"send",value:function(e){e.preventDefault(),this.props.socket.emit(Xa.SOCKET_CMDS.AUTH,this.state),this.hideAuth()}},{key:"handleInvitation",value:function(e){e.preventDefault(),console.log("Emitting Invitation accept ".concat(e.target.dataset.ref,": ").concat(this.state.sid)),this.props.socket.emit(e.target.dataset.ref,this.state.sid),this.hideAuth()}},{key:"toggleVideo",value:function(){var e=this.localStream.getVideoTracks()[0].enabled=!this.state.video;this.setState({video:e}),this.props.setVideo(e)}},{key:"toggleAudio",value:function(){var e=this.localStream.getAudioTracks()[0].enabled=!this.state.audio;this.setState({audio:e}),this.props.setAudio(e)}},{key:"handleHangup",value:function(){this.props.media.hangup()}},{key:"render",value:function(){return o.a.createElement(Ps,Es()({},this.state,{toggleVideo:this.toggleVideo,toggleAudio:this.toggleAudio,send:this.send,handleHangup:this.handleHangup,handleInput:this.handleInput,handleInvitation:this.handleInvitation}))}}]),n}(o.a.Component);Ns.propTypes={socket:u.PropTypes.object.isRequired,getUserMedia:u.PropTypes.object.isRequired,audio:u.PropTypes.bool.isRequired,video:u.PropTypes.bool.isRequired,setVideo:u.PropTypes.func.isRequired,setRoomData:u.PropTypes.func.isRequired,setAudio:u.PropTypes.func.isRequired,media:u.PropTypes.instanceOf(Ss)};var Rs=ue((function(e){return{video:e.video,audio:e.audio,roomData:e.roomData,zoom:e.controlParams.zoom}}),(function(e){return{setVideo:function(e){return Ce.dispatch({type:"SET_VIDEO",video:e})},setAudio:function(e){return Ce.dispatch({type:"SET_AUDIO",audio:e})},setRoomData:function(e){return Ce.dispatch({type:"SET_ROOM_DATA",roomData:e})}}}))(Ns),As=n(26),Ds=n(34),Vs=n(28),Ms=n(21);let Fs=!1;try{Fs="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){}const Ls=Fs;var zs=n(9);function js(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||Ls))return new XMLHttpRequest}catch(e){}if(!t)try{return new(zs.a[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}var qs=n(16),$s=n(17);function Bs(){}const Us=null!=new js({xdomain:!1}).responseType;class Ws extends As.a{constructor(e){if(super(e),this.polling=!1,"undefined"!=typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}const t=e&&e.forceBase64;this.supportsBinary=Us&&!t}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let e=0;this.polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){Object(Ms.b)(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,Object(Ms.d)(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.query||{};const t=this.opts.secure?"https":"http";let n="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=Object(Ds.a)()),this.supportsBinary||e.sid||(e.b64=1),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);const r=Object(Vs.b)(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}request(e={}){return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new Hs(this.uri(),e)}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}class Hs extends qs.a{constructor(e,t){super(),Object($s.b)(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.create()}create(){const e=Object($s.c)(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;const t=this.xhr=new js(e);try{t.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(let e in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(e)&&t.setRequestHeader(e,this.opts.extraHeaders[e])}}catch(e){}if("POST"===this.method)try{t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(t.timeout=this.opts.requestTimeout),t.onreadystatechange=()=>{4===t.readyState&&(200===t.status||1223===t.status?this.onLoad():this.setTimeoutFn(()=>{this.onError("number"==typeof t.status?t.status:0)},0))},t.send(this.data)}catch(e){return void this.setTimeoutFn(()=>{this.onError(e)},0)}"undefined"!=typeof document&&(this.index=Hs.requestsCount++,Hs.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=Bs,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete Hs.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}if(Hs.requestsCount=0,Hs.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",Qs);else if("function"==typeof addEventListener){const e="onpagehide"in zs.a?"pagehide":"unload";addEventListener(e,Qs,!1)}function Qs(){for(let e in Hs.requests)Hs.requests.hasOwnProperty(e)&&Hs.requests[e].abort()}const Gs={websocket:n(56).a,polling:Ws},Ks=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Js=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Xs(e){const t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let i=Ks.exec(e||""),o={},a=14;for(;a--;)o[Js[a]]=i[a]||"";return-1!=n&&-1!=r&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=function(e,t){const n=t.replace(/\/{2,9}/g,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||n.splice(0,1);"/"==t.slice(-1)&&n.splice(n.length-1,1);return n}(0,o.path),o.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,o.query),o}class Ys extends qs.a{constructor(e,t={}){super(),this.writeBuffer=[],e&&"object"==typeof e&&(t=e,e=null),e?(e=Xs(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=Xs(t.host).host),Object($s.b)(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=Object(Vs.a)(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=Ms.e,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new Gs[e](n)}open(){let e;if(this.opts.rememberUpgrade&&Ys.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",e=>this.onClose("transport close",e))}probe(e){let t=this.createTransport(e),n=!1;Ys.priorWebsocketSuccess=!1;const r=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Ys.priorWebsocketSuccess="websocket"===t.name,this.transport.pause(()=>{n||"closed"!==this.readyState&&(u(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}}))};function i(){n||(n=!0,u(),t.close(),t=null)}const o=e=>{const n=new Error("probe error: "+e);n.transport=t.name,i(),this.emitReserved("upgradeError",n)};function a(){o("transport closed")}function s(){o("socket closed")}function l(e){t&&e.name!==t.name&&i()}const u=()=>{t.removeListener("open",r),t.removeListener("error",o),t.removeListener("close",a),this.off("close",s),this.off("upgrading",l)};t.once("open",r),t.once("error",o),t.once("close",a),this.once("close",s),this.once("upgrading",l),t.open()}onOpen(){if(this.readyState="open",Ys.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade){let e=0;const t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){const n=this.writeBuffer[t].data;if(n&&(e+=Object($s.a)(n)),t>0&&e>this.maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}write(e,t,n){return this.sendPacket("message",e,t,n),this}send(e,t,n){return this.sendPacket("message",e,t,n),this}sendPacket(e,t,n,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof n&&(r=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}onError(e){Ys.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const t=[];let n=0;const r=e.length;for(;n<r;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}Ys.protocol=Ms.e;var Zs=n(18);Ys.protocol;const el="function"==typeof ArrayBuffer,tl=Object.prototype.toString,nl="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===tl.call(Blob),rl="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===tl.call(File);function il(e){return el&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||nl&&e instanceof Blob||rl&&e instanceof File}function ol(e){const t=[],n=e.data,r=e;return r.data=function e(t,n){if(!t)return t;if(il(t)){const e={_placeholder:!0,num:n.length};return n.push(t),e}if(Array.isArray(t)){const r=new Array(t.length);for(let i=0;i<t.length;i++)r[i]=e(t[i],n);return r}if("object"==typeof t&&!(t instanceof Date)){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e(t[i],n));return r}return t}(n,t),r.attachments=t.length,{packet:r,buffers:t}}function al(e,t){return e.data=function e(t,n){if(!t)return t;if(t&&!0===t._placeholder){if("number"==typeof t.num&&t.num>=0&&t.num<n.length)return n[t.num];throw new Error("illegal attachments")}if(Array.isArray(t))for(let r=0;r<t.length;r++)t[r]=e(t[r],n);else if("object"==typeof t)for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(t[r]=e(t[r],n));return t}(e.data,t),delete e.attachments,e}const sl=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ll=5;var ul;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(ul||(ul={}));class cl{constructor(e){this.replacer=e}encode(e){return e.type!==ul.EVENT&&e.type!==ul.ACK||!function e(t,n){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(e(t[n]))return!0;return!1}if(il(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1===arguments.length)return e(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return!0;return!1}(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===ul.EVENT?ul.BINARY_EVENT:ul.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==ul.BINARY_EVENT&&e.type!==ul.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=ol(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}function pl(e){return"[object Object]"===Object.prototype.toString.call(e)}class dl extends qs.a{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===ul.BINARY_EVENT;n||t.type===ul.BINARY_ACK?(t.type=n?ul.EVENT:ul.ACK,this.reconstructor=new hl(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!il(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===ul[n.type])throw new Error("unknown packet type "+n.type);if(n.type===ul.BINARY_EVENT||n.type===ul.BINARY_ACK){const r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const i=e.substring(r,t);if(i!=Number(i)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(i)}if("/"===e.charAt(t+1)){const r=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(r,t)}else n.nsp="/";const r=e.charAt(t+1);if(""!==r&&Number(r)==r){const r=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(!dl.isPayloadValid(n.type,r))throw new Error("invalid payload");n.data=r}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(e){return!1}}static isPayloadValid(e,t){switch(e){case ul.CONNECT:return pl(t);case ul.DISCONNECT:return void 0===t;case ul.CONNECT_ERROR:return"string"==typeof t||pl(t);case ul.EVENT:case ul.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===sl.indexOf(t[0]));case ul.ACK:case ul.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class hl{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=al(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function fl(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const ml=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class gl extends qs.a{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[fl(e,"open",this.onopen.bind(this)),fl(e,"packet",this.onpacket.bind(this)),fl(e,"error",this.onerror.bind(this)),fl(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(ml.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const n={type:ul.EVENT,data:t,options:{}};if(n.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const e=this.ids++,r=t.pop();this._registerAckCallback(e,r),n.id=e}const r=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!r||!this.connected)||(this.connected?(this.notifyOutgoingListeners(n),this.packet(n)):this.sendBuffer.push(n)),this.flags={},this}_registerAckCallback(e,t){var n;const r=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===r)return void(this.acks[e]=t);const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))},r);this.acks[e]=(...e)=>{this.io.clearTimeoutFn(i),t.apply(this,[null,...e])}}emitWithAck(e,...t){const n=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise((r,i)=>{t.push((e,t)=>n?e?i(e):r(t):r(e)),this.emit(e,...t)})}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((e,...r)=>{if(n!==this._queue[0])return;return null!==e?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...r)),n.pending=!1,this._drainQueue()}),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:ul.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case ul.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ul.EVENT:case ul.BINARY_EVENT:this.onevent(e);break;case ul.ACK:case ul.BINARY_ACK:this.onack(e);break;case ul.DISCONNECT:this.ondisconnect();break;case ul.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...r){n||(n=!0,t.packet({type:ul.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];"function"==typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ul.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function yl(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}yl.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},yl.prototype.reset=function(){this.attempts=0},yl.prototype.setMin=function(e){this.ms=e},yl.prototype.setMax=function(e){this.max=e},yl.prototype.setJitter=function(e){this.jitter=e};class vl extends qs.a{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,Object($s.b)(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(n=t.randomizationFactor)&&void 0!==n?n:.5),this.backoff=new yl({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const i=t.parser||r;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Ys(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const r=fl(t,"open",(function(){n.onopen(),e&&e()})),i=fl(t,"error",t=>{n.cleanup(),n._readyState="closed",this.emitReserved("error",t),e?e(t):n.maybeReconnectOnOpen()});if(!1!==this._timeout){const e=this._timeout;0===e&&r();const n=this.setTimeoutFn(()=>{r(),t.close(),t.emit("error",new Error("timeout"))},e);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}return this.subs.push(r),this.subs.push(i),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(fl(e,"ping",this.onping.bind(this)),fl(e,"data",this.ondata.bind(this)),fl(e,"error",this.onerror.bind(this)),fl(e,"close",this.onclose.bind(this)),fl(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(e){this.onclose("parse error",e)}}ondecoded(e){Object(Zs.c)(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new gl(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const e of t){if(this.nsps[e].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push((function(){clearTimeout(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const bl={};function xl(e,t){"object"==typeof e&&(t=e,e=void 0);const n=function(e,t="",n){let r=e;n=n||"undefined"!=typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==n?n.protocol+"//"+e:"https://"+e),r=Xs(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),r=n.source,i=n.id,o=n.path,a=bl[i]&&o in bl[i].nsps;let s;return t.forceNew||t["force new connection"]||!1===t.multiplex||a?s=new vl(r,t):(bl[i]||(bl[i]=new vl(r,t)),s=bl[i]),n.query&&!t.query&&(t.query=n.queryKey),s.socket(n.path,t)}Object.assign(xl,{Manager:vl,Socket:gl,io:xl,connect:xl});var wl=n(30);function _l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_t()(e);if(t){var i=_t()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xt()(this,n)}}var Cl=n(2),Sl=(Cl.SOCKET_CMDS,Cl.DATA_TYPES,Cl.NAMESPACES),kl=function(e){vt()(n,e);var t=_l(n);function n(e){var r,i;return dt()(this,n),(i=t.call(this,e)).getUserMedia=navigator.mediaDevices.getUserMedia({audio:!0,video:{width:{min:1280,ideal:1280},height:{min:720,ideal:720},zoom:!0}}).catch((function(e){return alert("getUserMedia() error: "+e.name)})),i.state={survey:!1},i.socket=xl.connect("/".concat(Sl.CHAT)),console.log("Created Socket: ".concat(null===(r=i.socket)||void 0===r?void 0:r.nsp),i.socket),i}return ft()(n,[{key:"componentDidMount",value:function(){this.props.createRoom()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{class:"main-call-container"},o.a.createElement(Ss,{room:this.props.match.params.room,media:function(t){return e.media=t},socket:this.socket,getUserMedia:this.getUserMedia,username:this.props.match.params.room}),o.a.createElement(Rs,{socket:this.socket,media:this.media,getUserMedia:this.getUserMedia}))}}]),n}(i.Component),El=ue((function(e){return{rooms:new Set(pe()(e.rooms))}}),(function(e,t){return{createRoom:function(){return Ce.dispatch({type:"ADD_ROOM",room:t.match.params.room})}}}))(kl);function Tl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_t()(e);if(t){var i=_t()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xt()(this,n)}}var Il=n(2),Pl=(Il.SOCKET_CMDS,Il.DATA_TYPES,Il.NAMESPACES,function(e){vt()(n,e);var t=Tl(n);function n(e){var r;return dt()(this,n),(r=t.call(this,e)).getUserMedia=navigator.mediaDevices.getUserMedia({audio:!0,video:{width:{min:1280,ideal:1280},height:{min:720,ideal:720},zoom:!0}}).catch((function(e){return alert("getUserMedia() error: "+e.name)})),r}return ft()(n,[{key:"render",value:function(){var e=this;return o.a.createElement(Ss,{media:function(t){return e.media=t},getUserMedia:this.getUserMedia})}}]),n}(i.Component)),Ol=n(57),Nl=n.n(Ol);var Rl=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(e){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),Al="-moz-",Dl="-webkit-",Vl="comm",Ml="rule",Fl="decl",Ll=Math.abs,zl=String.fromCharCode;function jl(e){return e.trim()}function ql(e,t,n){return e.replace(t,n)}function $l(e,t){return e.indexOf(t)}function Bl(e,t){return 0|e.charCodeAt(t)}function Ul(e,t,n){return e.slice(t,n)}function Wl(e){return e.length}function Hl(e){return e.length}function Ql(e,t){return t.push(e),e}function Gl(e,t){return e.map(t).join("")}var Kl=1,Jl=1,Xl=0,Yl=0,Zl=0,eu="";function tu(e,t,n,r,i,o,a){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:Kl,column:Jl,length:a,return:""}}function nu(e,t,n){return tu(e,t.root,t.parent,n,t.props,t.children,0)}function ru(){return Zl=Yl>0?Bl(eu,--Yl):0,Jl--,10===Zl&&(Jl=1,Kl--),Zl}function iu(){return Zl=Yl<Xl?Bl(eu,Yl++):0,Jl++,10===Zl&&(Jl=1,Kl++),Zl}function ou(){return Bl(eu,Yl)}function au(){return Yl}function su(e,t){return Ul(eu,e,t)}function lu(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function uu(e){return Kl=Jl=1,Xl=Wl(eu=e),Yl=0,[]}function cu(e){return eu="",e}function pu(e){return jl(su(Yl-1,function e(t){for(;iu();)switch(Zl){case t:return Yl;case 34:case 39:return e(34===t||39===t?t:Zl);case 40:41===t&&e(t);break;case 92:iu()}return Yl}(91===e?e+2:40===e?e+1:e)))}function du(e){for(;(Zl=ou())&&Zl<33;)iu();return lu(e)>2||lu(Zl)>3?"":" "}function hu(e,t){for(;--t&&iu()&&!(Zl<48||Zl>102||Zl>57&&Zl<65||Zl>70&&Zl<97););return su(e,au()+(t<6&&32==ou()&&32==iu()))}function fu(e,t){for(;iu()&&e+Zl!==57&&(e+Zl!==84||47!==ou()););return"/*"+su(t,Yl-1)+"*"+zl(47===e?e:iu())}function mu(e){for(;!lu(ou());)iu();return su(e,Yl)}function gu(e){return cu(function e(t,n,r,i,o,a,s,l,u){var c=0,p=0,d=s,h=0,f=0,m=0,g=1,y=1,v=1,b=0,x="",w=o,_=a,C=i,S=x;for(;y;)switch(m=b,b=iu()){case 34:case 39:case 91:case 40:S+=pu(b);break;case 9:case 10:case 13:case 32:S+=du(m);break;case 92:S+=hu(au()-1,7);continue;case 47:switch(ou()){case 42:case 47:Ql(vu(fu(iu(),au()),n,r),u);break;default:S+="/"}break;case 123*g:l[c++]=Wl(S)*v;case 125*g:case 59:case 0:switch(b){case 0:case 125:y=0;case 59+p:f>0&&Wl(S)-d&&Ql(f>32?bu(S+";",i,r,d-1):bu(ql(S," ","")+";",i,r,d-2),u);break;case 59:S+=";";default:if(Ql(C=yu(S,n,r,c,p,o,l,x,w=[],_=[],d),a),123===b)if(0===p)e(S,n,C,C,w,a,d,l,_);else switch(h){case 100:case 109:case 115:e(t,C,C,i&&Ql(yu(t,C,C,0,0,o,l,x,o,w=[],d),_),o,_,d,l,i?w:_);break;default:e(S,C,C,C,[""],_,d,l,_)}}c=p=f=0,g=v=1,x=S="",d=s;break;case 58:d=1+Wl(S),f=m;default:if(g<1)if(123==b)--g;else if(125==b&&0==g++&&125==ru())continue;switch(S+=zl(b),b*g){case 38:v=p>0?1:(S+="\f",-1);break;case 44:l[c++]=(Wl(S)-1)*v,v=1;break;case 64:45===ou()&&(S+=pu(iu())),h=ou(),p=Wl(x=S+=mu(au())),b++;break;case 45:45===m&&2==Wl(S)&&(g=0)}}return a}("",null,null,null,[""],e=uu(e),0,[0],e))}function yu(e,t,n,r,i,o,a,s,l,u,c){for(var p=i-1,d=0===i?o:[""],h=Hl(d),f=0,m=0,g=0;f<r;++f)for(var y=0,v=Ul(e,p+1,p=Ll(m=a[f])),b=e;y<h;++y)(b=jl(m>0?d[y]+" "+v:ql(v,/&\f/g,d[y])))&&(l[g++]=b);return tu(e,t,n,0===i?Ml:s,l,u,c)}function vu(e,t,n){return tu(e,t,n,Vl,zl(Zl),Ul(e,2,-2),0)}function bu(e,t,n,r){return tu(e,t,n,Fl,Ul(e,0,r),Ul(e,r+1,-1),r)}function xu(e,t){switch(function(e,t){return(((t<<2^Bl(e,0))<<2^Bl(e,1))<<2^Bl(e,2))<<2^Bl(e,3)}(e,t)){case 5103:return Dl+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Dl+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Dl+e+Al+e+"-ms-"+e+e;case 6828:case 4268:return Dl+e+"-ms-"+e+e;case 6165:return Dl+e+"-ms-flex-"+e+e;case 5187:return Dl+e+ql(e,/(\w+).+(:[^]+)/,Dl+"box-$1$2-ms-flex-$1$2")+e;case 5443:return Dl+e+"-ms-flex-item-"+ql(e,/flex-|-self/,"")+e;case 4675:return Dl+e+"-ms-flex-line-pack"+ql(e,/align-content|flex-|-self/,"")+e;case 5548:return Dl+e+"-ms-"+ql(e,"shrink","negative")+e;case 5292:return Dl+e+"-ms-"+ql(e,"basis","preferred-size")+e;case 6060:return Dl+"box-"+ql(e,"-grow","")+Dl+e+"-ms-"+ql(e,"grow","positive")+e;case 4554:return Dl+ql(e,/([^-])(transform)/g,"$1"+Dl+"$2")+e;case 6187:return ql(ql(ql(e,/(zoom-|grab)/,Dl+"$1"),/(image-set)/,Dl+"$1"),e,"")+e;case 5495:case 3959:return ql(e,/(image-set\([^]*)/,Dl+"$1$`$1");case 4968:return ql(ql(e,/(.+:)(flex-)?(.*)/,Dl+"box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+Dl+e+e;case 4095:case 3583:case 4068:case 2532:return ql(e,/(.+)-inline(.+)/,Dl+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Wl(e)-1-t>6)switch(Bl(e,t+1)){case 109:if(45!==Bl(e,t+4))break;case 102:return ql(e,/(.+:)(.+)-([^]+)/,"$1"+Dl+"$2-$3$1"+Al+(108==Bl(e,t+3)?"$3":"$2-$3"))+e;case 115:return~$l(e,"stretch")?xu(ql(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==Bl(e,t+1))break;case 6444:switch(Bl(e,Wl(e)-3-(~$l(e,"!important")&&10))){case 107:return ql(e,":",":"+Dl)+e;case 101:return ql(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Dl+(45===Bl(e,14)?"inline-":"")+"box$3$1"+Dl+"$2$3$1-ms-$2box$3")+e}break;case 5936:switch(Bl(e,t+11)){case 114:return Dl+e+"-ms-"+ql(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Dl+e+"-ms-"+ql(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Dl+e+"-ms-"+ql(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Dl+e+"-ms-"+e+e}return e}function wu(e,t){for(var n="",r=Hl(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function _u(e,t,n,r){switch(e.type){case"@import":case Fl:return e.return=e.return||e.value;case Vl:return"";case Ml:e.value=e.props.join(",")}return Wl(n=wu(e.children,r))?e.return=e.value+"{"+n+"}":""}var Cu=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}},Su=function(e,t){return cu(function(e,t){var n=-1,r=44;do{switch(lu(r)){case 0:38===r&&12===ou()&&(t[n]=1),e[n]+=mu(Yl-1);break;case 2:e[n]+=pu(r);break;case 4:if(44===r){e[++n]=58===ou()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=zl(r)}}while(r=iu());return e}(uu(e),t))},ku=new WeakMap,Eu=function(e){if("rule"===e.type&&e.parent&&e.length){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||ku.get(n))&&!r){ku.set(e,!0);for(var i=[],o=Su(t,i),a=n.props,s=0,l=0;s<o.length;s++)for(var u=0;u<a.length;u++,l++)e.props[l]=i[s]?o[s].replace(/&\f/g,a[u]):a[u]+" "+o[s]}}},Tu=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},Iu=[function(e,t,n,r){if(!e.return)switch(e.type){case Fl:e.return=xu(e.value,e.length);break;case"@keyframes":return wu([nu(ql(e.value,"@","@"+Dl),e,"")],r);case Ml:if(e.length)return Gl(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return wu([nu(ql(t,/:(read-\w+)/,":-moz-$1"),e,"")],r);case"::placeholder":return wu([nu(ql(t,/:(plac\w+)/,":"+Dl+"input-$1"),e,""),nu(ql(t,/:(plac\w+)/,":-moz-$1"),e,""),nu(ql(t,/:(plac\w+)/,"-ms-input-$1"),e,"")],r)}return""}))}}],Pu=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||Iu;var i,o,a={},s=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)a[t[n]]=!0;s.push(e)}));var l,u,c=[_u,(u=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&u(e)})],p=function(e){var t=Hl(e);return function(n,r,i,o){for(var a="",s=0;s<t;s++)a+=e[s](n,r,i,o)||"";return a}}([Eu,Tu].concat(r,c));o=function(e,t,n,r){l=n,wu(gu(e?e+"{"+t.styles+"}":t.styles),p),r&&(d.inserted[t.name]=!0)};var d={key:t,sheet:new Rl({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend}),nonce:e.nonce,inserted:a,registered:{},insert:o};return d.sheet.hydrate(s),d};function Ou(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var Nu=function(e,t,n){var r=e.key+"-"+t.name;if(!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles),void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0);i=i.next}while(void 0!==i)}};var Ru=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},Au={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Du=/[A-Z]|^ms/g,Vu=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Mu=function(e){return 45===e.charCodeAt(1)},Fu=function(e){return null!=e&&"boolean"!=typeof e},Lu=Cu((function(e){return Mu(e)?e:e.replace(Du,"-$&").toLowerCase()})),zu=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(Vu,(function(e,t,n){return qu={name:t,styles:n,next:qu},t}))}return 1===Au[e]||Mu(e)||"number"!=typeof t||0===t?t:t+"px"};function ju(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return qu={name:n.name,styles:n.styles,next:qu},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)qu={name:r.name,styles:r.styles,next:qu},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=ju(e,t,n[i])+";";else for(var o in n){var a=n[o];if("object"!=typeof a)null!=t&&void 0!==t[a]?r+=o+"{"+t[a]+"}":Fu(a)&&(r+=Lu(o)+":"+zu(o,a)+";");else if(!Array.isArray(a)||"string"!=typeof a[0]||null!=t&&void 0!==t[a[0]]){var s=ju(e,t,a);switch(o){case"animation":case"animationName":r+=Lu(o)+":"+s+";";break;default:r+=o+"{"+s+"}"}}else for(var l=0;l<a.length;l++)Fu(a[l])&&(r+=Lu(o)+":"+zu(o,a[l])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=qu,o=n(e);return qu=i,ju(e,t,o)}break;case"string":}if(null==t)return n;var a=t[n];return void 0!==a?a:n}var qu,$u=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var Bu=function(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";qu=void 0;var o=e[0];null==o||void 0===o.raw?(r=!1,i+=ju(n,t,o)):i+=o[0];for(var a=1;a<e.length;a++)i+=ju(n,t,e[a]),r&&(i+=o[a]);$u.lastIndex=0;for(var s,l="";null!==(s=$u.exec(i));)l+="-"+s[1];return{name:Ru(i)+l,styles:i,next:qu}},Uu=Object.prototype.hasOwnProperty,Wu=Object(i.createContext)("undefined"!=typeof HTMLElement?Pu({key:"css"}):null),Hu=Wu.Provider,Qu=function(e){return Object(i.forwardRef)((function(t,n){var r=Object(i.useContext)(Wu);return e(t,r,n)}))},Gu=Object(i.createContext)({});var Ku="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Ju=function(e,t){var n={};for(var r in t)Uu.call(t,r)&&(n[r]=t[r]);return n[Ku]=e,n},Xu=Qu((function(e,t,n){var r=e.css;"string"==typeof r&&void 0!==t.registered[r]&&(r=t.registered[r]);var o=e[Ku],a=[r],s="";"string"==typeof e.className?s=Ou(t.registered,a,e.className):null!=e.className&&(s=e.className+" ");var l=Bu(a,void 0,"function"==typeof r||Array.isArray(r)?Object(i.useContext)(Gu):void 0);Nu(t,l,"string"==typeof o);s+=t.key+"-"+l.name;var u={};for(var c in e)Uu.call(e,c)&&"css"!==c&&c!==Ku&&(u[c]=e[c]);return u.ref=n,u.className=s,Object(i.createElement)(o,u)}));var Yu=function(e,t){var n=arguments;if(null==t||!Uu.call(t,"css"))return i.createElement.apply(void 0,n);var r=n.length,o=new Array(r);o[0]=Xu,o[1]=Ju(e,t);for(var a=2;a<r;a++)o[a]=n[a];return i.createElement.apply(null,o)};function Zu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Bu(t)}var ec=function e(t){for(var n=t.length,r=0,i="";r<n;r++){var o=t[r];if(null!=o){var a=void 0;switch(typeof o){case"boolean":break;case"object":if(Array.isArray(o))a=e(o);else for(var s in a="",o)o[s]&&s&&(a&&(a+=" "),a+=s);break;default:a=o}a&&(i&&(i+=" "),i+=a)}}return i};function tc(e,t,n){var r=[],i=Ou(e,r,n);return r.length<2?n:i+t(r)}var nc=Qu((function(e,t){var n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=Bu(n,t.registered);return Nu(t,i,!1),t.key+"-"+i.name},r={css:n,cx:function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return tc(t.registered,n,ec(r))},theme:Object(i.useContext)(Gu)},o=e.children(r);return!0,o}));var rc=n(39),ic=n.n(rc);function oc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ac(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function sc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lc(Object(n),!0).forEach((function(t){sc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function cc(e){return(cc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pc(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=cc(e);if(t){var i=cc(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return pc(this,n)}}var hc=function(){};function fc(e,t){return t?"-"===t[0]?e+t:e+"__"+t:e}function mc(e,t,n){var r=[n];if(t&&e)for(var i in t)t.hasOwnProperty(i)&&t[i]&&r.push("".concat(fc(e,i)));return r.filter((function(e){return e})).map((function(e){return String(e).trim()})).join(" ")}var gc=function(e){return Array.isArray(e)?e.filter(Boolean):"object"===Bi(e)&&null!==e?[e]:[]},yc=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,uc({},qt(e,["className","clearValue","cx","getStyles","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"]))};function vc(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function bc(e){return vc(e)?window.pageYOffset:e.scrollTop}function xc(e,t){vc(e)?window.scrollTo(0,t):e.scrollTop=t}function wc(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t}function _c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:hc,i=bc(e),o=t-i,a=10,s=0;function l(){var t=wc(s+=a,i,o,n);xc(e,t),s<n?window.requestAnimationFrame(l):r(e)}l()}function Cc(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}var Sc=!1,kc={get passive(){return Sc=!0}},Ec="undefined"!=typeof window?window:{};Ec.addEventListener&&Ec.removeEventListener&&(Ec.addEventListener("p",hc,kc),Ec.removeEventListener("p",hc,!1));var Tc=Sc;function Ic(e){var t=e.maxHeight,n=e.menuEl,r=e.minHeight,i=e.placement,o=e.shouldScroll,a=e.isFixedPosition,s=e.theme.spacing,l=function(e){var t=getComputedStyle(e),n="absolute"===t.position,r=/(auto|scroll)/,i=document.documentElement;if("fixed"===t.position)return i;for(var o=e;o=o.parentElement;)if(t=getComputedStyle(o),(!n||"static"!==t.position)&&r.test(t.overflow+t.overflowY+t.overflowX))return o;return i}(n),u={placement:"bottom",maxHeight:t};if(!n||!n.offsetParent)return u;var c=l.getBoundingClientRect().height,p=n.getBoundingClientRect(),d=p.bottom,h=p.height,f=p.top,m=n.offsetParent.getBoundingClientRect().top,g=window.innerHeight,y=bc(l),v=parseInt(getComputedStyle(n).marginBottom,10),b=parseInt(getComputedStyle(n).marginTop,10),x=m-b,w=g-f,_=x+y,C=c-y-f,S=d-g+y+v,k=y+f-b;switch(i){case"auto":case"bottom":if(w>=h)return{placement:"bottom",maxHeight:t};if(C>=h&&!a)return o&&_c(l,S,160),{placement:"bottom",maxHeight:t};if(!a&&C>=r||a&&w>=r)return o&&_c(l,S,160),{placement:"bottom",maxHeight:a?w-v:C-v};if("auto"===i||a){var E=t,T=a?x:_;return T>=r&&(E=Math.min(T-v-s.controlHeight,t)),{placement:"top",maxHeight:E}}if("bottom"===i)return o&&xc(l,S),{placement:"bottom",maxHeight:t};break;case"top":if(x>=h)return{placement:"top",maxHeight:t};if(_>=h&&!a)return o&&_c(l,k,160),{placement:"top",maxHeight:t};if(!a&&_>=r||a&&x>=r){var I=t;return(!a&&_>=r||a&&x>=r)&&(I=a?x-b:_-b),o&&_c(l,k,160),{placement:"top",maxHeight:I}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return u}var Pc=function(e){return"auto"===e?"bottom":e},Oc=Object(i.createContext)({getPortalPlacement:null}),Nc=function(e){ac(n,e);var t=dc(n);function n(){var e;oc(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={maxHeight:e.props.maxMenuHeight,placement:null},e.getPlacement=function(t){var n=e.props,r=n.minMenuHeight,i=n.maxMenuHeight,o=n.menuPlacement,a=n.menuPosition,s=n.menuShouldScrollIntoView,l=n.theme;if(t){var u="fixed"===a,c=Ic({maxHeight:i,menuEl:t,minHeight:r,placement:o,shouldScroll:s&&!u,isFixedPosition:u,theme:l}),p=e.context.getPortalPlacement;p&&p(c),e.setState(c)}},e.getUpdatedProps=function(){var t=e.props.menuPlacement,n=e.state.placement||Pc(t);return uc(uc({},e.props),{},{placement:n,maxHeight:e.state.maxHeight})},e}return Wt(n,[{key:"render",value:function(){return(0,this.props.children)({ref:this.getPlacement,placerProps:this.getUpdatedProps()})}}]),n}(i.Component);Nc.contextType=Oc;var Rc=function(e){var t=e.theme,n=t.spacing.baseUnit;return{color:t.colors.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px"),textAlign:"center"}},Ac=Rc,Dc=Rc,Vc=function(e){var t=e.children,n=e.className,r=e.cx,i=e.getStyles,o=e.innerProps;return Yu("div",m({css:i("noOptionsMessage",e),className:r({"menu-notice":!0,"menu-notice--no-options":!0},n)},o),t)};Vc.defaultProps={children:"No options"};var Mc=function(e){var t=e.children,n=e.className,r=e.cx,i=e.getStyles,o=e.innerProps;return Yu("div",m({css:i("loadingMessage",e),className:r({"menu-notice":!0,"menu-notice--loading":!0},n)},o),t)};Mc.defaultProps={children:"Loading..."};var Fc,Lc=function(e){ac(n,e);var t=dc(n);function n(){var e;oc(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={placement:null},e.getPortalPlacement=function(t){var n=t.placement;n!==Pc(e.props.menuPlacement)&&e.setState({placement:n})},e}return Wt(n,[{key:"render",value:function(){var e=this.props,t=e.appendTo,n=e.children,r=e.className,i=e.controlElement,o=e.cx,s=e.innerProps,l=e.menuPlacement,u=e.menuPosition,c=e.getStyles,p="fixed"===u;if(!t&&!p||!i)return null;var d=this.state.placement||Pc(l),h=function(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}(i),f=p?0:window.pageYOffset,g=h[d]+f,y=Yu("div",m({css:c("menuPortal",{offset:g,position:u,rect:h}),className:o({"menu-portal":!0},r)},s),n);return Yu(Oc.Provider,{value:{getPortalPlacement:this.getPortalPlacement}},t?Object(a.createPortal)(y,t):y)}}]),n}(i.Component);var zc,jc,qc={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},$c=function(e){var t=e.size,n=qt(e,["size"]);return Yu("svg",m({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:qc},n))},Bc=function(e){return Yu($c,m({size:20},e),Yu("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},Uc=function(e){return Yu($c,m({size:20},e),Yu("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Wc=function(e){var t=e.isFocused,n=e.theme,r=n.spacing.baseUnit,i=n.colors;return{label:"indicatorContainer",color:t?i.neutral60:i.neutral20,display:"flex",padding:2*r,transition:"color 150ms",":hover":{color:t?i.neutral80:i.neutral40}}},Hc=Wc,Qc=Wc,Gc=function(){var e=Zu.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(Fc||(zc=["\n  0%, 80%, 100% { opacity: 0; }\n  40% { opacity: 1; }\n"],jc||(jc=zc.slice(0)),Fc=Object.freeze(Object.defineProperties(zc,{raw:{value:Object.freeze(jc)}})))),Kc=function(e){var t=e.delay,n=e.offset;return Yu("span",{css:Zu({animation:"".concat(Gc," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":null,height:"1em",verticalAlign:"top",width:"1em"},"","")})},Jc=function(e){var t=e.className,n=e.cx,r=e.getStyles,i=e.innerProps,o=e.isRtl;return Yu("div",m({css:r("loadingIndicator",e),className:n({indicator:!0,"loading-indicator":!0},t)},i),Yu(Kc,{delay:0,offset:o}),Yu(Kc,{delay:160,offset:!0}),Yu(Kc,{delay:320,offset:!o}))};Jc.defaultProps={size:4};var Xc=function(e){return{label:"input",background:0,border:0,fontSize:"inherit",opacity:e?0:1,outline:0,padding:0,color:"inherit"}},Yc=function(e){var t=e.children,n=e.innerProps;return Yu("div",n,t)},Zc=Yc,ep=Yc;var tp=function(e){var t=e.children,n=e.className,r=e.components,i=e.cx,o=e.data,a=e.getStyles,s=e.innerProps,l=e.isDisabled,u=e.removeProps,c=e.selectProps,p=r.Container,d=r.Label,h=r.Remove;return Yu(nc,null,(function(r){var f=r.css,m=r.cx;return Yu(p,{data:o,innerProps:uc({className:m(f(a("multiValue",e)),i({"multi-value":!0,"multi-value--is-disabled":l},n))},s),selectProps:c},Yu(d,{data:o,innerProps:{className:m(f(a("multiValueLabel",e)),i({"multi-value__label":!0},n))},selectProps:c},t),Yu(h,{data:o,innerProps:uc({className:m(f(a("multiValueRemove",e)),i({"multi-value__remove":!0},n))},u),selectProps:c}))}))};tp.defaultProps={cropWithEllipsis:!0};var np={ClearIndicator:function(e){var t=e.children,n=e.className,r=e.cx,i=e.getStyles,o=e.innerProps;return Yu("div",m({css:i("clearIndicator",e),className:r({indicator:!0,"clear-indicator":!0},n)},o),t||Yu(Bc,null))},Control:function(e){var t=e.children,n=e.cx,r=e.getStyles,i=e.className,o=e.isDisabled,a=e.isFocused,s=e.innerRef,l=e.innerProps,u=e.menuIsOpen;return Yu("div",m({ref:s,css:r("control",e),className:n({control:!0,"control--is-disabled":o,"control--is-focused":a,"control--menu-is-open":u},i)},l),t)},DropdownIndicator:function(e){var t=e.children,n=e.className,r=e.cx,i=e.getStyles,o=e.innerProps;return Yu("div",m({css:i("dropdownIndicator",e),className:r({indicator:!0,"dropdown-indicator":!0},n)},o),t||Yu(Uc,null))},DownChevron:Uc,CrossIcon:Bc,Group:function(e){var t=e.children,n=e.className,r=e.cx,i=e.getStyles,o=e.Heading,a=e.headingProps,s=e.innerProps,l=e.label,u=e.theme,c=e.selectProps;return Yu("div",m({css:i("group",e),className:r({group:!0},n)},s),Yu(o,m({},a,{selectProps:c,theme:u,getStyles:i,cx:r}),l),Yu("div",null,t))},GroupHeading:function(e){var t=e.getStyles,n=e.cx,r=e.className,i=yc(e);i.data;var o=qt(i,["data"]);return Yu("div",m({css:t("groupHeading",e),className:n({"group-heading":!0},r)},o))},IndicatorsContainer:function(e){var t=e.children,n=e.className,r=e.cx,i=e.innerProps,o=e.getStyles;return Yu("div",m({css:o("indicatorsContainer",e),className:r({indicators:!0},n)},i),t)},IndicatorSeparator:function(e){var t=e.className,n=e.cx,r=e.getStyles,i=e.innerProps;return Yu("span",m({},i,{css:r("indicatorSeparator",e),className:n({"indicator-separator":!0},t)}))},Input:function(e){var t=e.className,n=e.cx,r=e.getStyles,i=yc(e),o=i.innerRef,a=i.isDisabled,s=i.isHidden,l=qt(i,["innerRef","isDisabled","isHidden"]);return Yu("div",{css:r("input",e)},Yu(ic.a,m({className:n({input:!0},t),inputRef:o,inputStyle:Xc(s),disabled:a},l)))},LoadingIndicator:Jc,Menu:function(e){var t=e.children,n=e.className,r=e.cx,i=e.getStyles,o=e.innerRef,a=e.innerProps;return Yu("div",m({css:i("menu",e),className:r({menu:!0},n),ref:o},a),t)},MenuList:function(e){var t=e.children,n=e.className,r=e.cx,i=e.getStyles,o=e.innerProps,a=e.innerRef,s=e.isMulti;return Yu("div",m({css:i("menuList",e),className:r({"menu-list":!0,"menu-list--is-multi":s},n),ref:a},o),t)},MenuPortal:Lc,LoadingMessage:Mc,NoOptionsMessage:Vc,MultiValue:tp,MultiValueContainer:Zc,MultiValueLabel:ep,MultiValueRemove:function(e){var t=e.children,n=e.innerProps;return Yu("div",n,t||Yu(Bc,{size:14}))},Option:function(e){var t=e.children,n=e.className,r=e.cx,i=e.getStyles,o=e.isDisabled,a=e.isFocused,s=e.isSelected,l=e.innerRef,u=e.innerProps;return Yu("div",m({css:i("option",e),className:r({option:!0,"option--is-disabled":o,"option--is-focused":a,"option--is-selected":s},n),ref:l},u),t)},Placeholder:function(e){var t=e.children,n=e.className,r=e.cx,i=e.getStyles,o=e.innerProps;return Yu("div",m({css:i("placeholder",e),className:r({placeholder:!0},n)},o),t)},SelectContainer:function(e){var t=e.children,n=e.className,r=e.cx,i=e.getStyles,o=e.innerProps,a=e.isDisabled,s=e.isRtl;return Yu("div",m({css:i("container",e),className:r({"--is-disabled":a,"--is-rtl":s},n)},o),t)},SingleValue:function(e){var t=e.children,n=e.className,r=e.cx,i=e.getStyles,o=e.isDisabled,a=e.innerProps;return Yu("div",m({css:i("singleValue",e),className:r({"single-value":!0,"single-value--is-disabled":o},n)},a),t)},ValueContainer:function(e){var t=e.children,n=e.className,r=e.cx,i=e.innerProps,o=e.isMulti,a=e.getStyles,s=e.hasValue;return Yu("div",m({css:a("valueContainer",e),className:r({"value-container":!0,"value-container--is-multi":o,"value-container--has-value":s},n)},i),t)}},rp=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function ip(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(r=e[n],i=t[n],!(r===i||rp(r)&&rp(i)))return!1;var r,i;return!0}var op=function(e,t){var n;void 0===t&&(t=ip);var r,i=[],o=!1;return function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return o&&n===this&&t(a,i)||(r=e.apply(this,a),o=!0,n=this,i=a),r}};for(var ap={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},sp=function(e){return Yu("span",m({css:ap},e))},lp={guidance:function(e){var t=e.isSearchable,n=e.isMulti,r=e.isDisabled,i=e.tabSelectsValue;switch(e.context){case"menu":return"Use Up and Down to choose options".concat(r?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(n?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,n=e.label,r=void 0===n?"":n,i=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(r,", deselected.");case"select-option":return"option ".concat(r,i?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,n=e.focused,r=void 0===n?{}:n,i=e.options,o=e.label,a=void 0===o?"":o,s=e.selectValue,l=e.isDisabled,u=e.isSelected,c=function(e,t){return e&&e.length?"".concat(e.indexOf(t)+1," of ").concat(e.length):""};if("value"===t&&s)return"value ".concat(a," focused, ").concat(c(s,r),".");if("menu"===t){var p=l?" disabled":"",d="".concat(u?"selected":"focused").concat(p);return"option ".concat(a," ").concat(d,", ").concat(c(i,r),".")}return""},onFilter:function(e){var t=e.inputValue,n=e.resultsMessage;return"".concat(n).concat(t?" for search term "+t:"",".")}},up=function(e){var t=e.ariaSelection,n=e.focusedOption,r=e.focusedValue,a=e.focusableOptions,s=e.isFocused,l=e.selectValue,u=e.selectProps,c=u.ariaLiveMessages,p=u.getOptionLabel,d=u.inputValue,h=u.isMulti,f=u.isOptionDisabled,m=u.isSearchable,g=u.menuIsOpen,y=u.options,v=u.screenReaderStatus,b=u.tabSelectsValue,x=u["aria-label"],w=u["aria-live"],_=Object(i.useMemo)((function(){return uc(uc({},lp),c||{})}),[c]),C=Object(i.useMemo)((function(){var e,n="";if(t&&_.onChange){var r=t.option,i=t.removedValue,o=t.value,a=i||r||(e=o,Array.isArray(e)?null:e),s=uc({isDisabled:a&&f(a),label:a?p(a):""},t);n=_.onChange(s)}return n}),[t,f,p,_]),S=Object(i.useMemo)((function(){var e="",t=n||r,i=!!(n&&l&&l.includes(n));if(t&&_.onFocus){var o={focused:t,label:p(t),isDisabled:f(t),isSelected:i,options:y,context:t===n?"menu":"value",selectValue:l};e=_.onFocus(o)}return e}),[n,r,p,f,_,y,l]),k=Object(i.useMemo)((function(){var e="";if(g&&y.length&&_.onFilter){var t=v({count:a.length});e=_.onFilter({inputValue:d,resultsMessage:t})}return e}),[a,d,g,_,y,v]),E=Object(i.useMemo)((function(){var e="";if(_.guidance){var t=r?"value":g?"menu":"input";e=_.guidance({"aria-label":x,context:t,isDisabled:n&&f(n),isMulti:h,isSearchable:m,tabSelectsValue:b})}return e}),[x,n,r,h,f,m,g,_,b]),T="".concat(S," ").concat(k," ").concat(E);return Yu(sp,{"aria-live":w,"aria-atomic":"false","aria-relevant":"additions text"},s&&Yu(o.a.Fragment,null,Yu("span",{id:"aria-selection"},C),Yu("span",{id:"aria-context"},T)))},cp=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],pp=new RegExp("["+cp.map((function(e){return e.letters})).join("")+"]","g"),dp={},hp=0;hp<cp.length;hp++)for(var fp=cp[hp],mp=0;mp<fp.letters.length;mp++)dp[fp.letters[mp]]=fp.base;var gp=function(e){return e.replace(pp,(function(e){return dp[e]}))},yp=op(gp),vp=function(e){return e.replace(/^\s+|\s+$/g,"")},bp=function(e){return"".concat(e.label," ").concat(e.value)};function xp(e){e.in,e.out,e.onExited,e.appear,e.enter,e.exit;var t=e.innerRef;e.emotion;var n=qt(e,["in","out","onExited","appear","enter","exit","innerRef","emotion"]);return Yu("input",m({ref:t},n,{css:Zu({label:"dummyInput",background:0,border:0,fontSize:"inherit",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(0)"},"","")}))}var wp=["boxSizing","height","overflow","paddingRight","position"],_p={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function Cp(e){e.preventDefault()}function Sp(e){e.stopPropagation()}function kp(){var e=this.scrollTop,t=this.scrollHeight,n=e+this.offsetHeight;0===e?this.scrollTop=1:n===t&&(this.scrollTop=e-1)}function Ep(){return"ontouchstart"in window||navigator.maxTouchPoints}var Tp=!("undefined"==typeof window||!window.document||!window.document.createElement),Ip=0,Pp={capture:!1,passive:!1};var Op=function(){return document.activeElement&&document.activeElement.blur()},Np={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function Rp(e){var t=e.children,n=e.lockEnabled,r=e.captureEnabled,a=function(e){var t=e.isEnabled,n=e.onBottomArrive,r=e.onBottomLeave,o=e.onTopArrive,a=e.onTopLeave,s=Object(i.useRef)(!1),l=Object(i.useRef)(!1),u=Object(i.useRef)(0),c=Object(i.useRef)(null),p=Object(i.useCallback)((function(e,t){if(null!==c.current){var i=c.current,u=i.scrollTop,p=i.scrollHeight,d=i.clientHeight,h=c.current,f=t>0,m=p-d-u,g=!1;m>t&&s.current&&(r&&r(e),s.current=!1),f&&l.current&&(a&&a(e),l.current=!1),f&&t>m?(n&&!s.current&&n(e),h.scrollTop=p,g=!0,s.current=!0):!f&&-t>u&&(o&&!l.current&&o(e),h.scrollTop=0,g=!0,l.current=!0),g&&function(e){e.preventDefault(),e.stopPropagation()}(e)}}),[]),d=Object(i.useCallback)((function(e){p(e,e.deltaY)}),[p]),h=Object(i.useCallback)((function(e){u.current=e.changedTouches[0].clientY}),[]),f=Object(i.useCallback)((function(e){var t=u.current-e.changedTouches[0].clientY;p(e,t)}),[p]),m=Object(i.useCallback)((function(e){if(e){var t=!!Tc&&{passive:!1};"function"==typeof e.addEventListener&&e.addEventListener("wheel",d,t),"function"==typeof e.addEventListener&&e.addEventListener("touchstart",h,t),"function"==typeof e.addEventListener&&e.addEventListener("touchmove",f,t)}}),[f,h,d]),g=Object(i.useCallback)((function(e){e&&("function"==typeof e.removeEventListener&&e.removeEventListener("wheel",d,!1),"function"==typeof e.removeEventListener&&e.removeEventListener("touchstart",h,!1),"function"==typeof e.removeEventListener&&e.removeEventListener("touchmove",f,!1))}),[f,h,d]);return Object(i.useEffect)((function(){if(t){var e=c.current;return m(e),function(){g(e)}}}),[t,m,g]),function(e){c.current=e}}({isEnabled:void 0===r||r,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),s=function(e){var t=e.isEnabled,n=e.accountForScrollbars,r=void 0===n||n,o=Object(i.useRef)({}),a=Object(i.useRef)(null),s=Object(i.useCallback)((function(e){if(Tp){var t=document.body,n=t&&t.style;if(r&&wp.forEach((function(e){var t=n&&n[e];o.current[e]=t})),r&&Ip<1){var i=parseInt(o.current.paddingRight,10)||0,a=document.body?document.body.clientWidth:0,s=window.innerWidth-a+i||0;Object.keys(_p).forEach((function(e){var t=_p[e];n&&(n[e]=t)})),n&&(n.paddingRight="".concat(s,"px"))}t&&Ep()&&(t.addEventListener("touchmove",Cp,Pp),e&&(e.addEventListener("touchstart",kp,Pp),e.addEventListener("touchmove",Sp,Pp))),Ip+=1}}),[]),l=Object(i.useCallback)((function(e){if(Tp){var t=document.body,n=t&&t.style;Ip=Math.max(Ip-1,0),r&&Ip<1&&wp.forEach((function(e){var t=o.current[e];n&&(n[e]=t)})),t&&Ep()&&(t.removeEventListener("touchmove",Cp,Pp),e&&(e.removeEventListener("touchstart",kp,Pp),e.removeEventListener("touchmove",Sp,Pp)))}}),[]);return Object(i.useEffect)((function(){if(t){var e=a.current;return s(e),function(){l(e)}}}),[t,s,l]),function(e){a.current=e}}({isEnabled:n});return Yu(o.a.Fragment,null,n&&Yu("div",{onClick:Op,css:Np}),t((function(e){a(e),s(e)})))}var Ap={clearIndicator:Qc,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":null,pointerEvents:t?"none":null,position:"relative"}},control:function(e){var t=e.isDisabled,n=e.isFocused,r=e.theme,i=r.colors,o=r.borderRadius,a=r.spacing;return{label:"control",alignItems:"center",backgroundColor:t?i.neutral5:i.neutral0,borderColor:t?i.neutral10:n?i.primary:i.neutral20,borderRadius:o,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(i.primary):null,cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms","&:hover":{borderColor:n?i.primary:i.neutral30}}},dropdownIndicator:Hc,group:function(e){var t=e.theme.spacing;return{paddingBottom:2*t.baseUnit,paddingTop:2*t.baseUnit}},groupHeading:function(e){var t=e.theme.spacing;return{label:"group",color:"#999",cursor:"default",display:"block",fontSize:"75%",fontWeight:"500",marginBottom:"0.25em",paddingLeft:3*t.baseUnit,paddingRight:3*t.baseUnit,textTransform:"uppercase"}},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e){var t=e.isDisabled,n=e.theme,r=n.spacing.baseUnit,i=n.colors;return{label:"indicatorSeparator",alignSelf:"stretch",backgroundColor:t?i.neutral10:i.neutral20,marginBottom:2*r,marginTop:2*r,width:1}},input:function(e){var t=e.isDisabled,n=e.theme,r=n.spacing,i=n.colors;return{margin:r.baseUnit/2,paddingBottom:r.baseUnit/2,paddingTop:r.baseUnit/2,visibility:t?"hidden":"visible",color:i.neutral80}},loadingIndicator:function(e){var t=e.isFocused,n=e.size,r=e.theme,i=r.colors,o=r.spacing.baseUnit;return{label:"loadingIndicator",color:t?i.neutral60:i.neutral20,display:"flex",padding:2*o,transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"}},loadingMessage:Dc,menu:function(e){var t,n=e.placement,r=e.theme,i=r.borderRadius,o=r.spacing,a=r.colors;return R(t={label:"menu"},function(e){return e?{bottom:"top",top:"bottom"}[e]:"bottom"}(n),"100%"),R(t,"backgroundColor",a.neutral0),R(t,"borderRadius",i),R(t,"boxShadow","0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)"),R(t,"marginBottom",o.menuGutter),R(t,"marginTop",o.menuGutter),R(t,"position","absolute"),R(t,"width","100%"),R(t,"zIndex",1),t},menuList:function(e){var t=e.maxHeight,n=e.theme.spacing.baseUnit;return{maxHeight:t,overflowY:"auto",paddingBottom:n,paddingTop:n,position:"relative",WebkitOverflowScrolling:"touch"}},menuPortal:function(e){var t=e.rect,n=e.offset,r=e.position;return{left:t.left,position:r,top:n,width:t.width,zIndex:1}},multiValue:function(e){var t=e.theme,n=t.spacing,r=t.borderRadius;return{label:"multiValue",backgroundColor:t.colors.neutral10,borderRadius:r/2,display:"flex",margin:n.baseUnit/2,minWidth:0}},multiValueLabel:function(e){var t=e.theme,n=t.borderRadius,r=t.colors,i=e.cropWithEllipsis;return{borderRadius:n/2,color:r.neutral80,fontSize:"85%",overflow:"hidden",padding:3,paddingLeft:6,textOverflow:i?"ellipsis":null,whiteSpace:"nowrap"}},multiValueRemove:function(e){var t=e.theme,n=t.spacing,r=t.borderRadius,i=t.colors;return{alignItems:"center",borderRadius:r/2,backgroundColor:e.isFocused&&i.dangerLight,display:"flex",paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:i.dangerLight,color:i.danger}}},noOptionsMessage:Ac,option:function(e){var t=e.isDisabled,n=e.isFocused,r=e.isSelected,i=e.theme,o=i.spacing,a=i.colors;return{label:"option",backgroundColor:r?a.primary:n?a.primary25:"transparent",color:t?a.neutral20:r?a.neutral0:"inherit",cursor:"default",display:"block",fontSize:"inherit",padding:"".concat(2*o.baseUnit,"px ").concat(3*o.baseUnit,"px"),width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",":active":{backgroundColor:!t&&(r?a.primary:a.primary50)}}},placeholder:function(e){var t=e.theme,n=t.spacing;return{label:"placeholder",color:t.colors.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2,position:"absolute",top:"50%",transform:"translateY(-50%)"}},singleValue:function(e){var t=e.isDisabled,n=e.theme,r=n.spacing,i=n.colors;return{label:"singleValue",color:t?i.neutral40:i.neutral80,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2,maxWidth:"calc(100% - ".concat(2*r.baseUnit,"px)"),overflow:"hidden",position:"absolute",textOverflow:"ellipsis",whiteSpace:"nowrap",top:"50%",transform:"translateY(-50%)"}},valueContainer:function(e){var t=e.theme.spacing;return{alignItems:"center",display:"flex",flex:1,flexWrap:"wrap",padding:"".concat(t.baseUnit/2,"px ").concat(2*t.baseUnit,"px"),WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"}}};var Dp,Vp={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},Mp={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:Cc(),captureMenuScroll:!Cc(),closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){var n=uc({ignoreCase:!0,ignoreAccents:!0,stringify:bp,trim:!0,matchFrom:"any"},Dp),r=n.ignoreCase,i=n.ignoreAccents,o=n.stringify,a=n.trim,s=n.matchFrom,l=a?vp(t):t,u=a?vp(o(e)):o(e);return r&&(l=l.toLowerCase(),u=u.toLowerCase()),i&&(l=yp(l),u=gp(u)),"start"===s?u.substr(0,l.length)===l:u.indexOf(l)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(e){return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(1!==t?"s":""," available")},styles:{},tabIndex:"0",tabSelectsValue:!0};function Fp(e,t,n,r){return{type:"option",data:t,isDisabled:Bp(e,t,n),isSelected:Up(e,t,n),label:qp(e,t),value:$p(e,t),index:r}}function Lp(e,t){return e.options.map((function(n,r){if(n.options){var i=n.options.map((function(n,r){return Fp(e,n,t,r)})).filter((function(t){return jp(e,t)}));return i.length>0?{type:"group",data:n,options:i,index:r}:void 0}var o=Fp(e,n,t,r);return jp(e,o)?o:void 0})).filter((function(e){return!!e}))}function zp(e){return e.reduce((function(e,t){return"group"===t.type?e.push.apply(e,Lr(t.options.map((function(e){return e.data})))):e.push(t.data),e}),[])}function jp(e,t){var n=e.inputValue,r=void 0===n?"":n,i=t.data,o=t.isSelected,a=t.label,s=t.value;return(!Hp(e)||!o)&&Wp(e,{label:a,value:s,data:i},r)}var qp=function(e,t){return e.getOptionLabel(t)},$p=function(e,t){return e.getOptionValue(t)};function Bp(e,t,n){return"function"==typeof e.isOptionDisabled&&e.isOptionDisabled(t,n)}function Up(e,t,n){if(n.indexOf(t)>-1)return!0;if("function"==typeof e.isOptionSelected)return e.isOptionSelected(t,n);var r=$p(e,t);return n.some((function(t){return $p(e,t)===r}))}function Wp(e,t,n){return!e.filterOption||e.filterOption(t,n)}var Hp=function(e){var t=e.hideSelectedOptions,n=e.isMulti;return void 0===t?n:t},Qp=1,Gp=function(e){ac(n,e);var t=dc(n);function n(e){var r;return oc(this,n),(r=t.call(this,e)).state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},r.blockOptionHover=!1,r.isComposing=!1,r.commonProps=void 0,r.initialTouchX=0,r.initialTouchY=0,r.instancePrefix="",r.openAfterFocus=!1,r.scrollToFocusedOptionOnUpdate=!1,r.userIsDragging=void 0,r.controlRef=null,r.getControlRef=function(e){r.controlRef=e},r.focusedOptionRef=null,r.getFocusedOptionRef=function(e){r.focusedOptionRef=e},r.menuListRef=null,r.getMenuListRef=function(e){r.menuListRef=e},r.inputRef=null,r.getInputRef=function(e){r.inputRef=e},r.focus=r.focusInput,r.blur=r.blurInput,r.onChange=function(e,t){var n=r.props,i=n.onChange,o=n.name;t.name=o,r.ariaOnChange(e,t),i(e,t)},r.setValue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"set-value",n=arguments.length>2?arguments[2]:void 0,i=r.props,o=i.closeMenuOnSelect,a=i.isMulti;r.onInputChange("",{action:"set-value"}),o&&(r.setState({inputIsHiddenAfterUpdate:!a}),r.onMenuClose()),r.setState({clearFocusValueOnUpdate:!0}),r.onChange(e,{action:t,option:n})},r.selectOption=function(e){var t=r.props,n=t.blurInputOnSelect,i=t.isMulti,o=t.name,a=r.state.selectValue,s=i&&r.isOptionSelected(e,a),l=r.isOptionDisabled(e,a);if(s){var u=r.getOptionValue(e);r.setValue(a.filter((function(e){return r.getOptionValue(e)!==u})),"deselect-option",e)}else{if(l)return void r.ariaOnChange(e,{action:"select-option",name:o});i?r.setValue([].concat(Lr(a),[e]),"select-option",e):r.setValue(e,"select-option")}n&&r.blurInput()},r.removeValue=function(e){var t=r.props.isMulti,n=r.state.selectValue,i=r.getOptionValue(e),o=n.filter((function(e){return r.getOptionValue(e)!==i})),a=t?o:o[0]||null;r.onChange(a,{action:"remove-value",removedValue:e}),r.focusInput()},r.clearValue=function(){var e=r.state.selectValue;r.onChange(r.props.isMulti?[]:null,{action:"clear",removedValues:e})},r.popValue=function(){var e=r.props.isMulti,t=r.state.selectValue,n=t[t.length-1],i=t.slice(0,t.length-1),o=e?i:i[0]||null;r.onChange(o,{action:"pop-value",removedValue:n})},r.getValue=function(){return r.state.selectValue},r.cx=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return mc.apply(void 0,[r.props.classNamePrefix].concat(t))},r.getOptionLabel=function(e){return qp(r.props,e)},r.getOptionValue=function(e){return $p(r.props,e)},r.getStyles=function(e,t){var n=Ap[e](t);n.boxSizing="border-box";var i=r.props.styles[e];return i?i(n,t):n},r.getElementId=function(e){return"".concat(r.instancePrefix,"-").concat(e)},r.getComponents=function(){return e=r.props,uc(uc({},np),e.components);var e},r.buildCategorizedOptions=function(){return Lp(r.props,r.state.selectValue)},r.getCategorizedOptions=function(){return r.props.menuIsOpen?r.buildCategorizedOptions():[]},r.buildFocusableOptions=function(){return zp(r.buildCategorizedOptions())},r.getFocusableOptions=function(){return r.props.menuIsOpen?r.buildFocusableOptions():[]},r.ariaOnChange=function(e,t){r.setState({ariaSelection:uc({value:e},t)})},r.onMenuMouseDown=function(e){0===e.button&&(e.stopPropagation(),e.preventDefault(),r.focusInput())},r.onMenuMouseMove=function(e){r.blockOptionHover=!1},r.onControlMouseDown=function(e){var t=r.props.openMenuOnClick;r.state.isFocused?r.props.menuIsOpen?"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&r.onMenuClose():t&&r.openMenu("first"):(t&&(r.openAfterFocus=!0),r.focusInput()),"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&e.preventDefault()},r.onDropdownIndicatorMouseDown=function(e){if(!(e&&"mousedown"===e.type&&0!==e.button||r.props.isDisabled)){var t=r.props,n=t.isMulti,i=t.menuIsOpen;r.focusInput(),i?(r.setState({inputIsHiddenAfterUpdate:!n}),r.onMenuClose()):r.openMenu("first"),e.preventDefault(),e.stopPropagation()}},r.onClearIndicatorMouseDown=function(e){e&&"mousedown"===e.type&&0!==e.button||(r.clearValue(),e.stopPropagation(),r.openAfterFocus=!1,"touchend"===e.type?r.focusInput():setTimeout((function(){return r.focusInput()})))},r.onScroll=function(e){"boolean"==typeof r.props.closeMenuOnScroll?e.target instanceof HTMLElement&&vc(e.target)&&r.props.onMenuClose():"function"==typeof r.props.closeMenuOnScroll&&r.props.closeMenuOnScroll(e)&&r.props.onMenuClose()},r.onCompositionStart=function(){r.isComposing=!0},r.onCompositionEnd=function(){r.isComposing=!1},r.onTouchStart=function(e){var t=e.touches,n=t&&t.item(0);n&&(r.initialTouchX=n.clientX,r.initialTouchY=n.clientY,r.userIsDragging=!1)},r.onTouchMove=function(e){var t=e.touches,n=t&&t.item(0);if(n){var i=Math.abs(n.clientX-r.initialTouchX),o=Math.abs(n.clientY-r.initialTouchY);r.userIsDragging=i>5||o>5}},r.onTouchEnd=function(e){r.userIsDragging||(r.controlRef&&!r.controlRef.contains(e.target)&&r.menuListRef&&!r.menuListRef.contains(e.target)&&r.blurInput(),r.initialTouchX=0,r.initialTouchY=0)},r.onControlTouchEnd=function(e){r.userIsDragging||r.onControlMouseDown(e)},r.onClearIndicatorTouchEnd=function(e){r.userIsDragging||r.onClearIndicatorMouseDown(e)},r.onDropdownIndicatorTouchEnd=function(e){r.userIsDragging||r.onDropdownIndicatorMouseDown(e)},r.handleInputChange=function(e){var t=e.currentTarget.value;r.setState({inputIsHiddenAfterUpdate:!1}),r.onInputChange(t,{action:"input-change"}),r.props.menuIsOpen||r.onMenuOpen()},r.onInputFocus=function(e){r.props.onFocus&&r.props.onFocus(e),r.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(r.openAfterFocus||r.props.openMenuOnFocus)&&r.openMenu("first"),r.openAfterFocus=!1},r.onInputBlur=function(e){r.menuListRef&&r.menuListRef.contains(document.activeElement)?r.inputRef.focus():(r.props.onBlur&&r.props.onBlur(e),r.onInputChange("",{action:"input-blur"}),r.onMenuClose(),r.setState({focusedValue:null,isFocused:!1}))},r.onOptionHover=function(e){r.blockOptionHover||r.state.focusedOption===e||r.setState({focusedOption:e})},r.shouldHideSelectedOptions=function(){return Hp(r.props)},r.onKeyDown=function(e){var t=r.props,n=t.isMulti,i=t.backspaceRemovesValue,o=t.escapeClearsValue,a=t.inputValue,s=t.isClearable,l=t.isDisabled,u=t.menuIsOpen,c=t.onKeyDown,p=t.tabSelectsValue,d=t.openMenuOnFocus,h=r.state,f=h.focusedOption,m=h.focusedValue,g=h.selectValue;if(!(l||"function"==typeof c&&(c(e),e.defaultPrevented))){switch(r.blockOptionHover=!0,e.key){case"ArrowLeft":if(!n||a)return;r.focusValue("previous");break;case"ArrowRight":if(!n||a)return;r.focusValue("next");break;case"Delete":case"Backspace":if(a)return;if(m)r.removeValue(m);else{if(!i)return;n?r.popValue():s&&r.clearValue()}break;case"Tab":if(r.isComposing)return;if(e.shiftKey||!u||!p||!f||d&&r.isOptionSelected(f,g))return;r.selectOption(f);break;case"Enter":if(229===e.keyCode)break;if(u){if(!f)return;if(r.isComposing)return;r.selectOption(f);break}return;case"Escape":u?(r.setState({inputIsHiddenAfterUpdate:!1}),r.onInputChange("",{action:"menu-close"}),r.onMenuClose()):s&&o&&r.clearValue();break;case" ":if(a)return;if(!u){r.openMenu("first");break}if(!f)return;r.selectOption(f);break;case"ArrowUp":u?r.focusOption("up"):r.openMenu("last");break;case"ArrowDown":u?r.focusOption("down"):r.openMenu("first");break;case"PageUp":if(!u)return;r.focusOption("pageup");break;case"PageDown":if(!u)return;r.focusOption("pagedown");break;case"Home":if(!u)return;r.focusOption("first");break;case"End":if(!u)return;r.focusOption("last");break;default:return}e.preventDefault()}},r.instancePrefix="react-select-"+(r.props.instanceId||++Qp),r.state.selectValue=gc(e.value),r}return Wt(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput()}},{key:"componentDidUpdate",value:function(e){var t,n,r,i,o,a=this.props,s=a.isDisabled,l=a.menuIsOpen,u=this.state.isFocused;(u&&!s&&e.isDisabled||u&&l&&!e.menuIsOpen)&&this.focusInput(),u&&s&&!e.isDisabled&&this.setState({isFocused:!1},this.onMenuClose),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(t=this.menuListRef,n=this.focusedOptionRef,r=t.getBoundingClientRect(),i=n.getBoundingClientRect(),o=n.offsetHeight/3,i.bottom+o>r.bottom?xc(t,Math.min(n.offsetTop+n.clientHeight-t.offsetHeight+o,t.scrollHeight)):i.top-o<r.top&&xc(t,Math.max(n.offsetTop-o,0)),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close"}),this.props.onMenuClose()}},{key:"onInputChange",value:function(e,t){this.props.onInputChange(e,t)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(e){var t=this,n=this.state,r=n.selectValue,i=n.isFocused,o=this.buildFocusableOptions(),a="first"===e?0:o.length-1;if(!this.props.isMulti){var s=o.indexOf(r[0]);s>-1&&(a=s)}this.scrollToFocusedOptionOnUpdate=!(i&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:o[a]},(function(){return t.onMenuOpen()}))}},{key:"focusValue",value:function(e){var t=this.state,n=t.selectValue,r=t.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var i=n.indexOf(r);r||(i=-1);var o=n.length-1,a=-1;if(n.length){switch(e){case"previous":a=0===i?0:-1===i?o:i-1;break;case"next":i>-1&&i<o&&(a=i+1)}this.setState({inputIsHidden:-1!==a,focusedValue:n[a]})}}}},{key:"focusOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first",t=this.props.pageSize,n=this.state.focusedOption,r=this.getFocusableOptions();if(r.length){var i=0,o=r.indexOf(n);n||(o=-1),"up"===e?i=o>0?o-1:r.length-1:"down"===e?i=(o+1)%r.length:"pageup"===e?(i=o-t)<0&&(i=0):"pagedown"===e?(i=o+t)>r.length-1&&(i=r.length-1):"last"===e&&(i=r.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:r[i],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?"function"==typeof this.props.theme?this.props.theme(Vp):uc(uc({},Vp),this.props.theme):Vp}},{key:"getCommonProps",value:function(){var e=this.clearValue,t=this.cx,n=this.getStyles,r=this.getValue,i=this.selectOption,o=this.setValue,a=this.props,s=a.isMulti,l=a.isRtl,u=a.options;return{clearValue:e,cx:t,getStyles:n,getValue:r,hasValue:this.hasValue(),isMulti:s,isRtl:l,options:u,selectOption:i,selectProps:a,setValue:o,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var e=this.props,t=e.isClearable,n=e.isMulti;return void 0===t?n:t}},{key:"isOptionDisabled",value:function(e,t){return Bp(this.props,e,t)}},{key:"isOptionSelected",value:function(e,t){return Up(this.props,e,t)}},{key:"filterOption",value:function(e,t){return Wp(this.props,e,t)}},{key:"formatOptionLabel",value:function(e,t){if("function"==typeof this.props.formatOptionLabel){var n=this.props.inputValue,r=this.state.selectValue;return this.props.formatOptionLabel(e,{context:t,inputValue:n,selectValue:r})}return this.getOptionLabel(e)}},{key:"formatGroupLabel",value:function(e){return this.props.formatGroupLabel(e)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var e=this.props,t=e.isDisabled,n=e.isSearchable,r=e.inputId,i=e.inputValue,a=e.tabIndex,s=e.form,l=this.getComponents().Input,u=this.state.inputIsHidden,c=this.commonProps,p=r||this.getElementId("input"),d={"aria-autocomplete":"list","aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"]};return n?o.a.createElement(l,m({},c,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:p,innerRef:this.getInputRef,isDisabled:t,isHidden:u,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:a,form:s,type:"text",value:i},d)):o.a.createElement(xp,m({id:p,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:hc,onFocus:this.onInputFocus,readOnly:!0,disabled:t,tabIndex:a,form:s,value:""},d))}},{key:"renderPlaceholderOrValue",value:function(){var e=this,t=this.getComponents(),n=t.MultiValue,r=t.MultiValueContainer,i=t.MultiValueLabel,a=t.MultiValueRemove,s=t.SingleValue,l=t.Placeholder,u=this.commonProps,c=this.props,p=c.controlShouldRenderValue,d=c.isDisabled,h=c.isMulti,f=c.inputValue,g=c.placeholder,y=this.state,v=y.selectValue,b=y.focusedValue,x=y.isFocused;if(!this.hasValue()||!p)return f?null:o.a.createElement(l,m({},u,{key:"placeholder",isDisabled:d,isFocused:x}),g);if(h)return v.map((function(t,s){var l=t===b;return o.a.createElement(n,m({},u,{components:{Container:r,Label:i,Remove:a},isFocused:l,isDisabled:d,key:"".concat(e.getOptionValue(t)).concat(s),index:s,removeProps:{onClick:function(){return e.removeValue(t)},onTouchEnd:function(){return e.removeValue(t)},onMouseDown:function(e){e.preventDefault(),e.stopPropagation()}},data:t}),e.formatOptionLabel(t,"value"))}));if(f)return null;var w=v[0];return o.a.createElement(s,m({},u,{data:w,isDisabled:d}),this.formatOptionLabel(w,"value"))}},{key:"renderClearIndicator",value:function(){var e=this.getComponents().ClearIndicator,t=this.commonProps,n=this.props,r=n.isDisabled,i=n.isLoading,a=this.state.isFocused;if(!this.isClearable()||!e||r||!this.hasValue()||i)return null;var s={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return o.a.createElement(e,m({},t,{innerProps:s,isFocused:a}))}},{key:"renderLoadingIndicator",value:function(){var e=this.getComponents().LoadingIndicator,t=this.commonProps,n=this.props,r=n.isDisabled,i=n.isLoading,a=this.state.isFocused;if(!e||!i)return null;return o.a.createElement(e,m({},t,{innerProps:{"aria-hidden":"true"},isDisabled:r,isFocused:a}))}},{key:"renderIndicatorSeparator",value:function(){var e=this.getComponents(),t=e.DropdownIndicator,n=e.IndicatorSeparator;if(!t||!n)return null;var r=this.commonProps,i=this.props.isDisabled,a=this.state.isFocused;return o.a.createElement(n,m({},r,{isDisabled:i,isFocused:a}))}},{key:"renderDropdownIndicator",value:function(){var e=this.getComponents().DropdownIndicator;if(!e)return null;var t=this.commonProps,n=this.props.isDisabled,r=this.state.isFocused,i={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return o.a.createElement(e,m({},t,{innerProps:i,isDisabled:n,isFocused:r}))}},{key:"renderMenu",value:function(){var e=this,t=this.getComponents(),n=t.Group,r=t.GroupHeading,i=t.Menu,a=t.MenuList,s=t.MenuPortal,l=t.LoadingMessage,u=t.NoOptionsMessage,c=t.Option,p=this.commonProps,d=this.state.focusedOption,h=this.props,f=h.captureMenuScroll,g=h.inputValue,y=h.isLoading,v=h.loadingMessage,b=h.minMenuHeight,x=h.maxMenuHeight,w=h.menuIsOpen,_=h.menuPlacement,C=h.menuPosition,S=h.menuPortalTarget,k=h.menuShouldBlockScroll,E=h.menuShouldScrollIntoView,T=h.noOptionsMessage,I=h.onMenuScrollToTop,P=h.onMenuScrollToBottom;if(!w)return null;var O,N=function(t,n){var r=t.type,i=t.data,a=t.isDisabled,s=t.isSelected,l=t.label,u=t.value,h=d===i,f=a?void 0:function(){return e.onOptionHover(i)},g=a?void 0:function(){return e.selectOption(i)},y="".concat(e.getElementId("option"),"-").concat(n),v={id:y,onClick:g,onMouseMove:f,onMouseOver:f,tabIndex:-1};return o.a.createElement(c,m({},p,{innerProps:v,data:i,isDisabled:a,isSelected:s,key:y,label:l,type:r,value:u,isFocused:h,innerRef:h?e.getFocusedOptionRef:void 0}),e.formatOptionLabel(t.data,"menu"))};if(this.hasOptions())O=this.getCategorizedOptions().map((function(t){if("group"===t.type){var i=t.data,a=t.options,s=t.index,l="".concat(e.getElementId("group"),"-").concat(s),u="".concat(l,"-heading");return o.a.createElement(n,m({},p,{key:l,data:i,options:a,Heading:r,headingProps:{id:u,data:t.data},label:e.formatGroupLabel(t.data)}),t.options.map((function(e){return N(e,"".concat(s,"-").concat(e.index))})))}if("option"===t.type)return N(t,"".concat(t.index))}));else if(y){var R=v({inputValue:g});if(null===R)return null;O=o.a.createElement(l,p,R)}else{var A=T({inputValue:g});if(null===A)return null;O=o.a.createElement(u,p,A)}var D={minMenuHeight:b,maxMenuHeight:x,menuPlacement:_,menuPosition:C,menuShouldScrollIntoView:E},V=o.a.createElement(Nc,m({},p,D),(function(t){var n=t.ref,r=t.placerProps,s=r.placement,l=r.maxHeight;return o.a.createElement(i,m({},p,D,{innerRef:n,innerProps:{onMouseDown:e.onMenuMouseDown,onMouseMove:e.onMenuMouseMove},isLoading:y,placement:s}),o.a.createElement(Rp,{captureEnabled:f,onTopArrive:I,onBottomArrive:P,lockEnabled:k},(function(t){return o.a.createElement(a,m({},p,{innerRef:function(n){e.getMenuListRef(n),t(n)},isLoading:y,maxHeight:l,focusedOption:d}),O)})))}));return S||"fixed"===C?o.a.createElement(s,m({},p,{appendTo:S,controlElement:this.controlRef,menuPlacement:_,menuPosition:C}),V):V}},{key:"renderFormField",value:function(){var e=this,t=this.props,n=t.delimiter,r=t.isDisabled,i=t.isMulti,a=t.name,s=this.state.selectValue;if(a&&!r){if(i){if(n){var l=s.map((function(t){return e.getOptionValue(t)})).join(n);return o.a.createElement("input",{name:a,type:"hidden",value:l})}var u=s.length>0?s.map((function(t,n){return o.a.createElement("input",{key:"i-".concat(n),name:a,type:"hidden",value:e.getOptionValue(t)})})):o.a.createElement("input",{name:a,type:"hidden"});return o.a.createElement("div",null,u)}var c=s[0]?this.getOptionValue(s[0]):"";return o.a.createElement("input",{name:a,type:"hidden",value:c})}}},{key:"renderLiveRegion",value:function(){var e=this.commonProps,t=this.state,n=t.ariaSelection,r=t.focusedOption,i=t.focusedValue,a=t.isFocused,s=t.selectValue,l=this.getFocusableOptions();return o.a.createElement(up,m({},e,{ariaSelection:n,focusedOption:r,focusedValue:i,isFocused:a,selectValue:s,focusableOptions:l}))}},{key:"render",value:function(){var e=this.getComponents(),t=e.Control,n=e.IndicatorsContainer,r=e.SelectContainer,i=e.ValueContainer,a=this.props,s=a.className,l=a.id,u=a.isDisabled,c=a.menuIsOpen,p=this.state.isFocused,d=this.commonProps=this.getCommonProps();return o.a.createElement(r,m({},d,{className:s,innerProps:{id:l,onKeyDown:this.onKeyDown},isDisabled:u,isFocused:p}),this.renderLiveRegion(),o.a.createElement(t,m({},d,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:u,isFocused:p,menuIsOpen:c}),o.a.createElement(i,m({},d,{isDisabled:u}),this.renderPlaceholderOrValue(),this.renderInput()),o.a.createElement(n,m({},d,{isDisabled:u}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevProps,r=t.clearFocusValueOnUpdate,i=t.inputIsHiddenAfterUpdate,o=e.options,a=e.value,s=e.menuIsOpen,l=e.inputValue,u={};if(n&&(a!==n.value||o!==n.options||s!==n.menuIsOpen||l!==n.inputValue)){var c=gc(a),p=s?function(e,t){return zp(Lp(e,t))}(e,c):[],d=r?function(e,t){var n=e.focusedValue,r=e.selectValue.indexOf(n);if(r>-1){if(t.indexOf(n)>-1)return n;if(r<t.length)return t[r]}return null}(t,c):null;u={selectValue:c,focusedOption:function(e,t){var n=e.focusedOption;return n&&t.indexOf(n)>-1?n:t[0]}(t,p),focusedValue:d,clearFocusValueOnUpdate:!1}}var h=null!=i&&e!==n?{inputIsHidden:i,inputIsHiddenAfterUpdate:void 0}:{};return uc(uc(uc({},u),h),{},{prevProps:e})}}]),n}(i.Component);Gp.defaultProps=Mp;var Kp={defaultInputValue:"",defaultMenuIsOpen:!1,defaultValue:null},Jp=(n(99),n(101),n(47),i.Component,function(e){var t,n;return n=t=function(t){ac(r,t);var n=dc(r);function r(){var e;oc(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i))).select=void 0,e.state={inputValue:void 0!==e.props.inputValue?e.props.inputValue:e.props.defaultInputValue,menuIsOpen:void 0!==e.props.menuIsOpen?e.props.menuIsOpen:e.props.defaultMenuIsOpen,value:void 0!==e.props.value?e.props.value:e.props.defaultValue},e.onChange=function(t,n){e.callProp("onChange",t,n),e.setState({value:t})},e.onInputChange=function(t,n){var r=e.callProp("onInputChange",t,n);e.setState({inputValue:void 0!==r?r:t})},e.onMenuOpen=function(){e.callProp("onMenuOpen"),e.setState({menuIsOpen:!0})},e.onMenuClose=function(){e.callProp("onMenuClose"),e.setState({menuIsOpen:!1})},e}return Wt(r,[{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"getProp",value:function(e){return void 0!==this.props[e]?this.props[e]:this.state[e]}},{key:"callProp",value:function(e){if("function"==typeof this.props[e]){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=this.props)[e].apply(t,r)}}},{key:"render",value:function(){var t=this,n=this.props;n.defaultInputValue,n.defaultMenuIsOpen,n.defaultValue;var r=qt(n,["defaultInputValue","defaultMenuIsOpen","defaultValue"]);return o.a.createElement(e,m({},r,{ref:function(e){t.select=e},inputValue:this.getProp("inputValue"),menuIsOpen:this.getProp("menuIsOpen"),onChange:this.onChange,onInputChange:this.onInputChange,onMenuClose:this.onMenuClose,onMenuOpen:this.onMenuOpen,value:this.getProp("value")}))}}]),r}(i.Component),t.defaultProps=Kp,n}(Gp));function Xp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xp(Object(n),!0).forEach((function(t){he()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zp={option:function(e,t){t.data,t.isDisabled;var n=t.isFocused;t.isSelected;return Yp(Yp({},e),{},{backgroundColor:n?"#999999":null,color:"#0052CC"})}},ed=[{value:"endWithEyes",label:"EndWithEyes",color:"#0052CC"},{value:"endWithMouth",label:"EndWithMouth",color:"#0052CC"},{value:"opposite",label:"Opposite",color:"#0052CC"},{value:"upload",label:"Upload",color:"#0052CC"}],td=[{value:"general",label:"General",color:"#0052CC"},{value:"kids",label:"Kids",color:"#0052CC"},{value:"mature",label:"Mature",color:"#0052CC"}],nd=ta((function(e){return{toolBarContainer:{display:"flex",flexDirection:"row"},toolBar:{paddingRight:20,paddingLeft:20,width:"90%",top:"50px",backgroundColor:"#C7EDCC"},toggleSwitch:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",flex:"1 1"},controlText:{color:"black",flex:"1"}}})),rd={host:{zoom:200,occlusion_mask:!1,feature_show:{eyes:{toggle:!1,sliderIndex:0},mouth:{toggle:!1,sliderIndex:0},nose:{toggle:!1,sliderIndex:0},bar:{toggle:!1,direction:!1,sliderIndex:0,position:0}},video:!0,audio:!0,recording:!1},guest:{zoom:200,occlusion_mask:!1,feature_show:{eyes:{toggle:!1,sliderIndex:0},mouth:{toggle:!1,sliderIndex:0},nose:{toggle:!1,sliderIndex:0},bar:{toggle:!1,direction:!1,sliderIndex:0,position:0}},video:!0,audio:!0,recording:!1}},id=n(48);var od={elements:[{type:"imagepicker",name:"question 1.1",title:"How did you overall feel? Please choose the manikin that most describes **your feeling**",choices:[{value:"item1",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/activation/1.png"},{value:"item2",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/activation/2.png"},{value:"item3",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/activation/3.png"},{value:"item4",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/activation/4.png"},{value:"item5",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/activation/5.png"}]},{type:"imagepicker",name:"question 1.2",title:"How did you overall feel? Please choose the manikin that most describes **your feeling**",choices:[{value:"item1",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/dominance/1.png"},{value:"item2",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/dominance/2.png"},{value:"item3",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/dominance/3.png"},{value:"item4",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/dominance/4.png"},{value:"item5",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/dominance/5.png"}]},{type:"imagepicker",name:"question 1.3",title:"How did you overall feel? Please choose the manikin that most describes **your feeling**",choices:[{value:"item1",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/valence/1.png"},{value:"item2",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/valence/2.png"},{value:"item3",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/valence/3.png"},{value:"item4",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/valence/4.png"},{value:"item5",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/valence/5.png"}]},{type:"imagepicker",name:"question 2.1",title:"Please choose the manikin that most describes how you think **your conversation partner** felt",choices:[{value:"item1",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/activation/1.png"},{value:"item2",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/activation/2.png"},{value:"item3",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/activation/3.png"},{value:"item4",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/activation/4.png"},{value:"item5",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/activation/5.png"}]},{type:"imagepicker",name:"question 2.2",title:"Please choose the manikin that most describes how you think **your conversation partner** felt",choices:[{value:"item1",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/dominance/1.png"},{value:"item2",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/dominance/2.png"},{value:"item3",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/dominance/3.png"},{value:"item4",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/dominance/4.png"},{value:"item5",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/dominance/5.png"}]},{type:"imagepicker",name:"question 2.3",title:"Please choose the manikin that most describes how you think **your conversation partner** felt.",choices:[{value:"item1",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/valence/1.png"},{value:"item2",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/valence/2.png"},{value:"item3",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/valence/3.png"},{value:"item4",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/valence/4.png"},{value:"item5",imageLink:"https://yfim.s3.ap-southeast-2.amazonaws.com/manikins/valence/5.png"}]}]};n(102);function ad(){return o.a.createElement("div",{className:"survey_topic"},o.a.createElement("p",{className:"survey_topic_head"},"YOUR FACE IS MUTED"),o.a.createElement("p",{className:"survey_topic_text"},o.a.createElement("i",null,"Your Face is Muted")," explores how a lack of non-verbal cues affects critical conversations and our ability to empathise.",o.a.createElement("br",null),o.a.createElement("br",null),"This is a two person experience. Please take a seat and wait for your conversation partner."))}function sd(){return o.a.createElement("p",{className:"consent_form"},"By continuing with Your Face is Muted we ask that you kindly consent to the following:",o.a.createElement("br",null),o.a.createElement("br",null),"1. I consent to participate in this project knowing that I can request further information by contacting the creators of this work or asking a floor assistant.",o.a.createElement("br",null),o.a.createElement("br",null),"2. I understand that the purpose of this research is to investigate how obfuscation of facial features, visuals, and audio can influence peoples ability to empathise with a conversation partner.",o.a.createElement("br",null),o.a.createElement("br",null),"3. In this project I will participate in a conversation with another person. The conversation will last for about 5 minutes.",o.a.createElement("br",null),o.a.createElement("br",null),"4. I understand that the conversation will be transmitted through video, and I will see my conversation partner through a web-camera.",o.a.createElement("br",null),o.a.createElement("br",null),"5. I understand that my participation in this project is for research purposes only.",o.a.createElement("br",null),o.a.createElement("br",null),"6. I understand that during the conversation, I will be asked to report my emotional states and assess the emotions of my conversation partner in a popup window that appears on the iPad screen.",o.a.createElement("br",null),o.a.createElement("br",null),"7. I understand that my voice will be recorded by the software.",o.a.createElement("br",null),o.a.createElement("br",null),"8. I understand that my participation is voluntary and that I am free to withdraw from this project by simply standing up anytime without explanation or prejudice and to withdraw any unprocessed data that I have provided.",o.a.createElement("br",null),o.a.createElement("br",null),"9. I understand that the data from this research will be stored at the University of Melbourne and will be destroyed 5 years after last publication.",o.a.createElement("br",null),o.a.createElement("br",null),"10. I have been informed that the confidentiality of the information Iprovide will be safeguarded subject to any legal requirements; my data will be password protected and accessible only by the researchers in question.",o.a.createElement("br",null))}function ld(e){var t=Object(i.useState)("kids"),n=jt()(t,2),r=n[0],a=n[1],s=Object(i.useState)(!1),l=jt()(s,2),u=l[0],c=l[1],p=Object(i.useState)(!0),d=jt()(p,2),h=d[0],f=d[1],m=Object(i.useState)(!1),g=jt()(m,2),y=g[0],v=g[1];return o.a.createElement("div",{className:"survey_topic"},o.a.createElement("div",{className:"survey_topic_container"},o.a.createElement("p",{className:"survey_topic_head"},"YOUR FACE IS MUTED"),o.a.createElement("p",{className:"survey_topic_text"},"This experience has been created by researchers at the University of Melbourne.",o.a.createElement("br",null),o.a.createElement("br",null),"Your Face is Muted explores how a lack of non-verbal cues affects critical conversations and our ability to empathise.",o.a.createElement("br",null),"By continuing in this experience, you give consent to the researchers involved."),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("hr",{style:{color:"white",background:"white",height:"2px"}}),o.a.createElement("div",{className:"survey_checkbox"},o.a.createElement("input",{type:"checkbox",onChange:function(e){c(e.target.checked),e.target.checked&&"kids"!=r&&(a("kids"),f(!1)),e.target.checked||"mature"==r||a("mature")}}),o.a.createElement("span",{class:"checkboxtext"}," I am under 18 years old ")),o.a.createElement("div",{className:u?"survey_diable_checkbox":"survey_checkbox"},o.a.createElement("input",{type:"checkbox",onChange:function(e){f(e.target.checked),console.log(e.target.checked)},disabled:u,checked:h}),o.a.createElement("span",{class:"checkboxtext"}," I agree to have my voice recorded")),o.a.createElement("button",{className:"survey_ready_button",onClick:function(){e.handler({rating:r,record:h})}},"START"),o.a.createElement("p",{style:{textDecoration:"underline",textAlign:"left"},onClick:function(){return v(!y)}},"Read full details of consent form"),y&&o.a.createElement(sd,null)))}var ud={1:"ICE BREAKER",2:"WOULD YOU RATHER",3:"DEBATE"};function cd(e){var t=e.stage;return t>3&&(t=3),o.a.createElement("div",{className:"survey_topic"},o.a.createElement("p",{className:"survey_topic_head"},"PART ",t," of 3",o.a.createElement("br",null),ud[t]),o.a.createElement("p",{className:"survey_topic_text"},"See prompts on screen. Talk about this with your partner."))}function pd(){return o.a.createElement("div",{className:"survey_topic"},o.a.createElement("p",{className:"survey_topic_head"},"YOUR FACE IS MUTED"),o.a.createElement("p",{className:"survey_topic_text"},"Waiting for a partner"))}function dd(){return o.a.createElement("div",{className:"survey_topic"},o.a.createElement("p",{className:"survey_topic_head"},"THANK YOU!"))}var hd=function(e){var t=Object(i.useState)(!1),n=jt()(t,2),r=n[0],a=n[1],s=Object(i.useState)(!1),l=jt()(s,2),u=l[0],c=l[1],p=Object(i.useState)(!1),d=jt()(p,2),h=d[0],f=d[1],m=Object(i.useState)(1),g=jt()(m,2),y=g[0],v=g[1],b=Object(i.useState)(!1),x=jt()(b,2),w=x[0],_=x[1],C=e.match.params,S=C.room,k=C.user,E=Object(i.useState)([]),T=jt()(E,2),I=T[0],P=T[1],O=Object(i.useState)(),N=jt()(O,2),R=N[0],A=N[1],D=Object(i.useState)(!1),V=jt()(D,2),M=V[0],F=V[1],L=Object(i.useState)(!1),z=jt()(L,2),j=z[0],q=z[1];function $(){v(1),a(!1),_(!1),c(!1),F(!1),f(!1)}Object(i.useEffect)((function(){var t=xl.connect("/".concat(Xa.NAMESPACES.CONTROL));console.log("SURVEY PAGE HERE, connecting to ".concat(null==t?void 0:t.nsp)),t.emit(Xa.SOCKET_CMDS.SURVEY_CONNECT,{room:e.match.params.room,user:e.match.params.user}),t.on(Xa.SOCKET_CMDS.ROOM_IDLE,(function(){console.log("room is idle now"),$()})),t.on(Xa.SOCKET_CMDS.SURVEY_START,(function(e){var t=e.stage;3==t||4==t?(a(!0),_(!0)):a(!0),v(t+1)})),t.on(Xa.SOCKET_CMDS.FACE_DETECTED,(function(){console.log("face detected"),c(!0)})),t.on(Xa.SOCKET_CMDS.PROCESS_START,(function(){console.log("process start"),f(!1),F(!0)})),t.on(Xa.SOCKET_CMDS.PROCESS_STOP,(function(e){var n=e.accident_stop;console.info("- Survey page process-stop",n),n||(console.log(Xa.SOCKET_CMDS.PROCESS_STOP,I),t.emit(Xa.SOCKET_CMDS.DATA_SEND,{data_type:Xa.DATA_TYPES.QUESTION,room:S,user:k,data:I}),q(!0),setTimeout((function(){q(!1)}),ps.TIMES.PROCESS_STOP_WAIT)),P([]),$()})),t.on(Xa.SOCKET_CMDS.RESET,(function(){$()})),A(t)}),[]);var B=new wl.Model(od),U=new wl.Model(od);function W(e){a(!1),_(!1),R.emit(Xa.SOCKET_CMDS.SURVEY_END,{room:S,user:k,survey:e});var t={submit_time:(new Date).getTime(),result:e.data},n=I;n.push(t),P(n),console.log("get answer, ",I,e.data)}return o.a.createElement("div",{style:{backgroundColor:"black",height:"100%"}},!u&&!M&&!r&&!j&&o.a.createElement(ad,null),u&&!M&&!r&&!j&&!h&&o.a.createElement(ld,{handler:function(e){var t=e.rating,n=e.record;console.log("select rating, ",t),console.log("select record",n),R.emit(Xa.SOCKET_CMDS.PROCESS_READY,{room:S,user:k,rating:t,record:n}),f(!0)}}),!M&&h&&o.a.createElement(pd,null),M&&!r&&o.a.createElement(cd,{stage:y}),j&&o.a.createElement(dd,null),r&&!w&&o.a.createElement(wl.Survey,{model:B,isExpanded:!0,onComplete:W}),r&&w&&o.a.createElement(wl.Survey,{model:U,isExpanded:!0,onComplete:W}))},fd=n(58),md=n.n(fd);(new Headers).append("Authorization","Basic "+btoa("admin:admin"));n(104);var gd="https://yourfaceismute.s3.ap-southeast-2.amazonaws.com/Gradient-white.mp4",yd=[gd,gd,gd,gd];Object(a.render)(o.a.createElement(h,{store:Ce},o.a.createElement(Ge,null,o.a.createElement(it,null,o.a.createElement(ct,{exact:!0,path:"/",component:At}),o.a.createElement(ct,{exact:!0,path:"/faceTest/",component:Pl}),o.a.createElement(ct,{exact:!0,path:"/room/:room/",component:El}),o.a.createElement(ct,{exact:!0,path:"/control/:room",component:function(e){var t=Object(i.useState)(rd),r=jt()(t,2),a=r[0],s=r[1],l=Object(i.useState)(!1),u=jt()(l,2),c=u[0],p=u[1],d=Object(i.useState)(td[0]),h=jt()(d,2),f=h[0],m=h[1],g=Object(i.useState)(!1),y=jt()(g,2),v=y[0],b=y[1],x=Object(i.useState)(ed[0]),w=jt()(x,2),_=w[0],C=w[1],S=Object(i.useState)(null),k=jt()(S,2),E=k[0],T=k[1],I=nd(),P=e.match.params.room,O="/".concat(Xa.NAMESPACES.CONTROL),N=xl(O,{autoConnect:!1});function R(e){var t={room:P,data:{user:e,controlData:a[e]}};console.log(t),N.emit(Xa.SOCKET_CMDS.CONTROL,t)}Object(i.useEffect)((function(){console.log("Connecting to socket ".concat(O)),N.connect(),console.log(N),N.emit(Xa.SOCKET_CMDS.CONTROL_ROOM,{room:P}),N.on("process-in-progress",(function(e){console.log(e);var t=e.time_diff;alert("process in ongoing, ".concat(t," seconds left"))})),N.on(Xa.SOCKET_CMDS.PROCESS_STOP,(function(){alert("process stop")}))}),[]),Object(i.useEffect)((function(){console.log(_),null!=_&&("upload"==_.value?b(!0):v&&b(!1))}),[_]),Object(i.useEffect)((function(){JSON.stringify(a.guest)!=JSON.stringify(rd.guest)&&(console.log("guest params change"),R("guest"))}),[a.guest]),Object(i.useEffect)((function(){JSON.stringify(a.host)!=JSON.stringify(rd.host)&&(console.log("host change"),R("host"))}),[a.host]);var A=function(e){var t=Object(i.useState)(!1),n=jt()(t,2),r=n[0],l=n[1],u=e.user,c="video".concat(u),p="audio".concat(u),d="mask".concat(u),h="eyes".concat(u),f="eyes".concat(u),m="mouth".concat(u),g="mouthSlider".concat(u),y="nose".concat(u),v="noseSlider".concat(u),b="barId".concat(u),x="barDirection".concat(u),w="barSlider".concat(u),_="barPosition".concat(u),C="recording".concat(u),S="zoom".concat(u);return o.a.createElement("div",{className:I.toolBar},o.a.createElement("div",{className:I.toggleSwitch},o.a.createElement(za,{id:S,defaultValue:a[u].zoom,step:25,marks:!0,min:100,max:500,valueLabelDisplay:"auto",onChange:function(e,t){s(Yp(Yp({},a),{},he()({},u,Yp(Yp({},a[u]),{},{zoom:t}))))}}),o.a.createElement("text",{className:I.controlText},"Freeze ",u,"'s Video"),o.a.createElement(na,{style:{justifyContent:"right"},id:c,isOn:a[u].video,handler:function(){s(Yp(Yp({},a),{},he()({},u,Yp(Yp({},a[u]),{},{video:!a[u].video}))))}})),o.a.createElement("div",{className:I.toggleSwitch},o.a.createElement("text",{className:I.controlText},"Mute ",u,"'s Audio"),o.a.createElement(na,{id:p,isOn:a[u].audio,handler:function(){s(Yp(Yp({},a),{},he()({},u,Yp(Yp({},a[u]),{},{audio:!a[u].audio}))))}})),o.a.createElement("div",{className:I.toggleSwitch},o.a.createElement("text",{className:I.controlText},"Recording ",u,"'s Video"),o.a.createElement(na,{id:C,isOn:a[u].recording,handler:function(){s(Yp(Yp({},a),{},he()({},u,Yp(Yp({},a[u]),{},{recording:!a[u].recording}))))}})),o.a.createElement("div",{className:I.toggleSwitch},o.a.createElement("text",{className:I.controlText},"Mask for ",u),o.a.createElement(na,{id:d,isOn:a[u].occlusion_mask,handler:function(){s(Yp(Yp({},a),{},he()({},u,Yp(Yp({},a[u]),{},{occlusion_mask:!a[u].occlusion_mask})))),l(!r)}})),o.a.createElement("div",{className:I.toggleSwitch},o.a.createElement("text",{className:I.controlText},"Eyes"),o.a.createElement(na,{id:h,isOn:a[u].feature_show.eyes.toggle,handler:function(){var e={toggle:!a[u].feature_show.eyes.toggle,sliderIndex:a[u].feature_show.eyes.sliderIndex};s(Yp(Yp({},a),{},he()({},u,Yp(Yp({},a[u]),{},{feature_show:Yp(Yp({},a[u].feature_show),{},{eyes:e})}))))}})),o.a.createElement(za,{id:f,defaultValue:a[u].feature_show.eyes.sliderIndex,step:1,marks:!0,min:0,max:10,valueLabelDisplay:"auto",onChange:function(e,t){var n={toggle:a[u].feature_show.eyes.toggle,sliderIndex:t};s(Yp(Yp({},a),{},he()({},u,Yp(Yp({},a[u]),{},{feature_show:Yp(Yp({},a[u].feature_show),{},{eyes:n})}))))}}),o.a.createElement("div",{className:I.toggleSwitch},o.a.createElement("text",{className:I.controlText},"Mouth"),o.a.createElement(na,{id:m,isOn:a[u].feature_show.mouth.toggle,handler:function(){var e={toggle:!a[u].feature_show.mouth.toggle,sliderIndex:a[u].feature_show.mouth.sliderIndex};s(Yp(Yp({},a),{},he()({},u,Yp(Yp({},a[u]),{},{feature_show:Yp(Yp({},a[u].feature_show),{},{mouth:e})}))))}})),o.a.createElement(za,{id:g,defaultValue:a[u].feature_show.mouth.sliderIndex,step:1,marks:!0,min:0,max:10,valueLabelDisplay:"auto",onChange:function(e,t){var n={toggle:a[u].feature_show.mouth.toggle,sliderIndex:t};s(Yp(Yp({},a),{},he()({},u,Yp(Yp({},a[u]),{},{feature_show:Yp(Yp({},a[u].feature_show),{},{mouth:n})}))))}}),o.a.createElement("div",{className:I.toggleSwitch},o.a.createElement("text",{className:I.controlText},"Nose"),o.a.createElement(na,{id:y,isOn:a[u].feature_show.nose.toggle,handler:function(){var e={toggle:!a[u].feature_show.nose.toggle,sliderIndex:a[u].feature_show.nose.sliderIndex};s(Yp(Yp({},a),{},he()({},u,Yp(Yp({},a[u]),{},{feature_show:Yp(Yp({},a[u].feature_show),{},{nose:e})}))))}})),o.a.createElement(za,{id:v,defaultValue:a[u].feature_show.nose.sliderIndex,step:1,marks:!0,min:0,max:10,valueLabelDisplay:"auto",onChange:function(e,t){var n={toggle:a[u].feature_show.nose.toggle,sliderIndex:t};s(Yp(Yp({},a),{},he()({},u,Yp(Yp({},a[u]),{},{feature_show:Yp(Yp({},a[u].feature_show),{},{nose:n})}))))}}),o.a.createElement("div",{className:I.toggleSwitch},o.a.createElement("text",{className:I.controlText},"Bar Zone"),o.a.createElement(na,{id:b,isOn:a[u].feature_show.bar.toggle,handler:function(){var e=Yp(Yp({},a[u].feature_show.bar),{},{toggle:!a[u].feature_show.bar.toggle});s(Yp(Yp({},a),{},he()({},u,Yp(Yp({},a[u]),{},{feature_show:Yp(Yp({},a[u].feature_show),{},{bar:e})}))))}}),o.a.createElement("text",{className:I.controlText},"Horizontal/Vertical"),o.a.createElement(na,{id:x,isOn:a[u].feature_show.bar.direction,handler:function(){var e=Yp(Yp({},a[u].feature_show.bar),{},{direction:!a[u].feature_show.bar.direction});s(Yp(Yp({},a),{},he()({},u,Yp(Yp({},a[u]),{},{feature_show:Yp(Yp({},a[u].feature_show),{},{bar:e})}))))}})),o.a.createElement(za,{id:w,defaultValue:a[u].feature_show.bar.sliderIndex,step:1,marks:!0,min:0,max:10,valueLabelDisplay:"auto",onChange:function(e,t){var n=Yp(Yp({},a[u].feature_show.bar),{},{sliderIndex:t});s(Yp(Yp({},a),{},he()({},u,Yp(Yp({},a[u]),{},{feature_show:Yp(Yp({},a[u].feature_show),{},{bar:n})}))))}}),o.a.createElement(za,{id:_,defaultValue:a[u].feature_show.bar.position,step:1,marks:!0,min:0,max:10,valueLabelDisplay:"auto",onChange:function(e,t){var n=Yp(Yp({},a[u].feature_show.bar),{},{position:t});s(Yp(Yp({},a),{},he()({},u,Yp(Yp({},a[u]),{},{feature_show:Yp(Yp({},a[u].feature_show),{},{bar:n})}))))}}))};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{top:"10px",display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"center"}},o.a.createElement("div",{style:{width:"45%",flexDirection:"col",marginRight:10}},o.a.createElement(A,{user:"host"})),o.a.createElement("div",{style:{width:"45%",flexDirection:"col"}},o.a.createElement(A,{user:"guest"}))),o.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyItems:"center",alignItems:"center",justifyContent:"center"}},o.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.a.createElement("p",null,"Topics : "),o.a.createElement("div",{style:{display:"inline-block",width:"8em",height:"5em",lineHeight:"2ex",fontSize:"0.8em"}},o.a.createElement(Jp,{defaultValue:f,onChange:m,options:td,styles:Zp}))),o.a.createElement("div",{style:{display:"flex",flexDirection:"row"}}," ",o.a.createElement("p",null,"Mask Type: "),o.a.createElement("div",{style:{display:"inline-block",width:"8em",height:"5em",lineHeight:"2ex",fontSize:"0.8em"}},o.a.createElement(Jp,{defaultValue:_,onChange:C,options:ed,styles:Zp})),v&&o.a.createElement(Nl.a,{handleFiles:function(e){return function(e){console.log("uploading config file");var t=new FileReader;t.onload=function(e){var n=JSON.parse(t.result);T(n)},t.readAsText(e[0])}(e)},fileTypes:".json"},"Upload Mask")),o.a.createElement(Wa,{title:"Title",visible:c,onOk:function(){return p(!1)},onCancel:function(){return p(!1)}},o.a.createElement("h1",null,"Are you ready?")),o.a.createElement("button",{onClick:function(){return console.log("process start, asking for ready"),e="upload"==_.value?E:n(94)("./"+_.value+".json"),console.log(e),void(null!=_&&null!=f?N.emit(Xa.SOCKET_CMDS.PROCESS_CONTROL,{room:P,cfg:e,topic:f.value}):alert("please select topics and mask type"));var e},className:"primary-button"},"Process Start"),o.a.createElement("button",{onClick:function(){return console.log("force process start, asking for ready"),N.emit(Xa.SOCKET_CMDS.PROCESS_READY,{room:P,user:"host"}),void N.emit(Xa.SOCKET_CMDS.PROCESS_READY,{room:P,user:"guest"})},className:"primary-button"},"Force Start"),o.a.createElement("button",{onClick:function(){return e=new Blob([JSON.stringify(a)],{type:"text/plain;charset=utf-8"}),void id.saveAs(e,"maskConfiguration.json");var e},className:"primary-button"},"Saving setting")))}}),o.a.createElement(ct,{exact:!0,path:"/survey/:room/:user",component:hd}),o.a.createElement(ct,{exact:!0,path:"/projection/:room/:user",component:function(e){var t=Object(i.useState)(0),n=jt()(t,2),r=n[0],a=n[1];return Object(i.useEffect)((function(){var t=xl.connect("/projection");t.emit(Xa.SOCKET_CMDS.PROJECTION_CONNECT,{room:e.match.params.room,user:e.match.params.user}),t.on(Xa.SOCKET_CMDS.PROCESS_STOP,(function(){a(0)})),t.on(Xa.SOCKET_CMDS.STAGE_CONTROL,(function(e){var t=e.stage;console.log("stage ",t),t<4&&a(t)}))}),[]),o.a.createElement("div",null,o.a.createElement("p",null,"test"),o.a.createElement("video",{key:r,controls:!0,autoPlay:!0,loop:!0,muted:!0,style:{width:"100vw",height:"100vh",objectFit:"cover",position:"fixed",left:0,top:0}},o.a.createElement("source",{src:yd[r],type:"video/mp4"})))}}),o.a.createElement(ct,{exact:!0,path:"/data",component:function(e){var t=Object(i.useState)(),n=jt()(t,2),r=(n[0],n[1]),a=Object(i.useState)(),s=jt()(a,2),l=s[0],u=s[1],c=Object(i.useState)(0),p=jt()(c,2);p[0],p[1];return Object(i.useEffect)((function(){var e=xl.connect("/".concat(Xa.NAMESPACES.CONTROL));e.emit(Xa.SOCKET_CMDS.DATA_CONNECT),e.on("data-retrieve",(function(e){r(e);var t=e.length;u(e[t-1])}))}),[]),o.a.createElement("div",{style:{padding:"15px"}},o.a.createElement(md.a,{src:l,theme:"google",style:{fontSize:"15px"}}))}})))),document.getElementById("app"))}]);